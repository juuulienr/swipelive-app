/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(E){const S=Object.create(null);for(const x of E.split(","))S[x]=1;return x=>x in S}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=E=>E.charCodeAt(0)===111&&E.charCodeAt(1)===110&&(E.charCodeAt(2)>122||E.charCodeAt(2)<97),isModelListener=E=>E.startsWith("onUpdate:"),extend$1=Object.assign,remove=(E,S)=>{const x=E.indexOf(S);x>-1&&E.splice(x,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(E,S)=>hasOwnProperty$1.call(E,S),isArray$1=Array.isArray,isMap=E=>toTypeString(E)==="[object Map]",isSet=E=>toTypeString(E)==="[object Set]",isDate=E=>toTypeString(E)==="[object Date]",isFunction$2=E=>typeof E=="function",isString=E=>typeof E=="string",isSymbol=E=>typeof E=="symbol",isObject$3=E=>E!==null&&typeof E=="object",isPromise$2=E=>(isObject$3(E)||isFunction$2(E))&&isFunction$2(E.then)&&isFunction$2(E.catch),objectToString=Object.prototype.toString,toTypeString=E=>objectToString.call(E),toRawType=E=>toTypeString(E).slice(8,-1),isPlainObject=E=>toTypeString(E)==="[object Object]",isIntegerKey=E=>isString(E)&&E!=="NaN"&&E[0]!=="-"&&""+parseInt(E,10)===E,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=E=>{const S=Object.create(null);return x=>S[x]||(S[x]=E(x))},camelizeRE=/-(\w)/g,camelize$1=cacheStringFunction(E=>E.replace(camelizeRE,(S,x)=>x?x.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(E=>E.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(E=>E.charAt(0).toUpperCase()+E.slice(1)),toHandlerKey=cacheStringFunction(E=>E?`on${capitalize(E)}`:""),hasChanged=(E,S)=>!Object.is(E,S),invokeArrayFns=(E,...S)=>{for(let x=0;x<E.length;x++)E[x](...S)},def=(E,S,x,C=!1)=>{Object.defineProperty(E,S,{configurable:!0,enumerable:!1,writable:C,value:x})},looseToNumber=E=>{const S=parseFloat(E);return isNaN(S)?E:S};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(E){if(isArray$1(E)){const S={};for(let x=0;x<E.length;x++){const C=E[x],R=isString(C)?parseStringStyle(C):normalizeStyle(C);if(R)for(const Ce in R)S[Ce]=R[Ce]}return S}else if(isString(E)||isObject$3(E))return E}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(E){const S={};return E.replace(styleCommentRE,"").split(listDelimiterRE).forEach(x=>{if(x){const C=x.split(propertyDelimiterRE);C.length>1&&(S[C[0].trim()]=C[1].trim())}}),S}function normalizeClass(E){let S="";if(isString(E))S=E;else if(isArray$1(E))for(let x=0;x<E.length;x++){const C=normalizeClass(E[x]);C&&(S+=C+" ")}else if(isObject$3(E))for(const x in E)E[x]&&(S+=x+" ");return S.trim()}function normalizeProps(E){if(!E)return null;let{class:S,style:x}=E;return S&&!isString(S)&&(E.class=normalizeClass(S)),x&&(E.style=normalizeStyle(x)),E}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(E){return!!E||E===""}function looseCompareArrays(E,S){if(E.length!==S.length)return!1;let x=!0;for(let C=0;x&&C<E.length;C++)x=looseEqual(E[C],S[C]);return x}function looseEqual(E,S){if(E===S)return!0;let x=isDate(E),C=isDate(S);if(x||C)return x&&C?E.getTime()===S.getTime():!1;if(x=isSymbol(E),C=isSymbol(S),x||C)return E===S;if(x=isArray$1(E),C=isArray$1(S),x||C)return x&&C?looseCompareArrays(E,S):!1;if(x=isObject$3(E),C=isObject$3(S),x||C){if(!x||!C)return!1;const R=Object.keys(E).length,Ce=Object.keys(S).length;if(R!==Ce)return!1;for(const Ue in E){const je=E.hasOwnProperty(Ue),Xe=S.hasOwnProperty(Ue);if(je&&!Xe||!je&&Xe||!looseEqual(E[Ue],S[Ue]))return!1}}return String(E)===String(S)}function looseIndexOf(E,S){return E.findIndex(x=>looseEqual(x,S))}const isRef$1=E=>!!(E&&E.__v_isRef===!0),toDisplayString=E=>isString(E)?E:E==null?"":isArray$1(E)||isObject$3(E)&&(E.toString===objectToString||!isFunction$2(E.toString))?isRef$1(E)?toDisplayString(E.value):JSON.stringify(E,replacer,2):String(E),replacer=(E,S)=>isRef$1(S)?replacer(E,S.value):isMap(S)?{[`Map(${S.size})`]:[...S.entries()].reduce((x,[C,R],Ce)=>(x[stringifySymbol(C,Ce)+" =>"]=R,x),{})}:isSet(S)?{[`Set(${S.size})`]:[...S.values()].map(x=>stringifySymbol(x))}:isSymbol(S)?stringifySymbol(S):isObject$3(S)&&!isArray$1(S)&&!isPlainObject(S)?String(S):S,stringifySymbol=(E,S="")=>{var x;return isSymbol(E)?`Symbol(${(x=E.description)!=null?x:S})`:E};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(S=!1){this.detached=S,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!S&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let S,x;if(this.scopes)for(S=0,x=this.scopes.length;S<x;S++)this.scopes[S].pause();for(S=0,x=this.effects.length;S<x;S++)this.effects[S].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let S,x;if(this.scopes)for(S=0,x=this.scopes.length;S<x;S++)this.scopes[S].resume();for(S=0,x=this.effects.length;S<x;S++)this.effects[S].resume()}}run(S){if(this._active){const x=activeEffectScope;try{return activeEffectScope=this,S()}finally{activeEffectScope=x}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(S){if(this._active){let x,C;for(x=0,C=this.effects.length;x<C;x++)this.effects[x].stop();for(x=0,C=this.cleanups.length;x<C;x++)this.cleanups[x]();if(this.scopes)for(x=0,C=this.scopes.length;x<C;x++)this.scopes[x].stop(!0);if(!this.detached&&this.parent&&!S){const R=this.parent.scopes.pop();R&&R!==this&&(this.parent.scopes[this.index]=R,R.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(E){return new EffectScope(E)}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(S){this.fn=S,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const S=activeSub,x=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=S,shouldTrack=x,this.flags&=-3}}stop(){if(this.flags&1){for(let S=this.deps;S;S=S.nextDep)removeSub(S);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(E,S=!1){if(E.flags|=8,S){E.next=batchedComputed,batchedComputed=E;return}E.next=batchedSub,batchedSub=E}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let S=batchedComputed;for(batchedComputed=void 0;S;){const x=S.next;S.next=void 0,S.flags&=-9,S=x}}let E;for(;batchedSub;){let S=batchedSub;for(batchedSub=void 0;S;){const x=S.next;if(S.next=void 0,S.flags&=-9,S.flags&1)try{S.trigger()}catch(C){E||(E=C)}S=x}}if(E)throw E}function prepareDeps(E){for(let S=E.deps;S;S=S.nextDep)S.version=-1,S.prevActiveLink=S.dep.activeLink,S.dep.activeLink=S}function cleanupDeps(E){let S,x=E.depsTail,C=x;for(;C;){const R=C.prevDep;C.version===-1?(C===x&&(x=R),removeSub(C),removeDep(C)):S=C,C.dep.activeLink=C.prevActiveLink,C.prevActiveLink=void 0,C=R}E.deps=S,E.depsTail=x}function isDirty(E){for(let S=E.deps;S;S=S.nextDep)if(S.dep.version!==S.version||S.dep.computed&&(refreshComputed(S.dep.computed)||S.dep.version!==S.version))return!0;return!!E._dirty}function refreshComputed(E){if(E.flags&4&&!(E.flags&16)||(E.flags&=-17,E.globalVersion===globalVersion))return;E.globalVersion=globalVersion;const S=E.dep;if(E.flags|=2,S.version>0&&!E.isSSR&&E.deps&&!isDirty(E)){E.flags&=-3;return}const x=activeSub,C=shouldTrack;activeSub=E,shouldTrack=!0;try{prepareDeps(E);const R=E.fn(E._value);(S.version===0||hasChanged(R,E._value))&&(E._value=R,S.version++)}catch(R){throw S.version++,R}finally{activeSub=x,shouldTrack=C,cleanupDeps(E),E.flags&=-3}}function removeSub(E,S=!1){const{dep:x,prevSub:C,nextSub:R}=E;if(C&&(C.nextSub=R,E.prevSub=void 0),R&&(R.prevSub=C,E.nextSub=void 0),x.subs===E&&(x.subs=C,!C&&x.computed)){x.computed.flags&=-5;for(let Ce=x.computed.deps;Ce;Ce=Ce.nextDep)removeSub(Ce,!0)}!S&&!--x.sc&&x.map&&x.map.delete(x.key)}function removeDep(E){const{prevDep:S,nextDep:x}=E;S&&(S.nextDep=x,E.prevDep=void 0),x&&(x.prevDep=S,E.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const E=trackStack.pop();shouldTrack=E===void 0?!0:E}function cleanupEffect(E){const{cleanup:S}=E;if(E.cleanup=void 0,S){const x=activeSub;activeSub=void 0;try{S()}finally{activeSub=x}}}let globalVersion=0;class Link{constructor(S,x){this.sub=S,this.dep=x,this.version=x.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(S){this.computed=S,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(S){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let x=this.activeLink;if(x===void 0||x.sub!==activeSub)x=this.activeLink=new Link(activeSub,this),activeSub.deps?(x.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=x,activeSub.depsTail=x):activeSub.deps=activeSub.depsTail=x,addSub(x);else if(x.version===-1&&(x.version=this.version,x.nextDep)){const C=x.nextDep;C.prevDep=x.prevDep,x.prevDep&&(x.prevDep.nextDep=C),x.prevDep=activeSub.depsTail,x.nextDep=void 0,activeSub.depsTail.nextDep=x,activeSub.depsTail=x,activeSub.deps===x&&(activeSub.deps=C)}return x}trigger(S){this.version++,globalVersion++,this.notify(S)}notify(S){startBatch();try{for(let x=this.subs;x;x=x.prevSub)x.sub.notify()&&x.sub.dep.notify()}finally{endBatch()}}}function addSub(E){if(E.dep.sc++,E.sub.flags&4){const S=E.dep.computed;if(S&&!E.dep.subs){S.flags|=20;for(let C=S.deps;C;C=C.nextDep)addSub(C)}const x=E.dep.subs;x!==E&&(E.prevSub=x,x&&(x.nextSub=E)),E.dep.subs=E}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(E,S,x){if(shouldTrack&&activeSub){let C=targetMap.get(E);C||targetMap.set(E,C=new Map);let R=C.get(x);R||(C.set(x,R=new Dep),R.map=C,R.key=x),R.track()}}function trigger$1(E,S,x,C,R,Ce){const Ue=targetMap.get(E);if(!Ue){globalVersion++;return}const je=Xe=>{Xe&&Xe.trigger()};if(startBatch(),S==="clear")Ue.forEach(je);else{const Xe=isArray$1(E),Ye=Xe&&isIntegerKey(x);if(Xe&&x==="length"){const et=Number(C);Ue.forEach((ht,Dt)=>{(Dt==="length"||Dt===ARRAY_ITERATE_KEY||!isSymbol(Dt)&&Dt>=et)&&je(ht)})}else switch((x!==void 0||Ue.has(void 0))&&je(Ue.get(x)),Ye&&je(Ue.get(ARRAY_ITERATE_KEY)),S){case"add":Xe?Ye&&je(Ue.get("length")):(je(Ue.get(ITERATE_KEY)),isMap(E)&&je(Ue.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Xe||(je(Ue.get(ITERATE_KEY)),isMap(E)&&je(Ue.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(E)&&je(Ue.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(E,S){const x=targetMap.get(E);return x&&x.get(S)}function reactiveReadArray(E){const S=toRaw(E);return S===E?S:(track(S,"iterate",ARRAY_ITERATE_KEY),isShallow(E)?S:S.map(toReactive))}function shallowReadArray(E){return track(E=toRaw(E),"iterate",ARRAY_ITERATE_KEY),E}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...E){return reactiveReadArray(this).concat(...E.map(S=>isArray$1(S)?reactiveReadArray(S):S))},entries(){return iterator(this,"entries",E=>(E[1]=toReactive(E[1]),E))},every(E,S){return apply(this,"every",E,S,void 0,arguments)},filter(E,S){return apply(this,"filter",E,S,x=>x.map(toReactive),arguments)},find(E,S){return apply(this,"find",E,S,toReactive,arguments)},findIndex(E,S){return apply(this,"findIndex",E,S,void 0,arguments)},findLast(E,S){return apply(this,"findLast",E,S,toReactive,arguments)},findLastIndex(E,S){return apply(this,"findLastIndex",E,S,void 0,arguments)},forEach(E,S){return apply(this,"forEach",E,S,void 0,arguments)},includes(...E){return searchProxy(this,"includes",E)},indexOf(...E){return searchProxy(this,"indexOf",E)},join(E){return reactiveReadArray(this).join(E)},lastIndexOf(...E){return searchProxy(this,"lastIndexOf",E)},map(E,S){return apply(this,"map",E,S,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...E){return noTracking(this,"push",E)},reduce(E,...S){return reduce$1(this,"reduce",E,S)},reduceRight(E,...S){return reduce$1(this,"reduceRight",E,S)},shift(){return noTracking(this,"shift")},some(E,S){return apply(this,"some",E,S,void 0,arguments)},splice(...E){return noTracking(this,"splice",E)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(E){return reactiveReadArray(this).toSorted(E)},toSpliced(...E){return reactiveReadArray(this).toSpliced(...E)},unshift(...E){return noTracking(this,"unshift",E)},values(){return iterator(this,"values",toReactive)}};function iterator(E,S,x){const C=shallowReadArray(E),R=C[S]();return C!==E&&!isShallow(E)&&(R._next=R.next,R.next=()=>{const Ce=R._next();return Ce.value&&(Ce.value=x(Ce.value)),Ce}),R}const arrayProto=Array.prototype;function apply(E,S,x,C,R,Ce){const Ue=shallowReadArray(E),je=Ue!==E&&!isShallow(E),Xe=Ue[S];if(Xe!==arrayProto[S]){const ht=Xe.apply(E,Ce);return je?toReactive(ht):ht}let Ye=x;Ue!==E&&(je?Ye=function(ht,Dt){return x.call(this,toReactive(ht),Dt,E)}:x.length>2&&(Ye=function(ht,Dt){return x.call(this,ht,Dt,E)}));const et=Xe.call(Ue,Ye,C);return je&&R?R(et):et}function reduce$1(E,S,x,C){const R=shallowReadArray(E);let Ce=x;return R!==E&&(isShallow(E)?x.length>3&&(Ce=function(Ue,je,Xe){return x.call(this,Ue,je,Xe,E)}):Ce=function(Ue,je,Xe){return x.call(this,Ue,toReactive(je),Xe,E)}),R[S](Ce,...C)}function searchProxy(E,S,x){const C=toRaw(E);track(C,"iterate",ARRAY_ITERATE_KEY);const R=C[S](...x);return(R===-1||R===!1)&&isProxy(x[0])?(x[0]=toRaw(x[0]),C[S](...x)):R}function noTracking(E,S,x=[]){pauseTracking(),startBatch();const C=toRaw(E)[S].apply(E,x);return endBatch(),resetTracking(),C}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(E=>E!=="arguments"&&E!=="caller").map(E=>Symbol[E]).filter(isSymbol));function hasOwnProperty(E){isSymbol(E)||(E=String(E));const S=toRaw(this);return track(S,"has",E),S.hasOwnProperty(E)}class BaseReactiveHandler{constructor(S=!1,x=!1){this._isReadonly=S,this._isShallow=x}get(S,x,C){const R=this._isReadonly,Ce=this._isShallow;if(x==="__v_isReactive")return!R;if(x==="__v_isReadonly")return R;if(x==="__v_isShallow")return Ce;if(x==="__v_raw")return C===(R?Ce?shallowReadonlyMap:readonlyMap:Ce?shallowReactiveMap:reactiveMap).get(S)||Object.getPrototypeOf(S)===Object.getPrototypeOf(C)?S:void 0;const Ue=isArray$1(S);if(!R){let Xe;if(Ue&&(Xe=arrayInstrumentations[x]))return Xe;if(x==="hasOwnProperty")return hasOwnProperty}const je=Reflect.get(S,x,isRef(S)?S:C);return(isSymbol(x)?builtInSymbols.has(x):isNonTrackableKeys(x))||(R||track(S,"get",x),Ce)?je:isRef(je)?Ue&&isIntegerKey(x)?je:je.value:isObject$3(je)?R?readonly(je):reactive(je):je}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(S=!1){super(!1,S)}set(S,x,C,R){let Ce=S[x];if(!this._isShallow){const Xe=isReadonly(Ce);if(!isShallow(C)&&!isReadonly(C)&&(Ce=toRaw(Ce),C=toRaw(C)),!isArray$1(S)&&isRef(Ce)&&!isRef(C))return Xe?!1:(Ce.value=C,!0)}const Ue=isArray$1(S)&&isIntegerKey(x)?Number(x)<S.length:hasOwn(S,x),je=Reflect.set(S,x,C,isRef(S)?S:R);return S===toRaw(R)&&(Ue?hasChanged(C,Ce)&&trigger$1(S,"set",x,C):trigger$1(S,"add",x,C)),je}deleteProperty(S,x){const C=hasOwn(S,x);S[x];const R=Reflect.deleteProperty(S,x);return R&&C&&trigger$1(S,"delete",x,void 0),R}has(S,x){const C=Reflect.has(S,x);return(!isSymbol(x)||!builtInSymbols.has(x))&&track(S,"has",x),C}ownKeys(S){return track(S,"iterate",isArray$1(S)?"length":ITERATE_KEY),Reflect.ownKeys(S)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(S=!1){super(!0,S)}set(S,x){return!0}deleteProperty(S,x){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=E=>E,getProto=E=>Reflect.getPrototypeOf(E);function createIterableMethod(E,S,x){return function(...C){const R=this.__v_raw,Ce=toRaw(R),Ue=isMap(Ce),je=E==="entries"||E===Symbol.iterator&&Ue,Xe=E==="keys"&&Ue,Ye=R[E](...C),et=x?toShallow:S?toReadonly:toReactive;return!S&&track(Ce,"iterate",Xe?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ht,done:Dt}=Ye.next();return Dt?{value:ht,done:Dt}:{value:je?[et(ht[0]),et(ht[1])]:et(ht),done:Dt}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(E){return function(...S){return E==="delete"?!1:E==="clear"?void 0:this}}function createInstrumentations(E,S){const x={get(R){const Ce=this.__v_raw,Ue=toRaw(Ce),je=toRaw(R);E||(hasChanged(R,je)&&track(Ue,"get",R),track(Ue,"get",je));const{has:Xe}=getProto(Ue),Ye=S?toShallow:E?toReadonly:toReactive;if(Xe.call(Ue,R))return Ye(Ce.get(R));if(Xe.call(Ue,je))return Ye(Ce.get(je));Ce!==Ue&&Ce.get(R)},get size(){const R=this.__v_raw;return!E&&track(toRaw(R),"iterate",ITERATE_KEY),Reflect.get(R,"size",R)},has(R){const Ce=this.__v_raw,Ue=toRaw(Ce),je=toRaw(R);return E||(hasChanged(R,je)&&track(Ue,"has",R),track(Ue,"has",je)),R===je?Ce.has(R):Ce.has(R)||Ce.has(je)},forEach(R,Ce){const Ue=this,je=Ue.__v_raw,Xe=toRaw(je),Ye=S?toShallow:E?toReadonly:toReactive;return!E&&track(Xe,"iterate",ITERATE_KEY),je.forEach((et,ht)=>R.call(Ce,Ye(et),Ye(ht),Ue))}};return extend$1(x,E?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(R){!S&&!isShallow(R)&&!isReadonly(R)&&(R=toRaw(R));const Ce=toRaw(this);return getProto(Ce).has.call(Ce,R)||(Ce.add(R),trigger$1(Ce,"add",R,R)),this},set(R,Ce){!S&&!isShallow(Ce)&&!isReadonly(Ce)&&(Ce=toRaw(Ce));const Ue=toRaw(this),{has:je,get:Xe}=getProto(Ue);let Ye=je.call(Ue,R);Ye||(R=toRaw(R),Ye=je.call(Ue,R));const et=Xe.call(Ue,R);return Ue.set(R,Ce),Ye?hasChanged(Ce,et)&&trigger$1(Ue,"set",R,Ce):trigger$1(Ue,"add",R,Ce),this},delete(R){const Ce=toRaw(this),{has:Ue,get:je}=getProto(Ce);let Xe=Ue.call(Ce,R);Xe||(R=toRaw(R),Xe=Ue.call(Ce,R)),je&&je.call(Ce,R);const Ye=Ce.delete(R);return Xe&&trigger$1(Ce,"delete",R,void 0),Ye},clear(){const R=toRaw(this),Ce=R.size!==0,Ue=R.clear();return Ce&&trigger$1(R,"clear",void 0,void 0),Ue}}),["keys","values","entries",Symbol.iterator].forEach(R=>{x[R]=createIterableMethod(R,E,S)}),x}function createInstrumentationGetter(E,S){const x=createInstrumentations(E,S);return(C,R,Ce)=>R==="__v_isReactive"?!E:R==="__v_isReadonly"?E:R==="__v_raw"?C:Reflect.get(hasOwn(x,R)&&R in C?x:C,R,Ce)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(E){switch(E){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(E){return E.__v_skip||!Object.isExtensible(E)?0:targetTypeMap(toRawType(E))}function reactive(E){return isReadonly(E)?E:createReactiveObject(E,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(E){return createReactiveObject(E,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(E){return createReactiveObject(E,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(E){return createReactiveObject(E,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(E,S,x,C,R){if(!isObject$3(E)||E.__v_raw&&!(S&&E.__v_isReactive))return E;const Ce=R.get(E);if(Ce)return Ce;const Ue=getTargetType(E);if(Ue===0)return E;const je=new Proxy(E,Ue===2?C:x);return R.set(E,je),je}function isReactive(E){return isReadonly(E)?isReactive(E.__v_raw):!!(E&&E.__v_isReactive)}function isReadonly(E){return!!(E&&E.__v_isReadonly)}function isShallow(E){return!!(E&&E.__v_isShallow)}function isProxy(E){return E?!!E.__v_raw:!1}function toRaw(E){const S=E&&E.__v_raw;return S?toRaw(S):E}function markRaw(E){return!hasOwn(E,"__v_skip")&&Object.isExtensible(E)&&def(E,"__v_skip",!0),E}const toReactive=E=>isObject$3(E)?reactive(E):E,toReadonly=E=>isObject$3(E)?readonly(E):E;function isRef(E){return E?E.__v_isRef===!0:!1}function ref(E){return createRef(E,!1)}function shallowRef(E){return createRef(E,!0)}function createRef(E,S){return isRef(E)?E:new RefImpl(E,S)}class RefImpl{constructor(S,x){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=x?S:toRaw(S),this._value=x?S:toReactive(S),this.__v_isShallow=x}get value(){return this.dep.track(),this._value}set value(S){const x=this._rawValue,C=this.__v_isShallow||isShallow(S)||isReadonly(S);S=C?S:toRaw(S),hasChanged(S,x)&&(this._rawValue=S,this._value=C?S:toReactive(S),this.dep.trigger())}}function unref(E){return isRef(E)?E.value:E}const shallowUnwrapHandlers={get:(E,S,x)=>S==="__v_raw"?E:unref(Reflect.get(E,S,x)),set:(E,S,x,C)=>{const R=E[S];return isRef(R)&&!isRef(x)?(R.value=x,!0):Reflect.set(E,S,x,C)}};function proxyRefs(E){return isReactive(E)?E:new Proxy(E,shallowUnwrapHandlers)}class ObjectRefImpl{constructor(S,x,C){this._object=S,this._key=x,this._defaultValue=C,this.__v_isRef=!0,this._value=void 0}get value(){const S=this._object[this._key];return this._value=S===void 0?this._defaultValue:S}set value(S){this._object[this._key]=S}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(S){this._getter=S,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(E,S,x){return isRef(E)?E:isFunction$2(E)?new GetterRefImpl(E):isObject$3(E)&&arguments.length>1?propertyToRef(E,S,x):ref(E)}function propertyToRef(E,S,x){const C=E[S];return isRef(C)?C:new ObjectRefImpl(E,S,x)}class ComputedRefImpl{constructor(S,x,C){this.fn=S,this.setter=x,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!x,this.isSSR=C}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const S=this.dep.track();return refreshComputed(this),S&&(S.version=this.dep.version),this._value}set value(S){this.setter&&this.setter(S)}}function computed$1(E,S,x=!1){let C,R;return isFunction$2(E)?C=E:(C=E.get,R=E.set),new ComputedRefImpl(C,R,x)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(E,S=!1,x=activeWatcher){if(x){let C=cleanupMap.get(x);C||cleanupMap.set(x,C=[]),C.push(E)}}function watch$1(E,S,x=EMPTY_OBJ){const{immediate:C,deep:R,once:Ce,scheduler:Ue,augmentJob:je,call:Xe}=x,Ye=Gt=>R?Gt:isShallow(Gt)||R===!1||R===0?traverse(Gt,1):traverse(Gt);let et,ht,Dt,Ot,Mt=!1,St=!1;if(isRef(E)?(ht=()=>E.value,Mt=isShallow(E)):isReactive(E)?(ht=()=>Ye(E),Mt=!0):isArray$1(E)?(St=!0,Mt=E.some(Gt=>isReactive(Gt)||isShallow(Gt)),ht=()=>E.map(Gt=>{if(isRef(Gt))return Gt.value;if(isReactive(Gt))return Ye(Gt);if(isFunction$2(Gt))return Xe?Xe(Gt,2):Gt()})):isFunction$2(E)?S?ht=Xe?()=>Xe(E,2):E:ht=()=>{if(Dt){pauseTracking();try{Dt()}finally{resetTracking()}}const Gt=activeWatcher;activeWatcher=et;try{return Xe?Xe(E,3,[Ot]):E(Ot)}finally{activeWatcher=Gt}}:ht=NOOP,S&&R){const Gt=ht,Zt=R===!0?1/0:R;ht=()=>traverse(Gt(),Zt)}const Ut=getCurrentScope(),kt=()=>{et.stop(),Ut&&remove(Ut.effects,et)};if(Ce&&S){const Gt=S;S=(...Zt)=>{Gt(...Zt),kt()}}let Ft=St?new Array(E.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Nt=Gt=>{if(!(!(et.flags&1)||!et.dirty&&!Gt))if(S){const Zt=et.run();if(R||Mt||(St?Zt.some((ri,li)=>hasChanged(ri,Ft[li])):hasChanged(Zt,Ft))){Dt&&Dt();const ri=activeWatcher;activeWatcher=et;try{const li=[Zt,Ft===INITIAL_WATCHER_VALUE?void 0:St&&Ft[0]===INITIAL_WATCHER_VALUE?[]:Ft,Ot];Xe?Xe(S,3,li):S(...li),Ft=Zt}finally{activeWatcher=ri}}}else et.run()};return je&&je(Nt),et=new ReactiveEffect(ht),et.scheduler=Ue?()=>Ue(Nt,!1):Nt,Ot=Gt=>onWatcherCleanup(Gt,!1,et),Dt=et.onStop=()=>{const Gt=cleanupMap.get(et);if(Gt){if(Xe)Xe(Gt,4);else for(const Zt of Gt)Zt();cleanupMap.delete(et)}},S?C?Nt(!0):Ft=et.run():Ue?Ue(Nt.bind(null,!0),!0):et.run(),kt.pause=et.pause.bind(et),kt.resume=et.resume.bind(et),kt.stop=kt,kt}function traverse(E,S=1/0,x){if(S<=0||!isObject$3(E)||E.__v_skip||(x=x||new Set,x.has(E)))return E;if(x.add(E),S--,isRef(E))traverse(E.value,S,x);else if(isArray$1(E))for(let C=0;C<E.length;C++)traverse(E[C],S,x);else if(isSet(E)||isMap(E))E.forEach(C=>{traverse(C,S,x)});else if(isPlainObject(E)){for(const C in E)traverse(E[C],S,x);for(const C of Object.getOwnPropertySymbols(E))Object.prototype.propertyIsEnumerable.call(E,C)&&traverse(E[C],S,x)}return E}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(E,...S){if(isWarning)return;isWarning=!0,pauseTracking();const x=stack.length?stack[stack.length-1].component:null,C=x&&x.appContext.config.warnHandler,R=getComponentTrace();if(C)callWithErrorHandling(C,x,11,[E+S.map(Ce=>{var Ue,je;return(je=(Ue=Ce.toString)==null?void 0:Ue.call(Ce))!=null?je:JSON.stringify(Ce)}).join(""),x&&x.proxy,R.map(({vnode:Ce})=>`at <${formatComponentName(x,Ce.type)}>`).join(`
`),R]);else{const Ce=[`[Vue warn]: ${E}`,...S];R.length&&Ce.push(`
`,...formatTrace(R)),console.warn(...Ce)}resetTracking(),isWarning=!1}function getComponentTrace(){let E=stack[stack.length-1];if(!E)return[];const S=[];for(;E;){const x=S[0];x&&x.vnode===E?x.recurseCount++:S.push({vnode:E,recurseCount:0});const C=E.component&&E.component.parent;E=C&&C.vnode}return S}function formatTrace(E){const S=[];return E.forEach((x,C)=>{S.push(...C===0?[]:[`
`],...formatTraceEntry(x))}),S}function formatTraceEntry({vnode:E,recurseCount:S}){const x=S>0?`... (${S} recursive calls)`:"",C=E.component?E.component.parent==null:!1,R=` at <${formatComponentName(E.component,E.type,C)}`,Ce=">"+x;return E.props?[R,...formatProps(E.props),Ce]:[R+Ce]}function formatProps(E){const S=[],x=Object.keys(E);return x.slice(0,3).forEach(C=>{S.push(...formatProp(C,E[C]))}),x.length>3&&S.push(" ..."),S}function formatProp(E,S,x){return isString(S)?(S=JSON.stringify(S),x?S:[`${E}=${S}`]):typeof S=="number"||typeof S=="boolean"||S==null?x?S:[`${E}=${S}`]:isRef(S)?(S=formatProp(E,toRaw(S.value),!0),x?S:[`${E}=Ref<`,S,">"]):isFunction$2(S)?[`${E}=fn${S.name?`<${S.name}>`:""}`]:(S=toRaw(S),x?S:[`${E}=`,S])}function callWithErrorHandling(E,S,x,C){try{return C?E(...C):E()}catch(R){handleError(R,S,x)}}function callWithAsyncErrorHandling(E,S,x,C){if(isFunction$2(E)){const R=callWithErrorHandling(E,S,x,C);return R&&isPromise$2(R)&&R.catch(Ce=>{handleError(Ce,S,x)}),R}if(isArray$1(E)){const R=[];for(let Ce=0;Ce<E.length;Ce++)R.push(callWithAsyncErrorHandling(E[Ce],S,x,C));return R}}function handleError(E,S,x,C=!0){const R=S?S.vnode:null,{errorHandler:Ce,throwUnhandledErrorInProduction:Ue}=S&&S.appContext.config||EMPTY_OBJ;if(S){let je=S.parent;const Xe=S.proxy,Ye=`https://vuejs.org/error-reference/#runtime-${x}`;for(;je;){const et=je.ec;if(et){for(let ht=0;ht<et.length;ht++)if(et[ht](E,Xe,Ye)===!1)return}je=je.parent}if(Ce){pauseTracking(),callWithErrorHandling(Ce,null,10,[E,Xe,Ye]),resetTracking();return}}logError(E,x,R,C,Ue)}function logError(E,S,x,C=!0,R=!1){if(R)throw E;console.error(E)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(E){const S=currentFlushPromise||resolvedPromise;return E?S.then(this?E.bind(this):E):S}function findInsertionIndex$1(E){let S=flushIndex+1,x=queue.length;for(;S<x;){const C=S+x>>>1,R=queue[C],Ce=getId(R);Ce<E||Ce===E&&R.flags&2?S=C+1:x=C}return S}function queueJob(E){if(!(E.flags&1)){const S=getId(E),x=queue[queue.length-1];!x||!(E.flags&2)&&S>=getId(x)?queue.push(E):queue.splice(findInsertionIndex$1(S),0,E),E.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(E){isArray$1(E)?pendingPostFlushCbs.push(...E):activePostFlushCbs&&E.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,E):E.flags&1||(pendingPostFlushCbs.push(E),E.flags|=1),queueFlush()}function flushPreFlushCbs(E,S,x=flushIndex+1){for(;x<queue.length;x++){const C=queue[x];if(C&&C.flags&2){if(E&&C.id!==E.uid)continue;queue.splice(x,1),x--,C.flags&4&&(C.flags&=-2),C(),C.flags&4||(C.flags&=-2)}}}function flushPostFlushCbs(E){if(pendingPostFlushCbs.length){const S=[...new Set(pendingPostFlushCbs)].sort((x,C)=>getId(x)-getId(C));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...S);return}for(activePostFlushCbs=S,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const x=activePostFlushCbs[postFlushIndex];x.flags&4&&(x.flags&=-2),x.flags&8||x(),x.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=E=>E.id==null?E.flags&2?-1:1/0:E.id;function flushJobs(E){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const S=queue[flushIndex];S&&!(S.flags&8)&&(S.flags&4&&(S.flags&=-2),callWithErrorHandling(S,S.i,S.i?15:14),S.flags&4||(S.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const S=queue[flushIndex];S&&(S.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(E){const S=currentRenderingInstance;return currentRenderingInstance=E,currentScopeId=E&&E.type.__scopeId||null,S}function withCtx(E,S=currentRenderingInstance,x){if(!S||E._n)return E;const C=(...R)=>{C._d&&setBlockTracking(-1);const Ce=setCurrentRenderingInstance(S);let Ue;try{Ue=E(...R)}finally{setCurrentRenderingInstance(Ce),C._d&&setBlockTracking(1)}return Ue};return C._n=!0,C._c=!0,C._d=!0,C}function withDirectives(E,S){if(currentRenderingInstance===null)return E;const x=getComponentPublicInstance(currentRenderingInstance),C=E.dirs||(E.dirs=[]);for(let R=0;R<S.length;R++){let[Ce,Ue,je,Xe=EMPTY_OBJ]=S[R];Ce&&(isFunction$2(Ce)&&(Ce={mounted:Ce,updated:Ce}),Ce.deep&&traverse(Ue),C.push({dir:Ce,instance:x,value:Ue,oldValue:void 0,arg:je,modifiers:Xe}))}return E}function invokeDirectiveHook(E,S,x,C){const R=E.dirs,Ce=S&&S.dirs;for(let Ue=0;Ue<R.length;Ue++){const je=R[Ue];Ce&&(je.oldValue=Ce[Ue].value);let Xe=je.dir[C];Xe&&(pauseTracking(),callWithAsyncErrorHandling(Xe,x,8,[E.el,je,E,S]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=E=>E.__isTeleport;function setTransitionHooks(E,S){E.shapeFlag&6&&E.component?(E.transition=S,setTransitionHooks(E.component.subTree,S)):E.shapeFlag&128?(E.ssContent.transition=S.clone(E.ssContent),E.ssFallback.transition=S.clone(E.ssFallback)):E.transition=S}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(E,S){return isFunction$2(E)?extend$1({name:E.name},S,{setup:E}):E}function markAsyncBoundary(E){E.ids=[E.ids[0]+E.ids[2]+++"-",0,0]}function setRef(E,S,x,C,R=!1){if(isArray$1(E)){E.forEach((Mt,St)=>setRef(Mt,S&&(isArray$1(S)?S[St]:S),x,C,R));return}if(isAsyncWrapper(C)&&!R)return;const Ce=C.shapeFlag&4?getComponentPublicInstance(C.component):C.el,Ue=R?null:Ce,{i:je,r:Xe}=E,Ye=S&&S.r,et=je.refs===EMPTY_OBJ?je.refs={}:je.refs,ht=je.setupState,Dt=toRaw(ht),Ot=ht===EMPTY_OBJ?()=>!1:Mt=>hasOwn(Dt,Mt);if(Ye!=null&&Ye!==Xe&&(isString(Ye)?(et[Ye]=null,Ot(Ye)&&(ht[Ye]=null)):isRef(Ye)&&(Ye.value=null)),isFunction$2(Xe))callWithErrorHandling(Xe,je,12,[Ue,et]);else{const Mt=isString(Xe),St=isRef(Xe);if(Mt||St){const Ut=()=>{if(E.f){const kt=Mt?Ot(Xe)?ht[Xe]:et[Xe]:Xe.value;R?isArray$1(kt)&&remove(kt,Ce):isArray$1(kt)?kt.includes(Ce)||kt.push(Ce):Mt?(et[Xe]=[Ce],Ot(Xe)&&(ht[Xe]=et[Xe])):(Xe.value=[Ce],E.k&&(et[E.k]=Xe.value))}else Mt?(et[Xe]=Ue,Ot(Xe)&&(ht[Xe]=Ue)):St&&(Xe.value=Ue,E.k&&(et[E.k]=Ue))};Ue?(Ut.id=-1,queuePostRenderEffect(Ut,x)):Ut()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=E=>!!E.type.__asyncLoader,isKeepAlive=E=>E.type.__isKeepAlive;function onActivated(E,S){registerKeepAliveHook(E,"a",S)}function onDeactivated(E,S){registerKeepAliveHook(E,"da",S)}function registerKeepAliveHook(E,S,x=currentInstance){const C=E.__wdc||(E.__wdc=()=>{let R=x;for(;R;){if(R.isDeactivated)return;R=R.parent}return E()});if(injectHook(S,C,x),x){let R=x.parent;for(;R&&R.parent;)isKeepAlive(R.parent.vnode)&&injectToKeepAliveRoot(C,S,x,R),R=R.parent}}function injectToKeepAliveRoot(E,S,x,C){const R=injectHook(S,E,C,!0);onUnmounted$1(()=>{remove(C[S],R)},x)}function injectHook(E,S,x=currentInstance,C=!1){if(x){const R=x[E]||(x[E]=[]),Ce=S.__weh||(S.__weh=(...Ue)=>{pauseTracking();const je=setCurrentInstance(x),Xe=callWithAsyncErrorHandling(S,x,E,Ue);return je(),resetTracking(),Xe});return C?R.unshift(Ce):R.push(Ce),Ce}}const createHook=E=>(S,x=currentInstance)=>{(!isInSSRComponentSetup||E==="sp")&&injectHook(E,(...C)=>S(...C),x)},onBeforeMount=createHook("bm"),onMounted$1=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated$1=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted$1=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(E,S=currentInstance){injectHook("ec",E,S)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(E,S){return resolveAsset(COMPONENTS,E,!0,S)||E}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDirective(E){return resolveAsset(DIRECTIVES,E)}function resolveAsset(E,S,x=!0,C=!1){const R=currentRenderingInstance||currentInstance;if(R){const Ce=R.type;if(E===COMPONENTS){const je=getComponentName(Ce,!1);if(je&&(je===S||je===camelize$1(S)||je===capitalize(camelize$1(S))))return Ce}const Ue=resolve(R[E]||Ce[E],S)||resolve(R.appContext[E],S);return!Ue&&C?Ce:Ue}}function resolve(E,S){return E&&(E[S]||E[camelize$1(S)]||E[capitalize(camelize$1(S))])}function renderList(E,S,x,C){let R;const Ce=x,Ue=isArray$1(E);if(Ue||isString(E)){const je=Ue&&isReactive(E);let Xe=!1;je&&(Xe=!isShallow(E),E=shallowReadArray(E)),R=new Array(E.length);for(let Ye=0,et=E.length;Ye<et;Ye++)R[Ye]=S(Xe?toReactive(E[Ye]):E[Ye],Ye,void 0,Ce)}else if(typeof E=="number"){R=new Array(E);for(let je=0;je<E;je++)R[je]=S(je+1,je,void 0,Ce)}else if(isObject$3(E))if(E[Symbol.iterator])R=Array.from(E,(je,Xe)=>S(je,Xe,void 0,Ce));else{const je=Object.keys(E);R=new Array(je.length);for(let Xe=0,Ye=je.length;Xe<Ye;Xe++){const et=je[Xe];R[Xe]=S(E[et],et,Xe,Ce)}}else R=[];return R}function renderSlot(E,S,x={},C,R){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return openBlock(),createBlock(Fragment,null,[createVNode("slot",x,C)],64);let Ce=E[S];Ce&&Ce._c&&(Ce._d=!1),openBlock();const Ue=Ce&&ensureValidVNode(Ce(x)),je=x.key||Ue&&Ue.key,Xe=createBlock(Fragment,{key:(je&&!isSymbol(je)?je:`_${S}`)+(!Ue&&C?"_fb":"")},Ue||[],Ue&&E._===1?64:-2);return Ce&&Ce._c&&(Ce._d=!0),Xe}function ensureValidVNode(E){return E.some(S=>isVNode(S)?!(S.type===Comment$1||S.type===Fragment&&!ensureValidVNode(S.children)):!0)?E:null}const getPublicInstance=E=>E?isStatefulComponent(E)?getComponentPublicInstance(E):getPublicInstance(E.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:E=>E,$el:E=>E.vnode.el,$data:E=>E.data,$props:E=>E.props,$attrs:E=>E.attrs,$slots:E=>E.slots,$refs:E=>E.refs,$parent:E=>getPublicInstance(E.parent),$root:E=>getPublicInstance(E.root),$host:E=>E.ce,$emit:E=>E.emit,$options:E=>resolveMergedOptions(E),$forceUpdate:E=>E.f||(E.f=()=>{queueJob(E.update)}),$nextTick:E=>E.n||(E.n=nextTick.bind(E.proxy)),$watch:E=>instanceWatch.bind(E)}),hasSetupBinding=(E,S)=>E!==EMPTY_OBJ&&!E.__isScriptSetup&&hasOwn(E,S),PublicInstanceProxyHandlers={get({_:E},S){if(S==="__v_skip")return!0;const{ctx:x,setupState:C,data:R,props:Ce,accessCache:Ue,type:je,appContext:Xe}=E;let Ye;if(S[0]!=="$"){const Ot=Ue[S];if(Ot!==void 0)switch(Ot){case 1:return C[S];case 2:return R[S];case 4:return x[S];case 3:return Ce[S]}else{if(hasSetupBinding(C,S))return Ue[S]=1,C[S];if(R!==EMPTY_OBJ&&hasOwn(R,S))return Ue[S]=2,R[S];if((Ye=E.propsOptions[0])&&hasOwn(Ye,S))return Ue[S]=3,Ce[S];if(x!==EMPTY_OBJ&&hasOwn(x,S))return Ue[S]=4,x[S];shouldCacheAccess&&(Ue[S]=0)}}const et=publicPropertiesMap[S];let ht,Dt;if(et)return S==="$attrs"&&track(E.attrs,"get",""),et(E);if((ht=je.__cssModules)&&(ht=ht[S]))return ht;if(x!==EMPTY_OBJ&&hasOwn(x,S))return Ue[S]=4,x[S];if(Dt=Xe.config.globalProperties,hasOwn(Dt,S))return Dt[S]},set({_:E},S,x){const{data:C,setupState:R,ctx:Ce}=E;return hasSetupBinding(R,S)?(R[S]=x,!0):C!==EMPTY_OBJ&&hasOwn(C,S)?(C[S]=x,!0):hasOwn(E.props,S)||S[0]==="$"&&S.slice(1)in E?!1:(Ce[S]=x,!0)},has({_:{data:E,setupState:S,accessCache:x,ctx:C,appContext:R,propsOptions:Ce}},Ue){let je;return!!x[Ue]||E!==EMPTY_OBJ&&hasOwn(E,Ue)||hasSetupBinding(S,Ue)||(je=Ce[0])&&hasOwn(je,Ue)||hasOwn(C,Ue)||hasOwn(publicPropertiesMap,Ue)||hasOwn(R.config.globalProperties,Ue)},defineProperty(E,S,x){return x.get!=null?E._.accessCache[S]=0:hasOwn(x,"value")&&this.set(E,S,x.value,null),Reflect.defineProperty(E,S,x)}};function normalizePropsOrEmits(E){return isArray$1(E)?E.reduce((S,x)=>(S[x]=null,S),{}):E}let shouldCacheAccess=!0;function applyOptions(E){const S=resolveMergedOptions(E),x=E.proxy,C=E.ctx;shouldCacheAccess=!1,S.beforeCreate&&callHook(S.beforeCreate,E,"bc");const{data:R,computed:Ce,methods:Ue,watch:je,provide:Xe,inject:Ye,created:et,beforeMount:ht,mounted:Dt,beforeUpdate:Ot,updated:Mt,activated:St,deactivated:Ut,beforeDestroy:kt,beforeUnmount:Ft,destroyed:Nt,unmounted:Gt,render:Zt,renderTracked:ri,renderTriggered:li,errorCaptured:hi,serverPrefetch:xi,expose:$i,inheritAttrs:Mi,components:Di,directives:ki,filters:ji}=S;if(Ye&&resolveInjections(Ye,C,null),Ue)for(const vi in Ue){const si=Ue[vi];isFunction$2(si)&&(C[vi]=si.bind(x))}if(R){const vi=R.call(x,x);isObject$3(vi)&&(E.data=reactive(vi))}if(shouldCacheAccess=!0,Ce)for(const vi in Ce){const si=Ce[vi],ai=isFunction$2(si)?si.bind(x,x):isFunction$2(si.get)?si.get.bind(x,x):NOOP,Ci=!isFunction$2(si)&&isFunction$2(si.set)?si.set.bind(x):NOOP,Ei=computed({get:ai,set:Ci});Object.defineProperty(C,vi,{enumerable:!0,configurable:!0,get:()=>Ei.value,set:zi=>Ei.value=zi})}if(je)for(const vi in je)createWatcher(je[vi],C,x,vi);if(Xe){const vi=isFunction$2(Xe)?Xe.call(x):Xe;Reflect.ownKeys(vi).forEach(si=>{provide(si,vi[si])})}et&&callHook(et,E,"c");function ui(vi,si){isArray$1(si)?si.forEach(ai=>vi(ai.bind(x))):si&&vi(si.bind(x))}if(ui(onBeforeMount,ht),ui(onMounted$1,Dt),ui(onBeforeUpdate,Ot),ui(onUpdated$1,Mt),ui(onActivated,St),ui(onDeactivated,Ut),ui(onErrorCaptured,hi),ui(onRenderTracked,ri),ui(onRenderTriggered,li),ui(onBeforeUnmount,Ft),ui(onUnmounted$1,Gt),ui(onServerPrefetch,xi),isArray$1($i))if($i.length){const vi=E.exposed||(E.exposed={});$i.forEach(si=>{Object.defineProperty(vi,si,{get:()=>x[si],set:ai=>x[si]=ai})})}else E.exposed||(E.exposed={});Zt&&E.render===NOOP&&(E.render=Zt),Mi!=null&&(E.inheritAttrs=Mi),Di&&(E.components=Di),ki&&(E.directives=ki),xi&&markAsyncBoundary(E)}function resolveInjections(E,S,x=NOOP){isArray$1(E)&&(E=normalizeInject(E));for(const C in E){const R=E[C];let Ce;isObject$3(R)?"default"in R?Ce=inject(R.from||C,R.default,!0):Ce=inject(R.from||C):Ce=inject(R),isRef(Ce)?Object.defineProperty(S,C,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Ue=>Ce.value=Ue}):S[C]=Ce}}function callHook(E,S,x){callWithAsyncErrorHandling(isArray$1(E)?E.map(C=>C.bind(S.proxy)):E.bind(S.proxy),S,x)}function createWatcher(E,S,x,C){let R=C.includes(".")?createPathGetter(x,C):()=>x[C];if(isString(E)){const Ce=S[E];isFunction$2(Ce)&&watch(R,Ce)}else if(isFunction$2(E))watch(R,E.bind(x));else if(isObject$3(E))if(isArray$1(E))E.forEach(Ce=>createWatcher(Ce,S,x,C));else{const Ce=isFunction$2(E.handler)?E.handler.bind(x):S[E.handler];isFunction$2(Ce)&&watch(R,Ce,E)}}function resolveMergedOptions(E){const S=E.type,{mixins:x,extends:C}=S,{mixins:R,optionsCache:Ce,config:{optionMergeStrategies:Ue}}=E.appContext,je=Ce.get(S);let Xe;return je?Xe=je:!R.length&&!x&&!C?Xe=S:(Xe={},R.length&&R.forEach(Ye=>mergeOptions$1(Xe,Ye,Ue,!0)),mergeOptions$1(Xe,S,Ue)),isObject$3(S)&&Ce.set(S,Xe),Xe}function mergeOptions$1(E,S,x,C=!1){const{mixins:R,extends:Ce}=S;Ce&&mergeOptions$1(E,Ce,x,!0),R&&R.forEach(Ue=>mergeOptions$1(E,Ue,x,!0));for(const Ue in S)if(!(C&&Ue==="expose")){const je=internalOptionMergeStrats[Ue]||x&&x[Ue];E[Ue]=je?je(E[Ue],S[Ue]):S[Ue]}return E}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(E,S){return S?E?function(){return extend$1(isFunction$2(E)?E.call(this,this):E,isFunction$2(S)?S.call(this,this):S)}:S:E}function mergeInject(E,S){return mergeObjectOptions(normalizeInject(E),normalizeInject(S))}function normalizeInject(E){if(isArray$1(E)){const S={};for(let x=0;x<E.length;x++)S[E[x]]=E[x];return S}return E}function mergeAsArray(E,S){return E?[...new Set([].concat(E,S))]:S}function mergeObjectOptions(E,S){return E?extend$1(Object.create(null),E,S):S}function mergeEmitsOrPropsOptions(E,S){return E?isArray$1(E)&&isArray$1(S)?[...new Set([...E,...S])]:extend$1(Object.create(null),normalizePropsOrEmits(E),normalizePropsOrEmits(S??{})):S}function mergeWatchOptions(E,S){if(!E)return S;if(!S)return E;const x=extend$1(Object.create(null),E);for(const C in S)x[C]=mergeAsArray(E[C],S[C]);return x}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(E,S){return function(C,R=null){isFunction$2(C)||(C=extend$1({},C)),R!=null&&!isObject$3(R)&&(R=null);const Ce=createAppContext(),Ue=new WeakSet,je=[];let Xe=!1;const Ye=Ce.app={_uid:uid$1++,_component:C,_props:R,_container:null,_context:Ce,_instance:null,version:version$8,get config(){return Ce.config},set config(et){},use(et,...ht){return Ue.has(et)||(et&&isFunction$2(et.install)?(Ue.add(et),et.install(Ye,...ht)):isFunction$2(et)&&(Ue.add(et),et(Ye,...ht))),Ye},mixin(et){return Ce.mixins.includes(et)||Ce.mixins.push(et),Ye},component(et,ht){return ht?(Ce.components[et]=ht,Ye):Ce.components[et]},directive(et,ht){return ht?(Ce.directives[et]=ht,Ye):Ce.directives[et]},mount(et,ht,Dt){if(!Xe){const Ot=Ye._ceVNode||createVNode(C,R);return Ot.appContext=Ce,Dt===!0?Dt="svg":Dt===!1&&(Dt=void 0),ht&&S?S(Ot,et):E(Ot,et,Dt),Xe=!0,Ye._container=et,et.__vue_app__=Ye,getComponentPublicInstance(Ot.component)}},onUnmount(et){je.push(et)},unmount(){Xe&&(callWithAsyncErrorHandling(je,Ye._instance,16),E(null,Ye._container),delete Ye._container.__vue_app__)},provide(et,ht){return Ce.provides[et]=ht,Ye},runWithContext(et){const ht=currentApp;currentApp=Ye;try{return et()}finally{currentApp=ht}}};return Ye}}let currentApp=null;function provide(E,S){if(currentInstance){let x=currentInstance.provides;const C=currentInstance.parent&&currentInstance.parent.provides;C===x&&(x=currentInstance.provides=Object.create(C)),x[E]=S}}function inject(E,S,x=!1){const C=currentInstance||currentRenderingInstance;if(C||currentApp){const R=currentApp?currentApp._context.provides:C?C.parent==null?C.vnode.appContext&&C.vnode.appContext.provides:C.parent.provides:void 0;if(R&&E in R)return R[E];if(arguments.length>1)return x&&isFunction$2(S)?S.call(C&&C.proxy):S}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=E=>Object.getPrototypeOf(E)===internalObjectProto;function initProps(E,S,x,C=!1){const R={},Ce=createInternalObject();E.propsDefaults=Object.create(null),setFullProps(E,S,R,Ce);for(const Ue in E.propsOptions[0])Ue in R||(R[Ue]=void 0);x?E.props=C?R:shallowReactive(R):E.type.props?E.props=R:E.props=Ce,E.attrs=Ce}function updateProps(E,S,x,C){const{props:R,attrs:Ce,vnode:{patchFlag:Ue}}=E,je=toRaw(R),[Xe]=E.propsOptions;let Ye=!1;if((C||Ue>0)&&!(Ue&16)){if(Ue&8){const et=E.vnode.dynamicProps;for(let ht=0;ht<et.length;ht++){let Dt=et[ht];if(isEmitListener(E.emitsOptions,Dt))continue;const Ot=S[Dt];if(Xe)if(hasOwn(Ce,Dt))Ot!==Ce[Dt]&&(Ce[Dt]=Ot,Ye=!0);else{const Mt=camelize$1(Dt);R[Mt]=resolvePropValue(Xe,je,Mt,Ot,E,!1)}else Ot!==Ce[Dt]&&(Ce[Dt]=Ot,Ye=!0)}}}else{setFullProps(E,S,R,Ce)&&(Ye=!0);let et;for(const ht in je)(!S||!hasOwn(S,ht)&&((et=hyphenate(ht))===ht||!hasOwn(S,et)))&&(Xe?x&&(x[ht]!==void 0||x[et]!==void 0)&&(R[ht]=resolvePropValue(Xe,je,ht,void 0,E,!0)):delete R[ht]);if(Ce!==je)for(const ht in Ce)(!S||!hasOwn(S,ht))&&(delete Ce[ht],Ye=!0)}Ye&&trigger$1(E.attrs,"set","")}function setFullProps(E,S,x,C){const[R,Ce]=E.propsOptions;let Ue=!1,je;if(S)for(let Xe in S){if(isReservedProp(Xe))continue;const Ye=S[Xe];let et;R&&hasOwn(R,et=camelize$1(Xe))?!Ce||!Ce.includes(et)?x[et]=Ye:(je||(je={}))[et]=Ye:isEmitListener(E.emitsOptions,Xe)||(!(Xe in C)||Ye!==C[Xe])&&(C[Xe]=Ye,Ue=!0)}if(Ce){const Xe=toRaw(x),Ye=je||EMPTY_OBJ;for(let et=0;et<Ce.length;et++){const ht=Ce[et];x[ht]=resolvePropValue(R,Xe,ht,Ye[ht],E,!hasOwn(Ye,ht))}}return Ue}function resolvePropValue(E,S,x,C,R,Ce){const Ue=E[x];if(Ue!=null){const je=hasOwn(Ue,"default");if(je&&C===void 0){const Xe=Ue.default;if(Ue.type!==Function&&!Ue.skipFactory&&isFunction$2(Xe)){const{propsDefaults:Ye}=R;if(x in Ye)C=Ye[x];else{const et=setCurrentInstance(R);C=Ye[x]=Xe.call(null,S),et()}}else C=Xe;R.ce&&R.ce._setProp(x,C)}Ue[0]&&(Ce&&!je?C=!1:Ue[1]&&(C===""||C===hyphenate(x))&&(C=!0))}return C}const mixinPropsCache=new WeakMap;function normalizePropsOptions(E,S,x=!1){const C=x?mixinPropsCache:S.propsCache,R=C.get(E);if(R)return R;const Ce=E.props,Ue={},je=[];let Xe=!1;if(!isFunction$2(E)){const et=ht=>{Xe=!0;const[Dt,Ot]=normalizePropsOptions(ht,S,!0);extend$1(Ue,Dt),Ot&&je.push(...Ot)};!x&&S.mixins.length&&S.mixins.forEach(et),E.extends&&et(E.extends),E.mixins&&E.mixins.forEach(et)}if(!Ce&&!Xe)return isObject$3(E)&&C.set(E,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Ce))for(let et=0;et<Ce.length;et++){const ht=camelize$1(Ce[et]);validatePropName(ht)&&(Ue[ht]=EMPTY_OBJ)}else if(Ce)for(const et in Ce){const ht=camelize$1(et);if(validatePropName(ht)){const Dt=Ce[et],Ot=Ue[ht]=isArray$1(Dt)||isFunction$2(Dt)?{type:Dt}:extend$1({},Dt),Mt=Ot.type;let St=!1,Ut=!0;if(isArray$1(Mt))for(let kt=0;kt<Mt.length;++kt){const Ft=Mt[kt],Nt=isFunction$2(Ft)&&Ft.name;if(Nt==="Boolean"){St=!0;break}else Nt==="String"&&(Ut=!1)}else St=isFunction$2(Mt)&&Mt.name==="Boolean";Ot[0]=St,Ot[1]=Ut,(St||hasOwn(Ot,"default"))&&je.push(ht)}}const Ye=[Ue,je];return isObject$3(E)&&C.set(E,Ye),Ye}function validatePropName(E){return E[0]!=="$"&&!isReservedProp(E)}const isInternalKey=E=>E[0]==="_"||E==="$stable",normalizeSlotValue=E=>isArray$1(E)?E.map(normalizeVNode):[normalizeVNode(E)],normalizeSlot$1=(E,S,x)=>{if(S._n)return S;const C=withCtx((...R)=>normalizeSlotValue(S(...R)),x);return C._c=!1,C},normalizeObjectSlots=(E,S,x)=>{const C=E._ctx;for(const R in E){if(isInternalKey(R))continue;const Ce=E[R];if(isFunction$2(Ce))S[R]=normalizeSlot$1(R,Ce,C);else if(Ce!=null){const Ue=normalizeSlotValue(Ce);S[R]=()=>Ue}}},normalizeVNodeSlots=(E,S)=>{const x=normalizeSlotValue(S);E.slots.default=()=>x},assignSlots=(E,S,x)=>{for(const C in S)(x||C!=="_")&&(E[C]=S[C])},initSlots=(E,S,x)=>{const C=E.slots=createInternalObject();if(E.vnode.shapeFlag&32){const R=S._;R?(assignSlots(C,S,x),x&&def(C,"_",R,!0)):normalizeObjectSlots(S,C)}else S&&normalizeVNodeSlots(E,S)},updateSlots=(E,S,x)=>{const{vnode:C,slots:R}=E;let Ce=!0,Ue=EMPTY_OBJ;if(C.shapeFlag&32){const je=S._;je?x&&je===1?Ce=!1:assignSlots(R,S,x):(Ce=!S.$stable,normalizeObjectSlots(S,R)),Ue=S}else S&&(normalizeVNodeSlots(E,S),Ue={default:1});if(Ce)for(const je in R)!isInternalKey(je)&&Ue[je]==null&&delete R[je]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(E){return baseCreateRenderer(E)}function baseCreateRenderer(E,S){const x=getGlobalThis();x.__VUE__=!0;const{insert:C,remove:R,patchProp:Ce,createElement:Ue,createText:je,createComment:Xe,setText:Ye,setElementText:et,parentNode:ht,nextSibling:Dt,setScopeId:Ot=NOOP,insertStaticContent:Mt}=E,St=(gi,mi,Ai,Hi=null,Ni=null,Fi=null,Zi=void 0,Bi=null,Ki=!!mi.dynamicChildren)=>{if(gi===mi)return;gi&&!isSameVNodeType(gi,mi)&&(Hi=Li(gi),zi(gi,Ni,Fi,!0),gi=null),mi.patchFlag===-2&&(Ki=!1,mi.dynamicChildren=null);const{type:Gi,ref:lr,shapeFlag:er}=mi;switch(Gi){case Text$1:Ut(gi,mi,Ai,Hi);break;case Comment$1:kt(gi,mi,Ai,Hi);break;case Static:gi==null&&Ft(mi,Ai,Hi,Zi);break;case Fragment:Di(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki);break;default:er&1?Zt(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki):er&6?ki(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki):(er&64||er&128)&&Gi.process(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki,nr)}lr!=null&&Ni&&setRef(lr,gi&&gi.ref,Fi,mi||gi,!mi)},Ut=(gi,mi,Ai,Hi)=>{if(gi==null)C(mi.el=je(mi.children),Ai,Hi);else{const Ni=mi.el=gi.el;mi.children!==gi.children&&Ye(Ni,mi.children)}},kt=(gi,mi,Ai,Hi)=>{gi==null?C(mi.el=Xe(mi.children||""),Ai,Hi):mi.el=gi.el},Ft=(gi,mi,Ai,Hi)=>{[gi.el,gi.anchor]=Mt(gi.children,mi,Ai,Hi,gi.el,gi.anchor)},Nt=({el:gi,anchor:mi},Ai,Hi)=>{let Ni;for(;gi&&gi!==mi;)Ni=Dt(gi),C(gi,Ai,Hi),gi=Ni;C(mi,Ai,Hi)},Gt=({el:gi,anchor:mi})=>{let Ai;for(;gi&&gi!==mi;)Ai=Dt(gi),R(gi),gi=Ai;R(mi)},Zt=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki)=>{mi.type==="svg"?Zi="svg":mi.type==="math"&&(Zi="mathml"),gi==null?ri(mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki):xi(gi,mi,Ni,Fi,Zi,Bi,Ki)},ri=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi)=>{let Ki,Gi;const{props:lr,shapeFlag:er,transition:Qi,dirs:ur}=gi;if(Ki=gi.el=Ue(gi.type,Fi,lr&&lr.is,lr),er&8?et(Ki,gi.children):er&16&&hi(gi.children,Ki,null,Hi,Ni,resolveChildrenNamespace(gi,Fi),Zi,Bi),ur&&invokeDirectiveHook(gi,null,Hi,"created"),li(Ki,gi,gi.scopeId,Zi,Hi),lr){for(const Cr in lr)Cr!=="value"&&!isReservedProp(Cr)&&Ce(Ki,Cr,null,lr[Cr],Fi,Hi);"value"in lr&&Ce(Ki,"value",null,lr.value,Fi),(Gi=lr.onVnodeBeforeMount)&&invokeVNodeHook(Gi,Hi,gi)}ur&&invokeDirectiveHook(gi,null,Hi,"beforeMount");const br=needTransition(Ni,Qi);br&&Qi.beforeEnter(Ki),C(Ki,mi,Ai),((Gi=lr&&lr.onVnodeMounted)||br||ur)&&queuePostRenderEffect(()=>{Gi&&invokeVNodeHook(Gi,Hi,gi),br&&Qi.enter(Ki),ur&&invokeDirectiveHook(gi,null,Hi,"mounted")},Ni)},li=(gi,mi,Ai,Hi,Ni)=>{if(Ai&&Ot(gi,Ai),Hi)for(let Fi=0;Fi<Hi.length;Fi++)Ot(gi,Hi[Fi]);if(Ni){let Fi=Ni.subTree;if(mi===Fi||isSuspense(Fi.type)&&(Fi.ssContent===mi||Fi.ssFallback===mi)){const Zi=Ni.vnode;li(gi,Zi,Zi.scopeId,Zi.slotScopeIds,Ni.parent)}}},hi=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki=0)=>{for(let Gi=Ki;Gi<gi.length;Gi++){const lr=gi[Gi]=Bi?cloneIfMounted(gi[Gi]):normalizeVNode(gi[Gi]);St(null,lr,mi,Ai,Hi,Ni,Fi,Zi,Bi)}},xi=(gi,mi,Ai,Hi,Ni,Fi,Zi)=>{const Bi=mi.el=gi.el;let{patchFlag:Ki,dynamicChildren:Gi,dirs:lr}=mi;Ki|=gi.patchFlag&16;const er=gi.props||EMPTY_OBJ,Qi=mi.props||EMPTY_OBJ;let ur;if(Ai&&toggleRecurse(Ai,!1),(ur=Qi.onVnodeBeforeUpdate)&&invokeVNodeHook(ur,Ai,mi,gi),lr&&invokeDirectiveHook(mi,gi,Ai,"beforeUpdate"),Ai&&toggleRecurse(Ai,!0),(er.innerHTML&&Qi.innerHTML==null||er.textContent&&Qi.textContent==null)&&et(Bi,""),Gi?$i(gi.dynamicChildren,Gi,Bi,Ai,Hi,resolveChildrenNamespace(mi,Ni),Fi):Zi||si(gi,mi,Bi,null,Ai,Hi,resolveChildrenNamespace(mi,Ni),Fi,!1),Ki>0){if(Ki&16)Mi(Bi,er,Qi,Ai,Ni);else if(Ki&2&&er.class!==Qi.class&&Ce(Bi,"class",null,Qi.class,Ni),Ki&4&&Ce(Bi,"style",er.style,Qi.style,Ni),Ki&8){const br=mi.dynamicProps;for(let Cr=0;Cr<br.length;Cr++){const wr=br[Cr],Nr=er[wr],$r=Qi[wr];($r!==Nr||wr==="value")&&Ce(Bi,wr,Nr,$r,Ni,Ai)}}Ki&1&&gi.children!==mi.children&&et(Bi,mi.children)}else!Zi&&Gi==null&&Mi(Bi,er,Qi,Ai,Ni);((ur=Qi.onVnodeUpdated)||lr)&&queuePostRenderEffect(()=>{ur&&invokeVNodeHook(ur,Ai,mi,gi),lr&&invokeDirectiveHook(mi,gi,Ai,"updated")},Hi)},$i=(gi,mi,Ai,Hi,Ni,Fi,Zi)=>{for(let Bi=0;Bi<mi.length;Bi++){const Ki=gi[Bi],Gi=mi[Bi],lr=Ki.el&&(Ki.type===Fragment||!isSameVNodeType(Ki,Gi)||Ki.shapeFlag&70)?ht(Ki.el):Ai;St(Ki,Gi,lr,null,Hi,Ni,Fi,Zi,!0)}},Mi=(gi,mi,Ai,Hi,Ni)=>{if(mi!==Ai){if(mi!==EMPTY_OBJ)for(const Fi in mi)!isReservedProp(Fi)&&!(Fi in Ai)&&Ce(gi,Fi,mi[Fi],null,Ni,Hi);for(const Fi in Ai){if(isReservedProp(Fi))continue;const Zi=Ai[Fi],Bi=mi[Fi];Zi!==Bi&&Fi!=="value"&&Ce(gi,Fi,Bi,Zi,Ni,Hi)}"value"in Ai&&Ce(gi,"value",mi.value,Ai.value,Ni)}},Di=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki)=>{const Gi=mi.el=gi?gi.el:je(""),lr=mi.anchor=gi?gi.anchor:je("");let{patchFlag:er,dynamicChildren:Qi,slotScopeIds:ur}=mi;ur&&(Bi=Bi?Bi.concat(ur):ur),gi==null?(C(Gi,Ai,Hi),C(lr,Ai,Hi),hi(mi.children||[],Ai,lr,Ni,Fi,Zi,Bi,Ki)):er>0&&er&64&&Qi&&gi.dynamicChildren?($i(gi.dynamicChildren,Qi,Ai,Ni,Fi,Zi,Bi),(mi.key!=null||Ni&&mi===Ni.subTree)&&traverseStaticChildren(gi,mi,!0)):si(gi,mi,Ai,lr,Ni,Fi,Zi,Bi,Ki)},ki=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki)=>{mi.slotScopeIds=Bi,gi==null?mi.shapeFlag&512?Ni.ctx.activate(mi,Ai,Hi,Zi,Ki):ji(mi,Ai,Hi,Ni,Fi,Zi,Ki):Ri(gi,mi,Ki)},ji=(gi,mi,Ai,Hi,Ni,Fi,Zi)=>{const Bi=gi.component=createComponentInstance(gi,Hi,Ni);if(isKeepAlive(gi)&&(Bi.ctx.renderer=nr),setupComponent(Bi,!1,Zi),Bi.asyncDep){if(Ni&&Ni.registerDep(Bi,ui,Zi),!gi.el){const Ki=Bi.subTree=createVNode(Comment$1);kt(null,Ki,mi,Ai)}}else ui(Bi,gi,mi,Ai,Ni,Fi,Zi)},Ri=(gi,mi,Ai)=>{const Hi=mi.component=gi.component;if(shouldUpdateComponent(gi,mi,Ai))if(Hi.asyncDep&&!Hi.asyncResolved){vi(Hi,mi,Ai);return}else Hi.next=mi,Hi.update();else mi.el=gi.el,Hi.vnode=mi},ui=(gi,mi,Ai,Hi,Ni,Fi,Zi)=>{const Bi=()=>{if(gi.isMounted){let{next:er,bu:Qi,u:ur,parent:br,vnode:Cr}=gi;{const Ur=locateNonHydratedAsyncRoot(gi);if(Ur){er&&(er.el=Cr.el,vi(gi,er,Zi)),Ur.asyncDep.then(()=>{gi.isUnmounted||Bi()});return}}let wr=er,Nr;toggleRecurse(gi,!1),er?(er.el=Cr.el,vi(gi,er,Zi)):er=Cr,Qi&&invokeArrayFns(Qi),(Nr=er.props&&er.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Nr,br,er,Cr),toggleRecurse(gi,!0);const $r=renderComponentRoot(gi),xr=gi.subTree;gi.subTree=$r,St(xr,$r,ht(xr.el),Li(xr),gi,Ni,Fi),er.el=$r.el,wr===null&&updateHOCHostEl(gi,$r.el),ur&&queuePostRenderEffect(ur,Ni),(Nr=er.props&&er.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Nr,br,er,Cr),Ni)}else{let er;const{el:Qi,props:ur}=mi,{bm:br,m:Cr,parent:wr,root:Nr,type:$r}=gi,xr=isAsyncWrapper(mi);if(toggleRecurse(gi,!1),br&&invokeArrayFns(br),!xr&&(er=ur&&ur.onVnodeBeforeMount)&&invokeVNodeHook(er,wr,mi),toggleRecurse(gi,!0),Qi&&_r){const Ur=()=>{gi.subTree=renderComponentRoot(gi),_r(Qi,gi.subTree,gi,Ni,null)};xr&&$r.__asyncHydrate?$r.__asyncHydrate(Qi,gi,Ur):Ur()}else{Nr.ce&&Nr.ce._injectChildStyle($r);const Ur=gi.subTree=renderComponentRoot(gi);St(null,Ur,Ai,Hi,gi,Ni,Fi),mi.el=Ur.el}if(Cr&&queuePostRenderEffect(Cr,Ni),!xr&&(er=ur&&ur.onVnodeMounted)){const Ur=mi;queuePostRenderEffect(()=>invokeVNodeHook(er,wr,Ur),Ni)}(mi.shapeFlag&256||wr&&isAsyncWrapper(wr.vnode)&&wr.vnode.shapeFlag&256)&&gi.a&&queuePostRenderEffect(gi.a,Ni),gi.isMounted=!0,mi=Ai=Hi=null}};gi.scope.on();const Ki=gi.effect=new ReactiveEffect(Bi);gi.scope.off();const Gi=gi.update=Ki.run.bind(Ki),lr=gi.job=Ki.runIfDirty.bind(Ki);lr.i=gi,lr.id=gi.uid,Ki.scheduler=()=>queueJob(lr),toggleRecurse(gi,!0),Gi()},vi=(gi,mi,Ai)=>{mi.component=gi;const Hi=gi.vnode.props;gi.vnode=mi,gi.next=null,updateProps(gi,mi.props,Hi,Ai),updateSlots(gi,mi.children,Ai),pauseTracking(),flushPreFlushCbs(gi),resetTracking()},si=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki=!1)=>{const Gi=gi&&gi.children,lr=gi?gi.shapeFlag:0,er=mi.children,{patchFlag:Qi,shapeFlag:ur}=mi;if(Qi>0){if(Qi&128){Ci(Gi,er,Ai,Hi,Ni,Fi,Zi,Bi,Ki);return}else if(Qi&256){ai(Gi,er,Ai,Hi,Ni,Fi,Zi,Bi,Ki);return}}ur&8?(lr&16&&cr(Gi,Ni,Fi),er!==Gi&&et(Ai,er)):lr&16?ur&16?Ci(Gi,er,Ai,Hi,Ni,Fi,Zi,Bi,Ki):cr(Gi,Ni,Fi,!0):(lr&8&&et(Ai,""),ur&16&&hi(er,Ai,Hi,Ni,Fi,Zi,Bi,Ki))},ai=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki)=>{gi=gi||EMPTY_ARR,mi=mi||EMPTY_ARR;const Gi=gi.length,lr=mi.length,er=Math.min(Gi,lr);let Qi;for(Qi=0;Qi<er;Qi++){const ur=mi[Qi]=Ki?cloneIfMounted(mi[Qi]):normalizeVNode(mi[Qi]);St(gi[Qi],ur,Ai,null,Ni,Fi,Zi,Bi,Ki)}Gi>lr?cr(gi,Ni,Fi,!0,!1,er):hi(mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki,er)},Ci=(gi,mi,Ai,Hi,Ni,Fi,Zi,Bi,Ki)=>{let Gi=0;const lr=mi.length;let er=gi.length-1,Qi=lr-1;for(;Gi<=er&&Gi<=Qi;){const ur=gi[Gi],br=mi[Gi]=Ki?cloneIfMounted(mi[Gi]):normalizeVNode(mi[Gi]);if(isSameVNodeType(ur,br))St(ur,br,Ai,null,Ni,Fi,Zi,Bi,Ki);else break;Gi++}for(;Gi<=er&&Gi<=Qi;){const ur=gi[er],br=mi[Qi]=Ki?cloneIfMounted(mi[Qi]):normalizeVNode(mi[Qi]);if(isSameVNodeType(ur,br))St(ur,br,Ai,null,Ni,Fi,Zi,Bi,Ki);else break;er--,Qi--}if(Gi>er){if(Gi<=Qi){const ur=Qi+1,br=ur<lr?mi[ur].el:Hi;for(;Gi<=Qi;)St(null,mi[Gi]=Ki?cloneIfMounted(mi[Gi]):normalizeVNode(mi[Gi]),Ai,br,Ni,Fi,Zi,Bi,Ki),Gi++}}else if(Gi>Qi)for(;Gi<=er;)zi(gi[Gi],Ni,Fi,!0),Gi++;else{const ur=Gi,br=Gi,Cr=new Map;for(Gi=br;Gi<=Qi;Gi++){const Gr=mi[Gi]=Ki?cloneIfMounted(mi[Gi]):normalizeVNode(mi[Gi]);Gr.key!=null&&Cr.set(Gr.key,Gi)}let wr,Nr=0;const $r=Qi-br+1;let xr=!1,Ur=0;const Kr=new Array($r);for(Gi=0;Gi<$r;Gi++)Kr[Gi]=0;for(Gi=ur;Gi<=er;Gi++){const Gr=gi[Gi];if(Nr>=$r){zi(Gr,Ni,Fi,!0);continue}let Qr;if(Gr.key!=null)Qr=Cr.get(Gr.key);else for(wr=br;wr<=Qi;wr++)if(Kr[wr-br]===0&&isSameVNodeType(Gr,mi[wr])){Qr=wr;break}Qr===void 0?zi(Gr,Ni,Fi,!0):(Kr[Qr-br]=Gi+1,Qr>=Ur?Ur=Qr:xr=!0,St(Gr,mi[Qr],Ai,null,Ni,Fi,Zi,Bi,Ki),Nr++)}const zn=xr?getSequence(Kr):EMPTY_ARR;for(wr=zn.length-1,Gi=$r-1;Gi>=0;Gi--){const Gr=br+Gi,Qr=mi[Gr],Ln=Gr+1<lr?mi[Gr+1].el:Hi;Kr[Gi]===0?St(null,Qr,Ai,Ln,Ni,Fi,Zi,Bi,Ki):xr&&(wr<0||Gi!==zn[wr]?Ei(Qr,Ai,Ln,2):wr--)}}},Ei=(gi,mi,Ai,Hi,Ni=null)=>{const{el:Fi,type:Zi,transition:Bi,children:Ki,shapeFlag:Gi}=gi;if(Gi&6){Ei(gi.component.subTree,mi,Ai,Hi);return}if(Gi&128){gi.suspense.move(mi,Ai,Hi);return}if(Gi&64){Zi.move(gi,mi,Ai,nr);return}if(Zi===Fragment){C(Fi,mi,Ai);for(let er=0;er<Ki.length;er++)Ei(Ki[er],mi,Ai,Hi);C(gi.anchor,mi,Ai);return}if(Zi===Static){Nt(gi,mi,Ai);return}if(Hi!==2&&Gi&1&&Bi)if(Hi===0)Bi.beforeEnter(Fi),C(Fi,mi,Ai),queuePostRenderEffect(()=>Bi.enter(Fi),Ni);else{const{leave:er,delayLeave:Qi,afterLeave:ur}=Bi,br=()=>C(Fi,mi,Ai),Cr=()=>{er(Fi,()=>{br(),ur&&ur()})};Qi?Qi(Fi,br,Cr):Cr()}else C(Fi,mi,Ai)},zi=(gi,mi,Ai,Hi=!1,Ni=!1)=>{const{type:Fi,props:Zi,ref:Bi,children:Ki,dynamicChildren:Gi,shapeFlag:lr,patchFlag:er,dirs:Qi,cacheIndex:ur}=gi;if(er===-2&&(Ni=!1),Bi!=null&&setRef(Bi,null,Ai,gi,!0),ur!=null&&(mi.renderCache[ur]=void 0),lr&256){mi.ctx.deactivate(gi);return}const br=lr&1&&Qi,Cr=!isAsyncWrapper(gi);let wr;if(Cr&&(wr=Zi&&Zi.onVnodeBeforeUnmount)&&invokeVNodeHook(wr,mi,gi),lr&6)mr(gi.component,Ai,Hi);else{if(lr&128){gi.suspense.unmount(Ai,Hi);return}br&&invokeDirectiveHook(gi,null,mi,"beforeUnmount"),lr&64?gi.type.remove(gi,mi,Ai,nr,Hi):Gi&&!Gi.hasOnce&&(Fi!==Fragment||er>0&&er&64)?cr(Gi,mi,Ai,!1,!0):(Fi===Fragment&&er&384||!Ni&&lr&16)&&cr(Ki,mi,Ai),Hi&&or(gi)}(Cr&&(wr=Zi&&Zi.onVnodeUnmounted)||br)&&queuePostRenderEffect(()=>{wr&&invokeVNodeHook(wr,mi,gi),br&&invokeDirectiveHook(gi,null,mi,"unmounted")},Ai)},or=gi=>{const{type:mi,el:Ai,anchor:Hi,transition:Ni}=gi;if(mi===Fragment){hr(Ai,Hi);return}if(mi===Static){Gt(gi);return}const Fi=()=>{R(Ai),Ni&&!Ni.persisted&&Ni.afterLeave&&Ni.afterLeave()};if(gi.shapeFlag&1&&Ni&&!Ni.persisted){const{leave:Zi,delayLeave:Bi}=Ni,Ki=()=>Zi(Ai,Fi);Bi?Bi(gi.el,Fi,Ki):Ki()}else Fi()},hr=(gi,mi)=>{let Ai;for(;gi!==mi;)Ai=Dt(gi),R(gi),gi=Ai;R(mi)},mr=(gi,mi,Ai)=>{const{bum:Hi,scope:Ni,job:Fi,subTree:Zi,um:Bi,m:Ki,a:Gi}=gi;invalidateMount(Ki),invalidateMount(Gi),Hi&&invokeArrayFns(Hi),Ni.stop(),Fi&&(Fi.flags|=8,zi(Zi,gi,mi,Ai)),Bi&&queuePostRenderEffect(Bi,mi),queuePostRenderEffect(()=>{gi.isUnmounted=!0},mi),mi&&mi.pendingBranch&&!mi.isUnmounted&&gi.asyncDep&&!gi.asyncResolved&&gi.suspenseId===mi.pendingId&&(mi.deps--,mi.deps===0&&mi.resolve())},cr=(gi,mi,Ai,Hi=!1,Ni=!1,Fi=0)=>{for(let Zi=Fi;Zi<gi.length;Zi++)zi(gi[Zi],mi,Ai,Hi,Ni)},Li=gi=>{if(gi.shapeFlag&6)return Li(gi.component.subTree);if(gi.shapeFlag&128)return gi.suspense.next();const mi=Dt(gi.anchor||gi.el),Ai=mi&&mi[TeleportEndKey];return Ai?Dt(Ai):mi};let Ji=!1;const Xi=(gi,mi,Ai)=>{gi==null?mi._vnode&&zi(mi._vnode,null,null,!0):St(mi._vnode||null,gi,mi,null,null,null,Ai),mi._vnode=gi,Ji||(Ji=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ji=!1)},nr={p:St,um:zi,m:Ei,r:or,mt:ji,mc:hi,pc:si,pbc:$i,n:Li,o:E};let yr,_r;return{render:Xi,hydrate:yr,createApp:createAppAPI(Xi,yr)}}function resolveChildrenNamespace({type:E,props:S},x){return x==="svg"&&E==="foreignObject"||x==="mathml"&&E==="annotation-xml"&&S&&S.encoding&&S.encoding.includes("html")?void 0:x}function toggleRecurse({effect:E,job:S},x){x?(E.flags|=32,S.flags|=4):(E.flags&=-33,S.flags&=-5)}function needTransition(E,S){return(!E||E&&!E.pendingBranch)&&S&&!S.persisted}function traverseStaticChildren(E,S,x=!1){const C=E.children,R=S.children;if(isArray$1(C)&&isArray$1(R))for(let Ce=0;Ce<C.length;Ce++){const Ue=C[Ce];let je=R[Ce];je.shapeFlag&1&&!je.dynamicChildren&&((je.patchFlag<=0||je.patchFlag===32)&&(je=R[Ce]=cloneIfMounted(R[Ce]),je.el=Ue.el),!x&&je.patchFlag!==-2&&traverseStaticChildren(Ue,je)),je.type===Text$1&&(je.el=Ue.el)}}function getSequence(E){const S=E.slice(),x=[0];let C,R,Ce,Ue,je;const Xe=E.length;for(C=0;C<Xe;C++){const Ye=E[C];if(Ye!==0){if(R=x[x.length-1],E[R]<Ye){S[C]=R,x.push(C);continue}for(Ce=0,Ue=x.length-1;Ce<Ue;)je=Ce+Ue>>1,E[x[je]]<Ye?Ce=je+1:Ue=je;Ye<E[x[Ce]]&&(Ce>0&&(S[C]=x[Ce-1]),x[Ce]=C)}}for(Ce=x.length,Ue=x[Ce-1];Ce-- >0;)x[Ce]=Ue,Ue=S[Ue];return x}function locateNonHydratedAsyncRoot(E){const S=E.subTree.component;if(S)return S.asyncDep&&!S.asyncResolved?S:locateNonHydratedAsyncRoot(S)}function invalidateMount(E){if(E)for(let S=0;S<E.length;S++)E[S].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(E,S){return doWatch(E,null,S)}function watch(E,S,x){return doWatch(E,S,x)}function doWatch(E,S,x=EMPTY_OBJ){const{immediate:C,deep:R,flush:Ce,once:Ue}=x,je=extend$1({},x),Xe=S&&C||!S&&Ce!=="post";let Ye;if(isInSSRComponentSetup){if(Ce==="sync"){const Ot=useSSRContext();Ye=Ot.__watcherHandles||(Ot.__watcherHandles=[])}else if(!Xe){const Ot=()=>{};return Ot.stop=NOOP,Ot.resume=NOOP,Ot.pause=NOOP,Ot}}const et=currentInstance;je.call=(Ot,Mt,St)=>callWithAsyncErrorHandling(Ot,et,Mt,St);let ht=!1;Ce==="post"?je.scheduler=Ot=>{queuePostRenderEffect(Ot,et&&et.suspense)}:Ce!=="sync"&&(ht=!0,je.scheduler=(Ot,Mt)=>{Mt?Ot():queueJob(Ot)}),je.augmentJob=Ot=>{S&&(Ot.flags|=4),ht&&(Ot.flags|=2,et&&(Ot.id=et.uid,Ot.i=et))};const Dt=watch$1(E,S,je);return isInSSRComponentSetup&&(Ye?Ye.push(Dt):Xe&&Dt()),Dt}function instanceWatch(E,S,x){const C=this.proxy,R=isString(E)?E.includes(".")?createPathGetter(C,E):()=>C[E]:E.bind(C,C);let Ce;isFunction$2(S)?Ce=S:(Ce=S.handler,x=S);const Ue=setCurrentInstance(this),je=doWatch(R,Ce.bind(C),x);return Ue(),je}function createPathGetter(E,S){const x=S.split(".");return()=>{let C=E;for(let R=0;R<x.length&&C;R++)C=C[x[R]];return C}}const getModelModifiers=(E,S)=>S==="modelValue"||S==="model-value"?E.modelModifiers:E[`${S}Modifiers`]||E[`${camelize$1(S)}Modifiers`]||E[`${hyphenate(S)}Modifiers`];function emit$1(E,S,...x){if(E.isUnmounted)return;const C=E.vnode.props||EMPTY_OBJ;let R=x;const Ce=S.startsWith("update:"),Ue=Ce&&getModelModifiers(C,S.slice(7));Ue&&(Ue.trim&&(R=x.map(et=>isString(et)?et.trim():et)),Ue.number&&(R=x.map(looseToNumber)));let je,Xe=C[je=toHandlerKey(S)]||C[je=toHandlerKey(camelize$1(S))];!Xe&&Ce&&(Xe=C[je=toHandlerKey(hyphenate(S))]),Xe&&callWithAsyncErrorHandling(Xe,E,6,R);const Ye=C[je+"Once"];if(Ye){if(!E.emitted)E.emitted={};else if(E.emitted[je])return;E.emitted[je]=!0,callWithAsyncErrorHandling(Ye,E,6,R)}}function normalizeEmitsOptions(E,S,x=!1){const C=S.emitsCache,R=C.get(E);if(R!==void 0)return R;const Ce=E.emits;let Ue={},je=!1;if(!isFunction$2(E)){const Xe=Ye=>{const et=normalizeEmitsOptions(Ye,S,!0);et&&(je=!0,extend$1(Ue,et))};!x&&S.mixins.length&&S.mixins.forEach(Xe),E.extends&&Xe(E.extends),E.mixins&&E.mixins.forEach(Xe)}return!Ce&&!je?(isObject$3(E)&&C.set(E,null),null):(isArray$1(Ce)?Ce.forEach(Xe=>Ue[Xe]=null):extend$1(Ue,Ce),isObject$3(E)&&C.set(E,Ue),Ue)}function isEmitListener(E,S){return!E||!isOn(S)?!1:(S=S.slice(2).replace(/Once$/,""),hasOwn(E,S[0].toLowerCase()+S.slice(1))||hasOwn(E,hyphenate(S))||hasOwn(E,S))}function markAttrsAccessed(){}function renderComponentRoot(E){const{type:S,vnode:x,proxy:C,withProxy:R,propsOptions:[Ce],slots:Ue,attrs:je,emit:Xe,render:Ye,renderCache:et,props:ht,data:Dt,setupState:Ot,ctx:Mt,inheritAttrs:St}=E,Ut=setCurrentRenderingInstance(E);let kt,Ft;try{if(x.shapeFlag&4){const Gt=R||C,Zt=Gt;kt=normalizeVNode(Ye.call(Zt,Gt,et,ht,Ot,Dt,Mt)),Ft=je}else{const Gt=S;kt=normalizeVNode(Gt.length>1?Gt(ht,{attrs:je,slots:Ue,emit:Xe}):Gt(ht,null)),Ft=S.props?je:getFunctionalFallthrough(je)}}catch(Gt){blockStack.length=0,handleError(Gt,E,1),kt=createVNode(Comment$1)}let Nt=kt;if(Ft&&St!==!1){const Gt=Object.keys(Ft),{shapeFlag:Zt}=Nt;Gt.length&&Zt&7&&(Ce&&Gt.some(isModelListener)&&(Ft=filterModelListeners(Ft,Ce)),Nt=cloneVNode(Nt,Ft,!1,!0))}return x.dirs&&(Nt=cloneVNode(Nt,null,!1,!0),Nt.dirs=Nt.dirs?Nt.dirs.concat(x.dirs):x.dirs),x.transition&&setTransitionHooks(Nt,x.transition),kt=Nt,setCurrentRenderingInstance(Ut),kt}const getFunctionalFallthrough=E=>{let S;for(const x in E)(x==="class"||x==="style"||isOn(x))&&((S||(S={}))[x]=E[x]);return S},filterModelListeners=(E,S)=>{const x={};for(const C in E)(!isModelListener(C)||!(C.slice(9)in S))&&(x[C]=E[C]);return x};function shouldUpdateComponent(E,S,x){const{props:C,children:R,component:Ce}=E,{props:Ue,children:je,patchFlag:Xe}=S,Ye=Ce.emitsOptions;if(S.dirs||S.transition)return!0;if(x&&Xe>=0){if(Xe&1024)return!0;if(Xe&16)return C?hasPropsChanged(C,Ue,Ye):!!Ue;if(Xe&8){const et=S.dynamicProps;for(let ht=0;ht<et.length;ht++){const Dt=et[ht];if(Ue[Dt]!==C[Dt]&&!isEmitListener(Ye,Dt))return!0}}}else return(R||je)&&(!je||!je.$stable)?!0:C===Ue?!1:C?Ue?hasPropsChanged(C,Ue,Ye):!0:!!Ue;return!1}function hasPropsChanged(E,S,x){const C=Object.keys(S);if(C.length!==Object.keys(E).length)return!0;for(let R=0;R<C.length;R++){const Ce=C[R];if(S[Ce]!==E[Ce]&&!isEmitListener(x,Ce))return!0}return!1}function updateHOCHostEl({vnode:E,parent:S},x){for(;S;){const C=S.subTree;if(C.suspense&&C.suspense.activeBranch===E&&(C.el=E.el),C===E)(E=S.vnode).el=x,S=S.parent;else break}}const isSuspense=E=>E.__isSuspense;function queueEffectWithSuspense(E,S){S&&S.pendingBranch?isArray$1(E)?S.effects.push(...E):S.effects.push(E):queuePostFlushCb(E)}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment$1=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(E=!1){blockStack.push(currentBlock=E?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(E){isBlockTreeEnabled+=E,E<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(E){return E.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(E),E}function createElementBlock(E,S,x,C,R,Ce){return setupBlock(createBaseVNode(E,S,x,C,R,Ce,!0))}function createBlock(E,S,x,C,R){return setupBlock(createVNode(E,S,x,C,R,!0))}function isVNode(E){return E?E.__v_isVNode===!0:!1}function isSameVNodeType(E,S){return E.type===S.type&&E.key===S.key}const normalizeKey=({key:E})=>E??null,normalizeRef=({ref:E,ref_key:S,ref_for:x})=>(typeof E=="number"&&(E=""+E),E!=null?isString(E)||isRef(E)||isFunction$2(E)?{i:currentRenderingInstance,r:E,k:S,f:!!x}:E:null);function createBaseVNode(E,S=null,x=null,C=0,R=null,Ce=E===Fragment?0:1,Ue=!1,je=!1){const Xe={__v_isVNode:!0,__v_skip:!0,type:E,props:S,key:S&&normalizeKey(S),ref:S&&normalizeRef(S),scopeId:currentScopeId,slotScopeIds:null,children:x,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Ce,patchFlag:C,dynamicProps:R,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return je?(normalizeChildren(Xe,x),Ce&128&&E.normalize(Xe)):x&&(Xe.shapeFlag|=isString(x)?8:16),isBlockTreeEnabled>0&&!Ue&&currentBlock&&(Xe.patchFlag>0||Ce&6)&&Xe.patchFlag!==32&&currentBlock.push(Xe),Xe}const createVNode=_createVNode;function _createVNode(E,S=null,x=null,C=0,R=null,Ce=!1){if((!E||E===NULL_DYNAMIC_COMPONENT)&&(E=Comment$1),isVNode(E)){const je=cloneVNode(E,S,!0);return x&&normalizeChildren(je,x),isBlockTreeEnabled>0&&!Ce&&currentBlock&&(je.shapeFlag&6?currentBlock[currentBlock.indexOf(E)]=je:currentBlock.push(je)),je.patchFlag=-2,je}if(isClassComponent(E)&&(E=E.__vccOpts),S){S=guardReactiveProps(S);let{class:je,style:Xe}=S;je&&!isString(je)&&(S.class=normalizeClass(je)),isObject$3(Xe)&&(isProxy(Xe)&&!isArray$1(Xe)&&(Xe=extend$1({},Xe)),S.style=normalizeStyle(Xe))}const Ue=isString(E)?1:isSuspense(E)?128:isTeleport(E)?64:isObject$3(E)?4:isFunction$2(E)?2:0;return createBaseVNode(E,S,x,C,R,Ue,Ce,!0)}function guardReactiveProps(E){return E?isProxy(E)||isInternalObject(E)?extend$1({},E):E:null}function cloneVNode(E,S,x=!1,C=!1){const{props:R,ref:Ce,patchFlag:Ue,children:je,transition:Xe}=E,Ye=S?mergeProps(R||{},S):R,et={__v_isVNode:!0,__v_skip:!0,type:E.type,props:Ye,key:Ye&&normalizeKey(Ye),ref:S&&S.ref?x&&Ce?isArray$1(Ce)?Ce.concat(normalizeRef(S)):[Ce,normalizeRef(S)]:normalizeRef(S):Ce,scopeId:E.scopeId,slotScopeIds:E.slotScopeIds,children:je,target:E.target,targetStart:E.targetStart,targetAnchor:E.targetAnchor,staticCount:E.staticCount,shapeFlag:E.shapeFlag,patchFlag:S&&E.type!==Fragment?Ue===-1?16:Ue|16:Ue,dynamicProps:E.dynamicProps,dynamicChildren:E.dynamicChildren,appContext:E.appContext,dirs:E.dirs,transition:Xe,component:E.component,suspense:E.suspense,ssContent:E.ssContent&&cloneVNode(E.ssContent),ssFallback:E.ssFallback&&cloneVNode(E.ssFallback),el:E.el,anchor:E.anchor,ctx:E.ctx,ce:E.ce};return Xe&&C&&setTransitionHooks(et,Xe.clone(et)),et}function createTextVNode(E=" ",S=0){return createVNode(Text$1,null,E,S)}function createStaticVNode(E,S){const x=createVNode(Static,null,E);return x.staticCount=S,x}function createCommentVNode(E="",S=!1){return S?(openBlock(),createBlock(Comment$1,null,E)):createVNode(Comment$1,null,E)}function normalizeVNode(E){return E==null||typeof E=="boolean"?createVNode(Comment$1):isArray$1(E)?createVNode(Fragment,null,E.slice()):isVNode(E)?cloneIfMounted(E):createVNode(Text$1,null,String(E))}function cloneIfMounted(E){return E.el===null&&E.patchFlag!==-1||E.memo?E:cloneVNode(E)}function normalizeChildren(E,S){let x=0;const{shapeFlag:C}=E;if(S==null)S=null;else if(isArray$1(S))x=16;else if(typeof S=="object")if(C&65){const R=S.default;R&&(R._c&&(R._d=!1),normalizeChildren(E,R()),R._c&&(R._d=!0));return}else{x=32;const R=S._;!R&&!isInternalObject(S)?S._ctx=currentRenderingInstance:R===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?S._=1:(S._=2,E.patchFlag|=1024))}else isFunction$2(S)?(S={default:S,_ctx:currentRenderingInstance},x=32):(S=String(S),C&64?(x=16,S=[createTextVNode(S)]):x=8);E.children=S,E.shapeFlag|=x}function mergeProps(...E){const S={};for(let x=0;x<E.length;x++){const C=E[x];for(const R in C)if(R==="class")S.class!==C.class&&(S.class=normalizeClass([S.class,C.class]));else if(R==="style")S.style=normalizeStyle([S.style,C.style]);else if(isOn(R)){const Ce=S[R],Ue=C[R];Ue&&Ce!==Ue&&!(isArray$1(Ce)&&Ce.includes(Ue))&&(S[R]=Ce?[].concat(Ce,Ue):Ue)}else R!==""&&(S[R]=C[R])}return S}function invokeVNodeHook(E,S,x,C=null){callWithAsyncErrorHandling(E,S,7,[x,C])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(E,S,x){const C=E.type,R=(S?S.appContext:E.appContext)||emptyAppContext,Ce={uid:uid++,vnode:E,type:C,parent:S,appContext:R,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:S?S.provides:Object.create(R.provides),ids:S?S.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(C,R),emitsOptions:normalizeEmitsOptions(C,R),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:C.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:x,suspenseId:x?x.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ce.ctx={_:Ce},Ce.root=S?S.root:Ce,Ce.emit=emit$1.bind(null,Ce),E.ce&&E.ce(Ce),Ce}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const E=getGlobalThis(),S=(x,C)=>{let R;return(R=E[x])||(R=E[x]=[]),R.push(C),Ce=>{R.length>1?R.forEach(Ue=>Ue(Ce)):R[0](Ce)}};internalSetCurrentInstance=S("__VUE_INSTANCE_SETTERS__",x=>currentInstance=x),setInSSRSetupState=S("__VUE_SSR_SETTERS__",x=>isInSSRComponentSetup=x)}const setCurrentInstance=E=>{const S=currentInstance;return internalSetCurrentInstance(E),E.scope.on(),()=>{E.scope.off(),internalSetCurrentInstance(S)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(E){return E.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(E,S=!1,x=!1){S&&setInSSRSetupState(S);const{props:C,children:R}=E.vnode,Ce=isStatefulComponent(E);initProps(E,C,Ce,S),initSlots(E,R,x);const Ue=Ce?setupStatefulComponent(E,S):void 0;return S&&setInSSRSetupState(!1),Ue}function setupStatefulComponent(E,S){const x=E.type;E.accessCache=Object.create(null),E.proxy=new Proxy(E.ctx,PublicInstanceProxyHandlers);const{setup:C}=x;if(C){pauseTracking();const R=E.setupContext=C.length>1?createSetupContext(E):null,Ce=setCurrentInstance(E),Ue=callWithErrorHandling(C,E,0,[E.props,R]),je=isPromise$2(Ue);if(resetTracking(),Ce(),(je||E.sp)&&!isAsyncWrapper(E)&&markAsyncBoundary(E),je){if(Ue.then(unsetCurrentInstance,unsetCurrentInstance),S)return Ue.then(Xe=>{handleSetupResult(E,Xe,S)}).catch(Xe=>{handleError(Xe,E,0)});E.asyncDep=Ue}else handleSetupResult(E,Ue,S)}else finishComponentSetup(E,S)}function handleSetupResult(E,S,x){isFunction$2(S)?E.type.__ssrInlineRender?E.ssrRender=S:E.render=S:isObject$3(S)&&(E.setupState=proxyRefs(S)),finishComponentSetup(E,x)}let compile;function finishComponentSetup(E,S,x){const C=E.type;if(!E.render){if(!S&&compile&&!C.render){const R=C.template||resolveMergedOptions(E).template;if(R){const{isCustomElement:Ce,compilerOptions:Ue}=E.appContext.config,{delimiters:je,compilerOptions:Xe}=C,Ye=extend$1(extend$1({isCustomElement:Ce,delimiters:je},Ue),Xe);C.render=compile(R,Ye)}}E.render=C.render||NOOP}{const R=setCurrentInstance(E);pauseTracking();try{applyOptions(E)}finally{resetTracking(),R()}}}const attrsProxyHandlers={get(E,S){return track(E,"get",""),E[S]}};function createSetupContext(E){const S=x=>{E.exposed=x||{}};return{attrs:new Proxy(E.attrs,attrsProxyHandlers),slots:E.slots,emit:E.emit,expose:S}}function getComponentPublicInstance(E){return E.exposed?E.exposeProxy||(E.exposeProxy=new Proxy(proxyRefs(markRaw(E.exposed)),{get(S,x){if(x in S)return S[x];if(x in publicPropertiesMap)return publicPropertiesMap[x](E)},has(S,x){return x in S||x in publicPropertiesMap}})):E.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=E=>E.replace(classifyRE,S=>S.toUpperCase()).replace(/[-_]/g,"");function getComponentName(E,S=!0){return isFunction$2(E)?E.displayName||E.name:E.name||S&&E.__name}function formatComponentName(E,S,x=!1){let C=getComponentName(S);if(!C&&S.__file){const R=S.__file.match(/([^/\\]+)\.\w+$/);R&&(C=R[1])}if(!C&&E&&E.parent){const R=Ce=>{for(const Ue in Ce)if(Ce[Ue]===S)return Ue};C=R(E.components||E.parent.type.components)||R(E.appContext.components)}return C?classify(C):x?"App":"Anonymous"}function isClassComponent(E){return isFunction$2(E)&&"__vccOpts"in E}const computed=(E,S)=>computed$1(E,S,isInSSRComponentSetup);function h$1(E,S,x){const C=arguments.length;return C===2?isObject$3(S)&&!isArray$1(S)?isVNode(S)?createVNode(E,null,[S]):createVNode(E,S):createVNode(E,null,S):(C>3?x=Array.prototype.slice.call(arguments,2):C===3&&isVNode(x)&&(x=[x]),createVNode(E,S,x))}const version$8="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:E=>E})}catch{}const unsafeToTrustedHTML=policy?E=>policy.createHTML(E):E=>E,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(E,S,x)=>{S.insertBefore(E,x||null)},remove:E=>{const S=E.parentNode;S&&S.removeChild(E)},createElement:(E,S,x,C)=>{const R=S==="svg"?doc.createElementNS(svgNS,E):S==="mathml"?doc.createElementNS(mathmlNS,E):x?doc.createElement(E,{is:x}):doc.createElement(E);return E==="select"&&C&&C.multiple!=null&&R.setAttribute("multiple",C.multiple),R},createText:E=>doc.createTextNode(E),createComment:E=>doc.createComment(E),setText:(E,S)=>{E.nodeValue=S},setElementText:(E,S)=>{E.textContent=S},parentNode:E=>E.parentNode,nextSibling:E=>E.nextSibling,querySelector:E=>doc.querySelector(E),setScopeId(E,S){E.setAttribute(S,"")},insertStaticContent(E,S,x,C,R,Ce){const Ue=x?x.previousSibling:S.lastChild;if(R&&(R===Ce||R.nextSibling))for(;S.insertBefore(R.cloneNode(!0),x),!(R===Ce||!(R=R.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(C==="svg"?`<svg>${E}</svg>`:C==="mathml"?`<math>${E}</math>`:E);const je=templateContainer.content;if(C==="svg"||C==="mathml"){const Xe=je.firstChild;for(;Xe.firstChild;)je.appendChild(Xe.firstChild);je.removeChild(Xe)}S.insertBefore(je,x)}return[Ue?Ue.nextSibling:S.firstChild,x?x.previousSibling:S.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(E,S,x){const C=E[vtcKey];C&&(S=(S?[S,...C]:[...C]).join(" ")),S==null?E.removeAttribute("class"):x?E.setAttribute("class",S):E.className=S}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(E,S,x){const C=E.style,R=isString(x);let Ce=!1;if(x&&!R){if(S)if(isString(S))for(const Ue of S.split(";")){const je=Ue.slice(0,Ue.indexOf(":")).trim();x[je]==null&&setStyle(C,je,"")}else for(const Ue in S)x[Ue]==null&&setStyle(C,Ue,"");for(const Ue in x)Ue==="display"&&(Ce=!0),setStyle(C,Ue,x[Ue])}else if(R){if(S!==x){const Ue=C[CSS_VAR_TEXT];Ue&&(x+=";"+Ue),C.cssText=x,Ce=displayRE.test(x)}}else S&&E.removeAttribute("style");vShowOriginalDisplay in E&&(E[vShowOriginalDisplay]=Ce?C.display:"",E[vShowHidden]&&(C.display="none"))}const importantRE=/\s*!important$/;function setStyle(E,S,x){if(isArray$1(x))x.forEach(C=>setStyle(E,S,C));else if(x==null&&(x=""),S.startsWith("--"))E.setProperty(S,x);else{const C=autoPrefix(E,S);importantRE.test(x)?E.setProperty(hyphenate(C),x.replace(importantRE,""),"important"):E[C]=x}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(E,S){const x=prefixCache[S];if(x)return x;let C=camelize$1(S);if(C!=="filter"&&C in E)return prefixCache[S]=C;C=capitalize(C);for(let R=0;R<prefixes.length;R++){const Ce=prefixes[R]+C;if(Ce in E)return prefixCache[S]=Ce}return S}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(E,S,x,C,R,Ce=isSpecialBooleanAttr(S)){C&&S.startsWith("xlink:")?x==null?E.removeAttributeNS(xlinkNS,S.slice(6,S.length)):E.setAttributeNS(xlinkNS,S,x):x==null||Ce&&!includeBooleanAttr(x)?E.removeAttribute(S):E.setAttribute(S,Ce?"":isSymbol(x)?String(x):x)}function patchDOMProp(E,S,x,C,R){if(S==="innerHTML"||S==="textContent"){x!=null&&(E[S]=S==="innerHTML"?unsafeToTrustedHTML(x):x);return}const Ce=E.tagName;if(S==="value"&&Ce!=="PROGRESS"&&!Ce.includes("-")){const je=Ce==="OPTION"?E.getAttribute("value")||"":E.value,Xe=x==null?E.type==="checkbox"?"on":"":String(x);(je!==Xe||!("_value"in E))&&(E.value=Xe),x==null&&E.removeAttribute(S),E._value=x;return}let Ue=!1;if(x===""||x==null){const je=typeof E[S];je==="boolean"?x=includeBooleanAttr(x):x==null&&je==="string"?(x="",Ue=!0):je==="number"&&(x=0,Ue=!0)}try{E[S]=x}catch{}Ue&&E.removeAttribute(R||S)}function addEventListener(E,S,x,C){E.addEventListener(S,x,C)}function removeEventListener(E,S,x,C){E.removeEventListener(S,x,C)}const veiKey=Symbol("_vei");function patchEvent(E,S,x,C,R=null){const Ce=E[veiKey]||(E[veiKey]={}),Ue=Ce[S];if(C&&Ue)Ue.value=C;else{const[je,Xe]=parseName(S);if(C){const Ye=Ce[S]=createInvoker(C,R);addEventListener(E,je,Ye,Xe)}else Ue&&(removeEventListener(E,je,Ue,Xe),Ce[S]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(E){let S;if(optionsModifierRE.test(E)){S={};let C;for(;C=E.match(optionsModifierRE);)E=E.slice(0,E.length-C[0].length),S[C[0].toLowerCase()]=!0}return[E[2]===":"?E.slice(3):hyphenate(E.slice(2)),S]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(E,S){const x=C=>{if(!C._vts)C._vts=Date.now();else if(C._vts<=x.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(C,x.value),S,5,[C])};return x.value=E,x.attached=getNow(),x}function patchStopImmediatePropagation(E,S){if(isArray$1(S)){const x=E.stopImmediatePropagation;return E.stopImmediatePropagation=()=>{x.call(E),E._stopped=!0},S.map(C=>R=>!R._stopped&&C&&C(R))}else return S}const isNativeOn=E=>E.charCodeAt(0)===111&&E.charCodeAt(1)===110&&E.charCodeAt(2)>96&&E.charCodeAt(2)<123,patchProp=(E,S,x,C,R,Ce)=>{const Ue=R==="svg";S==="class"?patchClass(E,C,Ue):S==="style"?patchStyle(E,x,C):isOn(S)?isModelListener(S)||patchEvent(E,S,x,C,Ce):(S[0]==="."?(S=S.slice(1),!0):S[0]==="^"?(S=S.slice(1),!1):shouldSetAsProp(E,S,C,Ue))?(patchDOMProp(E,S,C),!E.tagName.includes("-")&&(S==="value"||S==="checked"||S==="selected")&&patchAttr(E,S,C,Ue,Ce,S!=="value")):E._isVueCE&&(/[A-Z]/.test(S)||!isString(C))?patchDOMProp(E,camelize$1(S),C,Ce,S):(S==="true-value"?E._trueValue=C:S==="false-value"&&(E._falseValue=C),patchAttr(E,S,C,Ue))};function shouldSetAsProp(E,S,x,C){if(C)return!!(S==="innerHTML"||S==="textContent"||S in E&&isNativeOn(S)&&isFunction$2(x));if(S==="spellcheck"||S==="draggable"||S==="translate"||S==="form"||S==="list"&&E.tagName==="INPUT"||S==="type"&&E.tagName==="TEXTAREA")return!1;if(S==="width"||S==="height"){const R=E.tagName;if(R==="IMG"||R==="VIDEO"||R==="CANVAS"||R==="SOURCE")return!1}return isNativeOn(S)&&isString(x)?!1:S in E}const getModelAssigner=E=>{const S=E.props["onUpdate:modelValue"]||!1;return isArray$1(S)?x=>invokeArrayFns(S,x):S};function onCompositionStart(E){E.target.composing=!0}function onCompositionEnd(E){const S=E.target;S.composing&&(S.composing=!1,S.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(E,{modifiers:{lazy:S,trim:x,number:C}},R){E[assignKey]=getModelAssigner(R);const Ce=C||R.props&&R.props.type==="number";addEventListener(E,S?"change":"input",Ue=>{if(Ue.target.composing)return;let je=E.value;x&&(je=je.trim()),Ce&&(je=looseToNumber(je)),E[assignKey](je)}),x&&addEventListener(E,"change",()=>{E.value=E.value.trim()}),S||(addEventListener(E,"compositionstart",onCompositionStart),addEventListener(E,"compositionend",onCompositionEnd),addEventListener(E,"change",onCompositionEnd))},mounted(E,{value:S}){E.value=S??""},beforeUpdate(E,{value:S,oldValue:x,modifiers:{lazy:C,trim:R,number:Ce}},Ue){if(E[assignKey]=getModelAssigner(Ue),E.composing)return;const je=(Ce||E.type==="number")&&!/^0\d/.test(E.value)?looseToNumber(E.value):E.value,Xe=S??"";je!==Xe&&(document.activeElement===E&&E.type!=="range"&&(C&&S===x||R&&E.value.trim()===Xe)||(E.value=Xe))}},vModelCheckbox={deep:!0,created(E,S,x){E[assignKey]=getModelAssigner(x),addEventListener(E,"change",()=>{const C=E._modelValue,R=getValue(E),Ce=E.checked,Ue=E[assignKey];if(isArray$1(C)){const je=looseIndexOf(C,R),Xe=je!==-1;if(Ce&&!Xe)Ue(C.concat(R));else if(!Ce&&Xe){const Ye=[...C];Ye.splice(je,1),Ue(Ye)}}else if(isSet(C)){const je=new Set(C);Ce?je.add(R):je.delete(R),Ue(je)}else Ue(getCheckboxValue(E,Ce))})},mounted:setChecked,beforeUpdate(E,S,x){E[assignKey]=getModelAssigner(x),setChecked(E,S,x)}};function setChecked(E,{value:S,oldValue:x},C){E._modelValue=S;let R;if(isArray$1(S))R=looseIndexOf(S,C.props.value)>-1;else if(isSet(S))R=S.has(C.props.value);else{if(S===x)return;R=looseEqual(S,getCheckboxValue(E,!0))}E.checked!==R&&(E.checked=R)}const vModelSelect={deep:!0,created(E,{value:S,modifiers:{number:x}},C){const R=isSet(S);addEventListener(E,"change",()=>{const Ce=Array.prototype.filter.call(E.options,Ue=>Ue.selected).map(Ue=>x?looseToNumber(getValue(Ue)):getValue(Ue));E[assignKey](E.multiple?R?new Set(Ce):Ce:Ce[0]),E._assigning=!0,nextTick(()=>{E._assigning=!1})}),E[assignKey]=getModelAssigner(C)},mounted(E,{value:S}){setSelected(E,S)},beforeUpdate(E,S,x){E[assignKey]=getModelAssigner(x)},updated(E,{value:S}){E._assigning||setSelected(E,S)}};function setSelected(E,S){const x=E.multiple,C=isArray$1(S);if(!(x&&!C&&!isSet(S))){for(let R=0,Ce=E.options.length;R<Ce;R++){const Ue=E.options[R],je=getValue(Ue);if(x)if(C){const Xe=typeof je;Xe==="string"||Xe==="number"?Ue.selected=S.some(Ye=>String(Ye)===String(je)):Ue.selected=looseIndexOf(S,je)>-1}else Ue.selected=S.has(je);else if(looseEqual(getValue(Ue),S)){E.selectedIndex!==R&&(E.selectedIndex=R);return}}!x&&E.selectedIndex!==-1&&(E.selectedIndex=-1)}}function getValue(E){return"_value"in E?E._value:E.value}function getCheckboxValue(E,S){const x=S?"_trueValue":"_falseValue";return x in E?E[x]:S}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:E=>E.stopPropagation(),prevent:E=>E.preventDefault(),self:E=>E.target!==E.currentTarget,ctrl:E=>!E.ctrlKey,shift:E=>!E.shiftKey,alt:E=>!E.altKey,meta:E=>!E.metaKey,left:E=>"button"in E&&E.button!==0,middle:E=>"button"in E&&E.button!==1,right:E=>"button"in E&&E.button!==2,exact:(E,S)=>systemModifiers.some(x=>E[`${x}Key`]&&!S.includes(x))},withModifiers=(E,S)=>{const x=E._withMods||(E._withMods={}),C=S.join(".");return x[C]||(x[C]=(R,...Ce)=>{for(let Ue=0;Ue<S.length;Ue++){const je=modifierGuards[S[Ue]];if(je&&je(R,S))return}return E(R,...Ce)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(E,S)=>{const x=E._withKeys||(E._withKeys={}),C=S.join(".");return x[C]||(x[C]=R=>{if(!("key"in R))return;const Ce=hyphenate(R.key);if(S.some(Ue=>Ue===Ce||keyNames[Ue]===Ce))return E(R)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...E)=>{const S=ensureRenderer().createApp(...E),{mount:x}=S;return S.mount=C=>{const R=normalizeContainer(C);if(!R)return;const Ce=S._component;!isFunction$2(Ce)&&!Ce.render&&!Ce.template&&(Ce.template=R.innerHTML),R.nodeType===1&&(R.textContent="");const Ue=x(R,!1,resolveRootNamespace(R));return R instanceof Element&&(R.removeAttribute("v-cloak"),R.setAttribute("data-v-app","")),Ue},S};function resolveRootNamespace(E){if(E instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&E instanceof MathMLElement)return"mathml"}function normalizeContainer(E){return isString(E)?document.querySelector(E):E}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function getAugmentedNamespace(E){if(E.__esModule)return E;var S=E.default;if(typeof S=="function"){var x=function C(){return this instanceof C?Reflect.construct(S,arguments,this.constructor):S.apply(this,arguments)};x.prototype=S.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(E).forEach(function(C){var R=Object.getOwnPropertyDescriptor(E,C);Object.defineProperty(x,C,R.get?R:{enumerable:!0,get:function(){return E[C]}})}),x}var pusher={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0-rc2
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(E,S){(function(C,R){E.exports=R()})(window,function(){return function(x){var C={};function R(Ce){if(C[Ce])return C[Ce].exports;var Ue=C[Ce]={i:Ce,l:!1,exports:{}};return x[Ce].call(Ue.exports,Ue,Ue.exports,R),Ue.l=!0,Ue.exports}return R.m=x,R.c=C,R.d=function(Ce,Ue,je){R.o(Ce,Ue)||Object.defineProperty(Ce,Ue,{enumerable:!0,get:je})},R.r=function(Ce){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Ce,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ce,"__esModule",{value:!0})},R.t=function(Ce,Ue){if(Ue&1&&(Ce=R(Ce)),Ue&8||Ue&4&&typeof Ce=="object"&&Ce&&Ce.__esModule)return Ce;var je=Object.create(null);if(R.r(je),Object.defineProperty(je,"default",{enumerable:!0,value:Ce}),Ue&2&&typeof Ce!="string")for(var Xe in Ce)R.d(je,Xe,(function(Ye){return Ce[Ye]}).bind(null,Xe));return je},R.n=function(Ce){var Ue=Ce&&Ce.__esModule?function(){return Ce.default}:function(){return Ce};return R.d(Ue,"a",Ue),Ue},R.o=function(Ce,Ue){return Object.prototype.hasOwnProperty.call(Ce,Ue)},R.p="",R(R.s=2)}([function(x,C,R){var Ce=this&&this.__extends||function(){var St=function(Ut,kt){return St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ft,Nt){Ft.__proto__=Nt}||function(Ft,Nt){for(var Gt in Nt)Nt.hasOwnProperty(Gt)&&(Ft[Gt]=Nt[Gt])},St(Ut,kt)};return function(Ut,kt){St(Ut,kt);function Ft(){this.constructor=Ut}Ut.prototype=kt===null?Object.create(kt):(Ft.prototype=kt.prototype,new Ft)}}();Object.defineProperty(C,"__esModule",{value:!0});var Ue=256,je=function(){function St(Ut){Ut===void 0&&(Ut="="),this._paddingCharacter=Ut}return St.prototype.encodedLength=function(Ut){return this._paddingCharacter?(Ut+2)/3*4|0:(Ut*8+5)/6|0},St.prototype.encode=function(Ut){for(var kt="",Ft=0;Ft<Ut.length-2;Ft+=3){var Nt=Ut[Ft]<<16|Ut[Ft+1]<<8|Ut[Ft+2];kt+=this._encodeByte(Nt>>>3*6&63),kt+=this._encodeByte(Nt>>>2*6&63),kt+=this._encodeByte(Nt>>>1*6&63),kt+=this._encodeByte(Nt>>>0*6&63)}var Gt=Ut.length-Ft;if(Gt>0){var Nt=Ut[Ft]<<16|(Gt===2?Ut[Ft+1]<<8:0);kt+=this._encodeByte(Nt>>>3*6&63),kt+=this._encodeByte(Nt>>>2*6&63),Gt===2?kt+=this._encodeByte(Nt>>>1*6&63):kt+=this._paddingCharacter||"",kt+=this._paddingCharacter||""}return kt},St.prototype.maxDecodedLength=function(Ut){return this._paddingCharacter?Ut/4*3|0:(Ut*6+7)/8|0},St.prototype.decodedLength=function(Ut){return this.maxDecodedLength(Ut.length-this._getPaddingLength(Ut))},St.prototype.decode=function(Ut){if(Ut.length===0)return new Uint8Array(0);for(var kt=this._getPaddingLength(Ut),Ft=Ut.length-kt,Nt=new Uint8Array(this.maxDecodedLength(Ft)),Gt=0,Zt=0,ri=0,li=0,hi=0,xi=0,$i=0;Zt<Ft-4;Zt+=4)li=this._decodeChar(Ut.charCodeAt(Zt+0)),hi=this._decodeChar(Ut.charCodeAt(Zt+1)),xi=this._decodeChar(Ut.charCodeAt(Zt+2)),$i=this._decodeChar(Ut.charCodeAt(Zt+3)),Nt[Gt++]=li<<2|hi>>>4,Nt[Gt++]=hi<<4|xi>>>2,Nt[Gt++]=xi<<6|$i,ri|=li&Ue,ri|=hi&Ue,ri|=xi&Ue,ri|=$i&Ue;if(Zt<Ft-1&&(li=this._decodeChar(Ut.charCodeAt(Zt)),hi=this._decodeChar(Ut.charCodeAt(Zt+1)),Nt[Gt++]=li<<2|hi>>>4,ri|=li&Ue,ri|=hi&Ue),Zt<Ft-2&&(xi=this._decodeChar(Ut.charCodeAt(Zt+2)),Nt[Gt++]=hi<<4|xi>>>2,ri|=xi&Ue),Zt<Ft-3&&($i=this._decodeChar(Ut.charCodeAt(Zt+3)),Nt[Gt++]=xi<<6|$i,ri|=$i&Ue),ri!==0)throw new Error("Base64Coder: incorrect characters for decoding");return Nt},St.prototype._encodeByte=function(Ut){var kt=Ut;return kt+=65,kt+=25-Ut>>>8&6,kt+=51-Ut>>>8&-75,kt+=61-Ut>>>8&-15,kt+=62-Ut>>>8&3,String.fromCharCode(kt)},St.prototype._decodeChar=function(Ut){var kt=Ue;return kt+=(42-Ut&Ut-44)>>>8&-Ue+Ut-43+62,kt+=(46-Ut&Ut-48)>>>8&-Ue+Ut-47+63,kt+=(47-Ut&Ut-58)>>>8&-Ue+Ut-48+52,kt+=(64-Ut&Ut-91)>>>8&-Ue+Ut-65+0,kt+=(96-Ut&Ut-123)>>>8&-Ue+Ut-97+26,kt},St.prototype._getPaddingLength=function(Ut){var kt=0;if(this._paddingCharacter){for(var Ft=Ut.length-1;Ft>=0&&Ut[Ft]===this._paddingCharacter;Ft--)kt++;if(Ut.length<4||kt>2)throw new Error("Base64Coder: incorrect padding")}return kt},St}();C.Coder=je;var Xe=new je;function Ye(St){return Xe.encode(St)}C.encode=Ye;function et(St){return Xe.decode(St)}C.decode=et;var ht=function(St){Ce(Ut,St);function Ut(){return St!==null&&St.apply(this,arguments)||this}return Ut.prototype._encodeByte=function(kt){var Ft=kt;return Ft+=65,Ft+=25-kt>>>8&6,Ft+=51-kt>>>8&-75,Ft+=61-kt>>>8&-13,Ft+=62-kt>>>8&49,String.fromCharCode(Ft)},Ut.prototype._decodeChar=function(kt){var Ft=Ue;return Ft+=(44-kt&kt-46)>>>8&-Ue+kt-45+62,Ft+=(94-kt&kt-96)>>>8&-Ue+kt-95+63,Ft+=(47-kt&kt-58)>>>8&-Ue+kt-48+52,Ft+=(64-kt&kt-91)>>>8&-Ue+kt-65+0,Ft+=(96-kt&kt-123)>>>8&-Ue+kt-97+26,Ft},Ut}(je);C.URLSafeCoder=ht;var Dt=new ht;function Ot(St){return Dt.encode(St)}C.encodeURLSafe=Ot;function Mt(St){return Dt.decode(St)}C.decodeURLSafe=Mt,C.encodedLength=function(St){return Xe.encodedLength(St)},C.maxDecodedLength=function(St){return Xe.maxDecodedLength(St)},C.decodedLength=function(St){return Xe.decodedLength(St)}},function(x,C,R){Object.defineProperty(C,"__esModule",{value:!0});var Ce="utf8: invalid string",Ue="utf8: invalid source encoding";function je(et){for(var ht=new Uint8Array(Xe(et)),Dt=0,Ot=0;Ot<et.length;Ot++){var Mt=et.charCodeAt(Ot);Mt<128?ht[Dt++]=Mt:Mt<2048?(ht[Dt++]=192|Mt>>6,ht[Dt++]=128|Mt&63):Mt<55296?(ht[Dt++]=224|Mt>>12,ht[Dt++]=128|Mt>>6&63,ht[Dt++]=128|Mt&63):(Ot++,Mt=(Mt&1023)<<10,Mt|=et.charCodeAt(Ot)&1023,Mt+=65536,ht[Dt++]=240|Mt>>18,ht[Dt++]=128|Mt>>12&63,ht[Dt++]=128|Mt>>6&63,ht[Dt++]=128|Mt&63)}return ht}C.encode=je;function Xe(et){for(var ht=0,Dt=0;Dt<et.length;Dt++){var Ot=et.charCodeAt(Dt);if(Ot<128)ht+=1;else if(Ot<2048)ht+=2;else if(Ot<55296)ht+=3;else if(Ot<=57343){if(Dt>=et.length-1)throw new Error(Ce);Dt++,ht+=4}else throw new Error(Ce)}return ht}C.encodedLength=Xe;function Ye(et){for(var ht=[],Dt=0;Dt<et.length;Dt++){var Ot=et[Dt];if(Ot&128){var Mt=void 0;if(Ot<224){if(Dt>=et.length)throw new Error(Ue);var St=et[++Dt];if((St&192)!==128)throw new Error(Ue);Ot=(Ot&31)<<6|St&63,Mt=128}else if(Ot<240){if(Dt>=et.length-1)throw new Error(Ue);var St=et[++Dt],Ut=et[++Dt];if((St&192)!==128||(Ut&192)!==128)throw new Error(Ue);Ot=(Ot&15)<<12|(St&63)<<6|Ut&63,Mt=2048}else if(Ot<248){if(Dt>=et.length-2)throw new Error(Ue);var St=et[++Dt],Ut=et[++Dt],kt=et[++Dt];if((St&192)!==128||(Ut&192)!==128||(kt&192)!==128)throw new Error(Ue);Ot=(Ot&15)<<18|(St&63)<<12|(Ut&63)<<6|kt&63,Mt=65536}else throw new Error(Ue);if(Ot<Mt||Ot>=55296&&Ot<=57343)throw new Error(Ue);if(Ot>=65536){if(Ot>1114111)throw new Error(Ue);Ot-=65536,ht.push(String.fromCharCode(55296|Ot>>10)),Ot=56320|Ot&1023}}ht.push(String.fromCharCode(Ot))}return ht.join("")}C.decode=Ye},function(x,C,R){x.exports=R(3).default},function(x,C,R){R.r(C);class Ce{constructor(Xt,ei){this.lastId=0,this.prefix=Xt,this.name=ei}create(Xt){this.lastId++;var ei=this.lastId,pi=this.prefix+ei,bi=this.name+"["+ei+"]",Ui=!1,ir=function(){Ui||(Xt.apply(null,arguments),Ui=!0)};return this[ei]=ir,{number:ei,id:pi,name:bi,callback:ir}}remove(Xt){delete this[Xt.number]}}var Ue=new Ce("_pusher_script_","Pusher.ScriptReceivers"),je={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},Xe=je;class Ye{constructor(Xt){this.options=Xt,this.receivers=Xt.receivers||Ue,this.loading={}}load(Xt,ei,pi){var bi=this;if(bi.loading[Xt]&&bi.loading[Xt].length>0)bi.loading[Xt].push(pi);else{bi.loading[Xt]=[pi];var Ui=Wi.createScriptRequest(bi.getPath(Xt,ei)),ir=bi.receivers.create(function(fr){if(bi.receivers.remove(ir),bi.loading[Xt]){var Tr=bi.loading[Xt];delete bi.loading[Xt];for(var Ir=function(Vr){Vr||Ui.cleanup()},Dr=0;Dr<Tr.length;Dr++)Tr[Dr](fr,Ir)}});Ui.send(ir)}}getRoot(Xt){var ei,pi=Wi.getDocument().location.protocol;return Xt&&Xt.useTLS||pi==="https:"?ei=this.options.cdn_https:ei=this.options.cdn_http,ei.replace(/\/*$/,"")+"/"+this.options.version}getPath(Xt,ei){return this.getRoot(ei)+"/"+Xt+this.options.suffix+".js"}}var et=new Ce("_pusher_dependencies","Pusher.DependenciesReceivers"),ht=new Ye({cdn_http:Xe.cdn_http,cdn_https:Xe.cdn_https,version:Xe.VERSION,suffix:Xe.dependency_suffix,receivers:et});const Dt={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var Mt={buildLogSuffix:function(ni){const Xt="See:",ei=Dt.urls[ni];if(!ei)return"";let pi;return ei.fullUrl?pi=ei.fullUrl:ei.path&&(pi=Dt.baseUrl+ei.path),pi?`${Xt} ${pi}`:""}},St;(function(ni){ni.UserAuthentication="user-authentication",ni.ChannelAuthorization="channel-authorization"})(St||(St={}));class Ut extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class kt extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class Ft extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class Nt extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class Gt extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class Zt extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class ri extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class li extends Error{constructor(Xt){super(Xt),Object.setPrototypeOf(this,new.target.prototype)}}class hi extends Error{constructor(Xt,ei){super(ei),this.status=Xt,Object.setPrototypeOf(this,new.target.prototype)}}var $i=function(ni,Xt,ei,pi,bi){const Ui=Wi.createXHR();Ui.open("POST",ei.endpoint,!0),Ui.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var ir in ei.headers)Ui.setRequestHeader(ir,ei.headers[ir]);if(ei.headersProvider!=null){let fr=ei.headersProvider();for(var ir in fr)Ui.setRequestHeader(ir,fr[ir])}return Ui.onreadystatechange=function(){if(Ui.readyState===4)if(Ui.status===200){let fr,Tr=!1;try{fr=JSON.parse(Ui.responseText),Tr=!0}catch{bi(new hi(200,`JSON returned from ${pi.toString()} endpoint was invalid, yet status code was 200. Data was: ${Ui.responseText}`),null)}Tr&&bi(null,fr)}else{let fr="";switch(pi){case St.UserAuthentication:fr=Mt.buildLogSuffix("authenticationEndpoint");break;case St.ChannelAuthorization:fr=`Clients must be authorized to join private or presence channels. ${Mt.buildLogSuffix("authorizationEndpoint")}`;break}bi(new hi(Ui.status,`Unable to retrieve auth string from ${pi.toString()} endpoint - received status: ${Ui.status} from ${ei.endpoint}. ${fr}`),null)}},Ui.send(Xt),Ui};function Mi(ni){return vi(Ri(ni))}var Di=String.fromCharCode,ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ji=function(ni){var Xt=ni.charCodeAt(0);return Xt<128?ni:Xt<2048?Di(192|Xt>>>6)+Di(128|Xt&63):Di(224|Xt>>>12&15)+Di(128|Xt>>>6&63)+Di(128|Xt&63)},Ri=function(ni){return ni.replace(/[^\x00-\x7F]/g,ji)},ui=function(ni){var Xt=[0,2,1][ni.length%3],ei=ni.charCodeAt(0)<<16|(ni.length>1?ni.charCodeAt(1):0)<<8|(ni.length>2?ni.charCodeAt(2):0),pi=[ki.charAt(ei>>>18),ki.charAt(ei>>>12&63),Xt>=2?"=":ki.charAt(ei>>>6&63),Xt>=1?"=":ki.charAt(ei&63)];return pi.join("")},vi=window.btoa||function(ni){return ni.replace(/[\s\S]{1,3}/g,ui)};class si{constructor(Xt,ei,pi,bi){this.clear=ei,this.timer=Xt(()=>{this.timer&&(this.timer=bi(this.timer))},pi)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var ai=si;function Ci(ni){window.clearTimeout(ni)}function Ei(ni){window.clearInterval(ni)}class zi extends ai{constructor(Xt,ei){super(setTimeout,Ci,Xt,function(pi){return ei(),null})}}class or extends ai{constructor(Xt,ei){super(setInterval,Ei,Xt,function(pi){return ei(),pi})}}var hr={now(){return Date.now?Date.now():new Date().valueOf()},defer(ni){return new zi(0,ni)},method(ni,...Xt){var ei=Array.prototype.slice.call(arguments,1);return function(pi){return pi[ni].apply(pi,ei.concat(arguments))}}},mr=hr;function cr(ni,...Xt){for(var ei=0;ei<Xt.length;ei++){var pi=Xt[ei];for(var bi in pi)pi[bi]&&pi[bi].constructor&&pi[bi].constructor===Object?ni[bi]=cr(ni[bi]||{},pi[bi]):ni[bi]=pi[bi]}return ni}function Li(){for(var ni=["Pusher"],Xt=0;Xt<arguments.length;Xt++)typeof arguments[Xt]=="string"?ni.push(arguments[Xt]):ni.push(lr(arguments[Xt]));return ni.join(" : ")}function Ji(ni,Xt){var ei=Array.prototype.indexOf;if(ni===null)return-1;if(ei&&ni.indexOf===ei)return ni.indexOf(Xt);for(var pi=0,bi=ni.length;pi<bi;pi++)if(ni[pi]===Xt)return pi;return-1}function Xi(ni,Xt){for(var ei in ni)Object.prototype.hasOwnProperty.call(ni,ei)&&Xt(ni[ei],ei,ni)}function nr(ni){var Xt=[];return Xi(ni,function(ei,pi){Xt.push(pi)}),Xt}function yr(ni){var Xt=[];return Xi(ni,function(ei){Xt.push(ei)}),Xt}function _r(ni,Xt,ei){for(var pi=0;pi<ni.length;pi++)Xt.call(ei||window,ni[pi],pi,ni)}function gi(ni,Xt){for(var ei=[],pi=0;pi<ni.length;pi++)ei.push(Xt(ni[pi],pi,ni,ei));return ei}function mi(ni,Xt){var ei={};return Xi(ni,function(pi,bi){ei[bi]=Xt(pi)}),ei}function Ai(ni,Xt){Xt=Xt||function(bi){return!!bi};for(var ei=[],pi=0;pi<ni.length;pi++)Xt(ni[pi],pi,ni,ei)&&ei.push(ni[pi]);return ei}function Hi(ni,Xt){var ei={};return Xi(ni,function(pi,bi){(Xt&&Xt(pi,bi,ni,ei)||pi)&&(ei[bi]=pi)}),ei}function Ni(ni){var Xt=[];return Xi(ni,function(ei,pi){Xt.push([pi,ei])}),Xt}function Fi(ni,Xt){for(var ei=0;ei<ni.length;ei++)if(Xt(ni[ei],ei,ni))return!0;return!1}function Zi(ni,Xt){for(var ei=0;ei<ni.length;ei++)if(!Xt(ni[ei],ei,ni))return!1;return!0}function Bi(ni){return mi(ni,function(Xt){return typeof Xt=="object"&&(Xt=lr(Xt)),encodeURIComponent(Mi(Xt.toString()))})}function Ki(ni){var Xt=Hi(ni,function(pi){return pi!==void 0}),ei=gi(Ni(Bi(Xt)),mr.method("join","=")).join("&");return ei}function Gi(ni){var Xt=[],ei=[];return function pi(bi,Ui){var ir,fr,Tr;switch(typeof bi){case"object":if(!bi)return null;for(ir=0;ir<Xt.length;ir+=1)if(Xt[ir]===bi)return{$ref:ei[ir]};if(Xt.push(bi),ei.push(Ui),Object.prototype.toString.apply(bi)==="[object Array]")for(Tr=[],ir=0;ir<bi.length;ir+=1)Tr[ir]=pi(bi[ir],Ui+"["+ir+"]");else{Tr={};for(fr in bi)Object.prototype.hasOwnProperty.call(bi,fr)&&(Tr[fr]=pi(bi[fr],Ui+"["+JSON.stringify(fr)+"]"))}return Tr;case"number":case"string":case"boolean":return bi}}(ni,"$")}function lr(ni){try{return JSON.stringify(ni)}catch{return JSON.stringify(Gi(ni))}}class er{constructor(){this.globalLog=Xt=>{window.console&&window.console.log&&window.console.log(Xt)}}debug(...Xt){this.log(this.globalLog,Xt)}warn(...Xt){this.log(this.globalLogWarn,Xt)}error(...Xt){this.log(this.globalLogError,Xt)}globalLogWarn(Xt){window.console&&window.console.warn?window.console.warn(Xt):this.globalLog(Xt)}globalLogError(Xt){window.console&&window.console.error?window.console.error(Xt):this.globalLogWarn(Xt)}log(Xt,...ei){var pi=Li.apply(this,arguments);Rn.log?Rn.log(pi):Rn.logToConsole&&Xt.bind(this)(pi)}}var Qi=new er,ur=function(ni,Xt,ei,pi,bi){(ei.headers!==void 0||ei.headersProvider!=null)&&Qi.warn(`To send headers with the ${pi.toString()} request, you must use AJAX, rather than JSONP.`);var Ui=ni.nextAuthCallbackID.toString();ni.nextAuthCallbackID++;var ir=ni.getDocument(),fr=ir.createElement("script");ni.auth_callbacks[Ui]=function(Dr){bi(null,Dr)};var Tr="Pusher.auth_callbacks['"+Ui+"']";fr.src=ei.endpoint+"?callback="+encodeURIComponent(Tr)+"&"+Xt;var Ir=ir.getElementsByTagName("head")[0]||ir.documentElement;Ir.insertBefore(fr,Ir.firstChild)},br=ur;class Cr{constructor(Xt){this.src=Xt}send(Xt){var ei=this,pi="Error loading "+ei.src;ei.script=document.createElement("script"),ei.script.id=Xt.id,ei.script.src=ei.src,ei.script.type="text/javascript",ei.script.charset="UTF-8",ei.script.addEventListener?(ei.script.onerror=function(){Xt.callback(pi)},ei.script.onload=function(){Xt.callback(null)}):ei.script.onreadystatechange=function(){(ei.script.readyState==="loaded"||ei.script.readyState==="complete")&&Xt.callback(null)},ei.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(ei.errorScript=document.createElement("script"),ei.errorScript.id=Xt.id+"_error",ei.errorScript.text=Xt.name+"('"+pi+"');",ei.script.async=ei.errorScript.async=!1):ei.script.async=!0;var bi=document.getElementsByTagName("head")[0];bi.insertBefore(ei.script,bi.firstChild),ei.errorScript&&bi.insertBefore(ei.errorScript,ei.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class wr{constructor(Xt,ei){this.url=Xt,this.data=ei}send(Xt){if(!this.request){var ei=Ki(this.data),pi=this.url+"/"+Xt.number+"?"+ei;this.request=Wi.createScriptRequest(pi),this.request.send(Xt)}}cleanup(){this.request&&this.request.cleanup()}}var Nr=function(ni,Xt){return function(ei,pi){var bi="http"+(Xt?"s":"")+"://",Ui=bi+(ni.host||ni.options.host)+ni.options.path,ir=Wi.createJSONPRequest(Ui,ei),fr=Wi.ScriptReceivers.create(function(Tr,Ir){Ue.remove(fr),ir.cleanup(),Ir&&Ir.host&&(ni.host=Ir.host),pi&&pi(Tr,Ir)});ir.send(fr)}},$r={name:"jsonp",getAgent:Nr},xr=$r;function Ur(ni,Xt,ei){var pi=ni+(Xt.useTLS?"s":""),bi=Xt.useTLS?Xt.hostTLS:Xt.hostNonTLS;return pi+"://"+bi+ei}function Kr(ni,Xt){var ei="/app/"+ni,pi="?protocol="+Xe.PROTOCOL+"&client=js&version="+Xe.VERSION+(Xt?"&"+Xt:"");return ei+pi}var zn={getInitial:function(ni,Xt){var ei=(Xt.httpPath||"")+Kr(ni,"flash=false");return Ur("ws",Xt,ei)}},Gr={getInitial:function(ni,Xt){var ei=(Xt.httpPath||"/pusher")+Kr(ni);return Ur("http",Xt,ei)}},Qr={getInitial:function(ni,Xt){return Ur("http",Xt,Xt.httpPath||"/pusher")},getPath:function(ni,Xt){return Kr(ni)}};class Ln{constructor(){this._callbacks={}}get(Xt){return this._callbacks[ns(Xt)]}add(Xt,ei,pi){var bi=ns(Xt);this._callbacks[bi]=this._callbacks[bi]||[],this._callbacks[bi].push({fn:ei,context:pi})}remove(Xt,ei,pi){if(!Xt&&!ei&&!pi){this._callbacks={};return}var bi=Xt?[ns(Xt)]:nr(this._callbacks);ei||pi?this.removeCallback(bi,ei,pi):this.removeAllCallbacks(bi)}removeCallback(Xt,ei,pi){_r(Xt,function(bi){this._callbacks[bi]=Ai(this._callbacks[bi]||[],function(Ui){return ei&&ei!==Ui.fn||pi&&pi!==Ui.context}),this._callbacks[bi].length===0&&delete this._callbacks[bi]},this)}removeAllCallbacks(Xt){_r(Xt,function(ei){delete this._callbacks[ei]},this)}}function ns(ni){return"_"+ni}class Xr{constructor(Xt){this.callbacks=new Ln,this.global_callbacks=[],this.failThrough=Xt}bind(Xt,ei,pi){return this.callbacks.add(Xt,ei,pi),this}bind_global(Xt){return this.global_callbacks.push(Xt),this}unbind(Xt,ei,pi){return this.callbacks.remove(Xt,ei,pi),this}unbind_global(Xt){return Xt?(this.global_callbacks=Ai(this.global_callbacks||[],ei=>ei!==Xt),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(Xt,ei,pi){for(var bi=0;bi<this.global_callbacks.length;bi++)this.global_callbacks[bi](Xt,ei);var Ui=this.callbacks.get(Xt),ir=[];if(pi?ir.push(ei,pi):ei&&ir.push(ei),Ui&&Ui.length>0)for(var bi=0;bi<Ui.length;bi++)Ui[bi].fn.apply(Ui[bi].context||window,ir);else this.failThrough&&this.failThrough(Xt,ei);return this}}class ss extends Xr{constructor(Xt,ei,pi,bi,Ui){super(),this.initialize=Wi.transportConnectionInitializer,this.hooks=Xt,this.name=ei,this.priority=pi,this.key=bi,this.options=Ui,this.state="new",this.timeline=Ui.timeline,this.activityTimeout=Ui.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var Xt=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(Xt,this.options)}catch(ei){return mr.defer(()=>{this.onError(ei),this.changeState("closed")}),!1}return this.bindListeners(),Qi.debug("Connecting",{transport:this.name,url:Xt}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(Xt){return this.state==="open"?(mr.defer(()=>{this.socket&&this.socket.send(Xt)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(Xt){this.emit("error",{type:"WebSocketError",error:Xt}),this.timeline.error(this.buildTimelineMessage({error:Xt.toString()}))}onClose(Xt){Xt?this.changeState("closed",{code:Xt.code,reason:Xt.reason,wasClean:Xt.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(Xt){this.emit("message",Xt)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=Xt=>{this.onError(Xt)},this.socket.onclose=Xt=>{this.onClose(Xt)},this.socket.onmessage=Xt=>{this.onMessage(Xt)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(Xt,ei){this.state=Xt,this.timeline.info(this.buildTimelineMessage({state:Xt,params:ei})),this.emit(Xt,ei)}buildTimelineMessage(Xt){return cr({cid:this.id},Xt)}}class cn{constructor(Xt){this.hooks=Xt}isSupported(Xt){return this.hooks.isSupported(Xt)}createConnection(Xt,ei,pi,bi){return new ss(this.hooks,Xt,ei,pi,bi)}}var As=new cn({urls:zn,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!Wi.getWebSocketAPI()},isSupported:function(){return!!Wi.getWebSocketAPI()},getSocket:function(ni){return Wi.createWebSocket(ni)}}),as={urls:Gr,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Ps=cr({getSocket:function(ni){return Wi.HTTPFactory.createStreamingSocket(ni)}},as),$n=cr({getSocket:function(ni){return Wi.HTTPFactory.createPollingSocket(ni)}},as),os={isSupported:function(){return Wi.isXHRSupported()}},Bs=new cn(cr({},Ps,os)),ls=new cn(cr({},$n,os)),Us={ws:As,xhr_streaming:Bs,xhr_polling:ls},Wn=Us,Kn=new cn({file:"sockjs",urls:Qr,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(ni,Xt){return new window.SockJS(ni,null,{js_path:ht.getPath("sockjs",{useTLS:Xt.useTLS}),ignore_null_origin:Xt.ignoreNullOrigin})},beforeOpen:function(ni,Xt){ni.send(JSON.stringify({path:Xt}))}}),Jr={isSupported:function(ni){var Xt=Wi.isXDRSupported(ni.useTLS);return Xt}},Xn=new cn(cr({},Ps,Jr)),Wr=new cn(cr({},$n,Jr));Wn.xdr_streaming=Xn,Wn.xdr_polling=Wr,Wn.sockjs=Kn;var Vs=Wn;class us extends Xr{constructor(){super();var Xt=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){Xt.emit("online")},!1),window.addEventListener("offline",function(){Xt.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var mn=new us;class nn{constructor(Xt,ei,pi){this.manager=Xt,this.transport=ei,this.minPingDelay=pi.minPingDelay,this.maxPingDelay=pi.maxPingDelay,this.pingDelay=void 0}createConnection(Xt,ei,pi,bi){bi=cr({},bi,{activityTimeout:this.pingDelay});var Ui=this.transport.createConnection(Xt,ei,pi,bi),ir=null,fr=function(){Ui.unbind("open",fr),Ui.bind("closed",Tr),ir=mr.now()},Tr=Ir=>{if(Ui.unbind("closed",Tr),Ir.code===1002||Ir.code===1003)this.manager.reportDeath();else if(!Ir.wasClean&&ir){var Dr=mr.now()-ir;Dr<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Dr/2,this.minPingDelay))}};return Ui.bind("open",fr),Ui}isSupported(Xt){return this.manager.isAlive()&&this.transport.isSupported(Xt)}}const Sn={decodeMessage:function(ni){try{var Xt=JSON.parse(ni.data),ei=Xt.data;if(typeof ei=="string")try{ei=JSON.parse(Xt.data)}catch{}var pi={event:Xt.event,channel:Xt.channel,data:ei};return Xt.user_id&&(pi.user_id=Xt.user_id),pi}catch(bi){throw{type:"MessageParseError",error:bi,data:ni.data}}},encodeMessage:function(ni){return JSON.stringify(ni)},processHandshake:function(ni){var Xt=Sn.decodeMessage(ni);if(Xt.event==="pusher:connection_established"){if(!Xt.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:Xt.data.socket_id,activityTimeout:Xt.data.activity_timeout*1e3}}else{if(Xt.event==="pusher:error")return{action:this.getCloseAction(Xt.data),error:this.getCloseError(Xt.data)};throw"Invalid handshake"}},getCloseAction:function(ni){return ni.code<4e3?ni.code>=1002&&ni.code<=1004?"backoff":null:ni.code===4e3?"tls_only":ni.code<4100?"refused":ni.code<4200?"backoff":ni.code<4300?"retry":"refused"},getCloseError:function(ni){return ni.code!==1e3&&ni.code!==1001?{type:"PusherError",data:{code:ni.code,message:ni.reason||ni.message}}:null}};var Ar=Sn;class js extends Xr{constructor(Xt,ei){super(),this.id=Xt,this.transport=ei,this.activityTimeout=ei.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(Xt){return this.transport.send(Xt)}send_event(Xt,ei,pi){var bi={event:Xt,data:ei};return pi&&(bi.channel=pi),Qi.debug("Event sent",bi),this.send(Ar.encodeMessage(bi))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var Xt={message:pi=>{var bi;try{bi=Ar.decodeMessage(pi)}catch(Ui){this.emit("error",{type:"MessageParseError",error:Ui,data:pi.data})}if(bi!==void 0){switch(Qi.debug("Event recd",bi),bi.event){case"pusher:error":this.emit("error",{type:"PusherError",data:bi.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",bi)}},activity:()=>{this.emit("activity")},error:pi=>{this.emit("error",pi)},closed:pi=>{ei(),pi&&pi.code&&this.handleCloseEvent(pi),this.transport=null,this.emit("closed")}},ei=()=>{Xi(Xt,(pi,bi)=>{this.transport.unbind(bi,pi)})};Xi(Xt,(pi,bi)=>{this.transport.bind(bi,pi)})}handleCloseEvent(Xt){var ei=Ar.getCloseAction(Xt),pi=Ar.getCloseError(Xt);pi&&this.emit("error",pi),ei&&this.emit(ei,{action:ei,error:pi})}}class Yn{constructor(Xt,ei){this.transport=Xt,this.callback=ei,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=Xt=>{this.unbindListeners();var ei;try{ei=Ar.processHandshake(Xt)}catch(pi){this.finish("error",{error:pi}),this.transport.close();return}ei.action==="connected"?this.finish("connected",{connection:new js(ei.id,this.transport),activityTimeout:ei.activityTimeout}):(this.finish(ei.action,{error:ei.error}),this.transport.close())},this.onClosed=Xt=>{this.unbindListeners();var ei=Ar.getCloseAction(Xt)||"backoff",pi=Ar.getCloseError(Xt);this.finish(ei,{error:pi})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(Xt,ei){this.callback(cr({transport:this.transport,action:Xt},ei))}}class Bn{constructor(Xt,ei){this.timeline=Xt,this.options=ei||{}}send(Xt,ei){this.timeline.isEmpty()||this.timeline.send(Wi.TimelineTransport.getAgent(this,Xt),ei)}}class cs extends Xr{constructor(Xt,ei){super(function(pi,bi){Qi.debug("No callbacks on "+Xt+" for "+pi)}),this.name=Xt,this.pusher=ei,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(Xt,ei){return ei(null,{auth:""})}trigger(Xt,ei){if(Xt.indexOf("client-")!==0)throw new Ut("Event '"+Xt+"' does not start with 'client-'");if(!this.subscribed){var pi=Mt.buildLogSuffix("triggeringClientEvents");Qi.warn(`Client event triggered before channel 'subscription_succeeded' event . ${pi}`)}return this.pusher.send_event(Xt,ei,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(Xt){var ei=Xt.event,pi=Xt.data;if(ei==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(Xt);else if(ei==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(Xt);else if(ei.indexOf("pusher_internal:")!==0){var bi={};this.emit(ei,pi,bi)}}handleSubscriptionSucceededEvent(Xt){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",Xt.data)}handleSubscriptionCountEvent(Xt){Xt.data.subscription_count&&(this.subscriptionCount=Xt.data.subscription_count),this.emit("pusher:subscription_count",Xt.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(Xt,ei)=>{Xt?(this.subscriptionPending=!1,Qi.error(Xt.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:Xt.message},Xt instanceof hi?{status:Xt.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:ei.auth,channel_data:ei.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class gn extends cs{authorize(Xt,ei){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:Xt},ei)}}class Mr{constructor(){this.reset()}get(Xt){return Object.prototype.hasOwnProperty.call(this.members,Xt)?{id:Xt,info:this.members[Xt]}:null}each(Xt){Xi(this.members,(ei,pi)=>{Xt(this.get(pi))})}setMyID(Xt){this.myID=Xt}onSubscription(Xt){this.members=Xt.presence.hash,this.count=Xt.presence.count,this.me=this.get(this.myID)}addMember(Xt){return this.get(Xt.user_id)===null&&this.count++,this.members[Xt.user_id]=Xt.user_info,this.get(Xt.user_id)}removeMember(Xt){var ei=this.get(Xt.user_id);return ei&&(delete this.members[Xt.user_id],this.count--),ei}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var hs=function(ni,Xt,ei,pi){function bi(Ui){return Ui instanceof ei?Ui:new ei(function(ir){ir(Ui)})}return new(ei||(ei=Promise))(function(Ui,ir){function fr(Dr){try{Ir(pi.next(Dr))}catch(Vr){ir(Vr)}}function Tr(Dr){try{Ir(pi.throw(Dr))}catch(Vr){ir(Vr)}}function Ir(Dr){Dr.done?Ui(Dr.value):bi(Dr.value).then(fr,Tr)}Ir((pi=pi.apply(ni,Xt||[])).next())})};class Qn extends gn{constructor(Xt,ei){super(Xt,ei),this.members=new Mr}authorize(Xt,ei){super.authorize(Xt,(pi,bi)=>hs(this,void 0,void 0,function*(){if(!pi)if(bi=bi,bi.channel_data!=null){var Ui=JSON.parse(bi.channel_data);this.members.setMyID(Ui.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let ir=Mt.buildLogSuffix("authorizationEndpoint");Qi.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${ir}, or the user should be signed in.`),ei("Invalid auth response");return}ei(pi,bi)}))}handleEvent(Xt){var ei=Xt.event;if(ei.indexOf("pusher_internal:")===0)this.handleInternalEvent(Xt);else{var pi=Xt.data,bi={};Xt.user_id&&(bi.user_id=Xt.user_id),this.emit(ei,pi,bi)}}handleInternalEvent(Xt){var ei=Xt.event,pi=Xt.data;switch(ei){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(Xt);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(Xt);break;case"pusher_internal:member_added":var bi=this.members.addMember(pi);this.emit("pusher:member_added",bi);break;case"pusher_internal:member_removed":var Ui=this.members.removeMember(pi);Ui&&this.emit("pusher:member_removed",Ui);break}}handleSubscriptionSucceededEvent(Xt){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(Xt.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Hs=R(1),Jn=R(0);class qs extends gn{constructor(Xt,ei,pi){super(Xt,ei),this.key=null,this.nacl=pi}authorize(Xt,ei){super.authorize(Xt,(pi,bi)=>{if(pi){ei(pi,bi);return}let Ui=bi.shared_secret;if(!Ui){ei(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Jn.decode)(Ui),delete bi.shared_secret,ei(null,bi)})}trigger(Xt,ei){throw new Zt("Client events are not currently supported for encrypted channels")}handleEvent(Xt){var ei=Xt.event,pi=Xt.data;if(ei.indexOf("pusher_internal:")===0||ei.indexOf("pusher:")===0){super.handleEvent(Xt);return}this.handleEncryptedEvent(ei,pi)}handleEncryptedEvent(Xt,ei){if(!this.key){Qi.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!ei.ciphertext||!ei.nonce){Qi.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+ei);return}let pi=Object(Jn.decode)(ei.ciphertext);if(pi.length<this.nacl.secretbox.overheadLength){Qi.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${pi.length}`);return}let bi=Object(Jn.decode)(ei.nonce);if(bi.length<this.nacl.secretbox.nonceLength){Qi.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${bi.length}`);return}let Ui=this.nacl.secretbox.open(pi,bi,this.key);if(Ui===null){Qi.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(ir,fr)=>{if(ir){Qi.error(`Failed to make a request to the authEndpoint: ${fr}. Unable to fetch new key, so dropping encrypted event`);return}if(Ui=this.nacl.secretbox.open(pi,bi,this.key),Ui===null){Qi.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(Xt,this.getDataToEmit(Ui))});return}this.emit(Xt,this.getDataToEmit(Ui))}getDataToEmit(Xt){let ei=Object(Hs.decode)(Xt);try{return JSON.parse(ei)}catch{return ei}}}class Is extends Xr{constructor(Xt,ei){super(),this.state="initialized",this.connection=null,this.key=Xt,this.options=ei,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var pi=Wi.getNetwork();pi.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),pi.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}switchCluster(Xt){this.key=Xt,this.updateStrategy(),this.retryIn(0)}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(Xt){return this.connection?this.connection.send(Xt):!1}send_event(Xt,ei,pi){return this.connection?this.connection.send_event(Xt,ei,pi):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var Xt=(ei,pi)=>{ei?this.runner=this.strategy.connect(0,Xt):pi.action==="error"?(this.emit("error",{type:"HandshakeError",error:pi.error}),this.timeline.error({handshakeError:pi.error})):(this.abortConnecting(),this.handshakeCallbacks[pi.action](pi))};this.runner=this.strategy.connect(0,Xt)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var Xt=this.abandonConnection();Xt.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(Xt){this.timeline.info({action:"retry",delay:Xt}),Xt>0&&this.emit("connecting_in",Math.round(Xt/1e3)),this.retryTimer=new zi(Xt||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new zi(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new zi(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new zi(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(Xt){return cr({},Xt,{message:ei=>{this.resetActivityCheck(),this.emit("message",ei)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:ei=>{this.emit("error",ei)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(Xt){return cr({},Xt,{connected:ei=>{this.activityTimeout=Math.min(this.options.activityTimeout,ei.activityTimeout,ei.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(ei.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let Xt=ei=>pi=>{pi.error&&this.emit("error",{type:"WebSocketError",error:pi.error}),ei(pi)};return{tls_only:Xt(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:Xt(()=>{this.disconnect()}),backoff:Xt(()=>{this.retryIn(1e3)}),retry:Xt(()=>{this.retryIn(0)})}}setConnection(Xt){this.connection=Xt;for(var ei in this.connectionCallbacks)this.connection.bind(ei,this.connectionCallbacks[ei]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var Xt in this.connectionCallbacks)this.connection.unbind(Xt,this.connectionCallbacks[Xt]);var ei=this.connection;return this.connection=null,ei}}updateState(Xt,ei){var pi=this.state;if(this.state=Xt,pi!==Xt){var bi=Xt;bi==="connected"&&(bi+=" with new socket ID "+ei.socket_id),Qi.debug("State changed",pi+" -> "+bi),this.timeline.info({state:Xt,params:ei}),this.emit("state_change",{previous:pi,current:Xt}),this.emit(Xt,ei)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class ds{constructor(){this.channels={}}add(Xt,ei){return this.channels[Xt]||(this.channels[Xt]=fs(Xt,ei)),this.channels[Xt]}all(){return yr(this.channels)}find(Xt){return this.channels[Xt]}remove(Xt){var ei=this.channels[Xt];return delete this.channels[Xt],ei}disconnect(){Xi(this.channels,function(Xt){Xt.disconnect()})}}function fs(ni,Xt){if(ni.indexOf("private-encrypted-")===0){if(Xt.config.nacl)return yn.createEncryptedChannel(ni,Xt,Xt.config.nacl);let ei="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",pi=Mt.buildLogSuffix("encryptedChannelSupport");throw new Zt(`${ei}. ${pi}`)}else{if(ni.indexOf("private-")===0)return yn.createPrivateChannel(ni,Xt);if(ni.indexOf("presence-")===0)return yn.createPresenceChannel(ni,Xt);if(ni.indexOf("#")===0)throw new kt('Cannot create a channel with name "'+ni+'".');return yn.createChannel(ni,Xt)}}var ps={createChannels(){return new ds},createConnectionManager(ni,Xt){return new Is(ni,Xt)},createChannel(ni,Xt){return new cs(ni,Xt)},createPrivateChannel(ni,Xt){return new gn(ni,Xt)},createPresenceChannel(ni,Xt){return new Qn(ni,Xt)},createEncryptedChannel(ni,Xt,ei){return new qs(ni,Xt,ei)},createTimelineSender(ni,Xt){return new Bn(ni,Xt)},createHandshake(ni,Xt){return new Yn(ni,Xt)},createAssistantToTheTransportManager(ni,Xt,ei){return new nn(ni,Xt,ei)}},yn=ps;class ms{constructor(Xt){this.options=Xt||{},this.livesLeft=this.options.lives||1/0}getAssistant(Xt){return yn.createAssistantToTheTransportManager(this,Xt,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Zr{constructor(Xt,ei){this.strategies=Xt,this.loop=!!ei.loop,this.failFast=!!ei.failFast,this.timeout=ei.timeout,this.timeoutLimit=ei.timeoutLimit}isSupported(){return Fi(this.strategies,mr.method("isSupported"))}connect(Xt,ei){var pi=this.strategies,bi=0,Ui=this.timeout,ir=null,fr=(Tr,Ir)=>{Ir?ei(null,Ir):(bi=bi+1,this.loop&&(bi=bi%pi.length),bi<pi.length?(Ui&&(Ui=Ui*2,this.timeoutLimit&&(Ui=Math.min(Ui,this.timeoutLimit))),ir=this.tryStrategy(pi[bi],Xt,{timeout:Ui,failFast:this.failFast},fr)):ei(!0))};return ir=this.tryStrategy(pi[bi],Xt,{timeout:Ui,failFast:this.failFast},fr),{abort:function(){ir.abort()},forceMinPriority:function(Tr){Xt=Tr,ir&&ir.forceMinPriority(Tr)}}}tryStrategy(Xt,ei,pi,bi){var Ui=null,ir=null;return pi.timeout>0&&(Ui=new zi(pi.timeout,function(){ir.abort(),bi(!0)})),ir=Xt.connect(ei,function(fr,Tr){fr&&Ui&&Ui.isRunning()&&!pi.failFast||(Ui&&Ui.ensureAborted(),bi(fr,Tr))}),{abort:function(){Ui&&Ui.ensureAborted(),ir.abort()},forceMinPriority:function(fr){ir.forceMinPriority(fr)}}}}class Pn{constructor(Xt){this.strategies=Xt}isSupported(){return Fi(this.strategies,mr.method("isSupported"))}connect(Xt,ei){return Zn(this.strategies,Xt,function(pi,bi){return function(Ui,ir){if(bi[pi].error=Ui,Ui){In(bi)&&ei(!0);return}_r(bi,function(fr){fr.forceMinPriority(ir.transport.priority)}),ei(null,ir)}})}}function Zn(ni,Xt,ei){var pi=gi(ni,function(bi,Ui,ir,fr){return bi.connect(Xt,ei(Ui,fr))});return{abort:function(){_r(pi,Un)},forceMinPriority:function(bi){_r(pi,function(Ui){Ui.forceMinPriority(bi)})}}}function In(ni){return Zi(ni,function(Xt){return!!Xt.error})}function Un(ni){!ni.error&&!ni.aborted&&(ni.abort(),ni.aborted=!0)}class Vn{constructor(Xt,ei,pi){this.strategy=Xt,this.transports=ei,this.ttl=pi.ttl||1800*1e3,this.usingTLS=pi.useTLS,this.timeline=pi.timeline}isSupported(){return this.strategy.isSupported()}connect(Xt,ei){var pi=this.usingTLS,bi=Ds(pi),Ui=bi&&bi.cacheSkipCount?bi.cacheSkipCount:0,ir=[this.strategy];if(bi&&bi.timestamp+this.ttl>=mr.now()){var fr=this.transports[bi.transport];fr&&(["ws","wss"].includes(bi.transport)||Ui>3?(this.timeline.info({cached:!0,transport:bi.transport,latency:bi.latency}),ir.push(new Zr([fr],{timeout:bi.latency*2+1e3,failFast:!0}))):Ui++)}var Tr=mr.now(),Ir=ir.pop().connect(Xt,function Dr(Vr,Ls){Vr?(jn(pi),ir.length>0?(Tr=mr.now(),Ir=ir.pop().connect(Xt,Dr)):ei(Vr)):(gs(pi,Ls.transport.name,mr.now()-Tr,Ui),ei(null,Ls))});return{abort:function(){Ir.abort()},forceMinPriority:function(Dr){Xt=Dr,Ir&&Ir.forceMinPriority(Dr)}}}}function xn(ni){return"pusherTransport"+(ni?"TLS":"NonTLS")}function Ds(ni){var Xt=Wi.getLocalStorage();if(Xt)try{var ei=Xt[xn(ni)];if(ei)return JSON.parse(ei)}catch{jn(ni)}return null}function gs(ni,Xt,ei,pi){var bi=Wi.getLocalStorage();if(bi)try{bi[xn(ni)]=lr({timestamp:mr.now(),transport:Xt,latency:ei,cacheSkipCount:pi})}catch{}}function jn(ni){var Xt=Wi.getLocalStorage();if(Xt)try{delete Xt[xn(ni)]}catch{}}class es{constructor(Xt,{delay:ei}){this.strategy=Xt,this.options={delay:ei}}isSupported(){return this.strategy.isSupported()}connect(Xt,ei){var pi=this.strategy,bi,Ui=new zi(this.options.delay,function(){bi=pi.connect(Xt,ei)});return{abort:function(){Ui.ensureAborted(),bi&&bi.abort()},forceMinPriority:function(ir){Xt=ir,bi&&bi.forceMinPriority(ir)}}}}class Yr{constructor(Xt,ei,pi){this.test=Xt,this.trueBranch=ei,this.falseBranch=pi}isSupported(){var Xt=this.test()?this.trueBranch:this.falseBranch;return Xt.isSupported()}connect(Xt,ei){var pi=this.test()?this.trueBranch:this.falseBranch;return pi.connect(Xt,ei)}}class Hn{constructor(Xt){this.strategy=Xt}isSupported(){return this.strategy.isSupported()}connect(Xt,ei){var pi=this.strategy.connect(Xt,function(bi,Ui){Ui&&pi.abort(),ei(bi,Ui)});return pi}}function sn(ni){return function(){return ni.isSupported()}}var ys=function(ni,Xt,ei){var pi={};function bi(rs,aa,Ea,xa,Es){var oa=ei(ni,rs,aa,Ea,xa,Es);return pi[rs]=oa,oa}var Ui=Object.assign({},Xt,{hostNonTLS:ni.wsHost+":"+ni.wsPort,hostTLS:ni.wsHost+":"+ni.wssPort,httpPath:ni.wsPath}),ir=Object.assign({},Ui,{useTLS:!0}),fr=Object.assign({},Xt,{hostNonTLS:ni.httpHost+":"+ni.httpPort,hostTLS:ni.httpHost+":"+ni.httpsPort,httpPath:ni.httpPath}),Tr={loop:!0,timeout:15e3,timeoutLimit:6e4},Ir=new ms({minPingDelay:1e4,maxPingDelay:ni.activityTimeout}),Dr=new ms({lives:2,minPingDelay:1e4,maxPingDelay:ni.activityTimeout}),Vr=bi("ws","ws",3,Ui,Ir),Ls=bi("wss","ws",3,ir,Ir),ra=bi("sockjs","sockjs",1,fr),Ys=bi("xhr_streaming","xhr_streaming",1,fr,Dr),_a=bi("xdr_streaming","xdr_streaming",1,fr,Dr),na=bi("xhr_polling","xhr_polling",1,fr),ba=bi("xdr_polling","xdr_polling",1,fr),Qs=new Zr([Vr],Tr),Ta=new Zr([Ls],Tr),Sa=new Zr([ra],Tr),Js=new Zr([new Yr(sn(Ys),Ys,_a)],Tr),sa=new Zr([new Yr(sn(na),na,ba)],Tr),Zs=new Zr([new Yr(sn(Js),new Pn([Js,new es(sa,{delay:4e3})]),sa)],Tr),ea=new Yr(sn(Zs),Zs,Sa),Ns;return Xt.useTLS?Ns=new Pn([Qs,new es(ea,{delay:2e3})]):Ns=new Pn([Qs,new es(Ta,{delay:2e3}),new es(ea,{delay:5e3})]),new Vn(new Hn(new Yr(sn(Vr),Ns,ea)),pi,{ttl:18e5,timeline:Xt.timeline,useTLS:Xt.useTLS})},Dn=ys,en=function(){var ni=this;ni.timeline.info(ni.buildTimelineMessage({transport:ni.name+(ni.options.useTLS?"s":"")})),ni.hooks.isInitialized()?ni.changeState("initialized"):ni.hooks.file?(ni.changeState("initializing"),ht.load(ni.hooks.file,{useTLS:ni.options.useTLS},function(Xt,ei){ni.hooks.isInitialized()?(ni.changeState("initialized"),ei(!0)):(Xt&&ni.onError(Xt),ni.onClose(),ei(!1))})):ni.onClose()},vs={getRequest:function(ni){var Xt=new window.XDomainRequest;return Xt.ontimeout=function(){ni.emit("error",new Ft),ni.close()},Xt.onerror=function(ei){ni.emit("error",ei),ni.close()},Xt.onprogress=function(){Xt.responseText&&Xt.responseText.length>0&&ni.onChunk(200,Xt.responseText)},Xt.onload=function(){Xt.responseText&&Xt.responseText.length>0&&ni.onChunk(200,Xt.responseText),ni.emit("finished",200),ni.close()},Xt},abortRequest:function(ni){ni.ontimeout=ni.onerror=ni.onprogress=ni.onload=null,ni.abort()}},ts=vs;const qn=256*1024;class Gn extends Xr{constructor(Xt,ei,pi){super(),this.hooks=Xt,this.method=ei,this.url=pi}start(Xt){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},Wi.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(Xt)}close(){this.unloader&&(Wi.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(Xt,ei){for(;;){var pi=this.advanceBuffer(ei);if(pi)this.emit("chunk",{status:Xt,data:pi});else break}this.isBufferTooLong(ei)&&this.emit("buffer_too_long")}advanceBuffer(Xt){var ei=Xt.slice(this.position),pi=ei.indexOf(`
`);return pi!==-1?(this.position+=pi+1,ei.slice(0,pi)):null}isBufferTooLong(Xt){return this.position===Xt.length&&Xt.length>qn}}var an;(function(ni){ni[ni.CONNECTING=0]="CONNECTING",ni[ni.OPEN=1]="OPEN",ni[ni.CLOSED=3]="CLOSED"})(an||(an={}));var vn=an,ks=1;class _n{constructor(Xt,ei){this.hooks=Xt,this.session=jr(1e3)+"/"+ii(8),this.location=Gs(ei),this.readyState=vn.CONNECTING,this.openStream()}send(Xt){return this.sendRaw(JSON.stringify([Xt]))}ping(){this.hooks.sendHeartbeat(this)}close(Xt,ei){this.onClose(Xt,ei,!0)}sendRaw(Xt){if(this.readyState===vn.OPEN)try{return Wi.createSocketRequest("POST",Rs(zs(this.location,this.session))).start(Xt),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(Xt,ei,pi){this.closeStream(),this.readyState=vn.CLOSED,this.onclose&&this.onclose({code:Xt,reason:ei,wasClean:pi})}onChunk(Xt){if(Xt.status===200){this.readyState===vn.OPEN&&this.onActivity();var ei,pi=Xt.data.slice(0,1);switch(pi){case"o":ei=JSON.parse(Xt.data.slice(1)||"{}"),this.onOpen(ei);break;case"a":ei=JSON.parse(Xt.data.slice(1)||"[]");for(var bi=0;bi<ei.length;bi++)this.onEvent(ei[bi]);break;case"m":ei=JSON.parse(Xt.data.slice(1)||"null"),this.onEvent(ei);break;case"h":this.hooks.onHeartbeat(this);break;case"c":ei=JSON.parse(Xt.data.slice(1)||"[]"),this.onClose(ei[0],ei[1],!0);break}}}onOpen(Xt){this.readyState===vn.CONNECTING?(Xt&&Xt.hostname&&(this.location.base=is(this.location.base,Xt.hostname)),this.readyState=vn.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(Xt){this.readyState===vn.OPEN&&this.onmessage&&this.onmessage({data:Xt})}onActivity(){this.onactivity&&this.onactivity()}onError(Xt){this.onerror&&this.onerror(Xt)}openStream(){this.stream=Wi.createSocketRequest("POST",Rs(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",Xt=>{this.onChunk(Xt)}),this.stream.bind("finished",Xt=>{this.hooks.onFinished(this,Xt)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(Xt){mr.defer(()=>{this.onError(Xt),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Gs(ni){var Xt=/([^\?]*)\/*(\??.*)/.exec(ni);return{base:Xt[1],queryString:Xt[2]}}function zs(ni,Xt){return ni.base+"/"+Xt+"/xhr_send"}function Rs(ni){var Xt=ni.indexOf("?")===-1?"?":"&";return ni+Xt+"t="+ +new Date+"&n="+ks++}function is(ni,Xt){var ei=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(ni);return ei[1]+Xt+ei[3]}function jr(ni){return Wi.randomInt(ni)}function ii(ni){for(var Xt=[],ei=0;ei<ni;ei++)Xt.push(jr(32).toString(32));return Xt.join("")}var oi=_n,di={getReceiveURL:function(ni,Xt){return ni.base+"/"+Xt+"/xhr_streaming"+ni.queryString},onHeartbeat:function(ni){ni.sendRaw("[]")},sendHeartbeat:function(ni){ni.sendRaw("[]")},onFinished:function(ni,Xt){ni.onClose(1006,"Connection interrupted ("+Xt+")",!1)}},ci=di,Si={getReceiveURL:function(ni,Xt){return ni.base+"/"+Xt+"/xhr"+ni.queryString},onHeartbeat:function(){},sendHeartbeat:function(ni){ni.sendRaw("[]")},onFinished:function(ni,Xt){Xt===200?ni.reconnect():ni.onClose(1006,"Connection interrupted ("+Xt+")",!1)}},Ii=Si,Pi={getRequest:function(ni){var Xt=Wi.getXHRAPI(),ei=new Xt;return ei.onreadystatechange=ei.onprogress=function(){switch(ei.readyState){case 3:ei.responseText&&ei.responseText.length>0&&ni.onChunk(ei.status,ei.responseText);break;case 4:ei.responseText&&ei.responseText.length>0&&ni.onChunk(ei.status,ei.responseText),ni.emit("finished",ei.status),ni.close();break}},ei},abortRequest:function(ni){ni.onreadystatechange=null,ni.abort()}},Yi=Pi,Vi={createStreamingSocket(ni){return this.createSocket(ci,ni)},createPollingSocket(ni){return this.createSocket(Ii,ni)},createSocket(ni,Xt){return new oi(ni,Xt)},createXHR(ni,Xt){return this.createRequest(Yi,ni,Xt)},createRequest(ni,Xt,ei){return new Gn(ni,Xt,ei)}},tr=Vi;tr.createXDR=function(ni,Xt){return this.createRequest(ts,ni,Xt)};var rr=tr,dr={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:Ue,DependenciesReceivers:et,getDefaultStrategy:Dn,Transports:Vs,transportConnectionInitializer:en,HTTPFactory:rr,TimelineTransport:xr,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(ni){window.Pusher=ni;var Xt=()=>{this.onDocumentBody(ni.ready)};window.JSON?Xt():ht.load("json2",{},Xt)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:$i,jsonp:br}},onDocumentBody(ni){document.body?ni():setTimeout(()=>{this.onDocumentBody(ni)},0)},createJSONPRequest(ni,Xt){return new wr(ni,Xt)},createScriptRequest(ni){return new Cr(ni)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var ni=this.getXHRAPI();return new ni},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return mn},createWebSocket(ni){var Xt=this.getWebSocketAPI();return new Xt(ni)},createSocketRequest(ni,Xt){if(this.isXHRSupported())return this.HTTPFactory.createXHR(ni,Xt);if(this.isXDRSupported(Xt.indexOf("https:")===0))return this.HTTPFactory.createXDR(ni,Xt);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var ni=this.getXHRAPI();return!!ni&&new ni().withCredentials!==void 0},isXDRSupported(ni){var Xt=ni?"https:":"http:",ei=this.getProtocol();return!!window.XDomainRequest&&ei===Xt},addUnloadListener(ni){window.addEventListener!==void 0?window.addEventListener("unload",ni,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",ni)},removeUnloadListener(ni){window.addEventListener!==void 0?window.removeEventListener("unload",ni,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",ni)},randomInt(ni){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*ni)}},Wi=dr,ar;(function(ni){ni[ni.ERROR=3]="ERROR",ni[ni.INFO=6]="INFO",ni[ni.DEBUG=7]="DEBUG"})(ar||(ar={}));var gr=ar;class Pr{constructor(Xt,ei,pi){this.key=Xt,this.session=ei,this.events=[],this.options=pi||{},this.sent=0,this.uniqueID=0}log(Xt,ei){Xt<=this.options.level&&(this.events.push(cr({},ei,{timestamp:mr.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(Xt){this.log(gr.ERROR,Xt)}info(Xt){this.log(gr.INFO,Xt)}debug(Xt){this.log(gr.DEBUG,Xt)}isEmpty(){return this.events.length===0}send(Xt,ei){var pi=cr({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],Xt(pi,(bi,Ui)=>{bi||this.sent++,ei&&ei(bi,Ui)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class pr{constructor(Xt,ei,pi,bi){this.name=Xt,this.priority=ei,this.transport=pi,this.options=bi||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(Xt,ei){if(this.isSupported()){if(this.priority<Xt)return Er(new Nt,ei)}else return Er(new li,ei);var pi=!1,bi=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),Ui=null,ir=function(){bi.unbind("initialized",ir),bi.connect()},fr=function(){Ui=yn.createHandshake(bi,function(Vr){pi=!0,Dr(),ei(null,Vr)})},Tr=function(Vr){Dr(),ei(Vr)},Ir=function(){Dr();var Vr;Vr=lr(bi),ei(new Gt(Vr))},Dr=function(){bi.unbind("initialized",ir),bi.unbind("open",fr),bi.unbind("error",Tr),bi.unbind("closed",Ir)};return bi.bind("initialized",ir),bi.bind("open",fr),bi.bind("error",Tr),bi.bind("closed",Ir),bi.initialize(),{abort:()=>{pi||(Dr(),Ui?Ui.close():bi.close())},forceMinPriority:Vr=>{pi||this.priority<Vr&&(Ui?Ui.close():bi.close())}}}}function Er(ni,Xt){return mr.defer(function(){Xt(ni)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:Lr}=Wi;var kr=function(ni,Xt,ei,pi,bi,Ui){var ir=Lr[ei];if(!ir)throw new ri(ei);var fr=(!ni.enabledTransports||Ji(ni.enabledTransports,Xt)!==-1)&&(!ni.disabledTransports||Ji(ni.disabledTransports,Xt)===-1),Tr;return fr?(bi=Object.assign({ignoreNullOrigin:ni.ignoreNullOrigin},bi),Tr=new pr(Xt,pi,Ui?Ui.getAssistant(ir):ir,bi)):Tr=Fr,Tr},Fr={isSupported:function(){return!1},connect:function(ni,Xt){var ei=mr.defer(function(){Xt(new li)});return{abort:function(){ei.ensureAborted()},forceMinPriority:function(){}}}};function Rr(ni){if(ni==null)throw"You must pass an options object";if(ni.cluster==null)throw"Options object must provide a cluster";"disableStats"in ni&&Qi.warn("The disableStats option is deprecated in favor of enableStats")}const tn=(ni,Xt)=>{var ei="socket_id="+encodeURIComponent(ni.socketId);for(var pi in Xt.params)ei+="&"+encodeURIComponent(pi)+"="+encodeURIComponent(Xt.params[pi]);if(Xt.paramsProvider!=null){let bi=Xt.paramsProvider();for(var pi in bi)ei+="&"+encodeURIComponent(pi)+"="+encodeURIComponent(bi[pi])}return ei};var Ws=ni=>{if(typeof Wi.getAuthorizers()[ni.transport]>"u")throw`'${ni.transport}' is not a recognized auth transport`;return(Xt,ei)=>{const pi=tn(Xt,ni);Wi.getAuthorizers()[ni.transport](Wi,pi,ni,St.UserAuthentication,ei)}};const da=(ni,Xt)=>{var ei="socket_id="+encodeURIComponent(ni.socketId);ei+="&channel_name="+encodeURIComponent(ni.channelName);for(var pi in Xt.params)ei+="&"+encodeURIComponent(pi)+"="+encodeURIComponent(Xt.params[pi]);if(Xt.paramsProvider!=null){let bi=Xt.paramsProvider();for(var pi in bi)ei+="&"+encodeURIComponent(pi)+"="+encodeURIComponent(bi[pi])}return ei};var fa=ni=>{if(typeof Wi.getAuthorizers()[ni.transport]>"u")throw`'${ni.transport}' is not a recognized auth transport`;return(Xt,ei)=>{const pi=da(Xt,ni);Wi.getAuthorizers()[ni.transport](Wi,pi,ni,St.ChannelAuthorization,ei)}};const pa=(ni,Xt,ei)=>{const pi={authTransport:Xt.transport,authEndpoint:Xt.endpoint,auth:{params:Xt.params,headers:Xt.headers}};return(bi,Ui)=>{const ir=ni.channel(bi.channelName);ei(ir,pi).authorize(bi.socketId,Ui)}};function _s(ni,Xt){let ei={activityTimeout:ni.activityTimeout||Xe.activityTimeout,cluster:ni.cluster,httpPath:ni.httpPath||Xe.httpPath,httpPort:ni.httpPort||Xe.httpPort,httpsPort:ni.httpsPort||Xe.httpsPort,pongTimeout:ni.pongTimeout||Xe.pongTimeout,statsHost:ni.statsHost||Xe.stats_host,unavailableTimeout:ni.unavailableTimeout||Xe.unavailableTimeout,wsPath:ni.wsPath||Xe.wsPath,wsPort:ni.wsPort||Xe.wsPort,wssPort:ni.wssPort||Xe.wssPort,enableStats:An(ni),httpHost:bs(ni),useTLS:bn(ni),wsHost:Ts(ni),userAuthenticator:ia(ni),channelAuthorizer:ga(ni,Xt)};return"disabledTransports"in ni&&(ei.disabledTransports=ni.disabledTransports),"enabledTransports"in ni&&(ei.enabledTransports=ni.enabledTransports),"ignoreNullOrigin"in ni&&(ei.ignoreNullOrigin=ni.ignoreNullOrigin),"timelineParams"in ni&&(ei.timelineParams=ni.timelineParams),"nacl"in ni&&(ei.nacl=ni.nacl),ei}function bs(ni){return ni.httpHost?ni.httpHost:ni.cluster?`sockjs-${ni.cluster}.pusher.com`:Xe.httpHost}function Ts(ni){return ni.wsHost?ni.wsHost:Os(ni.cluster)}function Os(ni){return`ws-${ni}.pusher.com`}function bn(ni){return Wi.getProtocol()==="https:"?!0:ni.forceTLS!==!1}function An(ni){return"enableStats"in ni?ni.enableStats:"disableStats"in ni?!ni.disableStats:!1}const Ss=ni=>"customHandler"in ni&&ni.customHandler!=null;function ia(ni){const Xt=Object.assign(Object.assign({},Xe.userAuthentication),ni.userAuthentication);return Ss(Xt)?Xt.customHandler:Ws(Xt)}function ma(ni,Xt){let ei;if("channelAuthorization"in ni)ei=Object.assign(Object.assign({},Xe.channelAuthorization),ni.channelAuthorization);else if(ei={transport:ni.authTransport||Xe.authTransport,endpoint:ni.authEndpoint||Xe.authEndpoint},"auth"in ni&&("params"in ni.auth&&(ei.params=ni.auth.params),"headers"in ni.auth&&(ei.headers=ni.auth.headers)),"authorizer"in ni)return{customHandler:pa(Xt,ei,ni.authorizer)};return ei}function ga(ni,Xt){const ei=ma(ni,Xt);return Ss(ei)?ei.customHandler:fa(ei)}class ya extends Xr{constructor(Xt){super(function(ei,pi){Qi.debug(`No callbacks on watchlist events for ${ei}`)}),this.pusher=Xt,this.bindWatchlistInternalEvent()}handleEvent(Xt){Xt.data.events.forEach(ei=>{this.emit(ei.name,ei)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",Xt=>{var ei=Xt.event;ei==="pusher_internal:watchlist_events"&&this.handleEvent(Xt)})}}function va(){let ni,Xt;return{promise:new Promise((pi,bi)=>{ni=pi,Xt=bi}),resolve:ni,reject:Xt}}var Ks=va;class Xs extends Xr{constructor(Xt){super(function(ei,pi){Qi.debug("No callbacks on user for "+ei)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(ei,pi)=>{if(ei){Qi.warn(`Error during signin: ${ei}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:pi.auth,user_data:pi.user_data})},this.pusher=Xt,this.pusher.connection.bind("state_change",({previous:ei,current:pi})=>{ei!=="connected"&&pi==="connected"&&this._signin(),ei==="connected"&&pi!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new ya(Xt),this.pusher.connection.bind("message",ei=>{var pi=ei.event;pi==="pusher:signin_success"&&this._onSigninSuccess(ei.data),this.serverToUserChannel&&this.serverToUserChannel.name===ei.channel&&this.serverToUserChannel.handleEvent(ei)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(Xt){try{this.user_data=JSON.parse(Xt.user_data)}catch{Qi.error(`Failed parsing user data after signin: ${Xt.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Qi.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const Xt=ei=>{ei.subscriptionPending&&ei.subscriptionCancelled?ei.reinstateSubscription():!ei.subscriptionPending&&this.pusher.connection.state==="connected"&&ei.subscribe()};this.serverToUserChannel=new cs(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((ei,pi)=>{ei.indexOf("pusher_internal:")===0||ei.indexOf("pusher:")===0||this.emit(ei,pi)}),Xt(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:Xt,resolve:ei,reject:pi}=Ks();Xt.done=!1;const bi=()=>{Xt.done=!0};Xt.then(bi).catch(bi),this.signinDonePromise=Xt,this._signinDoneResolve=ei}}class Br{static ready(){Br.isReady=!0;for(var Xt=0,ei=Br.instances.length;Xt<ei;Xt++)Br.instances[Xt].connect()}static getClientFeatures(){return nr(Hi({ws:Wi.Transports.ws},function(Xt){return Xt.isSupported({})}))}constructor(Xt,ei){Ms(Xt),Rr(ei),this.key=Xt,this.options=ei,this.config=_s(this.options,this),this.channels=yn.createChannels(),this.global_emitter=new Xr,this.sessionID=Wi.randomInt(1e9),this.timeline=new Pr(this.key,this.sessionID,{cluster:this.config.cluster,features:Br.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:gr.INFO,version:Xe.VERSION}),this.config.enableStats&&(this.timelineSender=yn.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Wi.TimelineTransport.name}));var pi=bi=>Wi.getDefaultStrategy(this.config,bi,kr);this.connection=yn.createConnectionManager(this.key,{getStrategy:pi,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",bi=>{var Ui=bi.event,ir=Ui.indexOf("pusher_internal:")===0;if(bi.channel){var fr=this.channel(bi.channel);fr&&fr.handleEvent(bi)}ir||this.global_emitter.emit(bi.event,bi.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",bi=>{Qi.warn(bi)}),Br.instances.push(this),this.timeline.info({instances:Br.instances.length}),this.user=new Xs(this),Br.isReady&&this.connect()}switchCluster(Xt){const{appKey:ei,cluster:pi}=Xt;this.key=ei,this.options=Object.assign(Object.assign({},this.options),{cluster:pi}),this.config=_s(this.options,this),this.connection.switchCluster(this.key)}channel(Xt){return this.channels.find(Xt)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var Xt=this.connection.isUsingTLS(),ei=this.timelineSender;this.timelineSenderTimer=new or(6e4,function(){ei.send(Xt)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(Xt,ei,pi){return this.global_emitter.bind(Xt,ei,pi),this}unbind(Xt,ei,pi){return this.global_emitter.unbind(Xt,ei,pi),this}bind_global(Xt){return this.global_emitter.bind_global(Xt),this}unbind_global(Xt){return this.global_emitter.unbind_global(Xt),this}unbind_all(Xt){return this.global_emitter.unbind_all(),this}subscribeAll(){var Xt;for(Xt in this.channels.channels)this.channels.channels.hasOwnProperty(Xt)&&this.subscribe(Xt)}subscribe(Xt){var ei=this.channels.add(Xt,this);return ei.subscriptionPending&&ei.subscriptionCancelled?ei.reinstateSubscription():!ei.subscriptionPending&&this.connection.state==="connected"&&ei.subscribe(),ei}unsubscribe(Xt){var ei=this.channels.find(Xt);ei&&ei.subscriptionPending?ei.cancelSubscription():(ei=this.channels.remove(Xt),ei&&ei.subscribed&&ei.unsubscribe())}send_event(Xt,ei,pi){return this.connection.send_event(Xt,ei,pi)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Br.instances=[],Br.isReady=!1,Br.logToConsole=!1,Br.Runtime=Wi,Br.ScriptReceivers=Wi.ScriptReceivers,Br.DependenciesReceivers=Wi.DependenciesReceivers,Br.auth_callbacks=Wi.auth_callbacks;var Rn=C.default=Br;function Ms(ni){if(ni==null)throw"You must pass your app key when you instantiate Pusher."}Wi.setup(Br)}])})})(pusher);var pusherExports=pusher.exports;const Pusher=getDefaultExportFromCjs(pusherExports);function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const isProxyAvailable=typeof Proxy=="function",HOOK_SETUP="devtools-plugin:setup",HOOK_PLUGIN_SETTINGS_SET="plugin:settings:set";let supported,perf;function isPerformanceSupported(){var E;return supported!==void 0||(typeof window<"u"&&window.performance?(supported=!0,perf=window.performance):typeof globalThis<"u"&&(!((E=globalThis.perf_hooks)===null||E===void 0)&&E.performance)?(supported=!0,perf=globalThis.perf_hooks.performance):supported=!1),supported}function now(){return isPerformanceSupported()?perf.now():Date.now()}class ApiProxy{constructor(S,x){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=S,this.hook=x;const C={};if(S.settings)for(const Ue in S.settings){const je=S.settings[Ue];C[Ue]=je.defaultValue}const R=`__vue-devtools-plugin-settings__${S.id}`;let Ce=Object.assign({},C);try{const Ue=localStorage.getItem(R),je=JSON.parse(Ue);Object.assign(Ce,je)}catch{}this.fallbacks={getSettings(){return Ce},setSettings(Ue){try{localStorage.setItem(R,JSON.stringify(Ue))}catch{}Ce=Ue},now(){return now()}},x&&x.on(HOOK_PLUGIN_SETTINGS_SET,(Ue,je)=>{Ue===this.plugin.id&&this.fallbacks.setSettings(je)}),this.proxiedOn=new Proxy({},{get:(Ue,je)=>this.target?this.target.on[je]:(...Xe)=>{this.onQueue.push({method:je,args:Xe})}}),this.proxiedTarget=new Proxy({},{get:(Ue,je)=>this.target?this.target[je]:je==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(je)?(...Xe)=>(this.targetQueue.push({method:je,args:Xe,resolve:()=>{}}),this.fallbacks[je](...Xe)):(...Xe)=>new Promise(Ye=>{this.targetQueue.push({method:je,args:Xe,resolve:Ye})})})}async setRealTarget(S){this.target=S;for(const x of this.onQueue)this.target.on[x.method](...x.args);for(const x of this.targetQueue)x.resolve(await this.target[x.method](...x.args))}}function setupDevtoolsPlugin(E,S){const x=E,C=getTarget(),R=getDevtoolsGlobalHook(),Ce=isProxyAvailable&&x.enableEarlyProxy;if(R&&(C.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!Ce))R.emit(HOOK_SETUP,E,S);else{const Ue=Ce?new ApiProxy(x,R):null;(C.__VUE_DEVTOOLS_PLUGINS__=C.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:x,setupFn:S,proxy:Ue}),Ue&&S(Ue.proxiedTarget)}}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(E){return typeof E=="object"||"displayName"in E||"props"in E||"__vccOpts"in E}function isESModule(E){return E.__esModule||E[Symbol.toStringTag]==="Module"||E.default&&isRouteComponent(E.default)}const assign$1=Object.assign;function applyToParams(E,S){const x={};for(const C in S){const R=S[C];x[C]=isArray(R)?R.map(E):E(R)}return x}const noop$2=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(E){return encodeURI(""+E).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(E){return commonEncode(E).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(E){return commonEncode(E).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(E){return encodeQueryValue(E).replace(EQUAL_RE,"%3D")}function encodePath(E){return commonEncode(E).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(E){return E==null?"":encodePath(E).replace(SLASH_RE,"%2F")}function decode(E){try{return decodeURIComponent(""+E)}catch{}return""+E}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=E=>E.replace(TRAILING_SLASH_RE,"");function parseURL(E,S,x="/"){let C,R={},Ce="",Ue="";const je=S.indexOf("#");let Xe=S.indexOf("?");return je<Xe&&je>=0&&(Xe=-1),Xe>-1&&(C=S.slice(0,Xe),Ce=S.slice(Xe+1,je>-1?je:S.length),R=E(Ce)),je>-1&&(C=C||S.slice(0,je),Ue=S.slice(je,S.length)),C=resolveRelativePath(C??S,x),{fullPath:C+(Ce&&"?")+Ce+Ue,path:C,query:R,hash:decode(Ue)}}function stringifyURL(E,S){const x=S.query?E(S.query):"";return S.path+(x&&"?")+x+(S.hash||"")}function stripBase(E,S){return!S||!E.toLowerCase().startsWith(S.toLowerCase())?E:E.slice(S.length)||"/"}function isSameRouteLocation(E,S,x){const C=S.matched.length-1,R=x.matched.length-1;return C>-1&&C===R&&isSameRouteRecord(S.matched[C],x.matched[R])&&isSameRouteLocationParams(S.params,x.params)&&E(S.query)===E(x.query)&&S.hash===x.hash}function isSameRouteRecord(E,S){return(E.aliasOf||E)===(S.aliasOf||S)}function isSameRouteLocationParams(E,S){if(Object.keys(E).length!==Object.keys(S).length)return!1;for(const x in E)if(!isSameRouteLocationParamsValue(E[x],S[x]))return!1;return!0}function isSameRouteLocationParamsValue(E,S){return isArray(E)?isEquivalentArray(E,S):isArray(S)?isEquivalentArray(S,E):E===S}function isEquivalentArray(E,S){return isArray(S)?E.length===S.length&&E.every((x,C)=>x===S[C]):E.length===1&&E[0]===S}function resolveRelativePath(E,S){if(E.startsWith("/"))return E;if(!E)return S;const x=S.split("/"),C=E.split("/"),R=C[C.length-1];(R===".."||R===".")&&C.push("");let Ce=x.length-1,Ue,je;for(Ue=0;Ue<C.length;Ue++)if(je=C[Ue],je!==".")if(je==="..")Ce>1&&Ce--;else break;return x.slice(0,Ce).join("/")+"/"+C.slice(Ue).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(E){E.pop="pop",E.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(E){E.back="back",E.forward="forward",E.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(E){if(!E)if(isBrowser){const S=document.querySelector("base");E=S&&S.getAttribute("href")||"/",E=E.replace(/^\w+:\/\/[^\/]+/,"")}else E="/";return E[0]!=="/"&&E[0]!=="#"&&(E="/"+E),removeTrailingSlash(E)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(E,S){return E.replace(BEFORE_HASH_RE,"#")+S}function getElementPosition(E,S){const x=document.documentElement.getBoundingClientRect(),C=E.getBoundingClientRect();return{behavior:S.behavior,left:C.left-x.left-(S.left||0),top:C.top-x.top-(S.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(E){let S;if("el"in E){const x=E.el,C=typeof x=="string"&&x.startsWith("#"),R=typeof x=="string"?C?document.getElementById(x.slice(1)):document.querySelector(x):x;if(!R)return;S=getElementPosition(R,E)}else S=E;"scrollBehavior"in document.documentElement.style?window.scrollTo(S):window.scrollTo(S.left!=null?S.left:window.scrollX,S.top!=null?S.top:window.scrollY)}function getScrollKey(E,S){return(history.state?history.state.position-S:-1)+E}const scrollPositions=new Map;function saveScrollPosition(E,S){scrollPositions.set(E,S)}function getSavedScrollPosition(E){const S=scrollPositions.get(E);return scrollPositions.delete(E),S}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(E,S){const{pathname:x,search:C,hash:R}=S,Ce=E.indexOf("#");if(Ce>-1){let je=R.includes(E.slice(Ce))?E.slice(Ce).length:1,Xe=R.slice(je);return Xe[0]!=="/"&&(Xe="/"+Xe),stripBase(Xe,"")}return stripBase(x,E)+C+R}function useHistoryListeners(E,S,x,C){let R=[],Ce=[],Ue=null;const je=({state:Dt})=>{const Ot=createCurrentLocation(E,location),Mt=x.value,St=S.value;let Ut=0;if(Dt){if(x.value=Ot,S.value=Dt,Ue&&Ue===Mt){Ue=null;return}Ut=St?Dt.position-St.position:0}else C(Ot);R.forEach(kt=>{kt(x.value,Mt,{delta:Ut,type:NavigationType.pop,direction:Ut?Ut>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function Xe(){Ue=x.value}function Ye(Dt){R.push(Dt);const Ot=()=>{const Mt=R.indexOf(Dt);Mt>-1&&R.splice(Mt,1)};return Ce.push(Ot),Ot}function et(){const{history:Dt}=window;Dt.state&&Dt.replaceState(assign$1({},Dt.state,{scroll:computeScrollPosition()}),"")}function ht(){for(const Dt of Ce)Dt();Ce=[],window.removeEventListener("popstate",je),window.removeEventListener("beforeunload",et)}return window.addEventListener("popstate",je),window.addEventListener("beforeunload",et,{passive:!0}),{pauseListeners:Xe,listen:Ye,destroy:ht}}function buildState(E,S,x,C=!1,R=!1){return{back:E,current:S,forward:x,replaced:C,position:window.history.length,scroll:R?computeScrollPosition():null}}function useHistoryStateNavigation(E){const{history:S,location:x}=window,C={value:createCurrentLocation(E,x)},R={value:S.state};R.value||Ce(C.value,{back:null,current:C.value,forward:null,position:S.length-1,replaced:!0,scroll:null},!0);function Ce(Xe,Ye,et){const ht=E.indexOf("#"),Dt=ht>-1?(x.host&&document.querySelector("base")?E:E.slice(ht))+Xe:createBaseLocation()+E+Xe;try{S[et?"replaceState":"pushState"](Ye,"",Dt),R.value=Ye}catch(Ot){console.error(Ot),x[et?"replace":"assign"](Dt)}}function Ue(Xe,Ye){const et=assign$1({},S.state,buildState(R.value.back,Xe,R.value.forward,!0),Ye,{position:R.value.position});Ce(Xe,et,!0),C.value=Xe}function je(Xe,Ye){const et=assign$1({},R.value,S.state,{forward:Xe,scroll:computeScrollPosition()});Ce(et.current,et,!0);const ht=assign$1({},buildState(C.value,Xe,null),{position:et.position+1},Ye);Ce(Xe,ht,!1),C.value=Xe}return{location:C,state:R,push:je,replace:Ue}}function createWebHistory(E){E=normalizeBase(E);const S=useHistoryStateNavigation(E),x=useHistoryListeners(E,S.state,S.location,S.replace);function C(Ce,Ue=!0){Ue||x.pauseListeners(),history.go(Ce)}const R=assign$1({location:"",base:E,go:C,createHref:createHref.bind(null,E)},S,x);return Object.defineProperty(R,"location",{enumerable:!0,get:()=>S.location.value}),Object.defineProperty(R,"state",{enumerable:!0,get:()=>S.state.value}),R}function createWebHashHistory(E){return E=location.host?E||location.pathname+location.search:"",E.includes("#")||(E+="#"),createWebHistory(E)}function isRouteLocation(E){return typeof E=="string"||E&&typeof E=="object"}function isRouteName(E){return typeof E=="string"||typeof E=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(E){E[E.aborted=4]="aborted",E[E.cancelled=8]="cancelled",E[E.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(E,S){return assign$1(new Error,{type:E,[NavigationFailureSymbol]:!0},S)}function isNavigationFailure(E,S){return E instanceof Error&&NavigationFailureSymbol in E&&(S==null||!!(E.type&S))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(E,S){const x=assign$1({},BASE_PATH_PARSER_OPTIONS,S),C=[];let R=x.start?"^":"";const Ce=[];for(const Ye of E){const et=Ye.length?[]:[90];x.strict&&!Ye.length&&(R+="/");for(let ht=0;ht<Ye.length;ht++){const Dt=Ye[ht];let Ot=40+(x.sensitive?.25:0);if(Dt.type===0)ht||(R+="/"),R+=Dt.value.replace(REGEX_CHARS_RE,"\\$&"),Ot+=40;else if(Dt.type===1){const{value:Mt,repeatable:St,optional:Ut,regexp:kt}=Dt;Ce.push({name:Mt,repeatable:St,optional:Ut});const Ft=kt||BASE_PARAM_PATTERN;if(Ft!==BASE_PARAM_PATTERN){Ot+=10;try{new RegExp(`(${Ft})`)}catch(Gt){throw new Error(`Invalid custom RegExp for param "${Mt}" (${Ft}): `+Gt.message)}}let Nt=St?`((?:${Ft})(?:/(?:${Ft}))*)`:`(${Ft})`;ht||(Nt=Ut&&Ye.length<2?`(?:/${Nt})`:"/"+Nt),Ut&&(Nt+="?"),R+=Nt,Ot+=20,Ut&&(Ot+=-8),St&&(Ot+=-20),Ft===".*"&&(Ot+=-50)}et.push(Ot)}C.push(et)}if(x.strict&&x.end){const Ye=C.length-1;C[Ye][C[Ye].length-1]+=.7000000000000001}x.strict||(R+="/?"),x.end?R+="$":x.strict&&(R+="(?:/|$)");const Ue=new RegExp(R,x.sensitive?"":"i");function je(Ye){const et=Ye.match(Ue),ht={};if(!et)return null;for(let Dt=1;Dt<et.length;Dt++){const Ot=et[Dt]||"",Mt=Ce[Dt-1];ht[Mt.name]=Ot&&Mt.repeatable?Ot.split("/"):Ot}return ht}function Xe(Ye){let et="",ht=!1;for(const Dt of E){(!ht||!et.endsWith("/"))&&(et+="/"),ht=!1;for(const Ot of Dt)if(Ot.type===0)et+=Ot.value;else if(Ot.type===1){const{value:Mt,repeatable:St,optional:Ut}=Ot,kt=Mt in Ye?Ye[Mt]:"";if(isArray(kt)&&!St)throw new Error(`Provided param "${Mt}" is an array but it is not repeatable (* or + modifiers)`);const Ft=isArray(kt)?kt.join("/"):kt;if(!Ft)if(Ut)Dt.length<2&&(et.endsWith("/")?et=et.slice(0,-1):ht=!0);else throw new Error(`Missing required param "${Mt}"`);et+=Ft}}return et||"/"}return{re:Ue,score:C,keys:Ce,parse:je,stringify:Xe}}function compareScoreArray(E,S){let x=0;for(;x<E.length&&x<S.length;){const C=S[x]-E[x];if(C)return C;x++}return E.length<S.length?E.length===1&&E[0]===80?-1:1:E.length>S.length?S.length===1&&S[0]===80?1:-1:0}function comparePathParserScore(E,S){let x=0;const C=E.score,R=S.score;for(;x<C.length&&x<R.length;){const Ce=compareScoreArray(C[x],R[x]);if(Ce)return Ce;x++}if(Math.abs(R.length-C.length)===1){if(isLastScoreNegative(C))return 1;if(isLastScoreNegative(R))return-1}return R.length-C.length}function isLastScoreNegative(E){const S=E[E.length-1];return E.length>0&&S[S.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(E){if(!E)return[[]];if(E==="/")return[[ROOT_TOKEN]];if(!E.startsWith("/"))throw new Error(`Invalid path "${E}"`);function S(Ot){throw new Error(`ERR (${x})/"${Ye}": ${Ot}`)}let x=0,C=x;const R=[];let Ce;function Ue(){Ce&&R.push(Ce),Ce=[]}let je=0,Xe,Ye="",et="";function ht(){Ye&&(x===0?Ce.push({type:0,value:Ye}):x===1||x===2||x===3?(Ce.length>1&&(Xe==="*"||Xe==="+")&&S(`A repeatable param (${Ye}) must be alone in its segment. eg: '/:ids+.`),Ce.push({type:1,value:Ye,regexp:et,repeatable:Xe==="*"||Xe==="+",optional:Xe==="*"||Xe==="?"})):S("Invalid state to consume buffer"),Ye="")}function Dt(){Ye+=Xe}for(;je<E.length;){if(Xe=E[je++],Xe==="\\"&&x!==2){C=x,x=4;continue}switch(x){case 0:Xe==="/"?(Ye&&ht(),Ue()):Xe===":"?(ht(),x=1):Dt();break;case 4:Dt(),x=C;break;case 1:Xe==="("?x=2:VALID_PARAM_RE.test(Xe)?Dt():(ht(),x=0,Xe!=="*"&&Xe!=="?"&&Xe!=="+"&&je--);break;case 2:Xe===")"?et[et.length-1]=="\\"?et=et.slice(0,-1)+Xe:x=3:et+=Xe;break;case 3:ht(),x=0,Xe!=="*"&&Xe!=="?"&&Xe!=="+"&&je--,et="";break;default:S("Unknown state");break}}return x===2&&S(`Unfinished custom RegExp for param "${Ye}"`),ht(),Ue(),R}function createRouteRecordMatcher(E,S,x){const C=tokensToParser(tokenizePath(E.path),x),R=assign$1(C,{record:E,parent:S,children:[],alias:[]});return S&&!R.record.aliasOf==!S.record.aliasOf&&S.children.push(R),R}function createRouterMatcher(E,S){const x=[],C=new Map;S=mergeOptions({strict:!1,end:!0,sensitive:!1},S);function R(ht){return C.get(ht)}function Ce(ht,Dt,Ot){const Mt=!Ot,St=normalizeRouteRecord(ht);St.aliasOf=Ot&&Ot.record;const Ut=mergeOptions(S,ht),kt=[St];if("alias"in ht){const Gt=typeof ht.alias=="string"?[ht.alias]:ht.alias;for(const Zt of Gt)kt.push(normalizeRouteRecord(assign$1({},St,{components:Ot?Ot.record.components:St.components,path:Zt,aliasOf:Ot?Ot.record:St})))}let Ft,Nt;for(const Gt of kt){const{path:Zt}=Gt;if(Dt&&Zt[0]!=="/"){const ri=Dt.record.path,li=ri[ri.length-1]==="/"?"":"/";Gt.path=Dt.record.path+(Zt&&li+Zt)}if(Ft=createRouteRecordMatcher(Gt,Dt,Ut),Ot?Ot.alias.push(Ft):(Nt=Nt||Ft,Nt!==Ft&&Nt.alias.push(Ft),Mt&&ht.name&&!isAliasRecord(Ft)&&Ue(ht.name)),isMatchable(Ft)&&Xe(Ft),St.children){const ri=St.children;for(let li=0;li<ri.length;li++)Ce(ri[li],Ft,Ot&&Ot.children[li])}Ot=Ot||Ft}return Nt?()=>{Ue(Nt)}:noop$2}function Ue(ht){if(isRouteName(ht)){const Dt=C.get(ht);Dt&&(C.delete(ht),x.splice(x.indexOf(Dt),1),Dt.children.forEach(Ue),Dt.alias.forEach(Ue))}else{const Dt=x.indexOf(ht);Dt>-1&&(x.splice(Dt,1),ht.record.name&&C.delete(ht.record.name),ht.children.forEach(Ue),ht.alias.forEach(Ue))}}function je(){return x}function Xe(ht){const Dt=findInsertionIndex(ht,x);x.splice(Dt,0,ht),ht.record.name&&!isAliasRecord(ht)&&C.set(ht.record.name,ht)}function Ye(ht,Dt){let Ot,Mt={},St,Ut;if("name"in ht&&ht.name){if(Ot=C.get(ht.name),!Ot)throw createRouterError(1,{location:ht});Ut=Ot.record.name,Mt=assign$1(paramsFromLocation(Dt.params,Ot.keys.filter(Nt=>!Nt.optional).concat(Ot.parent?Ot.parent.keys.filter(Nt=>Nt.optional):[]).map(Nt=>Nt.name)),ht.params&&paramsFromLocation(ht.params,Ot.keys.map(Nt=>Nt.name))),St=Ot.stringify(Mt)}else if(ht.path!=null)St=ht.path,Ot=x.find(Nt=>Nt.re.test(St)),Ot&&(Mt=Ot.parse(St),Ut=Ot.record.name);else{if(Ot=Dt.name?C.get(Dt.name):x.find(Nt=>Nt.re.test(Dt.path)),!Ot)throw createRouterError(1,{location:ht,currentLocation:Dt});Ut=Ot.record.name,Mt=assign$1({},Dt.params,ht.params),St=Ot.stringify(Mt)}const kt=[];let Ft=Ot;for(;Ft;)kt.unshift(Ft.record),Ft=Ft.parent;return{name:Ut,path:St,params:Mt,matched:kt,meta:mergeMetaFields(kt)}}E.forEach(ht=>Ce(ht));function et(){x.length=0,C.clear()}return{addRoute:Ce,resolve:Ye,removeRoute:Ue,clearRoutes:et,getRoutes:je,getRecordMatcher:R}}function paramsFromLocation(E,S){const x={};for(const C of S)C in E&&(x[C]=E[C]);return x}function normalizeRouteRecord(E){const S={path:E.path,redirect:E.redirect,name:E.name,meta:E.meta||{},aliasOf:E.aliasOf,beforeEnter:E.beforeEnter,props:normalizeRecordProps(E),children:E.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in E?E.components||null:E.component&&{default:E.component}};return Object.defineProperty(S,"mods",{value:{}}),S}function normalizeRecordProps(E){const S={},x=E.props||!1;if("component"in E)S.default=x;else for(const C in E.components)S[C]=typeof x=="object"?x[C]:x;return S}function isAliasRecord(E){for(;E;){if(E.record.aliasOf)return!0;E=E.parent}return!1}function mergeMetaFields(E){return E.reduce((S,x)=>assign$1(S,x.meta),{})}function mergeOptions(E,S){const x={};for(const C in E)x[C]=C in S?S[C]:E[C];return x}function findInsertionIndex(E,S){let x=0,C=S.length;for(;x!==C;){const Ce=x+C>>1;comparePathParserScore(E,S[Ce])<0?C=Ce:x=Ce+1}const R=getInsertionAncestor(E);return R&&(C=S.lastIndexOf(R,C-1)),C}function getInsertionAncestor(E){let S=E;for(;S=S.parent;)if(isMatchable(S)&&comparePathParserScore(E,S)===0)return S}function isMatchable({record:E}){return!!(E.name||E.components&&Object.keys(E.components).length||E.redirect)}function parseQuery(E){const S={};if(E===""||E==="?")return S;const C=(E[0]==="?"?E.slice(1):E).split("&");for(let R=0;R<C.length;++R){const Ce=C[R].replace(PLUS_RE," "),Ue=Ce.indexOf("="),je=decode(Ue<0?Ce:Ce.slice(0,Ue)),Xe=Ue<0?null:decode(Ce.slice(Ue+1));if(je in S){let Ye=S[je];isArray(Ye)||(Ye=S[je]=[Ye]),Ye.push(Xe)}else S[je]=Xe}return S}function stringifyQuery(E){let S="";for(let x in E){const C=E[x];if(x=encodeQueryKey(x),C==null){C!==void 0&&(S+=(S.length?"&":"")+x);continue}(isArray(C)?C.map(Ce=>Ce&&encodeQueryValue(Ce)):[C&&encodeQueryValue(C)]).forEach(Ce=>{Ce!==void 0&&(S+=(S.length?"&":"")+x,Ce!=null&&(S+="="+Ce))})}return S}function normalizeQuery(E){const S={};for(const x in E){const C=E[x];C!==void 0&&(S[x]=isArray(C)?C.map(R=>R==null?null:""+R):C==null?C:""+C)}return S}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let E=[];function S(C){return E.push(C),()=>{const R=E.indexOf(C);R>-1&&E.splice(R,1)}}function x(){E=[]}return{add:S,list:()=>E.slice(),reset:x}}function guardToPromiseFn(E,S,x,C,R,Ce=Ue=>Ue()){const Ue=C&&(C.enterCallbacks[R]=C.enterCallbacks[R]||[]);return()=>new Promise((je,Xe)=>{const Ye=Dt=>{Dt===!1?Xe(createRouterError(4,{from:x,to:S})):Dt instanceof Error?Xe(Dt):isRouteLocation(Dt)?Xe(createRouterError(2,{from:S,to:Dt})):(Ue&&C.enterCallbacks[R]===Ue&&typeof Dt=="function"&&Ue.push(Dt),je())},et=Ce(()=>E.call(C&&C.instances[R],S,x,Ye));let ht=Promise.resolve(et);E.length<3&&(ht=ht.then(Ye)),ht.catch(Dt=>Xe(Dt))})}function extractComponentsGuards(E,S,x,C,R=Ce=>Ce()){const Ce=[];for(const Ue of E)for(const je in Ue.components){let Xe=Ue.components[je];if(!(S!=="beforeRouteEnter"&&!Ue.instances[je]))if(isRouteComponent(Xe)){const et=(Xe.__vccOpts||Xe)[S];et&&Ce.push(guardToPromiseFn(et,x,C,Ue,je,R))}else{let Ye=Xe();Ce.push(()=>Ye.then(et=>{if(!et)throw new Error(`Couldn't resolve component "${je}" at "${Ue.path}"`);const ht=isESModule(et)?et.default:et;Ue.mods[je]=et,Ue.components[je]=ht;const Ot=(ht.__vccOpts||ht)[S];return Ot&&guardToPromiseFn(Ot,x,C,Ue,je,R)()}))}}return Ce}function useLink(E){const S=inject(routerKey),x=inject(routeLocationKey),C=computed(()=>{const Xe=unref(E.to);return S.resolve(Xe)}),R=computed(()=>{const{matched:Xe}=C.value,{length:Ye}=Xe,et=Xe[Ye-1],ht=x.matched;if(!et||!ht.length)return-1;const Dt=ht.findIndex(isSameRouteRecord.bind(null,et));if(Dt>-1)return Dt;const Ot=getOriginalPath(Xe[Ye-2]);return Ye>1&&getOriginalPath(et)===Ot&&ht[ht.length-1].path!==Ot?ht.findIndex(isSameRouteRecord.bind(null,Xe[Ye-2])):Dt}),Ce=computed(()=>R.value>-1&&includesParams(x.params,C.value.params)),Ue=computed(()=>R.value>-1&&R.value===x.matched.length-1&&isSameRouteLocationParams(x.params,C.value.params));function je(Xe={}){return guardEvent(Xe)?S[unref(E.replace)?"replace":"push"](unref(E.to)).catch(noop$2):Promise.resolve()}return{route:C,href:computed(()=>C.value.href),isActive:Ce,isExactActive:Ue,navigate:je}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(E,{slots:S}){const x=reactive(useLink(E)),{options:C}=inject(routerKey),R=computed(()=>({[getLinkClass(E.activeClass,C.linkActiveClass,"router-link-active")]:x.isActive,[getLinkClass(E.exactActiveClass,C.linkExactActiveClass,"router-link-exact-active")]:x.isExactActive}));return()=>{const Ce=S.default&&S.default(x);return E.custom?Ce:h$1("a",{"aria-current":x.isExactActive?E.ariaCurrentValue:null,href:x.href,onClick:x.navigate,class:R.value},Ce)}}}),RouterLink=RouterLinkImpl;function guardEvent(E){if(!(E.metaKey||E.altKey||E.ctrlKey||E.shiftKey)&&!E.defaultPrevented&&!(E.button!==void 0&&E.button!==0)){if(E.currentTarget&&E.currentTarget.getAttribute){const S=E.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(S))return}return E.preventDefault&&E.preventDefault(),!0}}function includesParams(E,S){for(const x in S){const C=S[x],R=E[x];if(typeof C=="string"){if(C!==R)return!1}else if(!isArray(R)||R.length!==C.length||C.some((Ce,Ue)=>Ce!==R[Ue]))return!1}return!0}function getOriginalPath(E){return E?E.aliasOf?E.aliasOf.path:E.path:""}const getLinkClass=(E,S,x)=>E??S??x,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(E,{attrs:S,slots:x}){const C=inject(routerViewLocationKey),R=computed(()=>E.route||C.value),Ce=inject(viewDepthKey,0),Ue=computed(()=>{let Ye=unref(Ce);const{matched:et}=R.value;let ht;for(;(ht=et[Ye])&&!ht.components;)Ye++;return Ye}),je=computed(()=>R.value.matched[Ue.value]);provide(viewDepthKey,computed(()=>Ue.value+1)),provide(matchedRouteKey,je),provide(routerViewLocationKey,R);const Xe=ref();return watch(()=>[Xe.value,je.value,E.name],([Ye,et,ht],[Dt,Ot,Mt])=>{et&&(et.instances[ht]=Ye,Ot&&Ot!==et&&Ye&&Ye===Dt&&(et.leaveGuards.size||(et.leaveGuards=Ot.leaveGuards),et.updateGuards.size||(et.updateGuards=Ot.updateGuards))),Ye&&et&&(!Ot||!isSameRouteRecord(et,Ot)||!Dt)&&(et.enterCallbacks[ht]||[]).forEach(St=>St(Ye))},{flush:"post"}),()=>{const Ye=R.value,et=E.name,ht=je.value,Dt=ht&&ht.components[et];if(!Dt)return normalizeSlot(x.default,{Component:Dt,route:Ye});const Ot=ht.props[et],Mt=Ot?Ot===!0?Ye.params:typeof Ot=="function"?Ot(Ye):Ot:null,Ut=h$1(Dt,assign$1({},Mt,S,{onVnodeUnmounted:kt=>{kt.component.isUnmounted&&(ht.instances[et]=null)},ref:Xe}));return normalizeSlot(x.default,{Component:Ut,route:Ye})||Ut}}});function normalizeSlot(E,S){if(!E)return null;const x=E(S);return x.length===1?x[0]:x}const RouterView=RouterViewImpl;function createRouter(E){const S=createRouterMatcher(E.routes,E),x=E.parseQuery||parseQuery,C=E.stringifyQuery||stringifyQuery,R=E.history,Ce=useCallbacks(),Ue=useCallbacks(),je=useCallbacks(),Xe=shallowRef(START_LOCATION_NORMALIZED);let Ye=START_LOCATION_NORMALIZED;isBrowser&&E.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const et=applyToParams.bind(null,Li=>""+Li),ht=applyToParams.bind(null,encodeParam),Dt=applyToParams.bind(null,decode);function Ot(Li,Ji){let Xi,nr;return isRouteName(Li)?(Xi=S.getRecordMatcher(Li),nr=Ji):nr=Li,S.addRoute(nr,Xi)}function Mt(Li){const Ji=S.getRecordMatcher(Li);Ji&&S.removeRoute(Ji)}function St(){return S.getRoutes().map(Li=>Li.record)}function Ut(Li){return!!S.getRecordMatcher(Li)}function kt(Li,Ji){if(Ji=assign$1({},Ji||Xe.value),typeof Li=="string"){const mi=parseURL(x,Li,Ji.path),Ai=S.resolve({path:mi.path},Ji),Hi=R.createHref(mi.fullPath);return assign$1(mi,Ai,{params:Dt(Ai.params),hash:decode(mi.hash),redirectedFrom:void 0,href:Hi})}let Xi;if(Li.path!=null)Xi=assign$1({},Li,{path:parseURL(x,Li.path,Ji.path).path});else{const mi=assign$1({},Li.params);for(const Ai in mi)mi[Ai]==null&&delete mi[Ai];Xi=assign$1({},Li,{params:ht(mi)}),Ji.params=ht(Ji.params)}const nr=S.resolve(Xi,Ji),yr=Li.hash||"";nr.params=et(Dt(nr.params));const _r=stringifyURL(C,assign$1({},Li,{hash:encodeHash(yr),path:nr.path})),gi=R.createHref(_r);return assign$1({fullPath:_r,hash:yr,query:C===stringifyQuery?normalizeQuery(Li.query):Li.query||{}},nr,{redirectedFrom:void 0,href:gi})}function Ft(Li){return typeof Li=="string"?parseURL(x,Li,Xe.value.path):assign$1({},Li)}function Nt(Li,Ji){if(Ye!==Li)return createRouterError(8,{from:Ji,to:Li})}function Gt(Li){return li(Li)}function Zt(Li){return Gt(assign$1(Ft(Li),{replace:!0}))}function ri(Li){const Ji=Li.matched[Li.matched.length-1];if(Ji&&Ji.redirect){const{redirect:Xi}=Ji;let nr=typeof Xi=="function"?Xi(Li):Xi;return typeof nr=="string"&&(nr=nr.includes("?")||nr.includes("#")?nr=Ft(nr):{path:nr},nr.params={}),assign$1({query:Li.query,hash:Li.hash,params:nr.path!=null?{}:Li.params},nr)}}function li(Li,Ji){const Xi=Ye=kt(Li),nr=Xe.value,yr=Li.state,_r=Li.force,gi=Li.replace===!0,mi=ri(Xi);if(mi)return li(assign$1(Ft(mi),{state:typeof mi=="object"?assign$1({},yr,mi.state):yr,force:_r,replace:gi}),Ji||Xi);const Ai=Xi;Ai.redirectedFrom=Ji;let Hi;return!_r&&isSameRouteLocation(C,nr,Xi)&&(Hi=createRouterError(16,{to:Ai,from:nr}),Ei(nr,nr,!0,!1)),(Hi?Promise.resolve(Hi):$i(Ai,nr)).catch(Ni=>isNavigationFailure(Ni)?isNavigationFailure(Ni,2)?Ni:Ci(Ni):si(Ni,Ai,nr)).then(Ni=>{if(Ni){if(isNavigationFailure(Ni,2))return li(assign$1({replace:gi},Ft(Ni.to),{state:typeof Ni.to=="object"?assign$1({},yr,Ni.to.state):yr,force:_r}),Ji||Ai)}else Ni=Di(Ai,nr,!0,gi,yr);return Mi(Ai,nr,Ni),Ni})}function hi(Li,Ji){const Xi=Nt(Li,Ji);return Xi?Promise.reject(Xi):Promise.resolve()}function xi(Li){const Ji=hr.values().next().value;return Ji&&typeof Ji.runWithContext=="function"?Ji.runWithContext(Li):Li()}function $i(Li,Ji){let Xi;const[nr,yr,_r]=extractChangingRecords(Li,Ji);Xi=extractComponentsGuards(nr.reverse(),"beforeRouteLeave",Li,Ji);for(const mi of nr)mi.leaveGuards.forEach(Ai=>{Xi.push(guardToPromiseFn(Ai,Li,Ji))});const gi=hi.bind(null,Li,Ji);return Xi.push(gi),cr(Xi).then(()=>{Xi=[];for(const mi of Ce.list())Xi.push(guardToPromiseFn(mi,Li,Ji));return Xi.push(gi),cr(Xi)}).then(()=>{Xi=extractComponentsGuards(yr,"beforeRouteUpdate",Li,Ji);for(const mi of yr)mi.updateGuards.forEach(Ai=>{Xi.push(guardToPromiseFn(Ai,Li,Ji))});return Xi.push(gi),cr(Xi)}).then(()=>{Xi=[];for(const mi of _r)if(mi.beforeEnter)if(isArray(mi.beforeEnter))for(const Ai of mi.beforeEnter)Xi.push(guardToPromiseFn(Ai,Li,Ji));else Xi.push(guardToPromiseFn(mi.beforeEnter,Li,Ji));return Xi.push(gi),cr(Xi)}).then(()=>(Li.matched.forEach(mi=>mi.enterCallbacks={}),Xi=extractComponentsGuards(_r,"beforeRouteEnter",Li,Ji,xi),Xi.push(gi),cr(Xi))).then(()=>{Xi=[];for(const mi of Ue.list())Xi.push(guardToPromiseFn(mi,Li,Ji));return Xi.push(gi),cr(Xi)}).catch(mi=>isNavigationFailure(mi,8)?mi:Promise.reject(mi))}function Mi(Li,Ji,Xi){je.list().forEach(nr=>xi(()=>nr(Li,Ji,Xi)))}function Di(Li,Ji,Xi,nr,yr){const _r=Nt(Li,Ji);if(_r)return _r;const gi=Ji===START_LOCATION_NORMALIZED,mi=isBrowser?history.state:{};Xi&&(nr||gi?R.replace(Li.fullPath,assign$1({scroll:gi&&mi&&mi.scroll},yr)):R.push(Li.fullPath,yr)),Xe.value=Li,Ei(Li,Ji,Xi,gi),Ci()}let ki;function ji(){ki||(ki=R.listen((Li,Ji,Xi)=>{if(!mr.listening)return;const nr=kt(Li),yr=ri(nr);if(yr){li(assign$1(yr,{replace:!0}),nr).catch(noop$2);return}Ye=nr;const _r=Xe.value;isBrowser&&saveScrollPosition(getScrollKey(_r.fullPath,Xi.delta),computeScrollPosition()),$i(nr,_r).catch(gi=>isNavigationFailure(gi,12)?gi:isNavigationFailure(gi,2)?(li(gi.to,nr).then(mi=>{isNavigationFailure(mi,20)&&!Xi.delta&&Xi.type===NavigationType.pop&&R.go(-1,!1)}).catch(noop$2),Promise.reject()):(Xi.delta&&R.go(-Xi.delta,!1),si(gi,nr,_r))).then(gi=>{gi=gi||Di(nr,_r,!1),gi&&(Xi.delta&&!isNavigationFailure(gi,8)?R.go(-Xi.delta,!1):Xi.type===NavigationType.pop&&isNavigationFailure(gi,20)&&R.go(-1,!1)),Mi(nr,_r,gi)}).catch(noop$2)}))}let Ri=useCallbacks(),ui=useCallbacks(),vi;function si(Li,Ji,Xi){Ci(Li);const nr=ui.list();return nr.length?nr.forEach(yr=>yr(Li,Ji,Xi)):console.error(Li),Promise.reject(Li)}function ai(){return vi&&Xe.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Li,Ji)=>{Ri.add([Li,Ji])})}function Ci(Li){return vi||(vi=!Li,ji(),Ri.list().forEach(([Ji,Xi])=>Li?Xi(Li):Ji()),Ri.reset()),Li}function Ei(Li,Ji,Xi,nr){const{scrollBehavior:yr}=E;if(!isBrowser||!yr)return Promise.resolve();const _r=!Xi&&getSavedScrollPosition(getScrollKey(Li.fullPath,0))||(nr||!Xi)&&history.state&&history.state.scroll||null;return nextTick().then(()=>yr(Li,Ji,_r)).then(gi=>gi&&scrollToPosition(gi)).catch(gi=>si(gi,Li,Ji))}const zi=Li=>R.go(Li);let or;const hr=new Set,mr={currentRoute:Xe,listening:!0,addRoute:Ot,removeRoute:Mt,clearRoutes:S.clearRoutes,hasRoute:Ut,getRoutes:St,resolve:kt,options:E,push:Gt,replace:Zt,go:zi,back:()=>zi(-1),forward:()=>zi(1),beforeEach:Ce.add,beforeResolve:Ue.add,afterEach:je.add,onError:ui.add,isReady:ai,install(Li){const Ji=this;Li.component("RouterLink",RouterLink),Li.component("RouterView",RouterView),Li.config.globalProperties.$router=Ji,Object.defineProperty(Li.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(Xe)}),isBrowser&&!or&&Xe.value===START_LOCATION_NORMALIZED&&(or=!0,Gt(R.location).catch(yr=>{}));const Xi={};for(const yr in START_LOCATION_NORMALIZED)Object.defineProperty(Xi,yr,{get:()=>Xe.value[yr],enumerable:!0});Li.provide(routerKey,Ji),Li.provide(routeLocationKey,shallowReactive(Xi)),Li.provide(routerViewLocationKey,Xe);const nr=Li.unmount;hr.add(Li),Li.unmount=function(){hr.delete(Li),hr.size<1&&(Ye=START_LOCATION_NORMALIZED,ki&&ki(),ki=null,Xe.value=START_LOCATION_NORMALIZED,or=!1,vi=!1),nr()}}};function cr(Li){return Li.reduce((Ji,Xi)=>Ji.then(()=>xi(Xi)),Promise.resolve())}return mr}function extractChangingRecords(E,S){const x=[],C=[],R=[],Ce=Math.max(S.matched.length,E.matched.length);for(let Ue=0;Ue<Ce;Ue++){const je=S.matched[Ue];je&&(E.matched.find(Ye=>isSameRouteRecord(Ye,je))?C.push(je):x.push(je));const Xe=E.matched[Ue];Xe&&(S.matched.find(Ye=>isSameRouteRecord(Ye,Xe))||R.push(Xe))}return[x,C,R]}class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(E){return decodeURIComponent(atob(E).replace(/(.)/g,(S,x)=>{let C=x.charCodeAt(0).toString(16).toUpperCase();return C.length<2&&(C="0"+C),"%"+C}))}function base64UrlDecode(E){let S=E.replace(/-/g,"+").replace(/_/g,"/");switch(S.length%4){case 0:break;case 2:S+="==";break;case 3:S+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(S)}catch{return atob(S)}}function jwtDecode(E,S){if(typeof E!="string")throw new InvalidTokenError("Invalid token specified: must be a string");S||(S={});const x=S.header===!0?0:1,C=E.split(".")[x];if(typeof C!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${x+1}`);let R;try{R=base64UrlDecode(C)}catch(Ce){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${x+1} (${Ce.message})`)}try{return JSON.parse(R)}catch(Ce){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${x+1} (${Ce.message})`)}}var win;typeof window<"u"?win=window:typeof commonjsGlobal<"u"?win=commonjsGlobal:typeof self<"u"?win=self:win={};var window_1=win;const window$1$1=getDefaultExportFromCjs(window_1),__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var topLevel=typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:{},minDoc=require$$0,doccy;typeof document<"u"?doccy=document:(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"],doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc));var document_1=doccy;const document$1$1=getDefaultExportFromCjs(document_1);var lib={exports:{}};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(E){for(var S=1;S<arguments.length;S++){var x=arguments[S];for(var C in x)({}).hasOwnProperty.call(x,C)&&(E[C]=x[C])}return E},_extends$3.apply(null,arguments)}const _extends$4=Object.freeze(Object.defineProperty({__proto__:null,get default(){return _extends$3}},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(_extends$4);var isFunction_1=isFunction$1,toString$1=Object.prototype.toString;function isFunction$1(E){if(!E)return!1;var S=toString$1.call(E);return S==="[object Function]"||typeof E=="function"&&S!=="[object RegExp]"||typeof window<"u"&&(E===window.setTimeout||E===window.alert||E===window.confirm||E===window.prompt)}function _createForOfIteratorHelperLoose(E,S){var x=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(x)return(x=x.call(E)).next.bind(x);if(Array.isArray(E)||(x=_unsupportedIterableToArray(E))||S){x&&(E=x);var C=0;return function(){return C>=E.length?{done:!0}:{done:!1,value:E[C++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(E,S){if(E){if(typeof E=="string")return _arrayLikeToArray(E,S);var x=Object.prototype.toString.call(E).slice(8,-1);if(x==="Object"&&E.constructor&&(x=E.constructor.name),x==="Map"||x==="Set")return Array.from(E);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return _arrayLikeToArray(E,S)}}function _arrayLikeToArray(E,S){(S==null||S>E.length)&&(S=E.length);for(var x=0,C=new Array(S);x<S;x++)C[x]=E[x];return C}var InterceptorsStorage$1=function(){function E(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var S=E.prototype;return S.getIsEnabled=function(){return this.enabled_},S.enable=function(){this.enabled_=!0},S.disable=function(){this.enabled_=!1},S.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},S.addInterceptor=function(C,R){this.typeToInterceptorsMap_.has(C)||this.typeToInterceptorsMap_.set(C,new Set);var Ce=this.typeToInterceptorsMap_.get(C);return Ce.has(R)?!1:(Ce.add(R),!0)},S.removeInterceptor=function(C,R){var Ce=this.typeToInterceptorsMap_.get(C);return Ce&&Ce.has(R)?(Ce.delete(R),!0):!1},S.clearInterceptorsByType=function(C){var R=this.typeToInterceptorsMap_.get(C);return R?(this.typeToInterceptorsMap_.delete(C),this.typeToInterceptorsMap_.set(C,new Set),!0):!1},S.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},S.getForType=function(C){return this.typeToInterceptorsMap_.get(C)||new Set},S.execute=function(C,R){for(var Ce=this.getForType(C),Ue=_createForOfIteratorHelperLoose(Ce),je;!(je=Ue()).done;){var Xe=je.value;try{R=Xe(R)}catch{}}return R},E}(),interceptors=InterceptorsStorage$1,RetryManager$1=function(){function E(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var S=E.prototype;return S.getIsEnabled=function(){return this.enabled_},S.enable=function(){this.enabled_=!0},S.disable=function(){this.enabled_=!1},S.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},S.getMaxAttempts=function(){return this.maxAttempts_},S.setMaxAttempts=function(C){this.maxAttempts_=C},S.getDelayFactor=function(){return this.delayFactor_},S.setDelayFactor=function(C){this.delayFactor_=C},S.getFuzzFactor=function(){return this.fuzzFactor_},S.setFuzzFactor=function(C){this.fuzzFactor_=C},S.getInitialDelay=function(){return this.initialDelay_},S.setInitialDelay=function(C){this.initialDelay_=C},S.createRetry=function(C){var R=C===void 0?{}:C,Ce=R.maxAttempts,Ue=R.delayFactor,je=R.fuzzFactor,Xe=R.initialDelay;return new Retry({maxAttempts:Ce||this.maxAttempts_,delayFactor:Ue||this.delayFactor_,fuzzFactor:je||this.fuzzFactor_,initialDelay:Xe||this.initialDelay_})},E}(),Retry=function(){function E(x){this.maxAttempts_=x.maxAttempts,this.delayFactor_=x.delayFactor,this.fuzzFactor_=x.fuzzFactor,this.currentDelay_=x.initialDelay,this.currentAttempt_=1}var S=E.prototype;return S.moveToNextAttempt=function(){this.currentAttempt_++;var C=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+C},S.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},S.getCurrentDelay=function(){return this.currentDelay_},S.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},S.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},S.getCurrentFuzzedDelay=function(){var C=this.getCurrentMinPossibleDelay(),R=this.getCurrentMaxPossibleDelay();return C+Math.random()*(R-C)},E}(),retry=RetryManager$1,window$3=window_1,httpResponseHandler=function(S,x){return x===void 0&&(x=!1),function(C,R,Ce){if(C){S(C);return}if(R.statusCode>=400&&R.statusCode<=599){var Ue=Ce;if(x)if(window$3.TextDecoder){var je=getCharset(R.headers&&R.headers["content-type"]);try{Ue=new TextDecoder(je).decode(Ce)}catch{}}else Ue=String.fromCharCode.apply(null,new Uint8Array(Ce));S({cause:Ue});return}S(null,Ce)}};function getCharset(E){return E===void 0&&(E=""),E.toLowerCase().split(";").reduce(function(S,x){var C=x.split("="),R=C[0],Ce=C[1];return R.trim()==="charset"?Ce.trim():S},"utf-8")}var httpHandler=httpResponseHandler,window$2=window_1,_extends$2=require$$1,isFunction=isFunction_1,InterceptorsStorage=interceptors,RetryManager=retry;createXHR.httpHandler=httpHandler;createXHR.requestInterceptorsStorage=new InterceptorsStorage;createXHR.responseInterceptorsStorage=new InterceptorsStorage;createXHR.retryManager=new RetryManager;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var parseHeaders=function(S){var x={};return S&&S.trim().split(`
`).forEach(function(C){var R=C.indexOf(":"),Ce=C.slice(0,R).trim().toLowerCase(),Ue=C.slice(R+1).trim();typeof x[Ce]>"u"?x[Ce]=Ue:Array.isArray(x[Ce])?x[Ce].push(Ue):x[Ce]=[x[Ce],Ue]}),x};lib.exports=createXHR;lib.exports.default=createXHR;createXHR.XMLHttpRequest=window$2.XMLHttpRequest||noop$1;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window$2.XDomainRequest;forEachArray(["get","put","post","patch","head","delete"],function(E){createXHR[E==="delete"?"del":E]=function(S,x,C){return x=initParams(S,x,C),x.method=E.toUpperCase(),_createXHR(x)}});function forEachArray(E,S){for(var x=0;x<E.length;x++)S(E[x])}function isEmpty(E){for(var S in E)if(E.hasOwnProperty(S))return!1;return!0}function initParams(E,S,x){var C=E;return isFunction(S)?(x=S,typeof E=="string"&&(C={uri:E})):C=_extends$2({},S,{uri:E}),C.callback=x,C}function createXHR(E,S,x){return S=initParams(E,S,x),_createXHR(S)}function _createXHR(E){if(typeof E.callback>"u")throw new Error("callback argument missing");if(E.requestType&&createXHR.requestInterceptorsStorage.getIsEnabled()){var S={uri:E.uri||E.url,headers:E.headers||{},body:E.body,metadata:E.metadata||{},retry:E.retry,timeout:E.timeout},x=createXHR.requestInterceptorsStorage.execute(E.requestType,S);E.uri=x.uri,E.headers=x.headers,E.body=x.body,E.metadata=x.metadata,E.retry=x.retry,E.timeout=x.timeout}var C=!1,R=function(Zt,ri,li){C||(C=!0,E.callback(Zt,ri,li))};function Ce(){Ye.readyState===4&&!createXHR.responseInterceptorsStorage.getIsEnabled()&&setTimeout(Xe,0)}function Ue(){var Gt=void 0;if(Ye.response?Gt=Ye.response:Gt=Ye.responseText||getXml(Ye),kt)try{Gt=JSON.parse(Gt)}catch{}return Gt}function je(Gt){if(clearTimeout(Ft),clearTimeout(E.retryTimeout),Gt instanceof Error||(Gt=new Error(""+(Gt||"Unknown XMLHttpRequest Error"))),Gt.statusCode=0,!ht&&createXHR.retryManager.getIsEnabled()&&E.retry&&E.retry.shouldRetry()){E.retryTimeout=setTimeout(function(){E.retry.moveToNextAttempt(),E.xhr=Ye,_createXHR(E)},E.retry.getCurrentFuzzedDelay());return}if(E.requestType&&createXHR.responseInterceptorsStorage.getIsEnabled()){var Zt={headers:Nt.headers||{},body:Nt.body,responseUrl:Ye.responseURL,responseType:Ye.responseType},ri=createXHR.responseInterceptorsStorage.execute(E.requestType,Zt);Nt.body=ri.body,Nt.headers=ri.headers}return R(Gt,Nt)}function Xe(){if(!ht){var Gt;clearTimeout(Ft),clearTimeout(E.retryTimeout),E.useXDR&&Ye.status===void 0?Gt=200:Gt=Ye.status===1223?204:Ye.status;var Zt=Nt,ri=null;if(Gt!==0?(Zt={body:Ue(),statusCode:Gt,method:Ot,headers:{},url:Dt,rawRequest:Ye},Ye.getAllResponseHeaders&&(Zt.headers=parseHeaders(Ye.getAllResponseHeaders()))):ri=new Error("Internal XMLHttpRequest Error"),E.requestType&&createXHR.responseInterceptorsStorage.getIsEnabled()){var li={headers:Zt.headers||{},body:Zt.body,responseUrl:Ye.responseURL,responseType:Ye.responseType},hi=createXHR.responseInterceptorsStorage.execute(E.requestType,li);Zt.body=hi.body,Zt.headers=hi.headers}return R(ri,Zt,Zt.body)}}var Ye=E.xhr||null;Ye||(E.cors||E.useXDR?Ye=new createXHR.XDomainRequest:Ye=new createXHR.XMLHttpRequest);var et,ht,Dt=Ye.url=E.uri||E.url,Ot=Ye.method=E.method||"GET",Mt=E.body||E.data,St=Ye.headers=E.headers||{},Ut=!!E.sync,kt=!1,Ft,Nt={body:void 0,headers:{},statusCode:0,method:Ot,url:Dt,rawRequest:Ye};if("json"in E&&E.json!==!1&&(kt=!0,St.accept||St.Accept||(St.Accept="application/json"),Ot!=="GET"&&Ot!=="HEAD"&&(St["content-type"]||St["Content-Type"]||(St["Content-Type"]="application/json"),Mt=JSON.stringify(E.json===!0?Mt:E.json))),Ye.onreadystatechange=Ce,Ye.onload=Xe,Ye.onerror=je,Ye.onprogress=function(){},Ye.onabort=function(){ht=!0,clearTimeout(E.retryTimeout)},Ye.ontimeout=je,Ye.open(Ot,Dt,!Ut,E.username,E.password),Ut||(Ye.withCredentials=!!E.withCredentials),!Ut&&E.timeout>0&&(Ft=setTimeout(function(){if(!ht){ht=!0,Ye.abort("timeout");var Gt=new Error("XMLHttpRequest timeout");Gt.code="ETIMEDOUT",je(Gt)}},E.timeout)),Ye.setRequestHeader)for(et in St)St.hasOwnProperty(et)&&Ye.setRequestHeader(et,St[et]);else if(E.headers&&!isEmpty(E.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in E&&(Ye.responseType=E.responseType),"beforeSend"in E&&typeof E.beforeSend=="function"&&E.beforeSend(Ye),Ye.send(Mt||null),Ye}function getXml(E){try{if(E.responseType==="document")return E.responseXML;var S=E.responseXML&&E.responseXML.documentElement.nodeName==="parsererror";if(E.responseType===""&&!S)return E.responseXML}catch{}return null}function noop$1(){}var libExports=lib.exports;const XHR=getDefaultExportFromCjs(libExports);var browserIndex={exports:{}},document$1=document_1,_objCreate=Object.create||function(){function E(){}return function(S){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return E.prototype=S,new E}}();function ParsingError(E,S){this.name="ParsingError",this.code=E.code,this.message=S||E.message}ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(E){function S(C,R,Ce,Ue){return(C|0)*3600+(R|0)*60+(Ce|0)+(Ue|0)/1e3}var x=E.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return x?x[3]?S(x[1],x[2],x[3].replace(":",""),x[4]):x[1]>59?S(x[1],x[2],0,x[4]):S(0,x[1],x[2],x[4]):null}function Settings(){this.values=_objCreate(null)}Settings.prototype={set:function(E,S){!this.get(E)&&S!==""&&(this.values[E]=S)},get:function(E,S,x){return x?this.has(E)?this.values[E]:S[x]:this.has(E)?this.values[E]:S},has:function(E){return E in this.values},alt:function(E,S,x){for(var C=0;C<x.length;++C)if(S===x[C]){this.set(E,S);break}},integer:function(E,S){/^-?\d+$/.test(S)&&this.set(E,parseInt(S,10))},percent:function(E,S){return S.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(S=parseFloat(S),S>=0&&S<=100)?(this.set(E,S),!0):!1}};function parseOptions(E,S,x,C){var R=C?E.split(C):[E];for(var Ce in R)if(typeof R[Ce]=="string"){var Ue=R[Ce].split(x);if(Ue.length===2){var je=Ue[0].trim(),Xe=Ue[1].trim();S(je,Xe)}}}function parseCue(E,S,x){var C=E;function R(){var je=parseTimeStamp(E);if(je===null)throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+C);return E=E.replace(/^[^\sa-zA-Z-]+/,""),je}function Ce(je,Xe){var Ye=new Settings;parseOptions(je,function(et,ht){switch(et){case"region":for(var Dt=x.length-1;Dt>=0;Dt--)if(x[Dt].id===ht){Ye.set(et,x[Dt].region);break}break;case"vertical":Ye.alt(et,ht,["rl","lr"]);break;case"line":var Ot=ht.split(","),Mt=Ot[0];Ye.integer(et,Mt),Ye.percent(et,Mt)&&Ye.set("snapToLines",!1),Ye.alt(et,Mt,["auto"]),Ot.length===2&&Ye.alt("lineAlign",Ot[1],["start","center","end"]);break;case"position":Ot=ht.split(","),Ye.percent(et,Ot[0]),Ot.length===2&&Ye.alt("positionAlign",Ot[1],["start","center","end"]);break;case"size":Ye.percent(et,ht);break;case"align":Ye.alt(et,ht,["start","center","end","left","right"]);break}},/:/,/\s/),Xe.region=Ye.get("region",null),Xe.vertical=Ye.get("vertical","");try{Xe.line=Ye.get("line","auto")}catch{}Xe.lineAlign=Ye.get("lineAlign","start"),Xe.snapToLines=Ye.get("snapToLines",!0),Xe.size=Ye.get("size",100);try{Xe.align=Ye.get("align","center")}catch{Xe.align=Ye.get("align","middle")}try{Xe.position=Ye.get("position","auto")}catch{Xe.position=Ye.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Xe.align)}Xe.positionAlign=Ye.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Xe.align)}function Ue(){E=E.replace(/^\s+/,"")}if(Ue(),S.startTime=R(),Ue(),E.substr(0,3)!=="-->")throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+C);E=E.substr(3),Ue(),S.endTime=R(),Ue(),Ce(E,S)}var TEXTAREA_ELEMENT=document$1.createElement&&document$1.createElement("textarea"),TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},DEFAULT_COLOR_CLASS={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},TAG_ANNOTATION={v:"title",lang:"lang"},NEEDS_PARENT={rt:"ruby"};function parseContent(E,S){function x(){if(!S)return null;function Mt(Ut){return S=S.substr(Ut.length),Ut}var St=S.match(/^([^<]*)(<[^>]*>?)?/);return Mt(St[1]?St[1]:St[2])}function C(Mt){return TEXTAREA_ELEMENT.innerHTML=Mt,Mt=TEXTAREA_ELEMENT.textContent,TEXTAREA_ELEMENT.textContent="",Mt}function R(Mt,St){return!NEEDS_PARENT[St.localName]||NEEDS_PARENT[St.localName]===Mt.localName}function Ce(Mt,St){var Ut=TAG_NAME[Mt];if(!Ut)return null;var kt=E.document.createElement(Ut),Ft=TAG_ANNOTATION[Mt];return Ft&&St&&(kt[Ft]=St.trim()),kt}for(var Ue=E.document.createElement("div"),je=Ue,Xe,Ye=[];(Xe=x())!==null;){if(Xe[0]==="<"){if(Xe[1]==="/"){Ye.length&&Ye[Ye.length-1]===Xe.substr(2).replace(">","")&&(Ye.pop(),je=je.parentNode);continue}var et=parseTimeStamp(Xe.substr(1,Xe.length-2)),ht;if(et){ht=E.document.createProcessingInstruction("timestamp",et),je.appendChild(ht);continue}var Dt=Xe.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Dt||(ht=Ce(Dt[1],Dt[3]),!ht)||!R(je,ht))continue;if(Dt[2]){var Ot=Dt[2].split(".");Ot.forEach(function(Mt){var St=/^bg_/.test(Mt),Ut=St?Mt.slice(3):Mt;if(DEFAULT_COLOR_CLASS.hasOwnProperty(Ut)){var kt=St?"background-color":"color",Ft=DEFAULT_COLOR_CLASS[Ut];ht.style[kt]=Ft}}),ht.className=Ot.join(" ")}Ye.push(Dt[1]),je.appendChild(ht),je=ht;continue}je.appendChild(E.document.createTextNode(C(Xe)))}return Ue}var strongRTLRanges=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(E){for(var S=0;S<strongRTLRanges.length;S++){var x=strongRTLRanges[S];if(E>=x[0]&&E<=x[1])return!0}return!1}function determineBidi(E){var S=[],x="",C;if(!E||!E.childNodes)return"ltr";function R(je,Xe){for(var Ye=Xe.childNodes.length-1;Ye>=0;Ye--)je.push(Xe.childNodes[Ye])}function Ce(je){if(!je||!je.length)return null;var Xe=je.pop(),Ye=Xe.textContent||Xe.innerText;if(Ye){var et=Ye.match(/^.*(\n|\r)/);return et?(je.length=0,et[0]):Ye}if(Xe.tagName==="ruby")return Ce(je);if(Xe.childNodes)return R(je,Xe),Ce(je)}for(R(S,E);x=Ce(S);)for(var Ue=0;Ue<x.length;Ue++)if(C=x.charCodeAt(Ue),isStrongRTLChar(C))return"rtl";return"ltr"}function computeLinePos(E){if(typeof E.line=="number"&&(E.snapToLines||E.line>=0&&E.line<=100))return E.line;if(!E.track||!E.track.textTrackList||!E.track.textTrackList.mediaElement)return-1;for(var S=E.track,x=S.textTrackList,C=0,R=0;R<x.length&&x[R]!==S;R++)x[R].mode==="showing"&&C++;return++C*-1}function StyleBox(){}StyleBox.prototype.applyStyles=function(E,S){S=S||this.div;for(var x in E)E.hasOwnProperty(x)&&(S.style[x]=E[x])};StyleBox.prototype.formatStyle=function(E,S){return E===0?0:E+S};function CueStyleBox(E,S,x){StyleBox.call(this),this.cue=S,this.cueDiv=parseContent(E,S.text);var C={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:S.vertical===""?"horizontal-tb":S.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(C,this.cueDiv),this.div=E.document.createElement("div"),C={direction:determineBidi(this.cueDiv),writingMode:S.vertical===""?"horizontal-tb":S.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:S.align==="middle"?"center":S.align,font:x.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(C),this.div.appendChild(this.cueDiv);var R=0;switch(S.positionAlign){case"start":case"line-left":R=S.position;break;case"center":R=S.position-S.size/2;break;case"end":case"line-right":R=S.position-S.size;break}S.vertical===""?this.applyStyles({left:this.formatStyle(R,"%"),width:this.formatStyle(S.size,"%")}):this.applyStyles({top:this.formatStyle(R,"%"),height:this.formatStyle(S.size,"%")}),this.move=function(Ce){this.applyStyles({top:this.formatStyle(Ce.top,"px"),bottom:this.formatStyle(Ce.bottom,"px"),left:this.formatStyle(Ce.left,"px"),right:this.formatStyle(Ce.right,"px"),height:this.formatStyle(Ce.height,"px"),width:this.formatStyle(Ce.width,"px")})}}CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(E){var S,x,C,R;if(E.div){x=E.div.offsetHeight,C=E.div.offsetWidth,R=E.div.offsetTop;var Ce=(Ce=E.div.childNodes)&&(Ce=Ce[0])&&Ce.getClientRects&&Ce.getClientRects();E=E.div.getBoundingClientRect(),S=Ce?Math.max(Ce[0]&&Ce[0].height||0,E.height/Ce.length):0}this.left=E.left,this.right=E.right,this.top=E.top||R,this.height=E.height||x,this.bottom=E.bottom||R+(E.height||x),this.width=E.width||C,this.lineHeight=S!==void 0?S:E.lineHeight}BoxPosition.prototype.move=function(E,S){switch(S=S!==void 0?S:this.lineHeight,E){case"+x":this.left+=S,this.right+=S;break;case"-x":this.left-=S,this.right-=S;break;case"+y":this.top+=S,this.bottom+=S;break;case"-y":this.top-=S,this.bottom-=S;break}};BoxPosition.prototype.overlaps=function(E){return this.left<E.right&&this.right>E.left&&this.top<E.bottom&&this.bottom>E.top};BoxPosition.prototype.overlapsAny=function(E){for(var S=0;S<E.length;S++)if(this.overlaps(E[S]))return!0;return!1};BoxPosition.prototype.within=function(E){return this.top>=E.top&&this.bottom<=E.bottom&&this.left>=E.left&&this.right<=E.right};BoxPosition.prototype.overlapsOppositeAxis=function(E,S){switch(S){case"+x":return this.left<E.left;case"-x":return this.right>E.right;case"+y":return this.top<E.top;case"-y":return this.bottom>E.bottom}};BoxPosition.prototype.intersectPercentage=function(E){var S=Math.max(0,Math.min(this.right,E.right)-Math.max(this.left,E.left)),x=Math.max(0,Math.min(this.bottom,E.bottom)-Math.max(this.top,E.top)),C=S*x;return C/(this.height*this.width)};BoxPosition.prototype.toCSSCompatValues=function(E){return{top:this.top-E.top,bottom:E.bottom-this.bottom,left:this.left-E.left,right:E.right-this.right,height:this.height,width:this.width}};BoxPosition.getSimpleBoxPosition=function(E){var S=E.div?E.div.offsetHeight:E.tagName?E.offsetHeight:0,x=E.div?E.div.offsetWidth:E.tagName?E.offsetWidth:0,C=E.div?E.div.offsetTop:E.tagName?E.offsetTop:0;E=E.div?E.div.getBoundingClientRect():E.tagName?E.getBoundingClientRect():E;var R={left:E.left,right:E.right,top:E.top||C,height:E.height||S,bottom:E.bottom||C+(E.height||S),width:E.width||x};return R};function moveBoxToLinePosition(E,S,x,C){function R(Ut,kt){for(var Ft,Nt=new BoxPosition(Ut),Gt=1,Zt=0;Zt<kt.length;Zt++){for(;Ut.overlapsOppositeAxis(x,kt[Zt])||Ut.within(x)&&Ut.overlapsAny(C);)Ut.move(kt[Zt]);if(Ut.within(x))return Ut;var ri=Ut.intersectPercentage(x);Gt>ri&&(Ft=new BoxPosition(Ut),Gt=ri),Ut=new BoxPosition(Nt)}return Ft||Nt}var Ce=new BoxPosition(S),Ue=S.cue,je=computeLinePos(Ue),Xe=[];if(Ue.snapToLines){var Ye;switch(Ue.vertical){case"":Xe=["+y","-y"],Ye="height";break;case"rl":Xe=["+x","-x"],Ye="width";break;case"lr":Xe=["-x","+x"],Ye="width";break}var et=Ce.lineHeight,ht=et*Math.round(je),Dt=x[Ye]+et,Ot=Xe[0];Math.abs(ht)>Dt&&(ht=ht<0?-1:1,ht*=Math.ceil(Dt/et)*et),je<0&&(ht+=Ue.vertical===""?x.height:x.width,Xe=Xe.reverse()),Ce.move(Ot,ht)}else{var Mt=Ce.lineHeight/x.height*100;switch(Ue.lineAlign){case"center":je-=Mt/2;break;case"end":je-=Mt;break}switch(Ue.vertical){case"":S.applyStyles({top:S.formatStyle(je,"%")});break;case"rl":S.applyStyles({left:S.formatStyle(je,"%")});break;case"lr":S.applyStyles({right:S.formatStyle(je,"%")});break}Xe=["+y","-x","+x","-y"],Ce=new BoxPosition(S)}var St=R(Ce,Xe);S.move(St.toCSSCompatValues(x))}function WebVTT$1(){}WebVTT$1.StringDecoder=function(){return{decode:function(E){if(!E)return"";if(typeof E!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(E))}}};WebVTT$1.convertCueToDOMTree=function(E,S){return!E||!S?null:parseContent(E,S)};var FONT_SIZE_PERCENT=.05,FONT_STYLE="sans-serif",CUE_BACKGROUND_PADDING="1.5%";WebVTT$1.processCues=function(E,S,x){if(!E||!S||!x)return null;for(;x.firstChild;)x.removeChild(x.firstChild);var C=E.document.createElement("div");C.style.position="absolute",C.style.left="0",C.style.right="0",C.style.top="0",C.style.bottom="0",C.style.margin=CUE_BACKGROUND_PADDING,x.appendChild(C);function R(et){for(var ht=0;ht<et.length;ht++)if(et[ht].hasBeenReset||!et[ht].displayState)return!0;return!1}if(!R(S)){for(var Ce=0;Ce<S.length;Ce++)C.appendChild(S[Ce].displayState);return}var Ue=[],je=BoxPosition.getSimpleBoxPosition(C),Xe=Math.round(je.height*FONT_SIZE_PERCENT*100)/100,Ye={font:Xe+"px "+FONT_STYLE};(function(){for(var et,ht,Dt=0;Dt<S.length;Dt++)ht=S[Dt],et=new CueStyleBox(E,ht,Ye),C.appendChild(et.div),moveBoxToLinePosition(E,et,je,Ue),ht.displayState=et.div,Ue.push(BoxPosition.getSimpleBoxPosition(et))})()};WebVTT$1.Parser=function(E,S,x){x||(x=S,S={}),S||(S={}),this.window=E,this.vttjs=S,this.state="INITIAL",this.buffer="",this.decoder=x||new TextDecoder("utf8"),this.regionList=[]};WebVTT$1.Parser.prototype={reportOrThrowError:function(E){if(E instanceof ParsingError)this.onparsingerror&&this.onparsingerror(E);else throw E},parse:function(E){var S=this;E&&(S.buffer+=S.decoder.decode(E,{stream:!0}));function x(){for(var et=S.buffer,ht=0;ht<et.length&&et[ht]!=="\r"&&et[ht]!==`
`;)++ht;var Dt=et.substr(0,ht);return et[ht]==="\r"&&++ht,et[ht]===`
`&&++ht,S.buffer=et.substr(ht),Dt}function C(et){var ht=new Settings;if(parseOptions(et,function(Ot,Mt){switch(Ot){case"id":ht.set(Ot,Mt);break;case"width":ht.percent(Ot,Mt);break;case"lines":ht.integer(Ot,Mt);break;case"regionanchor":case"viewportanchor":var St=Mt.split(",");if(St.length!==2)break;var Ut=new Settings;if(Ut.percent("x",St[0]),Ut.percent("y",St[1]),!Ut.has("x")||!Ut.has("y"))break;ht.set(Ot+"X",Ut.get("x")),ht.set(Ot+"Y",Ut.get("y"));break;case"scroll":ht.alt(Ot,Mt,["up"]);break}},/=/,/\s/),ht.has("id")){var Dt=new(S.vttjs.VTTRegion||S.window.VTTRegion);Dt.width=ht.get("width",100),Dt.lines=ht.get("lines",3),Dt.regionAnchorX=ht.get("regionanchorX",0),Dt.regionAnchorY=ht.get("regionanchorY",100),Dt.viewportAnchorX=ht.get("viewportanchorX",0),Dt.viewportAnchorY=ht.get("viewportanchorY",100),Dt.scroll=ht.get("scroll",""),S.onregion&&S.onregion(Dt),S.regionList.push({id:ht.get("id"),region:Dt})}}function R(et){var ht=new Settings;parseOptions(et,function(Dt,Ot){switch(Dt){case"MPEGT":ht.integer(Dt+"S",Ot);break;case"LOCA":ht.set(Dt+"L",parseTimeStamp(Ot));break}},/[^\d]:/,/,/),S.ontimestampmap&&S.ontimestampmap({MPEGTS:ht.get("MPEGTS"),LOCAL:ht.get("LOCAL")})}function Ce(et){et.match(/X-TIMESTAMP-MAP/)?parseOptions(et,function(ht,Dt){switch(ht){case"X-TIMESTAMP-MAP":R(Dt);break}},/=/):parseOptions(et,function(ht,Dt){switch(ht){case"Region":C(Dt);break}},/:/)}try{var Ue;if(S.state==="INITIAL"){if(!/\r\n|\n/.test(S.buffer))return this;Ue=x();var je=Ue.match(/^WEBVTT([ \t].*)?$/);if(!je||!je[0])throw new ParsingError(ParsingError.Errors.BadSignature);S.state="HEADER"}for(var Xe=!1;S.buffer;){if(!/\r\n|\n/.test(S.buffer))return this;switch(Xe?Xe=!1:Ue=x(),S.state){case"HEADER":/:/.test(Ue)?Ce(Ue):Ue||(S.state="ID");continue;case"NOTE":Ue||(S.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Ue)){S.state="NOTE";break}if(!Ue)continue;S.cue=new(S.vttjs.VTTCue||S.window.VTTCue)(0,0,"");try{S.cue.align="center"}catch{S.cue.align="middle"}if(S.state="CUE",Ue.indexOf("-->")===-1){S.cue.id=Ue;continue}case"CUE":try{parseCue(Ue,S.cue,S.regionList)}catch(et){S.reportOrThrowError(et),S.cue=null,S.state="BADCUE";continue}S.state="CUETEXT";continue;case"CUETEXT":var Ye=Ue.indexOf("-->")!==-1;if(!Ue||Ye&&(Xe=!0)){S.oncue&&S.oncue(S.cue),S.cue=null,S.state="ID";continue}S.cue.text&&(S.cue.text+=`
`),S.cue.text+=Ue.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":Ue||(S.state="ID");continue}}}catch(et){S.reportOrThrowError(et),S.state==="CUETEXT"&&S.cue&&S.oncue&&S.oncue(S.cue),S.cue=null,S.state=S.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var E=this;try{if(E.buffer+=E.decoder.decode(),(E.cue||E.state==="HEADER")&&(E.buffer+=`

`,E.parse()),E.state==="INITIAL")throw new ParsingError(ParsingError.Errors.BadSignature)}catch(S){E.reportOrThrowError(S)}return E.onflush&&E.onflush(),this}};var vtt$1=WebVTT$1,autoKeyword="auto",directionSetting={"":1,lr:1,rl:1},alignSetting={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function findDirectionSetting(E){if(typeof E!="string")return!1;var S=directionSetting[E.toLowerCase()];return S?E.toLowerCase():!1}function findAlignSetting(E){if(typeof E!="string")return!1;var S=alignSetting[E.toLowerCase()];return S?E.toLowerCase():!1}function VTTCue(E,S,x){this.hasBeenReset=!1;var C="",R=!1,Ce=E,Ue=S,je=x,Xe=null,Ye="",et=!0,ht="auto",Dt="start",Ot="auto",Mt="auto",St=100,Ut="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return C},set:function(kt){C=""+kt}},pauseOnExit:{enumerable:!0,get:function(){return R},set:function(kt){R=!!kt}},startTime:{enumerable:!0,get:function(){return Ce},set:function(kt){if(typeof kt!="number")throw new TypeError("Start time must be set to a number.");Ce=kt,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Ue},set:function(kt){if(typeof kt!="number")throw new TypeError("End time must be set to a number.");Ue=kt,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return je},set:function(kt){je=""+kt,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Xe},set:function(kt){Xe=kt,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Ye},set:function(kt){var Ft=findDirectionSetting(kt);if(Ft===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Ye=Ft,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return et},set:function(kt){et=!!kt,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return ht},set:function(kt){if(typeof kt!="number"&&kt!==autoKeyword)throw new SyntaxError("Line: an invalid number or illegal string was specified.");ht=kt,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Dt},set:function(kt){var Ft=findAlignSetting(kt);Ft?(Dt=Ft,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Ot},set:function(kt){if(kt<0||kt>100)throw new Error("Position must be between 0 and 100.");Ot=kt,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Mt},set:function(kt){var Ft=findAlignSetting(kt);Ft?(Mt=Ft,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return St},set:function(kt){if(kt<0||kt>100)throw new Error("Size must be between 0 and 100.");St=kt,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ut},set:function(kt){var Ft=findAlignSetting(kt);if(!Ft)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ut=Ft,this.hasBeenReset=!0}}}),this.displayState=void 0}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var vttcue=VTTCue,scrollSetting={"":!0,up:!0};function findScrollSetting(E){if(typeof E!="string")return!1;var S=scrollSetting[E.toLowerCase()];return S?E.toLowerCase():!1}function isValidPercentValue(E){return typeof E=="number"&&E>=0&&E<=100}function VTTRegion(){var E=100,S=3,x=0,C=100,R=0,Ce=100,Ue="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return E},set:function(je){if(!isValidPercentValue(je))throw new Error("Width must be between 0 and 100.");E=je}},lines:{enumerable:!0,get:function(){return S},set:function(je){if(typeof je!="number")throw new TypeError("Lines must be set to a number.");S=je}},regionAnchorY:{enumerable:!0,get:function(){return C},set:function(je){if(!isValidPercentValue(je))throw new Error("RegionAnchorX must be between 0 and 100.");C=je}},regionAnchorX:{enumerable:!0,get:function(){return x},set:function(je){if(!isValidPercentValue(je))throw new Error("RegionAnchorY must be between 0 and 100.");x=je}},viewportAnchorY:{enumerable:!0,get:function(){return Ce},set:function(je){if(!isValidPercentValue(je))throw new Error("ViewportAnchorY must be between 0 and 100.");Ce=je}},viewportAnchorX:{enumerable:!0,get:function(){return R},set:function(je){if(!isValidPercentValue(je))throw new Error("ViewportAnchorX must be between 0 and 100.");R=je}},scroll:{enumerable:!0,get:function(){return Ue},set:function(je){var Xe=findScrollSetting(je);Xe===!1?console.warn("Scroll: an invalid or illegal string was specified."):Ue=Xe}}})}var vttregion=VTTRegion,window$1=window_1,vttjs=browserIndex.exports={WebVTT:vtt$1,VTTCue:vttcue,VTTRegion:vttregion};window$1.vttjs=vttjs;window$1.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue,regionShim=vttjs.VTTRegion,nativeVTTCue=window$1.VTTCue,nativeVTTRegion=window$1.VTTRegion;vttjs.shim=function(){window$1.VTTCue=cueShim,window$1.VTTRegion=regionShim};vttjs.restore=function(){window$1.VTTCue=nativeVTTCue,window$1.VTTRegion=nativeVTTRegion};window$1.VTTCue||vttjs.shim();var browserIndexExports=browserIndex.exports;const vtt=getDefaultExportFromCjs(browserIndexExports);var DEFAULT_LOCATION="https://example.com",resolveUrl$1=function(S,x){if(/^[a-z]+:/i.test(x))return x;/^data:/.test(S)&&(S=window$1$1.location&&window$1$1.location.href||"");var C=/^\/\//.test(S),R=!window$1$1.location&&!/\/\//i.test(S);S=new window$1$1.URL(S,window$1$1.location||DEFAULT_LOCATION);var Ce=new URL(x,S);return R?Ce.href.slice(DEFAULT_LOCATION.length):C?Ce.href.slice(Ce.protocol.length):Ce.href},Stream=function(){function E(){this.listeners={}}var S=E.prototype;return S.on=function(C,R){this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push(R)},S.off=function(C,R){if(!this.listeners[C])return!1;var Ce=this.listeners[C].indexOf(R);return this.listeners[C]=this.listeners[C].slice(0),this.listeners[C].splice(Ce,1),Ce>-1},S.trigger=function(C){var R=this.listeners[C];if(R)if(arguments.length===2)for(var Ce=R.length,Ue=0;Ue<Ce;++Ue)R[Ue].call(this,arguments[1]);else for(var je=Array.prototype.slice.call(arguments,1),Xe=R.length,Ye=0;Ye<Xe;++Ye)R[Ye].apply(this,je)},S.dispose=function(){this.listeners={}},S.pipe=function(C){this.on("data",function(R){C.push(R)})},E}(),atob$1=function(S){return window$1$1.atob?window$1$1.atob(S):Buffer.from(S,"base64").toString("binary")};function decodeB64ToUint8Array(E){for(var S=atob$1(E),x=new Uint8Array(S.length),C=0;C<S.length;C++)x[C]=S.charCodeAt(C);return x}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class LineStream extends Stream{constructor(){super(),this.buffer=""}push(S){let x;for(this.buffer+=S,x=this.buffer.indexOf(`
`);x>-1;x=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,x)),this.buffer=this.buffer.substring(x+1)}}const TAB="	",parseByterange=function(E){const S=/([0-9.]*)?@?([0-9.]*)?/.exec(E||""),x={};return S[1]&&(x.length=parseInt(S[1],10)),S[2]&&(x.offset=parseInt(S[2],10)),x},attributeSeparator=function(){const x="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+x+")")},parseAttributes$1=function(E){const S={};if(!E)return S;const x=E.split(attributeSeparator());let C=x.length,R;for(;C--;)x[C]!==""&&(R=/([^=]*)=(.*)/.exec(x[C]).slice(1),R[0]=R[0].replace(/^\s+|\s+$/g,""),R[1]=R[1].replace(/^\s+|\s+$/g,""),R[1]=R[1].replace(/^['"](.*)['"]$/g,"$1"),S[R[0]]=R[1]);return S},parseResolution=E=>{const S=E.split("x"),x={};return S[0]&&(x.width=parseInt(S[0],10)),S[1]&&(x.height=parseInt(S[1],10)),x};class ParseStream extends Stream{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(S){let x,C;if(S=S.trim(),S.length===0)return;if(S[0]!=="#"){this.trigger("data",{type:"uri",uri:S});return}this.tagMappers.reduce((Ce,Ue)=>{const je=Ue(S);return je===S?Ce:Ce.concat([je])},[S]).forEach(Ce=>{for(let Ue=0;Ue<this.customParsers.length;Ue++)if(this.customParsers[Ue].call(this,Ce))return;if(Ce.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:Ce.slice(1)});return}if(Ce=Ce.replace("\r",""),x=/^#EXTM3U/.exec(Ce),x){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(x=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(Ce),x){C={type:"tag",tagType:"inf"},x[1]&&(C.duration=parseFloat(x[1])),x[2]&&(C.title=x[2]),this.trigger("data",C);return}if(x=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(Ce),x){C={type:"tag",tagType:"targetduration"},x[1]&&(C.duration=parseInt(x[1],10)),this.trigger("data",C);return}if(x=/^#EXT-X-VERSION:([0-9.]*)?/.exec(Ce),x){C={type:"tag",tagType:"version"},x[1]&&(C.version=parseInt(x[1],10)),this.trigger("data",C);return}if(x=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(Ce),x){C={type:"tag",tagType:"media-sequence"},x[1]&&(C.number=parseInt(x[1],10)),this.trigger("data",C);return}if(x=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(Ce),x){C={type:"tag",tagType:"discontinuity-sequence"},x[1]&&(C.number=parseInt(x[1],10)),this.trigger("data",C);return}if(x=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(Ce),x){C={type:"tag",tagType:"playlist-type"},x[1]&&(C.playlistType=x[1]),this.trigger("data",C);return}if(x=/^#EXT-X-BYTERANGE:(.*)?$/.exec(Ce),x){C=_extends$3(parseByterange(x[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",C);return}if(x=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(Ce),x){C={type:"tag",tagType:"allow-cache"},x[1]&&(C.allowed=!/NO/.test(x[1])),this.trigger("data",C);return}if(x=/^#EXT-X-MAP:(.*)$/.exec(Ce),x){if(C={type:"tag",tagType:"map"},x[1]){const Ue=parseAttributes$1(x[1]);Ue.URI&&(C.uri=Ue.URI),Ue.BYTERANGE&&(C.byterange=parseByterange(Ue.BYTERANGE))}this.trigger("data",C);return}if(x=/^#EXT-X-STREAM-INF:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"stream-inf"},x[1]&&(C.attributes=parseAttributes$1(x[1]),C.attributes.RESOLUTION&&(C.attributes.RESOLUTION=parseResolution(C.attributes.RESOLUTION)),C.attributes.BANDWIDTH&&(C.attributes.BANDWIDTH=parseInt(C.attributes.BANDWIDTH,10)),C.attributes["FRAME-RATE"]&&(C.attributes["FRAME-RATE"]=parseFloat(C.attributes["FRAME-RATE"])),C.attributes["PROGRAM-ID"]&&(C.attributes["PROGRAM-ID"]=parseInt(C.attributes["PROGRAM-ID"],10))),this.trigger("data",C);return}if(x=/^#EXT-X-MEDIA:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"media"},x[1]&&(C.attributes=parseAttributes$1(x[1])),this.trigger("data",C);return}if(x=/^#EXT-X-ENDLIST/.exec(Ce),x){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(x=/^#EXT-X-DISCONTINUITY/.exec(Ce),x){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(x=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"program-date-time"},x[1]&&(C.dateTimeString=x[1],C.dateTimeObject=new Date(x[1])),this.trigger("data",C);return}if(x=/^#EXT-X-KEY:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"key"},x[1]&&(C.attributes=parseAttributes$1(x[1]),C.attributes.IV&&(C.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(C.attributes.IV=C.attributes.IV.substring(2)),C.attributes.IV=C.attributes.IV.match(/.{8}/g),C.attributes.IV[0]=parseInt(C.attributes.IV[0],16),C.attributes.IV[1]=parseInt(C.attributes.IV[1],16),C.attributes.IV[2]=parseInt(C.attributes.IV[2],16),C.attributes.IV[3]=parseInt(C.attributes.IV[3],16),C.attributes.IV=new Uint32Array(C.attributes.IV))),this.trigger("data",C);return}if(x=/^#EXT-X-START:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"start"},x[1]&&(C.attributes=parseAttributes$1(x[1]),C.attributes["TIME-OFFSET"]=parseFloat(C.attributes["TIME-OFFSET"]),C.attributes.PRECISE=/YES/.test(C.attributes.PRECISE)),this.trigger("data",C);return}if(x=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(Ce),x){C={type:"tag",tagType:"cue-out-cont"},x[1]?C.data=x[1]:C.data="",this.trigger("data",C);return}if(x=/^#EXT-X-CUE-OUT:(.*)?$/.exec(Ce),x){C={type:"tag",tagType:"cue-out"},x[1]?C.data=x[1]:C.data="",this.trigger("data",C);return}if(x=/^#EXT-X-CUE-IN:?(.*)?$/.exec(Ce),x){C={type:"tag",tagType:"cue-in"},x[1]?C.data=x[1]:C.data="",this.trigger("data",C);return}if(x=/^#EXT-X-SKIP:(.*)$/.exec(Ce),x&&x[1]){C={type:"tag",tagType:"skip"},C.attributes=parseAttributes$1(x[1]),C.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(C.attributes["SKIPPED-SEGMENTS"]=parseInt(C.attributes["SKIPPED-SEGMENTS"],10)),C.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(C.attributes["RECENTLY-REMOVED-DATERANGES"]=C.attributes["RECENTLY-REMOVED-DATERANGES"].split(TAB)),this.trigger("data",C);return}if(x=/^#EXT-X-PART:(.*)$/.exec(Ce),x&&x[1]){C={type:"tag",tagType:"part"},C.attributes=parseAttributes$1(x[1]),["DURATION"].forEach(function(Ue){C.attributes.hasOwnProperty(Ue)&&(C.attributes[Ue]=parseFloat(C.attributes[Ue]))}),["INDEPENDENT","GAP"].forEach(function(Ue){C.attributes.hasOwnProperty(Ue)&&(C.attributes[Ue]=/YES/.test(C.attributes[Ue]))}),C.attributes.hasOwnProperty("BYTERANGE")&&(C.attributes.byterange=parseByterange(C.attributes.BYTERANGE)),this.trigger("data",C);return}if(x=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(Ce),x&&x[1]){C={type:"tag",tagType:"server-control"},C.attributes=parseAttributes$1(x[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(Ue){C.attributes.hasOwnProperty(Ue)&&(C.attributes[Ue]=parseFloat(C.attributes[Ue]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(Ue){C.attributes.hasOwnProperty(Ue)&&(C.attributes[Ue]=/YES/.test(C.attributes[Ue]))}),this.trigger("data",C);return}if(x=/^#EXT-X-PART-INF:(.*)$/.exec(Ce),x&&x[1]){C={type:"tag",tagType:"part-inf"},C.attributes=parseAttributes$1(x[1]),["PART-TARGET"].forEach(function(Ue){C.attributes.hasOwnProperty(Ue)&&(C.attributes[Ue]=parseFloat(C.attributes[Ue]))}),this.trigger("data",C);return}if(x=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(Ce),x&&x[1]){C={type:"tag",tagType:"preload-hint"},C.attributes=parseAttributes$1(x[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(Ue){if(C.attributes.hasOwnProperty(Ue)){C.attributes[Ue]=parseInt(C.attributes[Ue],10);const je=Ue==="BYTERANGE-LENGTH"?"length":"offset";C.attributes.byterange=C.attributes.byterange||{},C.attributes.byterange[je]=C.attributes[Ue],delete C.attributes[Ue]}}),this.trigger("data",C);return}if(x=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(Ce),x&&x[1]){C={type:"tag",tagType:"rendition-report"},C.attributes=parseAttributes$1(x[1]),["LAST-MSN","LAST-PART"].forEach(function(Ue){C.attributes.hasOwnProperty(Ue)&&(C.attributes[Ue]=parseInt(C.attributes[Ue],10))}),this.trigger("data",C);return}if(x=/^#EXT-X-DATERANGE:(.*)$/.exec(Ce),x&&x[1]){C={type:"tag",tagType:"daterange"},C.attributes=parseAttributes$1(x[1]),["ID","CLASS"].forEach(function(je){C.attributes.hasOwnProperty(je)&&(C.attributes[je]=String(C.attributes[je]))}),["START-DATE","END-DATE"].forEach(function(je){C.attributes.hasOwnProperty(je)&&(C.attributes[je]=new Date(C.attributes[je]))}),["DURATION","PLANNED-DURATION"].forEach(function(je){C.attributes.hasOwnProperty(je)&&(C.attributes[je]=parseFloat(C.attributes[je]))}),["END-ON-NEXT"].forEach(function(je){C.attributes.hasOwnProperty(je)&&(C.attributes[je]=/YES/i.test(C.attributes[je]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(je){C.attributes.hasOwnProperty(je)&&(C.attributes[je]=C.attributes[je].toString(16))});const Ue=/^X-([A-Z]+-)+[A-Z]+$/;for(const je in C.attributes){if(!Ue.test(je))continue;const Xe=/[0-9A-Fa-f]{6}/g.test(C.attributes[je]),Ye=/^\d+(\.\d+)?$/.test(C.attributes[je]);C.attributes[je]=Xe?C.attributes[je].toString(16):Ye?parseFloat(C.attributes[je]):String(C.attributes[je])}this.trigger("data",C);return}if(x=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(Ce),x){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(x=/^#EXT-X-I-FRAMES-ONLY/.exec(Ce),x){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(x=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"content-steering"},C.attributes=parseAttributes$1(x[1]),this.trigger("data",C);return}if(x=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"i-frame-playlist"},C.attributes=parseAttributes$1(x[1]),C.attributes.URI&&(C.uri=C.attributes.URI),C.attributes.BANDWIDTH&&(C.attributes.BANDWIDTH=parseInt(C.attributes.BANDWIDTH,10)),C.attributes.RESOLUTION&&(C.attributes.RESOLUTION=parseResolution(C.attributes.RESOLUTION)),C.attributes["AVERAGE-BANDWIDTH"]&&(C.attributes["AVERAGE-BANDWIDTH"]=parseInt(C.attributes["AVERAGE-BANDWIDTH"],10)),C.attributes["FRAME-RATE"]&&(C.attributes["FRAME-RATE"]=parseFloat(C.attributes["FRAME-RATE"])),this.trigger("data",C);return}if(x=/^#EXT-X-DEFINE:(.*)$/.exec(Ce),x){C={type:"tag",tagType:"define"},C.attributes=parseAttributes$1(x[1]),this.trigger("data",C);return}this.trigger("data",{type:"tag",data:Ce.slice(4)})})}addParser({expression:S,customType:x,dataParser:C,segment:R}){typeof C!="function"&&(C=Ce=>Ce),this.customParsers.push(Ce=>{if(S.exec(Ce))return this.trigger("data",{type:"custom",data:C(Ce),customType:x,segment:R}),!0})}addTagMapper({expression:S,map:x}){const C=R=>S.test(R)?x(R):R;this.tagMappers.push(C)}}const camelCase=E=>E.toLowerCase().replace(/-(\w)/g,S=>S[1].toUpperCase()),camelCaseKeys=function(E){const S={};return Object.keys(E).forEach(function(x){S[camelCase(x)]=E[x]}),S},setHoldBack=function(E){const{serverControl:S,targetDuration:x,partTargetDuration:C}=E;if(!S)return;const R="#EXT-X-SERVER-CONTROL",Ce="holdBack",Ue="partHoldBack",je=x&&x*3,Xe=C&&C*2;x&&!S.hasOwnProperty(Ce)&&(S[Ce]=je,this.trigger("info",{message:`${R} defaulting HOLD-BACK to targetDuration * 3 (${je}).`})),je&&S[Ce]<je&&(this.trigger("warn",{message:`${R} clamping HOLD-BACK (${S[Ce]}) to targetDuration * 3 (${je})`}),S[Ce]=je),C&&!S.hasOwnProperty(Ue)&&(S[Ue]=C*3,this.trigger("info",{message:`${R} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${S[Ue]}).`})),C&&S[Ue]<Xe&&(this.trigger("warn",{message:`${R} clamping PART-HOLD-BACK (${S[Ue]}) to partTargetDuration * 2 (${Xe}).`}),S[Ue]=Xe)};class Parser extends Stream{constructor(S={}){super(),this.lineStream=new LineStream,this.parseStream=new ParseStream,this.lineStream.pipe(this.parseStream),this.mainDefinitions=S.mainDefinitions||{},this.params=new URL(S.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const x=this,C=[];let R={},Ce,Ue,je=!1;const Xe=function(){},Ye={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},et="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let ht=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let Dt=0,Ot=0;const Mt={};this.on("end",()=>{R.uri||!R.parts&&!R.preloadHints||(!R.map&&Ce&&(R.map=Ce),!R.key&&Ue&&(R.key=Ue),!R.timeline&&typeof ht=="number"&&(R.timeline=ht),this.manifest.preloadSegment=R)}),this.parseStream.on("data",function(St){let Ut,kt;if(x.manifest.definitions){for(const Ft in x.manifest.definitions)if(St.uri&&(St.uri=St.uri.replace(`{$${Ft}}`,x.manifest.definitions[Ft])),St.attributes)for(const Nt in St.attributes)typeof St.attributes[Nt]=="string"&&(St.attributes[Nt]=St.attributes[Nt].replace(`{$${Ft}}`,x.manifest.definitions[Ft]))}({tag(){({version(){St.version&&(this.manifest.version=St.version)},"allow-cache"(){this.manifest.allowCache=St.allowed,"allowed"in St||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const Ft={};"length"in St&&(R.byterange=Ft,Ft.length=St.length,"offset"in St||(St.offset=Dt)),"offset"in St&&(R.byterange=Ft,Ft.offset=St.offset),Dt=Ft.offset+Ft.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),St.title&&(R.title=St.title),St.duration>0&&(R.duration=St.duration),St.duration===0&&(R.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=C},key(){if(!St.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(St.attributes.METHOD==="NONE"){Ue=null;return}if(!St.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(St.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:St.attributes};return}if(St.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:St.attributes.URI};return}if(St.attributes.KEYFORMAT===et){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(St.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(St.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),St.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(St.attributes.KEYID&&St.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:St.attributes.KEYFORMAT,keyId:St.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array(St.attributes.URI.split(",")[1])};return}St.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),Ue={method:St.attributes.METHOD||"AES-128",uri:St.attributes.URI},typeof St.attributes.IV<"u"&&(Ue.iv=St.attributes.IV)},"media-sequence"(){if(!isFinite(St.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+St.number});return}this.manifest.mediaSequence=St.number},"discontinuity-sequence"(){if(!isFinite(St.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+St.number});return}this.manifest.discontinuitySequence=St.number,ht=St.number},"playlist-type"(){if(!/VOD|EVENT/.test(St.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+St.playlist});return}this.manifest.playlistType=St.playlistType},map(){Ce={},St.uri&&(Ce.uri=St.uri),St.byterange&&(Ce.byterange=St.byterange),Ue&&(Ce.key=Ue)},"stream-inf"(){if(this.manifest.playlists=C,this.manifest.mediaGroups=this.manifest.mediaGroups||Ye,!St.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}R.attributes||(R.attributes={}),_extends$3(R.attributes,St.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||Ye,!(St.attributes&&St.attributes.TYPE&&St.attributes["GROUP-ID"]&&St.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const Ft=this.manifest.mediaGroups[St.attributes.TYPE];Ft[St.attributes["GROUP-ID"]]=Ft[St.attributes["GROUP-ID"]]||{},Ut=Ft[St.attributes["GROUP-ID"]],kt={default:/yes/i.test(St.attributes.DEFAULT)},kt.default?kt.autoselect=!0:kt.autoselect=/yes/i.test(St.attributes.AUTOSELECT),St.attributes.LANGUAGE&&(kt.language=St.attributes.LANGUAGE),St.attributes.URI&&(kt.uri=St.attributes.URI),St.attributes["INSTREAM-ID"]&&(kt.instreamId=St.attributes["INSTREAM-ID"]),St.attributes.CHARACTERISTICS&&(kt.characteristics=St.attributes.CHARACTERISTICS),St.attributes.FORCED&&(kt.forced=/yes/i.test(St.attributes.FORCED)),Ut[St.attributes.NAME]=kt},discontinuity(){ht+=1,R.discontinuity=!0,this.manifest.discontinuityStarts.push(C.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=St.dateTimeString,this.manifest.dateTimeObject=St.dateTimeObject),R.dateTimeString=St.dateTimeString,R.dateTimeObject=St.dateTimeObject;const{lastProgramDateTime:Ft}=this;this.lastProgramDateTime=new Date(St.dateTimeString).getTime(),Ft===null&&this.manifest.segments.reduceRight((Nt,Gt)=>(Gt.programDateTime=Nt-Gt.duration*1e3,Gt.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(St.duration)||St.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+St.duration});return}this.manifest.targetDuration=St.duration,setHoldBack.call(this,this.manifest)},start(){if(!St.attributes||isNaN(St.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:St.attributes["TIME-OFFSET"],precise:St.attributes.PRECISE}},"cue-out"(){R.cueOut=St.data},"cue-out-cont"(){R.cueOutCont=St.data},"cue-in"(){R.cueIn=St.data},skip(){this.manifest.skip=camelCaseKeys(St.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",St.attributes,["SKIPPED-SEGMENTS"])},part(){je=!0;const Ft=this.manifest.segments.length,Nt=camelCaseKeys(St.attributes);R.parts=R.parts||[],R.parts.push(Nt),Nt.byterange&&(Nt.byterange.hasOwnProperty("offset")||(Nt.byterange.offset=Ot),Ot=Nt.byterange.offset+Nt.byterange.length);const Gt=R.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${Gt} for segment #${Ft}`,St.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((Zt,ri)=>{Zt.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${ri} lacks required attribute(s): LAST-PART`})})},"server-control"(){const Ft=this.manifest.serverControl=camelCaseKeys(St.attributes);Ft.hasOwnProperty("canBlockReload")||(Ft.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),setHoldBack.call(this,this.manifest),Ft.canSkipDateranges&&!Ft.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const Ft=this.manifest.segments.length,Nt=camelCaseKeys(St.attributes),Gt=Nt.type&&Nt.type==="PART";R.preloadHints=R.preloadHints||[],R.preloadHints.push(Nt),Nt.byterange&&(Nt.byterange.hasOwnProperty("offset")||(Nt.byterange.offset=Gt?Ot:0,Gt&&(Ot=Nt.byterange.offset+Nt.byterange.length)));const Zt=R.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Zt} for segment #${Ft}`,St.attributes,["TYPE","URI"]),!!Nt.type)for(let ri=0;ri<R.preloadHints.length-1;ri++){const li=R.preloadHints[ri];li.type&&li.type===Nt.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Zt} for segment #${Ft} has the same TYPE ${Nt.type} as preload hint #${ri}`})}},"rendition-report"(){const Ft=camelCaseKeys(St.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(Ft);const Nt=this.manifest.renditionReports.length-1,Gt=["LAST-MSN","URI"];je&&Gt.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${Nt}`,St.attributes,Gt)},"part-inf"(){this.manifest.partInf=camelCaseKeys(St.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",St.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),setHoldBack.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(camelCaseKeys(St.attributes));const Ft=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${Ft}`,St.attributes,["ID","START-DATE"]);const Nt=this.manifest.dateRanges[Ft];Nt.endDate&&Nt.startDate&&new Date(Nt.endDate)<new Date(Nt.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),Nt.duration&&Nt.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),Nt.plannedDuration&&Nt.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const Gt=!!Nt.endOnNext;if(Gt&&!Nt.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),Gt&&(Nt.duration||Nt.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),Nt.duration&&Nt.endDate){const ri=Nt.startDate.getTime()+Nt.duration*1e3;this.manifest.dateRanges[Ft].endDate=new Date(ri)}if(!Mt[Nt.id])Mt[Nt.id]=Nt;else{for(const ri in Mt[Nt.id])if(Nt[ri]&&JSON.stringify(Mt[Nt.id][ri])!==JSON.stringify(Nt[ri])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const Zt=this.manifest.dateRanges.findIndex(ri=>ri.id===Nt.id);this.manifest.dateRanges[Zt]=_extends$3(this.manifest.dateRanges[Zt],Nt),Mt[Nt.id]=_extends$3(Mt[Nt.id],Nt),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=camelCaseKeys(St.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",St.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const Ft=(Nt,Gt)=>{if(Nt in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${Nt}`});return}this.manifest.definitions[Nt]=Gt};if("QUERYPARAM"in St.attributes){if("NAME"in St.attributes||"IMPORT"in St.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const Nt=this.params.get(St.attributes.QUERYPARAM);if(!Nt){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${St.attributes.QUERYPARAM}`});return}Ft(St.attributes.QUERYPARAM,decodeURIComponent(Nt));return}if("NAME"in St.attributes){if("IMPORT"in St.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in St.attributes)||typeof St.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${St.attributes.NAME}`});return}Ft(St.attributes.NAME,St.attributes.VALUE);return}if("IMPORT"in St.attributes){if(!this.mainDefinitions[St.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${St.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}Ft(St.attributes.IMPORT,this.mainDefinitions[St.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:St.attributes,uri:St.uri,timeline:ht}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",St.attributes,["BANDWIDTH","URI"])}}[St.tagType]||Xe).call(x)},uri(){R.uri=St.uri,C.push(R),this.manifest.targetDuration&&!("duration"in R)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),R.duration=this.manifest.targetDuration),Ue&&(R.key=Ue),R.timeline=ht,Ce&&(R.map=Ce),Ot=0,this.lastProgramDateTime!==null&&(R.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=R.duration*1e3),R={}},comment(){},custom(){St.segment?(R.custom=R.custom||{},R.custom[St.customType]=St.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[St.customType]=St.data)}})[St.type].call(x)})}requiredCompatibilityversion(S,x){(S<x||!S)&&this.trigger("warn",{message:`manifest must be at least version ${x}`})}warnOnMissingAttributes_(S,x,C){const R=[];C.forEach(function(Ce){x.hasOwnProperty(Ce)||R.push(Ce)}),R.length&&this.trigger("warn",{message:`${S} lacks required attribute(s): ${R.join(", ")}`})}push(S){this.lineStream.push(S)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(S){this.parseStream.addParser(S)}addTagMapper(S){this.parseStream.addTagMapper(S)}}var regexs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},mediaTypes=["video","audio","text"],upperMediaTypes=["Video","Audio","Text"],translateLegacyCodec=function(S){return S&&S.replace(/avc1\.(\d+)\.(\d+)/i,function(x,C,R){var Ce=("00"+Number(C).toString(16)).slice(-2),Ue=("00"+Number(R).toString(16)).slice(-2);return"avc1."+Ce+"00"+Ue})},parseCodecs=function(S){S===void 0&&(S="");var x=S.split(","),C=[];return x.forEach(function(R){R=R.trim();var Ce;mediaTypes.forEach(function(Ue){var je=regexs[Ue].exec(R.toLowerCase());if(!(!je||je.length<=1)){Ce=Ue;var Xe=R.substring(0,je[1].length),Ye=R.replace(Xe,"");C.push({type:Xe,details:Ye,mediaType:Ue})}}),Ce||C.push({type:R,details:"",mediaType:"unknown"})}),C},codecsFromDefault=function(S,x){if(!S.mediaGroups.AUDIO||!x)return null;var C=S.mediaGroups.AUDIO[x];if(!C)return null;for(var R in C){var Ce=C[R];if(Ce.default&&Ce.playlists)return parseCodecs(Ce.playlists[0].attributes.CODECS)}return null},isAudioCodec=function(S){return S===void 0&&(S=""),regexs.audio.test(S.trim().toLowerCase())},isTextCodec=function(S){return S===void 0&&(S=""),regexs.text.test(S.trim().toLowerCase())},getMimeForCodec=function(S){if(!(!S||typeof S!="string")){var x=S.toLowerCase().split(",").map(function(Ce){return translateLegacyCodec(Ce.trim())}),C="video";x.length===1&&isAudioCodec(x[0])?C="audio":x.length===1&&isTextCodec(x[0])&&(C="application");var R="mp4";return x.every(function(Ce){return regexs.mp4.test(Ce)})?R="mp4":x.every(function(Ce){return regexs.webm.test(Ce)})?R="webm":x.every(function(Ce){return regexs.ogg.test(Ce)})&&(R="ogg"),C+"/"+R+';codecs="'+S+'"'}},browserSupportsCodec=function(S,x){return S===void 0&&(S=""),x===void 0&&(x=!1),window$1$1.MediaSource&&window$1$1.MediaSource.isTypeSupported&&window$1$1.MediaSource.isTypeSupported(getMimeForCodec(S))||x&&window$1$1.ManagedMediaSource&&window$1$1.ManagedMediaSource.isTypeSupported&&window$1$1.ManagedMediaSource.isTypeSupported(getMimeForCodec(S))||!1},muxerSupportsCodec=function(S){return S===void 0&&(S=""),S.toLowerCase().split(",").every(function(x){x=x.trim();for(var C=0;C<upperMediaTypes.length;C++){var R=upperMediaTypes[C];if(regexs["muxer"+R].test(x))return!0}return!1})},DEFAULT_AUDIO_CODEC="mp4a.40.2",DEFAULT_VIDEO_CODEC="avc1.4d400d",MPEGURL_REGEX=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,DASH_REGEX=/^application\/dash\+xml/i,simpleTypeFromSourceType=function(S){return MPEGURL_REGEX.test(S)?"hls":DASH_REGEX.test(S)?"dash":S==="application/vnd.videojs.vhs+json"?"vhs-json":null},countBits=function(S){return S.toString(2).length},countBytes=function(S){return Math.ceil(countBits(S)/8)},isArrayBufferView=function(S){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(S):S&&S.buffer instanceof ArrayBuffer},isTypedArray=function(S){return isArrayBufferView(S)},toUint8=function(S){return S instanceof Uint8Array?S:(!Array.isArray(S)&&!isTypedArray(S)&&!(S instanceof ArrayBuffer)&&(typeof S!="number"||typeof S=="number"&&S!==S?S=0:S=[S]),new Uint8Array(S&&S.buffer||S,S&&S.byteOffset||0,S&&S.byteLength||0))},BigInt=window$1$1.BigInt||Number,BYTE_TABLE=[BigInt("0x1"),BigInt("0x100"),BigInt("0x10000"),BigInt("0x1000000"),BigInt("0x100000000"),BigInt("0x10000000000"),BigInt("0x1000000000000"),BigInt("0x100000000000000"),BigInt("0x10000000000000000")];(function(){var E=new Uint16Array([65484]),S=new Uint8Array(E.buffer,E.byteOffset,E.byteLength);return S[0]===255?"big":S[0]===204?"little":"unknown"})();var bytesToNumber=function(S,x){var C=x===void 0?{}:x,R=C.signed,Ce=R===void 0?!1:R,Ue=C.le,je=Ue===void 0?!1:Ue;S=toUint8(S);var Xe=je?"reduce":"reduceRight",Ye=S[Xe]?S[Xe]:Array.prototype[Xe],et=Ye.call(S,function(Dt,Ot,Mt){var St=je?Mt:Math.abs(Mt+1-S.length);return Dt+BigInt(Ot)*BYTE_TABLE[St]},BigInt(0));if(Ce){var ht=BYTE_TABLE[S.length]/BigInt(2)-BigInt(1);et=BigInt(et),et>ht&&(et-=ht,et-=ht,et-=BigInt(2))}return Number(et)},numberToBytes=function(S,x){var C={},R=C.le,Ce=R===void 0?!1:R;(typeof S!="bigint"&&typeof S!="number"||typeof S=="number"&&S!==S)&&(S=0),S=BigInt(S);for(var Ue=countBytes(S),je=new Uint8Array(new ArrayBuffer(Ue)),Xe=0;Xe<Ue;Xe++){var Ye=Ce?Xe:Math.abs(Xe+1-je.length);je[Ye]=Number(S/BYTE_TABLE[Xe]&BigInt(255)),S<0&&(je[Ye]=Math.abs(~je[Ye]),je[Ye]-=Xe===0?1:2)}return je},stringToBytes=function(S,x){if(typeof S!="string"&&S&&typeof S.toString=="function"&&(S=S.toString()),typeof S!="string")return new Uint8Array;x||(S=unescape(encodeURIComponent(S)));for(var C=new Uint8Array(S.length),R=0;R<S.length;R++)C[R]=S.charCodeAt(R);return C},concatTypedArrays=function(){for(var S=arguments.length,x=new Array(S),C=0;C<S;C++)x[C]=arguments[C];if(x=x.filter(function(je){return je&&(je.byteLength||je.length)&&typeof je!="string"}),x.length<=1)return toUint8(x[0]);var R=x.reduce(function(je,Xe,Ye){return je+(Xe.byteLength||Xe.length)},0),Ce=new Uint8Array(R),Ue=0;return x.forEach(function(je){je=toUint8(je),Ce.set(je,Ue),Ue+=je.byteLength}),Ce},bytesMatch=function(S,x,C){var R=C===void 0?{}:C,Ce=R.offset,Ue=Ce===void 0?0:Ce,je=R.mask,Xe=je===void 0?[]:je;S=toUint8(S),x=toUint8(x);var Ye=x.every?x.every:Array.prototype.every;return x.length&&S.length-Ue>=x.length&&Ye.call(x,function(et,ht){var Dt=Xe[ht]?Xe[ht]&S[Ue+ht]:S[Ue+ht];return et===Dt})},forEachMediaGroup$1=function(S,x,C){x.forEach(function(R){for(var Ce in S.mediaGroups[R])for(var Ue in S.mediaGroups[R][Ce]){var je=S.mediaGroups[R][Ce][Ue];C(je,R,Ce,Ue)}})},dom$1={},conventions$2={};function find$2(E,S,x){if(x===void 0&&(x=Array.prototype),E&&typeof x.find=="function")return x.find.call(E,S);for(var C=0;C<E.length;C++)if(Object.prototype.hasOwnProperty.call(E,C)){var R=E[C];if(S.call(void 0,R,C,E))return R}}function freeze(E,S){return S===void 0&&(S=Object),S&&typeof S.freeze=="function"?S.freeze(E):E}function assign(E,S){if(E===null||typeof E!="object")throw new TypeError("target is not an object");for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(E[x]=S[x]);return E}var MIME_TYPE=freeze({HTML:"text/html",isHTML:function(E){return E===MIME_TYPE.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),NAMESPACE$3=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(E){return E===NAMESPACE$3.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});conventions$2.assign=assign;conventions$2.find=find$2;conventions$2.freeze=freeze;conventions$2.MIME_TYPE=MIME_TYPE;conventions$2.NAMESPACE=NAMESPACE$3;var conventions$1=conventions$2,find$1=conventions$1.find,NAMESPACE$2=conventions$1.NAMESPACE;function notEmptyString(E){return E!==""}function splitOnASCIIWhitespace(E){return E?E.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}function orderedSetReducer(E,S){return E.hasOwnProperty(S)||(E[S]=!0),E}function toOrderedSet(E){if(!E)return[];var S=splitOnASCIIWhitespace(E);return Object.keys(S.reduce(orderedSetReducer,{}))}function arrayIncludes(E){return function(S){return E&&E.indexOf(S)!==-1}}function copy(E,S){for(var x in E)Object.prototype.hasOwnProperty.call(E,x)&&(S[x]=E[x])}function _extends$1(E,S){var x=E.prototype;if(!(x instanceof S)){let C=function(){};C.prototype=S.prototype,C=new C,copy(x,C),E.prototype=x=C}x.constructor!=E&&(typeof E!="function"&&console.error("unknown Class:"+E),x.constructor=E)}var NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={};ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(E,S){if(S instanceof Error)var x=S;else x=this,Error.call(this,ExceptionMessage[E]),this.message=ExceptionMessage[E],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return x.code=E,S&&(this.message=this.message+": "+S),x}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(E){return E>=0&&E<this.length?this[E]:null},toString:function(E,S){for(var x=[],C=0;C<this.length;C++)serializeToString(this[C],x,E,S);return x.join("")},filter:function(E){return Array.prototype.filter.call(this,E)},indexOf:function(E){return Array.prototype.indexOf.call(this,E)}};function LiveNodeList(E,S){this._node=E,this._refresh=S,_updateLiveList(this)}function _updateLiveList(E){var S=E._node._inc||E._node.ownerDocument._inc;if(E._inc!==S){var x=E._refresh(E._node);if(__set__(E,"length",x.length),!E.$$length||x.length<E.$$length)for(var C=x.length;C in E;C++)Object.prototype.hasOwnProperty.call(E,C)&&delete E[C];copy(x,E),E._inc=S}}LiveNodeList.prototype.item=function(E){return _updateLiveList(this),this[E]||null};_extends$1(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(E,S){for(var x=E.length;x--;)if(E[x]===S)return x}function _addNamedNode(E,S,x,C){if(C?S[_findNodeIndex(S,C)]=x:S[S.length++]=x,E){x.ownerElement=E;var R=E.ownerDocument;R&&(C&&_onRemoveAttribute(R,E,C),_onAddAttribute(R,E,x))}}function _removeNamedNode(E,S,x){var C=_findNodeIndex(S,x);if(C>=0){for(var R=S.length-1;C<R;)S[C]=S[++C];if(S.length=R,E){var Ce=E.ownerDocument;Ce&&(_onRemoveAttribute(Ce,E,x),x.ownerElement=null)}}else throw new DOMException(NOT_FOUND_ERR,new Error(E.tagName+"@"+x))}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(E){for(var S=this.length;S--;){var x=this[S];if(x.nodeName==E)return x}},setNamedItem:function(E){var S=E.ownerElement;if(S&&S!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var x=this.getNamedItem(E.nodeName);return _addNamedNode(this._ownerElement,this,E,x),x},setNamedItemNS:function(E){var S=E.ownerElement,x;if(S&&S!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return x=this.getNamedItemNS(E.namespaceURI,E.localName),_addNamedNode(this._ownerElement,this,E,x),x},removeNamedItem:function(E){var S=this.getNamedItem(E);return _removeNamedNode(this._ownerElement,this,S),S},removeNamedItemNS:function(E,S){var x=this.getNamedItemNS(E,S);return _removeNamedNode(this._ownerElement,this,x),x},getNamedItemNS:function(E,S){for(var x=this.length;x--;){var C=this[x];if(C.localName==S&&C.namespaceURI==E)return C}return null}};function DOMImplementation$1(){}DOMImplementation$1.prototype={hasFeature:function(E,S){return!0},createDocument:function(E,S,x){var C=new Document;if(C.implementation=this,C.childNodes=new NodeList,C.doctype=x||null,x&&C.appendChild(x),S){var R=C.createElementNS(E,S);C.appendChild(R)}return C},createDocumentType:function(E,S,x){var C=new DocumentType;return C.name=E,C.nodeName=E,C.publicId=S||"",C.systemId=x||"",C}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(E,S){return _insertBefore(this,E,S)},replaceChild:function(E,S){_insertBefore(this,E,S,assertPreReplacementValidityInDocument),S&&this.removeChild(S)},removeChild:function(E){return _removeChild(this,E)},appendChild:function(E){return this.insertBefore(E,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(E){return cloneNode(this.ownerDocument||this,this,E)},normalize:function(){for(var E=this.firstChild;E;){var S=E.nextSibling;S&&S.nodeType==TEXT_NODE&&E.nodeType==TEXT_NODE?(this.removeChild(S),E.appendData(S.data)):(E.normalize(),E=S)}},isSupported:function(E,S){return this.ownerDocument.implementation.hasFeature(E,S)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(E){for(var S=this;S;){var x=S._nsMap;if(x){for(var C in x)if(Object.prototype.hasOwnProperty.call(x,C)&&x[C]===E)return C}S=S.nodeType==ATTRIBUTE_NODE?S.ownerDocument:S.parentNode}return null},lookupNamespaceURI:function(E){for(var S=this;S;){var x=S._nsMap;if(x&&Object.prototype.hasOwnProperty.call(x,E))return x[E];S=S.nodeType==ATTRIBUTE_NODE?S.ownerDocument:S.parentNode}return null},isDefaultNamespace:function(E){var S=this.lookupPrefix(E);return S==null}};function _xmlEncoder(E){return E=="<"&&"&lt;"||E==">"&&"&gt;"||E=="&"&&"&amp;"||E=='"'&&"&quot;"||"&#"+E.charCodeAt()+";"}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(E,S){if(S(E))return!0;if(E=E.firstChild)do if(_visitNode(E,S))return!0;while(E=E.nextSibling)}function Document(){this.ownerDocument=this}function _onAddAttribute(E,S,x){E&&E._inc++;var C=x.namespaceURI;C===NAMESPACE$2.XMLNS&&(S._nsMap[x.prefix?x.localName:""]=x.value)}function _onRemoveAttribute(E,S,x,C){E&&E._inc++;var R=x.namespaceURI;R===NAMESPACE$2.XMLNS&&delete S._nsMap[x.prefix?x.localName:""]}function _onUpdateChild(E,S,x){if(E&&E._inc){E._inc++;var C=S.childNodes;if(x)C[C.length++]=x;else{for(var R=S.firstChild,Ce=0;R;)C[Ce++]=R,R=R.nextSibling;C.length=Ce,delete C[C.length]}}}function _removeChild(E,S){var x=S.previousSibling,C=S.nextSibling;return x?x.nextSibling=C:E.firstChild=C,C?C.previousSibling=x:E.lastChild=x,S.parentNode=null,S.previousSibling=null,S.nextSibling=null,_onUpdateChild(E.ownerDocument,E),S}function hasValidParentNodeType(E){return E&&(E.nodeType===Node.DOCUMENT_NODE||E.nodeType===Node.DOCUMENT_FRAGMENT_NODE||E.nodeType===Node.ELEMENT_NODE)}function hasInsertableNodeType(E){return E&&(isElementNode(E)||isTextNode$1(E)||isDocTypeNode(E)||E.nodeType===Node.DOCUMENT_FRAGMENT_NODE||E.nodeType===Node.COMMENT_NODE||E.nodeType===Node.PROCESSING_INSTRUCTION_NODE)}function isDocTypeNode(E){return E&&E.nodeType===Node.DOCUMENT_TYPE_NODE}function isElementNode(E){return E&&E.nodeType===Node.ELEMENT_NODE}function isTextNode$1(E){return E&&E.nodeType===Node.TEXT_NODE}function isElementInsertionPossible(E,S){var x=E.childNodes||[];if(find$1(x,isElementNode)||isDocTypeNode(S))return!1;var C=find$1(x,isDocTypeNode);return!(S&&C&&x.indexOf(C)>x.indexOf(S))}function isElementReplacementPossible(E,S){var x=E.childNodes||[];function C(Ce){return isElementNode(Ce)&&Ce!==S}if(find$1(x,C))return!1;var R=find$1(x,isDocTypeNode);return!(S&&R&&x.indexOf(R)>x.indexOf(S))}function assertPreInsertionValidity1to5(E,S,x){if(!hasValidParentNodeType(E))throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+E.nodeType);if(x&&x.parentNode!==E)throw new DOMException(NOT_FOUND_ERR,"child not in parent");if(!hasInsertableNodeType(S)||isDocTypeNode(S)&&E.nodeType!==Node.DOCUMENT_NODE)throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected node type "+S.nodeType+" for parent node type "+E.nodeType)}function assertPreInsertionValidityInDocument(E,S,x){var C=E.childNodes||[],R=S.childNodes||[];if(S.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var Ce=R.filter(isElementNode);if(Ce.length>1||find$1(R,isTextNode$1))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Ce.length===1&&!isElementInsertionPossible(E,x))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(S)&&!isElementInsertionPossible(E,x))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(S)){if(find$1(C,isDocTypeNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Ue=find$1(C,isElementNode);if(x&&C.indexOf(Ue)<C.indexOf(x))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!x&&Ue)throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function assertPreReplacementValidityInDocument(E,S,x){var C=E.childNodes||[],R=S.childNodes||[];if(S.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var Ce=R.filter(isElementNode);if(Ce.length>1||find$1(R,isTextNode$1))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Ce.length===1&&!isElementReplacementPossible(E,x))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(S)&&!isElementReplacementPossible(E,x))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(S)){if(find$1(C,function(Xe){return isDocTypeNode(Xe)&&Xe!==x}))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Ue=find$1(C,isElementNode);if(x&&C.indexOf(Ue)<C.indexOf(x))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function _insertBefore(E,S,x,C){assertPreInsertionValidity1to5(E,S,x),E.nodeType===Node.DOCUMENT_NODE&&(C||assertPreInsertionValidityInDocument)(E,S,x);var R=S.parentNode;if(R&&R.removeChild(S),S.nodeType===DOCUMENT_FRAGMENT_NODE){var Ce=S.firstChild;if(Ce==null)return S;var Ue=S.lastChild}else Ce=Ue=S;var je=x?x.previousSibling:E.lastChild;Ce.previousSibling=je,Ue.nextSibling=x,je?je.nextSibling=Ce:E.firstChild=Ce,x==null?E.lastChild=Ue:x.previousSibling=Ue;do Ce.parentNode=E;while(Ce!==Ue&&(Ce=Ce.nextSibling));return _onUpdateChild(E.ownerDocument||E,E),S.nodeType==DOCUMENT_FRAGMENT_NODE&&(S.firstChild=S.lastChild=null),S}function _appendSingleChild(E,S){return S.parentNode&&S.parentNode.removeChild(S),S.parentNode=E,S.previousSibling=E.lastChild,S.nextSibling=null,S.previousSibling?S.previousSibling.nextSibling=S:E.firstChild=S,E.lastChild=S,_onUpdateChild(E.ownerDocument,E,S),S}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(E,S){if(E.nodeType==DOCUMENT_FRAGMENT_NODE){for(var x=E.firstChild;x;){var C=x.nextSibling;this.insertBefore(x,S),x=C}return E}return _insertBefore(this,E,S),E.ownerDocument=this,this.documentElement===null&&E.nodeType===ELEMENT_NODE&&(this.documentElement=E),E},removeChild:function(E){return this.documentElement==E&&(this.documentElement=null),_removeChild(this,E)},replaceChild:function(E,S){_insertBefore(this,E,S,assertPreReplacementValidityInDocument),E.ownerDocument=this,S&&this.removeChild(S),isElementNode(E)&&(this.documentElement=E)},importNode:function(E,S){return importNode(this,E,S)},getElementById:function(E){var S=null;return _visitNode(this.documentElement,function(x){if(x.nodeType==ELEMENT_NODE&&x.getAttribute("id")==E)return S=x,!0}),S},getElementsByClassName:function(E){var S=toOrderedSet(E);return new LiveNodeList(this,function(x){var C=[];return S.length>0&&_visitNode(x.documentElement,function(R){if(R!==x&&R.nodeType===ELEMENT_NODE){var Ce=R.getAttribute("class");if(Ce){var Ue=E===Ce;if(!Ue){var je=toOrderedSet(Ce);Ue=S.every(arrayIncludes(je))}Ue&&C.push(R)}}}),C})},createElement:function(E){var S=new Element$1;S.ownerDocument=this,S.nodeName=E,S.tagName=E,S.localName=E,S.childNodes=new NodeList;var x=S.attributes=new NamedNodeMap;return x._ownerElement=S,S},createDocumentFragment:function(){var E=new DocumentFragment;return E.ownerDocument=this,E.childNodes=new NodeList,E},createTextNode:function(E){var S=new Text;return S.ownerDocument=this,S.appendData(E),S},createComment:function(E){var S=new Comment;return S.ownerDocument=this,S.appendData(E),S},createCDATASection:function(E){var S=new CDATASection;return S.ownerDocument=this,S.appendData(E),S},createProcessingInstruction:function(E,S){var x=new ProcessingInstruction;return x.ownerDocument=this,x.tagName=x.nodeName=x.target=E,x.nodeValue=x.data=S,x},createAttribute:function(E){var S=new Attr;return S.ownerDocument=this,S.name=E,S.nodeName=E,S.localName=E,S.specified=!0,S},createEntityReference:function(E){var S=new EntityReference;return S.ownerDocument=this,S.nodeName=E,S},createElementNS:function(E,S){var x=new Element$1,C=S.split(":"),R=x.attributes=new NamedNodeMap;return x.childNodes=new NodeList,x.ownerDocument=this,x.nodeName=S,x.tagName=S,x.namespaceURI=E,C.length==2?(x.prefix=C[0],x.localName=C[1]):x.localName=S,R._ownerElement=x,x},createAttributeNS:function(E,S){var x=new Attr,C=S.split(":");return x.ownerDocument=this,x.nodeName=S,x.name=S,x.namespaceURI=E,x.specified=!0,C.length==2?(x.prefix=C[0],x.localName=C[1]):x.localName=S,x}};_extends$1(Document,Node);function Element$1(){this._nsMap={}}Element$1.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(E){return this.getAttributeNode(E)!=null},getAttribute:function(E){var S=this.getAttributeNode(E);return S&&S.value||""},getAttributeNode:function(E){return this.attributes.getNamedItem(E)},setAttribute:function(E,S){var x=this.ownerDocument.createAttribute(E);x.value=x.nodeValue=""+S,this.setAttributeNode(x)},removeAttribute:function(E){var S=this.getAttributeNode(E);S&&this.removeAttributeNode(S)},appendChild:function(E){return E.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(E,null):_appendSingleChild(this,E)},setAttributeNode:function(E){return this.attributes.setNamedItem(E)},setAttributeNodeNS:function(E){return this.attributes.setNamedItemNS(E)},removeAttributeNode:function(E){return this.attributes.removeNamedItem(E.nodeName)},removeAttributeNS:function(E,S){var x=this.getAttributeNodeNS(E,S);x&&this.removeAttributeNode(x)},hasAttributeNS:function(E,S){return this.getAttributeNodeNS(E,S)!=null},getAttributeNS:function(E,S){var x=this.getAttributeNodeNS(E,S);return x&&x.value||""},setAttributeNS:function(E,S,x){var C=this.ownerDocument.createAttributeNS(E,S);C.value=C.nodeValue=""+x,this.setAttributeNode(C)},getAttributeNodeNS:function(E,S){return this.attributes.getNamedItemNS(E,S)},getElementsByTagName:function(E){return new LiveNodeList(this,function(S){var x=[];return _visitNode(S,function(C){C!==S&&C.nodeType==ELEMENT_NODE&&(E==="*"||C.tagName==E)&&x.push(C)}),x})},getElementsByTagNameNS:function(E,S){return new LiveNodeList(this,function(x){var C=[];return _visitNode(x,function(R){R!==x&&R.nodeType===ELEMENT_NODE&&(E==="*"||R.namespaceURI===E)&&(S==="*"||R.localName==S)&&C.push(R)}),C})}};Document.prototype.getElementsByTagName=Element$1.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element$1.prototype.getElementsByTagNameNS;_extends$1(Element$1,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends$1(Attr,Node);function CharacterData(){}CharacterData.prototype={data:"",substringData:function(E,S){return this.data.substring(E,E+S)},appendData:function(E){E=this.data+E,this.nodeValue=this.data=E,this.length=E.length},insertData:function(E,S){this.replaceData(E,0,S)},appendChild:function(E){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(E,S){this.replaceData(E,S,"")},replaceData:function(E,S,x){var C=this.data.substring(0,E),R=this.data.substring(E+S);x=C+x+R,this.nodeValue=this.data=x,this.length=x.length}};_extends$1(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(E){var S=this.data,x=S.substring(E);S=S.substring(0,E),this.data=this.nodeValue=S,this.length=S.length;var C=this.ownerDocument.createTextNode(x);return this.parentNode&&this.parentNode.insertBefore(C,this.nextSibling),C}};_extends$1(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends$1(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends$1(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends$1(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends$1(Notation,Node);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends$1(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends$1(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends$1(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends$1(ProcessingInstruction,Node);function XMLSerializer(){}XMLSerializer.prototype.serializeToString=function(E,S,x){return nodeSerializeToString.call(E,S,x)};Node.prototype.toString=nodeSerializeToString;function nodeSerializeToString(E,S){var x=[],C=this.nodeType==9&&this.documentElement||this,R=C.prefix,Ce=C.namespaceURI;if(Ce&&R==null){var R=C.lookupPrefix(Ce);if(R==null)var Ue=[{namespace:Ce,prefix:null}]}return serializeToString(this,x,E,S,Ue),x.join("")}function needNamespaceDefine(E,S,x){var C=E.prefix||"",R=E.namespaceURI;if(!R||C==="xml"&&R===NAMESPACE$2.XML||R===NAMESPACE$2.XMLNS)return!1;for(var Ce=x.length;Ce--;){var Ue=x[Ce];if(Ue.prefix===C)return Ue.namespace!==R}return!0}function addSerializedAttribute(E,S,x){E.push(" ",S,'="',x.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"')}function serializeToString(E,S,x,C,R){if(R||(R=[]),C)if(E=C(E),E){if(typeof E=="string"){S.push(E);return}}else return;switch(E.nodeType){case ELEMENT_NODE:var Ce=E.attributes,Ue=Ce.length,kt=E.firstChild,je=E.tagName;x=NAMESPACE$2.isHTML(E.namespaceURI)||x;var Xe=je;if(!x&&!E.prefix&&E.namespaceURI){for(var Ye,et=0;et<Ce.length;et++)if(Ce.item(et).name==="xmlns"){Ye=Ce.item(et).value;break}if(!Ye)for(var ht=R.length-1;ht>=0;ht--){var Dt=R[ht];if(Dt.prefix===""&&Dt.namespace===E.namespaceURI){Ye=Dt.namespace;break}}if(Ye!==E.namespaceURI)for(var ht=R.length-1;ht>=0;ht--){var Dt=R[ht];if(Dt.namespace===E.namespaceURI){Dt.prefix&&(Xe=Dt.prefix+":"+je);break}}}S.push("<",Xe);for(var Ot=0;Ot<Ue;Ot++){var Mt=Ce.item(Ot);Mt.prefix=="xmlns"?R.push({prefix:Mt.localName,namespace:Mt.value}):Mt.nodeName=="xmlns"&&R.push({prefix:"",namespace:Mt.value})}for(var Ot=0;Ot<Ue;Ot++){var Mt=Ce.item(Ot);if(needNamespaceDefine(Mt,x,R)){var St=Mt.prefix||"",Ut=Mt.namespaceURI;addSerializedAttribute(S,St?"xmlns:"+St:"xmlns",Ut),R.push({prefix:St,namespace:Ut})}serializeToString(Mt,S,x,C,R)}if(je===Xe&&needNamespaceDefine(E,x,R)){var St=E.prefix||"",Ut=E.namespaceURI;addSerializedAttribute(S,St?"xmlns:"+St:"xmlns",Ut),R.push({prefix:St,namespace:Ut})}if(kt||x&&!/^(?:meta|link|img|br|hr|input)$/i.test(je)){if(S.push(">"),x&&/^script$/i.test(je))for(;kt;)kt.data?S.push(kt.data):serializeToString(kt,S,x,C,R.slice()),kt=kt.nextSibling;else for(;kt;)serializeToString(kt,S,x,C,R.slice()),kt=kt.nextSibling;S.push("</",Xe,">")}else S.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var kt=E.firstChild;kt;)serializeToString(kt,S,x,C,R.slice()),kt=kt.nextSibling;return;case ATTRIBUTE_NODE:return addSerializedAttribute(S,E.name,E.value);case TEXT_NODE:return S.push(E.data.replace(/[<&>]/g,_xmlEncoder));case CDATA_SECTION_NODE:return S.push("<![CDATA[",E.data,"]]>");case COMMENT_NODE:return S.push("<!--",E.data,"-->");case DOCUMENT_TYPE_NODE:var Ft=E.publicId,Nt=E.systemId;if(S.push("<!DOCTYPE ",E.name),Ft)S.push(" PUBLIC ",Ft),Nt&&Nt!="."&&S.push(" ",Nt),S.push(">");else if(Nt&&Nt!=".")S.push(" SYSTEM ",Nt,">");else{var Gt=E.internalSubset;Gt&&S.push(" [",Gt,"]"),S.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return S.push("<?",E.target," ",E.data,"?>");case ENTITY_REFERENCE_NODE:return S.push("&",E.nodeName,";");default:S.push("??",E.nodeName)}}function importNode(E,S,x){var C;switch(S.nodeType){case ELEMENT_NODE:C=S.cloneNode(!1),C.ownerDocument=E;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:x=!0;break}if(C||(C=S.cloneNode(!1)),C.ownerDocument=E,C.parentNode=null,x)for(var R=S.firstChild;R;)C.appendChild(importNode(E,R,x)),R=R.nextSibling;return C}function cloneNode(E,S,x){var C=new S.constructor;for(var R in S)if(Object.prototype.hasOwnProperty.call(S,R)){var Ce=S[R];typeof Ce!="object"&&Ce!=C[R]&&(C[R]=Ce)}switch(S.childNodes&&(C.childNodes=new NodeList),C.ownerDocument=E,C.nodeType){case ELEMENT_NODE:var Ue=S.attributes,je=C.attributes=new NamedNodeMap,Xe=Ue.length;je._ownerElement=C;for(var Ye=0;Ye<Xe;Ye++)C.setAttributeNode(cloneNode(E,Ue.item(Ye),!0));break;case ATTRIBUTE_NODE:x=!0}if(x)for(var et=S.firstChild;et;)C.appendChild(cloneNode(E,et,x)),et=et.nextSibling;return C}function __set__(E,S,x){E[S]=x}try{if(Object.defineProperty){let E=function(S){switch(S.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var x=[];for(S=S.firstChild;S;)S.nodeType!==7&&S.nodeType!==8&&x.push(E(S)),S=S.nextSibling;return x.join("");default:return S.nodeValue}};Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return E(this)},set:function(S){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(S||String(S))&&this.appendChild(this.ownerDocument.createTextNode(S));break;default:this.data=S,this.value=S,this.nodeValue=S}}}),__set__=function(S,x,C){S["$$"+x]=C}}}catch{}dom$1.DocumentType=DocumentType;dom$1.DOMException=DOMException;dom$1.DOMImplementation=DOMImplementation$1;dom$1.Element=Element$1;dom$1.Node=Node;dom$1.NodeList=NodeList;dom$1.XMLSerializer=XMLSerializer;var domParser={},entities$1={};(function(E){var S=conventions$2.freeze;E.XML_ENTITIES=S({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),E.HTML_ENTITIES=S({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),E.entityMap=E.HTML_ENTITIES})(entities$1);var sax$1={},NAMESPACE$1=conventions$2.NAMESPACE,nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function ParseError$1(E,S){this.message=E,this.locator=S,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError$1)}ParseError$1.prototype=new Error;ParseError$1.prototype.name=ParseError$1.name;function XMLReader$1(){}XMLReader$1.prototype={parse:function(E,S,x){var C=this.domBuilder;C.startDocument(),_copy(S,S={}),parse$1(E,S,x,C,this.errorHandler),C.endDocument()}};function parse$1(E,S,x,C,R){function Ce(ui){if(ui>65535){ui-=65536;var vi=55296+(ui>>10),si=56320+(ui&1023);return String.fromCharCode(vi,si)}else return String.fromCharCode(ui)}function Ue(ui){var vi=ui.slice(1,-1);return Object.hasOwnProperty.call(x,vi)?x[vi]:vi.charAt(0)==="#"?Ce(parseInt(vi.substr(1).replace("x","0x"))):(R.error("entity not found:"+ui),ui)}function je(ui){if(ui>St){var vi=E.substring(St,ui).replace(/&#?\w+;/g,Ue);Dt&&Xe(St),C.characters(vi,0,ui-St),St=ui}}function Xe(ui,vi){for(;ui>=et&&(vi=ht.exec(E));)Ye=vi.index,et=Ye+vi[0].length,Dt.lineNumber++;Dt.columnNumber=ui-Ye+1}for(var Ye=0,et=0,ht=/.*(?:\r\n?|\n)|.*$/g,Dt=C.locator,Ot=[{currentNSMap:S}],Mt={},St=0;;){try{var Ut=E.indexOf("<",St);if(Ut<0){if(!E.substr(St).match(/^\s*$/)){var kt=C.doc,Ft=kt.createTextNode(E.substr(St));kt.appendChild(Ft),C.currentElement=Ft}return}switch(Ut>St&&je(Ut),E.charAt(Ut+1)){case"/":var Mi=E.indexOf(">",Ut+3),Nt=E.substring(Ut+2,Mi).replace(/[ \t\n\r]+$/g,""),Gt=Ot.pop();Mi<0?(Nt=E.substring(Ut+2).replace(/[\s<].*/,""),R.error("end tag name: "+Nt+" is not complete:"+Gt.tagName),Mi=Ut+1+Nt.length):Nt.match(/\s</)&&(Nt=Nt.replace(/[\s<].*/,""),R.error("end tag name: "+Nt+" maybe not complete"),Mi=Ut+1+Nt.length);var Zt=Gt.localNSMap,ri=Gt.tagName==Nt,li=ri||Gt.tagName&&Gt.tagName.toLowerCase()==Nt.toLowerCase();if(li){if(C.endElement(Gt.uri,Gt.localName,Nt),Zt)for(var hi in Zt)Object.prototype.hasOwnProperty.call(Zt,hi)&&C.endPrefixMapping(hi);ri||R.fatalError("end tag name: "+Nt+" is not match the current start tagName:"+Gt.tagName)}else Ot.push(Gt);Mi++;break;case"?":Dt&&Xe(Ut),Mi=parseInstruction(E,Ut,C);break;case"!":Dt&&Xe(Ut),Mi=parseDCC(E,Ut,C,R);break;default:Dt&&Xe(Ut);var xi=new ElementAttributes,$i=Ot[Ot.length-1].currentNSMap,Mi=parseElementStartPart(E,Ut,xi,$i,Ue,R),Di=xi.length;if(!xi.closed&&fixSelfClosed(E,Mi,xi.tagName,Mt)&&(xi.closed=!0,x.nbsp||R.warning("unclosed xml attribute")),Dt&&Di){for(var ki=copyLocator(Dt,{}),ji=0;ji<Di;ji++){var Ri=xi[ji];Xe(Ri.offset),Ri.locator=copyLocator(Dt,{})}C.locator=ki,appendElement$1(xi,C,$i)&&Ot.push(xi),C.locator=Dt}else appendElement$1(xi,C,$i)&&Ot.push(xi);NAMESPACE$1.isHTML(xi.uri)&&!xi.closed?Mi=parseHtmlSpecialContent(E,Mi,xi.tagName,Ue,C):Mi++}}catch(ui){if(ui instanceof ParseError$1)throw ui;R.error("element parse error: "+ui),Mi=-1}Mi>St?St=Mi:je(Math.max(Ut,St)+1)}}function copyLocator(E,S){return S.lineNumber=E.lineNumber,S.columnNumber=E.columnNumber,S}function parseElementStartPart(E,S,x,C,R,Ce){function Ue(Dt,Ot,Mt){x.attributeNames.hasOwnProperty(Dt)&&Ce.fatalError("Attribute "+Dt+" redefined"),x.addValue(Dt,Ot.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,R),Mt)}for(var je,Xe,Ye=++S,et=S_TAG;;){var ht=E.charAt(Ye);switch(ht){case"=":if(et===S_ATTR)je=E.slice(S,Ye),et=S_EQ;else if(et===S_ATTR_SPACE)et=S_EQ;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(et===S_EQ||et===S_ATTR)if(et===S_ATTR&&(Ce.warning('attribute value must after "="'),je=E.slice(S,Ye)),S=Ye+1,Ye=E.indexOf(ht,S),Ye>0)Xe=E.slice(S,Ye),Ue(je,Xe,S-1),et=S_ATTR_END;else throw new Error("attribute value no end '"+ht+"' match");else if(et==S_ATTR_NOQUOT_VALUE)Xe=E.slice(S,Ye),Ue(je,Xe,S),Ce.warning('attribute "'+je+'" missed start quot('+ht+")!!"),S=Ye+1,et=S_ATTR_END;else throw new Error('attribute value must after "="');break;case"/":switch(et){case S_TAG:x.setTagName(E.slice(S,Ye));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:et=S_TAG_CLOSE,x.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:break;case S_ATTR_SPACE:x.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Ce.error("unexpected end of input"),et==S_TAG&&x.setTagName(E.slice(S,Ye)),Ye;case">":switch(et){case S_TAG:x.setTagName(E.slice(S,Ye));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:Xe=E.slice(S,Ye),Xe.slice(-1)==="/"&&(x.closed=!0,Xe=Xe.slice(0,-1));case S_ATTR_SPACE:et===S_ATTR_SPACE&&(Xe=je),et==S_ATTR_NOQUOT_VALUE?(Ce.warning('attribute "'+Xe+'" missed quot(")!'),Ue(je,Xe,S)):((!NAMESPACE$1.isHTML(C[""])||!Xe.match(/^(?:disabled|checked|selected)$/i))&&Ce.warning('attribute "'+Xe+'" missed value!! "'+Xe+'" instead!!'),Ue(Xe,Xe,S));break;case S_EQ:throw new Error("attribute value missed!!")}return Ye;case"":ht=" ";default:if(ht<=" ")switch(et){case S_TAG:x.setTagName(E.slice(S,Ye)),et=S_TAG_SPACE;break;case S_ATTR:je=E.slice(S,Ye),et=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var Xe=E.slice(S,Ye);Ce.warning('attribute "'+Xe+'" missed quot(")!!'),Ue(je,Xe,S);case S_ATTR_END:et=S_TAG_SPACE;break}else switch(et){case S_ATTR_SPACE:x.tagName,(!NAMESPACE$1.isHTML(C[""])||!je.match(/^(?:disabled|checked|selected)$/i))&&Ce.warning('attribute "'+je+'" missed value!! "'+je+'" instead2!!'),Ue(je,je,S),S=Ye,et=S_ATTR;break;case S_ATTR_END:Ce.warning('attribute space is required"'+je+'"!!');case S_TAG_SPACE:et=S_ATTR,S=Ye;break;case S_EQ:et=S_ATTR_NOQUOT_VALUE,S=Ye;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}Ye++}}function appendElement$1(E,S,x){for(var C=E.tagName,R=null,ht=E.length;ht--;){var Ce=E[ht],Ue=Ce.qName,je=Ce.value,Dt=Ue.indexOf(":");if(Dt>0)var Xe=Ce.prefix=Ue.slice(0,Dt),Ye=Ue.slice(Dt+1),et=Xe==="xmlns"&&Ye;else Ye=Ue,Xe=null,et=Ue==="xmlns"&&"";Ce.localName=Ye,et!==!1&&(R==null&&(R={},_copy(x,x={})),x[et]=R[et]=je,Ce.uri=NAMESPACE$1.XMLNS,S.startPrefixMapping(et,je))}for(var ht=E.length;ht--;){Ce=E[ht];var Xe=Ce.prefix;Xe&&(Xe==="xml"&&(Ce.uri=NAMESPACE$1.XML),Xe!=="xmlns"&&(Ce.uri=x[Xe||""]))}var Dt=C.indexOf(":");Dt>0?(Xe=E.prefix=C.slice(0,Dt),Ye=E.localName=C.slice(Dt+1)):(Xe=null,Ye=E.localName=C);var Ot=E.uri=x[Xe||""];if(S.startElement(Ot,Ye,C,E),E.closed){if(S.endElement(Ot,Ye,C),R)for(Xe in R)Object.prototype.hasOwnProperty.call(R,Xe)&&S.endPrefixMapping(Xe)}else return E.currentNSMap=x,E.localNSMap=R,!0}function parseHtmlSpecialContent(E,S,x,C,R){if(/^(?:script|textarea)$/i.test(x)){var Ce=E.indexOf("</"+x+">",S),Ue=E.substring(S+1,Ce);if(/[&<]/.test(Ue))return/^script$/i.test(x)?(R.characters(Ue,0,Ue.length),Ce):(Ue=Ue.replace(/&#?\w+;/g,C),R.characters(Ue,0,Ue.length),Ce)}return S+1}function fixSelfClosed(E,S,x,C){var R=C[x];return R==null&&(R=E.lastIndexOf("</"+x+">"),R<S&&(R=E.lastIndexOf("</"+x)),C[x]=R),R<S}function _copy(E,S){for(var x in E)Object.prototype.hasOwnProperty.call(E,x)&&(S[x]=E[x])}function parseDCC(E,S,x,C){var R=E.charAt(S+2);switch(R){case"-":if(E.charAt(S+3)==="-"){var Ce=E.indexOf("-->",S+4);return Ce>S?(x.comment(E,S+4,Ce-S-4),Ce+3):(C.error("Unclosed comment"),-1)}else return-1;default:if(E.substr(S+3,6)=="CDATA["){var Ce=E.indexOf("]]>",S+9);return x.startCDATA(),x.characters(E,S+9,Ce-S-9),x.endCDATA(),Ce+3}var Ue=split(E,S),je=Ue.length;if(je>1&&/!doctype/i.test(Ue[0][0])){var Xe=Ue[1][0],Ye=!1,et=!1;je>3&&(/^public$/i.test(Ue[2][0])?(Ye=Ue[3][0],et=je>4&&Ue[4][0]):/^system$/i.test(Ue[2][0])&&(et=Ue[3][0]));var ht=Ue[je-1];return x.startDTD(Xe,Ye,et),x.endDTD(),ht.index+ht[0].length}}return-1}function parseInstruction(E,S,x){var C=E.indexOf("?>",S);if(C){var R=E.substring(S,C).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return R?(R[0].length,x.processingInstruction(R[1],R[2]),C+2):-1}return-1}function ElementAttributes(){this.attributeNames={}}ElementAttributes.prototype={setTagName:function(E){if(!tagNamePattern.test(E))throw new Error("invalid tagName:"+E);this.tagName=E},addValue:function(E,S,x){if(!tagNamePattern.test(E))throw new Error("invalid attribute:"+E);this.attributeNames[E]=this.length,this[this.length++]={qName:E,value:S,offset:x}},length:0,getLocalName:function(E){return this[E].localName},getLocator:function(E){return this[E].locator},getQName:function(E){return this[E].qName},getURI:function(E){return this[E].uri},getValue:function(E){return this[E].value}};function split(E,S){var x,C=[],R=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(R.lastIndex=S,R.exec(E);x=R.exec(E);)if(C.push(x),x[1])return C}sax$1.XMLReader=XMLReader$1;sax$1.ParseError=ParseError$1;var conventions=conventions$2,dom=dom$1,entities=entities$1,sax=sax$1,DOMImplementation=dom.DOMImplementation,NAMESPACE=conventions.NAMESPACE,ParseError=sax.ParseError,XMLReader=sax.XMLReader;function normalizeLineEndings(E){return E.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function DOMParser$1(E){this.options=E||{locator:{}}}DOMParser$1.prototype.parseFromString=function(E,S){var x=this.options,C=new XMLReader,R=x.domBuilder||new DOMHandler,Ce=x.errorHandler,Ue=x.locator,je=x.xmlns||{},Xe=/\/x?html?$/.test(S),Ye=Xe?entities.HTML_ENTITIES:entities.XML_ENTITIES;Ue&&R.setDocumentLocator(Ue),C.errorHandler=buildErrorHandler(Ce,R,Ue),C.domBuilder=x.domBuilder||R,Xe&&(je[""]=NAMESPACE.HTML),je.xml=je.xml||NAMESPACE.XML;var et=x.normalizeLineEndings||normalizeLineEndings;return E&&typeof E=="string"?C.parse(et(E),je,Ye):C.errorHandler.error("invalid doc source"),R.doc};function buildErrorHandler(E,S,x){if(!E){if(S instanceof DOMHandler)return S;E=S}var C={},R=E instanceof Function;x=x||{};function Ce(Ue){var je=E[Ue];!je&&R&&(je=E.length==2?function(Xe){E(Ue,Xe)}:E),C[Ue]=je&&function(Xe){je("[xmldom "+Ue+"]	"+Xe+_locator(x))}||function(){}}return Ce("warning"),Ce("error"),Ce("fatalError"),C}function DOMHandler(){this.cdata=!1}function position(E,S){S.lineNumber=E.lineNumber,S.columnNumber=E.columnNumber}DOMHandler.prototype={startDocument:function(){this.doc=new DOMImplementation().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(E,S,x,C){var R=this.doc,Ce=R.createElementNS(E,x||S),Ue=C.length;appendElement(this,Ce),this.currentElement=Ce,this.locator&&position(this.locator,Ce);for(var je=0;je<Ue;je++){var E=C.getURI(je),Xe=C.getValue(je),x=C.getQName(je),Ye=R.createAttributeNS(E,x);this.locator&&position(C.getLocator(je),Ye),Ye.value=Ye.nodeValue=Xe,Ce.setAttributeNode(Ye)}},endElement:function(E,S,x){var C=this.currentElement;C.tagName,this.currentElement=C.parentNode},startPrefixMapping:function(E,S){},endPrefixMapping:function(E){},processingInstruction:function(E,S){var x=this.doc.createProcessingInstruction(E,S);this.locator&&position(this.locator,x),appendElement(this,x)},ignorableWhitespace:function(E,S,x){},characters:function(E,S,x){if(E=_toString.apply(this,arguments),E){if(this.cdata)var C=this.doc.createCDATASection(E);else var C=this.doc.createTextNode(E);this.currentElement?this.currentElement.appendChild(C):/^\s*$/.test(E)&&this.doc.appendChild(C),this.locator&&position(this.locator,C)}},skippedEntity:function(E){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(E){(this.locator=E)&&(E.lineNumber=0)},comment:function(E,S,x){E=_toString.apply(this,arguments);var C=this.doc.createComment(E);this.locator&&position(this.locator,C),appendElement(this,C)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(E,S,x){var C=this.doc.implementation;if(C&&C.createDocumentType){var R=C.createDocumentType(E,S,x);this.locator&&position(this.locator,R),appendElement(this,R),this.doc.doctype=R}},warning:function(E){console.warn("[xmldom warning]	"+E,_locator(this.locator))},error:function(E){console.error("[xmldom error]	"+E,_locator(this.locator))},fatalError:function(E){throw new ParseError(E,this.locator)}};function _locator(E){if(E)return`
@`+(E.systemId||"")+"#[line:"+E.lineNumber+",col:"+E.columnNumber+"]"}function _toString(E,S,x){return typeof E=="string"?E.substr(S,x):E.length>=S+x||S?new java.lang.String(E,S,x)+"":E}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(E){DOMHandler.prototype[E]=function(){return null}});function appendElement(E,S){E.currentElement?E.currentElement.appendChild(S):E.doc.appendChild(S)}domParser.__DOMHandler=DOMHandler;domParser.normalizeLineEndings=normalizeLineEndings;domParser.DOMParser=DOMParser$1;var DOMParser=domParser.DOMParser;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const isObject$2=E=>!!E&&typeof E=="object",merge$2=(...E)=>E.reduce((S,x)=>(typeof x!="object"||Object.keys(x).forEach(C=>{Array.isArray(S[C])&&Array.isArray(x[C])?S[C]=S[C].concat(x[C]):isObject$2(S[C])&&isObject$2(x[C])?S[C]=merge$2(S[C],x[C]):S[C]=x[C]}),S),{}),values$1=E=>Object.keys(E).map(S=>E[S]),range=(E,S)=>{const x=[];for(let C=E;C<S;C++)x.push(C);return x},flatten=E=>E.reduce((S,x)=>S.concat(x),[]),from=E=>{if(!E.length)return[];const S=[];for(let x=0;x<E.length;x++)S.push(E[x]);return S},findIndexes=(E,S)=>E.reduce((x,C,R)=>(C[S]&&x.push(R),x),[]),union=(E,S)=>values$1(E.reduce((x,C)=>(C.forEach(R=>{x[S(R)]=R}),x),{}));var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const urlTypeToSegment=({baseUrl:E="",source:S="",range:x="",indexRange:C=""})=>{const R={uri:S,resolvedUri:resolveUrl$1(E||"",S)};if(x||C){const Ue=(x||C).split("-");let je=window$1$1.BigInt?window$1$1.BigInt(Ue[0]):parseInt(Ue[0],10),Xe=window$1$1.BigInt?window$1$1.BigInt(Ue[1]):parseInt(Ue[1],10);je<Number.MAX_SAFE_INTEGER&&typeof je=="bigint"&&(je=Number(je)),Xe<Number.MAX_SAFE_INTEGER&&typeof Xe=="bigint"&&(Xe=Number(Xe));let Ye;typeof Xe=="bigint"||typeof je=="bigint"?Ye=window$1$1.BigInt(Xe)-window$1$1.BigInt(je)+window$1$1.BigInt(1):Ye=Xe-je+1,typeof Ye=="bigint"&&Ye<Number.MAX_SAFE_INTEGER&&(Ye=Number(Ye)),R.byterange={length:Ye,offset:je}}return R},byteRangeToString=E=>{let S;return typeof E.offset=="bigint"||typeof E.length=="bigint"?S=window$1$1.BigInt(E.offset)+window$1$1.BigInt(E.length)-window$1$1.BigInt(1):S=E.offset+E.length-1,`${E.offset}-${S}`},parseEndNumber=E=>(E&&typeof E!="number"&&(E=parseInt(E,10)),isNaN(E)?null:E),segmentRange={static(E){const{duration:S,timescale:x=1,sourceDuration:C,periodDuration:R}=E,Ce=parseEndNumber(E.endNumber),Ue=S/x;return typeof Ce=="number"?{start:0,end:Ce}:typeof R=="number"?{start:0,end:R/Ue}:{start:0,end:C/Ue}},dynamic(E){const{NOW:S,clientOffset:x,availabilityStartTime:C,timescale:R=1,duration:Ce,periodStart:Ue=0,minimumUpdatePeriod:je=0,timeShiftBufferDepth:Xe=1/0}=E,Ye=parseEndNumber(E.endNumber),et=(S+x)/1e3,ht=C+Ue,Ot=et+je-ht,Mt=Math.ceil(Ot*R/Ce),St=Math.floor((et-ht-Xe)*R/Ce),Ut=Math.floor((et-ht)*R/Ce);return{start:Math.max(0,St),end:typeof Ye=="number"?Ye:Math.min(Mt,Ut)}}},toSegments=E=>S=>{const{duration:x,timescale:C=1,periodStart:R,startNumber:Ce=1}=E;return{number:Ce+S,duration:x/C,timeline:R,time:S*x}},parseByDuration=E=>{const{type:S,duration:x,timescale:C=1,periodDuration:R,sourceDuration:Ce}=E,{start:Ue,end:je}=segmentRange[S](E),Xe=range(Ue,je).map(toSegments(E));if(S==="static"){const Ye=Xe.length-1,et=typeof R=="number"?R:Ce;Xe[Ye].duration=et-x/C*Ye}return Xe},segmentsFromBase=E=>{const{baseUrl:S,initialization:x={},sourceDuration:C,indexRange:R="",periodStart:Ce,presentationTime:Ue,number:je=0,duration:Xe}=E;if(!S)throw new Error(errors.NO_BASE_URL);const Ye=urlTypeToSegment({baseUrl:S,source:x.sourceURL,range:x.range}),et=urlTypeToSegment({baseUrl:S,source:S,indexRange:R});if(et.map=Ye,Xe){const ht=parseByDuration(E);ht.length&&(et.duration=ht[0].duration,et.timeline=ht[0].timeline)}else C&&(et.duration=C,et.timeline=Ce);return et.presentationTime=Ue||Ce,et.number=je,[et]},addSidxSegmentsToPlaylist$1=(E,S,x)=>{const C=E.sidx.map?E.sidx.map:null,R=E.sidx.duration,Ce=E.timeline||0,Ue=E.sidx.byterange,je=Ue.offset+Ue.length,Xe=S.timescale,Ye=S.references.filter(Ut=>Ut.referenceType!==1),et=[],ht=E.endList?"static":"dynamic",Dt=E.sidx.timeline;let Ot=Dt,Mt=E.mediaSequence||0,St;typeof S.firstOffset=="bigint"?St=window$1$1.BigInt(je)+S.firstOffset:St=je+S.firstOffset;for(let Ut=0;Ut<Ye.length;Ut++){const kt=S.references[Ut],Ft=kt.referencedSize,Nt=kt.subsegmentDuration;let Gt;typeof St=="bigint"?Gt=St+window$1$1.BigInt(Ft)-window$1$1.BigInt(1):Gt=St+Ft-1;const Zt=`${St}-${Gt}`,li=segmentsFromBase({baseUrl:x,timescale:Xe,timeline:Ce,periodStart:Dt,presentationTime:Ot,number:Mt,duration:Nt,sourceDuration:R,indexRange:Zt,type:ht})[0];C&&(li.map=C),et.push(li),typeof St=="bigint"?St+=window$1$1.BigInt(Ft):St+=Ft,Ot+=Nt/Xe,Mt++}return E.segments=et,E},SUPPORTED_MEDIA_TYPES=["AUDIO","SUBTITLES"],TIME_FUDGE=1/60,getUniqueTimelineStarts=E=>union(E,({timeline:S})=>S).sort((S,x)=>S.timeline>x.timeline?1:-1),findPlaylistWithName=(E,S)=>{for(let x=0;x<E.length;x++)if(E[x].attributes.NAME===S)return E[x];return null},getMediaGroupPlaylists=E=>{let S=[];return forEachMediaGroup$1(E,SUPPORTED_MEDIA_TYPES,(x,C,R,Ce)=>{S=S.concat(x.playlists||[])}),S},updateMediaSequenceForPlaylist=({playlist:E,mediaSequence:S})=>{E.mediaSequence=S,E.segments.forEach((x,C)=>{x.number=E.mediaSequence+C})},updateSequenceNumbers=({oldPlaylists:E,newPlaylists:S,timelineStarts:x})=>{S.forEach(C=>{C.discontinuitySequence=x.findIndex(function({timeline:Xe}){return Xe===C.timeline});const R=findPlaylistWithName(E,C.attributes.NAME);if(!R||C.sidx)return;const Ce=C.segments[0],Ue=R.segments.findIndex(function(Xe){return Math.abs(Xe.presentationTime-Ce.presentationTime)<TIME_FUDGE});if(Ue===-1){updateMediaSequenceForPlaylist({playlist:C,mediaSequence:R.mediaSequence+R.segments.length}),C.segments[0].discontinuity=!0,C.discontinuityStarts.unshift(0),(!R.segments.length&&C.timeline>R.timeline||R.segments.length&&C.timeline>R.segments[R.segments.length-1].timeline)&&C.discontinuitySequence--;return}R.segments[Ue].discontinuity&&!Ce.discontinuity&&(Ce.discontinuity=!0,C.discontinuityStarts.unshift(0),C.discontinuitySequence--),updateMediaSequenceForPlaylist({playlist:C,mediaSequence:R.segments[Ue].number})})},positionManifestOnTimeline=({oldManifest:E,newManifest:S})=>{const x=E.playlists.concat(getMediaGroupPlaylists(E)),C=S.playlists.concat(getMediaGroupPlaylists(S));return S.timelineStarts=getUniqueTimelineStarts([E.timelineStarts,S.timelineStarts]),updateSequenceNumbers({oldPlaylists:x,newPlaylists:C,timelineStarts:S.timelineStarts}),S},generateSidxKey=E=>E&&E.uri+"-"+byteRangeToString(E.byterange),mergeDiscontiguousPlaylists=E=>{const S=E.reduce(function(C,R){return C[R.attributes.baseUrl]||(C[R.attributes.baseUrl]=[]),C[R.attributes.baseUrl].push(R),C},{});let x=[];return Object.values(S).forEach(C=>{const R=values$1(C.reduce((Ce,Ue)=>{const je=Ue.attributes.id+(Ue.attributes.lang||"");return Ce[je]?(Ue.segments&&(Ue.segments[0]&&(Ue.segments[0].discontinuity=!0),Ce[je].segments.push(...Ue.segments)),Ue.attributes.contentProtection&&(Ce[je].attributes.contentProtection=Ue.attributes.contentProtection)):(Ce[je]=Ue,Ce[je].attributes.timelineStarts=[]),Ce[je].attributes.timelineStarts.push({start:Ue.attributes.periodStart,timeline:Ue.attributes.periodStart}),Ce},{}));x=x.concat(R)}),x.map(C=>(C.discontinuityStarts=findIndexes(C.segments||[],"discontinuity"),C))},addSidxSegmentsToPlaylist=(E,S)=>{const x=generateSidxKey(E.sidx),C=x&&S[x]&&S[x].sidx;return C&&addSidxSegmentsToPlaylist$1(E,C,E.sidx.resolvedUri),E},addSidxSegmentsToPlaylists=(E,S={})=>{if(!Object.keys(S).length)return E;for(const x in E)E[x]=addSidxSegmentsToPlaylist(E[x],S);return E},formatAudioPlaylist=({attributes:E,segments:S,sidx:x,mediaSequence:C,discontinuitySequence:R,discontinuityStarts:Ce},Ue)=>{const je={attributes:{NAME:E.id,BANDWIDTH:E.bandwidth,CODECS:E.codecs,"PROGRAM-ID":1},uri:"",endList:E.type==="static",timeline:E.periodStart,resolvedUri:E.baseUrl||"",targetDuration:E.duration,discontinuitySequence:R,discontinuityStarts:Ce,timelineStarts:E.timelineStarts,mediaSequence:C,segments:S};return E.contentProtection&&(je.contentProtection=E.contentProtection),E.serviceLocation&&(je.attributes.serviceLocation=E.serviceLocation),x&&(je.sidx=x),Ue&&(je.attributes.AUDIO="audio",je.attributes.SUBTITLES="subs"),je},formatVttPlaylist=({attributes:E,segments:S,mediaSequence:x,discontinuityStarts:C,discontinuitySequence:R})=>{typeof S>"u"&&(S=[{uri:E.baseUrl,timeline:E.periodStart,resolvedUri:E.baseUrl||"",duration:E.sourceDuration,number:0}],E.duration=E.sourceDuration);const Ce={NAME:E.id,BANDWIDTH:E.bandwidth,"PROGRAM-ID":1};E.codecs&&(Ce.CODECS=E.codecs);const Ue={attributes:Ce,uri:"",endList:E.type==="static",timeline:E.periodStart,resolvedUri:E.baseUrl||"",targetDuration:E.duration,timelineStarts:E.timelineStarts,discontinuityStarts:C,discontinuitySequence:R,mediaSequence:x,segments:S};return E.serviceLocation&&(Ue.attributes.serviceLocation=E.serviceLocation),Ue},organizeAudioPlaylists=(E,S={},x=!1)=>{let C;const R=E.reduce((Ce,Ue)=>{const je=Ue.attributes.role&&Ue.attributes.role.value||"",Xe=Ue.attributes.lang||"";let Ye=Ue.attributes.label||"main";if(Xe&&!Ue.attributes.label){const ht=je?` (${je})`:"";Ye=`${Ue.attributes.lang}${ht}`}Ce[Ye]||(Ce[Ye]={language:Xe,autoselect:!0,default:je==="main",playlists:[],uri:""});const et=addSidxSegmentsToPlaylist(formatAudioPlaylist(Ue,x),S);return Ce[Ye].playlists.push(et),typeof C>"u"&&je==="main"&&(C=Ue,C.default=!0),Ce},{});if(!C){const Ce=Object.keys(R)[0];R[Ce].default=!0}return R},organizeVttPlaylists=(E,S={})=>E.reduce((x,C)=>{const R=C.attributes.label||C.attributes.lang||"text",Ce=C.attributes.lang||"und";return x[R]||(x[R]={language:Ce,default:!1,autoselect:!1,playlists:[],uri:""}),x[R].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(C),S)),x},{}),organizeCaptionServices=E=>E.reduce((S,x)=>(x&&x.forEach(C=>{const{channel:R,language:Ce}=C;S[Ce]={autoselect:!1,default:!1,instreamId:R,language:Ce},C.hasOwnProperty("aspectRatio")&&(S[Ce].aspectRatio=C.aspectRatio),C.hasOwnProperty("easyReader")&&(S[Ce].easyReader=C.easyReader),C.hasOwnProperty("3D")&&(S[Ce]["3D"]=C["3D"])}),S),{}),formatVideoPlaylist=({attributes:E,segments:S,sidx:x,discontinuityStarts:C})=>{const R={attributes:{NAME:E.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:E.width,height:E.height},CODECS:E.codecs,BANDWIDTH:E.bandwidth,"PROGRAM-ID":1},uri:"",endList:E.type==="static",timeline:E.periodStart,resolvedUri:E.baseUrl||"",targetDuration:E.duration,discontinuityStarts:C,timelineStarts:E.timelineStarts,segments:S};return E.frameRate&&(R.attributes["FRAME-RATE"]=E.frameRate),E.contentProtection&&(R.contentProtection=E.contentProtection),E.serviceLocation&&(R.attributes.serviceLocation=E.serviceLocation),x&&(R.sidx=x),R},videoOnly=({attributes:E})=>E.mimeType==="video/mp4"||E.mimeType==="video/webm"||E.contentType==="video",audioOnly=({attributes:E})=>E.mimeType==="audio/mp4"||E.mimeType==="audio/webm"||E.contentType==="audio",vttOnly=({attributes:E})=>E.mimeType==="text/vtt"||E.contentType==="text",addMediaSequenceValues=(E,S)=>{E.forEach(x=>{x.mediaSequence=0,x.discontinuitySequence=S.findIndex(function({timeline:C}){return C===x.timeline}),x.segments&&x.segments.forEach((C,R)=>{C.number=R})})},flattenMediaGroupPlaylists=E=>E?Object.keys(E).reduce((S,x)=>{const C=E[x];return S.concat(C.playlists)},[]):[],toM3u8=({dashPlaylists:E,locations:S,contentSteering:x,sidxMapping:C={},previousManifest:R,eventStream:Ce})=>{if(!E.length)return{};const{sourceDuration:Ue,type:je,suggestedPresentationDelay:Xe,minimumUpdatePeriod:Ye}=E[0].attributes,et=mergeDiscontiguousPlaylists(E.filter(videoOnly)).map(formatVideoPlaylist),ht=mergeDiscontiguousPlaylists(E.filter(audioOnly)),Dt=mergeDiscontiguousPlaylists(E.filter(vttOnly)),Ot=E.map(Gt=>Gt.attributes.captionServices).filter(Boolean),Mt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:Ue,playlists:addSidxSegmentsToPlaylists(et,C)};Ye>=0&&(Mt.minimumUpdatePeriod=Ye*1e3),S&&(Mt.locations=S),x&&(Mt.contentSteering=x),je==="dynamic"&&(Mt.suggestedPresentationDelay=Xe),Ce&&Ce.length>0&&(Mt.eventStream=Ce);const St=Mt.playlists.length===0,Ut=ht.length?organizeAudioPlaylists(ht,C,St):null,kt=Dt.length?organizeVttPlaylists(Dt,C):null,Ft=et.concat(flattenMediaGroupPlaylists(Ut),flattenMediaGroupPlaylists(kt)),Nt=Ft.map(({timelineStarts:Gt})=>Gt);return Mt.timelineStarts=getUniqueTimelineStarts(Nt),addMediaSequenceValues(Ft,Mt.timelineStarts),Ut&&(Mt.mediaGroups.AUDIO.audio=Ut),kt&&(Mt.mediaGroups.SUBTITLES.subs=kt),Ot.length&&(Mt.mediaGroups["CLOSED-CAPTIONS"].cc=organizeCaptionServices(Ot)),R?positionManifestOnTimeline({oldManifest:R,newManifest:Mt}):Mt},getLiveRValue=(E,S,x)=>{const{NOW:C,clientOffset:R,availabilityStartTime:Ce,timescale:Ue=1,periodStart:je=0,minimumUpdatePeriod:Xe=0}=E,Ye=(C+R)/1e3,et=Ce+je,Dt=Ye+Xe-et;return Math.ceil((Dt*Ue-S)/x)},parseByTimeline=(E,S)=>{const{type:x,minimumUpdatePeriod:C=0,media:R="",sourceDuration:Ce,timescale:Ue=1,startNumber:je=1,periodStart:Xe}=E,Ye=[];let et=-1;for(let ht=0;ht<S.length;ht++){const Dt=S[ht],Ot=Dt.d,Mt=Dt.r||0,St=Dt.t||0;et<0&&(et=St),St&&St>et&&(et=St);let Ut;if(Mt<0){const Nt=ht+1;Nt===S.length?x==="dynamic"&&C>0&&R.indexOf("$Number$")>0?Ut=getLiveRValue(E,et,Ot):Ut=(Ce*Ue-et)/Ot:Ut=(S[Nt].t-et)/Ot}else Ut=Mt+1;const kt=je+Ye.length+Ut;let Ft=je+Ye.length;for(;Ft<kt;)Ye.push({number:Ft,duration:Ot/Ue,time:et,timeline:Xe}),et+=Ot,Ft++}return Ye},identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,identifierReplacement=E=>(S,x,C,R)=>{if(S==="$$")return"$";if(typeof E[x]>"u")return S;const Ce=""+E[x];return x==="RepresentationID"||(C?R=parseInt(R,10):R=1,Ce.length>=R)?Ce:`${new Array(R-Ce.length+1).join("0")}${Ce}`},constructTemplateUrl=(E,S)=>E.replace(identifierPattern,identifierReplacement(S)),parseTemplateInfo=(E,S)=>!E.duration&&!S?[{number:E.startNumber||1,duration:E.sourceDuration,time:0,timeline:E.periodStart}]:E.duration?parseByDuration(E):parseByTimeline(E,S),segmentsFromTemplate=(E,S)=>{const x={RepresentationID:E.id,Bandwidth:E.bandwidth||0},{initialization:C={sourceURL:"",range:""}}=E,R=urlTypeToSegment({baseUrl:E.baseUrl,source:constructTemplateUrl(C.sourceURL,x),range:C.range});return parseTemplateInfo(E,S).map(Ue=>{x.Number=Ue.number,x.Time=Ue.time;const je=constructTemplateUrl(E.media||"",x),Xe=E.timescale||1,Ye=E.presentationTimeOffset||0,et=E.periodStart+(Ue.time-Ye)/Xe;return{uri:je,timeline:Ue.timeline,duration:Ue.duration,resolvedUri:resolveUrl$1(E.baseUrl||"",je),map:R,number:Ue.number,presentationTime:et}})},SegmentURLToSegmentObject=(E,S)=>{const{baseUrl:x,initialization:C={}}=E,R=urlTypeToSegment({baseUrl:x,source:C.sourceURL,range:C.range}),Ce=urlTypeToSegment({baseUrl:x,source:S.media,range:S.mediaRange});return Ce.map=R,Ce},segmentsFromList=(E,S)=>{const{duration:x,segmentUrls:C=[],periodStart:R}=E;if(!x&&!S||x&&S)throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);const Ce=C.map(Xe=>SegmentURLToSegmentObject(E,Xe));let Ue;return x&&(Ue=parseByDuration(E)),S&&(Ue=parseByTimeline(E,S)),Ue.map((Xe,Ye)=>{if(Ce[Ye]){const et=Ce[Ye],ht=E.timescale||1,Dt=E.presentationTimeOffset||0;return et.timeline=Xe.timeline,et.duration=Xe.duration,et.number=Xe.number,et.presentationTime=R+(Xe.time-Dt)/ht,et}}).filter(Xe=>Xe)},generateSegments=({attributes:E,segmentInfo:S})=>{let x,C;S.template?(C=segmentsFromTemplate,x=merge$2(E,S.template)):S.base?(C=segmentsFromBase,x=merge$2(E,S.base)):S.list&&(C=segmentsFromList,x=merge$2(E,S.list));const R={attributes:E};if(!C)return R;const Ce=C(x,S.segmentTimeline);if(x.duration){const{duration:Ue,timescale:je=1}=x;x.duration=Ue/je}else Ce.length?x.duration=Ce.reduce((Ue,je)=>Math.max(Ue,Math.ceil(je.duration)),0):x.duration=0;return R.attributes=x,R.segments=Ce,S.base&&x.indexRange&&(R.sidx=Ce[0],R.segments=[]),R},toPlaylists=E=>E.map(generateSegments),findChildren=(E,S)=>from(E.childNodes).filter(({tagName:x})=>x===S),getContent=E=>E.textContent.trim(),parseDivisionValue=E=>parseFloat(E.split("/").reduce((S,x)=>S/x)),parseDuration=E=>{const je=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(E);if(!je)return 0;const[Xe,Ye,et,ht,Dt,Ot]=je.slice(1);return parseFloat(Xe||0)*31536e3+parseFloat(Ye||0)*2592e3+parseFloat(et||0)*86400+parseFloat(ht||0)*3600+parseFloat(Dt||0)*60+parseFloat(Ot||0)},parseDate=E=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(E)&&(E+="Z"),Date.parse(E)),parsers={mediaPresentationDuration(E){return parseDuration(E)},availabilityStartTime(E){return parseDate(E)/1e3},minimumUpdatePeriod(E){return parseDuration(E)},suggestedPresentationDelay(E){return parseDuration(E)},type(E){return E},timeShiftBufferDepth(E){return parseDuration(E)},start(E){return parseDuration(E)},width(E){return parseInt(E,10)},height(E){return parseInt(E,10)},bandwidth(E){return parseInt(E,10)},frameRate(E){return parseDivisionValue(E)},startNumber(E){return parseInt(E,10)},timescale(E){return parseInt(E,10)},presentationTimeOffset(E){return parseInt(E,10)},duration(E){const S=parseInt(E,10);return isNaN(S)?parseDuration(E):S},d(E){return parseInt(E,10)},t(E){return parseInt(E,10)},r(E){return parseInt(E,10)},presentationTime(E){return parseInt(E,10)},DEFAULT(E){return E}},parseAttributes=E=>E&&E.attributes?from(E.attributes).reduce((S,x)=>{const C=parsers[x.name]||parsers.DEFAULT;return S[x.name]=C(x.value),S},{}):{},keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},buildBaseUrls=(E,S)=>S.length?flatten(E.map(function(x){return S.map(function(C){const R=getContent(C),Ce=resolveUrl$1(x.baseUrl,R),Ue=merge$2(parseAttributes(C),{baseUrl:Ce});return Ce!==R&&!Ue.serviceLocation&&x.serviceLocation&&(Ue.serviceLocation=x.serviceLocation),Ue})})):E,getSegmentInformation=E=>{const S=findChildren(E,"SegmentTemplate")[0],x=findChildren(E,"SegmentList")[0],C=x&&findChildren(x,"SegmentURL").map(ht=>merge$2({tag:"SegmentURL"},parseAttributes(ht))),R=findChildren(E,"SegmentBase")[0],Ce=x||S,Ue=Ce&&findChildren(Ce,"SegmentTimeline")[0],je=x||R||S,Xe=je&&findChildren(je,"Initialization")[0],Ye=S&&parseAttributes(S);Ye&&Xe?Ye.initialization=Xe&&parseAttributes(Xe):Ye&&Ye.initialization&&(Ye.initialization={sourceURL:Ye.initialization});const et={template:Ye,segmentTimeline:Ue&&findChildren(Ue,"S").map(ht=>parseAttributes(ht)),list:x&&merge$2(parseAttributes(x),{segmentUrls:C,initialization:parseAttributes(Xe)}),base:R&&merge$2(parseAttributes(R),{initialization:parseAttributes(Xe)})};return Object.keys(et).forEach(ht=>{et[ht]||delete et[ht]}),et},inheritBaseUrls=(E,S,x)=>C=>{const R=findChildren(C,"BaseURL"),Ce=buildBaseUrls(S,R),Ue=merge$2(E,parseAttributes(C)),je=getSegmentInformation(C);return Ce.map(Xe=>({segmentInfo:merge$2(x,je),attributes:merge$2(Ue,Xe)}))},generateKeySystemInformation=E=>E.reduce((S,x)=>{const C=parseAttributes(x);C.schemeIdUri&&(C.schemeIdUri=C.schemeIdUri.toLowerCase());const R=keySystemsMap[C.schemeIdUri];if(R){S[R]={attributes:C};const Ce=findChildren(x,"cenc:pssh")[0];if(Ce){const Ue=getContent(Ce);S[R].pssh=Ue&&decodeB64ToUint8Array(Ue)}}return S},{}),parseCaptionServiceMetadata=E=>{if(E.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof E.value!="string"?[]:E.value.split(";")).map(x=>{let C,R;return R=x,/^CC\d=/.test(x)?[C,R]=x.split("="):/^CC\d$/.test(x)&&(C=x),{channel:C,language:R}});if(E.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof E.value!="string"?[]:E.value.split(";")).map(x=>{const C={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(x)){const[R,Ce=""]=x.split("=");C.channel=R,C.language=x,Ce.split(",").forEach(Ue=>{const[je,Xe]=Ue.split(":");je==="lang"?C.language=Xe:je==="er"?C.easyReader=Number(Xe):je==="war"?C.aspectRatio=Number(Xe):je==="3D"&&(C["3D"]=Number(Xe))})}else C.language=x;return C.channel&&(C.channel="SERVICE"+C.channel),C})},toEventStream=E=>flatten(findChildren(E.node,"EventStream").map(S=>{const x=parseAttributes(S),C=x.schemeIdUri;return findChildren(S,"Event").map(R=>{const Ce=parseAttributes(R),Ue=Ce.presentationTime||0,je=x.timescale||1,Xe=Ce.duration||0,Ye=Ue/je+E.attributes.start;return{schemeIdUri:C,value:x.value,id:Ce.id,start:Ye,end:Ye+Xe/je,messageData:getContent(R)||Ce.messageData,contentEncoding:x.contentEncoding,presentationTimeOffset:x.presentationTimeOffset||0}})})),toRepresentations=(E,S,x)=>C=>{const R=parseAttributes(C),Ce=buildBaseUrls(S,findChildren(C,"BaseURL")),Ue=findChildren(C,"Role")[0],je={role:parseAttributes(Ue)};let Xe=merge$2(E,R,je);const Ye=findChildren(C,"Accessibility")[0],et=parseCaptionServiceMetadata(parseAttributes(Ye));et&&(Xe=merge$2(Xe,{captionServices:et}));const ht=findChildren(C,"Label")[0];if(ht&&ht.childNodes.length){const Ut=ht.childNodes[0].nodeValue.trim();Xe=merge$2(Xe,{label:Ut})}const Dt=generateKeySystemInformation(findChildren(C,"ContentProtection"));Object.keys(Dt).length&&(Xe=merge$2(Xe,{contentProtection:Dt}));const Ot=getSegmentInformation(C),Mt=findChildren(C,"Representation"),St=merge$2(x,Ot);return flatten(Mt.map(inheritBaseUrls(Xe,Ce,St)))},toAdaptationSets=(E,S)=>(x,C)=>{const R=buildBaseUrls(S,findChildren(x.node,"BaseURL")),Ce=merge$2(E,{periodStart:x.attributes.start});typeof x.attributes.duration=="number"&&(Ce.periodDuration=x.attributes.duration);const Ue=findChildren(x.node,"AdaptationSet"),je=getSegmentInformation(x.node);return flatten(Ue.map(toRepresentations(Ce,R,je)))},generateContentSteeringInformation=(E,S)=>{if(E.length>1&&S({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!E.length)return null;const x=merge$2({serverURL:getContent(E[0])},parseAttributes(E[0]));return x.queryBeforeStart=x.queryBeforeStart==="true",x},getPeriodStart=({attributes:E,priorPeriodAttributes:S,mpdType:x})=>typeof E.start=="number"?E.start:S&&typeof S.start=="number"&&typeof S.duration=="number"?S.start+S.duration:!S&&x==="static"?0:null,inheritAttributes=(E,S={})=>{const{manifestUri:x="",NOW:C=Date.now(),clientOffset:R=0,eventHandler:Ce=function(){}}=S,Ue=findChildren(E,"Period");if(!Ue.length)throw new Error(errors.INVALID_NUMBER_OF_PERIOD);const je=findChildren(E,"Location"),Xe=parseAttributes(E),Ye=buildBaseUrls([{baseUrl:x}],findChildren(E,"BaseURL")),et=findChildren(E,"ContentSteering");Xe.type=Xe.type||"static",Xe.sourceDuration=Xe.mediaPresentationDuration||0,Xe.NOW=C,Xe.clientOffset=R,je.length&&(Xe.locations=je.map(getContent));const ht=[];return Ue.forEach((Dt,Ot)=>{const Mt=parseAttributes(Dt),St=ht[Ot-1];Mt.start=getPeriodStart({attributes:Mt,priorPeriodAttributes:St?St.attributes:null,mpdType:Xe.type}),ht.push({node:Dt,attributes:Mt})}),{locations:Xe.locations,contentSteeringInfo:generateContentSteeringInformation(et,Ce),representationInfo:flatten(ht.map(toAdaptationSets(Xe,Ye))),eventStream:flatten(ht.map(toEventStream))}},stringToMpdXml=E=>{if(E==="")throw new Error(errors.DASH_EMPTY_MANIFEST);const S=new DOMParser;let x,C;try{x=S.parseFromString(E,"application/xml"),C=x&&x.documentElement.tagName==="MPD"?x.documentElement:null}catch{}if(!C||C&&C.getElementsByTagName("parsererror").length>0)throw new Error(errors.DASH_INVALID_XML);return C},parseUTCTimingScheme=E=>{const S=findChildren(E,"UTCTiming")[0];if(!S)return null;const x=parseAttributes(S);switch(x.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":x.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":x.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":x.method="DIRECT",x.value=Date.parse(x.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME)}return x},parse=(E,S={})=>{const x=inheritAttributes(stringToMpdXml(E),S),C=toPlaylists(x.representationInfo);return toM3u8({dashPlaylists:C,locations:x.locations,contentSteering:x.contentSteeringInfo,sidxMapping:S.sidxMapping,previousManifest:S.previousManifest,eventStream:x.eventStream})},parseUTCTiming=E=>parseUTCTimingScheme(stringToMpdXml(E));var MAX_UINT32=Math.pow(2,32),getUint64$1=function(E){var S=new DataView(E.buffer,E.byteOffset,E.byteLength),x;return S.getBigUint64?(x=S.getBigUint64(0),x<Number.MAX_SAFE_INTEGER?Number(x):x):S.getUint32(0)*MAX_UINT32+S.getUint32(4)},numbers={getUint64:getUint64$1,MAX_UINT32},getUint64=numbers.getUint64,parseSidx=function(E){var S=new DataView(E.buffer,E.byteOffset,E.byteLength),x={version:E[0],flags:new Uint8Array(E.subarray(1,4)),references:[],referenceId:S.getUint32(4),timescale:S.getUint32(8)},C=12;x.version===0?(x.earliestPresentationTime=S.getUint32(C),x.firstOffset=S.getUint32(C+4),C+=8):(x.earliestPresentationTime=getUint64(E.subarray(C)),x.firstOffset=getUint64(E.subarray(C+8)),C+=16),C+=2;var R=S.getUint16(C);for(C+=2;R>0;C+=12,R--)x.references.push({referenceType:(E[C]&128)>>>7,referencedSize:S.getUint32(C)&2147483647,subsegmentDuration:S.getUint32(C+4),startsWithSap:!!(E[C+8]&128),sapType:(E[C+8]&112)>>>4,sapDeltaTime:S.getUint32(C+8)&268435455});return x},parseSidx_1=parseSidx;const parseSidx$1=getDefaultExportFromCjs(parseSidx_1);var ID3=toUint8([73,68,51]),getId3Size=function(S,x){x===void 0&&(x=0),S=toUint8(S);var C=S[x+5],R=S[x+6]<<21|S[x+7]<<14|S[x+8]<<7|S[x+9],Ce=(C&16)>>4;return Ce?R+20:R+10},getId3Offset=function E(S,x){return x===void 0&&(x=0),S=toUint8(S),S.length-x<10||!bytesMatch(S,ID3,{offset:x})?x:(x+=getId3Size(S,x),E(S,x))},normalizePath$1=function(S){return typeof S=="string"?stringToBytes(S):S},normalizePaths$1=function(S){return Array.isArray(S)?S.map(function(x){return normalizePath$1(x)}):[normalizePath$1(S)]},findBox=function E(S,x,C){C===void 0&&(C=!1),x=normalizePaths$1(x),S=toUint8(S);var R=[];if(!x.length)return R;for(var Ce=0;Ce<S.length;){var Ue=(S[Ce]<<24|S[Ce+1]<<16|S[Ce+2]<<8|S[Ce+3])>>>0,je=S.subarray(Ce+4,Ce+8);if(Ue===0)break;var Xe=Ce+Ue;if(Xe>S.length){if(C)break;Xe=S.length}var Ye=S.subarray(Ce+8,Xe);bytesMatch(je,x[0])&&(x.length===1?R.push(Ye):R.push.apply(R,E(Ye,x.slice(1),C))),Ce=Xe}return R},EBML_TAGS={EBML:toUint8([26,69,223,163]),DocType:toUint8([66,130]),Segment:toUint8([24,83,128,103]),SegmentInfo:toUint8([21,73,169,102]),Tracks:toUint8([22,84,174,107]),Track:toUint8([174]),TrackNumber:toUint8([215]),DefaultDuration:toUint8([35,227,131]),TrackEntry:toUint8([174]),TrackType:toUint8([131]),FlagDefault:toUint8([136]),CodecID:toUint8([134]),CodecPrivate:toUint8([99,162]),VideoTrack:toUint8([224]),AudioTrack:toUint8([225]),Cluster:toUint8([31,67,182,117]),Timestamp:toUint8([231]),TimestampScale:toUint8([42,215,177]),BlockGroup:toUint8([160]),BlockDuration:toUint8([155]),Block:toUint8([161]),SimpleBlock:toUint8([163])},LENGTH_TABLE=[128,64,32,16,8,4,2,1],getLength=function(S){for(var x=1,C=0;C<LENGTH_TABLE.length&&!(S&LENGTH_TABLE[C]);C++)x++;return x},getvint=function(S,x,C,R){C===void 0&&(C=!0),R===void 0&&(R=!1);var Ce=getLength(S[x]),Ue=S.subarray(x,x+Ce);return C&&(Ue=Array.prototype.slice.call(S,x,x+Ce),Ue[0]^=LENGTH_TABLE[Ce-1]),{length:Ce,value:bytesToNumber(Ue,{signed:R}),bytes:Ue}},normalizePath=function E(S){return typeof S=="string"?S.match(/.{1,2}/g).map(function(x){return E(x)}):typeof S=="number"?numberToBytes(S):S},normalizePaths=function(S){return Array.isArray(S)?S.map(function(x){return normalizePath(x)}):[normalizePath(S)]},getInfinityDataSize=function E(S,x,C){if(C>=x.length)return x.length;var R=getvint(x,C,!1);if(bytesMatch(S.bytes,R.bytes))return C;var Ce=getvint(x,C+R.length);return E(S,x,C+Ce.length+Ce.value+R.length)},findEbml=function E(S,x){x=normalizePaths(x),S=toUint8(S);var C=[];if(!x.length)return C;for(var R=0;R<S.length;){var Ce=getvint(S,R,!1),Ue=getvint(S,R+Ce.length),je=R+Ce.length+Ue.length;Ue.value===127&&(Ue.value=getInfinityDataSize(Ce,S,je),Ue.value!==S.length&&(Ue.value-=je));var Xe=je+Ue.value>S.length?S.length:je+Ue.value,Ye=S.subarray(je,Xe);bytesMatch(x[0],Ce.bytes)&&(x.length===1?C.push(Ye):C=C.concat(E(Ye,x.slice(1))));var et=Ce.length+Ue.length+Ye.length;R+=et}return C},NAL_TYPE_ONE=toUint8([0,0,0,1]),NAL_TYPE_TWO=toUint8([0,0,1]),EMULATION_PREVENTION=toUint8([0,0,3]),discardEmulationPreventionBytes=function(S){for(var x=[],C=1;C<S.length-2;)bytesMatch(S.subarray(C,C+3),EMULATION_PREVENTION)&&(x.push(C+2),C++),C++;if(x.length===0)return S;var R=S.length-x.length,Ce=new Uint8Array(R),Ue=0;for(C=0;C<R;Ue++,C++)Ue===x[0]&&(Ue++,x.shift()),Ce[C]=S[Ue];return Ce},findNal=function(S,x,C,R){S=toUint8(S),C=[].concat(C);for(var Ce=0,Ue,je=0;Ce<S.length&&(je<R||Ue);){var Xe=void 0;if(bytesMatch(S.subarray(Ce),NAL_TYPE_ONE)?Xe=4:bytesMatch(S.subarray(Ce),NAL_TYPE_TWO)&&(Xe=3),!Xe){Ce++;continue}if(je++,Ue)return discardEmulationPreventionBytes(S.subarray(Ue,Ce));var Ye=void 0;x==="h264"?Ye=S[Ce+Xe]&31:x==="h265"&&(Ye=S[Ce+Xe]>>1&63),C.indexOf(Ye)!==-1&&(Ue=Ce+Xe),Ce+=Xe+(x==="h264"?1:2)}return S.subarray(0,0)},findH264Nal=function(S,x,C){return findNal(S,"h264",x,C)},findH265Nal=function(S,x,C){return findNal(S,"h265",x,C)},CONSTANTS={webm:toUint8([119,101,98,109]),matroska:toUint8([109,97,116,114,111,115,107,97]),flac:toUint8([102,76,97,67]),ogg:toUint8([79,103,103,83]),ac3:toUint8([11,119]),riff:toUint8([82,73,70,70]),avi:toUint8([65,86,73]),wav:toUint8([87,65,86,69]),"3gp":toUint8([102,116,121,112,51,103]),mp4:toUint8([102,116,121,112]),fmp4:toUint8([115,116,121,112]),mov:toUint8([102,116,121,112,113,116]),moov:toUint8([109,111,111,118]),moof:toUint8([109,111,111,102])},_isLikely={aac:function(S){var x=getId3Offset(S);return bytesMatch(S,[255,16],{offset:x,mask:[255,22]})},mp3:function(S){var x=getId3Offset(S);return bytesMatch(S,[255,2],{offset:x,mask:[255,6]})},webm:function(S){var x=findEbml(S,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(x,CONSTANTS.webm)},mkv:function(S){var x=findEbml(S,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(x,CONSTANTS.matroska)},mp4:function(S){if(_isLikely["3gp"](S)||_isLikely.mov(S))return!1;if(bytesMatch(S,CONSTANTS.mp4,{offset:4})||bytesMatch(S,CONSTANTS.fmp4,{offset:4})||bytesMatch(S,CONSTANTS.moof,{offset:4})||bytesMatch(S,CONSTANTS.moov,{offset:4}))return!0},mov:function(S){return bytesMatch(S,CONSTANTS.mov,{offset:4})},"3gp":function(S){return bytesMatch(S,CONSTANTS["3gp"],{offset:4})},ac3:function(S){var x=getId3Offset(S);return bytesMatch(S,CONSTANTS.ac3,{offset:x})},ts:function(S){if(S.length<189&&S.length>=1)return S[0]===71;for(var x=0;x+188<S.length&&x<188;){if(S[x]===71&&S[x+188]===71)return!0;x+=1}return!1},flac:function(S){var x=getId3Offset(S);return bytesMatch(S,CONSTANTS.flac,{offset:x})},ogg:function(S){return bytesMatch(S,CONSTANTS.ogg)},avi:function(S){return bytesMatch(S,CONSTANTS.riff)&&bytesMatch(S,CONSTANTS.avi,{offset:8})},wav:function(S){return bytesMatch(S,CONSTANTS.riff)&&bytesMatch(S,CONSTANTS.wav,{offset:8})},h264:function(S){return findH264Nal(S,7,3).length},h265:function(S){return findH265Nal(S,[32,33],3).length}},isLikelyTypes=Object.keys(_isLikely).filter(function(E){return E!=="ts"&&E!=="h264"&&E!=="h265"}).concat(["ts","h264","h265"]);isLikelyTypes.forEach(function(E){var S=_isLikely[E];_isLikely[E]=function(x){return S(toUint8(x))}});var isLikely=_isLikely,detectContainerForBytes=function(S){S=toUint8(S);for(var x=0;x<isLikelyTypes.length;x++){var C=isLikelyTypes[x];if(isLikely[C](S))return C}return""},isLikelyFmp4MediaSegment=function(S){return findBox(S,["moof"]).length>0},ONE_SECOND_IN_TS=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds;secondsToVideoTs=function(E){return E*ONE_SECOND_IN_TS};secondsToAudioTs=function(E,S){return E*S};videoTsToSeconds=function(E){return E/ONE_SECOND_IN_TS};audioTsToSeconds=function(E,S){return E/S};audioTsToVideoTs=function(E,S){return secondsToVideoTs(audioTsToSeconds(E,S))};videoTsToAudioTs=function(E,S){return secondsToAudioTs(videoTsToSeconds(E),S)};metadataTsToSeconds=function(E,S,x){return videoTsToSeconds(x?E:E-S)};var clock={ONE_SECOND_IN_TS,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds};/**
 * @license
 * Video.js 8.19.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var version$6="8.19.1";const hooks_={},hooks=function(E,S){return hooks_[E]=hooks_[E]||[],S&&(hooks_[E]=hooks_[E].concat(S)),hooks_[E]},hook=function(E,S){hooks(E,S)},removeHook=function(E,S){const x=hooks(E).indexOf(S);return x<=-1?!1:(hooks_[E]=hooks_[E].slice(),hooks_[E].splice(x,1),!0)},hookOnce=function(E,S){hooks(E,[].concat(S).map(x=>{const C=(...R)=>(removeHook(E,C),x(...R));return C}))},FullscreenApi={prefixed:!0},apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],specApi=apiMap[0];let browserApi;for(let E=0;E<apiMap.length;E++)if(apiMap[E][1]in document$1$1){browserApi=apiMap[E];break}if(browserApi){for(let E=0;E<browserApi.length;E++)FullscreenApi[specApi[E]]=browserApi[E];FullscreenApi.prefixed=browserApi[0]!==specApi[0]}let history$1=[];const LogByTypeFactory=(E,S,x)=>(C,R,Ce)=>{const Ue=S.levels[R],je=new RegExp(`^(${Ue})$`);let Xe=E;if(C!=="log"&&Ce.unshift(C.toUpperCase()+":"),x&&(Xe=`%c${E}`,Ce.unshift(x)),Ce.unshift(Xe+":"),history$1){history$1.push([].concat(Ce));const et=history$1.length-1e3;history$1.splice(0,et>0?et:0)}if(!window$1$1.console)return;let Ye=window$1$1.console[C];!Ye&&C==="debug"&&(Ye=window$1$1.console.info||window$1$1.console.log),!(!Ye||!Ue||!je.test(C))&&Ye[Array.isArray(Ce)?"apply":"call"](window$1$1.console,Ce)};function createLogger$1(E,S=":",x=""){let C="info",R;function Ce(...Ue){R("log",C,Ue)}return R=LogByTypeFactory(E,Ce,x),Ce.createLogger=(Ue,je,Xe)=>{const Ye=je!==void 0?je:S,et=Xe!==void 0?Xe:x,ht=`${E} ${Ye} ${Ue}`;return createLogger$1(ht,Ye,et)},Ce.createNewLogger=(Ue,je,Xe)=>createLogger$1(Ue,je,Xe),Ce.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:C},Ce.level=Ue=>{if(typeof Ue=="string"){if(!Ce.levels.hasOwnProperty(Ue))throw new Error(`"${Ue}" in not a valid log level`);C=Ue}return C},Ce.history=()=>history$1?[].concat(history$1):[],Ce.history.filter=Ue=>(history$1||[]).filter(je=>new RegExp(`.*${Ue}.*`).test(je[0])),Ce.history.clear=()=>{history$1&&(history$1.length=0)},Ce.history.disable=()=>{history$1!==null&&(history$1.length=0,history$1=null)},Ce.history.enable=()=>{history$1===null&&(history$1=[])},Ce.error=(...Ue)=>R("error",C,Ue),Ce.warn=(...Ue)=>R("warn",C,Ue),Ce.debug=(...Ue)=>R("debug",C,Ue),Ce}const log$1=createLogger$1("VIDEOJS"),createLogger=log$1.createLogger,toString=Object.prototype.toString,keys=function(E){return isObject$1(E)?Object.keys(E):[]};function each(E,S){keys(E).forEach(x=>S(E[x],x))}function reduce(E,S,x=0){return keys(E).reduce((C,R)=>S(C,E[R],R),x)}function isObject$1(E){return!!E&&typeof E=="object"}function isPlain(E){return isObject$1(E)&&toString.call(E)==="[object Object]"&&E.constructor===Object}function merge$1(...E){const S={};return E.forEach(x=>{x&&each(x,(C,R)=>{if(!isPlain(C)){S[R]=C;return}isPlain(S[R])||(S[R]={}),S[R]=merge$1(S[R],C)})}),S}function values(E={}){const S=[];for(const x in E)if(E.hasOwnProperty(x)){const C=E[x];S.push(C)}return S}function defineLazyProperty(E,S,x,C=!0){const R=Ue=>Object.defineProperty(E,S,{value:Ue,enumerable:!0,writable:!0}),Ce={configurable:!0,enumerable:!0,get(){const Ue=x();return R(Ue),Ue}};return C&&(Ce.set=R),Object.defineProperty(E,S,Ce)}var Obj=Object.freeze({__proto__:null,each,reduce,isObject:isObject$1,isPlain,merge:merge$1,values,defineLazyProperty});let IS_IPOD=!1,IOS_VERSION=null,IS_ANDROID=!1,ANDROID_VERSION,IS_FIREFOX=!1,IS_EDGE=!1,IS_CHROMIUM=!1,IS_CHROME=!1,CHROMIUM_VERSION=null,CHROME_VERSION=null;const IS_CHROMECAST_RECEIVER=!!(window$1$1.cast&&window$1$1.cast.framework&&window$1$1.cast.framework.CastReceiverContext);let IE_VERSION=null,IS_SAFARI=!1,IS_WINDOWS=!1,IS_IPAD=!1,IS_IPHONE=!1,IS_TIZEN=!1,IS_WEBOS=!1,IS_SMART_TV=!1;const TOUCH_ENABLED=!!(isReal()&&("ontouchstart"in window$1$1||window$1$1.navigator.maxTouchPoints||window$1$1.DocumentTouch&&window$1$1.document instanceof window$1$1.DocumentTouch)),UAD=window$1$1.navigator&&window$1$1.navigator.userAgentData;UAD&&UAD.platform&&UAD.brands&&(IS_ANDROID=UAD.platform==="Android",IS_EDGE=!!UAD.brands.find(E=>E.brand==="Microsoft Edge"),IS_CHROMIUM=!!UAD.brands.find(E=>E.brand==="Chromium"),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=(UAD.brands.find(E=>E.brand==="Chromium")||{}).version||null,IS_WINDOWS=UAD.platform==="Windows");if(!IS_CHROMIUM){const E=window$1$1.navigator&&window$1$1.navigator.userAgent||"";IS_IPOD=/iPod/i.test(E),IOS_VERSION=function(){const S=E.match(/OS (\d+)_/i);return S&&S[1]?S[1]:null}(),IS_ANDROID=/Android/i.test(E),ANDROID_VERSION=function(){const S=E.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!S)return null;const x=S[1]&&parseFloat(S[1]),C=S[2]&&parseFloat(S[2]);return x&&C?parseFloat(S[1]+"."+S[2]):x||null}(),IS_FIREFOX=/Firefox/i.test(E),IS_EDGE=/Edg/i.test(E),IS_CHROMIUM=/Chrome/i.test(E)||/CriOS/i.test(E),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=function(){const S=E.match(/(Chrome|CriOS)\/(\d+)/);return S&&S[2]?parseFloat(S[2]):null}(),IE_VERSION=function(){const S=/MSIE\s(\d+)\.\d/.exec(E);let x=S&&parseFloat(S[1]);return!x&&/Trident\/7.0/i.test(E)&&/rv:11.0/.test(E)&&(x=11),x}(),IS_TIZEN=/Tizen/i.test(E),IS_WEBOS=/Web0S/i.test(E),IS_SMART_TV=IS_TIZEN||IS_WEBOS,IS_SAFARI=/Safari/i.test(E)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE&&!IS_SMART_TV,IS_WINDOWS=/Windows/i.test(E),IS_IPAD=/iPad/i.test(E)||IS_SAFARI&&TOUCH_ENABLED&&!/iPhone/i.test(E),IS_IPHONE=/iPhone/i.test(E)&&!IS_IPAD}const IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD,IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var browser=Object.freeze({__proto__:null,get IS_IPOD(){return IS_IPOD},get IOS_VERSION(){return IOS_VERSION},get IS_ANDROID(){return IS_ANDROID},get ANDROID_VERSION(){return ANDROID_VERSION},get IS_FIREFOX(){return IS_FIREFOX},get IS_EDGE(){return IS_EDGE},get IS_CHROMIUM(){return IS_CHROMIUM},get IS_CHROME(){return IS_CHROME},get CHROMIUM_VERSION(){return CHROMIUM_VERSION},get CHROME_VERSION(){return CHROME_VERSION},IS_CHROMECAST_RECEIVER,get IE_VERSION(){return IE_VERSION},get IS_SAFARI(){return IS_SAFARI},get IS_WINDOWS(){return IS_WINDOWS},get IS_IPAD(){return IS_IPAD},get IS_IPHONE(){return IS_IPHONE},get IS_TIZEN(){return IS_TIZEN},get IS_WEBOS(){return IS_WEBOS},get IS_SMART_TV(){return IS_SMART_TV},TOUCH_ENABLED,IS_IOS,IS_ANY_SAFARI});function isNonBlankString(E){return typeof E=="string"&&!!E.trim()}function throwIfWhitespace(E){if(E.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal(){return document$1$1===window$1$1.document}function isEl(E){return isObject$1(E)&&E.nodeType===1}function isInFrame(){try{return window$1$1.parent!==window$1$1.self}catch{return!0}}function createQuerier(E){return function(S,x){if(!isNonBlankString(S))return document$1$1[E](null);isNonBlankString(x)&&(x=document$1$1.querySelector(x));const C=isEl(x)?x:document$1$1;return C[E]&&C[E](S)}}function createEl(E="div",S={},x={},C){const R=document$1$1.createElement(E);return Object.getOwnPropertyNames(S).forEach(function(Ce){const Ue=S[Ce];Ce==="textContent"?textContent(R,Ue):(R[Ce]!==Ue||Ce==="tabIndex")&&(R[Ce]=Ue)}),Object.getOwnPropertyNames(x).forEach(function(Ce){R.setAttribute(Ce,x[Ce])}),C&&appendContent(R,C),R}function textContent(E,S){return typeof E.textContent>"u"?E.innerText=S:E.textContent=S,E}function prependTo(E,S){S.firstChild?S.insertBefore(E,S.firstChild):S.appendChild(E)}function hasClass(E,S){return throwIfWhitespace(S),E.classList.contains(S)}function addClass(E,...S){return E.classList.add(...S.reduce((x,C)=>x.concat(C.split(/\s+/)),[])),E}function removeClass(E,...S){return E?(E.classList.remove(...S.reduce((x,C)=>x.concat(C.split(/\s+/)),[])),E):(log$1.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass$1(E,S,x){return typeof x=="function"&&(x=x(E,S)),typeof x!="boolean"&&(x=void 0),S.split(/\s+/).forEach(C=>E.classList.toggle(C,x)),E}function setAttributes(E,S){Object.getOwnPropertyNames(S).forEach(function(x){const C=S[x];C===null||typeof C>"u"||C===!1?E.removeAttribute(x):E.setAttribute(x,C===!0?"":C)})}function getAttributes(E){const S={},x=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(E&&E.attributes&&E.attributes.length>0){const C=E.attributes;for(let R=C.length-1;R>=0;R--){const Ce=C[R].name;let Ue=C[R].value;x.includes(Ce)&&(Ue=Ue!==null),S[Ce]=Ue}}return S}function getAttribute(E,S){return E.getAttribute(S)}function setAttribute(E,S,x){E.setAttribute(S,x)}function removeAttribute(E,S){E.removeAttribute(S)}function blockTextSelection(){document$1$1.body.focus(),document$1$1.onselectstart=function(){return!1}}function unblockTextSelection(){document$1$1.onselectstart=function(){return!0}}function getBoundingClientRect(E){if(E&&E.getBoundingClientRect&&E.parentNode){const S=E.getBoundingClientRect(),x={};return["bottom","height","left","right","top","width"].forEach(C=>{S[C]!==void 0&&(x[C]=S[C])}),x.height||(x.height=parseFloat(computedStyle(E,"height"))),x.width||(x.width=parseFloat(computedStyle(E,"width"))),x}}function findPosition(E){if(!E||E&&!E.offsetParent)return{left:0,top:0,width:0,height:0};const S=E.offsetWidth,x=E.offsetHeight;let C=0,R=0;for(;E.offsetParent&&E!==document$1$1[FullscreenApi.fullscreenElement];)C+=E.offsetLeft,R+=E.offsetTop,E=E.offsetParent;return{left:C,top:R,width:S,height:x}}function getPointerPosition(E,S){const x={x:0,y:0};if(IS_IOS){let et=E;for(;et&&et.nodeName.toLowerCase()!=="html";){const ht=computedStyle(et,"transform");if(/^matrix/.test(ht)){const Dt=ht.slice(7,-1).split(/,\s/).map(Number);x.x+=Dt[4],x.y+=Dt[5]}else if(/^matrix3d/.test(ht)){const Dt=ht.slice(9,-1).split(/,\s/).map(Number);x.x+=Dt[12],x.y+=Dt[13]}if(et.assignedSlot&&et.assignedSlot.parentElement&&window$1$1.WebKitCSSMatrix){const Dt=window$1$1.getComputedStyle(et.assignedSlot.parentElement).transform,Ot=new window$1$1.WebKitCSSMatrix(Dt);x.x+=Ot.m41,x.y+=Ot.m42}et=et.parentNode||et.host}}const C={},R=findPosition(S.target),Ce=findPosition(E),Ue=Ce.width,je=Ce.height;let Xe=S.offsetY-(Ce.top-R.top),Ye=S.offsetX-(Ce.left-R.left);return S.changedTouches&&(Ye=S.changedTouches[0].pageX-Ce.left,Xe=S.changedTouches[0].pageY+Ce.top,IS_IOS&&(Ye-=x.x,Xe-=x.y)),C.y=1-Math.max(0,Math.min(1,Xe/je)),C.x=Math.max(0,Math.min(1,Ye/Ue)),C}function isTextNode(E){return isObject$1(E)&&E.nodeType===3}function emptyEl(E){for(;E.firstChild;)E.removeChild(E.firstChild);return E}function normalizeContent(E){return typeof E=="function"&&(E=E()),(Array.isArray(E)?E:[E]).map(S=>{if(typeof S=="function"&&(S=S()),isEl(S)||isTextNode(S))return S;if(typeof S=="string"&&/\S/.test(S))return document$1$1.createTextNode(S)}).filter(S=>S)}function appendContent(E,S){return normalizeContent(S).forEach(x=>E.appendChild(x)),E}function insertContent(E,S){return appendContent(emptyEl(E),S)}function isSingleLeftClick(E){return E.button===void 0&&E.buttons===void 0||E.button===0&&E.buttons===void 0||E.type==="mouseup"&&E.button===0&&E.buttons===0||E.type==="mousedown"&&E.button===0&&E.buttons===0?!0:!(E.button!==0||E.buttons!==1)}const $=createQuerier("querySelector"),$$=createQuerier("querySelectorAll");function computedStyle(E,S){if(!E||!S)return"";if(typeof window$1$1.getComputedStyle=="function"){let x;try{x=window$1$1.getComputedStyle(E)}catch{return""}return x?x.getPropertyValue(S)||x[S]:""}return""}function copyStyleSheetsToWindow(E){[...document$1$1.styleSheets].forEach(S=>{try{const x=[...S.cssRules].map(R=>R.cssText).join(""),C=document$1$1.createElement("style");C.textContent=x,E.document.head.appendChild(C)}catch{const C=document$1$1.createElement("link");C.rel="stylesheet",C.type=S.type,C.media=S.media.mediaText,C.href=S.href,E.document.head.appendChild(C)}})}var Dom=Object.freeze({__proto__:null,isReal,isEl,isInFrame,createEl,textContent,prependTo,hasClass,addClass,removeClass,toggleClass:toggleClass$1,setAttributes,getAttributes,getAttribute,setAttribute,removeAttribute,blockTextSelection,unblockTextSelection,getBoundingClientRect,findPosition,getPointerPosition,isTextNode,emptyEl,normalizeContent,appendContent,insertContent,isSingleLeftClick,$,$$,computedStyle,copyStyleSheetsToWindow});let _windowLoaded=!1,videojs$1;const autoSetup=function(){if(videojs$1.options.autoSetup===!1)return;const E=Array.prototype.slice.call(document$1$1.getElementsByTagName("video")),S=Array.prototype.slice.call(document$1$1.getElementsByTagName("audio")),x=Array.prototype.slice.call(document$1$1.getElementsByTagName("video-js")),C=E.concat(S,x);if(C&&C.length>0)for(let R=0,Ce=C.length;R<Ce;R++){const Ue=C[R];if(Ue&&Ue.getAttribute)Ue.player===void 0&&Ue.getAttribute("data-setup")!==null&&videojs$1(Ue);else{autoSetupTimeout(1);break}}else _windowLoaded||autoSetupTimeout(1)};function autoSetupTimeout(E,S){isReal()&&(S&&(videojs$1=S),window$1$1.setTimeout(autoSetup,E))}function setWindowLoaded(){_windowLoaded=!0,window$1$1.removeEventListener("load",setWindowLoaded)}isReal()&&(document$1$1.readyState==="complete"?setWindowLoaded():window$1$1.addEventListener("load",setWindowLoaded));const createStyleElement=function(E){const S=document$1$1.createElement("style");return S.className=E,S},setTextContent=function(E,S){E.styleSheet?E.styleSheet.cssText=S:E.textContent=S};var DomData=new WeakMap;const _initialGuid=3;let _guid=_initialGuid;function newGUID(){return _guid++}function _cleanUpEvents(E,S){if(!DomData.has(E))return;const x=DomData.get(E);x.handlers[S].length===0&&(delete x.handlers[S],E.removeEventListener?E.removeEventListener(S,x.dispatcher,!1):E.detachEvent&&E.detachEvent("on"+S,x.dispatcher)),Object.getOwnPropertyNames(x.handlers).length<=0&&(delete x.handlers,delete x.dispatcher,delete x.disabled),Object.getOwnPropertyNames(x).length===0&&DomData.delete(E)}function _handleMultipleEvents(E,S,x,C){x.forEach(function(R){E(S,R,C)})}function fixEvent(E){if(E.fixed_)return E;function S(){return!0}function x(){return!1}if(!E||!E.isPropagationStopped||!E.isImmediatePropagationStopped){const C=E||window$1$1.event;E={};const R=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const Ce in C)R.includes(Ce)||Ce==="returnValue"&&C.preventDefault||(E[Ce]=C[Ce]);if(E.target||(E.target=E.srcElement||document$1$1),E.relatedTarget||(E.relatedTarget=E.fromElement===E.target?E.toElement:E.fromElement),E.preventDefault=function(){C.preventDefault&&C.preventDefault(),E.returnValue=!1,C.returnValue=!1,E.defaultPrevented=!0},E.defaultPrevented=!1,E.stopPropagation=function(){C.stopPropagation&&C.stopPropagation(),E.cancelBubble=!0,C.cancelBubble=!0,E.isPropagationStopped=S},E.isPropagationStopped=x,E.stopImmediatePropagation=function(){C.stopImmediatePropagation&&C.stopImmediatePropagation(),E.isImmediatePropagationStopped=S,E.stopPropagation()},E.isImmediatePropagationStopped=x,E.clientX!==null&&E.clientX!==void 0){const Ce=document$1$1.documentElement,Ue=document$1$1.body;E.pageX=E.clientX+(Ce&&Ce.scrollLeft||Ue&&Ue.scrollLeft||0)-(Ce&&Ce.clientLeft||Ue&&Ue.clientLeft||0),E.pageY=E.clientY+(Ce&&Ce.scrollTop||Ue&&Ue.scrollTop||0)-(Ce&&Ce.clientTop||Ue&&Ue.clientTop||0)}E.which=E.charCode||E.keyCode,E.button!==null&&E.button!==void 0&&(E.button=E.button&1?0:E.button&4?1:E.button&2?2:0)}return E.fixed_=!0,E}let _supportsPassive;const supportsPassive=function(){if(typeof _supportsPassive!="boolean"){_supportsPassive=!1;try{const E=Object.defineProperty({},"passive",{get(){_supportsPassive=!0}});window$1$1.addEventListener("test",null,E),window$1$1.removeEventListener("test",null,E)}catch{}}return _supportsPassive},passiveEvents=["touchstart","touchmove"];function on$1(E,S,x){if(Array.isArray(S))return _handleMultipleEvents(on$1,E,S,x);DomData.has(E)||DomData.set(E,{});const C=DomData.get(E);if(C.handlers||(C.handlers={}),C.handlers[S]||(C.handlers[S]=[]),x.guid||(x.guid=newGUID()),C.handlers[S].push(x),C.dispatcher||(C.disabled=!1,C.dispatcher=function(R,Ce){if(C.disabled)return;R=fixEvent(R);const Ue=C.handlers[R.type];if(Ue){const je=Ue.slice(0);for(let Xe=0,Ye=je.length;Xe<Ye&&!R.isImmediatePropagationStopped();Xe++)try{je[Xe].call(E,R,Ce)}catch(et){log$1.error(et)}}}),C.handlers[S].length===1)if(E.addEventListener){let R=!1;supportsPassive()&&passiveEvents.indexOf(S)>-1&&(R={passive:!0}),E.addEventListener(S,C.dispatcher,R)}else E.attachEvent&&E.attachEvent("on"+S,C.dispatcher)}function off$1(E,S,x){if(!DomData.has(E))return;const C=DomData.get(E);if(!C.handlers)return;if(Array.isArray(S))return _handleMultipleEvents(off$1,E,S,x);const R=function(Ue,je){C.handlers[je]=[],_cleanUpEvents(Ue,je)};if(S===void 0){for(const Ue in C.handlers)Object.prototype.hasOwnProperty.call(C.handlers||{},Ue)&&R(E,Ue);return}const Ce=C.handlers[S];if(Ce){if(!x){R(E,S);return}if(x.guid)for(let Ue=0;Ue<Ce.length;Ue++)Ce[Ue].guid===x.guid&&Ce.splice(Ue--,1);_cleanUpEvents(E,S)}}function trigger(E,S,x){const C=DomData.has(E)?DomData.get(E):{},R=E.parentNode||E.ownerDocument;if(typeof S=="string"?S={type:S,target:E}:S.target||(S.target=E),S=fixEvent(S),C.dispatcher&&C.dispatcher.call(E,S,x),R&&!S.isPropagationStopped()&&S.bubbles===!0)trigger.call(null,R,S,x);else if(!R&&!S.defaultPrevented&&S.target&&S.target[S.type]){DomData.has(S.target)||DomData.set(S.target,{});const Ce=DomData.get(S.target);S.target[S.type]&&(Ce.disabled=!0,typeof S.target[S.type]=="function"&&S.target[S.type](),Ce.disabled=!1)}return!S.defaultPrevented}function one(E,S,x){if(Array.isArray(S))return _handleMultipleEvents(one,E,S,x);const C=function(){off$1(E,S,C),x.apply(this,arguments)};C.guid=x.guid=x.guid||newGUID(),on$1(E,S,C)}function any(E,S,x){const C=function(){off$1(E,S,C),x.apply(this,arguments)};C.guid=x.guid=x.guid||newGUID(),on$1(E,S,C)}var Events=Object.freeze({__proto__:null,fixEvent,on:on$1,off:off$1,trigger,one,any});const UPDATE_REFRESH_INTERVAL=30,bind_=function(E,S,x){S.guid||(S.guid=newGUID());const C=S.bind(E);return C.guid=x?x+"_"+S.guid:S.guid,C},throttle$1=function(E,S){let x=window$1$1.performance.now();return function(...R){const Ce=window$1$1.performance.now();Ce-x>=S&&(E(...R),x=Ce)}},debounce=function(E,S,x,C=window$1$1){let R;const Ce=()=>{C.clearTimeout(R),R=null},Ue=function(){const je=this,Xe=arguments;let Ye=function(){R=null,Ye=null,x||E.apply(je,Xe)};!R&&x&&E.apply(je,Xe),C.clearTimeout(R),R=C.setTimeout(Ye,S)};return Ue.cancel=Ce,Ue};var Fn=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL,bind_,throttle:throttle$1,debounce});let EVENT_MAP;class EventTarget$2{on(S,x){const C=this.addEventListener;this.addEventListener=()=>{},on$1(this,S,x),this.addEventListener=C}off(S,x){off$1(this,S,x)}one(S,x){const C=this.addEventListener;this.addEventListener=()=>{},one(this,S,x),this.addEventListener=C}any(S,x){const C=this.addEventListener;this.addEventListener=()=>{},any(this,S,x),this.addEventListener=C}trigger(S){const x=S.type||S;typeof S=="string"&&(S={type:x}),S=fixEvent(S),this.allowedEvents_[x]&&this["on"+x]&&this["on"+x](S),trigger(this,S)}queueTrigger(S){EVENT_MAP||(EVENT_MAP=new Map);const x=S.type||S;let C=EVENT_MAP.get(this);C||(C=new Map,EVENT_MAP.set(this,C));const R=C.get(x);C.delete(x),window$1$1.clearTimeout(R);const Ce=window$1$1.setTimeout(()=>{C.delete(x),C.size===0&&(C=null,EVENT_MAP.delete(this)),this.trigger(S)},0);C.set(x,Ce)}}EventTarget$2.prototype.allowedEvents_={};EventTarget$2.prototype.addEventListener=EventTarget$2.prototype.on;EventTarget$2.prototype.removeEventListener=EventTarget$2.prototype.off;EventTarget$2.prototype.dispatchEvent=EventTarget$2.prototype.trigger;const objName=E=>typeof E.name=="function"?E.name():typeof E.name=="string"?E.name:E.name_?E.name_:E.constructor&&E.constructor.name?E.constructor.name:typeof E,isEvented=E=>E instanceof EventTarget$2||!!E.eventBusEl_&&["on","one","off","trigger"].every(S=>typeof E[S]=="function"),addEventedCallback=(E,S)=>{isEvented(E)?S():(E.eventedCallbacks||(E.eventedCallbacks=[]),E.eventedCallbacks.push(S))},isValidEventType=E=>typeof E=="string"&&/\S/.test(E)||Array.isArray(E)&&!!E.length,validateTarget=(E,S,x)=>{if(!E||!E.nodeName&&!isEvented(E))throw new Error(`Invalid target for ${objName(S)}#${x}; must be a DOM node or evented object.`)},validateEventType=(E,S,x)=>{if(!isValidEventType(E))throw new Error(`Invalid event type for ${objName(S)}#${x}; must be a non-empty string or array.`)},validateListener=(E,S,x)=>{if(typeof E!="function")throw new Error(`Invalid listener for ${objName(S)}#${x}; must be a function.`)},normalizeListenArgs=(E,S,x)=>{const C=S.length<3||S[0]===E||S[0]===E.eventBusEl_;let R,Ce,Ue;return C?(R=E.eventBusEl_,S.length>=3&&S.shift(),[Ce,Ue]=S):(R=S[0],Ce=S[1],Ue=S[2]),validateTarget(R,E,x),validateEventType(Ce,E,x),validateListener(Ue,E,x),Ue=bind_(E,Ue),{isTargetingSelf:C,target:R,type:Ce,listener:Ue}},listen=(E,S,x,C)=>{validateTarget(E,E,S),E.nodeName?Events[S](E,x,C):E[S](x,C)},EventedMixin={on(...E){const{isTargetingSelf:S,target:x,type:C,listener:R}=normalizeListenArgs(this,E,"on");if(listen(x,"on",C,R),!S){const Ce=()=>this.off(x,C,R);Ce.guid=R.guid;const Ue=()=>this.off("dispose",Ce);Ue.guid=R.guid,listen(this,"on","dispose",Ce),listen(x,"on","dispose",Ue)}},one(...E){const{isTargetingSelf:S,target:x,type:C,listener:R}=normalizeListenArgs(this,E,"one");if(S)listen(x,"one",C,R);else{const Ce=(...Ue)=>{this.off(x,C,Ce),R.apply(null,Ue)};Ce.guid=R.guid,listen(x,"one",C,Ce)}},any(...E){const{isTargetingSelf:S,target:x,type:C,listener:R}=normalizeListenArgs(this,E,"any");if(S)listen(x,"any",C,R);else{const Ce=(...Ue)=>{this.off(x,C,Ce),R.apply(null,Ue)};Ce.guid=R.guid,listen(x,"any",C,Ce)}},off(E,S,x){if(!E||isValidEventType(E))off$1(this.eventBusEl_,E,S);else{const C=E,R=S;validateTarget(C,this,"off"),validateEventType(R,this,"off"),validateListener(x,this,"off"),x=bind_(this,x),this.off("dispose",x),C.nodeName?(off$1(C,R,x),off$1(C,"dispose",x)):isEvented(C)&&(C.off(R,x),C.off("dispose",x))}},trigger(E,S){validateTarget(this.eventBusEl_,this,"trigger");const x=E&&typeof E!="string"?E.type:E;if(!isValidEventType(x))throw new Error(`Invalid event type for ${objName(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return trigger(this.eventBusEl_,E,S)}};function evented(E,S={}){const{eventBusKey:x}=S;if(x){if(!E[x].nodeName)throw new Error(`The eventBusKey "${x}" does not refer to an element.`);E.eventBusEl_=E[x]}else E.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return Object.assign(E,EventedMixin),E.eventedCallbacks&&E.eventedCallbacks.forEach(C=>{C()}),E.on("dispose",()=>{E.off(),[E,E.el_,E.eventBusEl_].forEach(function(C){C&&DomData.has(C)&&DomData.delete(C)}),window$1$1.setTimeout(()=>{E.eventBusEl_=null},0)}),E}const StatefulMixin={state:{},setState(E){typeof E=="function"&&(E=E());let S;return each(E,(x,C)=>{this.state[C]!==x&&(S=S||{},S[C]={from:this.state[C],to:x}),this.state[C]=x}),S&&isEvented(this)&&this.trigger({changes:S,type:"statechanged"}),S}};function stateful(E,S){return Object.assign(E,StatefulMixin),E.state=Object.assign({},E.state,S),typeof E.handleStateChanged=="function"&&isEvented(E)&&E.on("statechanged",E.handleStateChanged),E}const toLowerCase=function(E){return typeof E!="string"?E:E.replace(/./,S=>S.toLowerCase())},toTitleCase$1=function(E){return typeof E!="string"?E:E.replace(/./,S=>S.toUpperCase())},titleCaseEquals=function(E,S){return toTitleCase$1(E)===toTitleCase$1(S)};var Str=Object.freeze({__proto__:null,toLowerCase,toTitleCase:toTitleCase$1,titleCaseEquals});class Component$1{constructor(S,x,C){if(!S&&this.play?this.player_=S=this:this.player_=S,this.isDisposed_=!1,this.parentComponent_=null,this.options_=merge$1({},this.options_),x=this.options_=merge$1(this.options_,x),this.id_=x.id||x.el&&x.el.id,!this.id_){const R=S&&S.id&&S.id()||"no_player";this.id_=`${R}_component_${newGUID()}`}this.name_=x.name||null,x.el?this.el_=x.el:x.createEl!==!1&&(this.el_=this.createEl()),x.className&&this.el_&&x.className.split(" ").forEach(R=>this.addClass(R)),["on","off","one","any","trigger"].forEach(R=>{this[R]=void 0}),x.evented!==!1&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,x.initChildren!==!1&&this.initChildren(),this.ready(C),x.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(S={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let x=this.children_.length-1;x>=0;x--)this.children_[x].dispose&&this.children_[x].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(S.restoreEl?this.el_.parentNode.replaceChild(S.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(S){return S?(this.options_=merge$1(this.options_,S),this.options_):this.options_}el(){return this.el_}createEl(S,x,C){return createEl(S,x,C)}localize(S,x,C=S){const R=this.player_.language&&this.player_.language(),Ce=this.player_.languages&&this.player_.languages(),Ue=Ce&&Ce[R],je=R&&R.split("-")[0],Xe=Ce&&Ce[je];let Ye=C;return Ue&&Ue[S]?Ye=Ue[S]:Xe&&Xe[S]&&(Ye=Xe[S]),x&&(Ye=Ye.replace(/\{(\d+)\}/g,function(et,ht){const Dt=x[ht-1];let Ot=Dt;return typeof Dt>"u"&&(Ot=et),Ot})),Ye}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(S){return this.childIndex_[S]}getChild(S){if(S)return this.childNameIndex_[S]}getDescendant(...S){S=S.reduce((C,R)=>C.concat(R),[]);let x=this;for(let C=0;C<S.length;C++)if(x=x.getChild(S[C]),!x||!x.getChild)return;return x}setIcon(S,x=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const C="http://www.w3.org/2000/svg",R=createEl("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),Ce=document$1$1.createElementNS(C,"svg");Ce.setAttributeNS(null,"viewBox","0 0 512 512");const Ue=document$1$1.createElementNS(C,"use");return Ce.appendChild(Ue),Ue.setAttributeNS(null,"href",`#vjs-icon-${S}`),R.appendChild(Ce),this.iconIsSet_?x.replaceChild(R,x.querySelector(".vjs-icon-placeholder")):x.appendChild(R),this.iconIsSet_=!0,R}addChild(S,x={},C=this.children_.length){let R,Ce;if(typeof S=="string"){Ce=toTitleCase$1(S);const Ue=x.componentClass||Ce;x.name=Ce;const je=Component$1.getComponent(Ue);if(!je)throw new Error(`Component ${Ue} does not exist`);if(typeof je!="function")return null;R=new je(this.player_||this,x)}else R=S;if(R.parentComponent_&&R.parentComponent_.removeChild(R),this.children_.splice(C,0,R),R.parentComponent_=this,typeof R.id=="function"&&(this.childIndex_[R.id()]=R),Ce=Ce||R.name&&toTitleCase$1(R.name()),Ce&&(this.childNameIndex_[Ce]=R,this.childNameIndex_[toLowerCase(Ce)]=R),typeof R.el=="function"&&R.el()){let Ue=null;this.children_[C+1]&&(this.children_[C+1].el_?Ue=this.children_[C+1].el_:isEl(this.children_[C+1])&&(Ue=this.children_[C+1])),this.contentEl().insertBefore(R.el(),Ue)}return R}removeChild(S){if(typeof S=="string"&&(S=this.getChild(S)),!S||!this.children_)return;let x=!1;for(let R=this.children_.length-1;R>=0;R--)if(this.children_[R]===S){x=!0,this.children_.splice(R,1);break}if(!x)return;S.parentComponent_=null,this.childIndex_[S.id()]=null,this.childNameIndex_[toTitleCase$1(S.name())]=null,this.childNameIndex_[toLowerCase(S.name())]=null;const C=S.el();C&&C.parentNode===this.contentEl()&&this.contentEl().removeChild(S.el())}initChildren(){const S=this.options_.children;if(S){const x=this.options_,C=Ue=>{const je=Ue.name;let Xe=Ue.opts;if(x[je]!==void 0&&(Xe=x[je]),Xe===!1)return;Xe===!0&&(Xe={}),Xe.playerOptions=this.options_.playerOptions;const Ye=this.addChild(je,Xe);Ye&&(this[je]=Ye)};let R;const Ce=Component$1.getComponent("Tech");Array.isArray(S)?R=S:R=Object.keys(S),R.concat(Object.keys(this.options_).filter(function(Ue){return!R.some(function(je){return typeof je=="string"?Ue===je:Ue===je.name})})).map(Ue=>{let je,Xe;return typeof Ue=="string"?(je=Ue,Xe=S[je]||this.options_[je]||{}):(je=Ue.name,Xe=Ue),{name:je,opts:Xe}}).filter(Ue=>{const je=Component$1.getComponent(Ue.opts.componentClass||toTitleCase$1(Ue.name));return je&&!Ce.isTech(je)}).forEach(C)}}buildCSSClass(){return""}ready(S,x=!1){if(S){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(S);return}x?S.call(this):this.setTimeout(S,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const S=this.readyQueue_;this.readyQueue_=[],S&&S.length>0&&S.forEach(function(x){x.call(this)},this),this.trigger("ready")},1)}$(S,x){return $(S,x||this.contentEl())}$$(S,x){return $$(S,x||this.contentEl())}hasClass(S){return hasClass(this.el_,S)}addClass(...S){addClass(this.el_,...S)}removeClass(...S){removeClass(this.el_,...S)}toggleClass(S,x){toggleClass$1(this.el_,S,x)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(S){return getAttribute(this.el_,S)}setAttribute(S,x){setAttribute(this.el_,S,x)}removeAttribute(S){removeAttribute(this.el_,S)}width(S,x){return this.dimension("width",S,x)}height(S,x){return this.dimension("height",S,x)}dimensions(S,x){this.width(S,!0),this.height(x)}dimension(S,x,C){if(x!==void 0){(x===null||x!==x)&&(x=0),(""+x).indexOf("%")!==-1||(""+x).indexOf("px")!==-1?this.el_.style[S]=x:x==="auto"?this.el_.style[S]="":this.el_.style[S]=x+"px",C||this.trigger("componentresize");return}if(!this.el_)return 0;const R=this.el_.style[S],Ce=R.indexOf("px");return parseInt(Ce!==-1?R.slice(0,Ce):this.el_["offset"+toTitleCase$1(S)],10)}currentDimension(S){let x=0;if(S!=="width"&&S!=="height")throw new Error("currentDimension only accepts width or height value");if(x=computedStyle(this.el_,S),x=parseFloat(x),x===0||isNaN(x)){const C=`offset${toTitleCase$1(S)}`;x=this.el_[C]}return x}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const S=this.el_.getBoundingClientRect(),x={x:S.x,y:S.y,width:S.width,height:S.height,top:S.top,right:S.right,bottom:S.bottom,left:S.left},C={x:S.left+S.width/2,y:S.top+S.height/2,width:0,height:0,top:S.top+S.height/2,right:S.left+S.width/2,bottom:S.top+S.height/2,left:S.left+S.width/2};return{boundingClientRect:x,center:C}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(S){this.player_&&(S.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&S.stopPropagation(),this.player_.handleKeyDown(S))}handleKeyPress(S){this.handleKeyDown(S)}emitTapEvents(){let S=0,x=null;const C=10,R=200;let Ce;this.on("touchstart",function(je){je.touches.length===1&&(x={pageX:je.touches[0].pageX,pageY:je.touches[0].pageY},S=window$1$1.performance.now(),Ce=!0)}),this.on("touchmove",function(je){if(je.touches.length>1)Ce=!1;else if(x){const Xe=je.touches[0].pageX-x.pageX,Ye=je.touches[0].pageY-x.pageY;Math.sqrt(Xe*Xe+Ye*Ye)>C&&(Ce=!1)}});const Ue=function(){Ce=!1};this.on("touchleave",Ue),this.on("touchcancel",Ue),this.on("touchend",function(je){x=null,Ce===!0&&window$1$1.performance.now()-S<R&&(je.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const S=bind_(this.player(),this.player().reportUserActivity);let x;this.on("touchstart",function(){S(),this.clearInterval(x),x=this.setInterval(S,250)});const C=function(R){S(),this.clearInterval(x)};this.on("touchmove",S),this.on("touchend",C),this.on("touchcancel",C)}setTimeout(S,x){var C;return S=bind_(this,S),this.clearTimersOnDispose_(),C=window$1$1.setTimeout(()=>{this.setTimeoutIds_.has(C)&&this.setTimeoutIds_.delete(C),S()},x),this.setTimeoutIds_.add(C),C}clearTimeout(S){return this.setTimeoutIds_.has(S)&&(this.setTimeoutIds_.delete(S),window$1$1.clearTimeout(S)),S}setInterval(S,x){S=bind_(this,S),this.clearTimersOnDispose_();const C=window$1$1.setInterval(S,x);return this.setIntervalIds_.add(C),C}clearInterval(S){return this.setIntervalIds_.has(S)&&(this.setIntervalIds_.delete(S),window$1$1.clearInterval(S)),S}requestAnimationFrame(S){this.clearTimersOnDispose_();var x;return S=bind_(this,S),x=window$1$1.requestAnimationFrame(()=>{this.rafIds_.has(x)&&this.rafIds_.delete(x),S()}),this.rafIds_.add(x),x}requestNamedAnimationFrame(S,x){this.namedRafs_.has(S)&&this.cancelNamedAnimationFrame(S),this.clearTimersOnDispose_(),x=bind_(this,x);const C=this.requestAnimationFrame(()=>{x(),this.namedRafs_.has(S)&&this.namedRafs_.delete(S)});return this.namedRafs_.set(S,C),S}cancelNamedAnimationFrame(S){this.namedRafs_.has(S)&&(this.cancelAnimationFrame(this.namedRafs_.get(S)),this.namedRafs_.delete(S))}cancelAnimationFrame(S){return this.rafIds_.has(S)&&(this.rafIds_.delete(S),window$1$1.cancelAnimationFrame(S)),S}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([S,x])=>{this[S].forEach((C,R)=>this[x](R))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(S){return(S||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(S){function x(Ce){const Ue=window$1$1.getComputedStyle(Ce,null),je=Ue.getPropertyValue("visibility");return Ue.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(je)}function C(Ce){return!(!x(Ce.parentElement)||!x(Ce)||Ce.style.opacity==="0"||window$1$1.getComputedStyle(Ce).height==="0px"||window$1$1.getComputedStyle(Ce).width==="0px")}function R(Ce){if(Ce.offsetWidth+Ce.offsetHeight+Ce.getBoundingClientRect().height+Ce.getBoundingClientRect().width===0)return!1;const Ue={x:Ce.getBoundingClientRect().left+Ce.offsetWidth/2,y:Ce.getBoundingClientRect().top+Ce.offsetHeight/2};if(Ue.x<0||Ue.x>(document$1$1.documentElement.clientWidth||window$1$1.innerWidth)||Ue.y<0||Ue.y>(document$1$1.documentElement.clientHeight||window$1$1.innerHeight))return!1;let je=document$1$1.elementFromPoint(Ue.x,Ue.y);for(;je;){if(je===Ce)return!0;if(je.parentNode)je=je.parentNode;else return!1}}return S||(S=this.el()),!!(R(S)&&C(S)&&(!S.parentElement||S.tabIndex>=0))}static registerComponent(S,x){if(typeof S!="string"||!S)throw new Error(`Illegal component name, "${S}"; must be a non-empty string.`);const C=Component$1.getComponent("Tech"),R=C&&C.isTech(x),Ce=Component$1===x||Component$1.prototype.isPrototypeOf(x.prototype);if(R||!Ce){let je;throw R?je="techs must be registered using Tech.registerTech()":je="must be a Component subclass",new Error(`Illegal component, "${S}"; ${je}.`)}S=toTitleCase$1(S),Component$1.components_||(Component$1.components_={});const Ue=Component$1.getComponent("Player");if(S==="Player"&&Ue&&Ue.players){const je=Ue.players,Xe=Object.keys(je);if(je&&Xe.length>0&&Xe.map(Ye=>je[Ye]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Component$1.components_[S]=x,Component$1.components_[toLowerCase(S)]=x,x}static getComponent(S){if(!(!S||!Component$1.components_))return Component$1.components_[S]}}Component$1.registerComponent("Component",Component$1);function rangeCheck(E,S,x){if(typeof S!="number"||S<0||S>x)throw new Error(`Failed to execute '${E}' on 'TimeRanges': The index provided (${S}) is non-numeric or out of bounds (0-${x}).`)}function getRange(E,S,x,C){return rangeCheck(E,C,x.length-1),x[C][S]}function createTimeRangesObj(E){let S;return E===void 0||E.length===0?S={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:S={length:E.length,start:getRange.bind(null,"start",0,E),end:getRange.bind(null,"end",1,E)},window$1$1.Symbol&&window$1$1.Symbol.iterator&&(S[window$1$1.Symbol.iterator]=()=>(E||[]).values()),S}function createTimeRanges$1(E,S){return Array.isArray(E)?createTimeRangesObj(E):E===void 0||S===void 0?createTimeRangesObj():createTimeRangesObj([[E,S]])}const defaultImplementation=function(E,S){E=E<0?0:E;let x=Math.floor(E%60),C=Math.floor(E/60%60),R=Math.floor(E/3600);const Ce=Math.floor(S/60%60),Ue=Math.floor(S/3600);return(isNaN(E)||E===1/0)&&(R=C=x="-"),R=R>0||Ue>0?R+":":"",C=((R||Ce>=10)&&C<10?"0"+C:C)+":",x=x<10?"0"+x:x,R+C+x};let implementation=defaultImplementation;function setFormatTime(E){implementation=E}function resetFormatTime(){implementation=defaultImplementation}function formatTime(E,S=E){return implementation(E,S)}var Time=Object.freeze({__proto__:null,createTimeRanges:createTimeRanges$1,createTimeRange:createTimeRanges$1,setFormatTime,resetFormatTime,formatTime});function bufferedPercent(E,S){let x=0,C,R;if(!S)return 0;(!E||!E.length)&&(E=createTimeRanges$1(0,0));for(let Ce=0;Ce<E.length;Ce++)C=E.start(Ce),R=E.end(Ce),R>S&&(R=S),x+=R-C;return x/S}function MediaError(E){if(E instanceof MediaError)return E;typeof E=="number"?this.code=E:typeof E=="string"?this.message=E:isObject$1(E)&&(typeof E.code=="number"&&(this.code=E.code),Object.assign(this,E)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.prototype.metadata=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};MediaError.MEDIA_ERR_CUSTOM=0;MediaError.prototype.MEDIA_ERR_CUSTOM=0;MediaError.MEDIA_ERR_ABORTED=1;MediaError.prototype.MEDIA_ERR_ABORTED=1;MediaError.MEDIA_ERR_NETWORK=2;MediaError.prototype.MEDIA_ERR_NETWORK=2;MediaError.MEDIA_ERR_DECODE=3;MediaError.prototype.MEDIA_ERR_DECODE=3;MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.MEDIA_ERR_ENCRYPTED=5;MediaError.prototype.MEDIA_ERR_ENCRYPTED=5;function isPromise$1(E){return E!=null&&typeof E.then=="function"}function silencePromise(E){isPromise$1(E)&&E.then(null,S=>{})}const trackToJson_=function(E){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((x,C,R)=>(E[C]&&(x[C]=E[C]),x),{cues:E.cues&&Array.prototype.map.call(E.cues,function(x){return{startTime:x.startTime,endTime:x.endTime,text:x.text,id:x.id}})})},textTracksToJson=function(E){const S=E.$$("track"),x=Array.prototype.map.call(S,R=>R.track);return Array.prototype.map.call(S,function(R){const Ce=trackToJson_(R.track);return R.src&&(Ce.src=R.src),Ce}).concat(Array.prototype.filter.call(E.textTracks(),function(R){return x.indexOf(R)===-1}).map(trackToJson_))},jsonToTextTracks=function(E,S){return E.forEach(function(x){const C=S.addRemoteTextTrack(x).track;!x.src&&x.cues&&x.cues.forEach(R=>C.addCue(R))}),S.textTracks()};var textTrackConverter={textTracksToJson,jsonToTextTracks,trackToJson_};const MODAL_CLASS_NAME="vjs-modal-dialog";class ModalDialog extends Component$1{constructor(S,x){super(S,x),this.handleKeyDown_=C=>this.handleKeyDown(C),this.close_=C=>this.close(C),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=createEl("div",{className:`${MODAL_CLASS_NAME}-content`},{role:"document"}),this.descEl_=createEl("p",{className:`${MODAL_CLASS_NAME}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${MODAL_CLASS_NAME} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let S=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(S+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),S}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const S=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!S.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&S.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=S.controls(),S.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(S){return typeof S=="boolean"&&this[S?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const S=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&S.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&S.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(S){if(typeof S=="boolean"){const x=this.closeable_=!!S;let C=this.getChild("closeButton");if(x&&!C){const R=this.contentEl_;this.contentEl_=this.el_,C=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=R,this.on(C,"close",this.close_)}!x&&C&&(this.off(C,"close",this.close_),this.removeChild(C),C.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(S){const x=this.contentEl(),C=x.parentNode,R=x.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,C.removeChild(x),this.empty(),insertContent(x,S),this.trigger("modalfill"),R?C.insertBefore(x,R):C.appendChild(x);const Ce=this.getChild("closeButton");Ce&&C.appendChild(Ce.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")}content(S){return typeof S<"u"&&(this.content_=S),this.content_}conditionalFocus_(){const S=document$1$1.activeElement,x=this.player_.el_;this.previouslyActiveEl_=null,(x.contains(S)||x===S)&&(this.previouslyActiveEl_=S,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(S){if(this.trigger({type:"modalKeydown",originalEvent:S,target:this,bubbles:!0}),S.stopPropagation(),S.key==="Escape"&&this.closeable()){S.preventDefault(),this.close();return}if(S.key!=="Tab")return;const x=this.focusableEls_(),C=this.el_.querySelector(":focus");let R;for(let Ce=0;Ce<x.length;Ce++)if(C===x[Ce]){R=Ce;break}document$1$1.activeElement===this.el_&&(R=0),S.shiftKey&&R===0?(x[x.length-1].focus(),S.preventDefault()):!S.shiftKey&&R===x.length-1&&(x[0].focus(),S.preventDefault())}focusableEls_(){const S=this.el_.querySelectorAll("*");return Array.prototype.filter.call(S,x=>(x instanceof window$1$1.HTMLAnchorElement||x instanceof window$1$1.HTMLAreaElement)&&x.hasAttribute("href")||(x instanceof window$1$1.HTMLInputElement||x instanceof window$1$1.HTMLSelectElement||x instanceof window$1$1.HTMLTextAreaElement||x instanceof window$1$1.HTMLButtonElement)&&!x.hasAttribute("disabled")||x instanceof window$1$1.HTMLIFrameElement||x instanceof window$1$1.HTMLObjectElement||x instanceof window$1$1.HTMLEmbedElement||x.hasAttribute("tabindex")&&x.getAttribute("tabindex")!==-1||x.hasAttribute("contenteditable"))}}ModalDialog.prototype.options_={pauseOnOpen:!0,temporary:!0};Component$1.registerComponent("ModalDialog",ModalDialog);class TrackList extends EventTarget$2{constructor(S=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let x=0;x<S.length;x++)this.addTrack(S[x])}addTrack(S){const x=this.tracks_.length;""+x in this||Object.defineProperty(this,x,{get(){return this.tracks_[x]}}),this.tracks_.indexOf(S)===-1&&(this.tracks_.push(S),this.trigger({track:S,type:"addtrack",target:this})),S.labelchange_=()=>{this.trigger({track:S,type:"labelchange",target:this})},isEvented(S)&&S.addEventListener("labelchange",S.labelchange_)}removeTrack(S){let x;for(let C=0,R=this.length;C<R;C++)if(this[C]===S){x=this[C],x.off&&x.off(),this.tracks_.splice(C,1);break}x&&this.trigger({track:x,type:"removetrack",target:this})}getTrackById(S){let x=null;for(let C=0,R=this.length;C<R;C++){const Ce=this[C];if(Ce.id===S){x=Ce;break}}return x}}TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const E in TrackList.prototype.allowedEvents_)TrackList.prototype["on"+E]=null;const disableOthers$1=function(E,S){for(let x=0;x<E.length;x++)!Object.keys(E[x]).length||S.id===E[x].id||(E[x].enabled=!1)};class AudioTrackList extends TrackList{constructor(S=[]){for(let x=S.length-1;x>=0;x--)if(S[x].enabled){disableOthers$1(S,S[x]);break}super(S),this.changing_=!1}addTrack(S){S.enabled&&disableOthers$1(this,S),super.addTrack(S),S.addEventListener&&(S.enabledChange_=()=>{this.changing_||(this.changing_=!0,disableOthers$1(this,S),this.changing_=!1,this.trigger("change"))},S.addEventListener("enabledchange",S.enabledChange_))}removeTrack(S){super.removeTrack(S),S.removeEventListener&&S.enabledChange_&&(S.removeEventListener("enabledchange",S.enabledChange_),S.enabledChange_=null)}}const disableOthers=function(E,S){for(let x=0;x<E.length;x++)!Object.keys(E[x]).length||S.id===E[x].id||(E[x].selected=!1)};class VideoTrackList extends TrackList{constructor(S=[]){for(let x=S.length-1;x>=0;x--)if(S[x].selected){disableOthers(S,S[x]);break}super(S),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let x=0;x<this.length;x++)if(this[x].selected)return x;return-1},set(){}})}addTrack(S){S.selected&&disableOthers(this,S),super.addTrack(S),S.addEventListener&&(S.selectedChange_=()=>{this.changing_||(this.changing_=!0,disableOthers(this,S),this.changing_=!1,this.trigger("change"))},S.addEventListener("selectedchange",S.selectedChange_))}removeTrack(S){super.removeTrack(S),S.removeEventListener&&S.selectedChange_&&(S.removeEventListener("selectedchange",S.selectedChange_),S.selectedChange_=null)}}class TextTrackList extends TrackList{addTrack(S){super.addTrack(S),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),S.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(S.kind)===-1&&S.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(S){super.removeTrack(S),S.removeEventListener&&(this.queueChange_&&S.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&S.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class HtmlTrackElementList{constructor(S=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let x=0,C=S.length;x<C;x++)this.addTrackElement_(S[x])}addTrackElement_(S){const x=this.trackElements_.length;""+x in this||Object.defineProperty(this,x,{get(){return this.trackElements_[x]}}),this.trackElements_.indexOf(S)===-1&&this.trackElements_.push(S)}getTrackElementByTrack_(S){let x;for(let C=0,R=this.trackElements_.length;C<R;C++)if(S===this.trackElements_[C].track){x=this.trackElements_[C];break}return x}removeTrackElement_(S){for(let x=0,C=this.trackElements_.length;x<C;x++)if(S===this.trackElements_[x]){this.trackElements_[x].track&&typeof this.trackElements_[x].track.off=="function"&&this.trackElements_[x].track.off(),typeof this.trackElements_[x].off=="function"&&this.trackElements_[x].off(),this.trackElements_.splice(x,1);break}}}class TextTrackCueList{constructor(S){TextTrackCueList.prototype.setCues_.call(this,S),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(S){const x=this.length||0;let C=0;const R=S.length;this.cues_=S,this.length_=S.length;const Ce=function(Ue){""+Ue in this||Object.defineProperty(this,""+Ue,{get(){return this.cues_[Ue]}})};if(x<R)for(C=x;C<R;C++)Ce.call(this,C)}getCueById(S){let x=null;for(let C=0,R=this.length;C<R;C++){const Ce=this[C];if(Ce.id===S){x=Ce;break}}return x}}const VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};class Track extends EventTarget$2{constructor(S={}){super();const x={id:S.id||"vjs_track_"+newGUID(),kind:S.kind||"",language:S.language||""};let C=S.label||"";for(const R in x)Object.defineProperty(this,R,{get(){return x[R]},set(){}});Object.defineProperty(this,"label",{get(){return C},set(R){R!==C&&(C=R,this.trigger("labelchange"))}})}}const parseUrl=function(E){return new URL(E,document$1$1.baseURI)},getAbsoluteURL=function(E){return new URL(E,document$1$1.baseURI).href},getFileExtension=function(E){if(typeof E=="string"){const x=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(E);if(x)return x.pop().toLowerCase()}return""},isCrossOrigin=function(E,S=window$1$1.location){return parseUrl(E).origin!==S.origin};var Url=Object.freeze({__proto__:null,parseUrl,getAbsoluteURL,getFileExtension,isCrossOrigin});const parseCues=function(E,S){const x=new window$1$1.WebVTT.Parser(window$1$1,window$1$1.vttjs,window$1$1.WebVTT.StringDecoder()),C=[];x.oncue=function(R){S.addCue(R)},x.onparsingerror=function(R){C.push(R)},x.onflush=function(){S.trigger({type:"loadeddata",target:S})},x.parse(E),C.length>0&&(window$1$1.console&&window$1$1.console.groupCollapsed&&window$1$1.console.groupCollapsed(`Text Track parsing errors for ${S.src}`),C.forEach(R=>log$1.error(R)),window$1$1.console&&window$1$1.console.groupEnd&&window$1$1.console.groupEnd()),x.flush()},loadTrack=function(E,S){const x={uri:E},C=isCrossOrigin(E);C&&(x.cors=C);const R=S.tech_.crossOrigin()==="use-credentials";R&&(x.withCredentials=R),XHR(x,bind_(this,function(Ce,Ue,je){if(Ce)return log$1.error(Ce,Ue);S.loaded_=!0,typeof window$1$1.WebVTT!="function"?S.tech_&&S.tech_.any(["vttjsloaded","vttjserror"],Xe=>{if(Xe.type==="vttjserror"){log$1.error(`vttjs failed to load, stopping trying to process ${S.src}`);return}return parseCues(je,S)}):parseCues(je,S)}))};class TextTrack extends Track{constructor(S={}){if(!S.tech)throw new Error("A tech was not provided.");const x=merge$1(S,{kind:TextTrackKind[S.kind]||"subtitles",language:S.language||S.srclang||""});let C=TextTrackMode[x.mode]||"disabled";const R=x.default;(x.kind==="metadata"||x.kind==="chapters")&&(C="hidden"),super(x),this.tech_=x.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const Ce=new TextTrackCueList(this.cues_),Ue=new TextTrackCueList(this.activeCues_);let je=!1;this.timeupdateHandler=bind_(this,function(Ye={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){Ye.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,je&&(this.trigger("cuechange"),je=!1),Ye.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const Xe=()=>{this.stopTracking()};this.tech_.one("dispose",Xe),C!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return R},set(){}},mode:{get(){return C},set(Ye){TextTrackMode[Ye]&&C!==Ye&&(C=Ye,!this.preload_&&C!=="disabled"&&this.cues.length===0&&loadTrack(this.src,this),this.stopTracking(),C!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?Ce:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return Ue;const Ye=this.tech_.currentTime(),et=[];for(let ht=0,Dt=this.cues.length;ht<Dt;ht++){const Ot=this.cues[ht];Ot.startTime<=Ye&&Ot.endTime>=Ye&&et.push(Ot)}if(je=!1,et.length!==this.activeCues_.length)je=!0;else for(let ht=0;ht<et.length;ht++)this.activeCues_.indexOf(et[ht])===-1&&(je=!0);return this.activeCues_=et,Ue.setCues_(this.activeCues_),Ue},set(){}}}),x.src?(this.src=x.src,this.preload_||(this.loaded_=!0),(this.preload_||x.kind!=="subtitles"&&x.kind!=="captions")&&loadTrack(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(S){let x=S;if(!("getCueAsHTML"in x)){x=new window$1$1.vttjs.VTTCue(S.startTime,S.endTime,S.text);for(const R in S)R in x||(x[R]=S[R]);x.id=S.id,x.originalCue_=S}const C=this.tech_.textTracks();for(let R=0;R<C.length;R++)C[R]!==this&&C[R].removeCue(x);this.cues_.push(x),this.cues.setCues_(this.cues_)}removeCue(S){let x=this.cues_.length;for(;x--;){const C=this.cues_[x];if(C===S||C.originalCue_&&C.originalCue_===S){this.cues_.splice(x,1),this.cues.setCues_(this.cues_);break}}}}TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};class AudioTrack extends Track{constructor(S={}){const x=merge$1(S,{kind:AudioTrackKind[S.kind]||""});super(x);let C=!1;Object.defineProperty(this,"enabled",{get(){return C},set(R){typeof R!="boolean"||R===C||(C=R,this.trigger("enabledchange"))}}),x.enabled&&(this.enabled=x.enabled),this.loaded_=!0}}class VideoTrack extends Track{constructor(S={}){const x=merge$1(S,{kind:VideoTrackKind[S.kind]||""});super(x);let C=!1;Object.defineProperty(this,"selected",{get(){return C},set(R){typeof R!="boolean"||R===C||(C=R,this.trigger("selectedchange"))}}),x.selected&&(this.selected=x.selected)}}class HTMLTrackElement extends EventTarget$2{constructor(S={}){super();let x;const C=new TextTrack(S);this.kind=C.kind,this.src=C.src,this.srclang=C.language,this.label=C.label,this.default=C.default,Object.defineProperties(this,{readyState:{get(){return x}},track:{get(){return C}}}),x=HTMLTrackElement.NONE,C.addEventListener("loadeddata",()=>{x=HTMLTrackElement.LOADED,this.trigger({type:"load",target:this})})}}HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=0;HTMLTrackElement.LOADING=1;HTMLTrackElement.LOADED=2;HTMLTrackElement.ERROR=3;const NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(E){NORMAL[E].getterName=`${E}Tracks`,NORMAL[E].privateName=`${E}Tracks_`});const REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ALL=Object.assign({},NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(E,S,x,C,R={}){const Ce=E.textTracks();R.kind=S,x&&(R.label=x),C&&(R.language=C),R.tech=E;const Ue=new ALL.text.TrackClass(R);return Ce.addTrack(Ue),Ue}class Tech extends Component$1{constructor(S={},x=function(){}){S.reportTouchActivity=!1,super(null,S,x),this.onDurationChange_=C=>this.onDurationChange(C),this.trackProgress_=C=>this.trackProgress(C),this.trackCurrentTime_=C=>this.trackCurrentTime(C),this.stopTrackingCurrentTime_=C=>this.stopTrackingCurrentTime(C),this.disposeSourceHandler_=C=>this.disposeSourceHandler(C),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ALL.names.forEach(C=>{const R=ALL[C];S&&S[R.getterName]&&(this[R.privateName]=S[R.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(C=>{S[`native${C}Tracks`]===!1&&(this[`featuresNative${C}Tracks`]=!1)}),S.nativeCaptions===!1||S.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(S.nativeCaptions===!0||S.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=S.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ALL.text.ListClass,this.initTrackListeners(),S.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(S){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(S),1)),this.trigger({src:S,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(S){this.stopTrackingProgress(),this.progressInterval=this.setInterval(bind_(this,function(){const x=this.bufferedPercent();this.bufferedPercent_!==x&&this.trigger("progress"),this.bufferedPercent_=x,x===1&&this.stopTrackingProgress()}),500)}onDurationChange(S){this.duration_=this.duration()}buffered(){return createTimeRanges$1(0,0)}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(NORMAL.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(S){S=[].concat(S),S.forEach(x=>{const C=this[`${x}Tracks`]()||[];let R=C.length;for(;R--;){const Ce=C[R];x==="text"&&this.removeRemoteTextTrack(Ce),C.removeTrack(Ce)}})}cleanupAutoTextTracks(){const S=this.autoRemoteTextTracks_||[];let x=S.length;for(;x--;){const C=S[x];this.removeRemoteTextTrack(C)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(S){return S!==void 0&&(this.error_=new MediaError(S),this.trigger("error")),this.error_}played(){return this.hasStarted_?createTimeRanges$1(0,0):createTimeRanges$1()}play(){}setScrubbing(S){}scrubbing(){}setCurrentTime(S){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){NORMAL.names.forEach(S=>{const x=NORMAL[S],C=()=>{this.trigger(`${S}trackchange`)},R=this[x.getterName]();R.addEventListener("removetrack",C),R.addEventListener("addtrack",C),this.on("dispose",()=>{R.removeEventListener("removetrack",C),R.removeEventListener("addtrack",C)})})}addWebVttScript_(){if(!window$1$1.WebVTT)if(document$1$1.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(vtt)&&Object.keys(vtt).length>0){this.trigger("vttjsloaded");return}const S=document$1$1.createElement("script");S.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",S.onload=()=>{this.trigger("vttjsloaded")},S.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{S.onload=null,S.onerror=null}),window$1$1.WebVTT=!0,this.el().parentNode.appendChild(S)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const S=this.textTracks(),x=this.remoteTextTracks(),C=je=>S.addTrack(je.track),R=je=>S.removeTrack(je.track);x.on("addtrack",C),x.on("removetrack",R),this.addWebVttScript_();const Ce=()=>this.trigger("texttrackchange"),Ue=()=>{Ce();for(let je=0;je<S.length;je++){const Xe=S[je];Xe.removeEventListener("cuechange",Ce),Xe.mode==="showing"&&Xe.addEventListener("cuechange",Ce)}};Ue(),S.addEventListener("change",Ue),S.addEventListener("addtrack",Ue),S.addEventListener("removetrack",Ue),this.on("dispose",function(){x.off("addtrack",C),x.off("removetrack",R),S.removeEventListener("change",Ue),S.removeEventListener("addtrack",Ue),S.removeEventListener("removetrack",Ue);for(let je=0;je<S.length;je++)S[je].removeEventListener("cuechange",Ce)})}addTextTrack(S,x,C){if(!S)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,S,x,C)}createRemoteTextTrack(S){const x=merge$1(S,{tech:this});return new REMOTE.remoteTextEl.TrackClass(x)}addRemoteTextTrack(S={},x){const C=this.createRemoteTextTrack(S);return typeof x!="boolean"&&(x=!1),this.remoteTextTrackEls().addTrackElement_(C),this.remoteTextTracks().addTrack(C.track),x===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(C.track)),C}removeRemoteTextTrack(S){const x=this.remoteTextTrackEls().getTrackElementByTrack_(S);this.remoteTextTrackEls().removeTrackElement_(x),this.remoteTextTracks().removeTrack(S),this.autoRemoteTextTracks_.removeTrack(S)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(S){const x=newGUID();return!this.isReady_||this.paused()?(this.queuedHanders_.add(x),this.one("playing",()=>{this.queuedHanders_.has(x)&&(this.queuedHanders_.delete(x),S())})):this.requestNamedAnimationFrame(x,S),x}cancelVideoFrameCallback(S){this.queuedHanders_.has(S)?this.queuedHanders_.delete(S):this.cancelNamedAnimationFrame(S)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(S){}overrideNativeVideoTracks(S){}canPlayType(S){return""}static canPlayType(S){return""}static canPlaySource(S,x){return Tech.canPlayType(S.type)}static isTech(S){return S.prototype instanceof Tech||S instanceof Tech||S===Tech}static registerTech(S,x){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(x))throw new Error(`Tech ${S} must be a Tech`);if(!Tech.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return S=toTitleCase$1(S),Tech.techs_[S]=x,Tech.techs_[toLowerCase(S)]=x,S!=="Tech"&&Tech.defaultTechOrder_.push(S),x}static getTech(S){if(S){if(Tech.techs_&&Tech.techs_[S])return Tech.techs_[S];if(S=toTitleCase$1(S),window$1$1&&window$1$1.videojs&&window$1$1.videojs[S])return log$1.warn(`The ${S} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),window$1$1.videojs[S]}}}ALL.names.forEach(function(E){const S=ALL[E];Tech.prototype[S.getterName]=function(){return this[S.privateName]=this[S.privateName]||new S.ListClass,this[S.privateName]}});Tech.prototype.featuresVolumeControl=!0;Tech.prototype.featuresMuteControl=!0;Tech.prototype.featuresFullscreenResize=!1;Tech.prototype.featuresPlaybackRate=!1;Tech.prototype.featuresProgressEvents=!1;Tech.prototype.featuresSourceset=!1;Tech.prototype.featuresTimeupdateEvents=!1;Tech.prototype.featuresNativeTextTracks=!1;Tech.prototype.featuresVideoFrameCallback=!1;Tech.withSourceHandlers=function(E){E.registerSourceHandler=function(x,C){let R=E.sourceHandlers;R||(R=E.sourceHandlers=[]),C===void 0&&(C=R.length),R.splice(C,0,x)},E.canPlayType=function(x){const C=E.sourceHandlers||[];let R;for(let Ce=0;Ce<C.length;Ce++)if(R=C[Ce].canPlayType(x),R)return R;return""},E.selectSourceHandler=function(x,C){const R=E.sourceHandlers||[];let Ce;for(let Ue=0;Ue<R.length;Ue++)if(Ce=R[Ue].canHandleSource(x,C),Ce)return R[Ue];return null},E.canPlaySource=function(x,C){const R=E.selectSourceHandler(x,C);return R?R.canHandleSource(x,C):""},["seekable","seeking","duration"].forEach(function(x){const C=this[x];typeof C=="function"&&(this[x]=function(){return this.sourceHandler_&&this.sourceHandler_[x]?this.sourceHandler_[x].apply(this.sourceHandler_,arguments):C.apply(this,arguments)})},E.prototype),E.prototype.setSource=function(x){let C=E.selectSourceHandler(x,this.options_);C||(E.nativeSourceHandler?C=E.nativeSourceHandler:log$1.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),C!==E.nativeSourceHandler&&(this.currentSource_=x),this.sourceHandler_=C.handleSource(x,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},E.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Component$1.registerComponent("Tech",Tech);Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];const middlewares={},middlewareInstances={},TERMINATOR={};function use(E,S){middlewares[E]=middlewares[E]||[],middlewares[E].push(S)}function setSource(E,S,x){E.setTimeout(()=>setSourceHelper(S,middlewares[S.type],x,E),1)}function setTech(E,S){E.forEach(x=>x.setTech&&x.setTech(S))}function get(E,S,x){return E.reduceRight(middlewareIterator(x),S[x]())}function set(E,S,x,C){return S[x](E.reduce(middlewareIterator(x),C))}function mediate(E,S,x,C=null){const R="call"+toTitleCase$1(x),Ce=E.reduce(middlewareIterator(R),C),Ue=Ce===TERMINATOR,je=Ue?null:S[x](Ce);return executeRight(E,x,je,Ue),je}const allowedGetters={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},allowedSetters={setCurrentTime:1,setMuted:1,setVolume:1},allowedMediators={play:1,pause:1};function middlewareIterator(E){return(S,x)=>S===TERMINATOR?TERMINATOR:x[E]?x[E](S):S}function executeRight(E,S,x,C){for(let R=E.length-1;R>=0;R--){const Ce=E[R];Ce[S]&&Ce[S](C,x)}}function clearCacheForPlayer(E){middlewareInstances.hasOwnProperty(E.id())&&delete middlewareInstances[E.id()]}function getOrCreateFactory(E,S){const x=middlewareInstances[E.id()];let C=null;if(x==null)return C=S(E),middlewareInstances[E.id()]=[[S,C]],C;for(let R=0;R<x.length;R++){const[Ce,Ue]=x[R];Ce===S&&(C=Ue)}return C===null&&(C=S(E),x.push([S,C])),C}function setSourceHelper(E={},S=[],x,C,R=[],Ce=!1){const[Ue,...je]=S;if(typeof Ue=="string")setSourceHelper(E,middlewares[Ue],x,C,R,Ce);else if(Ue){const Xe=getOrCreateFactory(C,Ue);if(!Xe.setSource)return R.push(Xe),setSourceHelper(E,je,x,C,R,Ce);Xe.setSource(Object.assign({},E),function(Ye,et){if(Ye)return setSourceHelper(E,je,x,C,R,Ce);R.push(Xe),setSourceHelper(et,E.type===et.type?je:middlewares[et.type],x,C,R,Ce)})}else je.length?setSourceHelper(E,je,x,C,R,Ce):Ce?x(E,R):setSourceHelper(E,middlewares["*"],x,C,R,!0)}const MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},getMimetype=function(E=""){const S=getFileExtension(E);return MimetypesKind[S.toLowerCase()]||""},findMimetype=(E,S)=>{if(!S)return"";if(E.cache_.source.src===S&&E.cache_.source.type)return E.cache_.source.type;const x=E.cache_.sources.filter(R=>R.src===S);if(x.length)return x[0].type;const C=E.$$("source");for(let R=0;R<C.length;R++){const Ce=C[R];if(Ce.type&&Ce.src&&Ce.src===S)return Ce.type}return getMimetype(S)},filterSource=function(E){if(Array.isArray(E)){let S=[];E.forEach(function(x){x=filterSource(x),Array.isArray(x)?S=S.concat(x):isObject$1(x)&&S.push(x)}),E=S}else typeof E=="string"&&E.trim()?E=[fixSource({src:E})]:isObject$1(E)&&typeof E.src=="string"&&E.src&&E.src.trim()?E=[fixSource(E)]:E=[];return E};function fixSource(E){if(!E.type){const S=getMimetype(E.src);S&&(E.type=S)}return E}var icons=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const backKeyCode=IS_TIZEN?10009:IS_WEBOS?461:8,SpatialNavKeyCodes={codes:{play:415,pause:19,ff:417,rw:412,back:backKeyCode},names:{415:"play",19:"pause",417:"ff",412:"rw",[backKeyCode]:"back"},isEventKey(E,S){return S=S.toLowerCase(),!!(this.names[E.keyCode]&&this.names[E.keyCode]===S)},getEventName(E){if(this.names[E.keyCode])return this.names[E.keyCode];if(this.codes[E.code]){const S=this.codes[E.code];return this.names[S]}return null}},STEP_SECONDS$1=5;class SpatialNavigation extends EventTarget$2{constructor(S){super(),this.player_=S,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(S){const x=S.originalEvent?S.originalEvent:S;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(x.key)){if(this.isPaused_)return;x.preventDefault();const C=x.key.substring(5).toLowerCase();this.move(C)}else if(SpatialNavKeyCodes.isEventKey(x,"play")||SpatialNavKeyCodes.isEventKey(x,"pause")||SpatialNavKeyCodes.isEventKey(x,"ff")||SpatialNavKeyCodes.isEventKey(x,"rw")){x.preventDefault();const C=SpatialNavKeyCodes.getEventName(x);this.performMediaAction_(C)}else SpatialNavKeyCodes.isEventKey(x,"Back")&&S.target&&typeof S.target.closeable=="function"&&S.target.closeable()&&(x.preventDefault(),S.target.close())}performMediaAction_(S){if(this.player_)switch(S){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+STEP_SECONDS$1);break;case"rw":this.userSeek_(this.player_.currentTime()-STEP_SECONDS$1);break}}userSeek_(S){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(S)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(S){const x=S.relatedTarget;let C=null;const R=this.getCurrentComponent(S.target);x&&(C=!!x.closest(".video-js"),x.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!S.currentTarget.contains(S.relatedTarget)&&!C||!x)&&(R&&R.name()==="CloseButton"?this.refocusComponent():(this.pause(),R&&R.el()&&(this.lastFocusedComponent_=R)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const S=this.player_,x=[];function C(R){for(const Ce of R)Ce.hasOwnProperty("el_")&&Ce.getIsFocusable()&&Ce.getIsAvailableToBeFocused(Ce.el())&&x.push(Ce),Ce.hasOwnProperty("children_")&&Ce.children_.length>0&&C(Ce.children_)}return S.children_.forEach(R=>{if(R.hasOwnProperty("el_"))if(R.getIsFocusable&&R.getIsAvailableToBeFocused&&R.getIsFocusable()&&R.getIsAvailableToBeFocused(R.el())){x.push(R);return}else R.hasOwnProperty("children_")&&R.children_.length>0?C(R.children_):R.hasOwnProperty("items")&&R.items.length>0?C(R.items):this.findSuitableDOMChild(R)&&x.push(R);if(R.name_==="ErrorDisplay"&&R.opened_){const Ce=R.el_.querySelector(".vjs-errors-ok-button-container");Ce&&Ce.querySelectorAll("button").forEach((je,Xe)=>{x.push({name:()=>"ModalButton"+(Xe+1),el:()=>je,getPositions:()=>{const Ye=je.getBoundingClientRect(),et={x:Ye.x,y:Ye.y,width:Ye.width,height:Ye.height,top:Ye.top,right:Ye.right,bottom:Ye.bottom,left:Ye.left},ht={x:Ye.left+Ye.width/2,y:Ye.top+Ye.height/2,width:0,height:0,top:Ye.top+Ye.height/2,right:Ye.left+Ye.width/2,bottom:Ye.top+Ye.height/2,left:Ye.left+Ye.width/2};return{boundingClientRect:et,center:ht}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:Ye=>!0,focus:()=>je.focus()})})}}),this.focusableComponents=x,this.focusableComponents}findSuitableDOMChild(S){function x(C){if(S.getIsFocusable(C)&&S.getIsAvailableToBeFocused(C))return C;for(let R=0;R<C.children.length;R++){const Ce=C.children[R],Ue=x(Ce);if(Ue)return Ue}return null}return S.el()?x(S.el()):null}getCurrentComponent(S){this.updateFocusableComponents();const x=S||document.activeElement;if(this.focusableComponents.length){for(const C of this.focusableComponents)if(C.el()===x)return C}}add(S){const x=[...this.focusableComponents];S.hasOwnProperty("el_")&&S.getIsFocusable()&&S.getIsAvailableToBeFocused(S.el())&&x.push(S),this.focusableComponents=x,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(S){for(let x=0;x<this.focusableComponents.length;x++)if(this.focusableComponents[x].name()===S.name()){this.focusableComponents.splice(x,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(S){const x=this.getCurrentComponent();if(!x)return;const C=x.getPositions(),R=this.focusableComponents.filter(Ue=>Ue!==x&&this.isInDirection_(C.boundingClientRect,Ue.getPositions().boundingClientRect,S)),Ce=this.findBestCandidate_(C.center,R,S);Ce?this.focus(Ce):this.trigger({type:"endOfFocusableComponents",direction:S,focusedComponent:x})}findBestCandidate_(S,x,C){let R=1/0,Ce=null;for(const Ue of x){const je=Ue.getPositions().center,Xe=this.calculateDistance_(S,je,C);Xe<R&&(R=Xe,Ce=Ue)}return Ce}isInDirection_(S,x,C){switch(C){case"right":return x.left>=S.right;case"left":return x.right<=S.left;case"down":return x.top>=S.bottom;case"up":return x.bottom<=S.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let S=0;S<this.focusableComponents.length;S++)if(this.focusableComponents[S].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[S]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(S){typeof S=="object"&&(S.getIsAvailableToBeFocused(S.el())?S.focus():this.findSuitableDOMChild(S)&&this.findSuitableDOMChild(S).focus())}calculateDistance_(S,x,C){const R=Math.abs(S.x-x.x),Ce=Math.abs(S.y-x.y);let Ue;switch(C){case"right":case"left":Ue=R+Ce*100;break;case"up":Ue=Ce*2+R*.5;break;case"down":Ue=Ce*5+R;break;default:Ue=R+Ce}return Ue}searchForTrackSelect_(){const S=this;for(const x of S.updateFocusableComponents())if(x.constructor.name==="TextTrackSelect"){S.focus(x);break}}}class MediaLoader extends Component$1{constructor(S,x,C){const R=merge$1({createEl:!1},x);if(super(S,R,C),!x.playerOptions.sources||x.playerOptions.sources.length===0)for(let Ce=0,Ue=x.playerOptions.techOrder;Ce<Ue.length;Ce++){const je=toTitleCase$1(Ue[Ce]);let Xe=Tech.getTech(je);if(je||(Xe=Component$1.getComponent(je)),Xe&&Xe.isSupported()){S.loadTech_(je);break}}else S.src(x.playerOptions.sources)}}Component$1.registerComponent("MediaLoader",MediaLoader);class ClickableComponent extends Component$1{constructor(S,x){super(S,x),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=C=>this.handleMouseOver(C),this.handleMouseOut_=C=>this.handleMouseOut(C),this.handleClick_=C=>this.handleClick(C),this.handleKeyDown_=C=>this.handleKeyDown(C),this.emitTapEvents(),this.enable()}createEl(S="div",x={},C={}){x=Object.assign({className:this.buildCSSClass(),tabIndex:0},x),S==="button"&&log$1.error(`Creating a ClickableComponent with an HTML element of ${S} is not supported; use a Button instead.`),C=Object.assign({role:"button"},C),this.tabIndex_=x.tabIndex;const R=createEl(S,x,C);return this.player_.options_.experimentalSvgIcons||R.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(R),R}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(S){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),S&&S.appendChild(this.controlTextEl_),this.controlText(this.controlText_,S),this.controlTextEl_}controlText(S,x=this.el()){if(S===void 0)return this.controlText_||"Need Text";const C=this.localize(S);this.controlText_=S,textContent(this.controlTextEl_,C),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&x.setAttribute("title",C)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(S){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(S){S.key===" "||S.key==="Enter"?(S.preventDefault(),S.stopPropagation(),this.trigger("click")):super.handleKeyDown(S)}}Component$1.registerComponent("ClickableComponent",ClickableComponent);class PosterImage extends ClickableComponent{constructor(S,x){super(S,x),this.update(),this.update_=C=>this.update(C),S.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return createEl("div",{className:"vjs-poster"})}crossOrigin(S){if(typeof S>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(S!==null&&S!=="anonymous"&&S!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${S}"`);return}this.$("img")&&(this.$("img").crossOrigin=S)}update(S){const x=this.player().poster();this.setSrc(x),x?this.show():this.hide()}setSrc(S){if(!S){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(createEl("picture",{className:"vjs-poster",tabIndex:-1},{},createEl("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=S}handleClick(S){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause())}}PosterImage.prototype.crossorigin=PosterImage.prototype.crossOrigin;Component$1.registerComponent("PosterImage",PosterImage);const darkGray="#222",lightGray="#ccc",fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(E,S){let x;if(E.length===4)x=E[1]+E[1]+E[2]+E[2]+E[3]+E[3];else if(E.length===7)x=E.slice(1);else throw new Error("Invalid color code provided, "+E+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(x.slice(0,2),16)+","+parseInt(x.slice(2,4),16)+","+parseInt(x.slice(4,6),16)+","+S+")"}function tryUpdateStyle(E,S,x){try{E.style[S]=x}catch{return}}function getCSSPositionValue(E){return E?`${E}px`:""}class TextTrackDisplay extends Component$1{constructor(S,x,C){super(S,x,C);const R=Ue=>this.updateDisplay(Ue),Ce=Ue=>{this.updateDisplayOverlay(),this.updateDisplay(Ue)};S.on("loadstart",Ue=>this.toggleDisplay(Ue)),S.on("texttrackchange",R),S.on("loadedmetadata",Ue=>{this.updateDisplayOverlay(),this.preselectTrack(Ue)}),S.ready(bind_(this,function(){if(S.tech_&&S.tech_.featuresNativeTextTracks){this.hide();return}S.on("fullscreenchange",Ce),S.on("playerresize",Ce);const Ue=window$1$1.screen.orientation||window$1$1,je=window$1$1.screen.orientation?"change":"orientationchange";Ue.addEventListener(je,Ce),S.on("dispose",()=>Ue.removeEventListener(je,Ce));const Xe=this.options_.playerOptions.tracks||[];for(let Ye=0;Ye<Xe.length;Ye++)this.player_.addRemoteTextTrack(Xe[Ye],!0);this.preselectTrack()}))}preselectTrack(){const S={captions:1,subtitles:1},x=this.player_.textTracks(),C=this.player_.cache_.selectedLanguage;let R,Ce,Ue;for(let je=0;je<x.length;je++){const Xe=x[je];C&&C.enabled&&C.language&&C.language===Xe.language&&Xe.kind in S?Xe.kind===C.kind?Ue=Xe:Ue||(Ue=Xe):C&&!C.enabled?(Ue=null,R=null,Ce=null):Xe.default&&(Xe.kind==="descriptions"&&!R?R=Xe:Xe.kind in S&&!Ce&&(Ce=Xe))}Ue?Ue.mode="showing":Ce?Ce.mode="showing":R&&(R.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof window$1$1.WebVTT=="function"&&window$1$1.WebVTT.processCues(window$1$1,[],this.el_)}updateDisplay(){const S=this.player_.textTracks(),x=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),x){const Ue=[];for(let je=0;je<S.length;++je){const Xe=S[je];Xe.mode==="showing"&&Ue.push(Xe)}this.updateForTrack(Ue);return}let C=null,R=null,Ce=S.length;for(;Ce--;){const Ue=S[Ce];Ue.mode==="showing"&&(Ue.kind==="descriptions"?C=Ue:R=Ue)}if(R?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(R)):C&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(C)),!window$1$1.CSS.supports("inset","10px")){const Ue=this.el_,je=Ue.querySelectorAll(".vjs-text-track-cue"),Xe=this.player_.controlBar.el_.getBoundingClientRect().height,Ye=this.player_.el_.getBoundingClientRect().height;Ue.style="",tryUpdateStyle(Ue,"position","relative"),tryUpdateStyle(Ue,"height",Ye-Xe+"px"),tryUpdateStyle(Ue,"top","unset"),IS_SMART_TV?tryUpdateStyle(Ue,"bottom",Ye+"px"):tryUpdateStyle(Ue,"bottom","0px"),je.length>0&&je.forEach(et=>{if(et.style.inset){const ht=et.style.inset.split(" ");ht.length===3&&Object.assign(et.style,{top:ht[0],right:ht[1],bottom:ht[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!window$1$1.CSS.supports("inset-inline: 10px"))return;const S=this.player_.currentWidth(),x=this.player_.currentHeight(),C=S/x,R=this.player_.videoWidth()/this.player_.videoHeight();let Ce=0,Ue=0;Math.abs(C-R)>.1&&(C>R?Ce=Math.round((S-x*R)/2):Ue=Math.round((x-S/R)/2)),tryUpdateStyle(this.el_,"insetInline",getCSSPositionValue(Ce)),tryUpdateStyle(this.el_,"insetBlock",getCSSPositionValue(Ue))}updateDisplayState(S){const x=this.player_.textTrackSettings.getValues(),C=S.activeCues;let R=C.length;for(;R--;){const Ce=C[R];if(!Ce)continue;const Ue=Ce.displayState;if(x.color&&(Ue.firstChild.style.color=x.color),x.textOpacity&&tryUpdateStyle(Ue.firstChild,"color",constructColor(x.color||"#fff",x.textOpacity)),x.backgroundColor&&(Ue.firstChild.style.backgroundColor=x.backgroundColor),x.backgroundOpacity&&tryUpdateStyle(Ue.firstChild,"backgroundColor",constructColor(x.backgroundColor||"#000",x.backgroundOpacity)),x.windowColor&&(x.windowOpacity?tryUpdateStyle(Ue,"backgroundColor",constructColor(x.windowColor,x.windowOpacity)):Ue.style.backgroundColor=x.windowColor),x.edgeStyle&&(x.edgeStyle==="dropshadow"?Ue.firstChild.style.textShadow=`2px 2px 3px ${darkGray}, 2px 2px 4px ${darkGray}, 2px 2px 5px ${darkGray}`:x.edgeStyle==="raised"?Ue.firstChild.style.textShadow=`1px 1px ${darkGray}, 2px 2px ${darkGray}, 3px 3px ${darkGray}`:x.edgeStyle==="depressed"?Ue.firstChild.style.textShadow=`1px 1px ${lightGray}, 0 1px ${lightGray}, -1px -1px ${darkGray}, 0 -1px ${darkGray}`:x.edgeStyle==="uniform"&&(Ue.firstChild.style.textShadow=`0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}`)),x.fontPercent&&x.fontPercent!==1){const je=window$1$1.parseFloat(Ue.style.fontSize);Ue.style.fontSize=je*x.fontPercent+"px",Ue.style.height="auto",Ue.style.top="auto"}x.fontFamily&&x.fontFamily!=="default"&&(x.fontFamily==="small-caps"?Ue.firstChild.style.fontVariant="small-caps":Ue.firstChild.style.fontFamily=fontMap[x.fontFamily])}}updateForTrack(S){if(Array.isArray(S)||(S=[S]),typeof window$1$1.WebVTT!="function"||S.every(C=>!C.activeCues))return;const x=[];for(let C=0;C<S.length;++C){const R=S[C];for(let Ce=0;Ce<R.activeCues.length;++Ce)x.push(R.activeCues[Ce])}window$1$1.WebVTT.processCues(window$1$1,x,this.el_);for(let C=0;C<S.length;++C){const R=S[C];for(let Ce=0;Ce<R.activeCues.length;++Ce){const Ue=R.activeCues[Ce].displayState;addClass(Ue,"vjs-text-track-cue","vjs-text-track-cue-"+(R.language?R.language:C)),R.language&&setAttribute(Ue,"lang",R.language)}this.player_.textTrackSettings&&this.updateDisplayState(R)}}}Component$1.registerComponent("TextTrackDisplay",TextTrackDisplay);class LoadingSpinner extends Component$1{createEl(){const S=this.player_.isAudio(),x=this.localize(S?"Audio Player":"Video Player"),C=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[x])}),R=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return R.appendChild(C),R}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Component$1.registerComponent("LoadingSpinner",LoadingSpinner);class Button extends ClickableComponent{createEl(S,x={},C={}){S="button",x=Object.assign({className:this.buildCSSClass()},x),C=Object.assign({type:"button"},C);const R=createEl(S,x,C);return this.player_.options_.experimentalSvgIcons||R.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(R),R}addChild(S,x={}){const C=this.constructor.name;return log$1.warn(`Adding an actionable (user controllable) child to a Button (${C}) is not supported; use a ClickableComponent instead.`),Component$1.prototype.addChild.call(this,S,x)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(S){if(S.key===" "||S.key==="Enter"){S.stopPropagation();return}super.handleKeyDown(S)}}Component$1.registerComponent("Button",Button);class BigPlayButton extends Button{constructor(S,x){super(S,x),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",C=>this.handleMouseDown(C))}buildCSSClass(){return"vjs-big-play-button"}handleClick(S){const x=this.player_.play();if(this.mouseused_&&"clientX"in S&&"clientY"in S){silencePromise(x),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const C=this.player_.getChild("controlBar"),R=C&&C.getChild("playToggle");if(!R){this.player_.tech(!0).focus();return}const Ce=()=>R.focus();isPromise$1(x)?x.then(Ce,()=>{}):this.setTimeout(Ce,1)}handleKeyDown(S){this.mouseused_=!1,super.handleKeyDown(S)}handleMouseDown(S){this.mouseused_=!0}}BigPlayButton.prototype.controlText_="Play Video";Component$1.registerComponent("BigPlayButton",BigPlayButton);class CloseButton extends Button{constructor(S,x){super(S,x),this.setIcon("cancel"),this.controlText(x&&x.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(S){this.trigger({type:"close",bubbles:!1})}handleKeyDown(S){S.key==="Escape"?(S.preventDefault(),S.stopPropagation(),this.trigger("click")):super.handleKeyDown(S)}}Component$1.registerComponent("CloseButton",CloseButton);class PlayToggle extends Button{constructor(S,x={}){super(S,x),x.replay=x.replay===void 0||x.replay,this.setIcon("play"),this.on(S,"play",C=>this.handlePlay(C)),this.on(S,"pause",C=>this.handlePause(C)),x.replay&&this.on(S,"ended",C=>this.handleEnded(C))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(S){this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}handleSeeked(S){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(S):this.handlePlay(S)}handlePlay(S){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(S){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(S){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",x=>this.handleSeeked(x))}}PlayToggle.prototype.controlText_="Play";Component$1.registerComponent("PlayToggle",PlayToggle);class TimeDisplay extends Component$1{constructor(S,x){super(S,x),this.on(S,["timeupdate","ended","seeking"],C=>this.update(C)),this.updateTextNode_()}createEl(){const S=this.buildCSSClass(),x=super.createEl("div",{className:`${S} vjs-time-control vjs-control`}),C=createEl("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return x.appendChild(C),this.contentEl_=createEl("span",{className:`${S}-display`},{role:"presentation"}),x.appendChild(this.contentEl_),x}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(S){!this.player_.options_.enableSmoothSeeking&&S.type==="seeking"||this.updateContent(S)}updateTextNode_(S=0){S=formatTime(S),this.formattedTime_!==S&&(this.formattedTime_=S,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let x=this.textNode_;x&&this.contentEl_.firstChild!==x&&(x=null,log$1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=document$1$1.createTextNode(this.formattedTime_),this.textNode_&&(x?this.contentEl_.replaceChild(this.textNode_,x):this.contentEl_.appendChild(this.textNode_))}))}updateContent(S){}}TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component$1.registerComponent("TimeDisplay",TimeDisplay);class CurrentTimeDisplay extends TimeDisplay{buildCSSClass(){return"vjs-current-time"}updateContent(S){let x;this.player_.ended()?x=this.player_.duration():x=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(x)}}CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component$1.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);class DurationDisplay extends TimeDisplay{constructor(S,x){super(S,x);const C=R=>this.updateContent(R);this.on(S,"durationchange",C),this.on(S,"loadstart",C),this.on(S,"loadedmetadata",C)}buildCSSClass(){return"vjs-duration"}updateContent(S){const x=this.player_.duration();this.updateTextNode_(x)}}DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component$1.registerComponent("DurationDisplay",DurationDisplay);class TimeDivider extends Component$1{createEl(){const S=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),x=super.createEl("div"),C=super.createEl("span",{textContent:"/"});return x.appendChild(C),S.appendChild(x),S}}Component$1.registerComponent("TimeDivider",TimeDivider);class RemainingTimeDisplay extends TimeDisplay{constructor(S,x){super(S,x),this.on(S,"durationchange",C=>this.updateContent(C))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const S=super.createEl();return this.options_.displayNegative!==!1&&S.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),S}updateContent(S){if(typeof this.player_.duration()!="number")return;let x;this.player_.ended()?x=0:this.player_.remainingTimeDisplay?x=this.player_.remainingTimeDisplay():x=this.player_.remainingTime(),this.updateTextNode_(x)}}RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component$1.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);class LiveDisplay extends Component$1{constructor(S,x){super(S,x),this.updateShowing(),this.on(this.player(),"durationchange",C=>this.updateShowing(C))}createEl(){const S=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(document$1$1.createTextNode(this.localize("LIVE"))),S.appendChild(this.contentEl_),S}dispose(){this.contentEl_=null,super.dispose()}updateShowing(S){this.player().duration()===1/0?this.show():this.hide()}}Component$1.registerComponent("LiveDisplay",LiveDisplay);class SeekToLive extends Button{constructor(S,x){super(S,x),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=C=>this.updateLiveEdgeStatus(C),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const S=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",S),this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),S.appendChild(this.textEl_),S}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component$1.registerComponent("SeekToLive",SeekToLive);function clamp(E,S,x){return E=Number(E),Math.min(x,Math.max(S,isNaN(E)?S:E))}var Num=Object.freeze({__proto__:null,clamp});class Slider extends Component$1{constructor(S,x){super(S,x),this.handleMouseDown_=C=>this.handleMouseDown(C),this.handleMouseUp_=C=>this.handleMouseUp(C),this.handleKeyDown_=C=>this.handleKeyDown(C),this.handleClick_=C=>this.handleClick(C),this.handleMouseMove_=C=>this.handleMouseMove(C),this.update_=C=>this.update(C),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const S=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(S,"mousemove",this.handleMouseMove_),this.off(S,"mouseup",this.handleMouseUp_),this.off(S,"touchmove",this.handleMouseMove_),this.off(S,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(S,x={},C={}){return x.className=x.className+" vjs-slider",x=Object.assign({tabIndex:0},x),C=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},C),super.createEl(S,x,C)}handleMouseDown(S){const x=this.bar.el_.ownerDocument;S.type==="mousedown"&&S.preventDefault(),S.type==="touchstart"&&!IS_CHROME&&S.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(x,"mousemove",this.handleMouseMove_),this.on(x,"mouseup",this.handleMouseUp_),this.on(x,"touchmove",this.handleMouseMove_),this.on(x,"touchend",this.handleMouseUp_),this.handleMouseMove(S,!0)}handleMouseMove(S){}handleMouseUp(S){const x=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(x,"mousemove",this.handleMouseMove_),this.off(x,"mouseup",this.handleMouseUp_),this.off(x,"touchmove",this.handleMouseMove_),this.off(x,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const S=this.getProgress();return S===this.progress_||(this.progress_=S,this.requestNamedAnimationFrame("Slider#update",()=>{const x=this.vertical()?"height":"width";this.bar.el().style[x]=(S*100).toFixed(2)+"%"})),S}getProgress(){return Number(clamp(this.getPercent(),0,1).toFixed(4))}calculateDistance(S){const x=getPointerPosition(this.el_,S);return this.vertical()?x.y:x.x}handleKeyDown(S){const x=this.options_.playerOptions.spatialNavigation,C=x&&x.enabled,R=x&&x.horizontalSeek;C?R&&S.key==="ArrowLeft"||!R&&S.key==="ArrowDown"?(S.preventDefault(),S.stopPropagation(),this.stepBack()):R&&S.key==="ArrowRight"||!R&&S.key==="ArrowUp"?(S.preventDefault(),S.stopPropagation(),this.stepForward()):super.handleKeyDown(S):S.key==="ArrowLeft"||S.key==="ArrowDown"?(S.preventDefault(),S.stopPropagation(),this.stepBack()):S.key==="ArrowUp"||S.key==="ArrowRight"?(S.preventDefault(),S.stopPropagation(),this.stepForward()):super.handleKeyDown(S)}handleClick(S){S.stopPropagation(),S.preventDefault()}vertical(S){if(S===void 0)return this.vertical_||!1;this.vertical_=!!S,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Component$1.registerComponent("Slider",Slider);const percentify=(E,S)=>clamp(E/S*100,0,100).toFixed(2)+"%";class LoadProgressBar extends Component$1{constructor(S,x){super(S,x),this.partEls_=[],this.on(S,"progress",C=>this.update(C))}createEl(){const S=super.createEl("div",{className:"vjs-load-progress"}),x=createEl("span",{className:"vjs-control-text"}),C=createEl("span",{textContent:this.localize("Loaded")}),R=document$1$1.createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),S.appendChild(x),x.appendChild(C),x.appendChild(R),x.appendChild(this.percentageEl_),S}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(S){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const x=this.player_.liveTracker,C=this.player_.buffered(),R=x&&x.isLive()?x.seekableEnd():this.player_.duration(),Ce=this.player_.bufferedEnd(),Ue=this.partEls_,je=percentify(Ce,R);this.percent_!==je&&(this.el_.style.width=je,textContent(this.percentageEl_,je),this.percent_=je);for(let Xe=0;Xe<C.length;Xe++){const Ye=C.start(Xe),et=C.end(Xe);let ht=Ue[Xe];ht||(ht=this.el_.appendChild(createEl()),Ue[Xe]=ht),!(ht.dataset.start===Ye&&ht.dataset.end===et)&&(ht.dataset.start=Ye,ht.dataset.end=et,ht.style.left=percentify(Ye,Ce),ht.style.width=percentify(et-Ye,Ce))}for(let Xe=Ue.length;Xe>C.length;Xe--)this.el_.removeChild(Ue[Xe-1]);Ue.length=C.length})}}Component$1.registerComponent("LoadProgressBar",LoadProgressBar);class TimeTooltip extends Component$1{constructor(S,x){super(S,x),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(S,x,C){const R=findPosition(this.el_),Ce=getBoundingClientRect(this.player_.el()),Ue=S.width*x;if(!Ce||!R)return;let je=S.left-Ce.left+Ue,Xe=S.width-Ue+(Ce.right-S.right);Xe||(Xe=S.width-Ue,je=Ue);let Ye=R.width/2;je<Ye?Ye+=Ye-je:Xe<Ye&&(Ye=Xe),Ye<0?Ye=0:Ye>R.width&&(Ye=R.width),Ye=Math.round(Ye),this.el_.style.right=`-${Ye}px`,this.write(C)}write(S){textContent(this.el_,S)}updateTime(S,x,C,R){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let Ce;const Ue=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const je=this.player_.liveTracker.liveWindow(),Xe=je-x*je;Ce=(Xe<1?"":"-")+formatTime(Xe,je)}else Ce=formatTime(C,Ue);this.update(S,x,Ce),R&&R()})}}Component$1.registerComponent("TimeTooltip",TimeTooltip);class PlayProgressBar extends Component$1{constructor(S,x){super(S,x),this.setIcon("circle"),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(S,x){const C=this.getChild("timeTooltip");if(!C)return;const R=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();C.updateTime(S,x,R)}}PlayProgressBar.prototype.options_={children:[]};!IS_IOS&&!IS_ANDROID&&PlayProgressBar.prototype.options_.children.push("timeTooltip");Component$1.registerComponent("PlayProgressBar",PlayProgressBar);class MouseTimeDisplay extends Component$1{constructor(S,x){super(S,x),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(S,x){const C=x*this.player_.duration();this.getChild("timeTooltip").updateTime(S,x,C,()=>{this.el_.style.left=`${S.width*x}px`})}}MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component$1.registerComponent("MouseTimeDisplay",MouseTimeDisplay);const STEP_SECONDS=5,PAGE_KEY_MULTIPLIER=12;class SeekBar extends Slider{constructor(S,x){super(S,x),this.setEventHandlers_()}setEventHandlers_(){this.update_=bind_(this,this.update),this.update=throttle$1(this.update_,UPDATE_REFRESH_INTERVAL),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=S=>this.enableInterval_(S),this.disableIntervalHandler_=S=>this.disableInterval_(S),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1$1&&"visibilityState"in document$1$1&&this.on(document$1$1,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(S){document$1$1.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(S)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,UPDATE_REFRESH_INTERVAL))}disableInterval_(S){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&S&&S.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(S){if(document$1$1.visibilityState==="hidden")return;const x=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const C=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),R=this.player_.liveTracker;let Ce=this.player_.duration();R&&R.isLive()&&(Ce=this.player_.liveTracker.liveCurrentTime()),this.percent_!==x&&(this.el_.setAttribute("aria-valuenow",(x*100).toFixed(2)),this.percent_=x),(this.currentTime_!==C||this.duration_!==Ce)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(C,Ce),formatTime(Ce,Ce)],"{1} of {2}")),this.currentTime_=C,this.duration_=Ce),this.bar&&this.bar.update(getBoundingClientRect(this.el()),this.getProgress())}),x}userSeek_(S){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(S)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const S=this.getCurrentTime_();let x;const C=this.player_.liveTracker;return C&&C.isLive()?(x=(S-C.seekableStart())/C.liveWindow(),C.atLiveEdge()&&(x=1)):x=S/this.player_.duration(),x}handleMouseDown(S){isSingleLeftClick(S)&&(S.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(S))}handleMouseMove(S,x=!1){if(!isSingleLeftClick(S)||isNaN(this.player_.duration()))return;!x&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let C;const R=this.calculateDistance(S),Ce=this.player_.liveTracker;if(!Ce||!Ce.isLive())C=R*this.player_.duration(),C===this.player_.duration()&&(C=C-.1);else{if(R>=.99){Ce.seekToLiveEdge();return}const Ue=Ce.seekableStart(),je=Ce.liveCurrentTime();if(C=Ue+R*Ce.liveWindow(),C>=je&&(C=je),C<=Ue&&(C=Ue+.1),C===1/0)return}this.userSeek_(C),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const S=this.getChild("mouseTimeDisplay");S&&S.show()}disable(){super.disable();const S=this.getChild("mouseTimeDisplay");S&&S.hide()}handleMouseUp(S){super.handleMouseUp(S),S&&S.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+STEP_SECONDS)}stepBack(){this.userSeek_(this.player_.currentTime()-STEP_SECONDS)}handleAction(S){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(S){const x=this.player_.liveTracker;if(S.key===" "||S.key==="Enter")S.preventDefault(),S.stopPropagation(),this.handleAction(S);else if(S.key==="Home")S.preventDefault(),S.stopPropagation(),this.userSeek_(0);else if(S.key==="End")S.preventDefault(),S.stopPropagation(),x&&x.isLive()?this.userSeek_(x.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(S.key)){S.preventDefault(),S.stopPropagation();const C=parseInt(S.key,10)*.1;x&&x.isLive()?this.userSeek_(x.seekableStart()+x.liveWindow()*C):this.userSeek_(this.player_.duration()*C)}else S.key==="PageDown"?(S.preventDefault(),S.stopPropagation(),this.userSeek_(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER)):S.key==="PageUp"?(S.preventDefault(),S.stopPropagation(),this.userSeek_(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER)):super.handleKeyDown(S)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1$1&&"visibilityState"in document$1$1&&this.off(document$1$1,"visibilitychange",this.toggleVisibility_),super.dispose()}}SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!IS_IOS&&!IS_ANDROID&&SeekBar.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Component$1.registerComponent("SeekBar",SeekBar);class ProgressControl extends Component$1{constructor(S,x){super(S,x),this.handleMouseMove=throttle$1(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.throttledHandleMouseSeek=throttle$1(bind_(this,this.handleMouseSeek),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=C=>this.handleMouseUp(C),this.handleMouseDownHandler_=C=>this.handleMouseDown(C),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(S){const x=this.getChild("seekBar");if(!x)return;const C=x.getChild("playProgressBar"),R=x.getChild("mouseTimeDisplay");if(!C&&!R)return;const Ce=x.el(),Ue=findPosition(Ce);let je=getPointerPosition(Ce,S).x;je=clamp(je,0,1),R&&R.update(Ue,je),C&&C.update(Ue,x.getProgress())}handleMouseSeek(S){const x=this.getChild("seekBar");x&&x.handleMouseMove(S)}enabled(){return this.enabled_}disable(){if(this.children().forEach(S=>S.disable&&S.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const S=this.getChild("seekBar");this.player_.scrubbing(!1),S.videoWasPlaying&&silencePromise(this.player_.play())}}enable(){this.children().forEach(S=>S.enable&&S.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const S=this.el_.ownerDocument;this.off(S,"mousemove",this.throttledHandleMouseSeek),this.off(S,"touchmove",this.throttledHandleMouseSeek),this.off(S,"mouseup",this.handleMouseUpHandler_),this.off(S,"touchend",this.handleMouseUpHandler_)}handleMouseDown(S){const x=this.el_.ownerDocument,C=this.getChild("seekBar");C&&C.handleMouseDown(S),this.on(x,"mousemove",this.throttledHandleMouseSeek),this.on(x,"touchmove",this.throttledHandleMouseSeek),this.on(x,"mouseup",this.handleMouseUpHandler_),this.on(x,"touchend",this.handleMouseUpHandler_)}handleMouseUp(S){const x=this.getChild("seekBar");x&&x.handleMouseUp(S),this.removeListenersAddedOnMousedownAndTouchstart()}}ProgressControl.prototype.options_={children:["seekBar"]};Component$1.registerComponent("ProgressControl",ProgressControl);class PictureInPictureToggle extends Button{constructor(S,x){super(S,x),this.setIcon("picture-in-picture-enter"),this.on(S,["enterpictureinpicture","leavepictureinpicture"],C=>this.handlePictureInPictureChange(C)),this.on(S,["disablepictureinpicturechanged","loadedmetadata"],C=>this.handlePictureInPictureEnabledChange(C)),this.on(S,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){document$1$1.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in window$1$1?this.enable():this.disable()}handlePictureInPictureChange(S){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(S){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof document$1$1.exitPictureInPicture=="function"&&super.show()}}PictureInPictureToggle.prototype.controlText_="Picture-in-Picture";Component$1.registerComponent("PictureInPictureToggle",PictureInPictureToggle);class FullscreenToggle extends Button{constructor(S,x){super(S,x),this.setIcon("fullscreen-enter"),this.on(S,"fullscreenchange",C=>this.handleFullscreenChange(C)),document$1$1[S.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(S){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(S){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}FullscreenToggle.prototype.controlText_="Fullscreen";Component$1.registerComponent("FullscreenToggle",FullscreenToggle);const checkVolumeSupport=function(E,S){S.tech_&&!S.tech_.featuresVolumeControl&&E.addClass("vjs-hidden"),E.on(S,"loadstart",function(){S.tech_.featuresVolumeControl?E.removeClass("vjs-hidden"):E.addClass("vjs-hidden")})};class VolumeLevel extends Component$1{createEl(){const S=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",S),S.appendChild(super.createEl("span",{className:"vjs-control-text"})),S}}Component$1.registerComponent("VolumeLevel",VolumeLevel);class VolumeLevelTooltip extends Component$1{constructor(S,x){super(S,x),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(S,x,C,R){if(!C){const Ce=getBoundingClientRect(this.el_),Ue=getBoundingClientRect(this.player_.el()),je=S.width*x;if(!Ue||!Ce)return;const Xe=S.left-Ue.left+je,Ye=S.width-je+(Ue.right-S.right);let et=Ce.width/2;Xe<et?et+=et-Xe:Ye<et&&(et=Ye),et<0?et=0:et>Ce.width&&(et=Ce.width),this.el_.style.right=`-${et}px`}this.write(`${R}%`)}write(S){textContent(this.el_,S)}updateVolume(S,x,C,R,Ce){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(S,x,C,R.toFixed(0)),Ce&&Ce()})}}Component$1.registerComponent("VolumeLevelTooltip",VolumeLevelTooltip);class MouseVolumeLevelDisplay extends Component$1{constructor(S,x){super(S,x),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(S,x,C){const R=100*x;this.getChild("volumeLevelTooltip").updateVolume(S,x,C,R,()=>{C?this.el_.style.bottom=`${S.height*x}px`:this.el_.style.left=`${S.width*x}px`})}}MouseVolumeLevelDisplay.prototype.options_={children:["volumeLevelTooltip"]};Component$1.registerComponent("MouseVolumeLevelDisplay",MouseVolumeLevelDisplay);class VolumeBar extends Slider{constructor(S,x){super(S,x),this.on("slideractive",C=>this.updateLastVolume_(C)),this.on(S,"volumechange",C=>this.updateARIAAttributes(C)),S.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(S){isSingleLeftClick(S)&&super.handleMouseDown(S)}handleMouseMove(S){const x=this.getChild("mouseVolumeLevelDisplay");if(x){const C=this.el(),R=getBoundingClientRect(C),Ce=this.vertical();let Ue=getPointerPosition(C,S);Ue=Ce?Ue.y:Ue.x,Ue=clamp(Ue,0,1),x.update(R,Ue,Ce)}isSingleLeftClick(S)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(S)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(S){const x=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",x),this.el_.setAttribute("aria-valuetext",x+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const S=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(S)})}}VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!IS_IOS&&!IS_ANDROID&&VolumeBar.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");VolumeBar.prototype.playerEvent="volumechange";Component$1.registerComponent("VolumeBar",VolumeBar);class VolumeControl extends Component$1{constructor(S,x={}){x.vertical=x.vertical||!1,(typeof x.volumeBar>"u"||isPlain(x.volumeBar))&&(x.volumeBar=x.volumeBar||{},x.volumeBar.vertical=x.vertical),super(S,x),checkVolumeSupport(this,S),this.throttledHandleMouseMove=throttle$1(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=C=>this.handleMouseUp(C),this.on("mousedown",C=>this.handleMouseDown(C)),this.on("touchstart",C=>this.handleMouseDown(C)),this.on("mousemove",C=>this.handleMouseMove(C)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let S="vjs-volume-horizontal";return this.options_.vertical&&(S="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${S}`})}handleMouseDown(S){const x=this.el_.ownerDocument;this.on(x,"mousemove",this.throttledHandleMouseMove),this.on(x,"touchmove",this.throttledHandleMouseMove),this.on(x,"mouseup",this.handleMouseUpHandler_),this.on(x,"touchend",this.handleMouseUpHandler_)}handleMouseUp(S){const x=this.el_.ownerDocument;this.off(x,"mousemove",this.throttledHandleMouseMove),this.off(x,"touchmove",this.throttledHandleMouseMove),this.off(x,"mouseup",this.handleMouseUpHandler_),this.off(x,"touchend",this.handleMouseUpHandler_)}handleMouseMove(S){this.volumeBar.handleMouseMove(S)}}VolumeControl.prototype.options_={children:["volumeBar"]};Component$1.registerComponent("VolumeControl",VolumeControl);const checkMuteSupport=function(E,S){S.tech_&&!S.tech_.featuresMuteControl&&E.addClass("vjs-hidden"),E.on(S,"loadstart",function(){S.tech_.featuresMuteControl?E.removeClass("vjs-hidden"):E.addClass("vjs-hidden")})};class MuteToggle extends Button{constructor(S,x){super(S,x),checkMuteSupport(this,S),this.on(S,["loadstart","volumechange"],C=>this.update(C))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(S){const x=this.player_.volume(),C=this.player_.lastVolume_();if(x===0){const R=C<.1?.1:C;this.player_.volume(R),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(S){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const S=this.player_.volume();let x=3;this.setIcon("volume-high"),IS_IOS&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),S===0||this.player_.muted()?(this.setIcon("volume-mute"),x=0):S<.33?(this.setIcon("volume-low"),x=1):S<.67&&(this.setIcon("volume-medium"),x=2),removeClass(this.el_,[0,1,2,3].reduce((C,R)=>C+`${R?" ":""}vjs-vol-${R}`,"")),addClass(this.el_,`vjs-vol-${x}`)}updateControlText_(){const x=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==x&&this.controlText(x)}}MuteToggle.prototype.controlText_="Mute";Component$1.registerComponent("MuteToggle",MuteToggle);class VolumePanel extends Component$1{constructor(S,x={}){typeof x.inline<"u"?x.inline=x.inline:x.inline=!0,(typeof x.volumeControl>"u"||isPlain(x.volumeControl))&&(x.volumeControl=x.volumeControl||{},x.volumeControl.vertical=!x.inline),super(S,x),this.handleKeyPressHandler_=C=>this.handleKeyPress(C),this.on(S,["loadstart"],C=>this.volumePanelState_(C)),this.on(this.muteToggle,"keyup",C=>this.handleKeyPress(C)),this.on(this.volumeControl,"keyup",C=>this.handleVolumeControlKeyUp(C)),this.on("keydown",C=>this.handleKeyPress(C)),this.on("mouseover",C=>this.handleMouseOver(C)),this.on("mouseout",C=>this.handleMouseOut(C)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let S="vjs-volume-panel-horizontal";return this.options_.inline||(S="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${S}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(S){S.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(S){this.addClass("vjs-hover"),on$1(document$1$1,"keyup",this.handleKeyPressHandler_)}handleMouseOut(S){this.removeClass("vjs-hover"),off$1(document$1$1,"keyup",this.handleKeyPressHandler_)}handleKeyPress(S){S.key==="Escape"&&this.handleMouseOut()}}VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component$1.registerComponent("VolumePanel",VolumePanel);class SkipForward extends Button{constructor(S,x){super(S,x),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(S.language())])),this.show()):this.hide()}getSkipForwardTime(){const S=this.options_.playerOptions;return S.controlBar&&S.controlBar.skipButtons&&S.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(S){if(isNaN(this.player_.duration()))return;const x=this.player_.currentTime(),C=this.player_.liveTracker,R=C&&C.isLive()?C.seekableEnd():this.player_.duration();let Ce;x+this.skipTime<=R?Ce=x+this.skipTime:Ce=R,this.player_.currentTime(Ce)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}SkipForward.prototype.controlText_="Skip Forward";Component$1.registerComponent("SkipForward",SkipForward);class SkipBackward extends Button{constructor(S,x){super(S,x),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(S.language())])),this.show()):this.hide()}getSkipBackwardTime(){const S=this.options_.playerOptions;return S.controlBar&&S.controlBar.skipButtons&&S.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(S){const x=this.player_.currentTime(),C=this.player_.liveTracker,R=C&&C.isLive()&&C.seekableStart();let Ce;R&&x-this.skipTime<=R?Ce=R:x>=this.skipTime?Ce=x-this.skipTime:Ce=0,this.player_.currentTime(Ce)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}SkipBackward.prototype.controlText_="Skip Backward";Component$1.registerComponent("SkipBackward",SkipBackward);class Menu extends Component$1{constructor(S,x){super(S,x),x&&(this.menuButton_=x.menuButton),this.focusedChild_=-1,this.on("keydown",C=>this.handleKeyDown(C)),this.boundHandleBlur_=C=>this.handleBlur(C),this.boundHandleTapClick_=C=>this.handleTapClick(C)}addEventListenerForItem(S){S instanceof Component$1&&(this.on(S,"blur",this.boundHandleBlur_),this.on(S,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(S){S instanceof Component$1&&(this.off(S,"blur",this.boundHandleBlur_),this.off(S,["tap","click"],this.boundHandleTapClick_))}removeChild(S){typeof S=="string"&&(S=this.getChild(S)),this.removeEventListenerForItem(S),super.removeChild(S)}addItem(S){const x=this.addChild(S);x&&this.addEventListenerForItem(x)}createEl(){const S=this.options_.contentElType||"ul";this.contentEl_=createEl(S,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const x=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return x.appendChild(this.contentEl_),on$1(x,"click",function(C){C.preventDefault(),C.stopImmediatePropagation()}),x}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(S){const x=S.relatedTarget||document$1$1.activeElement;if(!this.children().some(C=>C.el()===x)){const C=this.menuButton_;C&&C.buttonPressed_&&x!==C.el().firstChild&&C.unpressButton()}}handleTapClick(S){if(this.menuButton_){this.menuButton_.unpressButton();const x=this.children();if(!Array.isArray(x))return;const C=x.filter(R=>R.el()===S.target)[0];if(!C)return;C.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(S){S.key==="ArrowLeft"||S.key==="ArrowDown"?(S.preventDefault(),S.stopPropagation(),this.stepForward()):(S.key==="ArrowRight"||S.key==="ArrowUp")&&(S.preventDefault(),S.stopPropagation(),this.stepBack())}stepForward(){let S=0;this.focusedChild_!==void 0&&(S=this.focusedChild_+1),this.focus(S)}stepBack(){let S=0;this.focusedChild_!==void 0&&(S=this.focusedChild_-1),this.focus(S)}focus(S=0){const x=this.children().slice();x.length&&x[0].hasClass("vjs-menu-title")&&x.shift(),x.length>0&&(S<0?S=0:S>=x.length&&(S=x.length-1),this.focusedChild_=S,x[S].el_.focus())}}Component$1.registerComponent("Menu",Menu);class MenuButton extends Component$1{constructor(S,x={}){super(S,x),this.menuButton_=new Button(S,x),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const C=Button.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+C,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const R=Ce=>this.handleClick(Ce);this.handleMenuKeyUp_=Ce=>this.handleMenuKeyUp(Ce),this.on(this.menuButton_,"tap",R),this.on(this.menuButton_,"click",R),this.on(this.menuButton_,"keydown",Ce=>this.handleKeyDown(Ce)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),on$1(document$1$1,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",Ce=>this.handleMouseLeave(Ce)),this.on("keydown",Ce=>this.handleSubmenuKeyDown(Ce))}update(){const S=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=S,this.addChild(S),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const S=new Menu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const x=createEl("li",{className:"vjs-menu-title",textContent:toTitleCase$1(this.options_.title),tabIndex:-1}),C=new Component$1(this.player_,{el:x});S.addItem(C)}if(this.items=this.createItems(),this.items)for(let x=0;x<this.items.length;x++)S.addItem(this.items[x]);return S}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(S){super.setIcon(S,this.menuButton_.el_)}buildWrapperCSSClass(){let S="vjs-menu-button";this.options_.inline===!0?S+="-inline":S+="-popup";const x=Button.prototype.buildCSSClass();return`vjs-menu-button ${S} ${x} ${super.buildCSSClass()}`}buildCSSClass(){let S="vjs-menu-button";return this.options_.inline===!0?S+="-inline":S+="-popup",`vjs-menu-button ${S} ${super.buildCSSClass()}`}controlText(S,x=this.menuButton_.el()){return this.menuButton_.controlText(S,x)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(S){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(S){this.removeClass("vjs-hover"),off$1(document$1$1,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(S){S.key==="Esc"||S.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!S.key==="Tab"&&(S.preventDefault(),this.menuButton_.focus())):(S.key==="Up"||S.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(S.preventDefault(),this.pressButton()))}handleMenuKeyUp(S){(S.key==="Esc"||S.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(S){this.handleSubmenuKeyDown(S)}handleSubmenuKeyDown(S){(S.key==="Esc"||S.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!S.key==="Tab"&&(S.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),IS_IOS&&isInFrame())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Component$1.registerComponent("MenuButton",MenuButton);class TrackButton extends MenuButton{constructor(S,x){const C=x.tracks;if(super(S,x),this.items.length<=1&&this.hide(),!C)return;const R=bind_(this,this.update);C.addEventListener("removetrack",R),C.addEventListener("addtrack",R),C.addEventListener("labelchange",R),this.player_.on("ready",R),this.player_.on("dispose",function(){C.removeEventListener("removetrack",R),C.removeEventListener("addtrack",R),C.removeEventListener("labelchange",R)})}}Component$1.registerComponent("TrackButton",TrackButton);class MenuItem extends ClickableComponent{constructor(S,x){super(S,x),this.selectable=x.selectable,this.isSelected_=x.selected||!1,this.multiSelectable=x.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(S,x,C){this.nonIconControl=!0;const R=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},x),C),Ce=createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?R.appendChild(Ce):R.replaceChild(Ce,R.querySelector(".vjs-icon-placeholder")),R}handleKeyDown(S){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(S.key)||super.handleKeyDown(S)}handleClick(S){this.selected(!0)}selected(S){this.selectable&&(S?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Component$1.registerComponent("MenuItem",MenuItem);class TextTrackMenuItem extends MenuItem{constructor(S,x){const C=x.track,R=S.textTracks();x.label=C.label||C.language||"Unknown",x.selected=C.mode==="showing",super(S,x),this.track=C,this.kinds=(x.kinds||[x.kind||this.track.kind]).filter(Boolean);const Ce=(...je)=>{this.handleTracksChange.apply(this,je)},Ue=(...je)=>{this.handleSelectedLanguageChange.apply(this,je)};if(S.on(["loadstart","texttrackchange"],Ce),R.addEventListener("change",Ce),R.addEventListener("selectedlanguagechange",Ue),this.on("dispose",function(){S.off(["loadstart","texttrackchange"],Ce),R.removeEventListener("change",Ce),R.removeEventListener("selectedlanguagechange",Ue)}),R.onchange===void 0){let je;this.on(["tap","click"],function(){if(typeof window$1$1.Event!="object")try{je=new window$1$1.Event("change")}catch{}je||(je=document$1$1.createEvent("Event"),je.initEvent("change",!0,!0)),R.dispatchEvent(je)})}this.handleTracksChange()}handleClick(S){const x=this.track,C=this.player_.textTracks();if(super.handleClick(S),!!C)for(let R=0;R<C.length;R++){const Ce=C[R];this.kinds.indexOf(Ce.kind)!==-1&&(Ce===x?Ce.mode!=="showing"&&(Ce.mode="showing"):Ce.mode!=="disabled"&&(Ce.mode="disabled"))}}handleTracksChange(S){const x=this.track.mode==="showing";x!==this.isSelected_&&this.selected(x)}handleSelectedLanguageChange(S){if(this.track.mode==="showing"){const x=this.player_.cache_.selectedLanguage;if(x&&x.enabled&&x.language===this.track.language&&x.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Component$1.registerComponent("TextTrackMenuItem",TextTrackMenuItem);class OffTextTrackMenuItem extends TextTrackMenuItem{constructor(S,x){x.track={player:S,kind:x.kind,kinds:x.kinds,default:!1,mode:"disabled"},x.kinds||(x.kinds=[x.kind]),x.label?x.track.label=x.label:x.track.label=x.kinds.join(" and ")+" off",x.selectable=!0,x.multiSelectable=!1,super(S,x)}handleTracksChange(S){const x=this.player().textTracks();let C=!0;for(let R=0,Ce=x.length;R<Ce;R++){const Ue=x[R];if(this.options_.kinds.indexOf(Ue.kind)>-1&&Ue.mode==="showing"){C=!1;break}}C!==this.isSelected_&&this.selected(C)}handleSelectedLanguageChange(S){const x=this.player().textTracks();let C=!0;for(let R=0,Ce=x.length;R<Ce;R++){const Ue=x[R];if(["captions","descriptions","subtitles"].indexOf(Ue.kind)>-1&&Ue.mode==="showing"){C=!1;break}}C&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Component$1.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);class TextTrackButton extends TrackButton{constructor(S,x={}){x.tracks=S.textTracks(),super(S,x)}createItems(S=[],x=TextTrackMenuItem){let C;this.label_&&(C=`${this.label_} off`),S.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:C})),this.hideThreshold_+=1;const R=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let Ce=0;Ce<R.length;Ce++){const Ue=R[Ce];if(this.kinds_.indexOf(Ue.kind)>-1){const je=new x(this.player_,{track:Ue,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});je.addClass(`vjs-${Ue.kind}-menu-item`),S.push(je)}}return S}}Component$1.registerComponent("TextTrackButton",TextTrackButton);class ChaptersTrackMenuItem extends MenuItem{constructor(S,x){const C=x.track,R=x.cue,Ce=S.currentTime();x.selectable=!0,x.multiSelectable=!1,x.label=R.text,x.selected=R.startTime<=Ce&&Ce<R.endTime,super(S,x),this.track=C,this.cue=R}handleClick(S){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Component$1.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);class ChaptersButton extends TextTrackButton{constructor(S,x,C){super(S,x,C),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(R=>{R.selected(this.track_.activeCues[0]===R.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(S){if(S&&S.track&&S.track.kind!=="chapters")return;const x=this.findChaptersTrack();x!==this.track_?(this.setTrack(x),super.update()):(!this.items||x&&x.cues&&x.cues.length!==this.items.length)&&super.update()}setTrack(S){if(this.track_!==S){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const x=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);x&&x.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=S,this.track_){this.track_.mode="hidden";const x=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);x&&x.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const S=this.player_.textTracks()||[];for(let x=S.length-1;x>=0;x--){const C=S[x];if(C.kind===this.kind_)return C}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(toTitleCase$1(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const S=[];if(!this.track_)return S;const x=this.track_.cues;if(!x)return S;for(let C=0,R=x.length;C<R;C++){const Ce=x[C],Ue=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:Ce});S.push(Ue)}return S}}ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component$1.registerComponent("ChaptersButton",ChaptersButton);class DescriptionsButton extends TextTrackButton{constructor(S,x,C){super(S,x,C),this.setIcon("audio-description");const R=S.textTracks(),Ce=bind_(this,this.handleTracksChange);R.addEventListener("change",Ce),this.on("dispose",function(){R.removeEventListener("change",Ce)})}handleTracksChange(S){const x=this.player().textTracks();let C=!1;for(let R=0,Ce=x.length;R<Ce;R++){const Ue=x[R];if(Ue.kind!==this.kind_&&Ue.mode==="showing"){C=!0;break}}C?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component$1.registerComponent("DescriptionsButton",DescriptionsButton);class SubtitlesButton extends TextTrackButton{constructor(S,x,C){super(S,x,C),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubtitlesButton",SubtitlesButton);class CaptionSettingsMenuItem extends TextTrackMenuItem{constructor(S,x){x.track={player:S,kind:x.kind,label:x.kind+" settings",selectable:!1,default:!1,mode:"disabled"},x.selectable=!1,x.name="CaptionSettingsMenuItem",super(S,x),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+x.kind+" settings dialog")}handleClick(S){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Component$1.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);class CaptionsButton extends TextTrackButton{constructor(S,x,C){super(S,x,C),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const S=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(S.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(S)}}CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component$1.registerComponent("CaptionsButton",CaptionsButton);class SubsCapsMenuItem extends TextTrackMenuItem{createEl(S,x,C){const R=super.createEl(S,x,C),Ce=R.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",R):Ce.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),Ce.appendChild(createEl("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),R}}Component$1.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);class SubsCapsButton extends TextTrackButton{constructor(S,x={}){super(S,x),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(toTitleCase$1(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let S=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(S.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_})),this.hideThreshold_+=1),S=super.createItems(S,SubsCapsMenuItem),S}}SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubsCapsButton",SubsCapsButton);class AudioTrackMenuItem extends MenuItem{constructor(S,x){const C=x.track,R=S.audioTracks();x.label=C.label||C.language||"Unknown",x.selected=C.enabled,super(S,x),this.track=C,this.addClass(`vjs-${C.kind}-menu-item`);const Ce=(...Ue)=>{this.handleTracksChange.apply(this,Ue)};R.addEventListener("change",Ce),this.on("dispose",()=>{R.removeEventListener("change",Ce)})}createEl(S,x,C){const R=super.createEl(S,x,C),Ce=R.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(Ce.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),Ce.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),R}handleClick(S){if(super.handleClick(S),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const x=this.player_.audioTracks();for(let C=0;C<x.length;C++){const R=x[C];R!==this.track&&(R.enabled=R===this.track)}}}handleTracksChange(S){this.selected(this.track.enabled)}}Component$1.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);class AudioTrackButton extends TrackButton{constructor(S,x={}){x.tracks=S.audioTracks(),super(S,x),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(S=[]){this.hideThreshold_=1;const x=this.player_.audioTracks();for(let C=0;C<x.length;C++){const R=x[C];S.push(new AudioTrackMenuItem(this.player_,{track:R,selectable:!0,multiSelectable:!1}))}return S}}AudioTrackButton.prototype.controlText_="Audio Track";Component$1.registerComponent("AudioTrackButton",AudioTrackButton);class PlaybackRateMenuItem extends MenuItem{constructor(S,x){const C=x.rate,R=parseFloat(C,10);x.label=C,x.selected=R===S.playbackRate(),x.selectable=!0,x.multiSelectable=!1,super(S,x),this.label=C,this.rate=R,this.on(S,"ratechange",Ce=>this.update(Ce))}handleClick(S){super.handleClick(),this.player().playbackRate(this.rate)}update(S){this.selected(this.player().playbackRate()===this.rate)}}PlaybackRateMenuItem.prototype.contentElType="button";Component$1.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);class PlaybackRateMenuButton extends MenuButton{constructor(S,x){super(S,x),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(S,"loadstart",C=>this.updateVisibility(C)),this.on(S,"ratechange",C=>this.updateLabel(C)),this.on(S,"playbackrateschange",C=>this.handlePlaybackRateschange(C))}createEl(){const S=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),S.appendChild(this.labelEl_),S}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const S=this.playbackRates(),x=[];for(let C=S.length-1;C>=0;C--)x.push(new PlaybackRateMenuItem(this.player(),{rate:S[C]+"x"}));return x}handlePlaybackRateschange(S){this.update()}playbackRates(){const S=this.player();return S.playbackRates&&S.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(S){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(S){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);class Spacer extends Component$1{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(S="div",x={},C={}){return x.className||(x.className=this.buildCSSClass()),super.createEl(S,x,C)}}Component$1.registerComponent("Spacer",Spacer);class CustomControlSpacer extends Spacer{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}Component$1.registerComponent("CustomControlSpacer",CustomControlSpacer);class ControlBar extends Component$1{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ControlBar.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Component$1.registerComponent("ControlBar",ControlBar);class ErrorDisplay extends ModalDialog{constructor(S,x){super(S,x),this.on(S,"error",C=>{this.open(C)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const S=this.player().error();return S?this.localize(S.message):""}}ErrorDisplay.prototype.options_=Object.assign({},ModalDialog.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Component$1.registerComponent("ErrorDisplay",ErrorDisplay);class TextTrackSelect extends Component$1{constructor(S,x={}){super(S,x),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),createEl("select",{id:this.options_.id},{},this.options_.SelectOptions.map(x=>{const C=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${newGUID()}`)+"-"+x[1].replace(/\W+/g,""),R=createEl("option",{id:C,value:this.localize(x[0]),textContent:x[1]});return R.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${C}`),R}))}}Component$1.registerComponent("TextTrackSelect",TextTrackSelect);class TextTrackFieldset extends Component$1{constructor(S,x={}){super(S,x);const C=createEl("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(C);const R=this.options_.selects;for(const Ce of R){const Ue=this.options_.selectConfigs[Ce],je=Ue.className,Xe=Ue.id.replace("%s",this.options_.id_);let Ye=null;const et=`vjs_select_${newGUID()}`;if(this.options_.type==="colors"){Ye=createEl("span",{className:je});const Dt=createEl("label",{id:Xe,className:"vjs-label",textContent:Ue.label});Dt.setAttribute("for",et),Ye.appendChild(Dt)}const ht=new TextTrackSelect(S,{SelectOptions:Ue.options,legendId:this.options_.legendId,id:et,labelId:Xe});this.addChild(ht),this.options_.type==="colors"&&(Ye.appendChild(ht.el()),this.el().appendChild(Ye))}}createEl(){return createEl("fieldset",{className:this.options_.className})}}Component$1.registerComponent("TextTrackFieldset",TextTrackFieldset);class TextTrackSettingsColors extends Component$1{constructor(S,x={}){super(S,x);const C=this.options_.textTrackComponentid,R=new TextTrackFieldset(S,{id_:C,legendId:`captions-text-legend-${C}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(R);const Ce=new TextTrackFieldset(S,{id_:C,legendId:`captions-background-${C}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(Ce);const Ue=new TextTrackFieldset(S,{id_:C,legendId:`captions-window-${C}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(Ue)}createEl(){return createEl("div",{className:"vjs-track-settings-colors"})}}Component$1.registerComponent("TextTrackSettingsColors",TextTrackSettingsColors);class TextTrackSettingsFont extends Component$1{constructor(S,x={}){super(S,x);const C=this.options_.textTrackComponentid,R=new TextTrackFieldset(S,{id_:C,legendId:`captions-font-size-${C}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(R);const Ce=new TextTrackFieldset(S,{id_:C,legendId:`captions-edge-style-${C}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(Ce);const Ue=new TextTrackFieldset(S,{id_:C,legendId:`captions-font-family-${C}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(Ue)}createEl(){return createEl("div",{className:"vjs-track-settings-font"})}}Component$1.registerComponent("TextTrackSettingsFont",TextTrackSettingsFont);class TrackSettingsControls extends Component$1{constructor(S,x={}){super(S,x);const C=this.localize("restore all settings to the default values"),R=new Button(S,{controlText:C,className:"vjs-default-button"});R.el().classList.remove("vjs-control","vjs-button"),R.el().textContent=this.localize("Reset"),this.addChild(R);const Ce=new Button(S,{controlText:C,className:"vjs-done-button"});Ce.el().classList.remove("vjs-control","vjs-button"),Ce.el().textContent=this.localize("Done"),this.addChild(Ce)}createEl(){return createEl("div",{className:"vjs-track-settings-controls"})}}Component$1.registerComponent("TrackSettingsControls",TrackSettingsControls);const LOCAL_STORAGE_KEY$1="vjs-text-track-settings",COLOR_BLACK=["#000","Black"],COLOR_BLUE=["#00F","Blue"],COLOR_CYAN=["#0FF","Cyan"],COLOR_GREEN=["#0F0","Green"],COLOR_MAGENTA=["#F0F","Magenta"],COLOR_RED=["#F00","Red"],COLOR_WHITE$1=["#FFF","White"],COLOR_YELLOW=["#FF0","Yellow"],OPACITY_OPAQUE=["1","Opaque"],OPACITY_SEMI=["0.5","Semi-Transparent"],OPACITY_TRANS=["0","Transparent"],selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE$1,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE$1,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:E=>E==="1.00"?null:Number(E)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE],className:"vjs-window-opacity vjs-opacity"}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(E,S){if(S&&(E=S(E)),E&&E!=="none")return E}function getSelectedOptionValue(E,S){const x=E.options[E.options.selectedIndex].value;return parseOptionValue(x,S)}function setSelectedOption(E,S,x){if(S){for(let C=0;C<E.options.length;C++)if(parseOptionValue(E.options[C].value,x)===S){E.selectedIndex=C;break}}}class TextTrackSettings extends ModalDialog{constructor(S,x){x.temporary=!1,super(S,x),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(S),this.endDialog=createEl("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),x.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(S){const x=new TextTrackSettingsColors(S,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(x);const C=new TextTrackSettingsFont(S,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(C);const R=new TrackSettingsControls(S);this.addChild(R)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),each(selectConfigs,S=>{this.on(this.$(S.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return reduce(selectConfigs,(S,x,C)=>{const R=getSelectedOptionValue(this.$(x.selector),x.parser);return R!==void 0&&(S[C]=R),S},{})}setValues(S){each(selectConfigs,(x,C)=>{setSelectedOption(this.$(x.selector),S[C],x.parser)})}setDefaults(){each(selectConfigs,S=>{const x=S.hasOwnProperty("default")?S.default:0;this.$(S.selector).selectedIndex=x})}restoreSettings(){let S;try{S=JSON.parse(window$1$1.localStorage.getItem(LOCAL_STORAGE_KEY$1))}catch(x){log$1.warn(x)}S&&this.setValues(S)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const S=this.getValues();try{Object.keys(S).length?window$1$1.localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(S)):window$1$1.localStorage.removeItem(LOCAL_STORAGE_KEY$1)}catch(x){log$1.warn(x)}}updateDisplay(){const S=this.player_.getChild("textTrackDisplay");S&&S.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Component$1.registerComponent("TextTrackSettings",TextTrackSettings);class ResizeManager extends Component$1{constructor(S,x){let C=x.ResizeObserver||window$1$1.ResizeObserver;x.ResizeObserver===null&&(C=!1);const R=merge$1({createEl:!C,reportTouchActivity:!1},x);super(S,R),this.ResizeObserver=x.ResizeObserver||window$1$1.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=debounce(()=>{this.resizeHandler()},100,!1,this),C?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(S.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const Ce=this.debouncedHandler_;let Ue=this.unloadListener_=function(){off$1(this,"resize",Ce),off$1(this,"unload",Ue),Ue=null};on$1(this.el_.contentWindow,"unload",Ue),on$1(this.el_.contentWindow,"resize",Ce)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Component$1.registerComponent("ResizeManager",ResizeManager);const defaults$1={trackingThreshold:20,liveTolerance:15};class LiveTracker extends Component$1{constructor(S,x){const C=merge$1(defaults$1,x,{createEl:!1});super(S,C),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=R=>this.handlePlay(R),this.handleFirstTimeupdate_=R=>this.handleFirstTimeupdate(R),this.handleSeeked_=R=>this.handleSeeked(R),this.seekToLiveEdge_=R=>this.seekToLiveEdge(R),this.reset_(),this.on(this.player_,"durationchange",R=>this.handleDurationchange(R)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const S=this.player_.seekable();if(!S||!S.length)return;const x=Number(window$1$1.performance.now().toFixed(4)),C=this.lastTime_===-1?0:(x-this.lastTime_)/1e3;this.lastTime_=x,this.pastSeekEnd_=this.pastSeekEnd()+C;const R=this.liveCurrentTime(),Ce=this.player_.currentTime();let Ue=this.player_.paused()||this.seekedBehindLive_||Math.abs(R-Ce)>this.options_.liveTolerance;(!this.timeupdateSeen_||R===1/0)&&(Ue=!1),Ue!==this.behindLiveEdge_&&(this.behindLiveEdge_=Ue,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,UPDATE_REFRESH_INTERVAL),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const S=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&S>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const S=this.player_.seekable(),x=[];let C=S?S.length:0;for(;C--;)x.push(S.end(C));return x.length?x.sort()[x.length-1]:1/0}seekableStart(){const S=this.player_.seekable(),x=[];let C=S?S.length:0;for(;C--;)x.push(S.start(C));return x.length?x.sort()[0]:0}liveWindow(){const S=this.liveCurrentTime();return S===1/0?0:S-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const S=this.seekableEnd();return this.lastSeekEnd_!==-1&&S!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=S,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Component$1.registerComponent("LiveTracker",LiveTracker);class TitleBar extends Component$1{constructor(S,x){super(S,x),this.on("statechanged",C=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:createEl("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${newGUID()}`}),description:createEl("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${newGUID()}`})},createEl("div",{className:"vjs-title-bar"},{},values(this.els))}updateDom_(){const S=this.player_.tech_,x=S&&S.el_,C={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(R=>{const Ce=this.state[R],Ue=this.els[R],je=C[R];emptyEl(Ue),Ce&&textContent(Ue,Ce),x&&(x.removeAttribute(je),Ce&&x.setAttribute(je,Ue.id))}),this.state.title||this.state.description?this.show():this.hide()}update(S){this.setState(S)}dispose(){const S=this.player_.tech_,x=S&&S.el_;x&&(x.removeAttribute("aria-labelledby"),x.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Component$1.registerComponent("TitleBar",TitleBar);const defaults$2={initialDisplay:4e3,position:[],takeFocus:!1};class TransientButton extends Button{constructor(S,x){x=merge$1(defaults$2,x),super(S,x),this.controlText(x.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],C=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(S=>`vjs-${S}`).join(" ")}`}createEl(){const S=createEl("button",{},{type:"button",class:this.buildCSSClass()},createEl("span"));return this.controlTextEl_=S.querySelector("span"),S}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Component$1.registerComponent("TransientButton",TransientButton);const sourcesetLoad=E=>{const S=E.el();if(S.hasAttribute("src"))return E.triggerSourceset(S.src),!0;const x=E.$$("source"),C=[];let R="";if(!x.length)return!1;for(let Ce=0;Ce<x.length;Ce++){const Ue=x[Ce].src;Ue&&C.indexOf(Ue)===-1&&C.push(Ue)}return C.length?(C.length===1&&(R=C[0]),E.triggerSourceset(R),!0):!1},innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(E){const S=document$1$1.createElement(this.nodeName.toLowerCase());S.innerHTML=E;const x=document$1$1.createDocumentFragment();for(;S.childNodes.length;)x.appendChild(S.childNodes[0]);return this.innerText="",window$1$1.Element.prototype.appendChild.call(this,x),this.innerHTML}}),getDescriptor=(E,S)=>{let x={};for(let C=0;C<E.length&&(x=Object.getOwnPropertyDescriptor(E[C],S),!(x&&x.set&&x.get));C++);return x.enumerable=!0,x.configurable=!0,x},getInnerHTMLDescriptor=E=>getDescriptor([E.el(),window$1$1.HTMLMediaElement.prototype,window$1$1.Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML"),firstSourceWatch=function(E){const S=E.el();if(S.resetSourceWatch_)return;const x={},C=getInnerHTMLDescriptor(E),R=Ce=>(...Ue)=>{const je=Ce.apply(S,Ue);return sourcesetLoad(E),je};["append","appendChild","insertAdjacentHTML"].forEach(Ce=>{S[Ce]&&(x[Ce]=S[Ce],S[Ce]=R(x[Ce]))}),Object.defineProperty(S,"innerHTML",merge$1(C,{set:R(C.set)})),S.resetSourceWatch_=()=>{S.resetSourceWatch_=null,Object.keys(x).forEach(Ce=>{S[Ce]=x[Ce]}),Object.defineProperty(S,"innerHTML",C)},E.one("sourceset",S.resetSourceWatch_)},srcDescriptorPolyfill=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?getAbsoluteURL(window$1$1.Element.prototype.getAttribute.call(this,"src")):""},set(E){return window$1$1.Element.prototype.setAttribute.call(this,"src",E),E}}),getSrcDescriptor=E=>getDescriptor([E.el(),window$1$1.HTMLMediaElement.prototype,srcDescriptorPolyfill],"src"),setupSourceset=function(E){if(!E.featuresSourceset)return;const S=E.el();if(S.resetSourceset_)return;const x=getSrcDescriptor(E),C=S.setAttribute,R=S.load;Object.defineProperty(S,"src",merge$1(x,{set:Ce=>{const Ue=x.set.call(S,Ce);return E.triggerSourceset(S.src),Ue}})),S.setAttribute=(Ce,Ue)=>{const je=C.call(S,Ce,Ue);return/src/i.test(Ce)&&E.triggerSourceset(S.src),je},S.load=()=>{const Ce=R.call(S);return sourcesetLoad(E)||(E.triggerSourceset(""),firstSourceWatch(E)),Ce},S.currentSrc?E.triggerSourceset(S.currentSrc):sourcesetLoad(E)||firstSourceWatch(E),S.resetSourceset_=()=>{S.resetSourceset_=null,S.load=R,S.setAttribute=C,Object.defineProperty(S,"src",x),S.resetSourceWatch_&&S.resetSourceWatch_()}};class Html5 extends Tech{constructor(S,x){super(S,x);const C=S.source;let R=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",C&&(this.el_.currentSrc!==C.src||S.tag&&S.tag.initNetworkState_===3)?this.setSource(C):this.handleLateInit_(this.el_),S.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const Ce=this.el_.childNodes;let Ue=Ce.length;const je=[];for(;Ue--;){const Xe=Ce[Ue];Xe.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(Xe),this.remoteTextTracks().addTrack(Xe.track),this.textTracks().addTrack(Xe.track),!R&&!this.el_.hasAttribute("crossorigin")&&isCrossOrigin(Xe.src)&&(R=!0)):je.push(Xe))}for(let Xe=0;Xe<je.length;Xe++)this.el_.removeChild(je[Xe])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&R&&log$1.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(TOUCH_ENABLED||IS_IPHONE)&&S.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html5.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){setupSourceset(this)}restoreMetadataTracksInIOSNativePlayer_(){const S=this.textTracks();let x;const C=()=>{x=[];for(let Ce=0;Ce<S.length;Ce++){const Ue=S[Ce];Ue.kind==="metadata"&&x.push({track:Ue,storedMode:Ue.mode})}};C(),S.addEventListener("change",C),this.on("dispose",()=>S.removeEventListener("change",C));const R=()=>{for(let Ce=0;Ce<x.length;Ce++){const Ue=x[Ce];Ue.track.mode==="disabled"&&Ue.track.mode!==Ue.storedMode&&(Ue.track.mode=Ue.storedMode)}S.removeEventListener("change",R)};this.on("webkitbeginfullscreen",()=>{S.removeEventListener("change",C),S.removeEventListener("change",R),S.addEventListener("change",R)}),this.on("webkitendfullscreen",()=>{S.removeEventListener("change",C),S.addEventListener("change",C),S.removeEventListener("change",R)})}overrideNative_(S,x){if(x!==this[`featuresNative${S}Tracks`])return;const C=S.toLowerCase();this[`${C}TracksListeners_`]&&Object.keys(this[`${C}TracksListeners_`]).forEach(R=>{this.el()[`${C}Tracks`].removeEventListener(R,this[`${C}TracksListeners_`][R])}),this[`featuresNative${S}Tracks`]=!x,this[`${C}TracksListeners_`]=null,this.proxyNativeTracksForType_(C)}overrideNativeAudioTracks(S){this.overrideNative_("Audio",S)}overrideNativeVideoTracks(S){this.overrideNative_("Video",S)}proxyNativeTracksForType_(S){const x=NORMAL[S],C=this.el()[x.getterName],R=this[x.getterName]();if(!this[`featuresNative${x.capitalName}Tracks`]||!C||!C.addEventListener)return;const Ce={change:je=>{const Xe={type:"change",target:R,currentTarget:R,srcElement:R};R.trigger(Xe),S==="text"&&this[REMOTE.remoteText.getterName]().trigger(Xe)},addtrack(je){R.addTrack(je.track)},removetrack(je){R.removeTrack(je.track)}},Ue=function(){const je=[];for(let Xe=0;Xe<R.length;Xe++){let Ye=!1;for(let et=0;et<C.length;et++)if(C[et]===R[Xe]){Ye=!0;break}Ye||je.push(R[Xe])}for(;je.length;)R.removeTrack(je.shift())};this[x.getterName+"Listeners_"]=Ce,Object.keys(Ce).forEach(je=>{const Xe=Ce[je];C.addEventListener(je,Xe),this.on("dispose",Ye=>C.removeEventListener(je,Xe))}),this.on("loadstart",Ue),this.on("dispose",je=>this.off("loadstart",Ue))}proxyNativeTracks_(){NORMAL.names.forEach(S=>{this.proxyNativeTracksForType_(S)})}createEl(){let S=this.options_.tag;if(!S||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(S){const C=S.cloneNode(!0);S.parentNode&&S.parentNode.insertBefore(C,S),Html5.disposeMediaElement(S),S=C}else{S=document$1$1.createElement("video");const C=this.options_.tag&&getAttributes(this.options_.tag),R=merge$1({},C);(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==!0)&&delete R.controls,setAttributes(S,Object.assign(R,{id:this.options_.techId,class:"vjs-tech"}))}S.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&setAttribute(S,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(S.disablePictureInPicture=this.options_.disablePictureInPicture);const x=["loop","muted","playsinline","autoplay"];for(let C=0;C<x.length;C++){const R=x[C],Ce=this.options_[R];typeof Ce<"u"&&(Ce?setAttribute(S,R,R):removeAttribute(S,R),S[R]=Ce)}return S}handleLateInit_(S){if(S.networkState===0||S.networkState===3)return;if(S.readyState===0){let C=!1;const R=function(){C=!0};this.on("loadstart",R);const Ce=function(){C||this.trigger("loadstart")};this.on("loadedmetadata",Ce),this.ready(function(){this.off("loadstart",R),this.off("loadedmetadata",Ce),C||this.trigger("loadstart")});return}const x=["loadstart"];x.push("loadedmetadata"),S.readyState>=2&&x.push("loadeddata"),S.readyState>=3&&x.push("canplay"),S.readyState>=4&&x.push("canplaythrough"),this.ready(function(){x.forEach(function(C){this.trigger(C)},this)})}setScrubbing(S){this.isScrubbing_=S}scrubbing(){return this.isScrubbing_}setCurrentTime(S){try{this.isScrubbing_&&this.el_.fastSeek&&IS_ANY_SAFARI?this.el_.fastSeek(S):this.el_.currentTime=S}catch(x){log$1(x,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){const S=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",S))};return this.on("timeupdate",S),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const S=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},x=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",S),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",x),this.on("dispose",()=>{this.off("webkitbeginfullscreen",x),this.off("webkitendfullscreen",S)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const S=this.el_;if(S.paused&&S.networkState<=S.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout(function(){S.pause();try{S.webkitEnterFullScreen()}catch(x){this.trigger("fullscreenerror",x)}},0);else try{S.webkitEnterFullScreen()}catch(x){this.trigger("fullscreenerror",x)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(S){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(S):super.requestVideoFrameCallback(S)}cancelVideoFrameCallback(S){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(S):super.cancelVideoFrameCallback(S)}src(S){if(S===void 0)return this.el_.src;this.setSrc(S)}addSourceElement(S,x){if(!S)return log$1.error("Invalid source URL."),!1;const C={src:S};x&&(C.type=x);const R=createEl("source",{},C);return this.el_.appendChild(R),!0}removeSourceElement(S){if(!S)return log$1.error("Source URL is required to remove the source element."),!1;const x=this.el_.querySelectorAll("source");for(const C of x)if(C.src===S)return this.el_.removeChild(C),!0;return log$1.warn(`No matching source element found with src: ${S}`),!1}reset(){Html5.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(S){this.el_.controls=!!S}addTextTrack(S,x,C){return this.featuresNativeTextTracks?this.el_.addTextTrack(S,x,C):super.addTextTrack(S,x,C)}createRemoteTextTrack(S){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(S);const x=document$1$1.createElement("track");return S.kind&&(x.kind=S.kind),S.label&&(x.label=S.label),(S.language||S.srclang)&&(x.srclang=S.language||S.srclang),S.default&&(x.default=S.default),S.id&&(x.id=S.id),S.src&&(x.src=S.src),x}addRemoteTextTrack(S,x){const C=super.addRemoteTextTrack(S,x);return this.featuresNativeTextTracks&&this.el().appendChild(C),C}removeRemoteTextTrack(S){if(super.removeRemoteTextTrack(S),this.featuresNativeTextTracks){const x=this.$$("track");let C=x.length;for(;C--;)(S===x[C]||S===x[C].track)&&this.el().removeChild(x[C])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const S={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(S.droppedVideoFrames=this.el().webkitDroppedFrameCount,S.totalVideoFrames=this.el().webkitDecodedFrameCount),window$1$1.performance&&(S.creationTime=window$1$1.performance.now()),S}}defineLazyProperty(Html5,"TEST_VID",function(){if(!isReal())return;const E=document$1$1.createElement("video"),S=document$1$1.createElement("track");return S.kind="captions",S.srclang="en",S.label="English",E.appendChild(S),E});Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch{return!1}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType)};Html5.canPlayType=function(E){return Html5.TEST_VID.canPlayType(E)};Html5.canPlaySource=function(E,S){return Html5.canPlayType(E.type)};Html5.canControlVolume=function(){try{const E=Html5.TEST_VID.volume;Html5.TEST_VID.volume=E/2+.1;const S=E!==Html5.TEST_VID.volume;return S&&IS_IOS?(window$1$1.setTimeout(()=>{Html5&&Html5.prototype&&(Html5.prototype.featuresVolumeControl=E!==Html5.TEST_VID.volume)}),!1):S}catch{return!1}};Html5.canMuteVolume=function(){try{const E=Html5.TEST_VID.muted;return Html5.TEST_VID.muted=!E,Html5.TEST_VID.muted?setAttribute(Html5.TEST_VID,"muted","muted"):removeAttribute(Html5.TEST_VID,"muted","muted"),E!==Html5.TEST_VID.muted}catch{return!1}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58)return!1;try{const E=Html5.TEST_VID.playbackRate;return Html5.TEST_VID.playbackRate=E/2+.1,E!==Html5.TEST_VID.playbackRate}catch{return!1}};Html5.canOverrideAttributes=function(){try{const E=()=>{};Object.defineProperty(document$1$1.createElement("video"),"src",{get:E,set:E}),Object.defineProperty(document$1$1.createElement("audio"),"src",{get:E,set:E}),Object.defineProperty(document$1$1.createElement("video"),"innerHTML",{get:E,set:E}),Object.defineProperty(document$1$1.createElement("audio"),"innerHTML",{get:E,set:E})}catch{return!1}return!0};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks)};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks)};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([E,S]){defineLazyProperty(Html5.prototype,E,()=>Html5[S](),!0)});Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=!0;Html5.prototype.featuresProgressEvents=!0;Html5.prototype.featuresTimeupdateEvents=!0;Html5.prototype.featuresVideoFrameCallback=!!(Html5.TEST_VID&&Html5.TEST_VID.requestVideoFrameCallback);Html5.disposeMediaElement=function(E){if(E){for(E.parentNode&&E.parentNode.removeChild(E);E.hasChildNodes();)E.removeChild(E.firstChild);E.removeAttribute("src"),typeof E.load=="function"&&function(){try{E.load()}catch{}}()}};Html5.resetMediaElement=function(E){if(!E)return;const S=E.querySelectorAll("source");let x=S.length;for(;x--;)E.removeChild(S[x]);E.removeAttribute("src"),typeof E.load=="function"&&function(){try{E.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(E){Html5.prototype[E]=function(){return this.el_[E]||this.el_.hasAttribute(E)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(E){Html5.prototype["set"+toTitleCase$1(E)]=function(S){this.el_[E]=S,S?this.el_.setAttribute(E,E):this.el_.removeAttribute(E)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(E){Html5.prototype[E]=function(){return this.el_[E]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(E){Html5.prototype["set"+toTitleCase$1(E)]=function(S){this.el_[E]=S}});["pause","load","play"].forEach(function(E){Html5.prototype[E]=function(){return this.el_[E]()}});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(E){try{return Html5.TEST_VID.canPlayType(E)}catch{return""}};Html5.nativeSourceHandler.canHandleSource=function(E,S){if(E.type)return Html5.nativeSourceHandler.canPlayType(E.type);if(E.src){const x=getFileExtension(E.src);return Html5.nativeSourceHandler.canPlayType(`video/${x}`)}return""};Html5.nativeSourceHandler.handleSource=function(E,S,x){S.setSrc(E.src)};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);const TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"],BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(E=>{const S=E.charAt(0)==="x"?`x-${E.substring(1)}`:E;BREAKPOINT_CLASSES[E]=`vjs-layout-${S}`});const DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Player extends Component$1{constructor(S,x,C){if(S.id=S.id||x.id||`vjs_video_${newGUID()}`,x=Object.assign(Player.getTagSettings(S),x),x.initChildren=!1,x.createEl=!1,x.evented=!1,x.reportTouchActivity=!1,!x.language){const Ue=S.closest("[lang]");Ue&&(x.language=Ue.getAttribute("lang"))}if(super(null,x,C),this.boundDocumentFullscreenChange_=Ue=>this.documentFullscreenChange_(Ue),this.boundFullWindowOnEscKey_=Ue=>this.fullWindowOnEscKey(Ue),this.boundUpdateStyleEl_=Ue=>this.updateStyleEl_(Ue),this.boundApplyInitTime_=Ue=>this.applyInitTime_(Ue),this.boundUpdateCurrentBreakpoint_=Ue=>this.updateCurrentBreakpoint_(Ue),this.boundHandleTechClick_=Ue=>this.handleTechClick_(Ue),this.boundHandleTechDoubleClick_=Ue=>this.handleTechDoubleClick_(Ue),this.boundHandleTechTouchStart_=Ue=>this.handleTechTouchStart_(Ue),this.boundHandleTechTouchMove_=Ue=>this.handleTechTouchMove_(Ue),this.boundHandleTechTouchEnd_=Ue=>this.handleTechTouchEnd_(Ue),this.boundHandleTechTap_=Ue=>this.handleTechTap_(Ue),this.boundUpdatePlayerHeightOnAudioOnlyMode_=Ue=>this.updatePlayerHeightOnAudioOnlyMode_(Ue),this.isFullscreen_=!1,this.log=createLogger(this.id_),this.fsApi_=FullscreenApi,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=S,this.tagAttributes=S&&getAttributes(S),this.language(this.options_.language),x.languages){const Ue={};Object.getOwnPropertyNames(x.languages).forEach(function(je){Ue[je.toLowerCase()]=x.languages[je]}),this.languages_=Ue}else this.languages_=Player.prototype.options_.languages;this.resetCache_(),this.poster_=x.poster||"",this.controls_=!!x.controls,S.controls=!1,S.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],S.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),x.plugins&&Object.keys(x.plugins).forEach(Ue=>{if(typeof this[Ue]!="function")throw new Error(`plugin "${Ue}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),evented(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(on$1(document$1$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const R=merge$1(this.options_);if(x.plugins&&Object.keys(x.plugins).forEach(Ue=>{this[Ue](x.plugins[Ue])}),x.debug&&this.debug(!0),this.options_.playerOptions=R,this.middleware_=[],this.playbackRates(x.playbackRates),x.experimentalSvgIcons){const je=new window$1$1.DOMParser().parseFromString(icons,"image/svg+xml");if(je.querySelector("parsererror"))log$1.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const Ye=je.documentElement;Ye.style.display="none",this.el_.appendChild(Ye),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(S.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),x.spatialNavigation&&x.spatialNavigation.enabled&&(this.spatialNavigation=new SpatialNavigation(this),this.addClass("vjs-spatial-navigation-enabled")),TOUCH_ENABLED&&this.addClass("vjs-touch-enabled"),IS_IOS||this.addClass("vjs-workinghover"),Player.players[this.id_]=this;const Ce=version$6.split(".")[0];this.addClass(`vjs-v${Ce}`),this.userActive(!0),this.reportUserActivity(),this.one("play",Ue=>this.listenForUserActivity_(Ue)),this.on("keydown",Ue=>this.handleKeyDown(Ue)),this.on("languagechange",Ue=>this.handleLanguagechange(Ue)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),off$1(document$1$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off$1(document$1$1,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),clearCacheForPlayer(this),ALL.names.forEach(S=>{const x=ALL[S],C=this[x.getterName]();C&&C.off&&C.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let S=this.tag,x,C=this.playerElIngest_=S.parentNode&&S.parentNode.hasAttribute&&S.parentNode.hasAttribute("data-vjs-player");const R=this.tag.tagName.toLowerCase()==="video-js";C?x=this.el_=S.parentNode:R||(x=this.el_=super.createEl("div"));const Ce=getAttributes(S);if(R){for(x=this.el_=S,S=this.tag=document$1$1.createElement("video");x.children.length;)S.appendChild(x.firstChild);hasClass(x,"video-js")||addClass(x,"video-js"),x.appendChild(S),C=this.playerElIngest_=x,Object.keys(x).forEach(Xe=>{try{S[Xe]=x[Xe]}catch{}})}S.setAttribute("tabindex","-1"),Ce.tabindex="-1",IS_CHROME&&IS_WINDOWS&&(S.setAttribute("role","application"),Ce.role="application"),S.removeAttribute("width"),S.removeAttribute("height"),"width"in Ce&&delete Ce.width,"height"in Ce&&delete Ce.height,Object.getOwnPropertyNames(Ce).forEach(function(Xe){R&&Xe==="class"||x.setAttribute(Xe,Ce[Xe]),R&&S.setAttribute(Xe,Ce[Xe])}),S.playerId=S.id,S.id+="_html5_api",S.className="vjs-tech",S.player=x.player=this,this.addClass("vjs-paused");const Ue=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(Xe=>browser[Xe]).map(Xe=>"vjs-device-"+Xe.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...Ue),window$1$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=createStyleElement("vjs-styles-dimensions");const Xe=$(".vjs-styles-defaults"),Ye=$("head");Ye.insertBefore(this.styleEl_,Xe?Xe.nextSibling:Ye.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const je=S.getElementsByTagName("a");for(let Xe=0;Xe<je.length;Xe++){const Ye=je.item(Xe);addClass(Ye,"vjs-hidden"),Ye.setAttribute("hidden","hidden")}return S.initNetworkState_=S.networkState,S.parentNode&&!C&&S.parentNode.insertBefore(x,S),prependTo(S,x),this.children_.unshift(S),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=x,x}crossOrigin(S){if(typeof S>"u")return this.techGet_("crossOrigin");if(S!==null&&S!=="anonymous"&&S!=="use-credentials"){log$1.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${S}"`);return}this.techCall_("setCrossOrigin",S),this.posterImage&&this.posterImage.crossOrigin(S)}width(S){return this.dimension("width",S)}height(S){return this.dimension("height",S)}dimension(S,x){const C=S+"_";if(x===void 0)return this[C]||0;if(x===""||x==="auto"){this[C]=void 0,this.updateStyleEl_();return}const R=parseFloat(x);if(isNaN(R)){log$1.error(`Improper value "${x}" supplied for for ${S}`);return}this[C]=R,this.updateStyleEl_()}fluid(S){if(S===void 0)return!!this.fluid_;this.fluid_=!!S,isEvented(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),S?(this.addClass("vjs-fluid"),this.fill(!1),addEventedCallback(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(S){if(S===void 0)return!!this.fill_;this.fill_=!!S,S?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(S){if(S===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(S))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=S,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(window$1$1.VIDEOJS_NO_DYNAMIC_STYLE===!0){const je=typeof this.width_=="number"?this.width_:this.options_.width,Xe=typeof this.height_=="number"?this.height_:this.options_.height,Ye=this.tech_&&this.tech_.el();Ye&&(je>=0&&(Ye.width=je),Xe>=0&&(Ye.height=Xe));return}let S,x,C,R;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?C=this.aspectRatio_:this.videoWidth()>0?C=this.videoWidth()+":"+this.videoHeight():C="16:9";const Ce=C.split(":"),Ue=Ce[1]/Ce[0];this.width_!==void 0?S=this.width_:this.height_!==void 0?S=this.height_/Ue:S=this.videoWidth()||300,this.height_!==void 0?x=this.height_:x=S*Ue,/^[^a-zA-Z]/.test(this.id())?R="dimensions-"+this.id():R=this.id()+"-dimensions",this.addClass(R),setTextContent(this.styleEl_,`
      .${R} {
        width: ${S}px;
        height: ${x}px;
      }

      .${R}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${Ue*100}%;
      }
    `)}loadTech_(S,x){this.tech_&&this.unloadTech_();const C=toTitleCase$1(S),R=S.charAt(0).toLowerCase()+S.slice(1);C!=="Html5"&&this.tag&&(Tech.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=C,this.isReady_=!1;let Ce=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(Ce=!1);const Ue={source:x,autoplay:Ce,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${R}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ALL.names.forEach(Xe=>{const Ye=ALL[Xe];Ue[Ye.getterName]=this[Ye.privateName]}),Object.assign(Ue,this.options_[C]),Object.assign(Ue,this.options_[R]),Object.assign(Ue,this.options_[S.toLowerCase()]),this.tag&&(Ue.tag=this.tag),x&&x.src===this.cache_.src&&this.cache_.currentTime>0&&(Ue.startTime=this.cache_.currentTime);const je=Tech.getTech(S);if(!je)throw new Error(`No Tech named '${C}' exists! '${C}' should be registered using videojs.registerTech()'`);this.tech_=new je(Ue),this.tech_.ready(bind_(this,this.handleTechReady_),!0),textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_),TECH_EVENTS_RETRIGGER.forEach(Xe=>{this.on(this.tech_,Xe,Ye=>this[`handleTech${toTitleCase$1(Xe)}_`](Ye))}),Object.keys(TECH_EVENTS_QUEUE).forEach(Xe=>{this.on(this.tech_,Xe,Ye=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${TECH_EVENTS_QUEUE[Xe]}_`].bind(this),event:Ye});return}this[`handleTech${TECH_EVENTS_QUEUE[Xe]}_`](Ye)})}),this.on(this.tech_,"loadstart",Xe=>this.handleTechLoadStart_(Xe)),this.on(this.tech_,"sourceset",Xe=>this.handleTechSourceset_(Xe)),this.on(this.tech_,"waiting",Xe=>this.handleTechWaiting_(Xe)),this.on(this.tech_,"ended",Xe=>this.handleTechEnded_(Xe)),this.on(this.tech_,"seeking",Xe=>this.handleTechSeeking_(Xe)),this.on(this.tech_,"play",Xe=>this.handleTechPlay_(Xe)),this.on(this.tech_,"pause",Xe=>this.handleTechPause_(Xe)),this.on(this.tech_,"durationchange",Xe=>this.handleTechDurationChange_(Xe)),this.on(this.tech_,"fullscreenchange",(Xe,Ye)=>this.handleTechFullscreenChange_(Xe,Ye)),this.on(this.tech_,"fullscreenerror",(Xe,Ye)=>this.handleTechFullscreenError_(Xe,Ye)),this.on(this.tech_,"enterpictureinpicture",Xe=>this.handleTechEnterPictureInPicture_(Xe)),this.on(this.tech_,"leavepictureinpicture",Xe=>this.handleTechLeavePictureInPicture_(Xe)),this.on(this.tech_,"error",Xe=>this.handleTechError_(Xe)),this.on(this.tech_,"posterchange",Xe=>this.handleTechPosterChange_(Xe)),this.on(this.tech_,"textdata",Xe=>this.handleTechTextData_(Xe)),this.on(this.tech_,"ratechange",Xe=>this.handleTechRateChange_(Xe)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(C!=="Html5"||!this.tag)&&prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ALL.names.forEach(S=>{const x=ALL[S];this[x.privateName]=this[x.getterName]()}),this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(S){return S===void 0&&log$1.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":version$6}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(S){if(!this.tech_||typeof S!="string")return;const x=()=>{const R=this.muted();this.muted(!0);const Ce=()=>{this.muted(R)};this.playTerminatedQueue_.push(Ce);const Ue=this.play();if(isPromise$1(Ue))return Ue.catch(je=>{throw Ce(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${je||""}`)})};let C;if(S==="any"&&!this.muted()?(C=this.play(),isPromise$1(C)&&(C=C.catch(x))):S==="muted"&&!this.muted()?C=x():C=this.play(),!!isPromise$1(C))return C.then(()=>{this.trigger({type:"autoplay-success",autoplay:S})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:S})})}updateSourceCaches_(S=""){let x=S,C="";typeof x!="string"&&(x=S.src,C=S.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],x&&!C&&(C=findMimetype(this,x)),this.cache_.source=merge$1({},S,{src:x,type:C});const R=this.cache_.sources.filter(Xe=>Xe.src&&Xe.src===x),Ce=[],Ue=this.$$("source"),je=[];for(let Xe=0;Xe<Ue.length;Xe++){const Ye=getAttributes(Ue[Xe]);Ce.push(Ye),Ye.src&&Ye.src===x&&je.push(Ye.src)}je.length&&!R.length?this.cache_.sources=Ce:R.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=x}handleTechSourceset_(S){if(!this.changingSrc_){let x=Ce=>this.updateSourceCaches_(Ce);const C=this.currentSource().src,R=S.src;C&&!/^blob:/.test(C)&&/^blob:/.test(R)&&(!this.lastSource_||this.lastSource_.tech!==R&&this.lastSource_.player!==C)&&(x=()=>{}),x(R),S.src||this.tech_.any(["sourceset","loadstart"],Ce=>{if(Ce.type==="sourceset")return;const Ue=this.techGet_("currentSrc");this.lastSource_.tech=Ue,this.updateSourceCaches_(Ue)})}this.lastSource_={player:this.currentSource().src,tech:S.src},this.trigger({src:S.src,type:"sourceset"})}hasStarted(S){if(S===void 0)return this.hasStarted_;S!==this.hasStarted_&&(this.hasStarted_=S,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(S=>S.callback(S.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const S=this.currentTime(),x=()=>{S!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",x))};this.on("timeupdate",x)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(S){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,S):this.paused()?silencePromise(this.play()):this.pause())}handleTechDoubleClick_(S){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),C=>C.contains(S.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,S):this.isInPictureInPicture()&&!document$1$1.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(S){S.cancelable&&S.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(S){const x=S.target.player;if(x&&x!==this)return;const C=this.el();let R=document$1$1[this.fsApi_.fullscreenElement]===C;!R&&C.matches&&(R=C.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(R)}handleTechFullscreenChange_(S,x){x&&(x.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(x.isFullscreen))}handleTechFullscreenError_(S,x){this.trigger("fullscreenerror",x)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(S){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(S){this.isInPictureInPicture(!1)}handleTechError_(){const S=this.tech_.error();S&&this.error(S)}handleTechTextData_(){let S=null;arguments.length>1&&(S=arguments[1]),this.trigger("textdata",S)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(S,x){this.ready(function(){if(S in allowedSetters)return set(this.middleware_,this.tech_,S,x);if(S in allowedMediators)return mediate(this.middleware_,this.tech_,S,x);try{this.tech_&&this.tech_[S](x)}catch(C){throw log$1(C),C}},!0)}techGet_(S){if(!(!this.tech_||!this.tech_.isReady_)){if(S in allowedGetters)return get(this.middleware_,this.tech_,S);if(S in allowedMediators)return mediate(this.middleware_,this.tech_,S);try{return this.tech_[S]()}catch(x){throw this.tech_[S]===void 0?(log$1(`Video.js: ${S} method not defined for ${this.techName_} playback technology.`,x),x):x.name==="TypeError"?(log$1(`Video.js: ${S} unavailable on ${this.techName_} playback technology element.`,x),this.tech_.isReady_=!1,x):(log$1(x),x)}}}play(){return new Promise(S=>{this.play_(S)})}play_(S=silencePromise){this.playCallbacks_.push(S);const x=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),C=!!(IS_ANY_SAFARI||IS_IOS);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!x){this.waitToPlay_=Ue=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!x&&C&&this.load();return}const R=this.techGet_("play");C&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),R===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(R)}runPlayTerminatedQueue_(){const S=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],S.forEach(function(x){x()})}runPlayCallbacks_(S){const x=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],x.forEach(function(C){C(S)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||createTimeRanges$1(0,0)}scrubbing(S){if(typeof S>"u")return this.scrubbing_;this.scrubbing_=!!S,this.techCall_("setScrubbing",this.scrubbing_),S?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(S){if(S===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(S<0&&(S=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=S,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",S),this.cache_.initTime=0,isFinite(S)&&(this.cache_.currentTime=Number(S))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(S){if(S===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;S=parseFloat(S),S<0&&(S=1/0),S!==this.cache_.duration&&(this.cache_.duration=S,S===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(S)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let S=this.techGet_("buffered");return(!S||!S.length)&&(S=createTimeRanges$1(0,0)),S}seekable(){let S=this.techGet_("seekable");return(!S||!S.length)&&(S=createTimeRanges$1(0,0)),S}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration())}bufferedEnd(){const S=this.buffered(),x=this.duration();let C=S.end(S.length-1);return C>x&&(C=x),C}volume(S){let x;if(S!==void 0){x=Math.max(0,Math.min(1,S)),this.cache_.volume=x,this.techCall_("setVolume",x),x>0&&this.lastVolume_(x);return}return x=parseFloat(this.techGet_("volume")),isNaN(x)?1:x}muted(S){if(S!==void 0){this.techCall_("setMuted",S);return}return this.techGet_("muted")||!1}defaultMuted(S){return S!==void 0&&this.techCall_("setDefaultMuted",S),this.techGet_("defaultMuted")||!1}lastVolume_(S){if(S!==void 0&&S!==0){this.cache_.lastVolume=S;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(S){if(S!==void 0){const x=this.isFullscreen_;this.isFullscreen_=!!S,this.isFullscreen_!==x&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(S){this.isInPictureInPicture()&&this.exitPictureInPicture();const x=this;return new Promise((C,R)=>{function Ce(){x.off("fullscreenerror",je),x.off("fullscreenchange",Ue)}function Ue(){Ce(),C()}function je(Ye,et){Ce(),R(et)}x.one("fullscreenchange",Ue),x.one("fullscreenerror",je);const Xe=x.requestFullscreenHelper_(S);Xe&&(Xe.then(Ce,Ce),Xe.then(C,R))})}requestFullscreenHelper_(S){let x;if(this.fsApi_.prefixed||(x=this.options_.fullscreen&&this.options_.fullscreen.options||{},S!==void 0&&(x=S)),this.fsApi_.requestFullscreen){const C=this.el_[this.fsApi_.requestFullscreen](x);return C&&C.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),C}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const S=this;return new Promise((x,C)=>{function R(){S.off("fullscreenerror",Ue),S.off("fullscreenchange",Ce)}function Ce(){R(),x()}function Ue(Xe,Ye){R(),C(Ye)}S.one("fullscreenchange",Ce),S.one("fullscreenerror",Ue);const je=S.exitFullscreenHelper_();je&&(je.then(R,R),je.then(x,C))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const S=document$1$1[this.fsApi_.exitFullscreen]();return S&&silencePromise(S.then(()=>this.isFullscreen(!1))),S}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document$1$1.documentElement.style.overflow,on$1(document$1$1,"keydown",this.boundFullWindowOnEscKey_),document$1$1.documentElement.style.overflow="hidden",addClass(document$1$1.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(S){S.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off$1(document$1$1,"keydown",this.boundFullWindowOnEscKey_),document$1$1.documentElement.style.overflow=this.docOrigOverflow,removeClass(document$1$1.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(S){if(S===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",S),this.options_.disablePictureInPicture=S,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(S){if(S!==void 0){this.isInPictureInPicture_=!!S,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&window$1$1.documentPictureInPicture){const S=document$1$1.createElement(this.el().tagName);return S.classList=this.el().classList,S.classList.add("vjs-pip-container"),this.posterImage&&S.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&S.appendChild(this.titleBar.el().cloneNode(!0)),S.appendChild(createEl("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window$1$1.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(x=>(copyStyleSheetsToWindow(x),this.el_.parentNode.insertBefore(S,this.el_),x.document.body.appendChild(this.el_),x.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:x}),x.addEventListener("pagehide",C=>{const R=C.target.querySelector(".video-js");S.parentNode.replaceChild(R,S),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),x))}return"pictureInPictureEnabled"in document$1$1&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(window$1$1.documentPictureInPicture&&window$1$1.documentPictureInPicture.window)return window$1$1.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in document$1$1)return document$1$1.exitPictureInPicture()}handleKeyDown(S){const{userActions:x}=this.options_;!x||!x.hotkeys||(R=>{const Ce=R.tagName.toLowerCase();if(R.isContentEditable)return!0;const Ue=["button","checkbox","hidden","radio","reset","submit"];return Ce==="input"?Ue.indexOf(R.type)===-1:["textarea"].indexOf(Ce)!==-1})(this.el_.ownerDocument.activeElement)||(typeof x.hotkeys=="function"?x.hotkeys.call(this,S):this.handleHotkeys(S))}handleHotkeys(S){const x=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:C=Ue=>S.key.toLowerCase()==="f",muteKey:R=Ue=>S.key.toLowerCase()==="m",playPauseKey:Ce=Ue=>S.key.toLowerCase()==="k"||S.key.toLowerCase()===" "}=x;if(C.call(this,S)){S.preventDefault(),S.stopPropagation();const Ue=Component$1.getComponent("FullscreenToggle");document$1$1[this.fsApi_.fullscreenEnabled]!==!1&&Ue.prototype.handleClick.call(this,S)}else R.call(this,S)?(S.preventDefault(),S.stopPropagation(),Component$1.getComponent("MuteToggle").prototype.handleClick.call(this,S)):Ce.call(this,S)&&(S.preventDefault(),S.stopPropagation(),Component$1.getComponent("PlayToggle").prototype.handleClick.call(this,S))}canPlayType(S){let x;for(let C=0,R=this.options_.techOrder;C<R.length;C++){const Ce=R[C];let Ue=Tech.getTech(Ce);if(Ue||(Ue=Component$1.getComponent(Ce)),!Ue){log$1.error(`The "${Ce}" tech is undefined. Skipped browser support check for that tech.`);continue}if(Ue.isSupported()&&(x=Ue.canPlayType(S),x))return x}return""}selectSource(S){const x=this.options_.techOrder.map(je=>[je,Tech.getTech(je)]).filter(([je,Xe])=>Xe?Xe.isSupported():(log$1.error(`The "${je}" tech is undefined. Skipped browser support check for that tech.`),!1)),C=function(je,Xe,Ye){let et;return je.some(ht=>Xe.some(Dt=>{if(et=Ye(ht,Dt),et)return!0})),et};let R;const Ce=je=>(Xe,Ye)=>je(Ye,Xe),Ue=([je,Xe],Ye)=>{if(Xe.canPlaySource(Ye,this.options_[je.toLowerCase()]))return{source:Ye,tech:je}};return this.options_.sourceOrder?R=C(S,x,Ce(Ue)):R=C(x,S,Ue),R||!1}handleSrc_(S,x){if(typeof S>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const C=filterSource(S);if(!C.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,x||(this.cache_.sources=C),this.updateSourceCaches_(C[0]),setSource(this,C[0],(R,Ce)=>{if(this.middleware_=Ce,x||(this.cache_.sources=C),this.updateSourceCaches_(R),this.src_(R)){if(C.length>1)return this.handleSrc_(C.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}setTech(Ce,this.tech_)}),C.length>1){const R=()=>{this.error(null),this.handleSrc_(C.slice(1),!0)},Ce=()=>{this.off("error",R)};this.one("error",R),this.one("playing",Ce),this.resetRetryOnError_=()=>{this.off("error",R),this.off("playing",Ce)}}}src(S){return this.handleSrc_(S,!1)}src_(S){const x=this.selectSource([S]);return x?titleCaseEquals(x.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",S):this.techCall_("src",S.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(x.tech,x.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(S,x){return this.tech_?this.tech_.addSourceElement(S,x):!1}removeSourceElement(S){return this.tech_?this.tech_.removeSourceElement(S):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const S=this.play();silencePromise(S.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),isEvented(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:S,durationDisplay:x,progressControl:C,remainingTimeDisplay:R}=this.controlBar||{},{seekBar:Ce}=C||{};S&&S.updateContent(),x&&x.updateContent(),R&&R.updateContent(),Ce&&(Ce.update(),Ce.loadProgressBar&&Ce.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const S=this.currentSource(),x=[];return Object.keys(S).length!==0&&x.push(S),this.cache_.sources||x}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(S){if(S!==void 0){this.techCall_("setPreload",S),this.options_.preload=S;return}return this.techGet_("preload")}autoplay(S){if(S===void 0)return this.options_.autoplay||!1;let x;typeof S=="string"&&/(any|play|muted)/.test(S)||S===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=S,this.manualAutoplay_(typeof S=="string"?S:"play"),x=!1):S?this.options_.autoplay=!0:this.options_.autoplay=!1,x=typeof x>"u"?this.options_.autoplay:x,this.tech_&&this.techCall_("setAutoplay",x)}playsinline(S){return S!==void 0&&(this.techCall_("setPlaysinline",S),this.options_.playsinline=S),this.techGet_("playsinline")}loop(S){if(S!==void 0){this.techCall_("setLoop",S),this.options_.loop=S;return}return this.techGet_("loop")}poster(S){if(S===void 0)return this.poster_;S||(S=""),S!==this.poster_&&(this.poster_=S,this.techCall_("setPoster",S),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const S=this.tech_.poster()||"";S!==this.poster_&&(this.poster_=S,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(S){if(S===void 0)return!!this.controls_;S=!!S,this.controls_!==S&&(this.controls_=S,this.usingNativeControls()&&this.techCall_("setControls",S),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(S){if(S===void 0)return!!this.usingNativeControls_;S=!!S,this.usingNativeControls_!==S&&(this.usingNativeControls_=S,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(S){if(S===void 0)return this.error_||null;if(hooks("beforeerror").forEach(x=>{const C=x(this,S);if(!(isObject$1(C)&&!Array.isArray(C)||typeof C=="string"||typeof C=="number"||C===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}S=C}),this.options_.suppressNotSupportedError&&S&&S.code===4){const x=function(){this.error(S)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],x),this.one("loadstart",function(){this.off(["click","touchstart"],x)});return}if(S===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new MediaError(S),this.addClass("vjs-error"),log$1.error(`(CODE:${this.error_.code} ${MediaError.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),hooks("error").forEach(x=>x(this,this.error_))}reportUserActivity(S){this.userActivity_=!0}userActive(S){if(S===void 0)return this.userActive_;if(S=!!S,S!==this.userActive_){if(this.userActive_=S,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(x){x.stopPropagation(),x.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let S,x,C;const R=bind_(this,this.reportUserActivity),Ce=function(ht){(ht.screenX!==x||ht.screenY!==C)&&(x=ht.screenX,C=ht.screenY,R())},Ue=function(){R(),this.clearInterval(S),S=this.setInterval(R,250)},je=function(ht){R(),this.clearInterval(S)};this.on("mousedown",Ue),this.on("mousemove",Ce),this.on("mouseup",je),this.on("mouseleave",je);const Xe=this.getChild("controlBar");Xe&&!IS_IOS&&!IS_ANDROID&&(Xe.on("mouseenter",function(ht){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),Xe.on("mouseleave",function(ht){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",R),this.on("keyup",R);let Ye;const et=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(Ye);const ht=this.options_.inactivityTimeout;ht<=0||(Ye=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},ht))};this.setInterval(et,250)}playbackRate(S){if(S!==void 0){this.techCall_("setPlaybackRate",S);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(S){return S!==void 0?this.techCall_("setDefaultPlaybackRate",S):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(S){if(S!==void 0){this.isAudio_=!!S;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const S=this.getChild("ControlBar");!S||this.audioOnlyCache_.controlBarHeight===S.currentHeight()||(this.audioOnlyCache_.controlBarHeight=S.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const S=this.children(),x=this.getChild("ControlBar"),C=x&&x.currentHeight();S.forEach(R=>{R!==x&&R.el_&&!R.hasClass("vjs-hidden")&&(R.hide(),this.audioOnlyCache_.hiddenChildren.push(R))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=C,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(C),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(S=>S.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(S){if(typeof S!="boolean"||S===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=S,S){const x=[];return this.isInPictureInPicture()&&x.push(this.exitPictureInPicture()),this.isFullscreen()&&x.push(this.exitFullscreen()),this.audioPosterMode()&&x.push(this.audioPosterMode(!1)),Promise.all(x).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(S){return typeof S!="boolean"||S===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=S,S?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(S,x,C){if(this.tech_)return this.tech_.addTextTrack(S,x,C)}addRemoteTextTrack(S,x){if(this.tech_)return this.tech_.addRemoteTextTrack(S,x)}removeRemoteTextTrack(S={}){let{track:x}=S;if(x||(x=S),this.tech_)return this.tech_.removeRemoteTextTrack(x)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(S){if(S===void 0)return this.language_;this.language_!==String(S).toLowerCase()&&(this.language_=String(S).toLowerCase(),isEvented(this)&&this.trigger("languagechange"))}languages(){return merge$1(Player.prototype.options_.languages,this.languages_)}toJSON(){const S=merge$1(this.options_),x=S.tracks;S.tracks=[];for(let C=0;C<x.length;C++){let R=x[C];R=merge$1(R),R.player=void 0,S.tracks[C]=R}return S}createModal(S,x){x=x||{},x.content=S||"";const C=new ModalDialog(this,x);return this.addChild(C),C.on("dispose",()=>{this.removeChild(C)}),C.open(),C}updateCurrentBreakpoint_(){if(!this.responsive())return;const S=this.currentBreakpoint(),x=this.currentWidth();for(let C=0;C<BREAKPOINT_ORDER.length;C++){const R=BREAKPOINT_ORDER[C],Ce=this.breakpoints_[R];if(x<=Ce){if(S===R)return;S&&this.removeClass(BREAKPOINT_CLASSES[S]),this.addClass(BREAKPOINT_CLASSES[R]),this.breakpoint_=R;break}}}removeCurrentBreakpoint_(){const S=this.currentBreakpointClass();this.breakpoint_="",S&&this.removeClass(S)}breakpoints(S){return S===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},DEFAULT_BREAKPOINTS,S),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(S){if(S===void 0)return this.responsive_;S=!!S;const x=this.responsive_;if(S!==x)return this.responsive_=S,S?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),S}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||""}loadMedia(S,x){if(!S||typeof S!="object")return;const C=this.crossOrigin();this.reset(),this.cache_.media=merge$1(S);const{artist:R,artwork:Ce,description:Ue,poster:je,src:Xe,textTracks:Ye,title:et}=this.cache_.media;!Ce&&je&&(this.cache_.media.artwork=[{src:je,type:getMimetype(je)}]),C&&this.crossOrigin(C),Xe&&this.src(Xe),je&&this.poster(je),Array.isArray(Ye)&&Ye.forEach(ht=>this.addRemoteTextTrack(ht,!1)),this.titleBar&&this.titleBar.update({title:et,description:Ue||R||""}),this.ready(x)}getMedia(){if(!this.cache_.media){const S=this.poster(),x=this.currentSources(),C=Array.prototype.map.call(this.remoteTextTracks(),Ce=>({kind:Ce.kind,label:Ce.label,language:Ce.language,src:Ce.src})),R={src:x,textTracks:C};return S&&(R.poster=S,R.artwork=[{src:R.poster,type:getMimetype(R.poster)}]),R}return merge$1(this.cache_.media)}static getTagSettings(S){const x={sources:[],tracks:[]},C=getAttributes(S),R=C["data-setup"];if(hasClass(S,"vjs-fill")&&(C.fill=!0),hasClass(S,"vjs-fluid")&&(C.fluid=!0),R!==null)try{Object.assign(C,JSON.parse(R||"{}"))}catch(Ce){log$1.error("data-setup",Ce)}if(Object.assign(x,C),S.hasChildNodes()){const Ce=S.childNodes;for(let Ue=0,je=Ce.length;Ue<je;Ue++){const Xe=Ce[Ue],Ye=Xe.nodeName.toLowerCase();Ye==="source"?x.sources.push(getAttributes(Xe)):Ye==="track"&&x.tracks.push(getAttributes(Xe))}}return x}debug(S){if(S===void 0)return this.debugEnabled_;S?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(S){if(S===void 0)return this.cache_.playbackRates;Array.isArray(S)&&S.every(x=>typeof x=="number")&&(this.cache_.playbackRates=S,this.trigger("playbackrateschange"))}}ALL.names.forEach(function(E){const S=ALL[E];Player.prototype[S.getterName]=function(){return this.tech_?this.tech_[S.getterName]():(this[S.privateName]=this[S.privateName]||new S.ListClass,this[S.privateName])}});Player.prototype.crossorigin=Player.prototype.crossOrigin;Player.players={};const navigator$1=window$1$1.navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator$1&&(navigator$1.languages&&navigator$1.languages[0]||navigator$1.userLanguage||navigator$1.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};TECH_EVENTS_RETRIGGER.forEach(function(E){Player.prototype[`handleTech${toTitleCase$1(E)}_`]=function(){return this.trigger(E)}});Component$1.registerComponent("Player",Player);const BASE_PLUGIN_NAME="plugin",PLUGIN_CACHE_KEY="activePlugins_",pluginStorage={},pluginExists=E=>pluginStorage.hasOwnProperty(E),getPlugin=E=>pluginExists(E)?pluginStorage[E]:void 0,markPluginAsActive=(E,S)=>{E[PLUGIN_CACHE_KEY]=E[PLUGIN_CACHE_KEY]||{},E[PLUGIN_CACHE_KEY][S]=!0},triggerSetupEvent=(E,S,x)=>{const C=(x?"before":"")+"pluginsetup";E.trigger(C,S),E.trigger(C+":"+S.name,S)},createBasicPlugin=function(E,S){const x=function(){triggerSetupEvent(this,{name:E,plugin:S,instance:null},!0);const C=S.apply(this,arguments);return markPluginAsActive(this,E),triggerSetupEvent(this,{name:E,plugin:S,instance:C}),C};return Object.keys(S).forEach(function(C){x[C]=S[C]}),x},createPluginFactory=(E,S)=>(S.prototype.name=E,function(...x){triggerSetupEvent(this,{name:E,plugin:S,instance:null},!0);const C=new S(this,...x);return this[E]=()=>C,triggerSetupEvent(this,C.getEventHash()),C});class Plugin{constructor(S){if(this.constructor===Plugin)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=S,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),markPluginAsActive(S,this.name),this.dispose=this.dispose.bind(this),S.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(S={}){return S.name=this.name,S.plugin=this.constructor,S.instance=this,S}trigger(S,x={}){return trigger(this.eventBusEl_,S,this.getEventHash(x))}handleStateChanged(S){}dispose(){const{name:S,player:x}=this;this.trigger("dispose"),this.off(),x.off("dispose",this.dispose),x[PLUGIN_CACHE_KEY][S]=!1,this.player=this.state=null,x[S]=createPluginFactory(S,pluginStorage[S])}static isBasic(S){const x=typeof S=="string"?getPlugin(S):S;return typeof x=="function"&&!Plugin.prototype.isPrototypeOf(x.prototype)}static registerPlugin(S,x){if(typeof S!="string")throw new Error(`Illegal plugin name, "${S}", must be a string, was ${typeof S}.`);if(pluginExists(S))log$1.warn(`A plugin named "${S}" already exists. You may want to avoid re-registering plugins!`);else if(Player.prototype.hasOwnProperty(S))throw new Error(`Illegal plugin name, "${S}", cannot share a name with an existing player method!`);if(typeof x!="function")throw new Error(`Illegal plugin for "${S}", must be a function, was ${typeof x}.`);return pluginStorage[S]=x,S!==BASE_PLUGIN_NAME&&(Plugin.isBasic(x)?Player.prototype[S]=createBasicPlugin(S,x):Player.prototype[S]=createPluginFactory(S,x)),x}static deregisterPlugin(S){if(S===BASE_PLUGIN_NAME)throw new Error("Cannot de-register base plugin.");pluginExists(S)&&(delete pluginStorage[S],delete Player.prototype[S])}static getPlugins(S=Object.keys(pluginStorage)){let x;return S.forEach(C=>{const R=getPlugin(C);R&&(x=x||{},x[C]=R)}),x}static getPluginVersion(S){const x=getPlugin(S);return x&&x.VERSION||""}}Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(E){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][E]===!0};Player.prototype.hasPlugin=function(E){return!!pluginExists(E)};function deprecate(E,S){let x=!1;return function(...C){return x||log$1.warn(E),x=!0,S.apply(this,C)}}function deprecateForMajor(E,S,x,C){return deprecate(`${S} is deprecated and will be removed in ${E}.0; please use ${x} instead.`,C)}var VjsErrors={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const normalizeId=E=>E.indexOf("#")===0?E.slice(1):E;function videojs(E,S,x){let C=videojs.getPlayer(E);if(C)return S&&log$1.warn(`Player "${E}" is already initialised. Options will not be applied.`),x&&C.ready(x),C;const R=typeof E=="string"?$("#"+normalizeId(E)):E;if(!isEl(R))throw new TypeError("The element or ID supplied is not valid. (videojs)");const Ue=("getRootNode"in R?R.getRootNode()instanceof window$1$1.ShadowRoot:!1)?R.getRootNode():R.ownerDocument.body;(!R.ownerDocument.defaultView||!Ue.contains(R))&&log$1.warn("The element supplied is not included in the DOM"),S=S||{},S.restoreEl===!0&&(S.restoreEl=(R.parentNode&&R.parentNode.hasAttribute&&R.parentNode.hasAttribute("data-vjs-player")?R.parentNode:R).cloneNode(!0)),hooks("beforesetup").forEach(Xe=>{const Ye=Xe(R,merge$1(S));if(!isObject$1(Ye)||Array.isArray(Ye)){log$1.error("please return an object in beforesetup hooks");return}S=merge$1(S,Ye)});const je=Component$1.getComponent("Player");return C=new je(R,S,x),hooks("setup").forEach(Xe=>Xe(C)),C}videojs.hooks_=hooks_;videojs.hooks=hooks;videojs.hook=hook;videojs.hookOnce=hookOnce;videojs.removeHook=removeHook;if(window$1$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&isReal()){let E=$(".vjs-styles-defaults");if(!E){E=createStyleElement("vjs-styles-defaults");const S=$("head");S&&S.insertBefore(E,S.firstChild),setTextContent(E,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}autoSetupTimeout(1,videojs);videojs.VERSION=version$6;videojs.options=Player.prototype.options_;videojs.getPlayers=()=>Player.players;videojs.getPlayer=E=>{const S=Player.players;let x;if(typeof E=="string"){const C=normalizeId(E),R=S[C];if(R)return R;x=$("#"+C)}else x=E;if(isEl(x)){const{player:C,playerId:R}=x;if(C||S[R])return C||S[R]}};videojs.getAllPlayers=()=>Object.keys(Player.players).map(E=>Player.players[E]).filter(Boolean);videojs.players=Player.players;videojs.getComponent=Component$1.getComponent;videojs.registerComponent=(E,S)=>(Tech.isTech(S)&&log$1.warn(`The ${E} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Component$1.registerComponent.call(Component$1,E,S));videojs.getTech=Tech.getTech;videojs.registerTech=Tech.registerTech;videojs.use=use;Object.defineProperty(videojs,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(videojs.middleware,"TERMINATOR",{value:TERMINATOR,writeable:!1,enumerable:!0});videojs.browser=browser;videojs.obj=Obj;videojs.mergeOptions=deprecateForMajor(9,"videojs.mergeOptions","videojs.obj.merge",merge$1);videojs.defineLazyProperty=deprecateForMajor(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",defineLazyProperty);videojs.bind=deprecateForMajor(9,"videojs.bind","native Function.prototype.bind",bind_);videojs.registerPlugin=Plugin.registerPlugin;videojs.deregisterPlugin=Plugin.deregisterPlugin;videojs.plugin=(E,S)=>(log$1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Plugin.registerPlugin(E,S));videojs.getPlugins=Plugin.getPlugins;videojs.getPlugin=Plugin.getPlugin;videojs.getPluginVersion=Plugin.getPluginVersion;videojs.addLanguage=function(E,S){return E=(""+E).toLowerCase(),videojs.options.languages=merge$1(videojs.options.languages,{[E]:S}),videojs.options.languages[E]};videojs.log=log$1;videojs.createLogger=createLogger;videojs.time=Time;videojs.createTimeRange=deprecateForMajor(9,"videojs.createTimeRange","videojs.time.createTimeRanges",createTimeRanges$1);videojs.createTimeRanges=deprecateForMajor(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",createTimeRanges$1);videojs.formatTime=deprecateForMajor(9,"videojs.formatTime","videojs.time.formatTime",formatTime);videojs.setFormatTime=deprecateForMajor(9,"videojs.setFormatTime","videojs.time.setFormatTime",setFormatTime);videojs.resetFormatTime=deprecateForMajor(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",resetFormatTime);videojs.parseUrl=deprecateForMajor(9,"videojs.parseUrl","videojs.url.parseUrl",parseUrl);videojs.isCrossOrigin=deprecateForMajor(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",isCrossOrigin);videojs.EventTarget=EventTarget$2;videojs.any=any;videojs.on=on$1;videojs.one=one;videojs.off=off$1;videojs.trigger=trigger;videojs.xhr=XHR;videojs.TextTrack=TextTrack;videojs.AudioTrack=AudioTrack;videojs.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(E=>{videojs[E]=function(){return log$1.warn(`videojs.${E}() is deprecated; use videojs.dom.${E}() instead`),Dom[E].apply(null,arguments)}});videojs.computedStyle=deprecateForMajor(9,"videojs.computedStyle","videojs.dom.computedStyle",computedStyle);videojs.dom=Dom;videojs.fn=Fn;videojs.num=Num;videojs.str=Str;videojs.url=Url;videojs.Error=VjsErrors;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class QualityLevel{constructor(S){let x=this;return x.id=S.id,x.label=x.id,x.width=S.width,x.height=S.height,x.bitrate=S.bandwidth,x.frameRate=S.frameRate,x.enabled_=S.enabled,Object.defineProperty(x,"enabled",{get(){return x.enabled_()},set(C){x.enabled_(C)}}),x}}class QualityLevelList extends videojs.EventTarget{constructor(){super();let S=this;return S.levels_=[],S.selectedIndex_=-1,Object.defineProperty(S,"selectedIndex",{get(){return S.selectedIndex_}}),Object.defineProperty(S,"length",{get(){return S.levels_.length}}),S[Symbol.iterator]=()=>S.levels_.values(),S}addQualityLevel(S){let x=this.getQualityLevelById(S.id);if(x)return x;const C=this.levels_.length;return x=new QualityLevel(S),""+C in this||Object.defineProperty(this,C,{get(){return this.levels_[C]}}),this.levels_.push(x),this.trigger({qualityLevel:x,type:"addqualitylevel"}),x}removeQualityLevel(S){let x=null;for(let C=0,R=this.length;C<R;C++)if(this[C]===S){x=this.levels_.splice(C,1)[0],this.selectedIndex_===C?this.selectedIndex_=-1:this.selectedIndex_>C&&this.selectedIndex_--;break}return x&&this.trigger({qualityLevel:S,type:"removequalitylevel"}),x}getQualityLevelById(S){for(let x=0,C=this.length;x<C;x++){const R=this[x];if(R.id===S)return R}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}QualityLevelList.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const E in QualityLevelList.prototype.allowedEvents_)QualityLevelList.prototype["on"+E]=null;var version$5="4.1.0";const initPlugin$1=function(E,S){const x=E.qualityLevels,C=new QualityLevelList,R=function(){C.dispose(),E.qualityLevels=x,E.off("dispose",R)};return E.on("dispose",R),E.qualityLevels=()=>C,E.qualityLevels.VERSION=version$5,C},qualityLevels=function(E){return initPlugin$1(this,videojs.obj.merge({},E))};videojs.registerPlugin("qualityLevels",qualityLevels);qualityLevels.VERSION=version$5;/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const resolveUrl=resolveUrl$1,resolveManifestRedirect=(E,S)=>S&&S.responseURL&&E!==S.responseURL?S.responseURL:E,logger=E=>videojs.log.debug?videojs.log.debug.bind(videojs,"VHS:",`${E} >`):function(){};function merge(...E){const S=videojs.obj||videojs;return(S.merge||S.mergeOptions).apply(S,E)}function createTimeRanges(...E){const S=videojs.time||videojs;return(S.createTimeRanges||S.createTimeRanges).apply(S,E)}function bufferedRangesToString(E){if(E.length===0)return"Buffered Ranges are empty";let S=`Buffered Ranges: 
`;for(let x=0;x<E.length;x++){const C=E.start(x),R=E.end(x);S+=`${C} --> ${R}. Duration (${R-C})
`}return S}const TIME_FUDGE_FACTOR=1/30,SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3,filterRanges=function(E,S){const x=[];let C;if(E&&E.length)for(C=0;C<E.length;C++)S(E.start(C),E.end(C))&&x.push([E.start(C),E.end(C)]);return createTimeRanges(x)},findRange=function(E,S){return filterRanges(E,function(x,C){return x-SAFE_TIME_DELTA<=S&&C+SAFE_TIME_DELTA>=S})},findNextRange=function(E,S){return filterRanges(E,function(x){return x-TIME_FUDGE_FACTOR>=S})},findGaps=function(E){if(E.length<2)return createTimeRanges();const S=[];for(let x=1;x<E.length;x++){const C=E.end(x-1),R=E.start(x);S.push([C,R])}return createTimeRanges(S)},bufferIntersection=function(E,S){let x=null,C=null,R=0;const Ce=[],Ue=[];if(!E||!E.length||!S||!S.length)return createTimeRanges();let je=E.length;for(;je--;)Ce.push({time:E.start(je),type:"start"}),Ce.push({time:E.end(je),type:"end"});for(je=S.length;je--;)Ce.push({time:S.start(je),type:"start"}),Ce.push({time:S.end(je),type:"end"});for(Ce.sort(function(Xe,Ye){return Xe.time-Ye.time}),je=0;je<Ce.length;je++)Ce[je].type==="start"?(R++,R===2&&(x=Ce[je].time)):Ce[je].type==="end"&&(R--,R===1&&(C=Ce[je].time)),x!==null&&C!==null&&(Ue.push([x,C]),x=null,C=null);return createTimeRanges(Ue)},printableRange=E=>{const S=[];if(!E||!E.length)return"";for(let x=0;x<E.length;x++)S.push(E.start(x)+" => "+E.end(x));return S.join(", ")},timeUntilRebuffer=function(E,S,x=1){return((E.length?E.end(E.length-1):0)-S)/x},timeRangesToArray=E=>{const S=[];for(let x=0;x<E.length;x++)S.push({start:E.start(x),end:E.end(x)});return S},isRangeDifferent=function(E,S){if(E===S)return!1;if(!E&&S||!S&&E||E.length!==S.length)return!0;for(let x=0;x<E.length;x++)if(E.start(x)!==S.start(x)||E.end(x)!==S.end(x))return!0;return!1},lastBufferedEnd=function(E){if(!(!E||!E.length||!E.end))return E.end(E.length-1)},timeAheadOf=function(E,S){let x=0;if(!E||!E.length)return x;for(let C=0;C<E.length;C++){const R=E.start(C),Ce=E.end(C);if(!(S>Ce)){if(S>R&&S<=Ce){x+=Ce-S;continue}x+=Ce-R}}return x},segmentDurationWithParts=(E,S)=>{if(!S.preload)return S.duration;let x=0;return(S.parts||[]).forEach(function(C){x+=C.duration}),(S.preloadHints||[]).forEach(function(C){C.type==="PART"&&(x+=E.partTargetDuration)}),x},getPartsAndSegments=E=>(E.segments||[]).reduce((S,x,C)=>(x.parts?x.parts.forEach(function(R,Ce){S.push({duration:R.duration,segmentIndex:C,partIndex:Ce,part:R,segment:x})}):S.push({duration:x.duration,segmentIndex:C,partIndex:null,segment:x,part:null}),S),[]),getLastParts=E=>{const S=E.segments&&E.segments.length&&E.segments[E.segments.length-1];return S&&S.parts||[]},getKnownPartCount=({preloadSegment:E})=>{if(!E)return;const{parts:S,preloadHints:x}=E;let C=(x||[]).reduce((R,Ce)=>R+(Ce.type==="PART"?1:0),0);return C+=S&&S.length?S.length:0,C},liveEdgeDelay=(E,S)=>{if(S.endList)return 0;if(E&&E.suggestedPresentationDelay)return E.suggestedPresentationDelay;const x=getLastParts(S).length>0;return x&&S.serverControl&&S.serverControl.partHoldBack?S.serverControl.partHoldBack:x&&S.partTargetDuration?S.partTargetDuration*3:S.serverControl&&S.serverControl.holdBack?S.serverControl.holdBack:S.targetDuration?S.targetDuration*3:0},backwardDuration=function(E,S){let x=0,C=S-E.mediaSequence,R=E.segments[C];if(R){if(typeof R.start<"u")return{result:R.start,precise:!0};if(typeof R.end<"u")return{result:R.end-R.duration,precise:!0}}for(;C--;){if(R=E.segments[C],typeof R.end<"u")return{result:x+R.end,precise:!0};if(x+=segmentDurationWithParts(E,R),typeof R.start<"u")return{result:x+R.start,precise:!0}}return{result:x,precise:!1}},forwardDuration=function(E,S){let x=0,C,R=S-E.mediaSequence;for(;R<E.segments.length;R++){if(C=E.segments[R],typeof C.start<"u")return{result:C.start-x,precise:!0};if(x+=segmentDurationWithParts(E,C),typeof C.end<"u")return{result:C.end-x,precise:!0}}return{result:-1,precise:!1}},intervalDuration=function(E,S,x){if(typeof S>"u"&&(S=E.mediaSequence+E.segments.length),S<E.mediaSequence)return 0;const C=backwardDuration(E,S);if(C.precise)return C.result;const R=forwardDuration(E,S);return R.precise?R.result:C.result+x},duration=function(E,S,x){if(!E)return 0;if(typeof x!="number"&&(x=0),typeof S>"u"){if(E.totalDuration)return E.totalDuration;if(!E.endList)return window$1$1.Infinity}return intervalDuration(E,S,x)},sumDurations=function({defaultDuration:E,durationList:S,startIndex:x,endIndex:C}){let R=0;if(x>C&&([x,C]=[C,x]),x<0){for(let Ce=x;Ce<Math.min(0,C);Ce++)R+=E;x=0}for(let Ce=x;Ce<C;Ce++)R+=S[Ce].duration;return R},playlistEnd=function(E,S,x,C){if(!E||!E.segments)return null;if(E.endList)return duration(E);if(S===null)return null;S=S||0;let R=intervalDuration(E,E.mediaSequence+E.segments.length,S);return x&&(C=typeof C=="number"?C:liveEdgeDelay(null,E),R-=C),Math.max(0,R)},seekable=function(E,S,x){const R=S||0;let Ce=playlistEnd(E,S,!0,x);return Ce===null?createTimeRanges():(Ce<R&&(Ce=R),createTimeRanges(R,Ce))},getMediaInfoForTime=function({playlist:E,currentTime:S,startingSegmentIndex:x,startingPartIndex:C,startTime:R,exactManifestTimings:Ce}){let Ue=S-R;const je=getPartsAndSegments(E);let Xe=0;for(let Ye=0;Ye<je.length;Ye++){const et=je[Ye];if(x===et.segmentIndex&&!(typeof C=="number"&&typeof et.partIndex=="number"&&C!==et.partIndex)){Xe=Ye;break}}if(Ue<0){if(Xe>0)for(let Ye=Xe-1;Ye>=0;Ye--){const et=je[Ye];if(Ue+=et.duration,Ce){if(Ue<0)continue}else if(Ue+TIME_FUDGE_FACTOR<=0)continue;return{partIndex:et.partIndex,segmentIndex:et.segmentIndex,startTime:R-sumDurations({defaultDuration:E.targetDuration,durationList:je,startIndex:Xe,endIndex:Ye})}}return{partIndex:je[0]&&je[0].partIndex||null,segmentIndex:je[0]&&je[0].segmentIndex||0,startTime:S}}if(Xe<0){for(let Ye=Xe;Ye<0;Ye++)if(Ue-=E.targetDuration,Ue<0)return{partIndex:je[0]&&je[0].partIndex||null,segmentIndex:je[0]&&je[0].segmentIndex||0,startTime:S};Xe=0}for(let Ye=Xe;Ye<je.length;Ye++){const et=je[Ye];Ue-=et.duration;const ht=et.duration>TIME_FUDGE_FACTOR,Dt=Ue===0,Ot=ht&&Ue+TIME_FUDGE_FACTOR>=0;if(!((Dt||Ot)&&Ye!==je.length-1)){if(Ce){if(Ue>0)continue}else if(Ue-TIME_FUDGE_FACTOR>=0)continue;return{partIndex:et.partIndex,segmentIndex:et.segmentIndex,startTime:R+sumDurations({defaultDuration:E.targetDuration,durationList:je,startIndex:Xe,endIndex:Ye})}}}return{segmentIndex:je[je.length-1].segmentIndex,partIndex:je[je.length-1].partIndex,startTime:S}},isExcluded=function(E){return E.excludeUntil&&E.excludeUntil>Date.now()},isIncompatible=function(E){return E.excludeUntil&&E.excludeUntil===1/0},isEnabled=function(E){const S=isExcluded(E);return!E.disabled&&!S},isDisabled=function(E){return E.disabled},isAes=function(E){for(let S=0;S<E.segments.length;S++)if(E.segments[S].key)return!0;return!1},hasAttribute=function(E,S){return S.attributes&&S.attributes[E]},estimateSegmentRequestTime=function(E,S,x,C=0){return hasAttribute("BANDWIDTH",x)?(E*x.attributes.BANDWIDTH-C*8)/S:NaN},isLowestEnabledRendition=(E,S)=>{if(E.playlists.length===1)return!0;const x=S.attributes.BANDWIDTH||Number.MAX_VALUE;return E.playlists.filter(C=>isEnabled(C)?(C.attributes.BANDWIDTH||0)<x:!1).length===0},playlistMatch=(E,S)=>!E&&!S||!E&&S||E&&!S?!1:!!(E===S||E.id&&S.id&&E.id===S.id||E.resolvedUri&&S.resolvedUri&&E.resolvedUri===S.resolvedUri||E.uri&&S.uri&&E.uri===S.uri),someAudioVariant=function(E,S){const x=E&&E.mediaGroups&&E.mediaGroups.AUDIO||{};let C=!1;for(const R in x){for(const Ce in x[R])if(C=S(x[R][Ce]),C)break;if(C)break}return!!C},isAudioOnly=E=>{if(!E||!E.playlists||!E.playlists.length)return someAudioVariant(E,x=>x.playlists&&x.playlists.length||x.uri);for(let S=0;S<E.playlists.length;S++){const x=E.playlists[S],C=x.attributes&&x.attributes.CODECS;if(!(C&&C.split(",").every(Ce=>isAudioCodec(Ce))||someAudioVariant(E,Ce=>playlistMatch(x,Ce))))return!1}return!0};var Playlist={liveEdgeDelay,duration,seekable,getMediaInfoForTime,isEnabled,isDisabled,isExcluded,isIncompatible,playlistEnd,isAes,hasAttribute,estimateSegmentRequestTime,isLowestEnabledRendition,isAudioOnly,playlistMatch,segmentDurationWithParts};const{log}=videojs,createPlaylistID=(E,S)=>`${E}-${S}`,groupID=(E,S,x)=>`placeholder-uri-${E}-${S}-${x}`,parseManifest=({onwarn:E,oninfo:S,manifestString:x,customTagParsers:C=[],customTagMappers:R=[],llhls:Ce})=>{const Ue=new Parser;E&&Ue.on("warn",E),S&&Ue.on("info",S),C.forEach(Ye=>Ue.addParser(Ye)),R.forEach(Ye=>Ue.addTagMapper(Ye)),Ue.push(x),Ue.end();const je=Ue.manifest;if(Ce||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(Ye){je.hasOwnProperty(Ye)&&delete je[Ye]}),je.segments&&je.segments.forEach(function(Ye){["parts","preloadHints"].forEach(function(et){Ye.hasOwnProperty(et)&&delete Ye[et]})})),!je.targetDuration){let Ye=10;je.segments&&je.segments.length&&(Ye=je.segments.reduce((et,ht)=>Math.max(et,ht.duration),0)),E&&E({message:`manifest has no targetDuration defaulting to ${Ye}`}),je.targetDuration=Ye}const Xe=getLastParts(je);if(Xe.length&&!je.partTargetDuration){const Ye=Xe.reduce((et,ht)=>Math.max(et,ht.duration),0);E&&(E({message:`manifest has no partTargetDuration defaulting to ${Ye}`}),log.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),je.partTargetDuration=Ye}return je},forEachMediaGroup=(E,S)=>{E.mediaGroups&&["AUDIO","SUBTITLES"].forEach(x=>{if(E.mediaGroups[x])for(const C in E.mediaGroups[x])for(const R in E.mediaGroups[x][C]){const Ce=E.mediaGroups[x][C][R];S(Ce,x,C,R)}})},setupMediaPlaylist=({playlist:E,uri:S,id:x})=>{E.id=x,E.playlistErrors_=0,S&&(E.uri=S),E.attributes=E.attributes||{}},setupMediaPlaylists=E=>{let S=E.playlists.length;for(;S--;){const x=E.playlists[S];setupMediaPlaylist({playlist:x,id:createPlaylistID(S,x.uri)}),x.resolvedUri=resolveUrl(E.uri,x.uri),E.playlists[x.id]=x,E.playlists[x.uri]=x,x.attributes.BANDWIDTH||log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},resolveMediaGroupUris=E=>{forEachMediaGroup(E,S=>{S.uri&&(S.resolvedUri=resolveUrl(E.uri,S.uri))})},mainForMedia=(E,S)=>{const x=createPlaylistID(0,S),C={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window$1$1.location.href,resolvedUri:window$1$1.location.href,playlists:[{uri:S,id:x,resolvedUri:S,attributes:{}}]};return C.playlists[x]=C.playlists[0],C.playlists[S]=C.playlists[0],C},addPropertiesToMain=(E,S,x=groupID)=>{E.uri=S;for(let R=0;R<E.playlists.length;R++)if(!E.playlists[R].uri){const Ce=`placeholder-uri-${R}`;E.playlists[R].uri=Ce}const C=isAudioOnly(E);forEachMediaGroup(E,(R,Ce,Ue,je)=>{if(!R.playlists||!R.playlists.length){if(C&&Ce==="AUDIO"&&!R.uri)for(let Xe=0;Xe<E.playlists.length;Xe++){const Ye=E.playlists[Xe];if(Ye.attributes&&Ye.attributes.AUDIO&&Ye.attributes.AUDIO===Ue)return}R.playlists=[_extends$3({},R)]}R.playlists.forEach(function(Xe,Ye){const et=x(Ce,Ue,je,Xe),ht=createPlaylistID(Ye,et);Xe.uri?Xe.resolvedUri=Xe.resolvedUri||resolveUrl(E.uri,Xe.uri):(Xe.uri=Ye===0?et:ht,Xe.resolvedUri=Xe.uri),Xe.id=Xe.id||ht,Xe.attributes=Xe.attributes||{},E.playlists[Xe.id]=Xe,E.playlists[Xe.uri]=Xe})}),setupMediaPlaylists(E),resolveMediaGroupUris(E)};class DateRangesStorage{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(S=[]){if(this.offset_!==null||!S.length)return;const[x]=S;x.programDateTime!==void 0&&(this.offset_=x.programDateTime/1e3)}setPendingDateRanges(S=[]){if(!S.length)return;const[x]=S,C=x.startDate.getTime();this.trimProcessedDateRanges_(C),this.pendingDateRanges_=S.reduce((R,Ce)=>(R.set(Ce.id,Ce),R),new Map)}processDateRange(S){this.pendingDateRanges_.delete(S.id),this.processedDateRanges_.set(S.id,S)}getDateRangesToProcess(){if(this.offset_===null)return[];const S={},x=[];this.pendingDateRanges_.forEach((C,R)=>{if(!this.processedDateRanges_.has(R)&&(C.startTime=C.startDate.getTime()/1e3-this.offset_,C.processDateRange=()=>this.processDateRange(C),x.push(C),!!C.class))if(S[C.class]){const Ce=S[C.class].push(C);C.classListIndex=Ce-1}else S[C.class]=[C],C.classListIndex=0});for(const C of x){const R=S[C.class]||[];C.endDate?C.endTime=C.endDate.getTime()/1e3-this.offset_:C.endOnNext&&R[C.classListIndex+1]?C.endTime=R[C.classListIndex+1].startTime:C.duration?C.endTime=C.startTime+C.duration:C.plannedDuration?C.endTime=C.startTime+C.plannedDuration:C.endTime=C.startTime}return x}trimProcessedDateRanges_(S){new Map(this.processedDateRanges_).forEach((C,R)=>{C.startDate.getTime()<S&&this.processedDateRanges_.delete(R)})}}const QUOTA_EXCEEDED_ERR=22,getStreamingNetworkErrorMetadata=({requestType:E,request:S,error:x,parseFailure:C})=>{const R=S.status<200||S.status>299,Ce=S.status>=400&&S.status<=499,Ue={uri:S.uri,requestType:E},je=R&&!Ce||C;if(x&&Ce)Ue.error=_extends$3({},x),Ue.errorType=videojs.Error.NetworkRequestFailed;else if(S.aborted)Ue.errorType=videojs.Error.NetworkRequestAborted;else if(S.timedout)Ue.erroType=videojs.Error.NetworkRequestTimeout;else if(je){const Xe=C?videojs.Error.NetworkBodyParserFailed:videojs.Error.NetworkBadStatus;Ue.errorType=Xe,Ue.status=S.status,Ue.headers=S.headers}return Ue},{EventTarget:EventTarget$1}=videojs,addLLHLSQueryDirectives=(E,S)=>{if(S.endList||!S.serverControl)return E;const x={};if(S.serverControl.canBlockReload){const{preloadSegment:C}=S;let R=S.mediaSequence+S.segments.length;if(C){const Ce=C.parts||[],Ue=getKnownPartCount(S)-1;Ue>-1&&Ue!==Ce.length-1&&(x._HLS_part=Ue),(Ue>-1||Ce.length)&&R--}x._HLS_msn=R}if(S.serverControl&&S.serverControl.canSkipUntil&&(x._HLS_skip=S.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(x).length){const C=new window$1$1.URL(E);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(R){x.hasOwnProperty(R)&&C.searchParams.set(R,x[R])}),E=C.toString()}return E},updateSegment=(E,S)=>{if(!E)return S;const x=merge(E,S);if(E.preloadHints&&!S.preloadHints&&delete x.preloadHints,E.parts&&!S.parts)delete x.parts;else if(E.parts&&S.parts)for(let C=0;C<S.parts.length;C++)E.parts&&E.parts[C]&&(x.parts[C]=merge(E.parts[C],S.parts[C]));return!E.skipped&&S.skipped&&(x.skipped=!1),E.preload&&!S.preload&&(x.preload=!1),x},updateSegments=(E,S,x)=>{const C=E.slice(),R=S.slice();x=x||0;const Ce=[];let Ue;for(let je=0;je<R.length;je++){const Xe=C[je+x],Ye=R[je];Xe?(Ue=Xe.map||Ue,Ce.push(updateSegment(Xe,Ye))):(Ue&&!Ye.map&&(Ye.map=Ue),Ce.push(Ye))}return Ce},resolveSegmentUris=(E,S)=>{!E.resolvedUri&&E.uri&&(E.resolvedUri=resolveUrl(S,E.uri)),E.key&&!E.key.resolvedUri&&(E.key.resolvedUri=resolveUrl(S,E.key.uri)),E.map&&!E.map.resolvedUri&&(E.map.resolvedUri=resolveUrl(S,E.map.uri)),E.map&&E.map.key&&!E.map.key.resolvedUri&&(E.map.key.resolvedUri=resolveUrl(S,E.map.key.uri)),E.parts&&E.parts.length&&E.parts.forEach(x=>{x.resolvedUri||(x.resolvedUri=resolveUrl(S,x.uri))}),E.preloadHints&&E.preloadHints.length&&E.preloadHints.forEach(x=>{x.resolvedUri||(x.resolvedUri=resolveUrl(S,x.uri))})},getAllSegments=function(E){const S=E.segments||[],x=E.preloadSegment;if(x&&x.parts&&x.parts.length){if(x.preloadHints){for(let C=0;C<x.preloadHints.length;C++)if(x.preloadHints[C].type==="MAP")return S}x.duration=E.targetDuration,x.preload=!0,S.push(x)}return S},isPlaylistUnchanged=(E,S)=>E===S||E.segments&&S.segments&&E.segments.length===S.segments.length&&E.endList===S.endList&&E.mediaSequence===S.mediaSequence&&E.preloadSegment===S.preloadSegment,updateMain$1=(E,S,x=isPlaylistUnchanged)=>{const C=merge(E,{}),R=C.playlists[S.id];if(!R||x(R,S))return null;S.segments=getAllSegments(S);const Ce=merge(R,S);if(Ce.preloadSegment&&!S.preloadSegment&&delete Ce.preloadSegment,R.segments){if(S.skip){S.segments=S.segments||[];for(let Ue=0;Ue<S.skip.skippedSegments;Ue++)S.segments.unshift({skipped:!0})}Ce.segments=updateSegments(R.segments,S.segments,S.mediaSequence-R.mediaSequence)}Ce.segments.forEach(Ue=>{resolveSegmentUris(Ue,Ce.resolvedUri)});for(let Ue=0;Ue<C.playlists.length;Ue++)C.playlists[Ue].id===S.id&&(C.playlists[Ue]=Ce);return C.playlists[S.id]=Ce,C.playlists[S.uri]=Ce,forEachMediaGroup(E,(Ue,je,Xe,Ye)=>{if(Ue.playlists)for(let et=0;et<Ue.playlists.length;et++)S.id===Ue.playlists[et].id&&(Ue.playlists[et]=Ce)}),C},refreshDelay=(E,S)=>{const x=E.segments||[],C=x[x.length-1],R=C&&C.parts&&C.parts[C.parts.length-1],Ce=R&&R.duration||C&&C.duration;return S&&Ce?Ce*1e3:(E.partTargetDuration||E.targetDuration||10)*500},playlistMetadataPayload=(E,S,x)=>{if(!E)return;const C=[];return E.forEach(R=>{if(!R.attributes)return;const{BANDWIDTH:Ce,RESOLUTION:Ue,CODECS:je}=R.attributes;C.push({id:R.id,bandwidth:Ce,resolution:Ue,codecs:je})}),{type:S,isLive:x,renditions:C}};class PlaylistLoader extends EventTarget$1{constructor(S,x,C={}){if(super(),!S)throw new Error("A non-empty playlist URL or object is required");this.logger_=logger("PlaylistLoader");const{withCredentials:R=!1}=C;this.src=S,this.vhs_=x,this.withCredentials=R,this.addDateRangesToTextTrack_=C.addDateRangesToTextTrack;const Ce=x.options_;this.customTagParsers=Ce&&Ce.customTagParsers||[],this.customTagMappers=Ce&&Ce.customTagMappers||[],this.llhls=Ce&&Ce.llhls,this.dateRangesStorage_=new DateRangesStorage,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const S=this.media();if(!S)return;this.dateRangesStorage_.setOffset(S.segments),this.dateRangesStorage_.setPendingDateRanges(S.dateRanges);const x=this.dateRangesStorage_.getDateRangesToProcess();!x.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(x)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const S=this.media();let x=resolveUrl(this.main.uri,S.uri);this.llhls&&(x=addLLHLSQueryDirectives(x,S)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:x,withCredentials:this.withCredentials,requestType:"hls-playlist"},(C,R)=>{if(this.request){if(C)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(S,x,C){const{uri:R,id:Ce}=x;this.request=null,C&&(this.state=C),this.error={playlist:this.main.playlists[Ce],status:S.status,message:`HLS playlist request error at URL: ${R}.`,responseText:S.responseText,code:S.status>=500?4:2,metadata:getStreamingNetworkErrorMetadata({requestType:S.requestType,request:S,error:S.error})},this.trigger("error")}parseManifest_({url:S,manifestString:x}){try{return parseManifest({onwarn:({message:C})=>this.logger_(`m3u8-parser warn for ${S}: ${C}`),oninfo:({message:C})=>this.logger_(`m3u8-parser info for ${S}: ${C}`),manifestString:x,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(C){this.error=C,this.error.metadata={errorType:videojs.Error.StreamingHlsPlaylistParserError,error:C}}}haveMetadata({playlistString:S,playlistObject:x,url:C,id:R}){this.request=null,this.state="HAVE_METADATA";const Ce={playlistInfo:{type:"media",uri:C}};this.trigger({type:"playlistparsestart",metadata:Ce});const Ue=x||this.parseManifest_({url:C,manifestString:S});Ue.lastRequest=Date.now(),setupMediaPlaylist({playlist:Ue,uri:C,id:R});const je=updateMain$1(this.main,Ue);this.targetDuration=Ue.partTargetDuration||Ue.targetDuration,this.pendingMedia_=null,je?(this.main=je,this.media_=this.main.playlists[R]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(refreshDelay(this.media(),!!je)),Ce.parsedPlaylist=playlistMetadataPayload(this.main.playlists,Ce.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:Ce}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),window$1$1.clearTimeout(this.mediaUpdateTimeout),window$1$1.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new DateRangesStorage,this.off()}stopRequest(){if(this.request){const S=this.request;this.request=null,S.onreadystatechange=null,S.abort()}}media(S,x){if(!S)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof S=="string"){if(!this.main.playlists[S])throw new Error("Unknown playlist URI: "+S);S=this.main.playlists[S]}if(window$1$1.clearTimeout(this.finalRenditionTimeout),x){const je=(S.partTargetDuration||S.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window$1$1.setTimeout(this.media.bind(this,S,!1),je);return}const C=this.state,R=!this.media_||S.id!==this.media_.id,Ce=this.main.playlists[S.id];if(Ce&&Ce.endList||S.endList&&S.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=S,R&&(this.trigger("mediachanging"),C==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(refreshDelay(S,!0)),!R)return;if(this.state="SWITCHING_MEDIA",this.request){if(S.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=S;const Ue={playlistInfo:{type:"media",uri:S.uri}};this.trigger({type:"playlistrequeststart",metadata:Ue}),this.request=this.vhs_.xhr({uri:S.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(je,Xe)=>{if(this.request){if(S.lastRequest=Date.now(),S.resolvedUri=resolveManifestRedirect(S.resolvedUri,Xe),je)return this.playlistRequestError(this.request,S,C);this.trigger({type:"playlistrequestcomplete",metadata:Ue}),this.haveMetadata({playlistString:Xe.responseText,url:S.uri,id:S.id}),C==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(S){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const x=this.media();if(S){const C=x?(x.partTargetDuration||x.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},C);return}if(!this.started){this.start();return}x&&!x.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(S){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(S)},S))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=window$1$1.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const S={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:S}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(x,C)=>{if(!this.request)return;if(this.request=null,x)return this.error={status:C.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:C.responseText,code:2,metadata:getStreamingNetworkErrorMetadata({requestType:C.requestType,request:C,error:x})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:S}),this.src=resolveManifestRedirect(this.src,C),this.trigger({type:"playlistparsestart",metadata:S});const R=this.parseManifest_({manifestString:C.responseText,url:this.src});S.parsedPlaylist=playlistMetadataPayload(R.playlists,S.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:S}),this.setupInitialPlaylist(R)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(S){if(this.state="HAVE_MAIN_MANIFEST",S.playlists){this.main=S,addPropertiesToMain(this.main,this.srcUri()),S.playlists.forEach(C=>{C.segments=getAllSegments(C),C.segments.forEach(R=>{resolveSegmentUris(R,C.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const x=this.srcUri()||window$1$1.location.href;this.main=mainForMedia(S,x),this.haveMetadata({playlistObject:S,url:x,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(S,x){const C=this.main,R=S.ID;let Ce=C.playlists.length;for(;Ce--;){const Ue=C.playlists[Ce];if(Ue.attributes["PATHWAY-ID"]===R){const je=Ue.resolvedUri,Xe=Ue.id;if(x){const Ye=this.createCloneURI_(Ue.resolvedUri,S),et=createPlaylistID(R,Ye),ht=this.createCloneAttributes_(R,Ue.attributes),Dt=this.createClonePlaylist_(Ue,et,S,ht);C.playlists[Ce]=Dt,C.playlists[et]=Dt,C.playlists[Ye]=Dt}else C.playlists.splice(Ce,1);delete C.playlists[Xe],delete C.playlists[je]}}this.updateOrDeleteCloneMedia(S,x)}updateOrDeleteCloneMedia(S,x){const C=this.main,R=S.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(Ce=>{if(!(!C.mediaGroups[Ce]||!C.mediaGroups[Ce][R])){for(const Ue in C.mediaGroups[Ce])if(Ue===R){for(const je in C.mediaGroups[Ce][Ue])C.mediaGroups[Ce][Ue][je].playlists.forEach((Ye,et)=>{const ht=C.playlists[Ye.id],Dt=ht.id,Ot=ht.resolvedUri;delete C.playlists[Dt],delete C.playlists[Ot]});delete C.mediaGroups[Ce][Ue]}}}),x&&this.createClonedMediaGroups_(S)}addClonePathway(S,x={}){const C=this.main,R=C.playlists.length,Ce=this.createCloneURI_(x.resolvedUri,S),Ue=createPlaylistID(S.ID,Ce),je=this.createCloneAttributes_(S.ID,x.attributes),Xe=this.createClonePlaylist_(x,Ue,S,je);C.playlists[R]=Xe,C.playlists[Ue]=Xe,C.playlists[Ce]=Xe,this.createClonedMediaGroups_(S)}createClonedMediaGroups_(S){const x=S.ID,C=S["BASE-ID"],R=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(Ce=>{if(!(!R.mediaGroups[Ce]||R.mediaGroups[Ce][x]))for(const Ue in R.mediaGroups[Ce]){if(Ue===C)R.mediaGroups[Ce][x]={};else continue;for(const je in R.mediaGroups[Ce][Ue]){const Xe=R.mediaGroups[Ce][Ue][je];R.mediaGroups[Ce][x][je]=_extends$3({},Xe);const Ye=R.mediaGroups[Ce][x][je],et=this.createCloneURI_(Xe.resolvedUri,S);Ye.resolvedUri=et,Ye.uri=et,Ye.playlists=[],Xe.playlists.forEach((ht,Dt)=>{const Ot=R.playlists[ht.id],Mt=groupID(Ce,x,je),St=createPlaylistID(x,Mt);if(Ot&&!R.playlists[St]){const Ut=this.createClonePlaylist_(Ot,St,S),kt=Ut.resolvedUri;R.playlists[St]=Ut,R.playlists[kt]=Ut}Ye.playlists[Dt]=this.createClonePlaylist_(ht,St,S)})}}})}createClonePlaylist_(S,x,C,R){const Ce=this.createCloneURI_(S.resolvedUri,C),Ue={resolvedUri:Ce,uri:Ce,id:x};return S.segments&&(Ue.segments=[]),R&&(Ue.attributes=R),merge(S,Ue)}createCloneURI_(S,x){const C=new URL(S);C.hostname=x["URI-REPLACEMENT"].HOST;const R=x["URI-REPLACEMENT"].PARAMS;for(const Ce of Object.keys(R))C.searchParams.set(Ce,R[Ce]);return C.href}createCloneAttributes_(S,x){const C={"PATHWAY-ID":S};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(R=>{x[R]&&(C[R]=S)}),C}getKeyIdSet(S){if(S.contentProtection){const x=new Set;for(const C in S.contentProtection){const R=S.contentProtection[C].attributes.keyId;R&&x.add(R.toLowerCase())}return x}}}const callbackWrapper=function(E,S,x,C){const R=E.responseType==="arraybuffer"?E.response:E.responseText;!S&&R&&(E.responseTime=Date.now(),E.roundTripTime=E.responseTime-E.requestTime,E.bytesReceived=R.byteLength||R.length,E.bandwidth||(E.bandwidth=Math.floor(E.bytesReceived/E.roundTripTime*8*1e3))),x.headers&&(E.responseHeaders=x.headers),S&&S.code==="ETIMEDOUT"&&(E.timedout=!0),!S&&!E.aborted&&x.statusCode!==200&&x.statusCode!==206&&x.statusCode!==0&&(S=new Error("XHR Failed with a response of: "+(E&&(R||E.responseText)))),C(S,E)},callAllRequestHooks=(E,S)=>{if(!E||!E.size)return;let x=S;return E.forEach(C=>{x=C(x)}),x},callAllResponseHooks=(E,S,x,C)=>{!E||!E.size||E.forEach(R=>{R(S,x,C)})},xhrFactory=function(){const E=function S(x,C){x=merge({timeout:45e3},x);const R=S.beforeRequest||videojs.Vhs.xhr.beforeRequest,Ce=S._requestCallbackSet||videojs.Vhs.xhr._requestCallbackSet||new Set,Ue=S._responseCallbackSet||videojs.Vhs.xhr._responseCallbackSet;R&&typeof R=="function"&&(videojs.log.warn("beforeRequest is deprecated, use onRequest instead."),Ce.add(R));const je=videojs.Vhs.xhr.original===!0?videojs.xhr:videojs.Vhs.xhr,Xe=callAllRequestHooks(Ce,x);Ce.delete(R);const Ye=je(Xe||x,function(ht,Dt){return callAllResponseHooks(Ue,Ye,ht,Dt),callbackWrapper(Ye,ht,Dt,C)}),et=Ye.abort;return Ye.abort=function(){return Ye.aborted=!0,et.apply(Ye,arguments)},Ye.uri=x.uri,Ye.requestType=x.requestType,Ye.requestTime=Date.now(),Ye};return E.original=!0,E},byterangeStr=function(E){let S;const x=E.offset;return typeof E.offset=="bigint"||typeof E.length=="bigint"?S=window$1$1.BigInt(E.offset)+window$1$1.BigInt(E.length)-window$1$1.BigInt(1):S=E.offset+E.length-1,"bytes="+x+"-"+S},segmentXhrHeaders=function(E){const S={};return E.byterange&&(S.Range=byterangeStr(E.byterange)),S},textRange=function(E,S){return E.start(S)+"-"+E.end(S)},formatHexString=function(E,S){const x=E.toString(16);return"00".substring(0,2-x.length)+x+(S%2?" ":"")},formatAsciiString=function(E){return E>=32&&E<126?String.fromCharCode(E):"."},createTransferableMessage=function(E){const S={};return Object.keys(E).forEach(x=>{const C=E[x];isArrayBufferView(C)?S[x]={bytes:C.buffer,byteOffset:C.byteOffset,byteLength:C.byteLength}:S[x]=C}),S},initSegmentId=function(E){const S=E.byterange||{length:1/0,offset:0};return[S.length,S.offset,E.resolvedUri].join(",")},segmentKeyId=function(E){return E.resolvedUri},hexDump=E=>{const S=Array.prototype.slice.call(E),x=16;let C="",R,Ce;for(let Ue=0;Ue<S.length/x;Ue++)R=S.slice(Ue*x,Ue*x+x).map(formatHexString).join(""),Ce=S.slice(Ue*x,Ue*x+x).map(formatAsciiString).join(""),C+=R+" "+Ce+`
`;return C},tagDump=({bytes:E})=>hexDump(E),textRanges=E=>{let S="",x;for(x=0;x<E.length;x++)S+=textRange(E,x)+" ";return S};var utils=Object.freeze({__proto__:null,createTransferableMessage,initSegmentId,segmentKeyId,hexDump,tagDump,textRanges});const SEGMENT_END_FUDGE_PERCENT=.25,playerTimeToProgramTime=(E,S)=>{if(!S.dateTimeObject)return null;const x=S.videoTimingInfo.transmuxerPrependedSeconds,R=S.videoTimingInfo.transmuxedPresentationStart+x,Ce=E-R;return new Date(S.dateTimeObject.getTime()+Ce*1e3)},originalSegmentVideoDuration=E=>E.transmuxedPresentationEnd-E.transmuxedPresentationStart-E.transmuxerPrependedSeconds,findSegmentForProgramTime=(E,S)=>{let x;try{x=new Date(E)}catch{return null}if(!S||!S.segments||S.segments.length===0)return null;let C=S.segments[0];if(x<new Date(C.dateTimeObject))return null;for(let Xe=0;Xe<S.segments.length-1;Xe++){C=S.segments[Xe];const Ye=new Date(S.segments[Xe+1].dateTimeObject);if(x<Ye)break}const R=S.segments[S.segments.length-1],Ce=R.dateTimeObject,Ue=R.videoTimingInfo?originalSegmentVideoDuration(R.videoTimingInfo):R.duration+R.duration*SEGMENT_END_FUDGE_PERCENT,je=new Date(Ce.getTime()+Ue*1e3);return x>je?null:(x>new Date(Ce)&&(C=R),{segment:C,estimatedStart:C.videoTimingInfo?C.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(S,S.mediaSequence+S.segments.indexOf(C)),type:C.videoTimingInfo?"accurate":"estimate"})},findSegmentForPlayerTime=(E,S)=>{if(!S||!S.segments||S.segments.length===0)return null;let x=0,C;for(let Ce=0;Ce<S.segments.length&&(C=S.segments[Ce],x=C.videoTimingInfo?C.videoTimingInfo.transmuxedPresentationEnd:x+C.duration,!(E<=x));Ce++);const R=S.segments[S.segments.length-1];if(R.videoTimingInfo&&R.videoTimingInfo.transmuxedPresentationEnd<E)return null;if(E>x){if(E>x+R.duration*SEGMENT_END_FUDGE_PERCENT)return null;C=R}return{segment:C,estimatedStart:C.videoTimingInfo?C.videoTimingInfo.transmuxedPresentationStart:x-C.duration,type:C.videoTimingInfo?"accurate":"estimate"}},getOffsetFromTimestamp=(E,S)=>{let x,C;try{x=new Date(E),C=new Date(S)}catch{}const R=x.getTime();return(C.getTime()-R)/1e3},verifyProgramDateTimeTags=E=>{if(!E.segments||E.segments.length===0)return!1;for(let S=0;S<E.segments.length;S++)if(!E.segments[S].dateTimeObject)return!1;return!0},getProgramTime=({playlist:E,time:S=void 0,callback:x})=>{if(!x)throw new Error("getProgramTime: callback must be provided");if(!E||S===void 0)return x({message:"getProgramTime: playlist and time must be provided"});const C=findSegmentForPlayerTime(S,E);if(!C)return x({message:"valid programTime was not found"});if(C.type==="estimate")return x({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:C.estimatedStart});const R={mediaSeconds:S},Ce=playerTimeToProgramTime(S,C.segment);return Ce&&(R.programDateTime=Ce.toISOString()),x(null,R)},seekToProgramTime=({programTime:E,playlist:S,retryCount:x=2,seekTo:C,pauseAfterSeek:R=!0,tech:Ce,callback:Ue})=>{if(!Ue)throw new Error("seekToProgramTime: callback must be provided");if(typeof E>"u"||!S||!C)return Ue({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!S.endList&&!Ce.hasStarted_)return Ue({message:"player must be playing a live stream to start buffering"});if(!verifyProgramDateTimeTags(S))return Ue({message:"programDateTime tags must be provided in the manifest "+S.resolvedUri});const je=findSegmentForProgramTime(E,S);if(!je)return Ue({message:`${E} was not found in the stream`});const Xe=je.segment,Ye=getOffsetFromTimestamp(Xe.dateTimeObject,E);if(je.type==="estimate"){if(x===0)return Ue({message:`${E} is not buffered yet. Try again`});C(je.estimatedStart+Ye),Ce.one("seeked",()=>{seekToProgramTime({programTime:E,playlist:S,retryCount:x-1,seekTo:C,pauseAfterSeek:R,tech:Ce,callback:Ue})});return}const et=Xe.start+Ye,ht=()=>Ue(null,Ce.currentTime());Ce.one("seeked",ht),R&&Ce.pause(),C(et)},callbackOnCompleted=(E,S)=>{if(E.readyState===4)return S()},containerRequest=(E,S,x,C)=>{let R=[],Ce,Ue=!1;const je=function(ht,Dt,Ot,Mt){return Dt.abort(),Ue=!0,x(ht,Dt,Ot,Mt)},Xe=function(ht,Dt){if(Ue)return;if(ht)return ht.metadata=getStreamingNetworkErrorMetadata({requestType:C,request:Dt,error:ht}),je(ht,Dt,"",R);const Ot=Dt.responseText.substring(R&&R.byteLength||0,Dt.responseText.length);if(R=concatTypedArrays(R,stringToBytes(Ot,!0)),Ce=Ce||getId3Offset(R),R.length<10||Ce&&R.length<Ce+2)return callbackOnCompleted(Dt,()=>je(ht,Dt,"",R));const Mt=detectContainerForBytes(R);return Mt==="ts"&&R.length<188?callbackOnCompleted(Dt,()=>je(ht,Dt,"",R)):!Mt&&R.length<376?callbackOnCompleted(Dt,()=>je(ht,Dt,"",R)):je(null,Dt,Mt,R)},et=S({uri:E,beforeSend(ht){ht.overrideMimeType("text/plain; charset=x-user-defined"),ht.addEventListener("progress",function({total:Dt,loaded:Ot}){return callbackWrapper(ht,null,{statusCode:ht.status},Xe)})}},function(ht,Dt){return callbackWrapper(et,ht,Dt,Xe)});return et},{EventTarget}=videojs,dashPlaylistUnchanged=function(E,S){if(!isPlaylistUnchanged(E,S)||E.sidx&&S.sidx&&(E.sidx.offset!==S.sidx.offset||E.sidx.length!==S.sidx.length))return!1;if(!E.sidx&&S.sidx||E.sidx&&!S.sidx||E.segments&&!S.segments||!E.segments&&S.segments)return!1;if(!E.segments&&!S.segments)return!0;for(let x=0;x<E.segments.length;x++){const C=E.segments[x],R=S.segments[x];if(C.uri!==R.uri)return!1;if(!C.byterange&&!R.byterange)continue;const Ce=C.byterange,Ue=R.byterange;if(Ce&&!Ue||!Ce&&Ue||Ce.offset!==Ue.offset||Ce.length!==Ue.length)return!1}return!0},dashGroupId=(E,S,x,C)=>{const R=C.attributes.NAME||x;return`placeholder-uri-${E}-${S}-${R}`},parseMainXml=({mainXml:E,srcUrl:S,clientOffset:x,sidxMapping:C,previousManifest:R})=>{const Ce=parse(E,{manifestUri:S,clientOffset:x,sidxMapping:C,previousManifest:R});return addPropertiesToMain(Ce,S,dashGroupId),Ce},removeOldMediaGroupLabels=(E,S)=>{forEachMediaGroup(E,(x,C,R,Ce)=>{(!S.mediaGroups[C][R]||!(Ce in S.mediaGroups[C][R]))&&delete E.mediaGroups[C][R][Ce]})},updateMain=(E,S,x)=>{let C=!0,R=merge(E,{duration:S.duration,minimumUpdatePeriod:S.minimumUpdatePeriod,timelineStarts:S.timelineStarts});for(let Ce=0;Ce<S.playlists.length;Ce++){const Ue=S.playlists[Ce];if(Ue.sidx){const Xe=generateSidxKey(Ue.sidx);x&&x[Xe]&&x[Xe].sidx&&addSidxSegmentsToPlaylist$1(Ue,x[Xe].sidx,Ue.sidx.resolvedUri)}const je=updateMain$1(R,Ue,dashPlaylistUnchanged);je&&(R=je,C=!1)}return forEachMediaGroup(S,(Ce,Ue,je,Xe)=>{if(Ce.playlists&&Ce.playlists.length){const Ye=Ce.playlists[0].id,et=updateMain$1(R,Ce.playlists[0],dashPlaylistUnchanged);et&&(R=et,Xe in R.mediaGroups[Ue][je]||(R.mediaGroups[Ue][je][Xe]=Ce),R.mediaGroups[Ue][je][Xe].playlists[0]=R.playlists[Ye],C=!1)}}),removeOldMediaGroupLabels(R,S),S.minimumUpdatePeriod!==E.minimumUpdatePeriod&&(C=!1),C?null:R},equivalentSidx=(E,S)=>(!E.map&&!S.map||!!(E.map&&S.map&&E.map.byterange.offset===S.map.byterange.offset&&E.map.byterange.length===S.map.byterange.length))&&E.uri===S.uri&&E.byterange.offset===S.byterange.offset&&E.byterange.length===S.byterange.length,compareSidxEntry=(E,S)=>{const x={};for(const C in E){const Ce=E[C].sidx;if(Ce){const Ue=generateSidxKey(Ce);if(!S[Ue])break;const je=S[Ue].sidxInfo;equivalentSidx(je,Ce)&&(x[Ue]=S[Ue])}}return x},filterChangedSidxMappings=(E,S)=>{let C=compareSidxEntry(E.playlists,S);return forEachMediaGroup(E,(R,Ce,Ue,je)=>{if(R.playlists&&R.playlists.length){const Xe=R.playlists;C=merge(C,compareSidxEntry(Xe,S))}}),C};class DashPlaylistLoader extends EventTarget{constructor(S,x,C={},R){super(),this.mainPlaylistLoader_=R||this,R||(this.isMain_=!0);const{withCredentials:Ce=!1}=C;if(this.vhs_=x,this.withCredentials=Ce,this.addMetadataToTextTrack=C.addMetadataToTextTrack,!S)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=logger("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=S,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=S}requestErrored_(S,x,C){if(!this.request)return!0;if(this.request=null,S)return this.error=typeof S=="object"&&!(S instanceof Error)?S:{status:x.status,message:"DASH request error at URL: "+x.uri,response:x.response,code:2,metadata:S.metadata},C&&(this.state=C),this.trigger("error"),!0}addSidxSegments_(S,x,C){const R=S.sidx&&generateSidxKey(S.sidx);if(!S.sidx||!R||this.mainPlaylistLoader_.sidxMapping_[R]){this.mediaRequest_=window$1$1.setTimeout(()=>C(!1),0);return}const Ce=resolveManifestRedirect(S.sidx.resolvedUri),Ue=(Xe,Ye)=>{if(this.requestErrored_(Xe,Ye,x))return;const et=this.mainPlaylistLoader_.sidxMapping_,{requestType:ht}=Ye;let Dt;try{Dt=parseSidx$1(toUint8(Ye.response).subarray(8))}catch(Ot){Ot.metadata=getStreamingNetworkErrorMetadata({requestType:ht,request:Ye,parseFailure:!0}),this.requestErrored_(Ot,Ye,x);return}return et[R]={sidxInfo:S.sidx,sidx:Dt},addSidxSegmentsToPlaylist$1(S,Dt,S.sidx.resolvedUri),C(!0)},je="dash-sidx";this.request=containerRequest(Ce,this.vhs_.xhr,(Xe,Ye,et,ht)=>{if(Xe)return Ue(Xe,Ye);if(!et||et!=="mp4"){const Mt=et||"unknown";return Ue({status:Ye.status,message:`Unsupported ${Mt} container type for sidx segment at URL: ${Ce}`,response:"",playlist:S,internal:!0,playlistExclusionDuration:1/0,code:2},Ye)}const{offset:Dt,length:Ot}=S.sidx.byterange;if(ht.length>=Ot+Dt)return Ue(Xe,{response:ht.subarray(Dt,Dt+Ot),status:Ye.status,uri:Ye.uri});this.request=this.vhs_.xhr({uri:Ce,responseType:"arraybuffer",requestType:"dash-sidx",headers:segmentXhrHeaders({byterange:S.sidx.byterange})},Ue)},je)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window$1$1.clearTimeout(this.minimumUpdatePeriodTimeout_),window$1$1.clearTimeout(this.mediaRequest_),window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const S=this.request;this.request=null,S.onreadystatechange=null,S.abort()}}media(S){if(!S)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const x=this.state;if(typeof S=="string"){if(!this.mainPlaylistLoader_.main.playlists[S])throw new Error("Unknown playlist URI: "+S);S=this.mainPlaylistLoader_.main.playlists[S]}const C=!this.media_||S.id!==this.media_.id;if(C&&this.loadedPlaylists_[S.id]&&this.loadedPlaylists_[S.id].endList){this.state="HAVE_METADATA",this.media_=S,C&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}C&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(S,x,R=>{this.haveMetadata({startingState:x,playlist:S})}))}haveMetadata({startingState:S,playlist:x}){this.state="HAVE_METADATA",this.loadedPlaylists_[x.id]=x,this.mediaRequest_=null,this.refreshMedia_(x.id),S==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(window$1$1.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(S){window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const x=this.media();if(S){const C=x?x.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=window$1$1.setTimeout(()=>this.load(),C);return}if(!this.started){this.start();return}x&&!x.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=window$1$1.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((S,x)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(S){const x={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:x}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(C,R)=>{if(C){const{requestType:Ue}=R;C.metadata=getStreamingNetworkErrorMetadata({requestType:Ue,request:R,error:C})}if(this.requestErrored_(C,R)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:x});const Ce=R.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=R.responseText,R.responseHeaders&&R.responseHeaders.date?this.mainLoaded_=Date.parse(R.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=resolveManifestRedirect(this.mainPlaylistLoader_.srcUrl,R),Ce){this.handleMain_(),this.syncClientServerClock_(()=>S(R,Ce));return}return S(R,Ce)})}syncClientServerClock_(S){const x=parseUTCTiming(this.mainPlaylistLoader_.mainXml_);if(x===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),S();if(x.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=x.value-Date.now(),S();this.request=this.vhs_.xhr({uri:resolveUrl(this.mainPlaylistLoader_.srcUrl,x.value),method:x.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(C,R)=>{if(!this.request)return;if(C){const{requestType:Ue}=R;return this.error.metadata=getStreamingNetworkErrorMetadata({requestType:Ue,request:R,error:C}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),S()}let Ce;x.method==="HEAD"?!R.responseHeaders||!R.responseHeaders.date?Ce=this.mainLoaded_:Ce=Date.parse(R.responseHeaders.date):Ce=Date.parse(R.responseText),this.mainPlaylistLoader_.clientOffset_=Ce-Date.now(),S()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const S=this.mainPlaylistLoader_.main,x={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:x});let C;try{C=parseMainXml({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:S})}catch(Ce){this.error=Ce,this.error.metadata={errorType:videojs.Error.StreamingDashManifestParserError,error:Ce},this.trigger("error")}S&&(C=updateMain(S,C,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=C||S;const R=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(R&&R!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=R),(!S||C&&C.minimumUpdatePeriod!==S.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(C),C){const{duration:Ce,endList:Ue}=C,je=[];C.playlists.forEach(Ye=>{je.push({id:Ye.id,bandwidth:Ye.attributes.BANDWIDTH,resolution:Ye.attributes.RESOLUTION,codecs:Ye.attributes.CODECS})});const Xe={duration:Ce,isLive:!Ue,renditions:je};x.parsedManifest=Xe,this.trigger({type:"manifestparsecomplete",metadata:x})}return!!C}updateMinimumUpdatePeriodTimeout_(){const S=this.mainPlaylistLoader_;S.createMupOnMedia_&&(S.off("loadedmetadata",S.createMupOnMedia_),S.createMupOnMedia_=null),S.minimumUpdatePeriodTimeout_&&(window$1$1.clearTimeout(S.minimumUpdatePeriodTimeout_),S.minimumUpdatePeriodTimeout_=null);let x=S.main&&S.main.minimumUpdatePeriod;if(x===0&&(S.media()?x=S.media().targetDuration*1e3:(S.createMupOnMedia_=S.updateMinimumUpdatePeriodTimeout_,S.one("loadedmetadata",S.createMupOnMedia_))),typeof x!="number"||x<=0){x<0&&this.logger_(`found invalid minimumUpdatePeriod of ${x}, not setting a timeout`);return}this.createMUPTimeout_(x)}createMUPTimeout_(S){const x=this.mainPlaylistLoader_;x.minimumUpdatePeriodTimeout_=window$1$1.setTimeout(()=>{x.minimumUpdatePeriodTimeout_=null,x.trigger("minimumUpdatePeriod"),x.createMUPTimeout_(S)},S)}refreshXml_(){this.requestMain_((S,x)=>{x&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=filterChangedSidxMappings(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,C=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(S){if(!S)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const x=this.mainPlaylistLoader_.main.playlists,C=!this.media_||this.media_!==x[S];if(C?this.media_=x[S]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const R=()=>{this.media().endList||(this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.trigger("mediaupdatetimeout"),R()},refreshDelay(this.media(),!!C)))};R()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(S){if(S&&this.mainPlaylistLoader_.main.eventStream){const x=this.mainPlaylistLoader_.main.eventStream.map(C=>({cueTime:C.start,frames:[{data:C.messageData}]}));this.addMetadataToTextTrack("EventStream",x,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(S){if(S.contentProtection){const x=new Set;for(const C in S.contentProtection){const R=S.contentProtection[C].attributes["cenc:default_KID"];R&&x.add(R.replace(/-/g,"").toLowerCase())}return x}}}var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const stringToArrayBuffer=E=>{const S=new Uint8Array(new ArrayBuffer(E.length));for(let x=0;x<E.length;x++)S[x]=E.charCodeAt(x);return S.buffer},browserWorkerPolyFill=function(E){return E.on=E.addEventListener,E.off=E.removeEventListener,E},createObjectURL=function(E){try{return URL.createObjectURL(new Blob([E],{type:"application/javascript"}))}catch{const x=new BlobBuilder;return x.append(E),URL.createObjectURL(x.getBlob())}},factory=function(E){return function(){const S=createObjectURL(E),x=browserWorkerPolyFill(new Worker(S));x.objURL=S;const C=x.terminate;return x.on=x.addEventListener,x.off=x.removeEventListener,x.terminate=function(){return URL.revokeObjectURL(S),C.call(this)},x}},transform=function(E){return`var browserWorkerPolyFill = ${browserWorkerPolyFill.toString()};
browserWorkerPolyFill(self);
`+E},getWorkerString=function(E){return E.toString().replace(/^function.+?{/,"").slice(0,-1)},workerCode$1=transform(getWorkerString(function(){var E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},S=function(){this.init=function(){var xt={};this.on=function($t,Yt){xt[$t]||(xt[$t]=[]),xt[$t]=xt[$t].concat(Yt)},this.off=function($t,Yt){var Vt;return xt[$t]?(Vt=xt[$t].indexOf(Yt),xt[$t]=xt[$t].slice(),xt[$t].splice(Vt,1),Vt>-1):!1},this.trigger=function($t){var Yt,Vt,Qt,ti;if(Yt=xt[$t],!!Yt)if(arguments.length===2)for(Qt=Yt.length,Vt=0;Vt<Qt;++Vt)Yt[Vt].call(this,arguments[1]);else{for(ti=[],Vt=arguments.length,Vt=1;Vt<arguments.length;++Vt)ti.push(arguments[Vt]);for(Qt=Yt.length,Vt=0;Vt<Qt;++Vt)Yt[Vt].apply(this,ti)}},this.dispose=function(){xt={}}}};S.prototype.pipe=function(xt){return this.on("data",function($t){xt.push($t)}),this.on("done",function($t){xt.flush($t)}),this.on("partialdone",function($t){xt.partialFlush($t)}),this.on("endedtimeline",function($t){xt.endTimeline($t)}),this.on("reset",function($t){xt.reset($t)}),xt},S.prototype.push=function(xt){this.trigger("data",xt)},S.prototype.flush=function(xt){this.trigger("done",xt)},S.prototype.partialFlush=function(xt){this.trigger("partialdone",xt)},S.prototype.endTimeline=function(xt){this.trigger("endedtimeline",xt)},S.prototype.reset=function(xt){this.trigger("reset",xt)};var x=S,C=Math.pow(2,32),R=function(xt){var $t=new DataView(xt.buffer,xt.byteOffset,xt.byteLength),Yt;return $t.getBigUint64?(Yt=$t.getBigUint64(0),Yt<Number.MAX_SAFE_INTEGER?Number(Yt):Yt):$t.getUint32(0)*C+$t.getUint32(4)},Ce={getUint64:R,MAX_UINT32:C},Ue=Ce.MAX_UINT32,je,Xe,Ye,et,ht,Dt,Ot,Mt,St,Ut,kt,Ft,Nt,Gt,Zt,ri,li,hi,xi,$i,Mi,Di,ki,ji,Ri,ui,vi,si,ai,Ci,Ei,zi,or,hr,mr,cr;(function(){var xt;if(ki={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(xt in ki)ki.hasOwnProperty(xt)&&(ki[xt]=[xt.charCodeAt(0),xt.charCodeAt(1),xt.charCodeAt(2),xt.charCodeAt(3)]);ji=new Uint8Array([105,115,111,109]),ui=new Uint8Array([97,118,99,49]),Ri=new Uint8Array([0,0,0,1]),vi=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),si=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ai={video:vi,audio:si},zi=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ei=new Uint8Array([0,0,0,0,0,0,0,0]),or=new Uint8Array([0,0,0,0,0,0,0,0]),hr=or,mr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),cr=or,Ci=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),je=function(xt){var $t=[],Yt=0,Vt,Qt,ti;for(Vt=1;Vt<arguments.length;Vt++)$t.push(arguments[Vt]);for(Vt=$t.length;Vt--;)Yt+=$t[Vt].byteLength;for(Qt=new Uint8Array(Yt+8),ti=new DataView(Qt.buffer,Qt.byteOffset,Qt.byteLength),ti.setUint32(0,Qt.byteLength),Qt.set(xt,4),Vt=0,Yt=8;Vt<$t.length;Vt++)Qt.set($t[Vt],Yt),Yt+=$t[Vt].byteLength;return Qt},Xe=function(){return je(ki.dinf,je(ki.dref,zi))},Ye=function(xt){return je(ki.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,xt.audioobjecttype<<3|xt.samplingfrequencyindex>>>1,xt.samplingfrequencyindex<<7|xt.channelcount<<3,6,1,2]))},et=function(){return je(ki.ftyp,ji,Ri,ji,ui)},ri=function(xt){return je(ki.hdlr,ai[xt])},ht=function(xt){return je(ki.mdat,xt)},Zt=function(xt){var $t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,xt.duration>>>24&255,xt.duration>>>16&255,xt.duration>>>8&255,xt.duration&255,85,196,0,0]);return xt.samplerate&&($t[12]=xt.samplerate>>>24&255,$t[13]=xt.samplerate>>>16&255,$t[14]=xt.samplerate>>>8&255,$t[15]=xt.samplerate&255),je(ki.mdhd,$t)},Gt=function(xt){return je(ki.mdia,Zt(xt),ri(xt.type),Ot(xt))},Dt=function(xt){return je(ki.mfhd,new Uint8Array([0,0,0,0,(xt&4278190080)>>24,(xt&16711680)>>16,(xt&65280)>>8,xt&255]))},Ot=function(xt){return je(ki.minf,xt.type==="video"?je(ki.vmhd,Ci):je(ki.smhd,Ei),Xe(),hi(xt))},Mt=function(xt,$t){for(var Yt=[],Vt=$t.length;Vt--;)Yt[Vt]=$i($t[Vt]);return je.apply(null,[ki.moof,Dt(xt)].concat(Yt))},St=function(xt){for(var $t=xt.length,Yt=[];$t--;)Yt[$t]=Ft(xt[$t]);return je.apply(null,[ki.moov,kt(4294967295)].concat(Yt).concat(Ut(xt)))},Ut=function(xt){for(var $t=xt.length,Yt=[];$t--;)Yt[$t]=Mi(xt[$t]);return je.apply(null,[ki.mvex].concat(Yt))},kt=function(xt){var $t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(xt&4278190080)>>24,(xt&16711680)>>16,(xt&65280)>>8,xt&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return je(ki.mvhd,$t)},li=function(xt){var $t=xt.samples||[],Yt=new Uint8Array(4+$t.length),Vt,Qt;for(Qt=0;Qt<$t.length;Qt++)Vt=$t[Qt].flags,Yt[Qt+4]=Vt.dependsOn<<4|Vt.isDependedOn<<2|Vt.hasRedundancy;return je(ki.sdtp,Yt)},hi=function(xt){return je(ki.stbl,xi(xt),je(ki.stts,cr),je(ki.stsc,hr),je(ki.stsz,mr),je(ki.stco,or))},function(){var xt,$t;xi=function(Yt){return je(ki.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),Yt.type==="video"?xt(Yt):$t(Yt))},xt=function(Yt){var Vt=Yt.sps||[],Qt=Yt.pps||[],ti=[],fi=[],yi,_i;for(yi=0;yi<Vt.length;yi++)ti.push((Vt[yi].byteLength&65280)>>>8),ti.push(Vt[yi].byteLength&255),ti=ti.concat(Array.prototype.slice.call(Vt[yi]));for(yi=0;yi<Qt.length;yi++)fi.push((Qt[yi].byteLength&65280)>>>8),fi.push(Qt[yi].byteLength&255),fi=fi.concat(Array.prototype.slice.call(Qt[yi]));if(_i=[ki.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(Yt.width&65280)>>8,Yt.width&255,(Yt.height&65280)>>8,Yt.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),je(ki.avcC,new Uint8Array([1,Yt.profileIdc,Yt.profileCompatibility,Yt.levelIdc,255].concat([Vt.length],ti,[Qt.length],fi))),je(ki.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],Yt.sarRatio){var Ti=Yt.sarRatio[0],wi=Yt.sarRatio[1];_i.push(je(ki.pasp,new Uint8Array([(Ti&4278190080)>>24,(Ti&16711680)>>16,(Ti&65280)>>8,Ti&255,(wi&4278190080)>>24,(wi&16711680)>>16,(wi&65280)>>8,wi&255])))}return je.apply(null,_i)},$t=function(Yt){return je(ki.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(Yt.channelcount&65280)>>8,Yt.channelcount&255,(Yt.samplesize&65280)>>8,Yt.samplesize&255,0,0,0,0,(Yt.samplerate&65280)>>8,Yt.samplerate&255,0,0]),Ye(Yt))}}(),Nt=function(xt){var $t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(xt.id&4278190080)>>24,(xt.id&16711680)>>16,(xt.id&65280)>>8,xt.id&255,0,0,0,0,(xt.duration&4278190080)>>24,(xt.duration&16711680)>>16,(xt.duration&65280)>>8,xt.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(xt.width&65280)>>8,xt.width&255,0,0,(xt.height&65280)>>8,xt.height&255,0,0]);return je(ki.tkhd,$t)},$i=function(xt){var $t,Yt,Vt,Qt,ti,fi,yi;return $t=je(ki.tfhd,new Uint8Array([0,0,0,58,(xt.id&4278190080)>>24,(xt.id&16711680)>>16,(xt.id&65280)>>8,xt.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),fi=Math.floor(xt.baseMediaDecodeTime/Ue),yi=Math.floor(xt.baseMediaDecodeTime%Ue),Yt=je(ki.tfdt,new Uint8Array([1,0,0,0,fi>>>24&255,fi>>>16&255,fi>>>8&255,fi&255,yi>>>24&255,yi>>>16&255,yi>>>8&255,yi&255])),ti=92,xt.type==="audio"?(Vt=Di(xt,ti),je(ki.traf,$t,Yt,Vt)):(Qt=li(xt),Vt=Di(xt,Qt.length+ti),je(ki.traf,$t,Yt,Vt,Qt))},Ft=function(xt){return xt.duration=xt.duration||4294967295,je(ki.trak,Nt(xt),Gt(xt))},Mi=function(xt){var $t=new Uint8Array([0,0,0,0,(xt.id&4278190080)>>24,(xt.id&16711680)>>16,(xt.id&65280)>>8,xt.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return xt.type!=="video"&&($t[$t.length-1]=0),je(ki.trex,$t)},function(){var xt,$t,Yt;Yt=function(Vt,Qt){var ti=0,fi=0,yi=0,_i=0;return Vt.length&&(Vt[0].duration!==void 0&&(ti=1),Vt[0].size!==void 0&&(fi=2),Vt[0].flags!==void 0&&(yi=4),Vt[0].compositionTimeOffset!==void 0&&(_i=8)),[0,0,ti|fi|yi|_i,1,(Vt.length&4278190080)>>>24,(Vt.length&16711680)>>>16,(Vt.length&65280)>>>8,Vt.length&255,(Qt&4278190080)>>>24,(Qt&16711680)>>>16,(Qt&65280)>>>8,Qt&255]},$t=function(Vt,Qt){var ti,fi,yi,_i,Ti,wi;for(_i=Vt.samples||[],Qt+=20+16*_i.length,yi=Yt(_i,Qt),fi=new Uint8Array(yi.length+_i.length*16),fi.set(yi),ti=yi.length,wi=0;wi<_i.length;wi++)Ti=_i[wi],fi[ti++]=(Ti.duration&4278190080)>>>24,fi[ti++]=(Ti.duration&16711680)>>>16,fi[ti++]=(Ti.duration&65280)>>>8,fi[ti++]=Ti.duration&255,fi[ti++]=(Ti.size&4278190080)>>>24,fi[ti++]=(Ti.size&16711680)>>>16,fi[ti++]=(Ti.size&65280)>>>8,fi[ti++]=Ti.size&255,fi[ti++]=Ti.flags.isLeading<<2|Ti.flags.dependsOn,fi[ti++]=Ti.flags.isDependedOn<<6|Ti.flags.hasRedundancy<<4|Ti.flags.paddingValue<<1|Ti.flags.isNonSyncSample,fi[ti++]=Ti.flags.degradationPriority&61440,fi[ti++]=Ti.flags.degradationPriority&15,fi[ti++]=(Ti.compositionTimeOffset&4278190080)>>>24,fi[ti++]=(Ti.compositionTimeOffset&16711680)>>>16,fi[ti++]=(Ti.compositionTimeOffset&65280)>>>8,fi[ti++]=Ti.compositionTimeOffset&255;return je(ki.trun,fi)},xt=function(Vt,Qt){var ti,fi,yi,_i,Ti,wi;for(_i=Vt.samples||[],Qt+=20+8*_i.length,yi=Yt(_i,Qt),ti=new Uint8Array(yi.length+_i.length*8),ti.set(yi),fi=yi.length,wi=0;wi<_i.length;wi++)Ti=_i[wi],ti[fi++]=(Ti.duration&4278190080)>>>24,ti[fi++]=(Ti.duration&16711680)>>>16,ti[fi++]=(Ti.duration&65280)>>>8,ti[fi++]=Ti.duration&255,ti[fi++]=(Ti.size&4278190080)>>>24,ti[fi++]=(Ti.size&16711680)>>>16,ti[fi++]=(Ti.size&65280)>>>8,ti[fi++]=Ti.size&255;return je(ki.trun,ti)},Di=function(Vt,Qt){return Vt.type==="audio"?xt(Vt,Qt):$t(Vt,Qt)}}();var Li={ftyp:et,mdat:ht,moof:Mt,moov:St,initSegment:function(xt){var $t=et(),Yt=St(xt),Vt;return Vt=new Uint8Array($t.byteLength+Yt.byteLength),Vt.set($t),Vt.set(Yt,$t.byteLength),Vt}},Ji=function(xt){var $t,Yt,Vt=[],Qt=[];for(Qt.byteLength=0,Qt.nalCount=0,Qt.duration=0,Vt.byteLength=0,$t=0;$t<xt.length;$t++)Yt=xt[$t],Yt.nalUnitType==="access_unit_delimiter_rbsp"?(Vt.length&&(Vt.duration=Yt.dts-Vt.dts,Qt.byteLength+=Vt.byteLength,Qt.nalCount+=Vt.length,Qt.duration+=Vt.duration,Qt.push(Vt)),Vt=[Yt],Vt.byteLength=Yt.data.byteLength,Vt.pts=Yt.pts,Vt.dts=Yt.dts):(Yt.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(Vt.keyFrame=!0),Vt.duration=Yt.dts-Vt.dts,Vt.byteLength+=Yt.data.byteLength,Vt.push(Yt));return Qt.length&&(!Vt.duration||Vt.duration<=0)&&(Vt.duration=Qt[Qt.length-1].duration),Qt.byteLength+=Vt.byteLength,Qt.nalCount+=Vt.length,Qt.duration+=Vt.duration,Qt.push(Vt),Qt},Xi=function(xt){var $t,Yt,Vt=[],Qt=[];for(Vt.byteLength=0,Vt.nalCount=0,Vt.duration=0,Vt.pts=xt[0].pts,Vt.dts=xt[0].dts,Qt.byteLength=0,Qt.nalCount=0,Qt.duration=0,Qt.pts=xt[0].pts,Qt.dts=xt[0].dts,$t=0;$t<xt.length;$t++)Yt=xt[$t],Yt.keyFrame?(Vt.length&&(Qt.push(Vt),Qt.byteLength+=Vt.byteLength,Qt.nalCount+=Vt.nalCount,Qt.duration+=Vt.duration),Vt=[Yt],Vt.nalCount=Yt.length,Vt.byteLength=Yt.byteLength,Vt.pts=Yt.pts,Vt.dts=Yt.dts,Vt.duration=Yt.duration):(Vt.duration+=Yt.duration,Vt.nalCount+=Yt.length,Vt.byteLength+=Yt.byteLength,Vt.push(Yt));return Qt.length&&Vt.duration<=0&&(Vt.duration=Qt[Qt.length-1].duration),Qt.byteLength+=Vt.byteLength,Qt.nalCount+=Vt.nalCount,Qt.duration+=Vt.duration,Qt.push(Vt),Qt},nr=function(xt){var $t;return!xt[0][0].keyFrame&&xt.length>1&&($t=xt.shift(),xt.byteLength-=$t.byteLength,xt.nalCount-=$t.nalCount,xt[0][0].dts=$t.dts,xt[0][0].pts=$t.pts,xt[0][0].duration+=$t.duration),xt},yr=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},_r=function(xt,$t){var Yt=yr();return Yt.dataOffset=$t,Yt.compositionTimeOffset=xt.pts-xt.dts,Yt.duration=xt.duration,Yt.size=4*xt.length,Yt.size+=xt.byteLength,xt.keyFrame&&(Yt.flags.dependsOn=2,Yt.flags.isNonSyncSample=0),Yt},gi=function(xt,$t){var Yt,Vt,Qt,ti,fi,yi=$t||0,_i=[];for(Yt=0;Yt<xt.length;Yt++)for(ti=xt[Yt],Vt=0;Vt<ti.length;Vt++)fi=ti[Vt],Qt=_r(fi,yi),yi+=Qt.size,_i.push(Qt);return _i},mi=function(xt){var $t,Yt,Vt,Qt,ti,fi,yi=0,_i=xt.byteLength,Ti=xt.nalCount,wi=_i+4*Ti,Oi=new Uint8Array(wi),sr=new DataView(Oi.buffer);for($t=0;$t<xt.length;$t++)for(Qt=xt[$t],Yt=0;Yt<Qt.length;Yt++)for(ti=Qt[Yt],Vt=0;Vt<ti.length;Vt++)fi=ti[Vt],sr.setUint32(yi,fi.data.byteLength),yi+=4,Oi.set(fi.data,yi),yi+=fi.data.byteLength;return Oi},Ai=function(xt,$t){var Yt,Vt=$t||0,Qt=[];return Yt=_r(xt,Vt),Qt.push(Yt),Qt},Hi=function(xt){var $t,Yt,Vt=0,Qt=xt.byteLength,ti=xt.length,fi=Qt+4*ti,yi=new Uint8Array(fi),_i=new DataView(yi.buffer);for($t=0;$t<xt.length;$t++)Yt=xt[$t],_i.setUint32(Vt,Yt.data.byteLength),Vt+=4,yi.set(Yt.data,Vt),Vt+=Yt.data.byteLength;return yi},Ni={groupNalsIntoFrames:Ji,groupFramesIntoGops:Xi,extendFirstKeyFrame:nr,generateSampleTable:gi,concatenateNalData:mi,generateSampleTableForFrame:Ai,concatenateNalDataForFrame:Hi},Fi=[33,16,5,32,164,27],Zi=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Bi=function(xt){for(var $t=[];xt--;)$t.push(0);return $t},Ki=function(xt){return Object.keys(xt).reduce(function($t,Yt){return $t[Yt]=new Uint8Array(xt[Yt].reduce(function(Vt,Qt){return Vt.concat(Qt)},[])),$t},{})},Gi,lr=function(){if(!Gi){var xt={96e3:[Fi,[227,64],Bi(154),[56]],88200:[Fi,[231],Bi(170),[56]],64e3:[Fi,[248,192],Bi(240),[56]],48e3:[Fi,[255,192],Bi(268),[55,148,128],Bi(54),[112]],44100:[Fi,[255,192],Bi(268),[55,163,128],Bi(84),[112]],32e3:[Fi,[255,192],Bi(268),[55,234],Bi(226),[112]],24e3:[Fi,[255,192],Bi(268),[55,255,128],Bi(268),[111,112],Bi(126),[224]],16e3:[Fi,[255,192],Bi(268),[55,255,128],Bi(268),[111,255],Bi(269),[223,108],Bi(195),[1,192]],12e3:[Zi,Bi(268),[3,127,248],Bi(268),[6,255,240],Bi(268),[13,255,224],Bi(268),[27,253,128],Bi(259),[56]],11025:[Zi,Bi(268),[3,127,248],Bi(268),[6,255,240],Bi(268),[13,255,224],Bi(268),[27,255,192],Bi(268),[55,175,128],Bi(108),[112]],8e3:[Zi,Bi(268),[3,121,16],Bi(47),[7]]};Gi=Ki(xt)}return Gi},er=9e4,Qi,ur,br,Cr,wr,Nr,$r;Qi=function(xt){return xt*er},ur=function(xt,$t){return xt*$t},br=function(xt){return xt/er},Cr=function(xt,$t){return xt/$t},wr=function(xt,$t){return Qi(Cr(xt,$t))},Nr=function(xt,$t){return ur(br(xt),$t)},$r=function(xt,$t,Yt){return br(Yt?xt:xt-$t)};var xr={ONE_SECOND_IN_TS:er,secondsToVideoTs:Qi,secondsToAudioTs:ur,videoTsToSeconds:br,audioTsToSeconds:Cr,audioTsToVideoTs:wr,videoTsToAudioTs:Nr,metadataTsToSeconds:$r},Ur=lr,Kr=xr,zn=function(xt){var $t,Yt,Vt=0;for($t=0;$t<xt.length;$t++)Yt=xt[$t],Vt+=Yt.data.byteLength;return Vt},Gr=function(xt,$t,Yt,Vt){var Qt,ti=0,fi=0,yi=0,_i=0,Ti,wi,Oi;if($t.length&&(Qt=Kr.audioTsToVideoTs(xt.baseMediaDecodeTime,xt.samplerate),ti=Math.ceil(Kr.ONE_SECOND_IN_TS/(xt.samplerate/1024)),Yt&&Vt&&(fi=Qt-Math.max(Yt,Vt),yi=Math.floor(fi/ti),_i=yi*ti),!(yi<1||_i>Kr.ONE_SECOND_IN_TS/2))){for(Ti=Ur()[xt.samplerate],Ti||(Ti=$t[0].data),wi=0;wi<yi;wi++)Oi=$t[0],$t.splice(0,0,{data:Ti,dts:Oi.dts-ti,pts:Oi.pts-ti});return xt.baseMediaDecodeTime-=Math.floor(Kr.videoTsToAudioTs(_i,xt.samplerate)),_i}},Qr=function(xt,$t,Yt){return $t.minSegmentDts>=Yt?xt:($t.minSegmentDts=1/0,xt.filter(function(Vt){return Vt.dts>=Yt?($t.minSegmentDts=Math.min($t.minSegmentDts,Vt.dts),$t.minSegmentPts=$t.minSegmentDts,!0):!1}))},Ln=function(xt){var $t,Yt,Vt=[];for($t=0;$t<xt.length;$t++)Yt=xt[$t],Vt.push({size:Yt.data.byteLength,duration:1024});return Vt},ns=function(xt){var $t,Yt,Vt=0,Qt=new Uint8Array(zn(xt));for($t=0;$t<xt.length;$t++)Yt=xt[$t],Qt.set(Yt.data,Vt),Vt+=Yt.data.byteLength;return Qt},Xr={prefixWithSilence:Gr,trimAdtsFramesByEarliestDts:Qr,generateSampleTable:Ln,concatenateFrameData:ns},ss=xr.ONE_SECOND_IN_TS,cn=function(xt,$t){typeof $t.pts=="number"&&(xt.timelineStartInfo.pts===void 0&&(xt.timelineStartInfo.pts=$t.pts),xt.minSegmentPts===void 0?xt.minSegmentPts=$t.pts:xt.minSegmentPts=Math.min(xt.minSegmentPts,$t.pts),xt.maxSegmentPts===void 0?xt.maxSegmentPts=$t.pts:xt.maxSegmentPts=Math.max(xt.maxSegmentPts,$t.pts)),typeof $t.dts=="number"&&(xt.timelineStartInfo.dts===void 0&&(xt.timelineStartInfo.dts=$t.dts),xt.minSegmentDts===void 0?xt.minSegmentDts=$t.dts:xt.minSegmentDts=Math.min(xt.minSegmentDts,$t.dts),xt.maxSegmentDts===void 0?xt.maxSegmentDts=$t.dts:xt.maxSegmentDts=Math.max(xt.maxSegmentDts,$t.dts))},As=function(xt){delete xt.minSegmentDts,delete xt.maxSegmentDts,delete xt.minSegmentPts,delete xt.maxSegmentPts},as=function(xt,$t){var Yt,Vt,Qt=xt.minSegmentDts;return $t||(Qt-=xt.timelineStartInfo.dts),Yt=xt.timelineStartInfo.baseMediaDecodeTime,Yt+=Qt,Yt=Math.max(0,Yt),xt.type==="audio"&&(Vt=xt.samplerate/ss,Yt*=Vt,Yt=Math.floor(Yt)),Yt},Ps={clearDtsInfo:As,calculateTrackBaseMediaDecodeTime:as,collectDtsInfo:cn},$n=4,os=128,Bs=function(xt){for(var $t=0,Yt={payloadType:-1,payloadSize:0},Vt=0,Qt=0;$t<xt.byteLength&&xt[$t]!==os;){for(;xt[$t]===255;)Vt+=255,$t++;for(Vt+=xt[$t++];xt[$t]===255;)Qt+=255,$t++;if(Qt+=xt[$t++],!Yt.payload&&Vt===$n){var ti=String.fromCharCode(xt[$t+3],xt[$t+4],xt[$t+5],xt[$t+6]);if(ti==="GA94"){Yt.payloadType=Vt,Yt.payloadSize=Qt,Yt.payload=xt.subarray($t,$t+Qt);break}else Yt.payload=void 0}$t+=Qt,Vt=0,Qt=0}return Yt},ls=function(xt){return xt.payload[0]!==181||(xt.payload[1]<<8|xt.payload[2])!==49||String.fromCharCode(xt.payload[3],xt.payload[4],xt.payload[5],xt.payload[6])!=="GA94"||xt.payload[7]!==3?null:xt.payload.subarray(8,xt.payload.length-1)},Us=function(xt,$t){var Yt=[],Vt,Qt,ti,fi;if(!($t[0]&64))return Yt;for(Qt=$t[0]&31,Vt=0;Vt<Qt;Vt++)ti=Vt*3,fi={type:$t[ti+2]&3,pts:xt},$t[ti+2]&4&&(fi.ccData=$t[ti+3]<<8|$t[ti+4],Yt.push(fi));return Yt},Wn=function(xt){for(var $t=xt.byteLength,Yt=[],Vt=1,Qt,ti;Vt<$t-2;)xt[Vt]===0&&xt[Vt+1]===0&&xt[Vt+2]===3?(Yt.push(Vt+2),Vt+=2):Vt++;if(Yt.length===0)return xt;Qt=$t-Yt.length,ti=new Uint8Array(Qt);var fi=0;for(Vt=0;Vt<Qt;fi++,Vt++)fi===Yt[0]&&(fi++,Yt.shift()),ti[Vt]=xt[fi];return ti},Kn={parseSei:Bs,parseUserData:ls,parseCaptionPackets:Us,discardEmulationPreventionBytes:Wn,USER_DATA_REGISTERED_ITU_T_T35:$n},Jr=x,Xn=Kn,Wr=function(xt){xt=xt||{},Wr.prototype.init.call(this),this.parse708captions_=typeof xt.parse708captions=="boolean"?xt.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Mr(0,0),new Mr(0,1),new Mr(1,0),new Mr(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ar({captionServices:xt.captionServices})),this.reset(),this.ccStreams_.forEach(function($t){$t.on("data",this.trigger.bind(this,"data")),$t.on("partialdone",this.trigger.bind(this,"partialdone")),$t.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Wr.prototype=new Jr,Wr.prototype.push=function(xt){var $t,Yt,Vt;if(xt.nalUnitType==="sei_rbsp"&&($t=Xn.parseSei(xt.escapedRBSP),!!$t.payload&&$t.payloadType===Xn.USER_DATA_REGISTERED_ITU_T_T35&&(Yt=Xn.parseUserData($t),!!Yt))){if(xt.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(xt.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}Vt=Xn.parseCaptionPackets(xt.pts,Yt),this.captionPackets_=this.captionPackets_.concat(Vt),this.latestDts_!==xt.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=xt.dts}},Wr.prototype.flushCCStreams=function(xt){this.ccStreams_.forEach(function($t){return xt==="flush"?$t.flush():$t.partialFlush()},this)},Wr.prototype.flushStream=function(xt){if(!this.captionPackets_.length){this.flushCCStreams(xt);return}this.captionPackets_.forEach(function($t,Yt){$t.presortIndex=Yt}),this.captionPackets_.sort(function($t,Yt){return $t.pts===Yt.pts?$t.presortIndex-Yt.presortIndex:$t.pts-Yt.pts}),this.captionPackets_.forEach(function($t){$t.type<2?this.dispatchCea608Packet($t):this.dispatchCea708Packet($t)},this),this.captionPackets_.length=0,this.flushCCStreams(xt)},Wr.prototype.flush=function(){return this.flushStream("flush")},Wr.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Wr.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(xt){xt.reset()})},Wr.prototype.dispatchCea608Packet=function(xt){this.setsTextOrXDSActive(xt)?this.activeCea608Channel_[xt.type]=null:this.setsChannel1Active(xt)?this.activeCea608Channel_[xt.type]=0:this.setsChannel2Active(xt)&&(this.activeCea608Channel_[xt.type]=1),this.activeCea608Channel_[xt.type]!==null&&this.ccStreams_[(xt.type<<1)+this.activeCea608Channel_[xt.type]].push(xt)},Wr.prototype.setsChannel1Active=function(xt){return(xt.ccData&30720)===4096},Wr.prototype.setsChannel2Active=function(xt){return(xt.ccData&30720)===6144},Wr.prototype.setsTextOrXDSActive=function(xt){return(xt.ccData&28928)===256||(xt.ccData&30974)===4138||(xt.ccData&30974)===6186},Wr.prototype.dispatchCea708Packet=function(xt){this.parse708captions_&&this.cc708Stream_.push(xt)};var Vs={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},us=function(xt){var $t=Vs[xt]||xt;return xt&4096&&xt===$t?"":String.fromCharCode($t)},mn=function(xt){return 32<=xt&&xt<=127||160<=xt&&xt<=255},nn=function(xt){this.windowNum=xt,this.reset()};nn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},nn.prototype.getText=function(){return this.rows.join(`
`)},nn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},nn.prototype.newLine=function(xt){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(xt),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},nn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},nn.prototype.addText=function(xt){this.rows[this.rowIdx]+=xt},nn.prototype.backspace=function(){if(!this.isEmpty()){var xt=this.rows[this.rowIdx];this.rows[this.rowIdx]=xt.substr(0,xt.length-1)}};var Sn=function(xt,$t,Yt){this.serviceNum=xt,this.text="",this.currentWindow=new nn(-1),this.windows=[],this.stream=Yt,typeof $t=="string"&&this.createTextDecoder($t)};Sn.prototype.init=function(xt,$t){this.startPts=xt;for(var Yt=0;Yt<8;Yt++)this.windows[Yt]=new nn(Yt),typeof $t=="function"&&(this.windows[Yt].beforeRowOverflow=$t)},Sn.prototype.setCurrentWindow=function(xt){this.currentWindow=this.windows[xt]},Sn.prototype.createTextDecoder=function(xt){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(xt)}catch($t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+xt+" encoding. "+$t})}};var Ar=function(xt){xt=xt||{},Ar.prototype.init.call(this);var $t=this,Yt=xt.captionServices||{},Vt={},Qt;Object.keys(Yt).forEach(ti=>{Qt=Yt[ti],/^SERVICE/.test(ti)&&(Vt[ti]=Qt.encoding)}),this.serviceEncodings=Vt,this.current708Packet=null,this.services={},this.push=function(ti){ti.type===3?($t.new708Packet(),$t.add708Bytes(ti)):($t.current708Packet===null&&$t.new708Packet(),$t.add708Bytes(ti))}};Ar.prototype=new Jr,Ar.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ar.prototype.add708Bytes=function(xt){var $t=xt.ccData,Yt=$t>>>8,Vt=$t&255;this.current708Packet.ptsVals.push(xt.pts),this.current708Packet.data.push(Yt),this.current708Packet.data.push(Vt)},Ar.prototype.push708Packet=function(){var xt=this.current708Packet,$t=xt.data,Yt=null,Vt=null,Qt=0,ti=$t[Qt++];for(xt.seq=ti>>6,xt.sizeCode=ti&63;Qt<$t.length;Qt++)ti=$t[Qt++],Yt=ti>>5,Vt=ti&31,Yt===7&&Vt>0&&(ti=$t[Qt++],Yt=ti),this.pushServiceBlock(Yt,Qt,Vt),Vt>0&&(Qt+=Vt-1)},Ar.prototype.pushServiceBlock=function(xt,$t,Yt){var Vt,Qt=$t,ti=this.current708Packet.data,fi=this.services[xt];for(fi||(fi=this.initService(xt,Qt));Qt<$t+Yt&&Qt<ti.length;Qt++)Vt=ti[Qt],mn(Vt)?Qt=this.handleText(Qt,fi):Vt===24?Qt=this.multiByteCharacter(Qt,fi):Vt===16?Qt=this.extendedCommands(Qt,fi):128<=Vt&&Vt<=135?Qt=this.setCurrentWindow(Qt,fi):152<=Vt&&Vt<=159?Qt=this.defineWindow(Qt,fi):Vt===136?Qt=this.clearWindows(Qt,fi):Vt===140?Qt=this.deleteWindows(Qt,fi):Vt===137?Qt=this.displayWindows(Qt,fi):Vt===138?Qt=this.hideWindows(Qt,fi):Vt===139?Qt=this.toggleWindows(Qt,fi):Vt===151?Qt=this.setWindowAttributes(Qt,fi):Vt===144?Qt=this.setPenAttributes(Qt,fi):Vt===145?Qt=this.setPenColor(Qt,fi):Vt===146?Qt=this.setPenLocation(Qt,fi):Vt===143?fi=this.reset(Qt,fi):Vt===8?fi.currentWindow.backspace():Vt===12?fi.currentWindow.clearText():Vt===13?fi.currentWindow.pendingNewLine=!0:Vt===14?fi.currentWindow.clearText():Vt===141&&Qt++},Ar.prototype.extendedCommands=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[++xt];return mn(Vt)&&(xt=this.handleText(xt,$t,{isExtended:!0})),xt},Ar.prototype.getPts=function(xt){return this.current708Packet.ptsVals[Math.floor(xt/2)]},Ar.prototype.initService=function(xt,$t){var Vt="SERVICE"+xt,Yt=this,Vt,Qt;return Vt in this.serviceEncodings&&(Qt=this.serviceEncodings[Vt]),this.services[xt]=new Sn(xt,Qt,Yt),this.services[xt].init(this.getPts($t),function(ti){Yt.flushDisplayed(ti,Yt.services[xt])}),this.services[xt]},Ar.prototype.handleText=function(xt,$t,Yt){var Vt=Yt&&Yt.isExtended,Qt=Yt&&Yt.isMultiByte,ti=this.current708Packet.data,fi=Vt?4096:0,yi=ti[xt],_i=ti[xt+1],Ti=$t.currentWindow,wi,Oi;function sr(qi){return qi.map(vr=>("0"+(vr&255).toString(16)).slice(-2)).join("")}if(Qt?(Oi=[yi,_i],xt++):Oi=[yi],$t.textDecoder_&&!Vt)wi=$t.textDecoder_.decode(new Uint8Array(Oi));else if(Qt){const qi=sr(Oi);wi=String.fromCharCode(parseInt(qi,16))}else wi=us(fi|yi);return Ti.pendingNewLine&&!Ti.isEmpty()&&Ti.newLine(this.getPts(xt)),Ti.pendingNewLine=!1,Ti.addText(wi),xt},Ar.prototype.multiByteCharacter=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[xt+1],Qt=Yt[xt+2];return mn(Vt)&&mn(Qt)&&(xt=this.handleText(++xt,$t,{isMultiByte:!0})),xt},Ar.prototype.setCurrentWindow=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[xt],Qt=Vt&7;return $t.setCurrentWindow(Qt),xt},Ar.prototype.defineWindow=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[xt],Qt=Vt&7;$t.setCurrentWindow(Qt);var ti=$t.currentWindow;return Vt=Yt[++xt],ti.visible=(Vt&32)>>5,ti.rowLock=(Vt&16)>>4,ti.columnLock=(Vt&8)>>3,ti.priority=Vt&7,Vt=Yt[++xt],ti.relativePositioning=(Vt&128)>>7,ti.anchorVertical=Vt&127,Vt=Yt[++xt],ti.anchorHorizontal=Vt,Vt=Yt[++xt],ti.anchorPoint=(Vt&240)>>4,ti.rowCount=Vt&15,Vt=Yt[++xt],ti.columnCount=Vt&63,Vt=Yt[++xt],ti.windowStyle=(Vt&56)>>3,ti.penStyle=Vt&7,ti.virtualRowCount=ti.rowCount+1,xt},Ar.prototype.setWindowAttributes=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[xt],Qt=$t.currentWindow.winAttr;return Vt=Yt[++xt],Qt.fillOpacity=(Vt&192)>>6,Qt.fillRed=(Vt&48)>>4,Qt.fillGreen=(Vt&12)>>2,Qt.fillBlue=Vt&3,Vt=Yt[++xt],Qt.borderType=(Vt&192)>>6,Qt.borderRed=(Vt&48)>>4,Qt.borderGreen=(Vt&12)>>2,Qt.borderBlue=Vt&3,Vt=Yt[++xt],Qt.borderType+=(Vt&128)>>5,Qt.wordWrap=(Vt&64)>>6,Qt.printDirection=(Vt&48)>>4,Qt.scrollDirection=(Vt&12)>>2,Qt.justify=Vt&3,Vt=Yt[++xt],Qt.effectSpeed=(Vt&240)>>4,Qt.effectDirection=(Vt&12)>>2,Qt.displayEffect=Vt&3,xt},Ar.prototype.flushDisplayed=function(xt,$t){for(var Yt=[],Vt=0;Vt<8;Vt++)$t.windows[Vt].visible&&!$t.windows[Vt].isEmpty()&&Yt.push($t.windows[Vt].getText());$t.endPts=xt,$t.text=Yt.join(`

`),this.pushCaption($t),$t.startPts=xt},Ar.prototype.pushCaption=function(xt){xt.text!==""&&(this.trigger("data",{startPts:xt.startPts,endPts:xt.endPts,text:xt.text,stream:"cc708_"+xt.serviceNum}),xt.text="",xt.startPts=xt.endPts)},Ar.prototype.displayWindows=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[++xt],Qt=this.getPts(xt);this.flushDisplayed(Qt,$t);for(var ti=0;ti<8;ti++)Vt&1<<ti&&($t.windows[ti].visible=1);return xt},Ar.prototype.hideWindows=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[++xt],Qt=this.getPts(xt);this.flushDisplayed(Qt,$t);for(var ti=0;ti<8;ti++)Vt&1<<ti&&($t.windows[ti].visible=0);return xt},Ar.prototype.toggleWindows=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[++xt],Qt=this.getPts(xt);this.flushDisplayed(Qt,$t);for(var ti=0;ti<8;ti++)Vt&1<<ti&&($t.windows[ti].visible^=1);return xt},Ar.prototype.clearWindows=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[++xt],Qt=this.getPts(xt);this.flushDisplayed(Qt,$t);for(var ti=0;ti<8;ti++)Vt&1<<ti&&$t.windows[ti].clearText();return xt},Ar.prototype.deleteWindows=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[++xt],Qt=this.getPts(xt);this.flushDisplayed(Qt,$t);for(var ti=0;ti<8;ti++)Vt&1<<ti&&$t.windows[ti].reset();return xt},Ar.prototype.setPenAttributes=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[xt],Qt=$t.currentWindow.penAttr;return Vt=Yt[++xt],Qt.textTag=(Vt&240)>>4,Qt.offset=(Vt&12)>>2,Qt.penSize=Vt&3,Vt=Yt[++xt],Qt.italics=(Vt&128)>>7,Qt.underline=(Vt&64)>>6,Qt.edgeType=(Vt&56)>>3,Qt.fontStyle=Vt&7,xt},Ar.prototype.setPenColor=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[xt],Qt=$t.currentWindow.penColor;return Vt=Yt[++xt],Qt.fgOpacity=(Vt&192)>>6,Qt.fgRed=(Vt&48)>>4,Qt.fgGreen=(Vt&12)>>2,Qt.fgBlue=Vt&3,Vt=Yt[++xt],Qt.bgOpacity=(Vt&192)>>6,Qt.bgRed=(Vt&48)>>4,Qt.bgGreen=(Vt&12)>>2,Qt.bgBlue=Vt&3,Vt=Yt[++xt],Qt.edgeRed=(Vt&48)>>4,Qt.edgeGreen=(Vt&12)>>2,Qt.edgeBlue=Vt&3,xt},Ar.prototype.setPenLocation=function(xt,$t){var Yt=this.current708Packet.data,Vt=Yt[xt],Qt=$t.currentWindow.penLoc;return $t.currentWindow.pendingNewLine=!0,Vt=Yt[++xt],Qt.row=Vt&15,Vt=Yt[++xt],Qt.column=Vt&63,xt},Ar.prototype.reset=function(xt,$t){var Yt=this.getPts(xt);return this.flushDisplayed(Yt,$t),this.initService($t.serviceNum,xt)};var js={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Yn=function(xt){return xt===null?"":(xt=js[xt]||xt,String.fromCharCode(xt))},Bn=14,cs=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],gn=function(){for(var xt=[],$t=Bn+1;$t--;)xt.push({text:"",indent:0,offset:0});return xt},Mr=function(xt,$t){Mr.prototype.init.call(this),this.field_=xt||0,this.dataChannel_=$t||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(Yt){var Vt,Qt,ti,fi,yi;if(Vt=Yt.ccData&32639,Vt===this.lastControlCode_){this.lastControlCode_=null;return}if((Vt&61440)===4096?this.lastControlCode_=Vt:Vt!==this.PADDING_&&(this.lastControlCode_=null),ti=Vt>>>8,fi=Vt&255,Vt!==this.PADDING_)if(Vt===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(Vt===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(Yt.pts),this.flushDisplayed(Yt.pts),Qt=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=Qt,this.startPts_=Yt.pts;else if(Vt===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(Yt.pts);else if(Vt===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(Yt.pts);else if(Vt===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(Yt.pts);else if(Vt===this.CARRIAGE_RETURN_)this.clearFormatting(Yt.pts),this.flushDisplayed(Yt.pts),this.shiftRowsUp_(),this.startPts_=Yt.pts;else if(Vt===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(Vt===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(Yt.pts),this.displayed_=gn();else if(Vt===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=gn();else if(Vt===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(Yt.pts),this.displayed_=gn()),this.mode_="paintOn",this.startPts_=Yt.pts;else if(this.isSpecialCharacter(ti,fi))ti=(ti&3)<<8,yi=Yn(ti|fi),this[this.mode_](Yt.pts,yi),this.column_++;else if(this.isExtCharacter(ti,fi))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),ti=(ti&3)<<8,yi=Yn(ti|fi),this[this.mode_](Yt.pts,yi),this.column_++;else if(this.isMidRowCode(ti,fi))this.clearFormatting(Yt.pts),this[this.mode_](Yt.pts," "),this.column_++,(fi&14)===14&&this.addFormatting(Yt.pts,["i"]),(fi&1)===1&&this.addFormatting(Yt.pts,["u"]);else if(this.isOffsetControlCode(ti,fi)){const Ti=fi&3;this.nonDisplayed_[this.row_].offset=Ti,this.column_+=Ti}else if(this.isPAC(ti,fi)){var _i=cs.indexOf(Vt&7968);if(this.mode_==="rollUp"&&(_i-this.rollUpRows_+1<0&&(_i=this.rollUpRows_-1),this.setRollUp(Yt.pts,_i)),_i!==this.row_&&_i>=0&&_i<=14&&(this.clearFormatting(Yt.pts),this.row_=_i),fi&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(Yt.pts,["u"]),(Vt&16)===16){const Ti=(Vt&14)>>1;this.column_=Ti*4,this.nonDisplayed_[this.row_].indent+=Ti}this.isColorPAC(fi)&&(fi&14)===14&&this.addFormatting(Yt.pts,["i"])}else this.isNormalChar(ti)&&(fi===0&&(fi=null),yi=Yn(ti),yi+=Yn(fi),this[this.mode_](Yt.pts,yi),this.column_+=yi.length)}};Mr.prototype=new Jr,Mr.prototype.flushDisplayed=function(xt){const $t=Vt=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+Vt+"."})},Yt=[];this.displayed_.forEach((Vt,Qt)=>{if(Vt&&Vt.text&&Vt.text.length){try{Vt.text=Vt.text.trim()}catch{$t(Qt)}Vt.text.length&&Yt.push({text:Vt.text,line:Qt+1,position:10+Math.min(70,Vt.indent*10)+Vt.offset*2.5})}else Vt==null&&$t(Qt)}),Yt.length&&this.trigger("data",{startPts:this.startPts_,endPts:xt,content:Yt,stream:this.name_})},Mr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=gn(),this.nonDisplayed_=gn(),this.lastControlCode_=null,this.column_=0,this.row_=Bn,this.rollUpRows_=2,this.formatting_=[]},Mr.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Mr.prototype.isSpecialCharacter=function(xt,$t){return xt===this.EXT_&&$t>=48&&$t<=63},Mr.prototype.isExtCharacter=function(xt,$t){return(xt===this.EXT_+1||xt===this.EXT_+2)&&$t>=32&&$t<=63},Mr.prototype.isMidRowCode=function(xt,$t){return xt===this.EXT_&&$t>=32&&$t<=47},Mr.prototype.isOffsetControlCode=function(xt,$t){return xt===this.OFFSET_&&$t>=33&&$t<=35},Mr.prototype.isPAC=function(xt,$t){return xt>=this.BASE_&&xt<this.BASE_+8&&$t>=64&&$t<=127},Mr.prototype.isColorPAC=function(xt){return xt>=64&&xt<=79||xt>=96&&xt<=127},Mr.prototype.isNormalChar=function(xt){return xt>=32&&xt<=127},Mr.prototype.setRollUp=function(xt,$t){if(this.mode_!=="rollUp"&&(this.row_=Bn,this.mode_="rollUp",this.flushDisplayed(xt),this.nonDisplayed_=gn(),this.displayed_=gn()),$t!==void 0&&$t!==this.row_)for(var Yt=0;Yt<this.rollUpRows_;Yt++)this.displayed_[$t-Yt]=this.displayed_[this.row_-Yt],this.displayed_[this.row_-Yt]={text:"",indent:0,offset:0};$t===void 0&&($t=this.row_),this.topRow_=$t-this.rollUpRows_+1},Mr.prototype.addFormatting=function(xt,$t){this.formatting_=this.formatting_.concat($t);var Yt=$t.reduce(function(Vt,Qt){return Vt+"<"+Qt+">"},"");this[this.mode_](xt,Yt)},Mr.prototype.clearFormatting=function(xt){if(this.formatting_.length){var $t=this.formatting_.reverse().reduce(function(Yt,Vt){return Yt+"</"+Vt+">"},"");this.formatting_=[],this[this.mode_](xt,$t)}},Mr.prototype.popOn=function(xt,$t){var Yt=this.nonDisplayed_[this.row_].text;Yt+=$t,this.nonDisplayed_[this.row_].text=Yt},Mr.prototype.rollUp=function(xt,$t){var Yt=this.displayed_[this.row_].text;Yt+=$t,this.displayed_[this.row_].text=Yt},Mr.prototype.shiftRowsUp_=function(){var xt;for(xt=0;xt<this.topRow_;xt++)this.displayed_[xt]={text:"",indent:0,offset:0};for(xt=this.row_+1;xt<Bn+1;xt++)this.displayed_[xt]={text:"",indent:0,offset:0};for(xt=this.topRow_;xt<this.row_;xt++)this.displayed_[xt]=this.displayed_[xt+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Mr.prototype.paintOn=function(xt,$t){var Yt=this.displayed_[this.row_].text;Yt+=$t,this.displayed_[this.row_].text=Yt};var hs={CaptionStream:Wr,Cea608Stream:Mr,Cea708Stream:Ar},Qn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Hs=x,Jn=8589934592,qs=4294967296,Is="shared",ds=function(xt,$t){var Yt=1;for(xt>$t&&(Yt=-1);Math.abs($t-xt)>qs;)xt+=Yt*Jn;return xt},fs=function(xt){var $t,Yt;fs.prototype.init.call(this),this.type_=xt||Is,this.push=function(Vt){if(Vt.type==="metadata"){this.trigger("data",Vt);return}this.type_!==Is&&Vt.type!==this.type_||(Yt===void 0&&(Yt=Vt.dts),Vt.dts=ds(Vt.dts,Yt),Vt.pts=ds(Vt.pts,Yt),$t=Vt.dts,this.trigger("data",Vt))},this.flush=function(){Yt=$t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){Yt=void 0,$t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};fs.prototype=new Hs;var ps={TimestampRolloverStream:fs,handleRollover:ds},yn=(xt,$t,Yt)=>{if(!xt)return-1;for(var Vt=Yt;Vt<xt.length;Vt++)if(xt[Vt]===$t)return Vt;return-1},ms={typedArrayIndexOf:yn},Zr=ms.typedArrayIndexOf,Pn={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},Zn=function(xt,$t,Yt){var Vt,Qt="";for(Vt=$t;Vt<Yt;Vt++)Qt+="%"+("00"+xt[Vt].toString(16)).slice(-2);return Qt},In=function(xt,$t,Yt){return decodeURIComponent(Zn(xt,$t,Yt))},Un=function(xt,$t,Yt){return unescape(Zn(xt,$t,Yt))},Vn=function(xt){return xt[0]<<21|xt[1]<<14|xt[2]<<7|xt[3]},xn={APIC:function(xt){var $t=1,Yt,Vt,Qt="-->";xt.data[0]===Pn.Utf8&&(Yt=Zr(xt.data,0,$t),!(Yt<0)&&(xt.mimeType=Un(xt.data,$t,Yt),$t=Yt+1,xt.pictureType=xt.data[$t],$t++,Vt=Zr(xt.data,0,$t),!(Vt<0)&&(xt.description=In(xt.data,$t,Vt),$t=Vt+1,xt.mimeType===Qt?xt.url=Un(xt.data,$t,xt.data.length):xt.pictureData=xt.data.subarray($t,xt.data.length))))},"T*":function(xt){xt.data[0]===Pn.Utf8&&(xt.value=In(xt.data,1,xt.data.length).replace(/\0*$/,""),xt.values=xt.value.split("\0"))},TXXX:function(xt){var $t;xt.data[0]===Pn.Utf8&&($t=Zr(xt.data,0,1),$t!==-1&&(xt.description=In(xt.data,1,$t),xt.value=In(xt.data,$t+1,xt.data.length).replace(/\0*$/,""),xt.data=xt.value))},"W*":function(xt){xt.url=Un(xt.data,0,xt.data.length).replace(/\0.*$/,"")},WXXX:function(xt){var $t;xt.data[0]===Pn.Utf8&&($t=Zr(xt.data,0,1),$t!==-1&&(xt.description=In(xt.data,1,$t),xt.url=Un(xt.data,$t+1,xt.data.length).replace(/\0.*$/,"")))},PRIV:function(xt){var $t;for($t=0;$t<xt.data.length;$t++)if(xt.data[$t]===0){xt.owner=Un(xt.data,0,$t);break}xt.privateData=xt.data.subarray($t+1),xt.data=xt.privateData}},Ds=function(xt){var $t,Yt,Vt=10,Qt=0,ti=[];if(!(xt.length<10||xt[0]!==73||xt[1]!==68||xt[2]!==51)){Qt=Vn(xt.subarray(6,10)),Qt+=10;var fi=xt[5]&64;fi&&(Vt+=4,Vt+=Vn(xt.subarray(10,14)),Qt-=Vn(xt.subarray(16,20)));do{if($t=Vn(xt.subarray(Vt+4,Vt+8)),$t<1)break;Yt=String.fromCharCode(xt[Vt],xt[Vt+1],xt[Vt+2],xt[Vt+3]);var yi={id:Yt,data:xt.subarray(Vt+10,Vt+$t+10)};yi.key=yi.id,xn[yi.id]?xn[yi.id](yi):yi.id[0]==="T"?xn["T*"](yi):yi.id[0]==="W"&&xn["W*"](yi),ti.push(yi),Vt+=10,Vt+=$t}while(Vt<Qt);return ti}},gs={parseId3Frames:Ds,parseSyncSafeInteger:Vn,frameParsers:xn},jn=x,es=Qn,Yr=gs,Hn;Hn=function(xt){var $t={descriptor:xt&&xt.descriptor},Yt=0,Vt=[],Qt=0,ti;if(Hn.prototype.init.call(this),this.dispatchType=es.METADATA_STREAM_TYPE.toString(16),$t.descriptor)for(ti=0;ti<$t.descriptor.length;ti++)this.dispatchType+=("00"+$t.descriptor[ti].toString(16)).slice(-2);this.push=function(fi){var yi,_i,Ti,wi,Oi,sr;if(fi.type==="timed-metadata"){if(fi.dataAlignmentIndicator&&(Qt=0,Vt.length=0),Vt.length===0&&(fi.data.length<10||fi.data[0]!==73||fi.data[1]!==68||fi.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(Vt.push(fi),Qt+=fi.data.byteLength,Vt.length===1&&(Yt=Yr.parseSyncSafeInteger(fi.data.subarray(6,10)),Yt+=10),!(Qt<Yt)){for(yi={data:new Uint8Array(Yt),frames:[],pts:Vt[0].pts,dts:Vt[0].dts},Oi=0;Oi<Yt;)yi.data.set(Vt[0].data.subarray(0,Yt-Oi),Oi),Oi+=Vt[0].data.byteLength,Qt-=Vt[0].data.byteLength,Vt.shift();_i=10,yi.data[5]&64&&(_i+=4,_i+=Yr.parseSyncSafeInteger(yi.data.subarray(10,14)),Yt-=Yr.parseSyncSafeInteger(yi.data.subarray(16,20)));do{if(Ti=Yr.parseSyncSafeInteger(yi.data.subarray(_i+4,_i+8)),Ti<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(sr=String.fromCharCode(yi.data[_i],yi.data[_i+1],yi.data[_i+2],yi.data[_i+3]),wi={id:sr,data:yi.data.subarray(_i+10,_i+Ti+10)},wi.key=wi.id,Yr.frameParsers[wi.id]?Yr.frameParsers[wi.id](wi):wi.id[0]==="T"?Yr.frameParsers["T*"](wi):wi.id[0]==="W"&&Yr.frameParsers["W*"](wi),wi.owner==="com.apple.streaming.transportStreamTimestamp"){var qi=wi.data,vr=(qi[3]&1)<<30|qi[4]<<22|qi[5]<<14|qi[6]<<6|qi[7]>>>2;vr*=4,vr+=qi[7]&3,wi.timeStamp=vr,yi.pts===void 0&&yi.dts===void 0&&(yi.pts=wi.timeStamp,yi.dts=wi.timeStamp),this.trigger("timestamp",wi)}yi.frames.push(wi),_i+=10,_i+=Ti}while(_i<Yt);this.trigger("data",yi)}}}},Hn.prototype=new jn;var sn=Hn,ys=x,Dn=hs,en=Qn,vs=ps.TimestampRolloverStream,ts,qn,Gn,an=188,vn=71;ts=function(){var xt=new Uint8Array(an),$t=0;ts.prototype.init.call(this),this.push=function(Yt){var Vt=0,Qt=an,ti;for($t?(ti=new Uint8Array(Yt.byteLength+$t),ti.set(xt.subarray(0,$t)),ti.set(Yt,$t),$t=0):ti=Yt;Qt<ti.byteLength;){if(ti[Vt]===vn&&ti[Qt]===vn){this.trigger("data",ti.subarray(Vt,Qt)),Vt+=an,Qt+=an;continue}Vt++,Qt++}Vt<ti.byteLength&&(xt.set(ti.subarray(Vt),0),$t=ti.byteLength-Vt)},this.flush=function(){$t===an&&xt[0]===vn&&(this.trigger("data",xt),$t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){$t=0,this.trigger("reset")}},ts.prototype=new ys,qn=function(){var xt,$t,Yt,Vt;qn.prototype.init.call(this),Vt=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,xt=function(Qt,ti){var fi=0;ti.payloadUnitStartIndicator&&(fi+=Qt[fi]+1),ti.type==="pat"?$t(Qt.subarray(fi),ti):Yt(Qt.subarray(fi),ti)},$t=function(Qt,ti){ti.section_number=Qt[7],ti.last_section_number=Qt[8],Vt.pmtPid=(Qt[10]&31)<<8|Qt[11],ti.pmtPid=Vt.pmtPid},Yt=function(Qt,ti){var fi,yi,_i,Ti;if(Qt[5]&1){for(Vt.programMapTable={video:null,audio:null,"timed-metadata":{}},fi=(Qt[1]&15)<<8|Qt[2],yi=3+fi-4,_i=(Qt[10]&15)<<8|Qt[11],Ti=12+_i;Ti<yi;){var wi=Qt[Ti],Oi=(Qt[Ti+1]&31)<<8|Qt[Ti+2];wi===en.H264_STREAM_TYPE&&Vt.programMapTable.video===null?Vt.programMapTable.video=Oi:wi===en.ADTS_STREAM_TYPE&&Vt.programMapTable.audio===null?Vt.programMapTable.audio=Oi:wi===en.METADATA_STREAM_TYPE&&(Vt.programMapTable["timed-metadata"][Oi]=wi),Ti+=((Qt[Ti+3]&15)<<8|Qt[Ti+4])+5}ti.programMapTable=Vt.programMapTable}},this.push=function(Qt){var ti={},fi=4;if(ti.payloadUnitStartIndicator=!!(Qt[1]&64),ti.pid=Qt[1]&31,ti.pid<<=8,ti.pid|=Qt[2],(Qt[3]&48)>>>4>1&&(fi+=Qt[fi]+1),ti.pid===0)ti.type="pat",xt(Qt.subarray(fi),ti),this.trigger("data",ti);else if(ti.pid===this.pmtPid)for(ti.type="pmt",xt(Qt.subarray(fi),ti),this.trigger("data",ti);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([Qt,fi,ti]):this.processPes_(Qt,fi,ti)},this.processPes_=function(Qt,ti,fi){fi.pid===this.programMapTable.video?fi.streamType=en.H264_STREAM_TYPE:fi.pid===this.programMapTable.audio?fi.streamType=en.ADTS_STREAM_TYPE:fi.streamType=this.programMapTable["timed-metadata"][fi.pid],fi.type="pes",fi.data=Qt.subarray(ti),this.trigger("data",fi)}},qn.prototype=new ys,qn.STREAM_TYPES={h264:27,adts:15},Gn=function(){var xt=this,$t=!1,Yt={data:[],size:0},Vt={data:[],size:0},Qt={data:[],size:0},ti,fi=function(_i,Ti){var wi;const Oi=_i[0]<<16|_i[1]<<8|_i[2];Ti.data=new Uint8Array,Oi===1&&(Ti.packetLength=6+(_i[4]<<8|_i[5]),Ti.dataAlignmentIndicator=(_i[6]&4)!==0,wi=_i[7],wi&192&&(Ti.pts=(_i[9]&14)<<27|(_i[10]&255)<<20|(_i[11]&254)<<12|(_i[12]&255)<<5|(_i[13]&254)>>>3,Ti.pts*=4,Ti.pts+=(_i[13]&6)>>>1,Ti.dts=Ti.pts,wi&64&&(Ti.dts=(_i[14]&14)<<27|(_i[15]&255)<<20|(_i[16]&254)<<12|(_i[17]&255)<<5|(_i[18]&254)>>>3,Ti.dts*=4,Ti.dts+=(_i[18]&6)>>>1)),Ti.data=_i.subarray(9+_i[8]))},yi=function(_i,Ti,wi){var Oi=new Uint8Array(_i.size),sr={type:Ti},qi=0,vr=0,Sr=!1,zr;if(!(!_i.data.length||_i.size<9)){for(sr.trackId=_i.data[0].pid,qi=0;qi<_i.data.length;qi++)zr=_i.data[qi],Oi.set(zr.data,vr),vr+=zr.data.byteLength;fi(Oi,sr),Sr=Ti==="video"||sr.packetLength<=_i.size,(wi||Sr)&&(_i.size=0,_i.data.length=0),Sr&&xt.trigger("data",sr)}};Gn.prototype.init.call(this),this.push=function(_i){({pat:function(){},pes:function(){var Ti,wi;switch(_i.streamType){case en.H264_STREAM_TYPE:Ti=Yt,wi="video";break;case en.ADTS_STREAM_TYPE:Ti=Vt,wi="audio";break;case en.METADATA_STREAM_TYPE:Ti=Qt,wi="timed-metadata";break;default:return}_i.payloadUnitStartIndicator&&yi(Ti,wi,!0),Ti.data.push(_i),Ti.size+=_i.data.byteLength},pmt:function(){var Ti={type:"metadata",tracks:[]};ti=_i.programMapTable,ti.video!==null&&Ti.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ti.video,codec:"avc",type:"video"}),ti.audio!==null&&Ti.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ti.audio,codec:"adts",type:"audio"}),$t=!0,xt.trigger("data",Ti)}})[_i.type]()},this.reset=function(){Yt.size=0,Yt.data.length=0,Vt.size=0,Vt.data.length=0,this.trigger("reset")},this.flushStreams_=function(){yi(Yt,"video"),yi(Vt,"audio"),yi(Qt,"timed-metadata")},this.flush=function(){if(!$t&&ti){var _i={type:"metadata",tracks:[]};ti.video!==null&&_i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ti.video,codec:"avc",type:"video"}),ti.audio!==null&&_i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ti.audio,codec:"adts",type:"audio"}),xt.trigger("data",_i)}$t=!1,this.flushStreams_(),this.trigger("done")}},Gn.prototype=new ys;var ks={PAT_PID:0,MP2T_PACKET_LENGTH:an,TransportPacketStream:ts,TransportParseStream:qn,ElementaryStream:Gn,TimestampRolloverStream:vs,CaptionStream:Dn.CaptionStream,Cea608Stream:Dn.Cea608Stream,Cea708Stream:Dn.Cea708Stream,MetadataStream:sn};for(var _n in en)en.hasOwnProperty(_n)&&(ks[_n]=en[_n]);var Gs=ks,zs=x,Rs=xr.ONE_SECOND_IN_TS,is,jr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];is=function(xt){var $t,Yt=0;is.prototype.init.call(this),this.skipWarn_=function(Vt,Qt){this.trigger("log",{level:"warn",message:`adts skiping bytes ${Vt} to ${Qt} in frame ${Yt} outside syncword`})},this.push=function(Vt){var Qt=0,ti,fi,yi,_i,Ti;if(xt||(Yt=0),Vt.type==="audio"){$t&&$t.length?(yi=$t,$t=new Uint8Array(yi.byteLength+Vt.data.byteLength),$t.set(yi),$t.set(Vt.data,yi.byteLength)):$t=Vt.data;for(var wi;Qt+7<$t.length;){if($t[Qt]!==255||($t[Qt+1]&246)!==240){typeof wi!="number"&&(wi=Qt),Qt++;continue}if(typeof wi=="number"&&(this.skipWarn_(wi,Qt),wi=null),fi=(~$t[Qt+1]&1)*2,ti=($t[Qt+3]&3)<<11|$t[Qt+4]<<3|($t[Qt+5]&224)>>5,_i=(($t[Qt+6]&3)+1)*1024,Ti=_i*Rs/jr[($t[Qt+2]&60)>>>2],$t.byteLength-Qt<ti)break;this.trigger("data",{pts:Vt.pts+Yt*Ti,dts:Vt.dts+Yt*Ti,sampleCount:_i,audioobjecttype:($t[Qt+2]>>>6&3)+1,channelcount:($t[Qt+2]&1)<<2|($t[Qt+3]&192)>>>6,samplerate:jr[($t[Qt+2]&60)>>>2],samplingfrequencyindex:($t[Qt+2]&60)>>>2,samplesize:16,data:$t.subarray(Qt+7+fi,Qt+ti)}),Yt++,Qt+=ti}typeof wi=="number"&&(this.skipWarn_(wi,Qt),wi=null),$t=$t.subarray(Qt)}},this.flush=function(){Yt=0,this.trigger("done")},this.reset=function(){$t=void 0,this.trigger("reset")},this.endTimeline=function(){$t=void 0,this.trigger("endedtimeline")}},is.prototype=new zs;var ii=is,oi;oi=function(xt){var $t=xt.byteLength,Yt=0,Vt=0;this.length=function(){return 8*$t},this.bitsAvailable=function(){return 8*$t+Vt},this.loadWord=function(){var Qt=xt.byteLength-$t,ti=new Uint8Array(4),fi=Math.min(4,$t);if(fi===0)throw new Error("no bytes available");ti.set(xt.subarray(Qt,Qt+fi)),Yt=new DataView(ti.buffer).getUint32(0),Vt=fi*8,$t-=fi},this.skipBits=function(Qt){var ti;Vt>Qt?(Yt<<=Qt,Vt-=Qt):(Qt-=Vt,ti=Math.floor(Qt/8),Qt-=ti*8,$t-=ti,this.loadWord(),Yt<<=Qt,Vt-=Qt)},this.readBits=function(Qt){var ti=Math.min(Vt,Qt),fi=Yt>>>32-ti;return Vt-=ti,Vt>0?Yt<<=ti:$t>0&&this.loadWord(),ti=Qt-ti,ti>0?fi<<ti|this.readBits(ti):fi},this.skipLeadingZeros=function(){var Qt;for(Qt=0;Qt<Vt;++Qt)if(Yt&2147483648>>>Qt)return Yt<<=Qt,Vt-=Qt,Qt;return this.loadWord(),Qt+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var Qt=this.skipLeadingZeros();return this.readBits(Qt+1)-1},this.readExpGolomb=function(){var Qt=this.readUnsignedExpGolomb();return 1&Qt?1+Qt>>>1:-1*(Qt>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var di=oi,ci=x,Si=di,Ii,Pi,Yi;Pi=function(){var xt=0,$t,Yt;Pi.prototype.init.call(this),this.push=function(Vt){var Qt;Yt?(Qt=new Uint8Array(Yt.byteLength+Vt.data.byteLength),Qt.set(Yt),Qt.set(Vt.data,Yt.byteLength),Yt=Qt):Yt=Vt.data;for(var ti=Yt.byteLength;xt<ti-3;xt++)if(Yt[xt+2]===1){$t=xt+5;break}for(;$t<ti;)switch(Yt[$t]){case 0:if(Yt[$t-1]!==0){$t+=2;break}else if(Yt[$t-2]!==0){$t++;break}xt+3!==$t-2&&this.trigger("data",Yt.subarray(xt+3,$t-2));do $t++;while(Yt[$t]!==1&&$t<ti);xt=$t-2,$t+=3;break;case 1:if(Yt[$t-1]!==0||Yt[$t-2]!==0){$t+=3;break}this.trigger("data",Yt.subarray(xt+3,$t-2)),xt=$t-2,$t+=3;break;default:$t+=3;break}Yt=Yt.subarray(xt),$t-=xt,xt=0},this.reset=function(){Yt=null,xt=0,this.trigger("reset")},this.flush=function(){Yt&&Yt.byteLength>3&&this.trigger("data",Yt.subarray(xt+3)),Yt=null,xt=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Pi.prototype=new ci,Yi={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ii=function(){var xt=new Pi,$t,Yt,Vt,Qt,ti,fi,yi;Ii.prototype.init.call(this),$t=this,this.push=function(_i){_i.type==="video"&&(Yt=_i.trackId,Vt=_i.pts,Qt=_i.dts,xt.push(_i))},xt.on("data",function(_i){var Ti={trackId:Yt,pts:Vt,dts:Qt,data:_i,nalUnitTypeCode:_i[0]&31};switch(Ti.nalUnitTypeCode){case 5:Ti.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Ti.nalUnitType="sei_rbsp",Ti.escapedRBSP=ti(_i.subarray(1));break;case 7:Ti.nalUnitType="seq_parameter_set_rbsp",Ti.escapedRBSP=ti(_i.subarray(1)),Ti.config=fi(Ti.escapedRBSP);break;case 8:Ti.nalUnitType="pic_parameter_set_rbsp";break;case 9:Ti.nalUnitType="access_unit_delimiter_rbsp";break}$t.trigger("data",Ti)}),xt.on("done",function(){$t.trigger("done")}),xt.on("partialdone",function(){$t.trigger("partialdone")}),xt.on("reset",function(){$t.trigger("reset")}),xt.on("endedtimeline",function(){$t.trigger("endedtimeline")}),this.flush=function(){xt.flush()},this.partialFlush=function(){xt.partialFlush()},this.reset=function(){xt.reset()},this.endTimeline=function(){xt.endTimeline()},yi=function(_i,Ti){var wi=8,Oi=8,sr,qi;for(sr=0;sr<_i;sr++)Oi!==0&&(qi=Ti.readExpGolomb(),Oi=(wi+qi+256)%256),wi=Oi===0?wi:Oi},ti=function(_i){for(var Ti=_i.byteLength,wi=[],Oi=1,sr,qi;Oi<Ti-2;)_i[Oi]===0&&_i[Oi+1]===0&&_i[Oi+2]===3?(wi.push(Oi+2),Oi+=2):Oi++;if(wi.length===0)return _i;sr=Ti-wi.length,qi=new Uint8Array(sr);var vr=0;for(Oi=0;Oi<sr;vr++,Oi++)vr===wi[0]&&(vr++,wi.shift()),qi[Oi]=_i[vr];return qi},fi=function(_i){var Ti=0,wi=0,Oi=0,sr=0,qi,vr,Sr,zr,Tn,Cs,Ga,za,Wa,ka,Ka,qr=[1,1],Xa,ws;if(qi=new Si(_i),vr=qi.readUnsignedByte(),zr=qi.readUnsignedByte(),Sr=qi.readUnsignedByte(),qi.skipUnsignedExpGolomb(),Yi[vr]&&(Tn=qi.readUnsignedExpGolomb(),Tn===3&&qi.skipBits(1),qi.skipUnsignedExpGolomb(),qi.skipUnsignedExpGolomb(),qi.skipBits(1),qi.readBoolean()))for(Ka=Tn!==3?8:12,ws=0;ws<Ka;ws++)qi.readBoolean()&&(ws<6?yi(16,qi):yi(64,qi));if(qi.skipUnsignedExpGolomb(),Cs=qi.readUnsignedExpGolomb(),Cs===0)qi.readUnsignedExpGolomb();else if(Cs===1)for(qi.skipBits(1),qi.skipExpGolomb(),qi.skipExpGolomb(),Ga=qi.readUnsignedExpGolomb(),ws=0;ws<Ga;ws++)qi.skipExpGolomb();if(qi.skipUnsignedExpGolomb(),qi.skipBits(1),za=qi.readUnsignedExpGolomb(),Wa=qi.readUnsignedExpGolomb(),ka=qi.readBits(1),ka===0&&qi.skipBits(1),qi.skipBits(1),qi.readBoolean()&&(Ti=qi.readUnsignedExpGolomb(),wi=qi.readUnsignedExpGolomb(),Oi=qi.readUnsignedExpGolomb(),sr=qi.readUnsignedExpGolomb()),qi.readBoolean()&&qi.readBoolean()){switch(Xa=qi.readUnsignedByte(),Xa){case 1:qr=[1,1];break;case 2:qr=[12,11];break;case 3:qr=[10,11];break;case 4:qr=[16,11];break;case 5:qr=[40,33];break;case 6:qr=[24,11];break;case 7:qr=[20,11];break;case 8:qr=[32,11];break;case 9:qr=[80,33];break;case 10:qr=[18,11];break;case 11:qr=[15,11];break;case 12:qr=[64,33];break;case 13:qr=[160,99];break;case 14:qr=[4,3];break;case 15:qr=[3,2];break;case 16:qr=[2,1];break;case 255:{qr=[qi.readUnsignedByte()<<8|qi.readUnsignedByte(),qi.readUnsignedByte()<<8|qi.readUnsignedByte()];break}}qr&&qr[0]/qr[1]}return{profileIdc:vr,levelIdc:Sr,profileCompatibility:zr,width:(za+1)*16-Ti*2-wi*2,height:(2-ka)*(Wa+1)*16-Oi*2-sr*2,sarRatio:qr}}},Ii.prototype=new ci;var Vi={H264Stream:Ii,NalByteStream:Pi},tr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],rr=function(xt,$t){var Yt=xt[$t+6]<<21|xt[$t+7]<<14|xt[$t+8]<<7|xt[$t+9],Vt=xt[$t+5],Qt=(Vt&16)>>4;return Yt=Yt>=0?Yt:0,Qt?Yt+20:Yt+10},dr=function(xt,$t){return xt.length-$t<10||xt[$t]!==73||xt[$t+1]!==68||xt[$t+2]!==51?$t:($t+=rr(xt,$t),dr(xt,$t))},Wi=function(xt){var $t=dr(xt,0);return xt.length>=$t+2&&(xt[$t]&255)===255&&(xt[$t+1]&240)===240&&(xt[$t+1]&22)===16},ar=function(xt){return xt[0]<<21|xt[1]<<14|xt[2]<<7|xt[3]},gr=function(xt,$t,Yt){var Vt,Qt="";for(Vt=$t;Vt<Yt;Vt++)Qt+="%"+("00"+xt[Vt].toString(16)).slice(-2);return Qt},Pr=function(xt,$t,Yt){return unescape(gr(xt,$t,Yt))},pr=function(xt,$t){var Yt=(xt[$t+5]&224)>>5,Vt=xt[$t+4]<<3,Qt=xt[$t+3]&6144;return Qt|Vt|Yt},Er=function(xt,$t){return xt[$t]===73&&xt[$t+1]===68&&xt[$t+2]===51?"timed-metadata":xt[$t]&!0&&(xt[$t+1]&240)===240?"audio":null},Lr=function(xt){for(var $t=0;$t+5<xt.length;){if(xt[$t]!==255||(xt[$t+1]&246)!==240){$t++;continue}return tr[(xt[$t+2]&60)>>>2]}return null},kr=function(xt){var $t,Yt,Vt,Qt;$t=10,xt[5]&64&&($t+=4,$t+=ar(xt.subarray(10,14)));do{if(Yt=ar(xt.subarray($t+4,$t+8)),Yt<1)return null;if(Qt=String.fromCharCode(xt[$t],xt[$t+1],xt[$t+2],xt[$t+3]),Qt==="PRIV"){Vt=xt.subarray($t+10,$t+Yt+10);for(var ti=0;ti<Vt.byteLength;ti++)if(Vt[ti]===0){var fi=Pr(Vt,0,ti);if(fi==="com.apple.streaming.transportStreamTimestamp"){var yi=Vt.subarray(ti+1),_i=(yi[3]&1)<<30|yi[4]<<22|yi[5]<<14|yi[6]<<6|yi[7]>>>2;return _i*=4,_i+=yi[7]&3,_i}break}}$t+=10,$t+=Yt}while($t<xt.byteLength);return null},Fr={isLikelyAacData:Wi,parseId3TagSize:rr,parseAdtsSize:pr,parseType:Er,parseSampleRate:Lr,parseAacTimestamp:kr},Rr=x,tn=Fr,Cn;Cn=function(){var xt=new Uint8Array,$t=0;Cn.prototype.init.call(this),this.setTimestamp=function(Yt){$t=Yt},this.push=function(Yt){var Vt=0,Qt=0,ti,fi,yi,_i;for(xt.length?(_i=xt.length,xt=new Uint8Array(Yt.byteLength+_i),xt.set(xt.subarray(0,_i)),xt.set(Yt,_i)):xt=Yt;xt.length-Qt>=3;){if(xt[Qt]===73&&xt[Qt+1]===68&&xt[Qt+2]===51){if(xt.length-Qt<10||(Vt=tn.parseId3TagSize(xt,Qt),Qt+Vt>xt.length))break;fi={type:"timed-metadata",data:xt.subarray(Qt,Qt+Vt)},this.trigger("data",fi),Qt+=Vt;continue}else if((xt[Qt]&255)===255&&(xt[Qt+1]&240)===240){if(xt.length-Qt<7||(Vt=tn.parseAdtsSize(xt,Qt),Qt+Vt>xt.length))break;yi={type:"audio",data:xt.subarray(Qt,Qt+Vt),pts:$t,dts:$t},this.trigger("data",yi),Qt+=Vt;continue}Qt++}ti=xt.length-Qt,ti>0?xt=xt.subarray(Qt):xt=new Uint8Array},this.reset=function(){xt=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){xt=new Uint8Array,this.trigger("endedtimeline")}},Cn.prototype=new Rr;var Ws=Cn,da=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ra=da,fa=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],pa=fa,_s=x,bs=Li,Ts=Ni,Os=Xr,bn=Ps,An=Gs,Ss=xr,ia=ii,ma=Vi.H264Stream,ga=Ws,ya=Fr.isLikelyAacData,va=xr.ONE_SECOND_IN_TS,Ks=Ra,Xs=pa,Br,Rn,Ms,ni,Xt=function(xt,$t){$t.stream=xt,this.trigger("log",$t)},ei=function(xt,$t){for(var Yt=Object.keys($t),Vt=0;Vt<Yt.length;Vt++){var Qt=Yt[Vt];Qt==="headOfPipeline"||!$t[Qt].on||$t[Qt].on("log",Xt.bind(xt,Qt))}},pi=function(xt,$t){var Yt;if(xt.length!==$t.length)return!1;for(Yt=0;Yt<xt.length;Yt++)if(xt[Yt]!==$t[Yt])return!1;return!0},bi=function(xt,$t,Yt,Vt,Qt,ti){var fi=Yt-$t,yi=Vt-$t,_i=Qt-Yt;return{start:{dts:xt,pts:xt+fi},end:{dts:xt+yi,pts:xt+_i},prependedContentDuration:ti,baseMediaDecodeTime:xt}};Rn=function(xt,$t){var Yt=[],Vt,Qt=0,ti=0,fi=1/0;$t=$t||{},Vt=$t.firstSequenceNumber||0,Rn.prototype.init.call(this),this.push=function(yi){bn.collectDtsInfo(xt,yi),xt&&Ks.forEach(function(_i){xt[_i]=yi[_i]}),Yt.push(yi)},this.setEarliestDts=function(yi){Qt=yi},this.setVideoBaseMediaDecodeTime=function(yi){fi=yi},this.setAudioAppendStart=function(yi){ti=yi},this.flush=function(){var yi,_i,Ti,wi,Oi,sr,qi;if(Yt.length===0){this.trigger("done","AudioSegmentStream");return}yi=Os.trimAdtsFramesByEarliestDts(Yt,xt,Qt),xt.baseMediaDecodeTime=bn.calculateTrackBaseMediaDecodeTime(xt,$t.keepOriginalTimestamps),qi=Os.prefixWithSilence(xt,yi,ti,fi),xt.samples=Os.generateSampleTable(yi),Ti=bs.mdat(Os.concatenateFrameData(yi)),Yt=[],_i=bs.moof(Vt,[xt]),wi=new Uint8Array(_i.byteLength+Ti.byteLength),Vt++,wi.set(_i),wi.set(Ti,_i.byteLength),bn.clearDtsInfo(xt),Oi=Math.ceil(va*1024/xt.samplerate),yi.length&&(sr=yi.length*Oi,this.trigger("segmentTimingInfo",bi(Ss.audioTsToVideoTs(xt.baseMediaDecodeTime,xt.samplerate),yi[0].dts,yi[0].pts,yi[0].dts+sr,yi[0].pts+sr,qi||0)),this.trigger("timingInfo",{start:yi[0].pts,end:yi[0].pts+sr})),this.trigger("data",{track:xt,boxes:wi}),this.trigger("done","AudioSegmentStream")},this.reset=function(){bn.clearDtsInfo(xt),Yt=[],this.trigger("reset")}},Rn.prototype=new _s,Br=function(xt,$t){var Yt,Vt=[],Qt=[],ti,fi;$t=$t||{},Yt=$t.firstSequenceNumber||0,Br.prototype.init.call(this),delete xt.minPTS,this.gopCache_=[],this.push=function(yi){bn.collectDtsInfo(xt,yi),yi.nalUnitType==="seq_parameter_set_rbsp"&&!ti&&(ti=yi.config,xt.sps=[yi.data],Xs.forEach(function(_i){xt[_i]=ti[_i]},this)),yi.nalUnitType==="pic_parameter_set_rbsp"&&!fi&&(fi=yi.data,xt.pps=[yi.data]),Vt.push(yi)},this.flush=function(){for(var yi,_i,Ti,wi,Oi,sr,qi=0,vr,Sr;Vt.length&&Vt[0].nalUnitType!=="access_unit_delimiter_rbsp";)Vt.shift();if(Vt.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(yi=Ts.groupNalsIntoFrames(Vt),Ti=Ts.groupFramesIntoGops(yi),Ti[0][0].keyFrame||(_i=this.getGopForFusion_(Vt[0],xt),_i?(qi=_i.duration,Ti.unshift(_i),Ti.byteLength+=_i.byteLength,Ti.nalCount+=_i.nalCount,Ti.pts=_i.pts,Ti.dts=_i.dts,Ti.duration+=_i.duration):Ti=Ts.extendFirstKeyFrame(Ti)),Qt.length){var zr;if($t.alignGopsAtEnd?zr=this.alignGopsAtEnd_(Ti):zr=this.alignGopsAtStart_(Ti),!zr){this.gopCache_.unshift({gop:Ti.pop(),pps:xt.pps,sps:xt.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),Vt=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}bn.clearDtsInfo(xt),Ti=zr}bn.collectDtsInfo(xt,Ti),xt.samples=Ts.generateSampleTable(Ti),Oi=bs.mdat(Ts.concatenateNalData(Ti)),xt.baseMediaDecodeTime=bn.calculateTrackBaseMediaDecodeTime(xt,$t.keepOriginalTimestamps),this.trigger("processedGopsInfo",Ti.map(function(Tn){return{pts:Tn.pts,dts:Tn.dts,byteLength:Tn.byteLength}})),vr=Ti[0],Sr=Ti[Ti.length-1],this.trigger("segmentTimingInfo",bi(xt.baseMediaDecodeTime,vr.dts,vr.pts,Sr.dts+Sr.duration,Sr.pts+Sr.duration,qi)),this.trigger("timingInfo",{start:Ti[0].pts,end:Ti[Ti.length-1].pts+Ti[Ti.length-1].duration}),this.gopCache_.unshift({gop:Ti.pop(),pps:xt.pps,sps:xt.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),Vt=[],this.trigger("baseMediaDecodeTime",xt.baseMediaDecodeTime),this.trigger("timelineStartInfo",xt.timelineStartInfo),wi=bs.moof(Yt,[xt]),sr=new Uint8Array(wi.byteLength+Oi.byteLength),Yt++,sr.set(wi),sr.set(Oi,wi.byteLength),this.trigger("data",{track:xt,boxes:sr}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),Vt=[],this.gopCache_.length=0,Qt.length=0,this.trigger("reset")},this.resetStream_=function(){bn.clearDtsInfo(xt),ti=void 0,fi=void 0},this.getGopForFusion_=function(yi){var _i=45e3,Ti=1e4,wi=1/0,Oi,sr,qi,vr,Sr;for(Sr=0;Sr<this.gopCache_.length;Sr++)vr=this.gopCache_[Sr],qi=vr.gop,!(!(xt.pps&&pi(xt.pps[0],vr.pps[0]))||!(xt.sps&&pi(xt.sps[0],vr.sps[0])))&&(qi.dts<xt.timelineStartInfo.dts||(Oi=yi.dts-qi.dts-qi.duration,Oi>=-Ti&&Oi<=_i&&(!sr||wi>Oi)&&(sr=vr,wi=Oi)));return sr?sr.gop:null},this.alignGopsAtStart_=function(yi){var _i,Ti,wi,Oi,sr,qi,vr,Sr;for(sr=yi.byteLength,qi=yi.nalCount,vr=yi.duration,_i=Ti=0;_i<Qt.length&&Ti<yi.length&&(wi=Qt[_i],Oi=yi[Ti],wi.pts!==Oi.pts);){if(Oi.pts>wi.pts){_i++;continue}Ti++,sr-=Oi.byteLength,qi-=Oi.nalCount,vr-=Oi.duration}return Ti===0?yi:Ti===yi.length?null:(Sr=yi.slice(Ti),Sr.byteLength=sr,Sr.duration=vr,Sr.nalCount=qi,Sr.pts=Sr[0].pts,Sr.dts=Sr[0].dts,Sr)},this.alignGopsAtEnd_=function(yi){var _i,Ti,wi,Oi,sr,qi;for(_i=Qt.length-1,Ti=yi.length-1,sr=null,qi=!1;_i>=0&&Ti>=0;){if(wi=Qt[_i],Oi=yi[Ti],wi.pts===Oi.pts){qi=!0;break}if(wi.pts>Oi.pts){_i--;continue}_i===Qt.length-1&&(sr=Ti),Ti--}if(!qi&&sr===null)return null;var vr;if(qi?vr=Ti:vr=sr,vr===0)return yi;var Sr=yi.slice(vr),zr=Sr.reduce(function(Tn,Cs){return Tn.byteLength+=Cs.byteLength,Tn.duration+=Cs.duration,Tn.nalCount+=Cs.nalCount,Tn},{byteLength:0,duration:0,nalCount:0});return Sr.byteLength=zr.byteLength,Sr.duration=zr.duration,Sr.nalCount=zr.nalCount,Sr.pts=Sr[0].pts,Sr.dts=Sr[0].dts,Sr},this.alignGopsWith=function(yi){Qt=yi}},Br.prototype=new _s,ni=function(xt,$t){this.numberOfTracks=0,this.metadataStream=$t,xt=xt||{},typeof xt.remux<"u"?this.remuxTracks=!!xt.remux:this.remuxTracks=!0,typeof xt.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=xt.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ni.prototype.init.call(this),this.push=function(Yt){if(Yt.content||Yt.text)return this.pendingCaptions.push(Yt);if(Yt.frames)return this.pendingMetadata.push(Yt);this.pendingTracks.push(Yt.track),this.pendingBytes+=Yt.boxes.byteLength,Yt.track.type==="video"&&(this.videoTrack=Yt.track,this.pendingBoxes.push(Yt.boxes)),Yt.track.type==="audio"&&(this.audioTrack=Yt.track,this.pendingBoxes.unshift(Yt.boxes))}},ni.prototype=new _s,ni.prototype.flush=function(xt){var $t=0,Yt={captions:[],captionStreams:{},metadata:[],info:{}},Vt,Qt,ti,fi=0,yi;if(this.pendingTracks.length<this.numberOfTracks){if(xt!=="VideoSegmentStream"&&xt!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(fi=this.videoTrack.timelineStartInfo.pts,Xs.forEach(function(_i){Yt.info[_i]=this.videoTrack[_i]},this)):this.audioTrack&&(fi=this.audioTrack.timelineStartInfo.pts,Ks.forEach(function(_i){Yt.info[_i]=this.audioTrack[_i]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?Yt.type=this.pendingTracks[0].type:Yt.type="combined",this.emittedTracks+=this.pendingTracks.length,ti=bs.initSegment(this.pendingTracks),Yt.initSegment=new Uint8Array(ti.byteLength),Yt.initSegment.set(ti),Yt.data=new Uint8Array(this.pendingBytes),yi=0;yi<this.pendingBoxes.length;yi++)Yt.data.set(this.pendingBoxes[yi],$t),$t+=this.pendingBoxes[yi].byteLength;for(yi=0;yi<this.pendingCaptions.length;yi++)Vt=this.pendingCaptions[yi],Vt.startTime=Ss.metadataTsToSeconds(Vt.startPts,fi,this.keepOriginalTimestamps),Vt.endTime=Ss.metadataTsToSeconds(Vt.endPts,fi,this.keepOriginalTimestamps),Yt.captionStreams[Vt.stream]=!0,Yt.captions.push(Vt);for(yi=0;yi<this.pendingMetadata.length;yi++)Qt=this.pendingMetadata[yi],Qt.cueTime=Ss.metadataTsToSeconds(Qt.pts,fi,this.keepOriginalTimestamps),Yt.metadata.push(Qt);for(Yt.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",Yt),yi=0;yi<Yt.captions.length;yi++)Vt=Yt.captions[yi],this.trigger("caption",Vt);for(yi=0;yi<Yt.metadata.length;yi++)Qt=Yt.metadata[yi],this.trigger("id3Frame",Qt)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ni.prototype.setRemux=function(xt){this.remuxTracks=xt},Ms=function(xt){var $t=this,Yt=!0,Vt,Qt;Ms.prototype.init.call(this),xt=xt||{},this.baseMediaDecodeTime=xt.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var ti={};this.transmuxPipeline_=ti,ti.type="aac",ti.metadataStream=new An.MetadataStream,ti.aacStream=new ga,ti.audioTimestampRolloverStream=new An.TimestampRolloverStream("audio"),ti.timedMetadataTimestampRolloverStream=new An.TimestampRolloverStream("timed-metadata"),ti.adtsStream=new ia,ti.coalesceStream=new ni(xt,ti.metadataStream),ti.headOfPipeline=ti.aacStream,ti.aacStream.pipe(ti.audioTimestampRolloverStream).pipe(ti.adtsStream),ti.aacStream.pipe(ti.timedMetadataTimestampRolloverStream).pipe(ti.metadataStream).pipe(ti.coalesceStream),ti.metadataStream.on("timestamp",function(fi){ti.aacStream.setTimestamp(fi.timeStamp)}),ti.aacStream.on("data",function(fi){fi.type!=="timed-metadata"&&fi.type!=="audio"||ti.audioSegmentStream||(Qt=Qt||{timelineStartInfo:{baseMediaDecodeTime:$t.baseMediaDecodeTime},codec:"adts",type:"audio"},ti.coalesceStream.numberOfTracks++,ti.audioSegmentStream=new Rn(Qt,xt),ti.audioSegmentStream.on("log",$t.getLogTrigger_("audioSegmentStream")),ti.audioSegmentStream.on("timingInfo",$t.trigger.bind($t,"audioTimingInfo")),ti.adtsStream.pipe(ti.audioSegmentStream).pipe(ti.coalesceStream),$t.trigger("trackinfo",{hasAudio:!!Qt,hasVideo:!!Vt}))}),ti.coalesceStream.on("data",this.trigger.bind(this,"data")),ti.coalesceStream.on("done",this.trigger.bind(this,"done")),ei(this,ti)},this.setupTsPipeline=function(){var ti={};this.transmuxPipeline_=ti,ti.type="ts",ti.metadataStream=new An.MetadataStream,ti.packetStream=new An.TransportPacketStream,ti.parseStream=new An.TransportParseStream,ti.elementaryStream=new An.ElementaryStream,ti.timestampRolloverStream=new An.TimestampRolloverStream,ti.adtsStream=new ia,ti.h264Stream=new ma,ti.captionStream=new An.CaptionStream(xt),ti.coalesceStream=new ni(xt,ti.metadataStream),ti.headOfPipeline=ti.packetStream,ti.packetStream.pipe(ti.parseStream).pipe(ti.elementaryStream).pipe(ti.timestampRolloverStream),ti.timestampRolloverStream.pipe(ti.h264Stream),ti.timestampRolloverStream.pipe(ti.adtsStream),ti.timestampRolloverStream.pipe(ti.metadataStream).pipe(ti.coalesceStream),ti.h264Stream.pipe(ti.captionStream).pipe(ti.coalesceStream),ti.elementaryStream.on("data",function(fi){var yi;if(fi.type==="metadata"){for(yi=fi.tracks.length;yi--;)!Vt&&fi.tracks[yi].type==="video"?(Vt=fi.tracks[yi],Vt.timelineStartInfo.baseMediaDecodeTime=$t.baseMediaDecodeTime):!Qt&&fi.tracks[yi].type==="audio"&&(Qt=fi.tracks[yi],Qt.timelineStartInfo.baseMediaDecodeTime=$t.baseMediaDecodeTime);Vt&&!ti.videoSegmentStream&&(ti.coalesceStream.numberOfTracks++,ti.videoSegmentStream=new Br(Vt,xt),ti.videoSegmentStream.on("log",$t.getLogTrigger_("videoSegmentStream")),ti.videoSegmentStream.on("timelineStartInfo",function(_i){Qt&&!xt.keepOriginalTimestamps&&(Qt.timelineStartInfo=_i,ti.audioSegmentStream.setEarliestDts(_i.dts-$t.baseMediaDecodeTime))}),ti.videoSegmentStream.on("processedGopsInfo",$t.trigger.bind($t,"gopInfo")),ti.videoSegmentStream.on("segmentTimingInfo",$t.trigger.bind($t,"videoSegmentTimingInfo")),ti.videoSegmentStream.on("baseMediaDecodeTime",function(_i){Qt&&ti.audioSegmentStream.setVideoBaseMediaDecodeTime(_i)}),ti.videoSegmentStream.on("timingInfo",$t.trigger.bind($t,"videoTimingInfo")),ti.h264Stream.pipe(ti.videoSegmentStream).pipe(ti.coalesceStream)),Qt&&!ti.audioSegmentStream&&(ti.coalesceStream.numberOfTracks++,ti.audioSegmentStream=new Rn(Qt,xt),ti.audioSegmentStream.on("log",$t.getLogTrigger_("audioSegmentStream")),ti.audioSegmentStream.on("timingInfo",$t.trigger.bind($t,"audioTimingInfo")),ti.audioSegmentStream.on("segmentTimingInfo",$t.trigger.bind($t,"audioSegmentTimingInfo")),ti.adtsStream.pipe(ti.audioSegmentStream).pipe(ti.coalesceStream)),$t.trigger("trackinfo",{hasAudio:!!Qt,hasVideo:!!Vt})}}),ti.coalesceStream.on("data",this.trigger.bind(this,"data")),ti.coalesceStream.on("id3Frame",function(fi){fi.dispatchType=ti.metadataStream.dispatchType,$t.trigger("id3Frame",fi)}),ti.coalesceStream.on("caption",this.trigger.bind(this,"caption")),ti.coalesceStream.on("done",this.trigger.bind(this,"done")),ei(this,ti)},this.setBaseMediaDecodeTime=function(ti){var fi=this.transmuxPipeline_;xt.keepOriginalTimestamps||(this.baseMediaDecodeTime=ti),Qt&&(Qt.timelineStartInfo.dts=void 0,Qt.timelineStartInfo.pts=void 0,bn.clearDtsInfo(Qt),fi.audioTimestampRolloverStream&&fi.audioTimestampRolloverStream.discontinuity()),Vt&&(fi.videoSegmentStream&&(fi.videoSegmentStream.gopCache_=[]),Vt.timelineStartInfo.dts=void 0,Vt.timelineStartInfo.pts=void 0,bn.clearDtsInfo(Vt),fi.captionStream.reset()),fi.timestampRolloverStream&&fi.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(ti){Qt&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(ti)},this.setRemux=function(ti){var fi=this.transmuxPipeline_;xt.remux=ti,fi&&fi.coalesceStream&&fi.coalesceStream.setRemux(ti)},this.alignGopsWith=function(ti){Vt&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(ti)},this.getLogTrigger_=function(ti){var fi=this;return function(yi){yi.stream=ti,fi.trigger("log",yi)}},this.push=function(ti){if(Yt){var fi=ya(ti);fi&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!fi&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),Yt=!1}this.transmuxPipeline_.headOfPipeline.push(ti)},this.flush=function(){Yt=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ms.prototype=new _s;var Ui={Transmuxer:Ms,VideoSegmentStream:Br,AudioSegmentStream:Rn,AUDIO_PROPERTIES:Ks,VIDEO_PROPERTIES:Xs,generateSegmentTimingInfo:bi},ir=function(xt){return xt>>>0},fr=function(xt){return("00"+xt.toString(16)).slice(-2)},Tr={toUnsigned:ir,toHexString:fr},Ir=function(xt){var $t="";return $t+=String.fromCharCode(xt[0]),$t+=String.fromCharCode(xt[1]),$t+=String.fromCharCode(xt[2]),$t+=String.fromCharCode(xt[3]),$t},Dr=Ir,Vr=Tr.toUnsigned,Ls=Dr,ra=function(xt,$t){var Yt=[],Vt,Qt,ti,fi,yi;if(!$t.length)return null;for(Vt=0;Vt<xt.byteLength;)Qt=Vr(xt[Vt]<<24|xt[Vt+1]<<16|xt[Vt+2]<<8|xt[Vt+3]),ti=Ls(xt.subarray(Vt+4,Vt+8)),fi=Qt>1?Vt+Qt:xt.byteLength,ti===$t[0]&&($t.length===1?Yt.push(xt.subarray(Vt+8,fi)):(yi=ra(xt.subarray(Vt+8,fi),$t.slice(1)),yi.length&&(Yt=Yt.concat(yi)))),Vt=fi;return Yt},Ys=ra,_a=Tr.toUnsigned,na=Ce.getUint64,ba=function(xt){var $t={version:xt[0],flags:new Uint8Array(xt.subarray(1,4))};return $t.version===1?$t.baseMediaDecodeTime=na(xt.subarray(4)):$t.baseMediaDecodeTime=_a(xt[4]<<24|xt[5]<<16|xt[6]<<8|xt[7]),$t},Qs=ba,Ta=function(xt){return{isLeading:(xt[0]&12)>>>2,dependsOn:xt[0]&3,isDependedOn:(xt[1]&192)>>>6,hasRedundancy:(xt[1]&48)>>>4,paddingValue:(xt[1]&14)>>>1,isNonSyncSample:xt[1]&1,degradationPriority:xt[2]<<8|xt[3]}},Sa=Ta,Js=Sa,sa=function(xt){var $t={version:xt[0],flags:new Uint8Array(xt.subarray(1,4)),samples:[]},Yt=new DataView(xt.buffer,xt.byteOffset,xt.byteLength),Vt=$t.flags[2]&1,Qt=$t.flags[2]&4,ti=$t.flags[1]&1,fi=$t.flags[1]&2,yi=$t.flags[1]&4,_i=$t.flags[1]&8,Ti=Yt.getUint32(4),wi=8,Oi;for(Vt&&($t.dataOffset=Yt.getInt32(wi),wi+=4),Qt&&Ti&&(Oi={flags:Js(xt.subarray(wi,wi+4))},wi+=4,ti&&(Oi.duration=Yt.getUint32(wi),wi+=4),fi&&(Oi.size=Yt.getUint32(wi),wi+=4),_i&&($t.version===1?Oi.compositionTimeOffset=Yt.getInt32(wi):Oi.compositionTimeOffset=Yt.getUint32(wi),wi+=4),$t.samples.push(Oi),Ti--);Ti--;)Oi={},ti&&(Oi.duration=Yt.getUint32(wi),wi+=4),fi&&(Oi.size=Yt.getUint32(wi),wi+=4),yi&&(Oi.flags=Js(xt.subarray(wi,wi+4)),wi+=4),_i&&($t.version===1?Oi.compositionTimeOffset=Yt.getInt32(wi):Oi.compositionTimeOffset=Yt.getUint32(wi),wi+=4),$t.samples.push(Oi);return $t},Zs=sa,ea=function(xt){var $t=new DataView(xt.buffer,xt.byteOffset,xt.byteLength),Yt={version:xt[0],flags:new Uint8Array(xt.subarray(1,4)),trackId:$t.getUint32(4)},Vt=Yt.flags[2]&1,Qt=Yt.flags[2]&2,ti=Yt.flags[2]&8,fi=Yt.flags[2]&16,yi=Yt.flags[2]&32,_i=Yt.flags[0]&65536,Ti=Yt.flags[0]&131072,wi;return wi=8,Vt&&(wi+=4,Yt.baseDataOffset=$t.getUint32(12),wi+=4),Qt&&(Yt.sampleDescriptionIndex=$t.getUint32(wi),wi+=4),ti&&(Yt.defaultSampleDuration=$t.getUint32(wi),wi+=4),fi&&(Yt.defaultSampleSize=$t.getUint32(wi),wi+=4),yi&&(Yt.defaultSampleFlags=$t.getUint32(wi)),_i&&(Yt.durationIsEmpty=!0),!Vt&&Ti&&(Yt.baseDataOffsetIsMoof=!0),Yt},Ns=ea,rs;typeof window<"u"?rs=window:typeof E<"u"?rs=E:typeof self<"u"?rs=self:rs={};var aa=rs,Ea=Kn.discardEmulationPreventionBytes,xa=hs.CaptionStream,Es=Ys,oa=Qs,Ya=Zs,Qa=Ns,Oa=aa,Ja=function(xt,$t){for(var Yt=xt,Vt=0;Vt<$t.length;Vt++){var Qt=$t[Vt];if(Yt<Qt.size)return Qt;Yt-=Qt.size}return null},Za=function(xt,$t,Yt){var Vt=new DataView(xt.buffer,xt.byteOffset,xt.byteLength),Qt={logs:[],seiNals:[]},ti,fi,yi,_i;for(fi=0;fi+4<xt.length;fi+=yi)if(yi=Vt.getUint32(fi),fi+=4,!(yi<=0))switch(xt[fi]&31){case 6:var Ti=xt.subarray(fi+1,fi+1+yi),wi=Ja(fi,$t);if(ti={nalUnitType:"sei_rbsp",size:yi,data:Ti,escapedRBSP:Ea(Ti),trackId:Yt},wi)ti.pts=wi.pts,ti.dts=wi.dts,_i=wi;else if(_i)ti.pts=_i.pts,ti.dts=_i.dts;else{Qt.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+fi+" for trackId "+Yt+". See mux.js#223."});break}Qt.seiNals.push(ti);break}return Qt},eo=function(xt,$t,Yt){var Vt=$t,Qt=Yt.defaultSampleDuration||0,ti=Yt.defaultSampleSize||0,fi=Yt.trackId,yi=[];return xt.forEach(function(_i){var Ti=Ya(_i),wi=Ti.samples;wi.forEach(function(Oi){Oi.duration===void 0&&(Oi.duration=Qt),Oi.size===void 0&&(Oi.size=ti),Oi.trackId=fi,Oi.dts=Vt,Oi.compositionTimeOffset===void 0&&(Oi.compositionTimeOffset=0),typeof Vt=="bigint"?(Oi.pts=Vt+Oa.BigInt(Oi.compositionTimeOffset),Vt+=Oa.BigInt(Oi.duration)):(Oi.pts=Vt+Oi.compositionTimeOffset,Vt+=Oi.duration)}),yi=yi.concat(wi)}),yi},to=function(xt,$t){var Yt=Es(xt,["moof","traf"]),Vt=Es(xt,["mdat"]),Qt={},ti=[];return Vt.forEach(function(fi,yi){var _i=Yt[yi];ti.push({mdat:fi,traf:_i})}),ti.forEach(function(fi){var yi=fi.mdat,_i=fi.traf,Ti=Es(_i,["tfhd"]),wi=Qa(Ti[0]),Oi=wi.trackId,sr=Es(_i,["tfdt"]),qi=sr.length>0?oa(sr[0]).baseMediaDecodeTime:0,vr=Es(_i,["trun"]),Sr,zr;$t===Oi&&vr.length>0&&(Sr=eo(vr,qi,wi),zr=Za(yi,Sr,Oi),Qt[Oi]||(Qt[Oi]={seiNals:[],logs:[]}),Qt[Oi].seiNals=Qt[Oi].seiNals.concat(zr.seiNals),Qt[Oi].logs=Qt[Oi].logs.concat(zr.logs))}),Qt},io=function(xt,$t,Yt){var Vt;if($t===null)return null;Vt=to(xt,$t);var Qt=Vt[$t]||{};return{seiNals:Qt.seiNals,logs:Qt.logs,timescale:Yt}},ro=function(){var xt=!1,$t,Yt,Vt,Qt,ti,fi;this.isInitialized=function(){return xt},this.init=function(yi){$t=new xa,xt=!0,fi=yi?yi.isPartial:!1,$t.on("data",function(_i){_i.startTime=_i.startPts/Qt,_i.endTime=_i.endPts/Qt,ti.captions.push(_i),ti.captionStreams[_i.stream]=!0}),$t.on("log",function(_i){ti.logs.push(_i)})},this.isNewInit=function(yi,_i){return yi&&yi.length===0||_i&&typeof _i=="object"&&Object.keys(_i).length===0?!1:Vt!==yi[0]||Qt!==_i[Vt]},this.parse=function(yi,_i,Ti){var wi;if(this.isInitialized()){if(!_i||!Ti)return null;if(this.isNewInit(_i,Ti))Vt=_i[0],Qt=Ti[Vt];else if(Vt===null||!Qt)return Yt.push(yi),null}else return null;for(;Yt.length>0;){var Oi=Yt.shift();this.parse(Oi,_i,Ti)}return wi=io(yi,Vt,Qt),wi&&wi.logs&&(ti.logs=ti.logs.concat(wi.logs)),wi===null||!wi.seiNals?ti.logs.length?{logs:ti.logs,captions:[],captionStreams:[]}:null:(this.pushNals(wi.seiNals),this.flushStream(),ti)},this.pushNals=function(yi){if(!this.isInitialized()||!yi||yi.length===0)return null;yi.forEach(function(_i){$t.push(_i)})},this.flushStream=function(){if(!this.isInitialized())return null;fi?$t.partialFlush():$t.flush()},this.clearParsedCaptions=function(){ti.captions=[],ti.captionStreams={},ti.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;$t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){Yt=[],Vt=null,Qt=null,ti?this.clearParsedCaptions():ti={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},no=ro,so=function(xt){for(var $t=0,Yt=String.fromCharCode(xt[$t]),Vt="";Yt!=="\0";)Vt+=Yt,$t++,Yt=String.fromCharCode(xt[$t]);return Vt+=Yt,Vt},ao={uint8ToCString:so},la=ao.uint8ToCString,oo=Ce.getUint64,lo=function(xt){var $t=4,Yt=xt[0],Vt,Qt,ti,fi,yi,_i,Ti,wi;if(Yt===0){Vt=la(xt.subarray($t)),$t+=Vt.length,Qt=la(xt.subarray($t)),$t+=Qt.length;var Oi=new DataView(xt.buffer);ti=Oi.getUint32($t),$t+=4,yi=Oi.getUint32($t),$t+=4,_i=Oi.getUint32($t),$t+=4,Ti=Oi.getUint32($t),$t+=4}else if(Yt===1){var Oi=new DataView(xt.buffer);ti=Oi.getUint32($t),$t+=4,fi=oo(xt.subarray($t)),$t+=8,_i=Oi.getUint32($t),$t+=4,Ti=Oi.getUint32($t),$t+=4,Vt=la(xt.subarray($t)),$t+=Vt.length,Qt=la(xt.subarray($t)),$t+=Qt.length}wi=new Uint8Array(xt.subarray($t,xt.byteLength));var sr={scheme_id_uri:Vt,value:Qt,timescale:ti||1,presentation_time:fi,presentation_time_delta:yi,event_duration:_i,id:Ti,message_data:wi};return co(Yt,sr)?sr:void 0},uo=function(xt,$t,Yt,Vt){return xt||xt===0?xt/$t:Vt+Yt/$t},co=function(xt,$t){var Yt=$t.scheme_id_uri!=="\0",Vt=xt===0&&Ma($t.presentation_time_delta)&&Yt,Qt=xt===1&&Ma($t.presentation_time)&&Yt;return!(xt>1)&&Vt||Qt},Ma=function(xt){return xt!==void 0||xt!==null},ho={parseEmsgBox:lo,scaleTime:uo},ua=Tr.toUnsigned,ta=Tr.toHexString,Hr=Ys,Fs=Dr,Ca=ho,fo=Ns,po=Zs,mo=Qs,go=Ce.getUint64,La,Na,Fa,$a,Ba,wa,Ua,Aa=aa,yo=gs.parseId3Frames;La=function(xt){var $t={},Yt=Hr(xt,["moov","trak"]);return Yt.reduce(function(Vt,Qt){var ti,fi,yi,_i,Ti;return ti=Hr(Qt,["tkhd"])[0],!ti||(fi=ti[0],yi=fi===0?12:20,_i=ua(ti[yi]<<24|ti[yi+1]<<16|ti[yi+2]<<8|ti[yi+3]),Ti=Hr(Qt,["mdia","mdhd"])[0],!Ti)?null:(fi=Ti[0],yi=fi===0?12:20,Vt[_i]=ua(Ti[yi]<<24|Ti[yi+1]<<16|Ti[yi+2]<<8|Ti[yi+3]),Vt)},$t)},Na=function(xt,$t){var Yt;Yt=Hr($t,["moof","traf"]);var Vt=Yt.reduce(function(Qt,ti){var fi=Hr(ti,["tfhd"])[0],yi=ua(fi[4]<<24|fi[5]<<16|fi[6]<<8|fi[7]),_i=xt[yi]||9e4,Ti=Hr(ti,["tfdt"])[0],wi=new DataView(Ti.buffer,Ti.byteOffset,Ti.byteLength),Oi;Ti[0]===1?Oi=go(Ti.subarray(4,12)):Oi=wi.getUint32(4);let sr;return typeof Oi=="bigint"?sr=Oi/Aa.BigInt(_i):typeof Oi=="number"&&!isNaN(Oi)&&(sr=Oi/_i),sr<Number.MAX_SAFE_INTEGER&&(sr=Number(sr)),sr<Qt&&(Qt=sr),Qt},1/0);return typeof Vt=="bigint"||isFinite(Vt)?Vt:0},Fa=function(xt,$t){var Yt=Hr($t,["moof","traf"]),Vt=0,Qt=0,ti;if(Yt&&Yt.length){var fi=Hr(Yt[0],["tfhd"])[0],yi=Hr(Yt[0],["trun"])[0],_i=Hr(Yt[0],["tfdt"])[0];if(fi){var Ti=fo(fi);ti=Ti.trackId}if(_i){var wi=mo(_i);Vt=wi.baseMediaDecodeTime}if(yi){var Oi=po(yi);Oi.samples&&Oi.samples.length&&(Qt=Oi.samples[0].compositionTimeOffset||0)}}var sr=xt[ti]||9e4;typeof Vt=="bigint"&&(Qt=Aa.BigInt(Qt),sr=Aa.BigInt(sr));var qi=(Vt+Qt)/sr;return typeof qi=="bigint"&&qi<Number.MAX_SAFE_INTEGER&&(qi=Number(qi)),qi},$a=function(xt){var $t=Hr(xt,["moov","trak"]),Yt=[];return $t.forEach(function(Vt){var Qt=Hr(Vt,["mdia","hdlr"]),ti=Hr(Vt,["tkhd"]);Qt.forEach(function(fi,yi){var _i=Fs(fi.subarray(8,12)),Ti=ti[yi],wi,Oi,sr;_i==="vide"&&(wi=new DataView(Ti.buffer,Ti.byteOffset,Ti.byteLength),Oi=wi.getUint8(0),sr=Oi===0?wi.getUint32(12):wi.getUint32(20),Yt.push(sr))})}),Yt},wa=function(xt){var $t=xt[0],Yt=$t===0?12:20;return ua(xt[Yt]<<24|xt[Yt+1]<<16|xt[Yt+2]<<8|xt[Yt+3])},Ba=function(xt){var $t=Hr(xt,["moov","trak"]),Yt=[];return $t.forEach(function(Vt){var Qt={},ti=Hr(Vt,["tkhd"])[0],fi,yi;ti&&(fi=new DataView(ti.buffer,ti.byteOffset,ti.byteLength),yi=fi.getUint8(0),Qt.id=yi===0?fi.getUint32(12):fi.getUint32(20));var _i=Hr(Vt,["mdia","hdlr"])[0];if(_i){var Ti=Fs(_i.subarray(8,12));Ti==="vide"?Qt.type="video":Ti==="soun"?Qt.type="audio":Qt.type=Ti}var wi=Hr(Vt,["mdia","minf","stbl","stsd"])[0];if(wi){var Oi=wi.subarray(8);Qt.codec=Fs(Oi.subarray(4,8));var sr=Hr(Oi,[Qt.codec])[0],qi,vr;sr&&(/^[asm]vc[1-9]$/i.test(Qt.codec)?(qi=sr.subarray(78),vr=Fs(qi.subarray(4,8)),vr==="avcC"&&qi.length>11?(Qt.codec+=".",Qt.codec+=ta(qi[9]),Qt.codec+=ta(qi[10]),Qt.codec+=ta(qi[11])):Qt.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(Qt.codec)?(qi=sr.subarray(28),vr=Fs(qi.subarray(4,8)),vr==="esds"&&qi.length>20&&qi[19]!==0?(Qt.codec+="."+ta(qi[19]),Qt.codec+="."+ta(qi[20]>>>2&63).replace(/^0/,"")):Qt.codec="mp4a.40.2"):Qt.codec=Qt.codec.toLowerCase())}var Sr=Hr(Vt,["mdia","mdhd"])[0];Sr&&(Qt.timescale=wa(Sr)),Yt.push(Qt)}),Yt},Ua=function(xt,$t=0){var Yt=Hr(xt,["emsg"]);return Yt.map(Vt=>{var Qt=Ca.parseEmsgBox(new Uint8Array(Vt)),ti=yo(Qt.message_data);return{cueTime:Ca.scaleTime(Qt.presentation_time,Qt.timescale,Qt.presentation_time_delta,$t),duration:Ca.scaleTime(Qt.event_duration,Qt.timescale),frames:ti}})};var Pa={findBox:Hr,parseType:Fs,timescale:La,startTime:Na,compositionStartTime:Fa,videoTrackIds:$a,tracks:Ba,getTimescaleFromMediaHeader:wa,getEmsgID3:Ua},Ia=Qn,Va=function(xt){var $t=xt[1]&31;return $t<<=8,$t|=xt[2],$t},ca=function(xt){return!!(xt[1]&64)},ha=function(xt){var $t=0;return(xt[3]&48)>>>4>1&&($t+=xt[4]+1),$t},vo=function(xt,$t){var Yt=Va(xt);return Yt===0?"pat":Yt===$t?"pmt":$t?"pes":null},_o=function(xt){var $t=ca(xt),Yt=4+ha(xt);return $t&&(Yt+=xt[Yt]+1),(xt[Yt+10]&31)<<8|xt[Yt+11]},bo=function(xt){var $t={},Yt=ca(xt),Vt=4+ha(xt);if(Yt&&(Vt+=xt[Vt]+1),!!(xt[Vt+5]&1)){var Qt,ti,fi;Qt=(xt[Vt+1]&15)<<8|xt[Vt+2],ti=3+Qt-4,fi=(xt[Vt+10]&15)<<8|xt[Vt+11];for(var yi=12+fi;yi<ti;){var _i=Vt+yi;$t[(xt[_i+1]&31)<<8|xt[_i+2]]=xt[_i],yi+=((xt[_i+3]&15)<<8|xt[_i+4])+5}return $t}},To=function(xt,$t){var Yt=Va(xt),Vt=$t[Yt];switch(Vt){case Ia.H264_STREAM_TYPE:return"video";case Ia.ADTS_STREAM_TYPE:return"audio";case Ia.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},So=function(xt){var $t=ca(xt);if(!$t)return null;var Yt=4+ha(xt);if(Yt>=xt.byteLength)return null;var Vt=null,Qt;return Qt=xt[Yt+7],Qt&192&&(Vt={},Vt.pts=(xt[Yt+9]&14)<<27|(xt[Yt+10]&255)<<20|(xt[Yt+11]&254)<<12|(xt[Yt+12]&255)<<5|(xt[Yt+13]&254)>>>3,Vt.pts*=4,Vt.pts+=(xt[Yt+13]&6)>>>1,Vt.dts=Vt.pts,Qt&64&&(Vt.dts=(xt[Yt+14]&14)<<27|(xt[Yt+15]&255)<<20|(xt[Yt+16]&254)<<12|(xt[Yt+17]&255)<<5|(xt[Yt+18]&254)>>>3,Vt.dts*=4,Vt.dts+=(xt[Yt+18]&6)>>>1)),Vt},Da=function(xt){switch(xt){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Eo=function(xt){for(var $t=4+ha(xt),Yt=xt.subarray($t),Vt=0,Qt=0,ti=!1,fi;Qt<Yt.byteLength-3;Qt++)if(Yt[Qt+2]===1){Vt=Qt+5;break}for(;Vt<Yt.byteLength;)switch(Yt[Vt]){case 0:if(Yt[Vt-1]!==0){Vt+=2;break}else if(Yt[Vt-2]!==0){Vt++;break}Qt+3!==Vt-2&&(fi=Da(Yt[Qt+3]&31),fi==="slice_layer_without_partitioning_rbsp_idr"&&(ti=!0));do Vt++;while(Yt[Vt]!==1&&Vt<Yt.length);Qt=Vt-2,Vt+=3;break;case 1:if(Yt[Vt-1]!==0||Yt[Vt-2]!==0){Vt+=3;break}fi=Da(Yt[Qt+3]&31),fi==="slice_layer_without_partitioning_rbsp_idr"&&(ti=!0),Qt=Vt-2,Vt+=3;break;default:Vt+=3;break}return Yt=Yt.subarray(Qt),Vt-=Qt,Qt=0,Yt&&Yt.byteLength>3&&(fi=Da(Yt[Qt+3]&31),fi==="slice_layer_without_partitioning_rbsp_idr"&&(ti=!0)),ti},xo={parseType:vo,parsePat:_o,parsePmt:bo,parsePayloadUnitStartIndicator:ca,parsePesType:To,parsePesTime:So,videoPacketContainsKeyFrame:Eo},ja=Qn,$s=ps.handleRollover,Or={};Or.ts=xo,Or.aac=Fr;var xs=xr.ONE_SECOND_IN_TS,rn=188,Mn=71,Co=function(xt,$t){for(var Yt=0,Vt=rn,Qt,ti;Vt<xt.byteLength;){if(xt[Yt]===Mn&&xt[Vt]===Mn){switch(Qt=xt.subarray(Yt,Vt),ti=Or.ts.parseType(Qt,$t.pid),ti){case"pat":$t.pid=Or.ts.parsePat(Qt);break;case"pmt":var fi=Or.ts.parsePmt(Qt);$t.table=$t.table||{},Object.keys(fi).forEach(function(yi){$t.table[yi]=fi[yi]});break}Yt+=rn,Vt+=rn;continue}Yt++,Vt++}},Ha=function(xt,$t,Yt){for(var Vt=0,Qt=rn,ti,fi,yi,_i,Ti,wi=!1;Qt<=xt.byteLength;){if(xt[Vt]===Mn&&(xt[Qt]===Mn||Qt===xt.byteLength)){switch(ti=xt.subarray(Vt,Qt),fi=Or.ts.parseType(ti,$t.pid),fi){case"pes":yi=Or.ts.parsePesType(ti,$t.table),_i=Or.ts.parsePayloadUnitStartIndicator(ti),yi==="audio"&&_i&&(Ti=Or.ts.parsePesTime(ti),Ti&&(Ti.type="audio",Yt.audio.push(Ti),wi=!0));break}if(wi)break;Vt+=rn,Qt+=rn;continue}Vt++,Qt++}for(Qt=xt.byteLength,Vt=Qt-rn,wi=!1;Vt>=0;){if(xt[Vt]===Mn&&(xt[Qt]===Mn||Qt===xt.byteLength)){switch(ti=xt.subarray(Vt,Qt),fi=Or.ts.parseType(ti,$t.pid),fi){case"pes":yi=Or.ts.parsePesType(ti,$t.table),_i=Or.ts.parsePayloadUnitStartIndicator(ti),yi==="audio"&&_i&&(Ti=Or.ts.parsePesTime(ti),Ti&&(Ti.type="audio",Yt.audio.push(Ti),wi=!0));break}if(wi)break;Vt-=rn,Qt-=rn;continue}Vt--,Qt--}},wo=function(xt,$t,Yt){for(var Vt=0,Qt=rn,ti,fi,yi,_i,Ti,wi,Oi,sr,qi=!1,vr={data:[],size:0};Qt<xt.byteLength;){if(xt[Vt]===Mn&&xt[Qt]===Mn){switch(ti=xt.subarray(Vt,Qt),fi=Or.ts.parseType(ti,$t.pid),fi){case"pes":if(yi=Or.ts.parsePesType(ti,$t.table),_i=Or.ts.parsePayloadUnitStartIndicator(ti),yi==="video"&&(_i&&!qi&&(Ti=Or.ts.parsePesTime(ti),Ti&&(Ti.type="video",Yt.video.push(Ti),qi=!0)),!Yt.firstKeyFrame)){if(_i&&vr.size!==0){for(wi=new Uint8Array(vr.size),Oi=0;vr.data.length;)sr=vr.data.shift(),wi.set(sr,Oi),Oi+=sr.byteLength;if(Or.ts.videoPacketContainsKeyFrame(wi)){var Sr=Or.ts.parsePesTime(wi);Sr?(Yt.firstKeyFrame=Sr,Yt.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}vr.size=0}vr.data.push(ti),vr.size+=ti.byteLength}break}if(qi&&Yt.firstKeyFrame)break;Vt+=rn,Qt+=rn;continue}Vt++,Qt++}for(Qt=xt.byteLength,Vt=Qt-rn,qi=!1;Vt>=0;){if(xt[Vt]===Mn&&xt[Qt]===Mn){switch(ti=xt.subarray(Vt,Qt),fi=Or.ts.parseType(ti,$t.pid),fi){case"pes":yi=Or.ts.parsePesType(ti,$t.table),_i=Or.ts.parsePayloadUnitStartIndicator(ti),yi==="video"&&_i&&(Ti=Or.ts.parsePesTime(ti),Ti&&(Ti.type="video",Yt.video.push(Ti),qi=!0));break}if(qi)break;Vt-=rn,Qt-=rn;continue}Vt--,Qt--}},Ao=function(xt,$t){if(xt.audio&&xt.audio.length){var Yt=$t;(typeof Yt>"u"||isNaN(Yt))&&(Yt=xt.audio[0].dts),xt.audio.forEach(function(ti){ti.dts=$s(ti.dts,Yt),ti.pts=$s(ti.pts,Yt),ti.dtsTime=ti.dts/xs,ti.ptsTime=ti.pts/xs})}if(xt.video&&xt.video.length){var Vt=$t;if((typeof Vt>"u"||isNaN(Vt))&&(Vt=xt.video[0].dts),xt.video.forEach(function(ti){ti.dts=$s(ti.dts,Vt),ti.pts=$s(ti.pts,Vt),ti.dtsTime=ti.dts/xs,ti.ptsTime=ti.pts/xs}),xt.firstKeyFrame){var Qt=xt.firstKeyFrame;Qt.dts=$s(Qt.dts,Vt),Qt.pts=$s(Qt.pts,Vt),Qt.dtsTime=Qt.dts/xs,Qt.ptsTime=Qt.pts/xs}}},Po=function(xt){for(var $t=!1,Yt=0,Vt=null,Qt=null,ti=0,fi=0,yi;xt.length-fi>=3;){var _i=Or.aac.parseType(xt,fi);switch(_i){case"timed-metadata":if(xt.length-fi<10){$t=!0;break}if(ti=Or.aac.parseId3TagSize(xt,fi),ti>xt.length){$t=!0;break}Qt===null&&(yi=xt.subarray(fi,fi+ti),Qt=Or.aac.parseAacTimestamp(yi)),fi+=ti;break;case"audio":if(xt.length-fi<7){$t=!0;break}if(ti=Or.aac.parseAdtsSize(xt,fi),ti>xt.length){$t=!0;break}Vt===null&&(yi=xt.subarray(fi,fi+ti),Vt=Or.aac.parseSampleRate(yi)),Yt++,fi+=ti;break;default:fi++;break}if($t)return null}if(Vt===null||Qt===null)return null;var Ti=xs/Vt,wi={audio:[{type:"audio",dts:Qt,pts:Qt},{type:"audio",dts:Qt+Yt*1024*Ti,pts:Qt+Yt*1024*Ti}]};return wi},Io=function(xt){var $t={pid:null,table:null},Yt={};Co(xt,$t);for(var Vt in $t.table)if($t.table.hasOwnProperty(Vt)){var Qt=$t.table[Vt];switch(Qt){case ja.H264_STREAM_TYPE:Yt.video=[],wo(xt,$t,Yt),Yt.video.length===0&&delete Yt.video;break;case ja.ADTS_STREAM_TYPE:Yt.audio=[],Ha(xt,$t,Yt),Yt.audio.length===0&&delete Yt.audio;break}}return Yt},Do=function(xt,$t){var Yt=Or.aac.isLikelyAacData(xt),Vt;return Yt?Vt=Po(xt):Vt=Io(xt),!Vt||!Vt.audio&&!Vt.video?null:(Ao(Vt,$t),Vt)},ko={inspect:Do,parseAudioPes_:Ha};const Ro=function(xt,$t){$t.on("data",function(Yt){const Vt=Yt.initSegment;Yt.initSegment={data:Vt.buffer,byteOffset:Vt.byteOffset,byteLength:Vt.byteLength};const Qt=Yt.data;Yt.data=Qt.buffer,xt.postMessage({action:"data",segment:Yt,byteOffset:Qt.byteOffset,byteLength:Qt.byteLength},[Yt.data])}),$t.on("done",function(Yt){xt.postMessage({action:"done"})}),$t.on("gopInfo",function(Yt){xt.postMessage({action:"gopInfo",gopInfo:Yt})}),$t.on("videoSegmentTimingInfo",function(Yt){const Vt={start:{decode:xr.videoTsToSeconds(Yt.start.dts),presentation:xr.videoTsToSeconds(Yt.start.pts)},end:{decode:xr.videoTsToSeconds(Yt.end.dts),presentation:xr.videoTsToSeconds(Yt.end.pts)},baseMediaDecodeTime:xr.videoTsToSeconds(Yt.baseMediaDecodeTime)};Yt.prependedContentDuration&&(Vt.prependedContentDuration=xr.videoTsToSeconds(Yt.prependedContentDuration)),xt.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:Vt})}),$t.on("audioSegmentTimingInfo",function(Yt){const Vt={start:{decode:xr.videoTsToSeconds(Yt.start.dts),presentation:xr.videoTsToSeconds(Yt.start.pts)},end:{decode:xr.videoTsToSeconds(Yt.end.dts),presentation:xr.videoTsToSeconds(Yt.end.pts)},baseMediaDecodeTime:xr.videoTsToSeconds(Yt.baseMediaDecodeTime)};Yt.prependedContentDuration&&(Vt.prependedContentDuration=xr.videoTsToSeconds(Yt.prependedContentDuration)),xt.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:Vt})}),$t.on("id3Frame",function(Yt){xt.postMessage({action:"id3Frame",id3Frame:Yt})}),$t.on("caption",function(Yt){xt.postMessage({action:"caption",caption:Yt})}),$t.on("trackinfo",function(Yt){xt.postMessage({action:"trackinfo",trackInfo:Yt})}),$t.on("audioTimingInfo",function(Yt){xt.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:xr.videoTsToSeconds(Yt.start),end:xr.videoTsToSeconds(Yt.end)}})}),$t.on("videoTimingInfo",function(Yt){xt.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:xr.videoTsToSeconds(Yt.start),end:xr.videoTsToSeconds(Yt.end)}})}),$t.on("log",function(Yt){xt.postMessage({action:"log",log:Yt})})};class qa{constructor($t,Yt){this.options=Yt||{},this.self=$t,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ui.Transmuxer(this.options),Ro(this.self,this.transmuxer)}pushMp4Captions($t){this.captionParser||(this.captionParser=new no,this.captionParser.init());const Yt=new Uint8Array($t.data,$t.byteOffset,$t.byteLength),Vt=this.captionParser.parse(Yt,$t.trackIds,$t.timescales);this.self.postMessage({action:"mp4Captions",captions:Vt&&Vt.captions||[],logs:Vt&&Vt.logs||[],data:Yt.buffer},[Yt.buffer])}probeMp4StartTime({timescales:$t,data:Yt}){const Vt=Pa.startTime($t,Yt);this.self.postMessage({action:"probeMp4StartTime",startTime:Vt,data:Yt},[Yt.buffer])}probeMp4Tracks({data:$t}){const Yt=Pa.tracks($t);this.self.postMessage({action:"probeMp4Tracks",tracks:Yt,data:$t},[$t.buffer])}probeEmsgID3({data:$t,offset:Yt}){const Vt=Pa.getEmsgID3($t,Yt);this.self.postMessage({action:"probeEmsgID3",id3Frames:Vt,emsgData:$t},[$t.buffer])}probeTs({data:$t,baseStartTime:Yt}){const Vt=typeof Yt=="number"&&!isNaN(Yt)?Yt*xr.ONE_SECOND_IN_TS:void 0,Qt=ko.inspect($t,Vt);let ti=null;Qt&&(ti={hasVideo:Qt.video&&Qt.video.length===2||!1,hasAudio:Qt.audio&&Qt.audio.length===2||!1},ti.hasVideo&&(ti.videoStart=Qt.video[0].ptsTime),ti.hasAudio&&(ti.audioStart=Qt.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:ti,data:$t},[$t.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push($t){const Yt=new Uint8Array($t.data,$t.byteOffset,$t.byteLength);this.transmuxer.push(Yt)}reset(){this.transmuxer.reset()}setTimestampOffset($t){const Yt=$t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(xr.secondsToVideoTs(Yt)))}setAudioAppendStart($t){this.transmuxer.setAudioAppendStart(Math.ceil(xr.secondsToVideoTs($t.appendStart)))}setRemux($t){this.transmuxer.setRemux($t.remux)}flush($t){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith($t){this.transmuxer.alignGopsWith($t.gopsToAlignWith.slice())}}self.onmessage=function(xt){if(xt.data.action==="init"&&xt.data.options){this.messageHandlers=new qa(self,xt.data.options);return}this.messageHandlers||(this.messageHandlers=new qa(self)),xt.data&&xt.data.action&&xt.data.action!=="init"&&this.messageHandlers[xt.data.action]&&this.messageHandlers[xt.data.action](xt.data)}}));var TransmuxWorker=factory(workerCode$1);const handleData_=(E,S,x)=>{const{type:C,initSegment:R,captions:Ce,captionStreams:Ue,metadata:je,videoFrameDtsTime:Xe,videoFramePtsTime:Ye}=E.data.segment;S.buffer.push({captions:Ce,captionStreams:Ue,metadata:je});const et=E.data.segment.boxes||{data:E.data.segment.data},ht={type:C,data:new Uint8Array(et.data,et.data.byteOffset,et.data.byteLength),initSegment:new Uint8Array(R.data,R.byteOffset,R.byteLength)};typeof Xe<"u"&&(ht.videoFrameDtsTime=Xe),typeof Ye<"u"&&(ht.videoFramePtsTime=Ye),x(ht)},handleDone_=({transmuxedData:E,callback:S})=>{E.buffer=[],S(E)},handleGopInfo_=(E,S)=>{S.gopInfo=E.data.gopInfo},processTransmux=E=>{const{transmuxer:S,bytes:x,audioAppendStart:C,gopsToAlignWith:R,remux:Ce,onData:Ue,onTrackInfo:je,onAudioTimingInfo:Xe,onVideoTimingInfo:Ye,onVideoSegmentTimingInfo:et,onAudioSegmentTimingInfo:ht,onId3:Dt,onCaptions:Ot,onDone:Mt,onEndedTimeline:St,onTransmuxerLog:Ut,isEndOfTimeline:kt,segment:Ft,triggerSegmentEventFn:Nt}=E,Gt={buffer:[]};let Zt=kt;const ri=hi=>{S.currentTransmux===E&&(hi.data.action==="data"&&handleData_(hi,Gt,Ue),hi.data.action==="trackinfo"&&je(hi.data.trackInfo),hi.data.action==="gopInfo"&&handleGopInfo_(hi,Gt),hi.data.action==="audioTimingInfo"&&Xe(hi.data.audioTimingInfo),hi.data.action==="videoTimingInfo"&&Ye(hi.data.videoTimingInfo),hi.data.action==="videoSegmentTimingInfo"&&et(hi.data.videoSegmentTimingInfo),hi.data.action==="audioSegmentTimingInfo"&&ht(hi.data.audioSegmentTimingInfo),hi.data.action==="id3Frame"&&Dt([hi.data.id3Frame],hi.data.id3Frame.dispatchType),hi.data.action==="caption"&&Ot(hi.data.caption),hi.data.action==="endedtimeline"&&(Zt=!1,St()),hi.data.action==="log"&&Ut(hi.data.log),hi.data.type==="transmuxed"&&(Zt||(S.onmessage=null,handleDone_({transmuxedData:Gt,callback:Mt}),dequeue(S))))},li=()=>{const hi={message:"Received an error message from the transmuxer worker",metadata:{errorType:videojs.Error.StreamingFailedToTransmuxSegment,segmentInfo:segmentInfoPayload({segment:Ft})}};Mt(null,hi)};if(S.onmessage=ri,S.onerror=li,C&&S.postMessage({action:"setAudioAppendStart",appendStart:C}),Array.isArray(R)&&S.postMessage({action:"alignGopsWith",gopsToAlignWith:R}),typeof Ce<"u"&&S.postMessage({action:"setRemux",remux:Ce}),x.byteLength){const hi=x instanceof ArrayBuffer?x:x.buffer,xi=x instanceof ArrayBuffer?0:x.byteOffset;Nt({type:"segmenttransmuxingstart",segment:Ft}),S.postMessage({action:"push",data:hi,byteOffset:xi,byteLength:x.byteLength},[hi])}kt&&S.postMessage({action:"endTimeline"}),S.postMessage({action:"flush"})},dequeue=E=>{E.currentTransmux=null,E.transmuxQueue.length&&(E.currentTransmux=E.transmuxQueue.shift(),typeof E.currentTransmux=="function"?E.currentTransmux():processTransmux(E.currentTransmux))},processAction=(E,S)=>{E.postMessage({action:S}),dequeue(E)},enqueueAction=(E,S)=>{if(!S.currentTransmux){S.currentTransmux=E,processAction(S,E);return}S.transmuxQueue.push(processAction.bind(null,S,E))},reset=E=>{enqueueAction("reset",E)},endTimeline=E=>{enqueueAction("endTimeline",E)},transmux=E=>{if(!E.transmuxer.currentTransmux){E.transmuxer.currentTransmux=E,processTransmux(E);return}E.transmuxer.transmuxQueue.push(E)},createTransmuxer=E=>{const S=new TransmuxWorker;S.currentTransmux=null,S.transmuxQueue=[];const x=S.terminate;return S.terminate=()=>(S.currentTransmux=null,S.transmuxQueue.length=0,x.call(S)),S.postMessage({action:"init",options:E}),S};var segmentTransmuxer={reset,endTimeline,transmux,createTransmuxer};const workerCallback=function(E){const S=E.transmuxer,x=E.endAction||E.action,C=E.callback,R=_extends$3({},E,{endAction:null,transmuxer:null,callback:null}),Ce=Ue=>{Ue.data.action===x&&(S.removeEventListener("message",Ce),Ue.data.data&&(Ue.data.data=new Uint8Array(Ue.data.data,E.byteOffset||0,E.byteLength||Ue.data.data.byteLength),E.data&&(E.data=Ue.data.data)),C(Ue.data))};if(S.addEventListener("message",Ce),E.data){const Ue=E.data instanceof ArrayBuffer;R.byteOffset=Ue?0:E.data.byteOffset,R.byteLength=E.data.byteLength;const je=[Ue?E.data:E.data.buffer];S.postMessage(R,je)}else S.postMessage(R)},REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102},abortAll=E=>{E.forEach(S=>{S.abort()})},getRequestStats=E=>({bandwidth:E.bandwidth,bytesReceived:E.bytesReceived||0,roundTripTime:E.roundTripTime||0}),getProgressStats=E=>{const S=E.target,C={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-S.requestTime||0};return C.bytesReceived=E.loaded,C.bandwidth=Math.floor(C.bytesReceived/C.roundTripTime*8*1e3),C},handleErrors=(E,S)=>{const{requestType:x}=S,C=getStreamingNetworkErrorMetadata({requestType:x,request:S,error:E});return S.timedout?{status:S.status,message:"HLS request timed-out at URL: "+S.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:S,metadata:C}:S.aborted?{status:S.status,message:"HLS request aborted at URL: "+S.uri,code:REQUEST_ERRORS.ABORTED,xhr:S,metadata:C}:E?{status:S.status,message:"HLS request errored at URL: "+S.uri,code:REQUEST_ERRORS.FAILURE,xhr:S,metadata:C}:S.responseType==="arraybuffer"&&S.response.byteLength===0?{status:S.status,message:"Empty HLS response at URL: "+S.uri,code:REQUEST_ERRORS.FAILURE,xhr:S,metadata:C}:null},handleKeyResponse=(E,S,x,C)=>(R,Ce)=>{const Ue=Ce.response,je=handleErrors(R,Ce);if(je)return x(je,E);if(Ue.byteLength!==16)return x({status:Ce.status,message:"Invalid HLS key at URL: "+Ce.uri,code:REQUEST_ERRORS.FAILURE,xhr:Ce},E);const Xe=new DataView(Ue),Ye=new Uint32Array([Xe.getUint32(0),Xe.getUint32(4),Xe.getUint32(8),Xe.getUint32(12)]);for(let ht=0;ht<S.length;ht++)S[ht].bytes=Ye;const et={uri:Ce.uri};return C({type:"segmentkeyloadcomplete",segment:E,keyInfo:et}),x(null,E)},parseInitSegment=(E,S)=>{const x=detectContainerForBytes(E.map.bytes);if(x!=="mp4"){const C=E.map.resolvedUri||E.map.uri,R=x||"unknown";return S({internal:!0,message:`Found unsupported ${R} container for initialization segment at URL: ${C}`,code:REQUEST_ERRORS.FAILURE,metadata:{mediaType:R}})}workerCallback({action:"probeMp4Tracks",data:E.map.bytes,transmuxer:E.transmuxer,callback:({tracks:C,data:R})=>(E.map.bytes=R,C.forEach(function(Ce){E.map.tracks=E.map.tracks||{},!E.map.tracks[Ce.type]&&(E.map.tracks[Ce.type]=Ce,typeof Ce.id=="number"&&Ce.timescale&&(E.map.timescales=E.map.timescales||{},E.map.timescales[Ce.id]=Ce.timescale))}),S(null))})},handleInitSegmentResponse=({segment:E,finishProcessingFn:S,triggerSegmentEventFn:x})=>(C,R)=>{const Ce=handleErrors(C,R);if(Ce)return S(Ce,E);const Ue=new Uint8Array(R.response);if(x({type:"segmentloaded",segment:E}),E.map.key)return E.map.encryptedBytes=Ue,S(null,E);E.map.bytes=Ue,parseInitSegment(E,function(je){if(je)return je.xhr=R,je.status=R.status,S(je,E);S(null,E)})},handleSegmentResponse=({segment:E,finishProcessingFn:S,responseType:x,triggerSegmentEventFn:C})=>(R,Ce)=>{const Ue=handleErrors(R,Ce);if(Ue)return S(Ue,E);C({type:"segmentloaded",segment:E});const je=x==="arraybuffer"||!Ce.responseText?Ce.response:stringToArrayBuffer(Ce.responseText.substring(E.lastReachedChar||0));return E.stats=getRequestStats(Ce),E.key?E.encryptedBytes=new Uint8Array(je):E.bytes=new Uint8Array(je),S(null,E)},transmuxAndNotify=({segment:E,bytes:S,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot})=>{const Mt=E.map&&E.map.tracks||{},St=!!(Mt.audio&&Mt.video);let Ut=C.bind(null,E,"audio","start");const kt=C.bind(null,E,"audio","end");let Ft=C.bind(null,E,"video","start");const Nt=C.bind(null,E,"video","end"),Gt=()=>transmux({bytes:S,transmuxer:E.transmuxer,audioAppendStart:E.audioAppendStart,gopsToAlignWith:E.gopsToAlignWith,remux:St,onData:Zt=>{Zt.type=Zt.type==="combined"?"video":Zt.type,et(E,Zt)},onTrackInfo:Zt=>{x&&(St&&(Zt.isMuxed=!0),x(E,Zt))},onAudioTimingInfo:Zt=>{Ut&&typeof Zt.start<"u"&&(Ut(Zt.start),Ut=null),kt&&typeof Zt.end<"u"&&kt(Zt.end)},onVideoTimingInfo:Zt=>{Ft&&typeof Zt.start<"u"&&(Ft(Zt.start),Ft=null),Nt&&typeof Zt.end<"u"&&Nt(Zt.end)},onVideoSegmentTimingInfo:Zt=>{const ri={pts:{start:Zt.start.presentation,end:Zt.end.presentation},dts:{start:Zt.start.decode,end:Zt.end.decode}};Ot({type:"segmenttransmuxingtiminginfoavailable",segment:E,timingInfo:ri}),R(Zt)},onAudioSegmentTimingInfo:Zt=>{const ri={pts:{start:Zt.start.pts,end:Zt.end.pts},dts:{start:Zt.start.dts,end:Zt.end.dts}};Ot({type:"segmenttransmuxingtiminginfoavailable",segment:E,timingInfo:ri}),Ce(Zt)},onId3:(Zt,ri)=>{Ue(E,Zt,ri)},onCaptions:Zt=>{je(E,[Zt])},isEndOfTimeline:Xe,onEndedTimeline:()=>{Ye()},onTransmuxerLog:Dt,onDone:(Zt,ri)=>{ht&&(Zt.type=Zt.type==="combined"?"video":Zt.type,Ot({type:"segmenttransmuxingcomplete",segment:E}),ht(ri,E,Zt))},segment:E,triggerSegmentEventFn:Ot});workerCallback({action:"probeTs",transmuxer:E.transmuxer,data:S,baseStartTime:E.baseStartTime,callback:Zt=>{E.bytes=S=Zt.data;const ri=Zt.result;ri&&(x(E,{hasAudio:ri.hasAudio,hasVideo:ri.hasVideo,isMuxed:St}),x=null),Gt()}})},handleSegmentBytes=({segment:E,bytes:S,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot})=>{let Mt=new Uint8Array(S);if(isLikelyFmp4MediaSegment(Mt)){E.isFmp4=!0;const{tracks:St}=E.map,Ut={isFmp4:!0,hasVideo:!!St.video,hasAudio:!!St.audio};St.audio&&St.audio.codec&&St.audio.codec!=="enca"&&(Ut.audioCodec=St.audio.codec),St.video&&St.video.codec&&St.video.codec!=="encv"&&(Ut.videoCodec=St.video.codec),St.video&&St.audio&&(Ut.isMuxed=!0),x(E,Ut);const kt=(Ft,Nt)=>{et(E,{data:Mt,type:Ut.hasAudio&&!Ut.isMuxed?"audio":"video"}),Nt&&Nt.length&&Ue(E,Nt),Ft&&Ft.length&&je(E,Ft),ht(null,E,{})};workerCallback({action:"probeMp4StartTime",timescales:E.map.timescales,data:Mt,transmuxer:E.transmuxer,callback:({data:Ft,startTime:Nt})=>{S=Ft.buffer,E.bytes=Mt=Ft,Ut.hasAudio&&!Ut.isMuxed&&C(E,"audio","start",Nt),Ut.hasVideo&&C(E,"video","start",Nt),workerCallback({action:"probeEmsgID3",data:Mt,transmuxer:E.transmuxer,offset:Nt,callback:({emsgData:Gt,id3Frames:Zt})=>{if(S=Gt.buffer,E.bytes=Mt=Gt,!St.video||!Gt.byteLength||!E.transmuxer){kt(void 0,Zt);return}workerCallback({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:E.transmuxer,data:Mt,timescales:E.map.timescales,trackIds:[St.video.id],callback:ri=>{S=ri.data.buffer,E.bytes=Mt=ri.data,ri.logs.forEach(function(li){Dt(merge(li,{stream:"mp4CaptionParser"}))}),kt(ri.captions,Zt)}})}})}});return}if(!E.transmuxer){ht(null,E,{});return}if(typeof E.container>"u"&&(E.container=detectContainerForBytes(Mt)),E.container!=="ts"&&E.container!=="aac"){x(E,{hasAudio:!1,hasVideo:!1}),ht(null,E,{});return}transmuxAndNotify({segment:E,bytes:S,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot})},decrypt=function({id:E,key:S,encryptedBytes:x,decryptionWorker:C,segment:R,doneFn:Ce},Ue){const je=Ye=>{if(Ye.data.source===E){C.removeEventListener("message",je);const et=Ye.data.decrypted;Ue(new Uint8Array(et.bytes,et.byteOffset,et.byteLength))}};C.onerror=()=>{const Ye="An error occurred in the decryption worker",et=segmentInfoPayload({segment:R}),ht={message:Ye,metadata:{error:new Error(Ye),errorType:videojs.Error.StreamingFailedToDecryptSegment,segmentInfo:et,keyInfo:{uri:R.key.resolvedUri||R.map.key.resolvedUri}}};Ce(ht,R)},C.addEventListener("message",je);let Xe;S.bytes.slice?Xe=S.bytes.slice():Xe=new Uint32Array(Array.prototype.slice.call(S.bytes)),C.postMessage(createTransferableMessage({source:E,encrypted:x,key:Xe,iv:S.iv}),[x.buffer,Xe.buffer])},decryptSegment=({decryptionWorker:E,segment:S,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot})=>{Ot({type:"segmentdecryptionstart"}),decrypt({id:S.requestId,key:S.key,encryptedBytes:S.encryptedBytes,decryptionWorker:E,segment:S,doneFn:ht},Mt=>{S.bytes=Mt,Ot({type:"segmentdecryptioncomplete",segment:S}),handleSegmentBytes({segment:S,bytes:S.bytes,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot})})},waitForCompletion=({activeXhrs:E,decryptionWorker:S,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot})=>{let Mt=0,St=!1;return(Ut,kt)=>{if(!St){if(Ut)return St=!0,abortAll(E),ht(Ut,kt);if(Mt+=1,Mt===E.length){const Ft=function(){if(kt.encryptedBytes)return decryptSegment({decryptionWorker:S,segment:kt,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot});handleSegmentBytes({segment:kt,bytes:kt.bytes,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et,doneFn:ht,onTransmuxerLog:Dt,triggerSegmentEventFn:Ot})};if(kt.endOfAllRequests=Date.now(),kt.map&&kt.map.encryptedBytes&&!kt.map.bytes)return Ot({type:"segmentdecryptionstart",segment:kt}),decrypt({decryptionWorker:S,id:kt.requestId+"-init",encryptedBytes:kt.map.encryptedBytes,key:kt.map.key,segment:kt,doneFn:ht},Nt=>{kt.map.bytes=Nt,Ot({type:"segmentdecryptioncomplete",segment:kt}),parseInitSegment(kt,Gt=>{if(Gt)return abortAll(E),ht(Gt,kt);Ft()})});Ft()}}}},handleLoadEnd=({loadendState:E,abortFn:S})=>x=>{x.target.aborted&&S&&!E.calledAbortFn&&(S(),E.calledAbortFn=!0)},handleProgress=({segment:E,progressFn:S,trackInfoFn:x,timingInfoFn:C,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:Ce,id3Fn:Ue,captionsFn:je,isEndOfTimeline:Xe,endedTimelineFn:Ye,dataFn:et})=>ht=>{if(!ht.target.aborted)return E.stats=merge(E.stats,getProgressStats(ht)),!E.stats.firstBytesReceivedAt&&E.stats.bytesReceived&&(E.stats.firstBytesReceivedAt=Date.now()),S(ht,E)},mediaSegmentRequest=({xhr:E,xhrOptions:S,decryptionWorker:x,segment:C,abortFn:R,progressFn:Ce,trackInfoFn:Ue,timingInfoFn:je,videoSegmentTimingInfoFn:Xe,audioSegmentTimingInfoFn:Ye,id3Fn:et,captionsFn:ht,isEndOfTimeline:Dt,endedTimelineFn:Ot,dataFn:Mt,doneFn:St,onTransmuxerLog:Ut,triggerSegmentEventFn:kt})=>{const Ft=[],Nt=waitForCompletion({activeXhrs:Ft,decryptionWorker:x,trackInfoFn:Ue,timingInfoFn:je,videoSegmentTimingInfoFn:Xe,audioSegmentTimingInfoFn:Ye,id3Fn:et,captionsFn:ht,isEndOfTimeline:Dt,endedTimelineFn:Ot,dataFn:Mt,doneFn:St,onTransmuxerLog:Ut,triggerSegmentEventFn:kt});if(C.key&&!C.key.bytes){const hi=[C.key];C.map&&!C.map.bytes&&C.map.key&&C.map.key.resolvedUri===C.key.resolvedUri&&hi.push(C.map.key);const xi=merge(S,{uri:C.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),$i=handleKeyResponse(C,hi,Nt,kt),Mi={uri:C.key.resolvedUri};kt({type:"segmentkeyloadstart",segment:C,keyInfo:Mi});const Di=E(xi,$i);Ft.push(Di)}if(C.map&&!C.map.bytes){if(C.map.key&&(!C.key||C.key.resolvedUri!==C.map.key.resolvedUri)){const Di=merge(S,{uri:C.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),ki=handleKeyResponse(C,[C.map.key],Nt,kt),ji={uri:C.map.key.resolvedUri};kt({type:"segmentkeyloadstart",segment:C,keyInfo:ji});const Ri=E(Di,ki);Ft.push(Ri)}const xi=merge(S,{uri:C.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(C.map),requestType:"segment-media-initialization"}),$i=handleInitSegmentResponse({segment:C,finishProcessingFn:Nt,triggerSegmentEventFn:kt});kt({type:"segmentloadstart",segment:C});const Mi=E(xi,$i);Ft.push(Mi)}const Gt=merge(S,{uri:C.part&&C.part.resolvedUri||C.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(C),requestType:"segment"}),Zt=handleSegmentResponse({segment:C,finishProcessingFn:Nt,responseType:Gt.responseType,triggerSegmentEventFn:kt});kt({type:"segmentloadstart",segment:C});const ri=E(Gt,Zt);ri.addEventListener("progress",handleProgress({segment:C,progressFn:Ce,trackInfoFn:Ue,timingInfoFn:je,videoSegmentTimingInfoFn:Xe,audioSegmentTimingInfoFn:Ye,id3Fn:et,captionsFn:ht,isEndOfTimeline:Dt,endedTimelineFn:Ot,dataFn:Mt})),Ft.push(ri);const li={};return Ft.forEach(hi=>{hi.addEventListener("loadend",handleLoadEnd({loadendState:li,abortFn:R}))}),()=>abortAll(Ft)},logFn$1=logger("CodecUtils"),getCodecs=function(E){const S=E.attributes||{};if(S.CODECS)return parseCodecs(S.CODECS)},isMaat=(E,S)=>{const x=S.attributes||{};return E&&E.mediaGroups&&E.mediaGroups.AUDIO&&x.AUDIO&&E.mediaGroups.AUDIO[x.AUDIO]},isMuxed=(E,S)=>{if(!isMaat(E,S))return!0;const x=S.attributes||{},C=E.mediaGroups.AUDIO[x.AUDIO];for(const R in C)if(!C[R].uri&&!C[R].playlists)return!0;return!1},unwrapCodecList=function(E){const S={};return E.forEach(({mediaType:x,type:C,details:R})=>{S[x]=S[x]||[],S[x].push(translateLegacyCodec(`${C}${R}`))}),Object.keys(S).forEach(function(x){if(S[x].length>1){logFn$1(`multiple ${x} codecs found as attributes: ${S[x].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),S[x]=null;return}S[x]=S[x][0]}),S},codecCount=function(E){let S=0;return E.audio&&S++,E.video&&S++,S},codecsForPlaylist=function(E,S){const x=S.attributes||{},C=unwrapCodecList(getCodecs(S)||[]);if(isMaat(E,S)&&!C.audio&&!isMuxed(E,S)){const R=unwrapCodecList(codecsFromDefault(E,x.AUDIO)||[]);R.audio&&(C.audio=R.audio)}return C},logFn=logger("PlaylistSelector"),representationToString=function(E){if(!E||!E.playlist)return;const S=E.playlist;return JSON.stringify({id:S.id,bandwidth:E.bandwidth,width:E.width,height:E.height,codecs:S.attributes&&S.attributes.CODECS||""})},safeGetComputedStyle=function(E,S){if(!E)return"";const x=window$1$1.getComputedStyle(E);return x?x[S]:""},stableSort=function(E,S){const x=E.slice();E.sort(function(C,R){const Ce=S(C,R);return Ce===0?x.indexOf(C)-x.indexOf(R):Ce})},comparePlaylistBandwidth=function(E,S){let x,C;return E.attributes.BANDWIDTH&&(x=E.attributes.BANDWIDTH),x=x||window$1$1.Number.MAX_VALUE,S.attributes.BANDWIDTH&&(C=S.attributes.BANDWIDTH),C=C||window$1$1.Number.MAX_VALUE,x-C},comparePlaylistResolution=function(E,S){let x,C;return E.attributes.RESOLUTION&&E.attributes.RESOLUTION.width&&(x=E.attributes.RESOLUTION.width),x=x||window$1$1.Number.MAX_VALUE,S.attributes.RESOLUTION&&S.attributes.RESOLUTION.width&&(C=S.attributes.RESOLUTION.width),C=C||window$1$1.Number.MAX_VALUE,x===C&&E.attributes.BANDWIDTH&&S.attributes.BANDWIDTH?E.attributes.BANDWIDTH-S.attributes.BANDWIDTH:x-C};let simpleSelector=function(E,S,x,C,R,Ce){if(!E)return;const Ue={bandwidth:S,width:x,height:C,limitRenditionByPlayerDimensions:R};let je=E.playlists;Playlist.isAudioOnly(E)&&(je=Ce.getAudioTrackPlaylists_(),Ue.audioOnly=!0);let Xe=je.map(Zt=>{let ri;const li=Zt.attributes&&Zt.attributes.RESOLUTION&&Zt.attributes.RESOLUTION.width,hi=Zt.attributes&&Zt.attributes.RESOLUTION&&Zt.attributes.RESOLUTION.height;return ri=Zt.attributes&&Zt.attributes.BANDWIDTH,ri=ri||window$1$1.Number.MAX_VALUE,{bandwidth:ri,width:li,height:hi,playlist:Zt}});stableSort(Xe,(Zt,ri)=>Zt.bandwidth-ri.bandwidth),Xe=Xe.filter(Zt=>!Playlist.isIncompatible(Zt.playlist));let Ye=Xe.filter(Zt=>Playlist.isEnabled(Zt.playlist));Ye.length||(Ye=Xe.filter(Zt=>!Playlist.isDisabled(Zt.playlist)));const et=Ye.filter(Zt=>Zt.bandwidth*Config.BANDWIDTH_VARIANCE<S);let ht=et[et.length-1];const Dt=et.filter(Zt=>Zt.bandwidth===ht.bandwidth)[0];if(R===!1){const Zt=Dt||Ye[0]||Xe[0];if(Zt&&Zt.playlist){let ri="sortedPlaylistReps";return Dt&&(ri="bandwidthBestRep"),Ye[0]&&(ri="enabledPlaylistReps"),logFn(`choosing ${representationToString(Zt)} using ${ri} with options`,Ue),Zt.playlist}return logFn("could not choose a playlist with options",Ue),null}const Ot=et.filter(Zt=>Zt.width&&Zt.height);stableSort(Ot,(Zt,ri)=>Zt.width-ri.width);const Mt=Ot.filter(Zt=>Zt.width===x&&Zt.height===C);ht=Mt[Mt.length-1];const St=Mt.filter(Zt=>Zt.bandwidth===ht.bandwidth)[0];let Ut,kt,Ft;St||(Ut=Ot.filter(Zt=>Zt.width>x||Zt.height>C),kt=Ut.filter(Zt=>Zt.width===Ut[0].width&&Zt.height===Ut[0].height),ht=kt[kt.length-1],Ft=kt.filter(Zt=>Zt.bandwidth===ht.bandwidth)[0]);let Nt;if(Ce.leastPixelDiffSelector){const Zt=Ot.map(ri=>(ri.pixelDiff=Math.abs(ri.width-x)+Math.abs(ri.height-C),ri));stableSort(Zt,(ri,li)=>ri.pixelDiff===li.pixelDiff?li.bandwidth-ri.bandwidth:ri.pixelDiff-li.pixelDiff),Nt=Zt[0]}const Gt=Nt||Ft||St||Dt||Ye[0]||Xe[0];if(Gt&&Gt.playlist){let Zt="sortedPlaylistReps";return Nt?Zt="leastPixelDiffRep":Ft?Zt="resolutionPlusOneRep":St?Zt="resolutionBestRep":Dt?Zt="bandwidthBestRep":Ye[0]&&(Zt="enabledPlaylistReps"),logFn(`choosing ${representationToString(Gt)} using ${Zt} with options`,Ue),Gt.playlist}return logFn("could not choose a playlist with options",Ue),null};const lastBandwidthSelector=function(){let E=this.useDevicePixelRatio&&window$1$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(E=this.customPixelRatio),simpleSelector(this.playlists.main,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*E,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*E,this.limitRenditionByPlayerDimensions,this.playlistController_)},movingAverageBandwidthSelector=function(E){let S=-1,x=-1;if(E<0||E>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let C=this.useDevicePixelRatio&&window$1$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(C=this.customPixelRatio),S<0&&(S=this.systemBandwidth,x=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==x&&(S=E*this.systemBandwidth+(1-E)*S,x=this.systemBandwidth),simpleSelector(this.playlists.main,S,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*C,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*C,this.limitRenditionByPlayerDimensions,this.playlistController_)}},minRebufferMaxBandwidthSelector=function(E){const{main:S,currentTime:x,bandwidth:C,duration:R,segmentDuration:Ce,timeUntilRebuffer:Ue,currentTimeline:je,syncController:Xe}=E,Ye=S.playlists.filter(Mt=>!Playlist.isIncompatible(Mt));let et=Ye.filter(Playlist.isEnabled);et.length||(et=Ye.filter(Mt=>!Playlist.isDisabled(Mt)));const Dt=et.filter(Playlist.hasAttribute.bind(null,"BANDWIDTH")).map(Mt=>{const Ut=Xe.getSyncPoint(Mt,R,je,x)?1:2,Ft=Playlist.estimateSegmentRequestTime(Ce,C,Mt)*Ut-Ue;return{playlist:Mt,rebufferingImpact:Ft}}),Ot=Dt.filter(Mt=>Mt.rebufferingImpact<=0);return stableSort(Ot,(Mt,St)=>comparePlaylistBandwidth(St.playlist,Mt.playlist)),Ot.length?Ot[0]:(stableSort(Dt,(Mt,St)=>Mt.rebufferingImpact-St.rebufferingImpact),Dt[0]||null)},lowestBitrateCompatibleVariantSelector=function(){const E=this.playlists.main.playlists.filter(Playlist.isEnabled);return stableSort(E,(x,C)=>comparePlaylistBandwidth(x,C)),E.filter(x=>!!codecsForPlaylist(this.playlists.main,x).video)[0]||null},concatSegments=E=>{let S=0,x;return E.bytes&&(x=new Uint8Array(E.bytes),E.segments.forEach(C=>{x.set(C,S),S+=C.byteLength})),x};function compactSegmentUrlDescription(E){try{return new URL(E).pathname.split("/").slice(-2).join("/")}catch{return""}}const createCaptionsTrackIfNotExists=function(E,S,x){if(!E[x]){S.trigger({type:"usage",name:"vhs-608"});let C=x;/^cc708_/.test(x)&&(C="SERVICE"+x.split("_")[1]);const R=S.textTracks().getTrackById(C);if(R)E[x]=R;else{const Ce=S.options_.vhs&&S.options_.vhs.captionServices||{};let Ue=x,je=x,Xe=!1;const Ye=Ce[C];Ye&&(Ue=Ye.label,je=Ye.language,Xe=Ye.default),E[x]=S.addRemoteTextTrack({kind:"captions",id:C,default:Xe,label:Ue,language:je},!1).track}}},addCaptionData=function({inbandTextTracks:E,captionArray:S,timestampOffset:x}){if(!S)return;const C=window$1$1.WebKitDataCue||window$1$1.VTTCue;S.forEach(R=>{const Ce=R.stream;R.content?R.content.forEach(Ue=>{const je=new C(R.startTime+x,R.endTime+x,Ue.text);je.line=Ue.line,je.align="left",je.position=Ue.position,je.positionAlign="line-left",E[Ce].addCue(je)}):E[Ce].addCue(new C(R.startTime+x,R.endTime+x,R.text))})},deprecateOldCue=function(E){Object.defineProperties(E.frame,{id:{get(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),E.value.key}},value:{get(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),E.value.data}},privateData:{get(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),E.value.data}}})},addMetadata=({inbandTextTracks:E,metadataArray:S,timestampOffset:x,videoDuration:C})=>{if(!S)return;const R=window$1$1.WebKitDataCue||window$1$1.VTTCue,Ce=E.metadataTrack_;if(!Ce||(S.forEach(et=>{const ht=et.cueTime+x;typeof ht!="number"||window$1$1.isNaN(ht)||ht<0||!(ht<1/0)||!et.frames||!et.frames.length||et.frames.forEach(Dt=>{const Ot=new R(ht,ht,Dt.value||Dt.url||Dt.data||"");Ot.frame=Dt,Ot.value=Dt,deprecateOldCue(Ot),Ce.addCue(Ot)})}),!Ce.cues||!Ce.cues.length))return;const Ue=Ce.cues,je=[];for(let et=0;et<Ue.length;et++)Ue[et]&&je.push(Ue[et]);const Xe=je.reduce((et,ht)=>{const Dt=et[ht.startTime]||[];return Dt.push(ht),et[ht.startTime]=Dt,et},{}),Ye=Object.keys(Xe).sort((et,ht)=>Number(et)-Number(ht));Ye.forEach((et,ht)=>{const Dt=Xe[et],Ot=isFinite(C)?C:et,Mt=Number(Ye[ht+1])||Ot;Dt.forEach(St=>{St.endTime=Mt})})},dateRangeAttr={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},dateRangeKeysToOmit=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),addDateRangeMetadata=({inbandTextTracks:E,dateRanges:S})=>{const x=E.metadataTrack_;if(!x)return;const C=window$1$1.WebKitDataCue||window$1$1.VTTCue;S.forEach(R=>{for(const Ce of Object.keys(R)){if(dateRangeKeysToOmit.has(Ce))continue;const Ue=new C(R.startTime,R.endTime,"");Ue.id=R.id,Ue.type="com.apple.quicktime.HLS",Ue.value={key:dateRangeAttr[Ce],data:R[Ce]},(Ce==="scte35Out"||Ce==="scte35In")&&(Ue.value.data=new Uint8Array(Ue.value.data.match(/[\da-f]{2}/gi)).buffer),x.addCue(Ue)}R.processDateRange()})},createMetadataTrackIfNotExists=(E,S,x)=>{E.metadataTrack_||(E.metadataTrack_=x.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,videojs.browser.IS_ANY_SAFARI||(E.metadataTrack_.inBandMetadataTrackDispatchType=S))},removeCuesFromTrack=function(E,S,x){let C,R;if(x&&x.cues)for(C=x.cues.length;C--;)R=x.cues[C],R.startTime>=E&&R.endTime<=S&&x.removeCue(R)},removeDuplicateCuesFromTrack=function(E){const S=E.cues;if(!S)return;const x={};for(let C=S.length-1;C>=0;C--){const R=S[C],Ce=`${R.startTime}-${R.endTime}-${R.text}`;x[Ce]?E.removeCue(R):x[Ce]=R}},gopsSafeToAlignWith=(E,S,x)=>{if(typeof S>"u"||S===null||!E.length)return[];const C=Math.ceil((S-x+3)*clock.ONE_SECOND_IN_TS);let R;for(R=0;R<E.length&&!(E[R].pts>C);R++);return E.slice(R)},updateGopBuffer=(E,S,x)=>{if(!S.length)return E;if(x)return S.slice();const C=S[0].pts;let R=0;for(R;R<E.length&&!(E[R].pts>=C);R++);return E.slice(0,R).concat(S)},removeGopBuffer=(E,S,x,C)=>{const R=Math.ceil((S-C)*clock.ONE_SECOND_IN_TS),Ce=Math.ceil((x-C)*clock.ONE_SECOND_IN_TS),Ue=E.slice();let je=E.length;for(;je--&&!(E[je].pts<=Ce););if(je===-1)return Ue;let Xe=je+1;for(;Xe--&&!(E[Xe].pts<=R););return Xe=Math.max(Xe,0),Ue.splice(Xe,je-Xe+1),Ue},shallowEqual=function(E,S){if(!E&&!S||!E&&S||E&&!S)return!1;if(E===S)return!0;const x=Object.keys(E).sort(),C=Object.keys(S).sort();if(x.length!==C.length)return!1;for(let R=0;R<x.length;R++){const Ce=x[R];if(Ce!==C[R]||E[Ce]!==S[Ce])return!1}return!0},getSyncSegmentCandidate=function(E,S,x){S=S||[];const C=[];let R=0;for(let Ce=0;Ce<S.length;Ce++){const Ue=S[Ce];if(E===Ue.timeline&&(C.push(Ce),R+=Ue.duration,R>x))return Ce}return C.length===0?0:C[C.length-1]},MIN_BACK_BUFFER=1,CHECK_BUFFER_DELAY=500,finite=E=>typeof E=="number"&&isFinite(E),MIN_SEGMENT_DURATION_TO_SAVE_STATS=1/60,illegalMediaSwitch=(E,S,x)=>E!=="main"||!S||!x?null:!x.hasAudio&&!x.hasVideo?"Neither audio nor video found in segment.":S.hasVideo&&!x.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!S.hasVideo&&x.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,safeBackBufferTrimTime=(E,S,x)=>{let C=S-Config.BACK_BUFFER_LENGTH;E.length&&(C=Math.max(C,E.start(0)));const R=S-x;return Math.min(R,C)},segmentInfoString=E=>{const{startOfSegment:S,duration:x,segment:C,part:R,playlist:{mediaSequence:Ce,id:Ue,segments:je=[]},mediaIndex:Xe,partIndex:Ye,timeline:et}=E,ht=je.length-1;let Dt="mediaIndex/partIndex increment";E.getMediaInfoForTime?Dt=`getMediaInfoForTime (${E.getMediaInfoForTime})`:E.isSyncRequest&&(Dt="getSyncSegmentCandidate (isSyncRequest)"),E.independent&&(Dt+=` with independent ${E.independent}`);const Ot=typeof Ye=="number",Mt=E.segment.uri?"segment":"pre-segment",St=Ot?getKnownPartCount({preloadSegment:C})-1:0;return`${Mt} [${Ce+Xe}/${Ce+ht}]`+(Ot?` part [${Ye}/${St}]`:"")+` segment start/end [${C.start} => ${C.end}]`+(Ot?` part start/end [${R.start} => ${R.end}]`:"")+` startOfSegment [${S}] duration [${x}] timeline [${et}] selected by [${Dt}] playlist [${Ue}]`},timingInfoPropertyForMedia=E=>`${E}TimingInfo`,timestampOffsetForSegment=({segmentTimeline:E,currentTimeline:S,startOfSegment:x,buffered:C,overrideCheck:R})=>!R&&E===S?null:E<S?x:C.length?C.end(C.length-1):x,shouldWaitForTimelineChange=({timelineChangeController:E,currentTimeline:S,segmentTimeline:x,loaderType:C,audioDisabled:R})=>{if(S===x)return!1;if(C==="audio"){const Ce=E.lastTimelineChange({type:"main"});return!Ce||Ce.to!==x}if(C==="main"&&R){const Ce=E.pendingTimelineChange({type:"audio"});return!(Ce&&Ce.to===x)}return!1},shouldFixBadTimelineChanges=E=>{if(!E)return!1;const S=E.pendingTimelineChange({type:"audio"}),x=E.pendingTimelineChange({type:"main"}),C=S&&x,R=C&&S.to!==x.to;return!!(C&&S.from!==-1&&x.from!==-1&&R)},fixBadTimelineChange=E=>{E&&(E.pause(),E.resetEverything(),E.load())},isAudioTimelineBehind=E=>{const S=E.timelineChangeController_.pendingTimelineChange({type:"audio"}),x=E.timelineChangeController_.pendingTimelineChange({type:"main"});return S&&x&&S.to<x.to},checkAndFixTimelines=E=>{const S=E.pendingSegment_;if(!S)return;if(shouldWaitForTimelineChange({timelineChangeController:E.timelineChangeController_,currentTimeline:E.currentTimeline_,segmentTimeline:S.timeline,loaderType:E.loaderType_,audioDisabled:E.audioDisabled_})&&shouldFixBadTimelineChanges(E.timelineChangeController_)){if(isAudioTimelineBehind(E)){E.timelineChangeController_.trigger("audioTimelineBehind");return}fixBadTimelineChange(E)}},mediaDuration=E=>{let S=0;return["video","audio"].forEach(function(x){const C=E[`${x}TimingInfo`];if(!C)return;const{start:R,end:Ce}=C;let Ue;typeof R=="bigint"||typeof Ce=="bigint"?Ue=window$1$1.BigInt(Ce)-window$1$1.BigInt(R):typeof R=="number"&&typeof Ce=="number"&&(Ue=Ce-R),typeof Ue<"u"&&Ue>S&&(S=Ue)}),typeof S=="bigint"&&S<Number.MAX_SAFE_INTEGER&&(S=Number(S)),S},segmentTooLong=({segmentDuration:E,maxDuration:S})=>E?Math.round(E)>S+TIME_FUDGE_FACTOR:!1,getTroublesomeSegmentDurationMessage=(E,S)=>{if(S!=="hls")return null;const x=mediaDuration({audioTimingInfo:E.audioTimingInfo,videoTimingInfo:E.videoTimingInfo});if(!x)return null;const C=E.playlist.targetDuration,R=segmentTooLong({segmentDuration:x,maxDuration:C*2}),Ce=segmentTooLong({segmentDuration:x,maxDuration:C}),Ue=`Segment with index ${E.mediaIndex} from playlist ${E.playlist.id} has a duration of ${x} when the reported duration is ${E.duration} and the target duration is ${C}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return R||Ce?{severity:R?"warn":"info",message:Ue}:null},segmentInfoPayload=({type:E,segment:S})=>{if(!S)return;const x=!!(S.key||S.map&&S.map.ke),C=!!(S.map&&!S.map.bytes),R=S.startOfSegment===void 0?S.start:S.startOfSegment;return{type:E||S.type,uri:S.resolvedUri||S.uri,start:R,duration:S.duration,isEncrypted:x,isMediaInitialization:C}};class SegmentLoader extends videojs.EventTarget{constructor(S,x={}){if(super(),!S)throw new TypeError("Initialization settings are required");if(typeof S.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!S.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=S.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=S.hasPlayed,this.currentTime_=S.currentTime,this.seekable_=S.seekable,this.seeking_=S.seeking,this.duration_=S.duration,this.mediaSource_=S.mediaSource,this.vhs_=S.vhs,this.loaderType_=S.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=S.segmentMetadataTrack,this.goalBufferLength_=S.goalBufferLength,this.sourceType_=S.sourceType,this.sourceUpdater_=S.sourceUpdater,this.inbandTextTracks_=S.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=S.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=S.parse708captions,this.useDtsForTimestampOffset_=S.useDtsForTimestampOffset,this.captionServices_=S.captionServices,this.exactManifestTimings=S.exactManifestTimings,this.addMetadataToTextTrack=S.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=S.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=S.decrypter,this.syncController_=S.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=logger(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(C){C!==this.state_&&(this.logger_(`${this.state_} -> ${C}`),this.state_=C,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.sourceUpdater_.on("codecschange",C=>{this.trigger(_extends$3({type:"codecschange"},C))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",C=>{this.trigger(_extends$3({type:"timelinechange"},C)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():checkAndFixTimelines(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return segmentTransmuxer.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(S){this.audioDisabled_=!S,S?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window$1$1.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(S){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==S}error(S){return typeof S<"u"&&(this.logger_("error occurred:",S),this.error_=S),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const S=this.getMediaInfo_();if(!this.sourceUpdater_||!S)return createTimeRanges();if(this.loaderType_==="main"){const{hasAudio:x,hasVideo:C,isMuxed:R}=S;if(C&&x&&!this.audioDisabled_&&!R)return this.sourceUpdater_.buffered();if(C)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(S,x=!1){if(!S)return null;const C=initSegmentId(S);let R=this.initSegments_[C];return x&&!R&&S.bytes&&(this.initSegments_[C]=R={resolvedUri:S.resolvedUri,byterange:S.byterange,bytes:S.bytes,tracks:S.tracks,timescales:S.timescales}),R||S}segmentKey(S,x=!1){if(!S)return null;const C=segmentKeyId(S);let R=this.keyCache_[C];this.cacheEncryptionKeys_&&x&&!R&&S.bytes&&(this.keyCache_[C]=R={resolvedUri:S.resolvedUri,bytes:S.bytes});const Ce={resolvedUri:(R||S).resolvedUri};return R&&(Ce.bytes=R.bytes),Ce}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(S,x={}){if(!S)return;const C=this.playlist_,R=this.pendingSegment_;this.playlist_=S,this.xhrOptions_=x,this.state==="INIT"&&(S.syncInfo={mediaSequence:S.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(S));let Ce=null;if(C&&(C.id?Ce=C.id:C.uri&&(Ce=C.uri)),this.logger_(`playlist update [${Ce} => ${S.id||S.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(S,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${lastBufferedEnd(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!C||C.uri!==S.uri){this.mediaIndex!==null&&(!S.endList&&typeof S.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const Ue=S.mediaSequence-C.mediaSequence;if(this.logger_(`live window shift [${Ue}]`),this.mediaIndex!==null)if(this.mediaIndex-=Ue,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const je=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!je.parts||!je.parts.length||!je.parts[this.partIndex])){const Xe=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=Xe}}R&&(R.mediaIndex-=Ue,R.mediaIndex<0?(R.mediaIndex=null,R.partIndex=null):(R.mediaIndex>=0&&(R.segment=S.segments[R.mediaIndex]),R.partIndex>=0&&R.segment.parts&&(R.part=R.segment.parts[R.partIndex]))),this.syncController_.saveExpiredSegmentInfo(C,S)}pause(){this.checkBufferTimeout_&&(window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(S){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,S),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const S=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!S&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(S,x,C=()=>{},R=!1){if(x===1/0&&(x=this.duration_()),x<=S){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let Ce=1;const Ue=()=>{Ce--,Ce===0&&C()};(R||!this.audioDisabled_)&&(Ce++,this.sourceUpdater_.removeAudio(S,x,Ue)),(R||this.loaderType_==="main")&&(this.gopBuffer_=removeGopBuffer(this.gopBuffer_,S,x,this.timeMapping_),Ce++,this.sourceUpdater_.removeVideo(S,x,Ue));for(const je in this.inbandTextTracks_)removeCuesFromTrack(S,x,this.inbandTextTracks_[je]);removeCuesFromTrack(S,x,this.segmentMetadataTrack_),Ue()}monitorBuffer_(){this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1$1.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1$1.setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const S=this.chooseNextRequest_();if(!S)return;const x={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:S})};this.trigger({type:"segmentselected",metadata:x}),typeof S.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:S.timeline})),this.loadSegment_(S)}isEndOfStream_(S=this.mediaIndex,x=this.playlist_,C=this.partIndex){if(!x||!this.mediaSource_)return!1;const R=typeof S=="number"&&x.segments[S],Ce=S+1===x.segments.length,Ue=!R||!R.parts||C+1===R.parts.length;return x.endList&&this.mediaSource_.readyState==="open"&&Ce&&Ue}chooseNextRequest_(){const S=this.buffered_(),x=lastBufferedEnd(S)||0,C=timeAheadOf(S,this.currentTime_()),R=!this.hasPlayed_()&&C>=1,Ce=C>=this.goalBufferLength_(),Ue=this.playlist_.segments;if(!Ue.length||R||Ce)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const je={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(je.isSyncRequest)je.mediaIndex=getSyncSegmentCandidate(this.currentTimeline_,Ue,x),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${je.mediaIndex}`);else if(this.mediaIndex!==null){const Dt=Ue[this.mediaIndex],Ot=typeof this.partIndex=="number"?this.partIndex:-1;je.startOfSegment=Dt.end?Dt.end:x,Dt.parts&&Dt.parts[Ot+1]?(je.mediaIndex=this.mediaIndex,je.partIndex=Ot+1):je.mediaIndex=this.mediaIndex+1}else{let Dt,Ot,Mt;const St=this.fetchAtBuffer_?x:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${St}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${x}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const Ut=this.getSyncInfoFromMediaSequenceSync_(St);if(!Ut){const kt="No sync info found while using media sequence sync";return this.error({message:kt,metadata:{errorType:videojs.Error.StreamingFailedToSelectNextSegment,error:new Error(kt)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${Ut.start} --> ${Ut.end})`),Dt=Ut.segmentIndex,Ot=Ut.partIndex,Mt=Ut.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const Ut=Playlist.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:St,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});Dt=Ut.segmentIndex,Ot=Ut.partIndex,Mt=Ut.startTime}je.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${St}`:`currentTime ${St}`,je.mediaIndex=Dt,je.startOfSegment=Mt,je.partIndex=Ot,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${je.mediaIndex} `)}const Xe=Ue[je.mediaIndex];let Ye=Xe&&typeof je.partIndex=="number"&&Xe.parts&&Xe.parts[je.partIndex];if(!Xe||typeof je.partIndex=="number"&&!Ye)return null;typeof je.partIndex!="number"&&Xe.parts&&(je.partIndex=0,Ye=Xe.parts[0]);const et=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!C&&Ye&&!et&&!Ye.independent)if(je.partIndex===0){const Dt=Ue[je.mediaIndex-1],Ot=Dt.parts&&Dt.parts.length&&Dt.parts[Dt.parts.length-1];Ot&&Ot.independent&&(je.mediaIndex-=1,je.partIndex=Dt.parts.length-1,je.independent="previous segment")}else Xe.parts[je.partIndex-1].independent&&(je.partIndex-=1,je.independent="previous part");const ht=this.mediaSource_&&this.mediaSource_.readyState==="ended";return je.mediaIndex>=Ue.length-1&&ht&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,je.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(je))}getSyncInfoFromMediaSequenceSync_(S){if(!this.mediaSequenceSync_)return null;const x=Math.max(S,this.mediaSequenceSync_.start);S!==x&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${S} to ${x}`);const C=this.mediaSequenceSync_.getSyncInfoForTime(x);if(!C)return null;if(!C.isAppended)return C;const R=this.mediaSequenceSync_.getSyncInfoForTime(C.end);return R?(R.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),R):null}generateSegmentInfo_(S){const{independent:x,playlist:C,mediaIndex:R,startOfSegment:Ce,isSyncRequest:Ue,partIndex:je,forceTimestampOffset:Xe,getMediaInfoForTime:Ye}=S,et=C.segments[R],ht=typeof je=="number"&&et.parts[je],Dt={requestId:"segment-loader-"+Math.random(),uri:ht&&ht.resolvedUri||et.resolvedUri,mediaIndex:R,partIndex:ht?je:null,isSyncRequest:Ue,startOfSegment:Ce,playlist:C,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:et.timeline,duration:ht&&ht.duration||et.duration,segment:et,part:ht,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:Ye,independent:x},Ot=typeof Xe<"u"?Xe:this.isPendingTimestampOffset_;Dt.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:et.timeline,currentTimeline:this.currentTimeline_,startOfSegment:Ce,buffered:this.buffered_(),overrideCheck:Ot});const Mt=lastBufferedEnd(this.sourceUpdater_.audioBuffered());return typeof Mt=="number"&&(Dt.audioAppendStart=Mt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(Dt.gopsToAlignWith=gopsSafeToAlignWith(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),Dt}timestampOffsetForSegment_(S){return timestampOffsetForSegment(S)}earlyAbortWhenNeeded_(S){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(S.firstBytesReceivedAt||Date.now())<1e3)return;const x=this.currentTime_(),C=S.bandwidth,R=this.pendingSegment_.duration,Ce=Playlist.estimateSegmentRequestTime(R,C,this.playlist_,S.bytesReceived),Ue=timeUntilRebuffer(this.buffered_(),x,this.vhs_.tech_.playbackRate())-1;if(Ce<=Ue)return;const je=minRebufferMaxBandwidthSelector({main:this.vhs_.playlists.main,currentTime:x,bandwidth:C,duration:this.duration_(),segmentDuration:R,timeUntilRebuffer:Ue,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!je)return;const Ye=Ce-Ue-je.rebufferingImpact;let et=.5;Ue<=TIME_FUDGE_FACTOR&&(et=1),!(!je.playlist||je.playlist.uri===this.playlist_.uri||Ye<et)&&(this.bandwidth=je.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(S){this.logger_(`Aborting ${segmentInfoString(S)}`),this.mediaRequestsAborted+=1}handleProgress_(S,x){this.earlyAbortWhenNeeded_(x.stats),!this.checkForAbort_(x.requestId)&&this.trigger("progress")}handleTrackInfo_(S,x){const{hasAudio:C,hasVideo:R}=x,Ce={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:S}),trackInfo:{hasAudio:C,hasVideo:R}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:Ce}),this.earlyAbortWhenNeeded_(S.stats),!this.checkForAbort_(S.requestId)&&(this.checkForIllegalMediaSwitch(x)||(x=x||{},shallowEqual(this.currentMediaInfo_,x)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=x,this.currentMediaInfo_=x,this.logger_("trackinfo update",x),this.trigger("trackinfo")),!this.checkForAbort_(S.requestId)&&(this.pendingSegment_.trackInfo=x,this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this))))}handleTimingInfo_(S,x,C,R){if(this.earlyAbortWhenNeeded_(S.stats),this.checkForAbort_(S.requestId))return;const Ce=this.pendingSegment_,Ue=timingInfoPropertyForMedia(x);Ce[Ue]=Ce[Ue]||{},Ce[Ue][C]=R,this.logger_(`timinginfo: ${x} - ${C} - ${R}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}handleCaptions_(S,x){if(this.earlyAbortWhenNeeded_(S.stats),this.checkForAbort_(S.requestId))return;if(x.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,S,x));return}const R=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),Ce={};x.forEach(Ue=>{Ce[Ue.stream]=Ce[Ue.stream]||{startTime:1/0,captions:[],endTime:0};const je=Ce[Ue.stream];je.startTime=Math.min(je.startTime,Ue.startTime+R),je.endTime=Math.max(je.endTime,Ue.endTime+R),je.captions.push(Ue)}),Object.keys(Ce).forEach(Ue=>{const{startTime:je,endTime:Xe,captions:Ye}=Ce[Ue],et=this.inbandTextTracks_;this.logger_(`adding cues from ${je} -> ${Xe} for ${Ue}`),createCaptionsTrackIfNotExists(et,this.vhs_.tech_,Ue),removeCuesFromTrack(je,Xe,et[Ue]),addCaptionData({captionArray:Ye,inbandTextTracks:et,timestampOffset:R})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(S,x,C){if(this.earlyAbortWhenNeeded_(S.stats),this.checkForAbort_(S.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,S,x,C));return}this.addMetadataToTextTrack(C,x,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(S=>S()),this.metadataQueue_.caption.forEach(S=>S()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const S=this.callQueue_;this.callQueue_=[],S.forEach(x=>x())}processLoadQueue_(){const S=this.loadQueue_;this.loadQueue_=[],S.forEach(x=>x())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const S=this.pendingSegment_;return S?this.getCurrentMediaInfo_()?!shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:S.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(S=this.pendingSegment_){return S&&S.trackInfo||this.currentMediaInfo_}getMediaInfo_(S=this.pendingSegment_){return this.getCurrentMediaInfo_(S)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const S=this.pendingSegment_,x=this.getCurrentMediaInfo_();if(!S||!x)return!1;const{hasAudio:C,hasVideo:R,isMuxed:Ce}=x;return!(R&&!S.videoTimingInfo||C&&!this.audioDisabled_&&!Ce&&!S.audioTimingInfo||shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:S.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(S,x){if(this.earlyAbortWhenNeeded_(S.stats),this.checkForAbort_(S.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){checkAndFixTimelines(this),this.callQueue_.push(this.handleData_.bind(this,S,x));return}const C=this.pendingSegment_;if(this.setTimeMapping_(C.timeline),this.updateMediaSecondsLoaded_(C.part||C.segment),this.mediaSource_.readyState!=="closed"){if(S.map&&(S.map=this.initSegmentForMap(S.map,!0),C.segment.map=S.map),S.key&&this.segmentKey(S.key,!0),C.isFmp4=S.isFmp4,C.timingInfo=C.timingInfo||{},C.isFmp4)this.trigger("fmp4"),C.timingInfo.start=C[timingInfoPropertyForMedia(x.type)].start;else{const R=this.getCurrentMediaInfo_(),Ce=this.loaderType_==="main"&&R&&R.hasVideo;let Ue;Ce&&(Ue=C.videoTimingInfo.start),C.timingInfo.start=this.trueSegmentStart_({currentStart:C.timingInfo.start,playlist:C.playlist,mediaIndex:C.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:Ce,firstVideoFrameTimeForData:Ue,videoTimingInfo:C.videoTimingInfo,audioTimingInfo:C.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(C,x.type),this.updateSourceBufferTimestampOffset_(C),C.isSyncRequest){this.updateTimingInfoEnd_(C),this.syncController_.saveSegmentTimingInfo({segmentInfo:C,shouldSaveTimelineMapping:this.loaderType_==="main"});const R=this.chooseNextRequest_();if(R.mediaIndex!==C.mediaIndex||R.partIndex!==C.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}C.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(C,x)}}updateAppendInitSegmentStatus(S,x){this.loaderType_==="main"&&typeof S.timestampOffset=="number"&&!S.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[x]!==S.playlist&&(this.appendInitSegment_[x]=!0)}getInitSegmentAndUpdateState_({type:S,initSegment:x,map:C,playlist:R}){if(C){const Ce=initSegmentId(C);if(this.activeInitSegmentId_===Ce)return null;x=this.initSegmentForMap(C,!0).bytes,this.activeInitSegmentId_=Ce}return x&&this.appendInitSegment_[S]?(this.playlistOfLastInitSegment_[S]=R,this.appendInitSegment_[S]=!1,this.activeInitSegmentId_=null,x):null}handleQuotaExceededError_({segmentInfo:S,type:x,bytes:C},R){const Ce=this.sourceUpdater_.audioBuffered(),Ue=this.sourceUpdater_.videoBuffered();Ce.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+timeRangesToArray(Ce).join(", ")),Ue.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+timeRangesToArray(Ue).join(", "));const je=Ce.length?Ce.start(0):0,Xe=Ce.length?Ce.end(Ce.length-1):0,Ye=Ue.length?Ue.start(0):0,et=Ue.length?Ue.end(Ue.length-1):0;if(Xe-je<=MIN_BACK_BUFFER&&et-Ye<=MIN_BACK_BUFFER){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${C.byteLength}, audio buffer: ${timeRangesToArray(Ce).join(", ")}, video buffer: ${timeRangesToArray(Ue).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:S,type:x,bytes:C}));const Dt=this.currentTime_()-MIN_BACK_BUFFER;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${Dt}`),this.remove(0,Dt,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${MIN_BACK_BUFFER}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=window$1$1.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},MIN_BACK_BUFFER*1e3)},!0)}handleAppendError_({segmentInfo:S,type:x,bytes:C},R){if(R){if(R.code===QUOTA_EXCEEDED_ERR){this.handleQuotaExceededError_({segmentInfo:S,type:x,bytes:C});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",R),this.error({message:`${x} append of ${C.length}b failed for segment #${S.mediaIndex} in playlist ${S.playlist.id}`,metadata:{errorType:videojs.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:S,type:x,initSegment:C,data:R,bytes:Ce}){if(!Ce){const je=[R];let Xe=R.byteLength;C&&(je.unshift(C),Xe+=C.byteLength),Ce=concatSegments({bytes:Xe,segments:je})}const Ue={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:S})};this.trigger({type:"segmentappendstart",metadata:Ue}),this.sourceUpdater_.appendBuffer({segmentInfo:S,type:x,bytes:Ce},this.handleAppendError_.bind(this,{segmentInfo:S,type:x,bytes:Ce}))}handleSegmentTimingInfo_(S,x,C){if(!this.pendingSegment_||x!==this.pendingSegment_.requestId)return;const R=this.pendingSegment_.segment,Ce=`${S}TimingInfo`;R[Ce]||(R[Ce]={}),R[Ce].transmuxerPrependedSeconds=C.prependedContentDuration||0,R[Ce].transmuxedPresentationStart=C.start.presentation,R[Ce].transmuxedDecodeStart=C.start.decode,R[Ce].transmuxedPresentationEnd=C.end.presentation,R[Ce].transmuxedDecodeEnd=C.end.decode,R[Ce].baseMediaDecodeTime=C.baseMediaDecodeTime}appendData_(S,x){const{type:C,data:R}=x;if(!R||!R.byteLength||C==="audio"&&this.audioDisabled_)return;const Ce=this.getInitSegmentAndUpdateState_({type:C,initSegment:x.initSegment,playlist:S.playlist,map:S.isFmp4?S.segment.map:null});this.appendToSourceBuffer_({segmentInfo:S,type:C,initSegment:Ce,data:R})}loadSegment_(S){if(this.state="WAITING",this.pendingSegment_=S,this.trimBackBuffer_(S),typeof S.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){checkAndFixTimelines(this),this.loadQueue_.push(()=>{const x=_extends$3({},S,{forceTimestampOffset:!0});_extends$3(S,this.generateSegmentInfo_(x)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(S)});return}this.updateTransmuxerAndRequestSegment_(S)}updateTransmuxerAndRequestSegment_(S){this.shouldUpdateTransmuxerTimestampOffset_(S.timestampOffset)&&(this.gopBuffer_.length=0,S.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:S.timestampOffset}));const x=this.createSimplifiedSegmentObj_(S),C=this.isEndOfStream_(S.mediaIndex,S.playlist,S.partIndex),R=this.mediaIndex!==null,Ce=S.timeline!==this.currentTimeline_&&S.timeline>0,Ue=C||R&&Ce;this.logger_(`Requesting
${compactSegmentUrlDescription(S.uri)}
${segmentInfoString(S)}`),x.map&&!x.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),S.abortRequests=mediaSegmentRequest({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:x,abortFn:this.handleAbort_.bind(this,S),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",S.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",S.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:Ue,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:je,level:Xe,stream:Ye})=>{this.logger_(`${segmentInfoString(S)} logged from transmuxer stream ${Ye} as a ${Xe}: ${je}`)},triggerSegmentEventFn:({type:je,segment:Xe,keyInfo:Ye,trackInfo:et,timingInfo:ht})=>{const Ot={segmentInfo:segmentInfoPayload({segment:Xe})};Ye&&(Ot.keyInfo=Ye),et&&(Ot.trackInfo=et),ht&&(Ot.timingInfo=ht),this.trigger({type:je,metadata:Ot})}})}trimBackBuffer_(S){const x=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);x>0&&this.remove(0,x)}createSimplifiedSegmentObj_(S){const x=S.segment,C=S.part,R=S.segment.key||S.segment.map&&S.segment.map.key,Ce=S.segment.map&&!S.segment.map.bytes,Ue={resolvedUri:C?C.resolvedUri:x.resolvedUri,byterange:C?C.byterange:x.byterange,requestId:S.requestId,transmuxer:S.transmuxer,audioAppendStart:S.audioAppendStart,gopsToAlignWith:S.gopsToAlignWith,part:S.part,type:this.loaderType_,start:S.startOfSegment,duration:S.duration,isEncrypted:R,isMediaInitialization:Ce},je=S.playlist.segments[S.mediaIndex-1];if(je&&je.timeline===x.timeline&&(je.videoTimingInfo?Ue.baseStartTime=je.videoTimingInfo.transmuxedDecodeEnd:je.audioTimingInfo&&(Ue.baseStartTime=je.audioTimingInfo.transmuxedDecodeEnd)),x.key){const Xe=x.key.iv||new Uint32Array([0,0,0,S.mediaIndex+S.playlist.mediaSequence]);Ue.key=this.segmentKey(x.key),Ue.key.iv=Xe}return x.map&&(Ue.map=this.initSegmentForMap(x.map)),Ue}saveTransferStats_(S){this.mediaRequests+=1,S&&(this.mediaBytesTransferred+=S.bytesReceived,this.mediaTransferDuration+=S.roundTripTime)}saveBandwidthRelatedStats_(S,x){if(this.pendingSegment_.byteLength=x.bytesReceived,S<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's bandwidth because its duration of ${S} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const C={bandwidthInfo:{from:this.bandwidth,to:x.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:C}),this.bandwidth=x.bandwidth,this.roundTrip=x.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(S,x,C){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,S,x,C));return}if(this.saveTransferStats_(x.stats),!this.pendingSegment_||x.requestId!==this.pendingSegment_.requestId)return;if(S){if(this.pendingSegment_=null,this.state="READY",S.code===REQUEST_ERRORS.ABORTED)return;if(this.pause(),S.code===REQUEST_ERRORS.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(S),this.trigger("error");return}const R=this.pendingSegment_;this.saveBandwidthRelatedStats_(R.duration,x.stats),R.endOfAllRequests=x.endOfAllRequests,C.gopInfo&&(this.gopBuffer_=updateGopBuffer(this.gopBuffer_,C.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(R)}setTimeMapping_(S){const x=this.syncController_.mappingForTimeline(S);x!==null&&(this.timeMapping_=x)}updateMediaSecondsLoaded_(S){typeof S.start=="number"&&typeof S.end=="number"?this.mediaSecondsLoaded+=S.end-S.start:this.mediaSecondsLoaded+=S.duration}shouldUpdateTransmuxerTimestampOffset_(S){return S===null?!1:this.loaderType_==="main"&&S!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&S!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:S,playlist:x,mediaIndex:C,firstVideoFrameTimeForData:R,currentVideoTimestampOffset:Ce,useVideoTimingInfo:Ue,videoTimingInfo:je,audioTimingInfo:Xe}){if(typeof S<"u")return S;if(!Ue)return Xe.start;const Ye=x.segments[C-1];return C===0||!Ye||typeof Ye.start>"u"||Ye.end!==R+Ce?R:je.start}waitForAppendsToComplete_(S){const x=this.getCurrentMediaInfo_(S);if(!x){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:C,hasVideo:R,isMuxed:Ce}=x,Ue=this.loaderType_==="main"&&R,je=!this.audioDisabled_&&C&&!Ce;if(S.waitingOnAppends=0,!S.hasAppendedData_){!S.timingInfo&&typeof S.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),S.timingInfo={start:0},S.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(S),this.processMetadataQueue_()),this.checkAppendsDone_(S);return}Ue&&S.waitingOnAppends++,je&&S.waitingOnAppends++,Ue&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,S)),je&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,S))}checkAppendsDone_(S){this.checkForAbort_(S.requestId)||(S.waitingOnAppends--,S.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(S){const x=illegalMediaSwitch(this.loaderType_,this.getCurrentMediaInfo_(),S);return x?(this.error({message:x,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(S){if(S.timestampOffset===null||typeof S.timingInfo.start!="number"||S.changedTimestampOffset||this.loaderType_!=="main")return;let x=!1;S.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:S.segment.videoTimingInfo,audioTimingInfo:S.segment.audioTimingInfo,timingInfo:S.timingInfo}),S.changedTimestampOffset=!0,S.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(S.timestampOffset),x=!0),S.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(S.timestampOffset),x=!0),x&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:S,audioTimingInfo:x,timingInfo:C}){return this.useDtsForTimestampOffset_?S&&typeof S.transmuxedDecodeStart=="number"?S.transmuxedDecodeStart:x&&typeof x.transmuxedDecodeStart=="number"?x.transmuxedDecodeStart:C.start:C.start}updateTimingInfoEnd_(S){S.timingInfo=S.timingInfo||{};const x=this.getMediaInfo_(),R=this.loaderType_==="main"&&x&&x.hasVideo&&S.videoTimingInfo?S.videoTimingInfo:S.audioTimingInfo;R&&(S.timingInfo.end=typeof R.end=="number"?R.end:R.start+S.duration)}handleAppendsDone_(){if(this.pendingSegment_){const Xe={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:Xe})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const S=this.pendingSegment_;S.part&&S.part.syncInfo?S.part.syncInfo.markAppended():S.segment.syncInfo&&S.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(S),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:S,shouldSaveTimelineMapping:this.loaderType_==="main"});const x=getTroublesomeSegmentDurationMessage(S,this.sourceType_);if(x&&(x.severity==="warn"?videojs.log.warn(x.message):this.logger_(x.message)),this.recordThroughput_(S),this.pendingSegment_=null,this.state="READY",S.isSyncRequest&&(this.trigger("syncinfoupdate"),!S.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${segmentInfoString(S)}`);return}this.logger_(`Appended ${segmentInfoString(S)}`),this.addSegmentMetadataCue_(S),this.fetchAtBuffer_=!0,this.currentTimeline_!==S.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:S.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:S.timeline})),this.currentTimeline_=S.timeline,this.trigger("syncinfoupdate");const C=S.segment,R=S.part,Ce=C.end&&this.currentTime_()-C.end>S.playlist.targetDuration*3,Ue=R&&R.end&&this.currentTime_()-R.end>S.playlist.partTargetDuration*3;if(Ce||Ue){this.logger_(`bad ${Ce?"segment":"part"} ${segmentInfoString(S)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=S.mediaIndex,this.partIndex=S.partIndex,this.isEndOfStream_(S.mediaIndex,S.playlist,S.partIndex)&&this.endOfStream(),this.trigger("appended"),S.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(S){if(S.duration<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's throughput because its duration of ${S.duration} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const x=this.throughput.rate,C=Date.now()-S.endOfAllRequests+1,R=Math.floor(S.byteLength/C*8*1e3);this.throughput.rate+=(R-x)/++this.throughput.count}addSegmentMetadataCue_(S){if(!this.segmentMetadataTrack_)return;const x=S.segment,C=x.start,R=x.end;if(!finite(C)||!finite(R))return;removeCuesFromTrack(C,R,this.segmentMetadataTrack_);const Ce=window$1$1.WebKitDataCue||window$1$1.VTTCue,Ue={custom:x.custom,dateTimeObject:x.dateTimeObject,dateTimeString:x.dateTimeString,programDateTime:x.programDateTime,bandwidth:S.playlist.attributes.BANDWIDTH,resolution:S.playlist.attributes.RESOLUTION,codecs:S.playlist.attributes.CODECS,byteLength:S.byteLength,uri:S.uri,timeline:S.timeline,playlist:S.playlist.id,start:C,end:R},je=JSON.stringify(Ue),Xe=new Ce(C,R,je);Xe.value=Ue,this.segmentMetadataTrack_.addCue(Xe)}}function noop(){}const toTitleCase=function(E){return typeof E!="string"?E:E.replace(/./,S=>S.toUpperCase())},bufferTypes=["video","audio"],updating=(E,S)=>{const x=S[`${E}Buffer`];return x&&x.updating||S.queuePending[E]},nextQueueIndexOfType=(E,S)=>{for(let x=0;x<S.length;x++){const C=S[x];if(C.type==="mediaSource")return null;if(C.type===E)return x}return null},shiftQueue=(E,S)=>{if(S.queue.length===0)return;let x=0,C=S.queue[x];if(C.type==="mediaSource"){!S.updating()&&S.mediaSource.readyState!=="closed"&&(S.queue.shift(),C.action(S),C.doneFn&&C.doneFn(),shiftQueue("audio",S),shiftQueue("video",S));return}if(E!=="mediaSource"&&!(!S.ready()||S.mediaSource.readyState==="closed"||updating(E,S))){if(C.type!==E){if(x=nextQueueIndexOfType(E,S.queue),x===null)return;C=S.queue[x]}if(S.queue.splice(x,1),S.queuePending[E]=C,C.action(E,S),!C.doneFn){S.queuePending[E]=null,shiftQueue(E,S);return}}},cleanupBuffer=(E,S)=>{const x=S[`${E}Buffer`],C=toTitleCase(E);x&&(x.removeEventListener("updateend",S[`on${C}UpdateEnd_`]),x.removeEventListener("error",S[`on${C}Error_`]),S.codecs[E]=null,S[`${E}Buffer`]=null)},inSourceBuffers=(E,S)=>E&&S&&Array.prototype.indexOf.call(E.sourceBuffers,S)!==-1,actions={appendBuffer:(E,S,x)=>(C,R)=>{const Ce=R[`${C}Buffer`];if(inSourceBuffers(R.mediaSource,Ce)){R.logger_(`Appending segment ${S.mediaIndex}'s ${E.length} bytes to ${C}Buffer`);try{Ce.appendBuffer(E)}catch(Ue){R.logger_(`Error with code ${Ue.code} `+(Ue.code===QUOTA_EXCEEDED_ERR?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${S.mediaIndex} to ${C}Buffer`),R.queuePending[C]=null,x(Ue)}}},remove:(E,S)=>(x,C)=>{const R=C[`${x}Buffer`];if(inSourceBuffers(C.mediaSource,R)){C.logger_(`Removing ${E} to ${S} from ${x}Buffer`);try{R.remove(E,S)}catch{C.logger_(`Remove ${E} to ${S} from ${x}Buffer failed`)}}},timestampOffset:E=>(S,x)=>{const C=x[`${S}Buffer`];inSourceBuffers(x.mediaSource,C)&&(x.logger_(`Setting ${S}timestampOffset to ${E}`),C.timestampOffset=E)},callback:E=>(S,x)=>{E()},endOfStream:E=>S=>{if(S.mediaSource.readyState==="open"){S.logger_(`Calling mediaSource endOfStream(${E||""})`);try{S.mediaSource.endOfStream(E)}catch(x){videojs.log.warn("Failed to call media source endOfStream",x)}}},duration:E=>S=>{S.logger_(`Setting mediaSource duration to ${E}`);try{S.mediaSource.duration=E}catch(x){videojs.log.warn("Failed to set media source duration",x)}},abort:()=>(E,S)=>{if(S.mediaSource.readyState!=="open")return;const x=S[`${E}Buffer`];if(inSourceBuffers(S.mediaSource,x)){S.logger_(`calling abort on ${E}Buffer`);try{x.abort()}catch(C){videojs.log.warn(`Failed to abort on ${E}Buffer`,C)}}},addSourceBuffer:(E,S)=>x=>{const C=toTitleCase(E),R=getMimeForCodec(S);x.logger_(`Adding ${E}Buffer with codec ${S} to mediaSource`);const Ce=x.mediaSource.addSourceBuffer(R);Ce.addEventListener("updateend",x[`on${C}UpdateEnd_`]),Ce.addEventListener("error",x[`on${C}Error_`]),x.codecs[E]=S,x[`${E}Buffer`]=Ce},removeSourceBuffer:E=>S=>{const x=S[`${E}Buffer`];if(cleanupBuffer(E,S),!!inSourceBuffers(S.mediaSource,x)){S.logger_(`Removing ${E}Buffer with codec ${S.codecs[E]} from mediaSource`);try{S.mediaSource.removeSourceBuffer(x)}catch(C){videojs.log.warn(`Failed to removeSourceBuffer ${E}Buffer`,C)}}},changeType:E=>(S,x)=>{const C=x[`${S}Buffer`],R=getMimeForCodec(E);if(!inSourceBuffers(x.mediaSource,C))return;const Ce=E.substring(0,E.indexOf(".")),Ue=x.codecs[S];if(Ue.substring(0,Ue.indexOf("."))===Ce)return;const Xe={codecsChangeInfo:{from:Ue,to:E}};x.trigger({type:"codecschange",metadata:Xe}),x.logger_(`changing ${S}Buffer codec from ${Ue} to ${E}`);try{C.changeType(R),x.codecs[S]=E}catch(Ye){Xe.errorType=videojs.Error.StreamingCodecsChangeError,Xe.error=Ye,Ye.metadata=Xe,x.error_=Ye,x.trigger("error"),videojs.log.warn(`Failed to changeType on ${S}Buffer`,Ye)}}},pushQueue=({type:E,sourceUpdater:S,action:x,doneFn:C,name:R})=>{S.queue.push({type:E,action:x,doneFn:C,name:R}),shiftQueue(E,S)},onUpdateend=(E,S)=>x=>{const C=S[`${E}Buffered`](),R=bufferedRangesToString(C);if(S.logger_(`received "updateend" event for ${E} Source Buffer: `,R),S.queuePending[E]){const Ce=S.queuePending[E].doneFn;S.queuePending[E]=null,Ce&&Ce(S[`${E}Error_`])}shiftQueue(E,S)};class SourceUpdater extends videojs.EventTarget{constructor(S){super(),this.mediaSource=S,this.sourceopenListener_=()=>shiftQueue("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=logger("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=onUpdateend("video",this),this.onAudioUpdateEnd_=onUpdateend("audio",this),this.onVideoError_=x=>{this.videoError_=x},this.onAudioError_=x=>{this.audioError_=x},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(S){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(S),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(S,x){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.addSourceBuffer(S,x),name:"addSourceBuffer"})}abort(S){pushQueue({type:S,sourceUpdater:this,action:actions.abort(S),name:"abort"})}removeSourceBuffer(S){if(!this.canRemoveSourceBuffer()){videojs.log.error("removeSourceBuffer is not supported!");return}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.removeSourceBuffer(S),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!videojs.browser.IS_FIREFOX&&window$1$1.MediaSource&&window$1$1.MediaSource.prototype&&typeof window$1$1.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return window$1$1.SourceBuffer&&window$1$1.SourceBuffer.prototype&&typeof window$1$1.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(S,x){if(!this.canChangeType()){videojs.log.error("changeType is not supported!");return}pushQueue({type:S,sourceUpdater:this,action:actions.changeType(x),name:"changeType"})}addOrChangeSourceBuffers(S){if(!S||typeof S!="object"||Object.keys(S).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(S).forEach(x=>{const C=S[x];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(x,C);this.canChangeType()&&this.changeType(x,C)})}appendBuffer(S,x){const{segmentInfo:C,type:R,bytes:Ce}=S;if(this.processedAppend_=!0,R==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([S,x]),this.logger_(`delayed audio append of ${Ce.length} until video append`);return}const Ue=x;if(pushQueue({type:R,sourceUpdater:this,action:actions.appendBuffer(Ce,C||{mediaIndex:-1},Ue),doneFn:x,name:"appendBuffer"}),R==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const je=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${je.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,je.forEach(Xe=>{this.appendBuffer.apply(this,Xe)})}}audioBuffered(){return inSourceBuffers(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:createTimeRanges()}videoBuffered(){return inSourceBuffers(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:createTimeRanges()}buffered(){const S=inSourceBuffers(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,x=inSourceBuffers(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return x&&!S?this.audioBuffered():S&&!x?this.videoBuffered():bufferIntersection(this.audioBuffered(),this.videoBuffered())}setDuration(S,x=noop){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.duration(S),name:"duration",doneFn:x})}endOfStream(S=null,x=noop){typeof S!="string"&&(S=void 0),pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.endOfStream(S),name:"endOfStream",doneFn:x})}removeAudio(S,x,C=noop){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){C();return}pushQueue({type:"audio",sourceUpdater:this,action:actions.remove(S,x),doneFn:C,name:"remove"})}removeVideo(S,x,C=noop){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){C();return}pushQueue({type:"video",sourceUpdater:this,action:actions.remove(S,x),doneFn:C,name:"remove"})}updating(){return!!(updating("audio",this)||updating("video",this))}audioTimestampOffset(S){return typeof S<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==S&&(pushQueue({type:"audio",sourceUpdater:this,action:actions.timestampOffset(S),name:"timestampOffset"}),this.audioTimestampOffset_=S),this.audioTimestampOffset_}videoTimestampOffset(S){return typeof S<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==S&&(pushQueue({type:"video",sourceUpdater:this,action:actions.timestampOffset(S),name:"timestampOffset"}),this.videoTimestampOffset_=S),this.videoTimestampOffset_}audioQueueCallback(S){this.audioBuffer&&pushQueue({type:"audio",sourceUpdater:this,action:actions.callback(S),name:"callback"})}videoQueueCallback(S){this.videoBuffer&&pushQueue({type:"video",sourceUpdater:this,action:actions.callback(S),name:"callback"})}dispose(){this.trigger("dispose"),bufferTypes.forEach(S=>{this.abort(S),this.canRemoveSourceBuffer()?this.removeSourceBuffer(S):this[`${S}QueueCallback`](()=>cleanupBuffer(S,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const uint8ToUtf8=E=>decodeURIComponent(escape(String.fromCharCode.apply(null,E))),bufferToHexString=E=>{const S=new Uint8Array(E);return Array.from(S).map(x=>x.toString(16).padStart(2,"0")).join("")},VTT_LINE_TERMINATORS=new Uint8Array(`

`.split("").map(E=>E.charCodeAt(0)));class NoVttJsError extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class VTTSegmentLoader extends SegmentLoader{constructor(S,x={}){super(S,x),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=S.featuresNativeTextTracks,this.loadVttJs=S.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return createTimeRanges();const S=this.subtitlesTrack_.cues,x=S[0].startTime,C=S[S.length-1].startTime;return createTimeRanges([[x,C]])}initSegmentForMap(S,x=!1){if(!S)return null;const C=initSegmentId(S);let R=this.initSegments_[C];if(x&&!R&&S.bytes){const Ce=VTT_LINE_TERMINATORS.byteLength+S.bytes.byteLength,Ue=new Uint8Array(Ce);Ue.set(S.bytes),Ue.set(VTT_LINE_TERMINATORS,S.bytes.byteLength),this.initSegments_[C]=R={resolvedUri:S.resolvedUri,byterange:S.byterange,bytes:Ue}}return R||S}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(S){return typeof S>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=S,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(S,x){removeCuesFromTrack(S,x,this.subtitlesTrack_)}fillBuffer_(){const S=this.chooseNextRequest_();if(S){if(this.syncController_.timestampOffsetForTimeline(S.timeline)===null){const x=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",x),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(S)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(S){for(;S&&S.segment.empty;){if(S.mediaIndex+1>=S.playlist.segments.length){S=null;break}S=this.generateSegmentInfo_({playlist:S.playlist,mediaIndex:S.mediaIndex+1,startOfSegment:S.startOfSegment+S.duration,isSyncRequest:S.isSyncRequest})}return S}stopForError(S){this.error(S),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(S,x,C){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(x.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(S){S.code===REQUEST_ERRORS.TIMEOUT&&this.handleTimeout_(),S.code===REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(S);return}const R=this.pendingSegment_;this.saveBandwidthRelatedStats_(R.duration,x.stats),x.key&&this.segmentKey(x.key,!0),this.state="APPENDING",this.trigger("appending");const Ce=R.segment;if(Ce.map&&(Ce.map.bytes=x.map.bytes),R.bytes=x.bytes,typeof window$1$1.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(S,x,C),()=>this.stopForError({message:"Error loading vtt.js"}));return}Ce.requested=!0;try{this.parseVTTCues_(R)}catch(Ue){this.stopForError({message:Ue.message,metadata:{errorType:videojs.Error.StreamingVttParserError,error:Ue}});return}if(this.updateTimeMapping_(R,this.syncController_.timelines[R.timeline],this.playlist_),R.cues.length?R.timingInfo={start:R.cues[0].startTime,end:R.cues[R.cues.length-1].endTime}:R.timingInfo={start:R.startOfSegment,end:R.startOfSegment+R.duration},R.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}R.byteLength=R.bytes.byteLength,this.mediaSecondsLoaded+=Ce.duration,R.cues.forEach(Ue=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new window$1$1.VTTCue(Ue.startTime,Ue.endTime,Ue.text):Ue)}),removeDuplicateCuesFromTrack(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(S){let x,C=!1;if(typeof window$1$1.WebVTT!="function")throw new NoVttJsError;typeof window$1$1.TextDecoder=="function"?x=new window$1$1.TextDecoder("utf8"):(x=window$1$1.WebVTT.StringDecoder(),C=!0);const R=new window$1$1.WebVTT.Parser(window$1$1,window$1$1.vttjs,x);if(S.cues=[],S.timestampmap={MPEGTS:0,LOCAL:0},R.oncue=S.cues.push.bind(S.cues),R.ontimestampmap=Ue=>{S.timestampmap=Ue},R.onparsingerror=Ue=>{videojs.log.warn("Error encountered when parsing cues: "+Ue.message)},S.segment.map){let Ue=S.segment.map.bytes;C&&(Ue=uint8ToUtf8(Ue)),R.parse(Ue)}let Ce=S.bytes;C&&(Ce=uint8ToUtf8(Ce)),R.parse(Ce),R.flush()}updateTimeMapping_(S,x,C){const R=S.segment;if(!x)return;if(!S.cues.length){R.empty=!0;return}const{MPEGTS:Ce,LOCAL:Ue}=S.timestampmap,Xe=Ce/clock.ONE_SECOND_IN_TS-Ue+x.mapping;if(S.cues.forEach(Ye=>{const et=Ye.endTime-Ye.startTime,ht=this.handleRollover_(Ye.startTime+Xe,x.time);Ye.startTime=Math.max(ht,0),Ye.endTime=Math.max(ht+et,0)}),!C.syncInfo){const Ye=S.cues[0].startTime,et=S.cues[S.cues.length-1].startTime;C.syncInfo={mediaSequence:C.mediaSequence+S.mediaIndex,time:Math.min(Ye,et-R.duration)}}}handleRollover_(S,x){if(x===null)return S;let C=S*clock.ONE_SECOND_IN_TS;const R=x*clock.ONE_SECOND_IN_TS;let Ce;for(R<C?Ce=-8589934592:Ce=8589934592;Math.abs(C-R)>4294967296;)C+=Ce;return C/clock.ONE_SECOND_IN_TS}}const findAdCue=function(E,S){const x=E.cues;for(let C=0;C<x.length;C++){const R=x[C];if(S>=R.adStartTime&&S<=R.adEndTime)return R}return null},updateAdCues=function(E,S,x=0){if(!E.segments)return;let C=x,R;for(let Ce=0;Ce<E.segments.length;Ce++){const Ue=E.segments[Ce];if(R||(R=findAdCue(S,C+Ue.duration/2)),R){if("cueIn"in Ue){R.endTime=C,R.adEndTime=C,C+=Ue.duration,R=null;continue}if(C<R.endTime){C+=Ue.duration;continue}R.endTime+=Ue.duration}else if("cueOut"in Ue&&(R=new window$1$1.VTTCue(C,C+Ue.duration,Ue.cueOut),R.adStartTime=C,R.adEndTime=C+parseFloat(Ue.cueOut),S.addCue(R)),"cueOutCont"in Ue){const[je,Xe]=Ue.cueOutCont.split("/").map(parseFloat);R=new window$1$1.VTTCue(C,C+Ue.duration,""),R.adStartTime=C-je,R.adEndTime=R.adStartTime+Xe,S.addCue(R)}C+=Ue.duration}};class SyncInfo{constructor({start:S,end:x,segmentIndex:C,partIndex:R=null,appended:Ce=!1}){this.start_=S,this.end_=x,this.segmentIndex_=C,this.partIndex_=R,this.appended_=Ce}isInRange(S){return S>=this.start&&S<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class SyncInfoData{constructor(S,x=[]){this.segmentSyncInfo_=S,this.partsSyncInfo_=x}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(S=>S.resetAppendedStatus())}}class MediaSequenceSync{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(S=>S.resetAppendStatus())}update(S,x){const{mediaSequence:C,segments:R}=S;if(this.isReliable_=this.isReliablePlaylist_(C,R),!!this.isReliable_)return this.updateStorage_(R,C,this.calculateBaseTime_(C,x))}getSyncInfoForTime(S){for(const{segmentSyncInfo:x,partsSyncInfo:C}of this.storage_.values())if(C.length){for(const R of C)if(R.isInRange(S))return R}else if(x.isInRange(S))return x;return null}getSyncInfoForMediaSequence(S){return this.storage_.get(S)}updateStorage_(S,x,C){const R=new Map;let Ce=`
`,Ue=C,je=x;this.start_=Ue,S.forEach((Xe,Ye)=>{const et=this.storage_.get(je),ht=Ue,Dt=ht+Xe.duration,Ot=!!(et&&et.segmentSyncInfo&&et.segmentSyncInfo.isAppended),Mt=new SyncInfo({start:ht,end:Dt,appended:Ot,segmentIndex:Ye});Xe.syncInfo=Mt;let St=Ue;const Ut=(Xe.parts||[]).map((kt,Ft)=>{const Nt=St,Gt=St+kt.duration,Zt=!!(et&&et.partsSyncInfo&&et.partsSyncInfo[Ft]&&et.partsSyncInfo[Ft].isAppended),ri=new SyncInfo({start:Nt,end:Gt,appended:Zt,segmentIndex:Ye,partIndex:Ft});return St=Gt,Ce+=`Media Sequence: ${je}.${Ft} | Range: ${Nt} --> ${Gt} | Appended: ${Zt}
`,kt.syncInfo=ri,ri});R.set(je,new SyncInfoData(Mt,Ut)),Ce+=`${compactSegmentUrlDescription(Xe.resolvedUri)} | Media Sequence: ${je} | Range: ${ht} --> ${Dt} | Appended: ${Ot}
`,je++,Ue=Dt}),this.end_=Ue,this.storage_=R,this.diagnostics_=Ce}calculateBaseTime_(S,x){return this.storage_.size?this.storage_.has(S)?this.storage_.get(S).segmentSyncInfo.start:x:0}isReliablePlaylist_(S,x){return S!=null&&Array.isArray(x)&&x.length}}class DependantMediaSequenceSync extends MediaSequenceSync{constructor(S){super(),this.parent_=S}calculateBaseTime_(S,x){if(!this.storage_.size){const C=this.parent_.getSyncInfoForMediaSequence(S);return C?C.segmentSyncInfo.start:0}return super.calculateBaseTime_(S,x)}}const MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC=86400,syncPointStrategies=[{name:"VOD",run:(E,S,x,C,R)=>x!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(E,S,x,C,R,Ce)=>{const Ue=E.getMediaSequenceSync(Ce);if(!Ue||!Ue.isReliable)return null;const je=Ue.getSyncInfoForTime(R);return je?{time:je.start,partIndex:je.partIndex,segmentIndex:je.segmentIndex}:null}},{name:"ProgramDateTime",run:(E,S,x,C,R)=>{if(!Object.keys(E.timelineToDatetimeMappings).length)return null;let Ce=null,Ue=null;const je=getPartsAndSegments(S);R=R||0;for(let Xe=0;Xe<je.length;Xe++){const Ye=S.endList||R===0?Xe:je.length-(Xe+1),et=je[Ye],ht=et.segment,Dt=E.timelineToDatetimeMappings[ht.timeline];if(!Dt||!ht.dateTimeObject)continue;let Mt=ht.dateTimeObject.getTime()/1e3+Dt;if(ht.parts&&typeof et.partIndex=="number")for(let Ut=0;Ut<et.partIndex;Ut++)Mt+=ht.parts[Ut].duration;const St=Math.abs(R-Mt);if(Ue!==null&&(St===0||Ue<St))break;Ue=St,Ce={time:Mt,segmentIndex:et.segmentIndex,partIndex:et.partIndex}}return Ce}},{name:"Segment",run:(E,S,x,C,R)=>{let Ce=null,Ue=null;R=R||0;const je=getPartsAndSegments(S);for(let Xe=0;Xe<je.length;Xe++){const Ye=S.endList||R===0?Xe:je.length-(Xe+1),et=je[Ye],ht=et.segment,Dt=et.part&&et.part.start||ht&&ht.start;if(ht.timeline===C&&typeof Dt<"u"){const Ot=Math.abs(R-Dt);if(Ue!==null&&Ue<Ot)break;(!Ce||Ue===null||Ue>=Ot)&&(Ue=Ot,Ce={time:Dt,segmentIndex:et.segmentIndex,partIndex:et.partIndex})}}return Ce}},{name:"Discontinuity",run:(E,S,x,C,R)=>{let Ce=null;if(R=R||0,S.discontinuityStarts&&S.discontinuityStarts.length){let Ue=null;for(let je=0;je<S.discontinuityStarts.length;je++){const Xe=S.discontinuityStarts[je],Ye=S.discontinuitySequence+je+1,et=E.discontinuities[Ye];if(et){const ht=Math.abs(R-et.time);if(Ue!==null&&Ue<ht)break;(!Ce||Ue===null||Ue>=ht)&&(Ue=ht,Ce={time:et.time,segmentIndex:Xe,partIndex:null})}}}return Ce}},{name:"Playlist",run:(E,S,x,C,R)=>S.syncInfo?{time:S.syncInfo.time,segmentIndex:S.syncInfo.mediaSequence-S.mediaSequence,partIndex:null}:null}];class SyncController extends videojs.EventTarget{constructor(S={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const x=new MediaSequenceSync,C=new DependantMediaSequenceSync(x),R=new DependantMediaSequenceSync(x);this.mediaSequenceStorage_={main:x,audio:C,vtt:R},this.logger_=logger("SyncController")}getMediaSequenceSync(S){return this.mediaSequenceStorage_[S]||null}getSyncPoint(S,x,C,R,Ce){if(x!==1/0)return syncPointStrategies.find(({name:Xe})=>Xe==="VOD").run(this,S,x);const Ue=this.runStrategies_(S,x,C,R,Ce);if(!Ue.length)return null;for(const je of Ue){const{syncPoint:Xe,strategy:Ye}=je,{segmentIndex:et,time:ht}=Xe;if(et<0)continue;const Dt=S.segments[et],Ot=ht,Mt=Ot+Dt.duration;if(this.logger_(`Strategy: ${Ye}. Current time: ${R}. selected segment: ${et}. Time: [${Ot} -> ${Mt}]}`),R>=Ot&&R<Mt)return this.logger_("Found sync point with exact match: ",Xe),Xe}return this.selectSyncPoint_(Ue,{key:"time",value:R})}getExpiredTime(S,x){if(!S||!S.segments)return null;const C=this.runStrategies_(S,x,S.discontinuitySequence,0);if(!C.length)return null;const R=this.selectSyncPoint_(C,{key:"segmentIndex",value:0});return R.segmentIndex>0&&(R.time*=-1),Math.abs(R.time+sumDurations({defaultDuration:S.targetDuration,durationList:S.segments,startIndex:R.segmentIndex,endIndex:0}))}runStrategies_(S,x,C,R,Ce){const Ue=[];for(let je=0;je<syncPointStrategies.length;je++){const Xe=syncPointStrategies[je],Ye=Xe.run(this,S,x,C,R,Ce);Ye&&(Ye.strategy=Xe.name,Ue.push({strategy:Xe.name,syncPoint:Ye}))}return Ue}selectSyncPoint_(S,x){let C=S[0].syncPoint,R=Math.abs(S[0].syncPoint[x.key]-x.value),Ce=S[0].strategy;for(let Ue=1;Ue<S.length;Ue++){const je=Math.abs(S[Ue].syncPoint[x.key]-x.value);je<R&&(R=je,C=S[Ue].syncPoint,Ce=S[Ue].strategy)}return this.logger_(`syncPoint for [${x.key}: ${x.value}] chosen with strategy [${Ce}]: [time:${C.time}, segmentIndex:${C.segmentIndex}`+(typeof C.partIndex=="number"?`,partIndex:${C.partIndex}`:"")+"]"),C}saveExpiredSegmentInfo(S,x){const C=x.mediaSequence-S.mediaSequence;if(C>MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC){videojs.log.warn(`Not saving expired segment info. Media sequence gap ${C} is too large.`);return}for(let R=C-1;R>=0;R--){const Ce=S.segments[R];if(Ce&&typeof Ce.start<"u"){x.syncInfo={mediaSequence:S.mediaSequence+R,time:Ce.start},this.logger_(`playlist refresh sync: [time:${x.syncInfo.time}, mediaSequence: ${x.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(S){if(this.timelineToDatetimeMappings={},S.segments&&S.segments.length&&S.segments[0].dateTimeObject){const x=S.segments[0],C=x.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[x.timeline]=-C}}saveSegmentTimingInfo({segmentInfo:S,shouldSaveTimelineMapping:x}){const C=this.calculateSegmentTimeMapping_(S,S.timingInfo,x),R=S.segment;C&&(this.saveDiscontinuitySyncInfo_(S),S.playlist.syncInfo||(S.playlist.syncInfo={mediaSequence:S.playlist.mediaSequence+S.mediaIndex,time:R.start}));const Ce=R.dateTimeObject;R.discontinuity&&x&&Ce&&(this.timelineToDatetimeMappings[R.timeline]=-(Ce.getTime()/1e3))}timestampOffsetForTimeline(S){return typeof this.timelines[S]>"u"?null:this.timelines[S].time}mappingForTimeline(S){return typeof this.timelines[S]>"u"?null:this.timelines[S].mapping}calculateSegmentTimeMapping_(S,x,C){const R=S.segment,Ce=S.part;let Ue=this.timelines[S.timeline],je,Xe;if(typeof S.timestampOffset=="number")Ue={time:S.startOfSegment,mapping:S.startOfSegment-x.start},C&&(this.timelines[S.timeline]=Ue,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${S.timeline}: [time: ${Ue.time}] [mapping: ${Ue.mapping}]`)),je=S.startOfSegment,Xe=x.end+Ue.mapping;else if(Ue)je=x.start+Ue.mapping,Xe=x.end+Ue.mapping;else return!1;return Ce&&(Ce.start=je,Ce.end=Xe),(!R.start||je<R.start)&&(R.start=je),R.end=Xe,!0}saveDiscontinuitySyncInfo_(S){const x=S.playlist,C=S.segment;if(C.discontinuity)this.discontinuities[C.timeline]={time:C.start,accuracy:0};else if(x.discontinuityStarts&&x.discontinuityStarts.length)for(let R=0;R<x.discontinuityStarts.length;R++){const Ce=x.discontinuityStarts[R],Ue=x.discontinuitySequence+R+1,je=Ce-S.mediaIndex,Xe=Math.abs(je);if(!this.discontinuities[Ue]||this.discontinuities[Ue].accuracy>Xe){let Ye;je<0?Ye=C.start-sumDurations({defaultDuration:x.targetDuration,durationList:x.segments,startIndex:S.mediaIndex,endIndex:Ce}):Ye=C.end+sumDurations({defaultDuration:x.targetDuration,durationList:x.segments,startIndex:S.mediaIndex+1,endIndex:Ce}),this.discontinuities[Ue]={time:Ye,accuracy:Xe}}}}dispose(){this.trigger("dispose"),this.off()}}class TimelineChangeController extends videojs.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(S){this.pendingTimelineChanges_[S]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:S,from:x,to:C}){return typeof x=="number"&&typeof C=="number"&&(this.pendingTimelineChanges_[S]={type:S,from:x,to:C},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[S]}lastTimelineChange({type:S,from:x,to:C}){if(typeof x=="number"&&typeof C=="number"){this.lastTimelineChanges_[S]={type:S,from:x,to:C},delete this.pendingTimelineChanges_[S];const R={timelineChangeInfo:{from:x,to:C}};this.trigger({type:"timelinechange",metadata:R})}return this.lastTimelineChanges_[S]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const workerCode=transform(getWorkerString(function(){var E=function(){function St(){this.listeners={}}var Ut=St.prototype;return Ut.on=function(Ft,Nt){this.listeners[Ft]||(this.listeners[Ft]=[]),this.listeners[Ft].push(Nt)},Ut.off=function(Ft,Nt){if(!this.listeners[Ft])return!1;var Gt=this.listeners[Ft].indexOf(Nt);return this.listeners[Ft]=this.listeners[Ft].slice(0),this.listeners[Ft].splice(Gt,1),Gt>-1},Ut.trigger=function(Ft){var Nt=this.listeners[Ft];if(Nt)if(arguments.length===2)for(var Gt=Nt.length,Zt=0;Zt<Gt;++Zt)Nt[Zt].call(this,arguments[1]);else for(var ri=Array.prototype.slice.call(arguments,1),li=Nt.length,hi=0;hi<li;++hi)Nt[hi].apply(this,ri)},Ut.dispose=function(){this.listeners={}},Ut.pipe=function(Ft){this.on("data",function(Nt){Ft.push(Nt)})},St}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function S(St){return St.subarray(0,St.byteLength-St[St.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const x=function(){const St=[[[],[],[],[],[]],[[],[],[],[],[]]],Ut=St[0],kt=St[1],Ft=Ut[4],Nt=kt[4];let Gt,Zt,ri;const li=[],hi=[];let xi,$i,Mi,Di,ki,ji;for(Gt=0;Gt<256;Gt++)hi[(li[Gt]=Gt<<1^(Gt>>7)*283)^Gt]=Gt;for(Zt=ri=0;!Ft[Zt];Zt^=xi||1,ri=hi[ri]||1)for(Di=ri^ri<<1^ri<<2^ri<<3^ri<<4,Di=Di>>8^Di&255^99,Ft[Zt]=Di,Nt[Di]=Zt,Mi=li[$i=li[xi=li[Zt]]],ji=Mi*16843009^$i*65537^xi*257^Zt*16843008,ki=li[Di]*257^Di*16843008,Gt=0;Gt<4;Gt++)Ut[Gt][Zt]=ki=ki<<24^ki>>>8,kt[Gt][Di]=ji=ji<<24^ji>>>8;for(Gt=0;Gt<5;Gt++)Ut[Gt]=Ut[Gt].slice(0),kt[Gt]=kt[Gt].slice(0);return St};let C=null;class R{constructor(Ut){C||(C=x()),this._tables=[[C[0][0].slice(),C[0][1].slice(),C[0][2].slice(),C[0][3].slice(),C[0][4].slice()],[C[1][0].slice(),C[1][1].slice(),C[1][2].slice(),C[1][3].slice(),C[1][4].slice()]];let kt,Ft,Nt;const Gt=this._tables[0][4],Zt=this._tables[1],ri=Ut.length;let li=1;if(ri!==4&&ri!==6&&ri!==8)throw new Error("Invalid aes key size");const hi=Ut.slice(0),xi=[];for(this._key=[hi,xi],kt=ri;kt<4*ri+28;kt++)Nt=hi[kt-1],(kt%ri===0||ri===8&&kt%ri===4)&&(Nt=Gt[Nt>>>24]<<24^Gt[Nt>>16&255]<<16^Gt[Nt>>8&255]<<8^Gt[Nt&255],kt%ri===0&&(Nt=Nt<<8^Nt>>>24^li<<24,li=li<<1^(li>>7)*283)),hi[kt]=hi[kt-ri]^Nt;for(Ft=0;kt;Ft++,kt--)Nt=hi[Ft&3?kt:kt-4],kt<=4||Ft<4?xi[Ft]=Nt:xi[Ft]=Zt[0][Gt[Nt>>>24]]^Zt[1][Gt[Nt>>16&255]]^Zt[2][Gt[Nt>>8&255]]^Zt[3][Gt[Nt&255]]}decrypt(Ut,kt,Ft,Nt,Gt,Zt){const ri=this._key[1];let li=Ut^ri[0],hi=Nt^ri[1],xi=Ft^ri[2],$i=kt^ri[3],Mi,Di,ki;const ji=ri.length/4-2;let Ri,ui=4;const vi=this._tables[1],si=vi[0],ai=vi[1],Ci=vi[2],Ei=vi[3],zi=vi[4];for(Ri=0;Ri<ji;Ri++)Mi=si[li>>>24]^ai[hi>>16&255]^Ci[xi>>8&255]^Ei[$i&255]^ri[ui],Di=si[hi>>>24]^ai[xi>>16&255]^Ci[$i>>8&255]^Ei[li&255]^ri[ui+1],ki=si[xi>>>24]^ai[$i>>16&255]^Ci[li>>8&255]^Ei[hi&255]^ri[ui+2],$i=si[$i>>>24]^ai[li>>16&255]^Ci[hi>>8&255]^Ei[xi&255]^ri[ui+3],ui+=4,li=Mi,hi=Di,xi=ki;for(Ri=0;Ri<4;Ri++)Gt[(3&-Ri)+Zt]=zi[li>>>24]<<24^zi[hi>>16&255]<<16^zi[xi>>8&255]<<8^zi[$i&255]^ri[ui++],Mi=li,li=hi,hi=xi,xi=$i,$i=Mi}}class Ce extends E{constructor(){super(E),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(Ut){this.jobs.push(Ut),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const Ue=function(St){return St<<24|(St&65280)<<8|(St&16711680)>>8|St>>>24},je=function(St,Ut,kt){const Ft=new Int32Array(St.buffer,St.byteOffset,St.byteLength>>2),Nt=new R(Array.prototype.slice.call(Ut)),Gt=new Uint8Array(St.byteLength),Zt=new Int32Array(Gt.buffer);let ri,li,hi,xi,$i,Mi,Di,ki,ji;for(ri=kt[0],li=kt[1],hi=kt[2],xi=kt[3],ji=0;ji<Ft.length;ji+=4)$i=Ue(Ft[ji]),Mi=Ue(Ft[ji+1]),Di=Ue(Ft[ji+2]),ki=Ue(Ft[ji+3]),Nt.decrypt($i,Mi,Di,ki,Zt,ji),Zt[ji]=Ue(Zt[ji]^ri),Zt[ji+1]=Ue(Zt[ji+1]^li),Zt[ji+2]=Ue(Zt[ji+2]^hi),Zt[ji+3]=Ue(Zt[ji+3]^xi),ri=$i,li=Mi,hi=Di,xi=ki;return Gt};class Xe{constructor(Ut,kt,Ft,Nt){const Gt=Xe.STEP,Zt=new Int32Array(Ut.buffer),ri=new Uint8Array(Ut.byteLength);let li=0;for(this.asyncStream_=new Ce,this.asyncStream_.push(this.decryptChunk_(Zt.subarray(li,li+Gt),kt,Ft,ri)),li=Gt;li<Zt.length;li+=Gt)Ft=new Uint32Array([Ue(Zt[li-4]),Ue(Zt[li-3]),Ue(Zt[li-2]),Ue(Zt[li-1])]),this.asyncStream_.push(this.decryptChunk_(Zt.subarray(li,li+Gt),kt,Ft,ri));this.asyncStream_.push(function(){Nt(null,S(ri))})}static get STEP(){return 32e3}decryptChunk_(Ut,kt,Ft,Nt){return function(){const Gt=je(Ut,kt,Ft);Nt.set(Gt,Ut.byteOffset)}}}var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},et;typeof window<"u"?et=window:typeof Ye<"u"?et=Ye:typeof self<"u"?et=self:et={};var ht=et,Dt=function(Ut){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(Ut):Ut&&Ut.buffer instanceof ArrayBuffer},Ot=ht.BigInt||Number;Ot("0x1"),Ot("0x100"),Ot("0x10000"),Ot("0x1000000"),Ot("0x100000000"),Ot("0x10000000000"),Ot("0x1000000000000"),Ot("0x100000000000000"),Ot("0x10000000000000000"),function(){var St=new Uint16Array([65484]),Ut=new Uint8Array(St.buffer,St.byteOffset,St.byteLength);return Ut[0]===255?"big":Ut[0]===204?"little":"unknown"}();const Mt=function(St){const Ut={};return Object.keys(St).forEach(kt=>{const Ft=St[kt];Dt(Ft)?Ut[kt]={bytes:Ft.buffer,byteOffset:Ft.byteOffset,byteLength:Ft.byteLength}:Ut[kt]=Ft}),Ut};self.onmessage=function(St){const Ut=St.data,kt=new Uint8Array(Ut.encrypted.bytes,Ut.encrypted.byteOffset,Ut.encrypted.byteLength),Ft=new Uint32Array(Ut.key.bytes,Ut.key.byteOffset,Ut.key.byteLength/4),Nt=new Uint32Array(Ut.iv.bytes,Ut.iv.byteOffset,Ut.iv.byteLength/4);new Xe(kt,Ft,Nt,function(Gt,Zt){self.postMessage(Mt({source:Ut.source,decrypted:Zt}),[Zt.buffer])})}}));var Decrypter=factory(workerCode);const audioTrackKind_=E=>{let S=E.default?"main":"alternative";return E.characteristics&&E.characteristics.indexOf("public.accessibility.describes-video")>=0&&(S="main-desc"),S},stopLoaders=(E,S)=>{E.abort(),E.pause(),S&&S.activePlaylistLoader&&(S.activePlaylistLoader.pause(),S.activePlaylistLoader=null)},startLoaders=(E,S)=>{S.activePlaylistLoader=E,E.load()},onGroupChanged=(E,S)=>()=>{const{segmentLoaders:{[E]:x,main:C},mediaTypes:{[E]:R}}=S,Ce=R.activeTrack(),Ue=R.getActiveGroup(),je=R.activePlaylistLoader,Xe=R.lastGroup_;if(!(Ue&&Xe&&Ue.id===Xe.id)&&(R.lastGroup_=Ue,R.lastTrack_=Ce,stopLoaders(x,R),!(!Ue||Ue.isMainPlaylist))){if(!Ue.playlistLoader){je&&C.resetEverything();return}x.resyncLoader(),startLoaders(Ue.playlistLoader,R)}},onGroupChanging=(E,S)=>()=>{const{segmentLoaders:{[E]:x},mediaTypes:{[E]:C}}=S;C.lastGroup_=null,x.abort(),x.pause()},onTrackChanged=(E,S)=>()=>{const{mainPlaylistLoader:x,segmentLoaders:{[E]:C,main:R},mediaTypes:{[E]:Ce}}=S,Ue=Ce.activeTrack(),je=Ce.getActiveGroup(),Xe=Ce.activePlaylistLoader,Ye=Ce.lastTrack_;if(!(Ye&&Ue&&Ye.id===Ue.id)&&(Ce.lastGroup_=je,Ce.lastTrack_=Ue,stopLoaders(C,Ce),!!je)){if(je.isMainPlaylist){if(!Ue||!Ye||Ue.id===Ye.id)return;const et=S.vhs.playlistController_,ht=et.selectPlaylist();if(et.media()===ht)return;Ce.logger_(`track change. Switching main audio from ${Ye.id} to ${Ue.id}`),x.pause(),R.resetEverything(),et.fastQualityChange_(ht);return}if(E==="AUDIO"){if(!je.playlistLoader){R.setAudio(!0),R.resetEverything();return}C.setAudio(!0),R.setAudio(!1)}if(Xe===je.playlistLoader){startLoaders(je.playlistLoader,Ce);return}C.track&&C.track(Ue),C.resetEverything(),startLoaders(je.playlistLoader,Ce)}},onError={AUDIO:(E,S)=>()=>{const{mediaTypes:{[E]:x},excludePlaylist:C}=S,R=x.activeTrack(),Ce=x.activeGroup(),Ue=(Ce.filter(Xe=>Xe.default)[0]||Ce[0]).id,je=x.tracks[Ue];if(R===je){C({error:{message:"Problem encountered loading the default audio track."}});return}videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const Xe in x.tracks)x.tracks[Xe].enabled=x.tracks[Xe]===je;x.onTrackChanged()},SUBTITLES:(E,S)=>()=>{const{mediaTypes:{[E]:x}}=S;videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const C=x.activeTrack();C&&(C.mode="disabled"),x.onTrackChanged()}},setupListeners={AUDIO:(E,S,x)=>{if(!S)return;const{tech:C,requestOptions:R,segmentLoaders:{[E]:Ce}}=x;S.on("loadedmetadata",()=>{const Ue=S.media();Ce.playlist(Ue,R),(!C.paused()||Ue.endList&&C.preload()!=="none")&&Ce.load()}),S.on("loadedplaylist",()=>{Ce.playlist(S.media(),R),C.paused()||Ce.load()}),S.on("error",onError[E](E,x))},SUBTITLES:(E,S,x)=>{const{tech:C,requestOptions:R,segmentLoaders:{[E]:Ce},mediaTypes:{[E]:Ue}}=x;S.on("loadedmetadata",()=>{const je=S.media();Ce.playlist(je,R),Ce.track(Ue.activeTrack()),(!C.paused()||je.endList&&C.preload()!=="none")&&Ce.load()}),S.on("loadedplaylist",()=>{Ce.playlist(S.media(),R),C.paused()||Ce.load()}),S.on("error",onError[E](E,x))}},initialize={AUDIO:(E,S)=>{const{vhs:x,sourceType:C,segmentLoaders:{[E]:R},requestOptions:Ce,main:{mediaGroups:Ue},mediaTypes:{[E]:{groups:je,tracks:Xe,logger_:Ye}},mainPlaylistLoader:et}=S,ht=isAudioOnly(et.main);(!Ue[E]||Object.keys(Ue[E]).length===0)&&(Ue[E]={main:{default:{default:!0}}},ht&&(Ue[E].main.default.playlists=et.main.playlists));for(const Dt in Ue[E]){je[Dt]||(je[Dt]=[]);for(const Ot in Ue[E][Dt]){let Mt=Ue[E][Dt][Ot],St;if(ht?(Ye(`AUDIO group '${Dt}' label '${Ot}' is a main playlist`),Mt.isMainPlaylist=!0,St=null):C==="vhs-json"&&Mt.playlists?St=new PlaylistLoader(Mt.playlists[0],x,Ce):Mt.resolvedUri?St=new PlaylistLoader(Mt.resolvedUri,x,Ce):Mt.playlists&&C==="dash"?St=new DashPlaylistLoader(Mt.playlists[0],x,Ce,et):St=null,Mt=merge({id:Ot,playlistLoader:St},Mt),setupListeners[E](E,Mt.playlistLoader,S),je[Dt].push(Mt),typeof Xe[Ot]>"u"){const Ut=new videojs.AudioTrack({id:Ot,kind:audioTrackKind_(Mt),enabled:!1,language:Mt.language,default:Mt.default,label:Ot});Xe[Ot]=Ut}}}R.on("error",onError[E](E,S))},SUBTITLES:(E,S)=>{const{tech:x,vhs:C,sourceType:R,segmentLoaders:{[E]:Ce},requestOptions:Ue,main:{mediaGroups:je},mediaTypes:{[E]:{groups:Xe,tracks:Ye}},mainPlaylistLoader:et}=S;for(const ht in je[E]){Xe[ht]||(Xe[ht]=[]);for(const Dt in je[E][ht]){if(!C.options_.useForcedSubtitles&&je[E][ht][Dt].forced)continue;let Ot=je[E][ht][Dt],Mt;if(R==="hls")Mt=new PlaylistLoader(Ot.resolvedUri,C,Ue);else if(R==="dash"){if(!Ot.playlists.filter(Ut=>Ut.excludeUntil!==1/0).length)return;Mt=new DashPlaylistLoader(Ot.playlists[0],C,Ue,et)}else R==="vhs-json"&&(Mt=new PlaylistLoader(Ot.playlists?Ot.playlists[0]:Ot.resolvedUri,C,Ue));if(Ot=merge({id:Dt,playlistLoader:Mt},Ot),setupListeners[E](E,Ot.playlistLoader,S),Xe[ht].push(Ot),typeof Ye[Dt]>"u"){const St=x.addRemoteTextTrack({id:Dt,kind:"subtitles",default:Ot.default&&Ot.autoselect,language:Ot.language,label:Dt},!1).track;Ye[Dt]=St}}}Ce.on("error",onError[E](E,S))},"CLOSED-CAPTIONS":(E,S)=>{const{tech:x,main:{mediaGroups:C},mediaTypes:{[E]:{groups:R,tracks:Ce}}}=S;for(const Ue in C[E]){R[Ue]||(R[Ue]=[]);for(const je in C[E][Ue]){const Xe=C[E][Ue][je];if(!/^(?:CC|SERVICE)/.test(Xe.instreamId))continue;const Ye=x.options_.vhs&&x.options_.vhs.captionServices||{};let et={label:je,language:Xe.language,instreamId:Xe.instreamId,default:Xe.default&&Xe.autoselect};if(Ye[et.instreamId]&&(et=merge(et,Ye[et.instreamId])),et.default===void 0&&delete et.default,R[Ue].push(merge({id:je},Xe)),typeof Ce[je]>"u"){const ht=x.addRemoteTextTrack({id:et.instreamId,kind:"captions",default:et.default,language:et.language,label:et.label},!1).track;Ce[je]=ht}}}}},groupMatch=(E,S)=>{for(let x=0;x<E.length;x++)if(playlistMatch(S,E[x])||E[x].playlists&&groupMatch(E[x].playlists,S))return!0;return!1},activeGroup$1=(E,S)=>x=>{const{mainPlaylistLoader:C,mediaTypes:{[E]:{groups:R}}}=S,Ce=C.media();if(!Ce)return null;let Ue=null;Ce.attributes[E]&&(Ue=R[Ce.attributes[E]]);const je=Object.keys(R);if(!Ue)if(E==="AUDIO"&&je.length>1&&isAudioOnly(S.main))for(let Xe=0;Xe<je.length;Xe++){const Ye=R[je[Xe]];if(groupMatch(Ye,Ce)){Ue=Ye;break}}else R.main?Ue=R.main:je.length===1&&(Ue=R[je[0]]);return typeof x>"u"?Ue:x===null||!Ue?null:Ue.filter(Xe=>Xe.id===x.id)[0]||null},activeTrack={AUDIO:(E,S)=>()=>{const{mediaTypes:{[E]:{tracks:x}}}=S;for(const C in x)if(x[C].enabled)return x[C];return null},SUBTITLES:(E,S)=>()=>{const{mediaTypes:{[E]:{tracks:x}}}=S;for(const C in x)if(x[C].mode==="showing"||x[C].mode==="hidden")return x[C];return null}},getActiveGroup=(E,{mediaTypes:S})=>()=>{const x=S[E].activeTrack();return x?S[E].activeGroup(x):null},setupMediaGroups=E=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(Ye=>{initialize[Ye](Ye,E)});const{mediaTypes:S,mainPlaylistLoader:x,tech:C,vhs:R,segmentLoaders:{["AUDIO"]:Ce,main:Ue}}=E;["AUDIO","SUBTITLES"].forEach(Ye=>{S[Ye].activeGroup=activeGroup$1(Ye,E),S[Ye].activeTrack=activeTrack[Ye](Ye,E),S[Ye].onGroupChanged=onGroupChanged(Ye,E),S[Ye].onGroupChanging=onGroupChanging(Ye,E),S[Ye].onTrackChanged=onTrackChanged(Ye,E),S[Ye].getActiveGroup=getActiveGroup(Ye,E)});const je=S.AUDIO.activeGroup();if(je){const Ye=(je.filter(ht=>ht.default)[0]||je[0]).id;S.AUDIO.tracks[Ye].enabled=!0,S.AUDIO.onGroupChanged(),S.AUDIO.onTrackChanged(),S.AUDIO.getActiveGroup().playlistLoader?(Ue.setAudio(!1),Ce.setAudio(!0)):Ue.setAudio(!0)}x.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(Ye=>S[Ye].onGroupChanged())}),x.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(Ye=>S[Ye].onGroupChanging())});const Xe=()=>{S.AUDIO.onTrackChanged(),C.trigger({type:"usage",name:"vhs-audio-change"})};C.audioTracks().addEventListener("change",Xe),C.remoteTextTracks().addEventListener("change",S.SUBTITLES.onTrackChanged),R.on("dispose",()=>{C.audioTracks().removeEventListener("change",Xe),C.remoteTextTracks().removeEventListener("change",S.SUBTITLES.onTrackChanged)}),C.clearTracks("audio");for(const Ye in S.AUDIO.tracks)C.audioTracks().addTrack(S.AUDIO.tracks[Ye])},createMediaTypes=()=>{const E={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(S=>{E[S]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,getActiveGroup:noop,onGroupChanged:noop,onTrackChanged:noop,lastTrack_:null,logger_:logger(`MediaGroups[${S}]`)}}),E};class SteeringManifest{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(S){S===1&&(this.version_=S)}set ttl(S){this.ttl_=S||300}set reloadUri(S){S&&(this.reloadUri_=resolveUrl(this.reloadUri_,S))}set priority(S){S&&S.length&&(this.priority_=S)}set pathwayClones(S){S&&S.length&&(this.pathwayClones_=new Map(S.map(x=>[x.ID,x])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class ContentSteeringController extends videojs.EventTarget{constructor(S,x){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=logger("Content Steering"),this.xhr_=S,this.getBandwidth_=x}assignTagProperties(S,x){this.manifestType_=x.serverUri?"HLS":"DASH";const C=x.serverUri||x.serverURL;if(!C){this.logger_(`steering manifest URL is ${C}, cannot request steering manifest.`),this.trigger("error");return}if(C.startsWith("data:")){this.decodeDataUriManifest_(C.substring(C.indexOf(",")+1));return}this.steeringManifest.reloadUri=resolveUrl(S,C),this.defaultPathway=x.pathwayId||x.defaultServiceLocation,this.queryBeforeStart=x.queryBeforeStart,this.proxyServerUrl_=x.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(S){const x=this.steeringManifest.reloadUri;if(!x)return;const C=S?x:this.getRequestURI(x);if(!C){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const R={contentSteeringInfo:{uri:C}};this.trigger({type:"contentsteeringloadstart",metadata:R}),this.request_=this.xhr_({uri:C,requestType:"content-steering-manifest"},(Ce,Ue)=>{if(Ce){if(Ue.status===410){this.logger_(`manifest request 410 ${Ce}.`),this.logger_(`There will be no more content steering requests to ${C} this session.`),this.excludedSteeringManifestURLs.add(C);return}if(Ue.status===429){const Ye=Ue.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${Ce}.`),this.logger_(`content steering will retry in ${Ye} seconds.`),this.startTTLTimeout_(parseInt(Ye,10));return}this.logger_(`manifest failed to load ${Ce}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:R});let je;try{je=JSON.parse(this.request_.responseText)}catch(Ye){const et={errorType:videojs.Error.StreamingContentSteeringParserError,error:Ye};this.trigger({type:"error",metadata:et})}this.assignSteeringProperties_(je);const Xe={contentSteeringInfo:R.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:Xe}),this.startTTLTimeout_()})}setProxyServerUrl_(S){const x=new window$1$1.URL(S),C=new window$1$1.URL(this.proxyServerUrl_);return C.searchParams.set("url",encodeURI(x.toString())),this.setSteeringParams_(C.toString())}decodeDataUriManifest_(S){const x=JSON.parse(window$1$1.atob(S));this.assignSteeringProperties_(x)}setSteeringParams_(S){const x=new window$1$1.URL(S),C=this.getPathway(),R=this.getBandwidth_();if(C){const Ce=`_${this.manifestType_}_pathway`;x.searchParams.set(Ce,C)}if(R){const Ce=`_${this.manifestType_}_throughput`;x.searchParams.set(Ce,R)}return x.toString()}assignSteeringProperties_(S){if(this.steeringManifest.version=S.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${S.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=S.TTL,this.steeringManifest.reloadUri=S["RELOAD-URI"],this.steeringManifest.priority=S["PATHWAY-PRIORITY"]||S["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=S["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const C=(R=>{for(const Ce of R)if(this.availablePathways_.has(Ce))return Ce;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==C&&(this.currentPathway=C,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(S){if(!S)return null;const x=R=>this.excludedSteeringManifestURLs.has(R);if(this.proxyServerUrl_){const R=this.setProxyServerUrl_(S);if(!x(R))return R}const C=this.setSteeringParams_(S);return x(C)?null:C}startTTLTimeout_(S=this.steeringManifest.ttl){const x=S*1e3;this.ttlTimeout_=window$1$1.setTimeout(()=>{this.requestSteeringManifest()},x)}clearTTLTimeout_(){window$1$1.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest}addAvailablePathway(S){S&&this.availablePathways_.add(S)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(S){return this.availablePathways_.delete(S)}didDASHTagChange(S,x){return!x&&this.steeringManifest.reloadUri||x&&(resolveUrl(S,x.serverURL)!==this.steeringManifest.reloadUri||x.defaultServiceLocation!==this.defaultPathway||x.queryBeforeStart!==this.queryBeforeStart||x.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const ABORT_EARLY_EXCLUSION_SECONDS=10;let Vhs$1;const loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],sumLoaderStat=function(E){return this.audioSegmentLoader_[E]+this.mainSegmentLoader_[E]},shouldSwitchToMedia=function({currentPlaylist:E,buffered:S,currentTime:x,nextPlaylist:C,bufferLowWaterLine:R,bufferHighWaterLine:Ce,duration:Ue,bufferBasedABR:je,log:Xe}){if(!C)return videojs.log.warn("We received no playlist to switch to. Please check your stream."),!1;const Ye=`allowing switch ${E&&E.id||"null"} -> ${C.id}`;if(!E)return Xe(`${Ye} as current playlist is not set`),!0;if(C.id===E.id)return!1;const et=!!findRange(S,x).length;if(!E.endList)return!et&&typeof E.partTargetDuration=="number"?(Xe(`not ${Ye} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(Xe(`${Ye} as current playlist is live`),!0);const ht=timeAheadOf(S,x),Dt=je?Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Config.MAX_BUFFER_LOW_WATER_LINE;if(Ue<Dt)return Xe(`${Ye} as duration < max low water line (${Ue} < ${Dt})`),!0;const Ot=C.attributes.BANDWIDTH,Mt=E.attributes.BANDWIDTH;if(Ot<Mt&&(!je||ht<Ce)){let St=`${Ye} as next bandwidth < current bandwidth (${Ot} < ${Mt})`;return je&&(St+=` and forwardBuffer < bufferHighWaterLine (${ht} < ${Ce})`),Xe(St),!0}if((!je||Ot>Mt)&&ht>=R){let St=`${Ye} as forwardBuffer >= bufferLowWaterLine (${ht} >= ${R})`;return je&&(St+=` and next bandwidth > current bandwidth (${Ot} > ${Mt})`),Xe(St),!0}return Xe(`not ${Ye} as no switching criteria met`),!1};class PlaylistController extends videojs.EventTarget{constructor(S){super();const{src:x,withCredentials:C,tech:R,bandwidth:Ce,externVhs:Ue,useCueTags:je,playlistExclusionDuration:Xe,enableLowInitialPlaylist:Ye,sourceType:et,cacheEncryptionKeys:ht,bufferBasedABR:Dt,leastPixelDiffSelector:Ot,captionServices:Mt,experimentalUseMMS:St}=S;if(!x)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:Ut}=S;(Ut===null||typeof Ut>"u")&&(Ut=1/0),Vhs$1=Ue,this.bufferBasedABR=!!Dt,this.leastPixelDiffSelector=!!Ot,this.withCredentials=C,this.tech_=R,this.vhs_=R.vhs,this.player_=S.player_,this.sourceType_=et,this.useCueTags_=je,this.playlistExclusionDuration=Xe,this.maxPlaylistRetries=Ut,this.enableLowInitialPlaylist=Ye,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:C,maxPlaylistRetries:Ut,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=createMediaTypes(),St&&window$1$1.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new window$1$1.ManagedMediaSource,videojs.log("Using ManagedMediaSource")):window$1$1.MediaSource&&(this.mediaSource=new window$1$1.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=createTimeRanges(),this.hasPlayed_=!1,this.syncController_=new SyncController(S),this.segmentMetadataTrack_=R.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Decrypter,this.sourceUpdater_=new SourceUpdater(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new TimelineChangeController,this.keyStatusMap_=new Map;const kt={vhs:this.vhs_,parse708captions:S.parse708captions,useDtsForTimestampOffset:S.useDtsForTimestampOffset,captionServices:Mt,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:Ce,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:ht,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:S.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new DashPlaylistLoader(x,this.vhs_,merge(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new PlaylistLoader(x,this.vhs_,merge(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new SegmentLoader(merge(kt,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),S),this.audioSegmentLoader_=new SegmentLoader(merge(kt,{loaderType:"audio"}),S),this.subtitleSegmentLoader_=new VTTSegmentLoader(merge(kt,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((Gt,Zt)=>{function ri(){R.off("vttjserror",li),Gt()}function li(){R.off("vttjsloaded",ri),Zt()}R.one("vttjsloaded",ri),R.one("vttjserror",li),R.addWebVttScript_()})}),S);const Ft=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new ContentSteeringController(this.vhs_.xhr,Ft),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),loaderStats.forEach(Gt=>{this[Gt+"_"]=sumLoaderStat.bind(this,Gt)}),this.logger_=logger("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const Nt=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(Nt,()=>{const Gt=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-Gt,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const S=this.mainAppendsToLoadedData_(),x=this.audioAppendsToLoadedData_();return S===-1||x===-1?-1:S+x}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(S="abr"){const x=this.selectPlaylist();x&&this.shouldSwitchToMedia_(x)&&this.switchMedia_(x,S)}switchMedia_(S,x,C){const R=this.media(),Ce=R&&(R.id||R.uri),Ue=S&&(S.id||S.uri);if(Ce&&Ce!==Ue){this.logger_(`switch media ${Ce} -> ${Ue} from ${x}`);const je={renditionInfo:{id:Ue,bandwidth:S.attributes.BANDWIDTH,resolution:S.attributes.RESOLUTION,codecs:S.attributes.CODECS},cause:x};this.trigger({type:"renditionselected",metadata:je}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${x}`})}this.mainPlaylistLoader_.media(S,C)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(S=>{const x=this.mediaTypes_[S],C=x?x.activeGroup():null,R=this.contentSteeringController_.getPathway();if(C&&R){const Ue=(C.length?C[0].playlists:C.playlists).filter(je=>je.attributes.serviceLocation===R);Ue.length&&this.mediaTypes_[S].activePlaylistLoader.media(Ue[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=window$1$1.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window$1$1.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const S=this.main(),x=S&&S.playlists||[];if(!S||!S.mediaGroups||!S.mediaGroups.AUDIO)return x;const C=S.mediaGroups.AUDIO,R=Object.keys(C);let Ce;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)Ce=this.mediaTypes_.AUDIO.activeTrack();else{const je=C.main||R.length&&C[R[0]];for(const Xe in je)if(je[Xe].default){Ce={label:Xe};break}}if(!Ce)return x;const Ue=[];for(const je in C)if(C[je][Ce.label]){const Xe=C[je][Ce.label];if(Xe.playlists&&Xe.playlists.length)Ue.push.apply(Ue,Xe.playlists);else if(Xe.uri)Ue.push(Xe);else if(S.playlists.length)for(let Ye=0;Ye<S.playlists.length;Ye++){const et=S.playlists[Ye];et.attributes&&et.attributes.AUDIO&&et.attributes.AUDIO===je&&Ue.push(et)}}return Ue.length?Ue:x}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const x=this.mainPlaylistLoader_.media(),C=x.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=C,x.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(x,this.requestOptions_),this.mainSegmentLoader_.load()),setupMediaGroups({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),x),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let x=this.mainPlaylistLoader_.media();if(!x){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let C;if(this.enableLowInitialPlaylist&&(C=this.selectInitialPlaylist()),C||(C=this.selectPlaylist()),!C||!this.shouldSwitchToMedia_(C)||(this.initialMedia_=C,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;x=this.initialMedia_}this.handleUpdatedMediaPlaylist(x)}),this.mainPlaylistLoader_.on("error",()=>{const x=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:x.playlist,error:x})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const x=this.mainPlaylistLoader_.media(),C=x.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=C,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(x,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const x=this.mainPlaylistLoader_.media();if(x.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(x)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(x=>{this.mainPlaylistLoader_.on(x,C=>{this.player_.trigger(_extends$3({},C))})})}handleUpdatedMediaPlaylist(S){this.useCueTags_&&this.updateAdCues_(S),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(S,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!S.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(S,x){const C=S.mediaGroups||{};let R=!0;const Ce=Object.keys(C.AUDIO);for(const Ue in C.AUDIO)for(const je in C.AUDIO[Ue])C.AUDIO[Ue][je].uri||(R=!1);R&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(C.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Vhs$1.Playlist.isAes(x)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),Ce.length&&Object.keys(C.AUDIO[Ce[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(S){const x=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,C=this.tech_.currentTime(),R=this.bufferLowWaterLine(),Ce=this.bufferHighWaterLine(),Ue=this.tech_.buffered();return shouldSwitchToMedia({buffered:Ue,currentTime:C,currentPlaylist:x,nextPlaylist:S,bufferLowWaterLine:R,bufferHighWaterLine:Ce,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const C=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:C.playlist,error:C})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const C=this.audioSegmentLoader_.pendingSegment_;if(!C||!C.segment||!C.segment.syncInfo)return;const R=C.segment.syncInfo.end+.01;this.tech_.setCurrentTime(R)}),this.mainSegmentLoader_.on("earlyabort",C=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:ABORT_EARLY_EXCLUSION_SECONDS}))});const S=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const C=this.getCodecsOrExclude_();C&&this.sourceUpdater_.addOrChangeSourceBuffers(C)};this.mainSegmentLoader_.on("trackinfo",S),this.audioSegmentLoader_.on("trackinfo",S),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(C=>{this.mainSegmentLoader_.on(C,R=>{this.player_.trigger(_extends$3({},R))}),this.audioSegmentLoader_.on(C,R=>{this.player_.trigger(_extends$3({},R))}),this.subtitleSegmentLoader_.on(C,R=>{this.player_.trigger(_extends$3({},R))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(S=this.selectPlaylist()){if(S&&S===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(S,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const S=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<S.start(0))return this.tech_.setCurrentTime(S.end(S.length-1))}setupFirstPlay(){const S=this.mainPlaylistLoader_.media();if(!S||this.tech_.paused()||this.hasPlayed_)return!1;if(!S.endList||S.start){const x=this.seekable();if(!x.length)return!1;const C=x.end(0);let R=C;if(S.start){const Ce=S.start.timeOffset;Ce<0?R=Math.max(C+Ce,x.start(0)):R=Math.min(C,Ce)}this.trigger("firstplay"),this.tech_.setCurrentTime(R)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const S=this.tech_.play();typeof S<"u"&&typeof S.then=="function"&&S.then(null,x=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const S=this.inbandTextTracks_.metadataTrack_.cues;if(!S||!S.length)return;const x=this.duration();S[S.length-1].endTime=isNaN(x)||Math.abs(x)===1/0?Number.MAX_VALUE:x}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let S=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const x=this.mainSegmentLoader_.getCurrentMediaInfo_();!x||x.hasVideo?S=S&&this.audioSegmentLoader_.ended_:S=this.audioSegmentLoader_.ended_}S&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(S){if(!this.seekable().length)return!1;const C=this.syncController_.getExpiredTime(S,this.duration());if(C===null)return!1;const R=Vhs$1.Playlist.playlistEnd(S,C),Ce=this.tech_.currentTime(),Ue=this.tech_.buffered();if(!Ue.length)return R-Ce<=SAFE_TIME_DELTA;const je=Ue.end(Ue.length-1);return je-Ce<=SAFE_TIME_DELTA&&R-je<=SAFE_TIME_DELTA}excludePlaylist({playlistToExclude:S=this.mainPlaylistLoader_.media(),error:x={},playlistExclusionDuration:C}){if(S=S||this.mainPlaylistLoader_.media(),C=C||x.playlistExclusionDuration||this.playlistExclusionDuration,!S){this.error=x,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}S.playlistErrors_++;const R=this.mainPlaylistLoader_.main.playlists,Ce=R.filter(isEnabled),Ue=Ce.length===1&&Ce[0]===S;if(R.length===1&&C!==1/0)return videojs.log.warn(`Problem encountered with playlist ${S.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(Ue);if(Ue){if(this.main().contentSteering){const Mt=this.pathwayAttribute_(S),St=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(Mt),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(Mt)},St);return}let Ot=!1;R.forEach(Mt=>{if(Mt===S)return;const St=Mt.excludeUntil;typeof St<"u"&&St!==1/0&&(Ot=!0,delete Mt.excludeUntil)}),Ot&&(videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let je;S.playlistErrors_>this.maxPlaylistRetries?je=1/0:je=Date.now()+C*1e3,S.excludeUntil=je,x.reason&&(S.lastExcludeReason_=x.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const Xe=this.selectPlaylist();if(!Xe){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const Ye=x.internal?this.logger_:videojs.log.warn,et=x.message?" "+x.message:"";Ye(`${x.internal?"Internal problem":"Problem"} encountered with playlist ${S.id}.${et} Switching to playlist ${Xe.id}.`),Xe.attributes.AUDIO!==S.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),Xe.attributes.SUBTITLES!==S.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const ht=Xe.targetDuration/2*1e3||5*1e3,Dt=typeof Xe.lastRequest=="number"&&Date.now()-Xe.lastRequest<=ht;return this.switchMedia_(Xe,"exclude",Ue||Dt)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(S,x){const C=[],R=S==="all";(R||S==="main")&&C.push(this.mainPlaylistLoader_);const Ce=[];(R||S==="audio")&&Ce.push("AUDIO"),(R||S==="subtitle")&&(Ce.push("CLOSED-CAPTIONS"),Ce.push("SUBTITLES")),Ce.forEach(Ue=>{const je=this.mediaTypes_[Ue]&&this.mediaTypes_[Ue].activePlaylistLoader;je&&C.push(je)}),["main","audio","subtitle"].forEach(Ue=>{const je=this[`${Ue}SegmentLoader_`];je&&(S===Ue||S==="all")&&C.push(je)}),C.forEach(Ue=>x.forEach(je=>{typeof Ue[je]=="function"&&Ue[je]()}))}setCurrentTime(S){const x=findRange(this.tech_.buffered(),S);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(x&&x.length)return S;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const S=this.mainPlaylistLoader_.media();return S?S.endList?this.mediaSource?this.mediaSource.duration:Vhs$1.Playlist.duration(S):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let S;if(!this.mainPlaylistLoader_)return;let x=this.mainPlaylistLoader_.media();if(!x)return;let C=this.syncController_.getExpiredTime(x,this.duration());if(C===null)return;const R=this.mainPlaylistLoader_.main,Ce=Vhs$1.Playlist.seekable(x,C,Vhs$1.Playlist.liveEdgeDelay(R,x));if(Ce.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(x=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),C=this.syncController_.getExpiredTime(x,this.duration()),C===null||(S=Vhs$1.Playlist.seekable(x,C,Vhs$1.Playlist.liveEdgeDelay(R,x)),S.length===0)))return;let Ue,je;if(this.seekable_&&this.seekable_.length&&(Ue=this.seekable_.end(0),je=this.seekable_.start(0)),S?S.start(0)>Ce.end(0)||Ce.start(0)>S.end(0)?this.seekable_=Ce:this.seekable_=createTimeRanges([[S.start(0)>Ce.start(0)?S.start(0):Ce.start(0),S.end(0)<Ce.end(0)?S.end(0):Ce.end(0)]]):this.seekable_=Ce,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===Ue&&this.seekable_.start(0)===je)return;this.logger_(`seekable updated [${printableRange(this.seekable_)}]`);const Xe={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:Xe}),this.tech_.trigger("seekablechanged")}updateDuration(S){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,S),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(S){const R=this.seekable();if(!R.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<R.end(R.length-1))&&this.sourceUpdater_.setDuration(R.end(R.length-1));return}const x=this.tech_.buffered();let C=Vhs$1.Playlist.duration(this.mainPlaylistLoader_.media());x.length>0&&(C=Math.max(C,x.end(x.length-1))),this.mediaSource.duration!==C&&this.sourceUpdater_.setDuration(C)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(S=>{const x=this.mediaTypes_[S].groups;for(const C in x)x[C].forEach(R=>{R.playlistLoader&&R.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const S=!!this.mediaTypes_.AUDIO.activePlaylistLoader,x=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),C=S?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!x||!C)}getCodecsOrExclude_(){const S={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},x=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();S.video=S.main;const C=codecsForPlaylist(this.main(),x),R={},Ce=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(S.main.hasVideo&&(R.video=C.video||S.main.videoCodec||DEFAULT_VIDEO_CODEC),S.main.isMuxed&&(R.video+=`,${C.audio||S.main.audioCodec||DEFAULT_AUDIO_CODEC}`),(S.main.hasAudio&&!S.main.isMuxed||S.audio.hasAudio||Ce)&&(R.audio=C.audio||S.main.audioCodec||S.audio.audioCodec||DEFAULT_AUDIO_CODEC,S.audio.isFmp4=S.main.hasAudio&&!S.main.isMuxed?S.main.isFmp4:S.audio.isFmp4),!R.audio&&!R.video){this.excludePlaylist({playlistToExclude:x,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const Ue=(Ye,et)=>Ye?browserSupportsCodec(et):muxerSupportsCodec(et),je={};let Xe;if(["video","audio"].forEach(function(Ye){if(R.hasOwnProperty(Ye)&&!Ue(S[Ye].isFmp4,R[Ye])){const et=S[Ye].isFmp4?"browser":"muxer";je[et]=je[et]||[],je[et].push(R[Ye]),Ye==="audio"&&(Xe=et)}}),Ce&&Xe&&x.attributes.AUDIO){const Ye=x.attributes.AUDIO;this.main().playlists.forEach(et=>{(et.attributes&&et.attributes.AUDIO)===Ye&&et!==x&&(et.excludeUntil=1/0)}),this.logger_(`excluding audio group ${Ye} as ${Xe} does not support codec(s): "${R.audio}"`)}if(Object.keys(je).length){const Ye=Object.keys(je).reduce((et,ht)=>(et&&(et+=", "),et+=`${ht} does not support codec(s): "${je[ht].join(",")}"`,et),"")+".";this.excludePlaylist({playlistToExclude:x,error:{internal:!0,message:Ye},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const Ye=[];if(["video","audio"].forEach(et=>{const ht=(parseCodecs(this.sourceUpdater_.codecs[et]||"")[0]||{}).type,Dt=(parseCodecs(R[et]||"")[0]||{}).type;ht&&Dt&&ht.toLowerCase()!==Dt.toLowerCase()&&Ye.push(`"${this.sourceUpdater_.codecs[et]}" -> "${R[et]}"`)}),Ye.length){this.excludePlaylist({playlistToExclude:x,error:{message:`Codec switching not supported: ${Ye.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return R}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const S=this.getCodecsOrExclude_();if(!S)return;this.sourceUpdater_.createSourceBuffers(S);const x=[S.video,S.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(x)}excludeUnsupportedVariants_(){const S=this.main().playlists,x=[];Object.keys(S).forEach(C=>{const R=S[C];if(x.indexOf(R.id)!==-1)return;x.push(R.id);const Ce=codecsForPlaylist(this.main,R),Ue=[];Ce.audio&&!muxerSupportsCodec(Ce.audio)&&!browserSupportsCodec(Ce.audio)&&Ue.push(`audio codec ${Ce.audio}`),Ce.video&&!muxerSupportsCodec(Ce.video)&&!browserSupportsCodec(Ce.video)&&Ue.push(`video codec ${Ce.video}`),Ce.text&&Ce.text==="stpp.ttml.im1t"&&Ue.push(`text codec ${Ce.text}`),Ue.length&&(R.excludeUntil=1/0,this.logger_(`excluding ${R.id} for unsupported: ${Ue.join(", ")}`))})}excludeIncompatibleVariants_(S){const x=[],C=this.main().playlists,R=unwrapCodecList(parseCodecs(S)),Ce=codecCount(R),Ue=R.video&&parseCodecs(R.video)[0]||null,je=R.audio&&parseCodecs(R.audio)[0]||null;Object.keys(C).forEach(Xe=>{const Ye=C[Xe];if(x.indexOf(Ye.id)!==-1||Ye.excludeUntil===1/0)return;x.push(Ye.id);const et=[],ht=codecsForPlaylist(this.mainPlaylistLoader_.main,Ye),Dt=codecCount(ht);if(!(!ht.audio&&!ht.video)){if(Dt!==Ce&&et.push(`codec count "${Dt}" !== "${Ce}"`),!this.sourceUpdater_.canChangeType()){const Ot=ht.video&&parseCodecs(ht.video)[0]||null,Mt=ht.audio&&parseCodecs(ht.audio)[0]||null;Ot&&Ue&&Ot.type.toLowerCase()!==Ue.type.toLowerCase()&&et.push(`video codec "${Ot.type}" !== "${Ue.type}"`),Mt&&je&&Mt.type.toLowerCase()!==je.type.toLowerCase()&&et.push(`audio codec "${Mt.type}" !== "${je.type}"`)}et.length&&(Ye.excludeUntil=1/0,this.logger_(`excluding ${Ye.id}: ${et.join(" && ")}`))}})}updateAdCues_(S){let x=0;const C=this.seekable();C.length&&(x=C.start(0)),updateAdCues(S,this.cueTagsTrack_,x)}goalBufferLength(){const S=this.tech_.currentTime(),x=Config.GOAL_BUFFER_LENGTH,C=Config.GOAL_BUFFER_LENGTH_RATE,R=Math.max(x,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(x+S*C,R)}bufferLowWaterLine(){const S=this.tech_.currentTime(),x=Config.BUFFER_LOW_WATER_LINE,C=Config.BUFFER_LOW_WATER_LINE_RATE,R=Math.max(x,Config.MAX_BUFFER_LOW_WATER_LINE),Ce=Math.max(x,Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(x+S*C,this.bufferBasedABR?Ce:R)}bufferHighWaterLine(){return Config.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(S){createMetadataTrackIfNotExists(this.inbandTextTracks_,"com.apple.streaming",this.tech_),addDateRangeMetadata({inbandTextTracks:this.inbandTextTracks_,dateRanges:S})}addMetadataToTextTrack(S,x,C){const R=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();createMetadataTrackIfNotExists(this.inbandTextTracks_,S,this.tech_),addMetadata({inbandTextTracks:this.inbandTextTracks_,metadataArray:x,timestampOffset:R,videoDuration:C})}pathwayAttribute_(S){return S.attributes["PATHWAY-ID"]||S.attributes.serviceLocation}initContentSteeringController_(){const S=this.main();if(S.contentSteering){for(const x of S.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(x));if(this.contentSteeringController_.assignTagProperties(S.uri,S.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(x=>{this.contentSteeringController_.on(x,C=>{this.trigger(_extends$3({},C))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const x=this.main();(this.contentSteeringController_.didDASHTagChange(x.uri,x.contentSteering)||(()=>{const Ce=this.contentSteeringController_.getAvailablePathways(),Ue=[];for(const je of x.playlists){const Xe=je.attributes.serviceLocation;if(Xe&&(Ue.push(Xe),!Ce.has(Xe)))return!0}return!!(!Ue.length&&Ce.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const S=this.contentSteeringController_.getPathway();if(!S)return;this.handlePathwayClones_();const C=this.main().playlists,R=new Set;let Ce=!1;Object.keys(C).forEach(Ue=>{const je=C[Ue],Xe=this.pathwayAttribute_(je),Ye=Xe&&S!==Xe;je.excludeUntil===1/0&&je.lastExcludeReason_==="content-steering"&&!Ye&&(delete je.excludeUntil,delete je.lastExcludeReason_,Ce=!0);const ht=!je.excludeUntil&&je.excludeUntil!==1/0;!R.has(je.id)&&Ye&&ht&&(R.add(je.id),je.excludeUntil=1/0,je.lastExcludeReason_="content-steering",this.logger_(`excluding ${je.id} for ${je.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(Ue=>{const je=this.mediaTypes_[Ue];if(je.activePlaylistLoader){const Xe=je.activePlaylistLoader.media_;Xe&&Xe.attributes.serviceLocation!==S&&(Ce=!0)}}),Ce&&this.changeSegmentPathway_()}handlePathwayClones_(){const x=this.main().playlists,C=this.contentSteeringController_.currentPathwayClones,R=this.contentSteeringController_.nextPathwayClones;if(C&&C.size||R&&R.size){for(const[Ue,je]of C.entries())R.get(Ue)||(this.mainPlaylistLoader_.updateOrDeleteClone(je),this.contentSteeringController_.excludePathway(Ue));for(const[Ue,je]of R.entries()){const Xe=C.get(Ue);if(!Xe){x.filter(et=>et.attributes["PATHWAY-ID"]===je["BASE-ID"]).forEach(et=>{this.mainPlaylistLoader_.addClonePathway(je,et)}),this.contentSteeringController_.addAvailablePathway(Ue);continue}this.equalPathwayClones_(Xe,je)||(this.mainPlaylistLoader_.updateOrDeleteClone(je,!0),this.contentSteeringController_.addAvailablePathway(Ue))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...R])))}}equalPathwayClones_(S,x){if(S["BASE-ID"]!==x["BASE-ID"]||S.ID!==x.ID||S["URI-REPLACEMENT"].HOST!==x["URI-REPLACEMENT"].HOST)return!1;const C=S["URI-REPLACEMENT"].PARAMS,R=x["URI-REPLACEMENT"].PARAMS;for(const Ce in C)if(C[Ce]!==R[Ce])return!1;for(const Ce in R)if(C[Ce]!==R[Ce])return!1;return!0}changeSegmentPathway_(){const S=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(S,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let S=0;const x="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(C=>{const R=this.mainPlaylistLoader_.getKeyIdSet(C);!R||!R.size||R.forEach(Ce=>{const Ue="usable",je=this.keyStatusMap_.has(Ce)&&this.keyStatusMap_.get(Ce)===Ue,Xe=C.lastExcludeReason_===x&&C.excludeUntil===1/0;je?je&&Xe&&(delete C.excludeUntil,delete C.lastExcludeReason_,this.logger_(`enabling playlist ${C.id} because key ID ${Ce} is ${Ue}`)):(C.excludeUntil!==1/0&&C.lastExcludeReason_!==x&&(C.excludeUntil=1/0,C.lastExcludeReason_=x,this.logger_(`excluding playlist ${C.id} because the key ID ${Ce} doesn't exist in the keyStatusMap or is not ${Ue}`)),S++)})}),S>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(C=>{const R=C&&C.attributes&&C.attributes.RESOLUTION&&C.attributes.RESOLUTION.height<720,Ce=C.excludeUntil===1/0&&C.lastExcludeReason_===x;R&&Ce&&(delete C.excludeUntil,videojs.log.warn(`enabling non-HD playlist ${C.id} because all playlists were excluded due to ${x} key IDs`))})}addKeyStatus_(S,x){const Ce=(typeof S=="string"?S:bufferToHexString(S)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${x}' with key ID ${Ce} added to the keyStatusMap`),this.keyStatusMap_.set(Ce,x)}updatePlaylistByKeyStatus(S,x){this.addKeyStatus_(S,x),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const enableFunction=(E,S,x)=>C=>{const R=E.main.playlists[S],Ce=isIncompatible(R),Ue=isEnabled(R);if(typeof C>"u")return Ue;C?delete R.disabled:R.disabled=!0;const je={renditionInfo:{id:S,bandwidth:R.attributes.BANDWIDTH,resolution:R.attributes.RESOLUTION,codecs:R.attributes.CODECS},cause:"fast-quality"};return C!==Ue&&!Ce&&(x(R),C?E.trigger({type:"renditionenabled",metadata:je}):E.trigger({type:"renditiondisabled",metadata:je})),C};class Representation{constructor(S,x,C){const{playlistController_:R}=S,Ce=R.fastQualityChange_.bind(R);if(x.attributes){const Ue=x.attributes.RESOLUTION;this.width=Ue&&Ue.width,this.height=Ue&&Ue.height,this.bandwidth=x.attributes.BANDWIDTH,this.frameRate=x.attributes["FRAME-RATE"]}this.codecs=codecsForPlaylist(R.main(),x),this.playlist=x,this.id=C,this.enabled=enableFunction(S.playlists,x.id,Ce)}}const renditionSelectionMixin=function(E){E.representations=()=>{const S=E.playlistController_.main(),x=isAudioOnly(S)?E.playlistController_.getAudioTrackPlaylists_():S.playlists;return x?x.filter(C=>!isIncompatible(C)).map((C,R)=>new Representation(E,C,C.id)):[]}},timerCancelEvents=["seeking","seeked","pause","playing","error"];class PlaybackWatcher extends videojs.EventTarget{constructor(S){super(),this.playlistController_=S.playlistController,this.tech_=S.tech,this.seekable=S.seekable,this.allowSeeksWithinUnsafeLiveWindow=S.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=S.liveRangeSafeTimeDelta,this.media=S.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=logger("PlaybackWatcher"),this.logger_("initialize");const x=()=>this.monitorCurrentTime_(),C=()=>this.monitorCurrentTime_(),R=()=>this.techWaiting_(),Ce=()=>this.resetTimeUpdate_(),Ue=this.playlistController_,je=["main","subtitle","audio"],Xe={};je.forEach(et=>{Xe[et]={reset:()=>this.resetSegmentDownloads_(et),updateend:()=>this.checkSegmentDownloads_(et)},Ue[`${et}SegmentLoader_`].on("appendsdone",Xe[et].updateend),Ue[`${et}SegmentLoader_`].on("playlistupdate",Xe[et].reset),this.tech_.on(["seeked","seeking"],Xe[et].reset)});const Ye=et=>{["main","audio"].forEach(ht=>{Ue[`${ht}SegmentLoader_`][et]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),Ye("off"))},this.clearSeekingAppendCheck_=()=>Ye("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),Ye("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",R),this.tech_.on(timerCancelEvents,Ce),this.tech_.on("canplay",C),this.tech_.one("play",x),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",R),this.tech_.off(timerCancelEvents,Ce),this.tech_.off("canplay",C),this.tech_.off("play",x),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),je.forEach(et=>{Ue[`${et}SegmentLoader_`].off("appendsdone",Xe[et].updateend),Ue[`${et}SegmentLoader_`].off("playlistupdate",Xe[et].reset),this.tech_.off(["seeked","seeking"],Xe[et].reset)}),this.checkCurrentTimeTimeout_&&window$1$1.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window$1$1.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window$1$1.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(S){const x=this.playlistController_[`${S}SegmentLoader_`];this[`${S}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${S} loader`),this[`${S}StalledDownloads_`]=0,this[`${S}Buffered_`]=x.buffered_()}checkSegmentDownloads_(S){const x=this.playlistController_,C=x[`${S}SegmentLoader_`],R=C.buffered_(),Ce=isRangeDifferent(this[`${S}Buffered_`],R);if(this[`${S}Buffered_`]=R,Ce){const Ue={bufferedRanges:R};x.trigger({type:"bufferedrangeschanged",metadata:Ue}),this.resetSegmentDownloads_(S);return}this[`${S}StalledDownloads_`]++,this.logger_(`found #${this[`${S}StalledDownloads_`]} ${S} appends that did not increase buffer (possible stalled download)`,{playlistId:C.playlist_&&C.playlist_.id,buffered:timeRangesToArray(R)}),!(this[`${S}StalledDownloads_`]<10)&&(this.logger_(`${S} loader stalled download exclusion`),this.resetSegmentDownloads_(S),this.tech_.trigger({type:"usage",name:`vhs-${S}-download-exclusion`}),S!=="subtitle"&&x.excludePlaylist({error:{message:`Excessive ${S} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const S=this.tech_.currentTime(),x=this.tech_.buffered();if(this.lastRecordedTime===S&&(!x.length||S+SAFE_TIME_DELTA>=x.end(x.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&S===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(S===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(createTimeRanges([this.lastRecordedTime,S]));const C={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:C}),this.consecutiveUpdates=0,this.lastRecordedTime=S}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const x=this.seekable(),C=this.tech_.currentTime(),R=this.afterSeekableWindow_(x,C,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let Ce;if(R&&(Ce=x.end(x.length-1)),this.beforeSeekableWindow_(x,C)){const Mt=x.start(0);Ce=Mt+(Mt===x.end(0)?0:SAFE_TIME_DELTA)}if(typeof Ce<"u")return this.logger_(`Trying to seek outside of seekable at time ${C} with seekable range ${printableRange(x)}. Seeking to ${Ce}.`),this.tech_.setCurrentTime(Ce),!0;const Ue=this.playlistController_.sourceUpdater_,je=this.tech_.buffered(),Xe=Ue.audioBuffer?Ue.audioBuffered():null,Ye=Ue.videoBuffer?Ue.videoBuffered():null,et=this.media(),ht=et.partTargetDuration?et.partTargetDuration:(et.targetDuration-TIME_FUDGE_FACTOR)*2,Dt=[Xe,Ye];for(let Mt=0;Mt<Dt.length;Mt++){if(!Dt[Mt])continue;if(timeAheadOf(Dt[Mt],C)<ht)return!1}const Ot=findNextRange(je,C);return Ot.length===0?!1:(Ce=Ot.start(0)+SAFE_TIME_DELTA,this.logger_(`Buffered region starts (${Ot.start(0)})  just beyond seek point (${C}). Seeking to ${Ce}.`),this.tech_.setCurrentTime(Ce),!0)}waiting_(){if(this.techWaiting_())return;const S=this.tech_.currentTime(),x=this.tech_.buffered(),C=findRange(x,S);if(C.length&&S+3<=C.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(S),this.logger_(`Stopped at ${S} while inside a buffered region [${C.start(0)} -> ${C.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const S=this.seekable(),x=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(S,x)){const je=S.end(S.length-1);return this.logger_(`Fell out of live window at time ${x}. Seeking to live point (seekable end) ${je}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(je),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const C=this.tech_.vhs.playlistController_.sourceUpdater_,R=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:C.audioBuffered(),videoBuffered:C.videoBuffered(),currentTime:x}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(x),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const Ue=findNextRange(R,x);return Ue.length>0?(this.logger_(`Stopped at ${x} and seeking to ${Ue.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(x),!0):!1}afterSeekableWindow_(S,x,C,R=!1){if(!S.length)return!1;let Ce=S.end(S.length-1)+SAFE_TIME_DELTA;const Ue=!C.endList,je=typeof C.partTargetDuration=="number";return Ue&&(je||R)&&(Ce=S.end(S.length-1)+C.targetDuration*3),x>Ce}beforeSeekableWindow_(S,x){return!!(S.length&&S.start(0)>0&&x<S.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:S,audioBuffered:x,currentTime:C}){if(!S)return;let R;if(S.length&&x.length){const Ce=findRange(S,C-3),Ue=findRange(S,C),je=findRange(x,C);je.length&&!Ue.length&&Ce.length&&(R={start:Ce.end(0),end:je.end(0)})}else findNextRange(S,C).length||(R=this.gapFromVideoUnderflow_(S,C));return R?(this.logger_(`Encountered a gap in video from ${R.start} to ${R.end}. Seeking to current time ${C}`),!0):!1}skipTheGap_(S){const x=this.tech_.buffered(),C=this.tech_.currentTime(),R=findNextRange(x,C);if(this.resetTimeUpdate_(),R.length===0||C!==S)return;this.logger_("skipTheGap_:","currentTime:",C,"scheduled currentTime:",S,"nextRange start:",R.start(0)),this.tech_.setCurrentTime(R.start(0)+TIME_FUDGE_FACTOR);const Ce={gapInfo:{from:C,to:R.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:Ce}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(S,x){const C=findGaps(S);for(let R=0;R<C.length;R++){const Ce=C.start(R),Ue=C.end(R);if(x-Ce<4&&x-Ce>2)return{start:Ce,end:Ue}}return null}}const defaultOptions={errorInterval:30,getSource(E){const x=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return E(x)}},initPlugin=function(E,S){let x=0,C=0;const R=merge(defaultOptions,S);E.ready(()=>{E.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const Ce=function(){C&&E.currentTime(C)},Ue=function(et){et!=null&&(C=E.duration()!==1/0&&E.currentTime()||0,E.one("loadedmetadata",Ce),E.src(et),E.trigger({type:"usage",name:"vhs-error-reload"}),E.play())},je=function(){if(Date.now()-x<R.errorInterval*1e3){E.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!R.getSource||typeof R.getSource!="function"){videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return x=Date.now(),R.getSource.call(E,Ue)},Xe=function(){E.off("loadedmetadata",Ce),E.off("error",je),E.off("dispose",Xe)},Ye=function(et){Xe(),initPlugin(E,et)};E.on("error",je),E.on("dispose",Xe),E.reloadSourceOnError=Ye},reloadSourceOnError=function(E){initPlugin(this,E)};var version$4="3.15.0",version$3="7.0.3",version$2="1.3.1",version$1="7.2.0",version$7="4.0.2";const Vhs={PlaylistLoader,Playlist,utils,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,lastBandwidthSelector,movingAverageBandwidthSelector,comparePlaylistBandwidth,comparePlaylistResolution,xhr:xhrFactory()};Object.keys(Config).forEach(E=>{Object.defineProperty(Vhs,E,{get(){return videojs.log.warn(`using Vhs.${E} is UNSAFE be sure you know what you are doing`),Config[E]},set(S){if(videojs.log.warn(`using Vhs.${E} is UNSAFE be sure you know what you are doing`),typeof S!="number"||S<0){videojs.log.warn(`value of Vhs.${E} must be greater than or equal to 0`);return}Config[E]=S}})});const LOCAL_STORAGE_KEY="videojs-vhs",handleVhsMediaChange=function(E,S){const x=S.media();let C=-1;for(let R=0;R<E.length;R++)if(E[R].id===x.id){C=R;break}E.selectedIndex_=C,E.trigger({selectedIndex:C,type:"change"})},handleVhsLoadedMetadata=function(E,S){S.representations().forEach(x=>{E.addQualityLevel(x)}),handleVhsMediaChange(E,S.playlists)};Vhs.canPlaySource=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const emeKeySystems=(E,S,x)=>{if(!E)return E;let C={};S&&S.attributes&&S.attributes.CODECS&&(C=unwrapCodecList(parseCodecs(S.attributes.CODECS))),x&&x.attributes&&x.attributes.CODECS&&(C.audio=x.attributes.CODECS);const R=getMimeForCodec(C.video),Ce=getMimeForCodec(C.audio),Ue={};for(const je in E)Ue[je]={},Ce&&(Ue[je].audioContentType=Ce),R&&(Ue[je].videoContentType=R),S.contentProtection&&S.contentProtection[je]&&S.contentProtection[je].pssh&&(Ue[je].pssh=S.contentProtection[je].pssh),typeof E[je]=="string"&&(Ue[je].url=E[je]);return merge(E,Ue)},getAllPsshKeySystemsOptions=(E,S)=>E.reduce((x,C)=>{if(!C.contentProtection)return x;const R=S.reduce((Ce,Ue)=>{const je=C.contentProtection[Ue];return je&&je.pssh&&(Ce[Ue]={pssh:je.pssh}),Ce},{});return Object.keys(R).length&&x.push(R),x},[]),waitForKeySessionCreation=({player:E,sourceKeySystems:S,audioMedia:x,mainPlaylists:C})=>{if(!E.eme.initializeMediaKeys)return Promise.resolve();const R=x?C.concat([x]):C,Ce=getAllPsshKeySystemsOptions(R,Object.keys(S)),Ue=[],je=[];return Ce.forEach(Xe=>{je.push(new Promise((Ye,et)=>{E.tech_.one("keysessioncreated",Ye)})),Ue.push(new Promise((Ye,et)=>{E.eme.initializeMediaKeys({keySystems:Xe},ht=>{if(ht){et(ht);return}Ye()})}))}),Promise.race([Promise.all(Ue),Promise.race(je)])},setupEmeOptions=({player:E,sourceKeySystems:S,media:x,audioMedia:C})=>{const R=emeKeySystems(S,x,C);return R?(E.currentSource().keySystems=R,R&&!E.eme?(videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},getVhsLocalStorage=()=>{if(!window$1$1.localStorage)return null;const E=window$1$1.localStorage.getItem(LOCAL_STORAGE_KEY);if(!E)return null;try{return JSON.parse(E)}catch{return null}},updateVhsLocalStorage=E=>{if(!window$1$1.localStorage)return!1;let S=getVhsLocalStorage();S=S?merge(S,E):E;try{window$1$1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(S))}catch{return!1}return S},expandDataUri=E=>E.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(E.substring(E.indexOf(",")+1)):E,addOnRequestHook=(E,S)=>{E._requestCallbackSet||(E._requestCallbackSet=new Set),E._requestCallbackSet.add(S)},addOnResponseHook=(E,S)=>{E._responseCallbackSet||(E._responseCallbackSet=new Set),E._responseCallbackSet.add(S)},removeOnRequestHook=(E,S)=>{E._requestCallbackSet&&(E._requestCallbackSet.delete(S),E._requestCallbackSet.size||delete E._requestCallbackSet)},removeOnResponseHook=(E,S)=>{E._responseCallbackSet&&(E._responseCallbackSet.delete(S),E._responseCallbackSet.size||delete E._responseCallbackSet)};Vhs.supportsNativeHls=function(){if(!document$1$1||!document$1$1.createElement)return!1;const E=document$1$1.createElement("video");return videojs.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(x){return/maybe|probably/i.test(E.canPlayType(x))}):!1}();Vhs.supportsNativeDash=function(){return!document$1$1||!document$1$1.createElement||!videojs.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(document$1$1.createElement("video").canPlayType("application/dash+xml"))}();Vhs.supportsTypeNatively=E=>E==="hls"?Vhs.supportsNativeHls:E==="dash"?Vhs.supportsNativeDash:!1;Vhs.isSupported=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Vhs.xhr.onRequest=function(E){addOnRequestHook(Vhs.xhr,E)};Vhs.xhr.onResponse=function(E){addOnResponseHook(Vhs.xhr,E)};Vhs.xhr.offRequest=function(E){removeOnRequestHook(Vhs.xhr,E)};Vhs.xhr.offResponse=function(E){removeOnResponseHook(Vhs.xhr,E)};const Component=videojs.getComponent("Component");class VhsHandler extends Component{constructor(S,x,C){if(super(x,C.vhs),typeof C.initialBandwidth=="number"&&(this.options_.bandwidth=C.initialBandwidth),this.logger_=logger("VhsHandler"),x.options_&&x.options_.playerId){const R=videojs.getPlayer(x.options_.playerId);this.player_=R}if(this.tech_=x,this.source_=S,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&x.overrideNativeAudioTracks&&x.overrideNativeVideoTracks)x.overrideNativeAudioTracks(!0),x.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(x.featuresNativeVideoTracks||x.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(document$1$1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],R=>{const Ce=document$1$1.fullscreenElement||document$1$1.webkitFullscreenElement||document$1$1.mozFullScreenElement||document$1$1.msFullscreenElement;Ce&&Ce.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(S={}){if(this.options_=merge(this.options_,S),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const C=getVhsLocalStorage();C&&C.bandwidth&&(this.options_.bandwidth=C.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),C&&C.throughput&&(this.options_.throughput=C.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Config.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(C=>{typeof this.source_[C]<"u"&&(this.options_[C]=this.source_[C])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const x=this.options_.customPixelRatio;typeof x=="number"&&x>=0&&(this.customPixelRatio=x)}setOptions(S={}){this.setOptions_(S)}src(S,x){if(!S)return;this.setOptions_(),this.options_.src=expandDataUri(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Vhs,this.options_.sourceType=simpleTypeFromSourceType(x),this.options_.seekTo=Ce=>{this.tech_.setCurrentTime(Ce)},this.options_.player_=this.player_,this.playlistController_=new PlaylistController(this.options_);const C=merge({liveRangeSafeTimeDelta:SAFE_TIME_DELTA},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new PlaybackWatcher(C),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const Ce=videojs.players[this.tech_.options_.playerId];let Ue=this.playlistController_.error;typeof Ue=="object"&&!Ue.code?Ue.code=3:typeof Ue=="string"&&(Ue={message:Ue,code:3}),Ce.error(Ue)});const R=this.options_.bufferBasedABR?Vhs.movingAverageBandwidthSelector(.55):Vhs.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):R.bind(this),this.playlistController_.selectInitialPlaylist=Vhs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(Ce){this.playlistController_.selectPlaylist=Ce.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(Ce){this.playlistController_.mainSegmentLoader_.throughput.rate=Ce,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let Ce=this.playlistController_.mainSegmentLoader_.bandwidth;const Ue=window$1$1.navigator.connection||window$1$1.navigator.mozConnection||window$1$1.navigator.webkitConnection,je=1e7;if(this.options_.useNetworkInformationApi&&Ue){const Xe=Ue.downlink*1e3*1e3;Xe>=je&&Ce>=je?Ce=Math.max(Ce,Xe):Ce=Xe}return Ce},set(Ce){this.playlistController_.mainSegmentLoader_.bandwidth=Ce,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const Ce=1/(this.bandwidth||1);let Ue;return this.throughput>0?Ue=1/this.throughput:Ue=0,Math.floor(1/(Ce+Ue))},set(){videojs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>timeRangesToArray(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>timeRangesToArray(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&updateVhsLocalStorage({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{renditionSelectionMixin(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window$1$1.URL.createObjectURL(this.playlistController_.mediaSource),(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const S=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),waitForKeySessionCreation({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:S&&S.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(x=>{this.logger_("error while creating EME key session",x),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const S=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,x=setupEmeOptions({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:S&&S.media()});if(this.player_.tech_.on("keystatuschange",C=>{this.playlistController_.updatePlaylistByKeyStatus(C.keyId,C.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!x){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const S=videojs.players[this.tech_.options_.playerId];!S||!S.qualityLevels||this.qualityLevels_||(this.qualityLevels_=S.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{handleVhsLoadedMetadata(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{handleVhsMediaChange(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":version$4,"mux.js":version$3,"mpd-parser":version$2,"m3u8-parser":version$1,"aes-decrypter":version$7}}version(){return this.constructor.version()}canChangeType(){return SourceUpdater.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(S){this.playlistController_.setCurrentTime(S)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&window$1$1.URL.revokeObjectURL&&(window$1$1.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(S,x){return getProgramTime({playlist:this.playlistController_.media(),time:S,callback:x})}seekToProgramTime(S,x,C=!0,R=2){return seekToProgramTime({programTime:S,playlist:this.playlistController_.media(),retryCount:R,pauseAfterSeek:C,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:x})}setupXhrHooks_(){this.xhr.onRequest=S=>{addOnRequestHook(this.xhr,S)},this.xhr.onResponse=S=>{addOnResponseHook(this.xhr,S)},this.xhr.offRequest=S=>{removeOnRequestHook(this.xhr,S)},this.xhr.offResponse=S=>{removeOnResponseHook(this.xhr,S)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const S=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],x=["gapjumped","playedrangeschanged"];S.forEach(C=>{this.playlistController_.on(C,R=>{this.player_.trigger(_extends$3({},R))})}),x.forEach(C=>{this.playbackWatcher_.on(C,R=>{this.player_.trigger(_extends$3({},R))})})}}const VhsSourceHandler={name:"videojs-http-streaming",VERSION:version$4,canHandleSource(E,S={}){const x=merge(videojs.options,S);return!x.vhs.experimentalUseMMS&&!browserSupportsCodec("avc1.4d400d,mp4a.40.2",!1)?!1:VhsSourceHandler.canPlayType(E.type,x)},handleSource(E,S,x={}){const C=merge(videojs.options,x);return S.vhs=new VhsHandler(E,S,C),S.vhs.xhr=xhrFactory(),S.vhs.setupXhrHooks_(),S.vhs.src(E.src,E.type),S.vhs},canPlayType(E,S){const x=simpleTypeFromSourceType(E);if(!x)return"";const C=VhsSourceHandler.getOverrideNative(S);return!Vhs.supportsTypeNatively(x)||C?"maybe":""},getOverrideNative(E={}){const{vhs:S={}}=E,x=!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS),{overrideNative:C=x}=S;return C}},supportsNativeMediaSources=()=>browserSupportsCodec("avc1.4d400d,mp4a.40.2",!0);supportsNativeMediaSources()&&videojs.getTech("Html5").registerSourceHandler(VhsSourceHandler,0);videojs.VhsHandler=VhsHandler;videojs.VhsSourceHandler=VhsSourceHandler;videojs.Vhs=Vhs;videojs.use||videojs.registerComponent("Vhs",Vhs);videojs.options.vhs=videojs.options.vhs||{};(!videojs.getPlugin||!videojs.getPlugin("reloadSourceOnError"))&&videojs.registerPlugin("reloadSourceOnError",reloadSourceOnError);(function(){try{if(typeof document<"u"){var E=document.createElement("style");E.appendChild(document.createTextNode(".mapdiv[data-v-d05fc6bc]{width:100%;height:100%}.custom-control-wrapper[data-v-d099a3a6]{display:none}.mapdiv .custom-control-wrapper[data-v-d099a3a6]{display:inline-block}.info-window-wrapper[data-v-cbe1707b]{display:none}.mapdiv .info-window-wrapper[data-v-cbe1707b]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(E)}}catch(S){console.error("vite-plugin-css-injected-by-js",S)}})();var Be$1=Object.defineProperty,Ze=(E,S,x)=>S in E?Be$1(E,S,{enumerable:!0,configurable:!0,writable:!0,value:x}):E[S]=x,se$1=(E,S,x)=>(Ze(E,typeof S!="symbol"?S+"":S,x),x);const B$1=Symbol("map"),Z$1=Symbol("api"),le$1=Symbol("marker"),ce$1=Symbol("markerCluster"),ee$1=Symbol("CustomMarker"),Ae$1=Symbol("mapTilesLoaded"),F$1=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function De$1(E,S,x,C){function R(Ce){return Ce instanceof x?Ce:new x(function(Ue){Ue(Ce)})}return new(x||(x=Promise))(function(Ce,Ue){function je(et){try{Ye(C.next(et))}catch(ht){Ue(ht)}}function Xe(et){try{Ye(C.throw(et))}catch(ht){Ue(ht)}}function Ye(et){et.done?Ce(et.value):R(et.value).then(je,Xe)}Ye((C=C.apply(E,[])).next())})}var Fe$1=function E(S,x){if(S===x)return!0;if(S&&x&&typeof S=="object"&&typeof x=="object"){if(S.constructor!==x.constructor)return!1;var C,R,Ce;if(Array.isArray(S)){if(C=S.length,C!=x.length)return!1;for(R=C;R--!==0;)if(!E(S[R],x[R]))return!1;return!0}if(S.constructor===RegExp)return S.source===x.source&&S.flags===x.flags;if(S.valueOf!==Object.prototype.valueOf)return S.valueOf()===x.valueOf();if(S.toString!==Object.prototype.toString)return S.toString()===x.toString();if(Ce=Object.keys(S),C=Ce.length,C!==Object.keys(x).length)return!1;for(R=C;R--!==0;)if(!Object.prototype.hasOwnProperty.call(x,Ce[R]))return!1;for(R=C;R--!==0;){var Ue=Ce[R];if(!E(S[Ue],x[Ue]))return!1}return!0}return S!==S&&x!==x};const pe="__googleMapsScriptId";var N$1;(function(E){E[E.INITIALIZED=0]="INITIALIZED",E[E.LOADING=1]="LOADING",E[E.SUCCESS=2]="SUCCESS",E[E.FAILURE=3]="FAILURE"})(N$1||(N$1={}));class j{constructor({apiKey:S,authReferrerPolicy:x,channel:C,client:R,id:Ce=pe,language:Ue,libraries:je=[],mapIds:Xe,nonce:Ye,region:et,retries:ht=3,url:Dt="https://maps.googleapis.com/maps/api/js",version:Ot}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=S,this.authReferrerPolicy=x,this.channel=C,this.client=R,this.id=Ce||pe,this.language=Ue,this.libraries=je,this.mapIds=Xe,this.nonce=Ye,this.region=et,this.retries=ht,this.url=Dt,this.version=Ot,j.instance){if(!Fe$1(this.options,j.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(j.instance.options)}`);return j.instance}j.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?N$1.FAILURE:this.done?N$1.SUCCESS:this.loading?N$1.LOADING:N$1.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let S=this.url;return S+="?callback=__googleMapsCallback",this.apiKey&&(S+=`&key=${this.apiKey}`),this.channel&&(S+=`&channel=${this.channel}`),this.client&&(S+=`&client=${this.client}`),this.libraries.length>0&&(S+=`&libraries=${this.libraries.join(",")}`),this.language&&(S+=`&language=${this.language}`),this.region&&(S+=`&region=${this.region}`),this.version&&(S+=`&v=${this.version}`),this.mapIds&&(S+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(S+=`&auth_referrer_policy=${this.authReferrerPolicy}`),S}deleteScript(){const S=document.getElementById(this.id);S&&S.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((S,x)=>{this.loadCallback(C=>{C?x(C.error):S(window.google)})})}importLibrary(S){return this.execute(),google.maps.importLibrary(S)}loadCallback(S){this.callbacks.push(S),this.execute()}setScript(){var S,x;if(document.getElementById(this.id)){this.callback();return}const C={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(C).forEach(Ce=>!C[Ce]&&delete C[Ce]),!((x=(S=window==null?void 0:window.google)===null||S===void 0?void 0:S.maps)===null||x===void 0)&&x.importLibrary||(Ce=>{let Ue,je,Xe,Ye="The Google Maps JavaScript API",et="google",ht="importLibrary",Dt="__ib__",Ot=document,Mt=window;Mt=Mt[et]||(Mt[et]={});const St=Mt.maps||(Mt.maps={}),Ut=new Set,kt=new URLSearchParams,Ft=()=>Ue||(Ue=new Promise((Nt,Gt)=>De$1(this,void 0,void 0,function*(){var Zt;yield je=Ot.createElement("script"),je.id=this.id,kt.set("libraries",[...Ut]+"");for(Xe in Ce)kt.set(Xe.replace(/[A-Z]/g,ri=>"_"+ri[0].toLowerCase()),Ce[Xe]);kt.set("callback",et+".maps."+Dt),je.src=this.url+"?"+kt,St[Dt]=Nt,je.onerror=()=>Ue=Gt(Error(Ye+" could not load.")),je.nonce=this.nonce||((Zt=Ot.querySelector("script[nonce]"))===null||Zt===void 0?void 0:Zt.nonce)||"",Ot.head.append(je)})));St[ht]?console.warn(Ye+" only loads once. Ignoring:",Ce):St[ht]=(Nt,...Gt)=>Ut.add(Nt)&&Ft().then(()=>St[ht](Nt,...Gt))})(C);const R=this.libraries.map(Ce=>this.importLibrary(Ce));R.length||R.push(this.importLibrary("core")),Promise.all(R).then(()=>this.callback(),Ce=>{const Ue=new ErrorEvent("error",{error:Ce});this.loadErrorCallback(Ue)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(S){if(this.errors.push(S),this.errors.length<=this.retries){const x=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${x} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},x)}else this.onerrorEvent=S,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(S=>{S(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function Ve$1(E){return class extends E.OverlayView{constructor(S){super(),se$1(this,"element"),se$1(this,"opts");const{element:x,...C}=S;this.element=x,this.opts=C,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof E.LatLng?this.opts.position:new E.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const S=this.element;return S.style.display!=="none"&&S.style.visibility!=="hidden"&&(S.style.opacity===""||Number(S.style.opacity)>.01)}onAdd(){if(!this.element)return;const S=this.getPanes();S&&S.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const S=this.getProjection(),x=S==null?void 0:S.fromLatLngToDivPixel(this.getPosition());if(x){this.element.style.position="absolute";const C=this.element.offsetHeight,R=this.element.offsetWidth;let Ce,Ue;switch(this.opts.anchorPoint){case"TOP_CENTER":Ce=x.x-R/2,Ue=x.y;break;case"BOTTOM_CENTER":Ce=x.x-R/2,Ue=x.y-C;break;case"LEFT_CENTER":Ce=x.x,Ue=x.y-C/2;break;case"RIGHT_CENTER":Ce=x.x-R,Ue=x.y-C/2;break;case"TOP_LEFT":Ce=x.x,Ue=x.y;break;case"TOP_RIGHT":Ce=x.x-R,Ue=x.y;break;case"BOTTOM_LEFT":Ce=x.x,Ue=x.y-C;break;case"BOTTOM_RIGHT":Ce=x.x-R,Ue=x.y-C;break;default:Ce=x.x-R/2,Ue=x.y-C/2}this.element.style.left=Ce+"px",this.element.style.top=Ue+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(S){const{element:x,...C}=S;this.element=x,this.opts=C,this.draw()}}}let fe$1;const me$1=["bounds_changed","center_changed","click","contextmenu","dblclick","drag","dragend","dragstart","heading_changed","idle","isfractionalzoomenabled_changed","mapcapabilities_changed","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","renderingtype_changed","rightclick","tilesloaded","tilt_changed","zoom_changed"],ze$1=defineComponent({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places","marker"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},isFractionalZoomEnabled:{type:Boolean,required:!1,default:void 0},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1},nonce:{type:String,default:""}},emits:me$1,setup(E,{emit:S}){const x=ref(),C=ref(!1),R=ref(),Ce=ref(),Ue=ref(!1);provide(B$1,R),provide(Z$1,Ce),provide(Ae$1,Ue);const je=()=>{const ht={...E};Object.keys(ht).forEach(Mt=>{ht[Mt]===void 0&&delete ht[Mt]});const Dt=Mt=>{var St;return Mt?{position:(St=Ce.value)==null?void 0:St.ControlPosition[Mt]}:{}},Ot={scaleControlOptions:E.scaleControlStyle?{style:E.scaleControlStyle}:{},panControlOptions:Dt(E.panControlPosition),zoomControlOptions:Dt(E.zoomControlPosition),rotateControlOptions:Dt(E.rotateControlPosition),streetViewControlOptions:Dt(E.streetViewControlPosition),fullscreenControlOptions:Dt(E.fullscreenControlPosition),disableDefaultUI:E.disableDefaultUi};return{...ht,...Ot}},Xe=watch([Ce,R],([ht,Dt])=>{const Ot=ht,Mt=Dt;Ot&&Mt&&(Ot.event.addListenerOnce(Mt,"tilesloaded",()=>{Ue.value=!0}),setTimeout(Xe,0))},{immediate:!0}),Ye=()=>{try{const{apiKey:ht,region:Dt,version:Ot,language:Mt,libraries:St,nonce:Ut}=E;fe$1=new j({apiKey:ht,region:Dt,version:Ot,language:Mt,libraries:St,nonce:Ut})}catch(ht){console.error(ht)}},et=ht=>{Ce.value=markRaw(ht.maps),R.value=markRaw(new ht.maps.Map(x.value,je()));const Dt=Ve$1(Ce.value);Ce.value[ee$1]=Dt,me$1.forEach(Mt=>{var St;(St=R.value)==null||St.addListener(Mt,Ut=>S(Mt,Ut))}),C.value=!0;const Ot=Object.keys(E).filter(Mt=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom","nonce"].includes(Mt)).map(Mt=>toRef(E,Mt));watch([()=>E.center,()=>E.zoom,...Ot],([Mt,St],[Ut,kt])=>{var Ft,Nt,Gt;const{center:Zt,zoom:ri,...li}=je();(Ft=R.value)==null||Ft.setOptions(li),St!==void 0&&St!==kt&&((Nt=R.value)==null||Nt.setZoom(St));const hi=!Ut||Mt.lng!==Ut.lng||Mt.lat!==Ut.lat;Mt&&hi&&((Gt=R.value)==null||Gt.panTo(Mt))})};return onMounted$1(()=>{E.apiPromise&&E.apiPromise instanceof Promise?E.apiPromise.then(et):(Ye(),fe$1.load().then(et))}),onBeforeUnmount(()=>{var ht;Ue.value=!1,R.value&&((ht=Ce.value)==null||ht.event.clearInstanceListeners(R.value))}),{mapRef:x,ready:C,map:R,api:Ce,mapTilesLoaded:Ue}}}),te$1=(E,S)=>{const x=E.__vccOpts||E;for(const[C,R]of S)x[C]=R;return x},Ge$1={ref:"mapRef",class:"mapdiv"};function He$1(E,S,x,C,R,Ce){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",Ge$1,null,512),renderSlot(E.$slots,"default",normalizeProps(guardReactiveProps({ready:E.ready,map:E.map,api:E.api,mapTilesLoaded:E.mapTilesLoaded})),void 0)])}const Et=te$1(ze$1,[["render",He$1],["__scopeId","data-v-d05fc6bc"]]);function We$1(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var Ke=function E(S,x){if(S===x)return!0;if(S&&x&&typeof S=="object"&&typeof x=="object"){if(S.constructor!==x.constructor)return!1;var C,R,Ce;if(Array.isArray(S)){if(C=S.length,C!=x.length)return!1;for(R=C;R--!==0;)if(!E(S[R],x[R]))return!1;return!0}if(S.constructor===RegExp)return S.source===x.source&&S.flags===x.flags;if(S.valueOf!==Object.prototype.valueOf)return S.valueOf()===x.valueOf();if(S.toString!==Object.prototype.toString)return S.toString()===x.toString();if(Ce=Object.keys(S),C=Ce.length,C!==Object.keys(x).length)return!1;for(R=C;R--!==0;)if(!Object.prototype.hasOwnProperty.call(x,Ce[R]))return!1;for(R=C;R--!==0;){var Ue=Ce[R];if(!E(S[Ue],x[Ue]))return!1}return!0}return S!==S&&x!==x};const A$1=We$1(Ke),ge$1=["click","drag","dragend","dragstart","gmp-click"],Pt$1=defineComponent({name:"AdvancedMarker",props:{options:{type:Object,required:!0},pinOptions:{type:Object,required:!1}},emits:ge$1,setup(E,{emit:S,expose:x,slots:C}){const R=toRef(E,"options"),Ce=toRef(E,"pinOptions"),Ue=ref(),je=inject(B$1,ref()),Xe=inject(Z$1,ref()),Ye=inject(ce$1,ref()),et=computed(()=>!!(Ye.value&&Xe.value&&Ue.value instanceof google.maps.marker.AdvancedMarkerElement));return watch([je,R,Ce],async(ht,[Dt,Ot,Mt])=>{var St,Ut,kt;const Ft=!A$1(R.value,Ot)||!A$1(Ce.value,Mt)||je.value!==Dt;if(!je.value||!Xe.value||!Ft)return;const{AdvancedMarkerElement:Nt,PinElement:Gt}=Xe.value.marker;if(Ue.value){const{map:Zt,content:ri,...li}=R.value;Object.assign(Ue.value,{content:Ce.value?new Gt(Ce.value).element:ri,...li}),et.value&&((St=Ye.value)==null||St.removeMarker(Ue.value),(Ut=Ye.value)==null||Ut.addMarker(Ue.value))}else Ce.value&&(R.value.content=new Gt(Ce.value).element),Ue.value=markRaw(new Nt(R.value)),et.value?(kt=Ye.value)==null||kt.addMarker(Ue.value):Ue.value.map=je.value,ge$1.forEach(Zt=>{var ri;(ri=Ue.value)==null||ri.addListener(Zt,li=>S(Zt,li))})},{immediate:!0}),onBeforeUnmount(()=>{var ht,Dt;Ue.value&&((ht=Xe.value)==null||ht.event.clearInstanceListeners(Ue.value),et.value?(Dt=Ye.value)==null||Dt.removeMarker(Ue.value):Ue.value.map=null)}),provide(le$1,Ue),x({marker:Ue}),()=>{var ht;return(ht=C.default)==null?void 0:ht.call(C)}}});F$1.concat(["bounds_changed"]);F$1.concat(["center_changed","radius_changed"]);var D;(function(E){E.CLUSTERING_BEGIN="clusteringbegin",E.CLUSTERING_END="clusteringend",E.CLUSTER_CLICK="click"})(D||(D={}));Object.values(D);var lottie={exports:{}};(function(module,exports){typeof navigator<"u"&&function(E,S){module.exports=S()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(S){_useWebWorker=!!S},getWebWorker=function(){return _useWebWorker},setLocationHref=function(S){locationHref=S},getLocationHref=function(){return locationHref};function createTag(E){return document.createElement(E)}function extendPrototype(E,S){var x,C=E.length,R;for(x=0;x<C;x+=1){R=E[x].prototype;for(var Ce in R)Object.prototype.hasOwnProperty.call(R,Ce)&&(S.prototype[Ce]=R[Ce])}}function getDescriptor(E,S){return Object.getOwnPropertyDescriptor(E,S)}function createProxyFunction(E){function S(){}return S.prototype=E,S}var audioControllerFactory=function(){function E(S){this.audios=[],this.audioFactory=S,this._volume=1,this._isMuted=!1}return E.prototype={addAudio:function(x){this.audios.push(x)},pause:function(){var x,C=this.audios.length;for(x=0;x<C;x+=1)this.audios[x].pause()},resume:function(){var x,C=this.audios.length;for(x=0;x<C;x+=1)this.audios[x].resume()},setRate:function(x){var C,R=this.audios.length;for(C=0;C<R;C+=1)this.audios[C].setRate(x)},createAudio:function(x){return this.audioFactory?this.audioFactory(x):window.Howl?new window.Howl({src:[x]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(x){this.audioFactory=x},setVolume:function(x){this._volume=x,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var x,C=this.audios.length;for(x=0;x<C;x+=1)this.audios[x].volume(this._volume*(this._isMuted?0:1))}},function(){return new E}}(),createTypedArray=function(){function E(x,C){var R=0,Ce=[],Ue;switch(x){case"int16":case"uint8c":Ue=1;break;default:Ue=1.1;break}for(R=0;R<C;R+=1)Ce.push(Ue);return Ce}function S(x,C){return x==="float32"?new Float32Array(C):x==="int16"?new Int16Array(C):x==="uint8c"?new Uint8ClampedArray(C):E(x,C)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?S:E}();function createSizedArray(E){return Array.apply(null,{length:E})}function _typeof$6(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(x){return typeof x}:_typeof$6=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof$6(E)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var E=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],S,x=E.length;for(S=0;S<x;S+=1)BMMath[E[S]]=Math[E[S]]})(),BMMath.random=Math.random,BMMath.abs=function(E){var S=_typeof$6(E);if(S==="object"&&E.length){var x=createSizedArray(E.length),C,R=E.length;for(C=0;C<R;C+=1)x[C]=Math.abs(E[C]);return x}return Math.abs(E)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(E){E.style.position="absolute",E.style.top=0,E.style.left=0,E.style.display="block",E.style.transformOrigin="0 0",E.style.webkitTransformOrigin="0 0",E.style.backfaceVisibility="visible",E.style.webkitBackfaceVisibility="visible",E.style.transformStyle="preserve-3d",E.style.webkitTransformStyle="preserve-3d",E.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(E,S,x,C){this.type=E,this.currentTime=S,this.totalTime=x,this.direction=C<0?-1:1}function BMCompleteEvent(E,S){this.type=E,this.direction=S<0?-1:1}function BMCompleteLoopEvent(E,S,x,C){this.type=E,this.currentLoop=x,this.totalLoops=S,this.direction=C<0?-1:1}function BMSegmentStartEvent(E,S,x){this.type=E,this.firstFrame=S,this.totalFrames=x}function BMDestroyEvent(E,S){this.type=E,this.target=S}function BMRenderFrameErrorEvent(E,S){this.type="renderFrameError",this.nativeError=E,this.currentTime=S}function BMConfigErrorEvent(E){this.type="configError",this.nativeError=E}var createElementID=function(){var E=0;return function(){return E+=1,idPrefix$1+"__lottie_element_"+E}}();function HSVtoRGB(E,S,x){var C,R,Ce,Ue,je,Xe,Ye,et;switch(Ue=Math.floor(E*6),je=E*6-Ue,Xe=x*(1-S),Ye=x*(1-je*S),et=x*(1-(1-je)*S),Ue%6){case 0:C=x,R=et,Ce=Xe;break;case 1:C=Ye,R=x,Ce=Xe;break;case 2:C=Xe,R=x,Ce=et;break;case 3:C=Xe,R=Ye,Ce=x;break;case 4:C=et,R=Xe,Ce=x;break;case 5:C=x,R=Xe,Ce=Ye;break}return[C,R,Ce]}function RGBtoHSV(E,S,x){var C=Math.max(E,S,x),R=Math.min(E,S,x),Ce=C-R,Ue,je=C===0?0:Ce/C,Xe=C/255;switch(C){case R:Ue=0;break;case E:Ue=S-x+Ce*(S<x?6:0),Ue/=6*Ce;break;case S:Ue=x-E+Ce*2,Ue/=6*Ce;break;case x:Ue=E-S+Ce*4,Ue/=6*Ce;break}return[Ue,je,Xe]}function addSaturationToRGB(E,S){var x=RGBtoHSV(E[0]*255,E[1]*255,E[2]*255);return x[1]+=S,x[1]>1?x[1]=1:x[1]<=0&&(x[1]=0),HSVtoRGB(x[0],x[1],x[2])}function addBrightnessToRGB(E,S){var x=RGBtoHSV(E[0]*255,E[1]*255,E[2]*255);return x[2]+=S,x[2]>1?x[2]=1:x[2]<0&&(x[2]=0),HSVtoRGB(x[0],x[1],x[2])}function addHueToRGB(E,S){var x=RGBtoHSV(E[0]*255,E[1]*255,E[2]*255);return x[0]+=S/360,x[0]>1?x[0]-=1:x[0]<0&&(x[0]+=1),HSVtoRGB(x[0],x[1],x[2])}var rgbToHex=function(){var E=[],S,x;for(S=0;S<256;S+=1)x=S.toString(16),E[S]=x.length===1?"0"+x:x;return function(C,R,Ce){return C<0&&(C=0),R<0&&(R=0),Ce<0&&(Ce=0),"#"+E[C]+E[R]+E[Ce]}}(),setSubframeEnabled=function(S){subframeEnabled=!!S},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(S){expressionsPlugin=S},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(S){expressionsInterfaces=S},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(S){defaultCurveSegments=S},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(S){idPrefix$1=S};function createNS(E){return document.createElementNS(svgNS,E)}function _typeof$5(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(x){return typeof x}:_typeof$5=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof$5(E)}var dataManager=function(){var E=1,S=[],x,C,R={onmessage:function(){},postMessage:function(Ot){x({data:Ot})}},Ce={postMessage:function(Ot){R.onmessage({data:Ot})}};function Ue(Dt){if(window.Worker&&window.Blob&&getWebWorker()){var Ot=new Blob(["var _workerSelf = self; self.onmessage = ",Dt.toString()],{type:"text/javascript"}),Mt=URL.createObjectURL(Ot);return new Worker(Mt)}return x=Dt,R}function je(){C||(C=Ue(function(Ot){function Mt(){function Ut(Ri,ui){var vi,si,ai=Ri.length,Ci,Ei,zi,or;for(si=0;si<ai;si+=1)if(vi=Ri[si],"ks"in vi&&!vi.completed){if(vi.completed=!0,vi.hasMask){var hr=vi.masksProperties;for(Ei=hr.length,Ci=0;Ci<Ei;Ci+=1)if(hr[Ci].pt.k.i)Zt(hr[Ci].pt.k);else for(or=hr[Ci].pt.k.length,zi=0;zi<or;zi+=1)hr[Ci].pt.k[zi].s&&Zt(hr[Ci].pt.k[zi].s[0]),hr[Ci].pt.k[zi].e&&Zt(hr[Ci].pt.k[zi].e[0])}vi.ty===0?(vi.layers=Nt(vi.refId,ui),Ut(vi.layers,ui)):vi.ty===4?Gt(vi.shapes):vi.ty===5&&ki(vi)}}function kt(Ri,ui){if(Ri){var vi=0,si=Ri.length;for(vi=0;vi<si;vi+=1)Ri[vi].t===1&&(Ri[vi].data.layers=Nt(Ri[vi].data.refId,ui),Ut(Ri[vi].data.layers,ui))}}function Ft(Ri,ui){for(var vi=0,si=ui.length;vi<si;){if(ui[vi].id===Ri)return ui[vi];vi+=1}return null}function Nt(Ri,ui){var vi=Ft(Ri,ui);return vi?vi.layers.__used?JSON.parse(JSON.stringify(vi.layers)):(vi.layers.__used=!0,vi.layers):null}function Gt(Ri){var ui,vi=Ri.length,si,ai;for(ui=vi-1;ui>=0;ui-=1)if(Ri[ui].ty==="sh")if(Ri[ui].ks.k.i)Zt(Ri[ui].ks.k);else for(ai=Ri[ui].ks.k.length,si=0;si<ai;si+=1)Ri[ui].ks.k[si].s&&Zt(Ri[ui].ks.k[si].s[0]),Ri[ui].ks.k[si].e&&Zt(Ri[ui].ks.k[si].e[0]);else Ri[ui].ty==="gr"&&Gt(Ri[ui].it)}function Zt(Ri){var ui,vi=Ri.i.length;for(ui=0;ui<vi;ui+=1)Ri.i[ui][0]+=Ri.v[ui][0],Ri.i[ui][1]+=Ri.v[ui][1],Ri.o[ui][0]+=Ri.v[ui][0],Ri.o[ui][1]+=Ri.v[ui][1]}function ri(Ri,ui){var vi=ui?ui.split("."):[100,100,100];return Ri[0]>vi[0]?!0:vi[0]>Ri[0]?!1:Ri[1]>vi[1]?!0:vi[1]>Ri[1]?!1:Ri[2]>vi[2]?!0:vi[2]>Ri[2]?!1:null}var li=function(){var Ri=[4,4,14];function ui(si){var ai=si.t.d;si.t.d={k:[{s:ai,t:0}]}}function vi(si){var ai,Ci=si.length;for(ai=0;ai<Ci;ai+=1)si[ai].ty===5&&ui(si[ai])}return function(si){if(ri(Ri,si.v)&&(vi(si.layers),si.assets)){var ai,Ci=si.assets.length;for(ai=0;ai<Ci;ai+=1)si.assets[ai].layers&&vi(si.assets[ai].layers)}}}(),hi=function(){var Ri=[4,7,99];return function(ui){if(ui.chars&&!ri(Ri,ui.v)){var vi,si=ui.chars.length;for(vi=0;vi<si;vi+=1){var ai=ui.chars[vi];ai.data&&ai.data.shapes&&(Gt(ai.data.shapes),ai.data.ip=0,ai.data.op=99999,ai.data.st=0,ai.data.sr=1,ai.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},ui.chars[vi].t||(ai.data.shapes.push({ty:"no"}),ai.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),xi=function(){var Ri=[5,7,15];function ui(si){var ai=si.t.p;typeof ai.a=="number"&&(ai.a={a:0,k:ai.a}),typeof ai.p=="number"&&(ai.p={a:0,k:ai.p}),typeof ai.r=="number"&&(ai.r={a:0,k:ai.r})}function vi(si){var ai,Ci=si.length;for(ai=0;ai<Ci;ai+=1)si[ai].ty===5&&ui(si[ai])}return function(si){if(ri(Ri,si.v)&&(vi(si.layers),si.assets)){var ai,Ci=si.assets.length;for(ai=0;ai<Ci;ai+=1)si.assets[ai].layers&&vi(si.assets[ai].layers)}}}(),$i=function(){var Ri=[4,1,9];function ui(si){var ai,Ci=si.length,Ei,zi;for(ai=0;ai<Ci;ai+=1)if(si[ai].ty==="gr")ui(si[ai].it);else if(si[ai].ty==="fl"||si[ai].ty==="st")if(si[ai].c.k&&si[ai].c.k[0].i)for(zi=si[ai].c.k.length,Ei=0;Ei<zi;Ei+=1)si[ai].c.k[Ei].s&&(si[ai].c.k[Ei].s[0]/=255,si[ai].c.k[Ei].s[1]/=255,si[ai].c.k[Ei].s[2]/=255,si[ai].c.k[Ei].s[3]/=255),si[ai].c.k[Ei].e&&(si[ai].c.k[Ei].e[0]/=255,si[ai].c.k[Ei].e[1]/=255,si[ai].c.k[Ei].e[2]/=255,si[ai].c.k[Ei].e[3]/=255);else si[ai].c.k[0]/=255,si[ai].c.k[1]/=255,si[ai].c.k[2]/=255,si[ai].c.k[3]/=255}function vi(si){var ai,Ci=si.length;for(ai=0;ai<Ci;ai+=1)si[ai].ty===4&&ui(si[ai].shapes)}return function(si){if(ri(Ri,si.v)&&(vi(si.layers),si.assets)){var ai,Ci=si.assets.length;for(ai=0;ai<Ci;ai+=1)si.assets[ai].layers&&vi(si.assets[ai].layers)}}}(),Mi=function(){var Ri=[4,4,18];function ui(si){var ai,Ci=si.length,Ei,zi;for(ai=Ci-1;ai>=0;ai-=1)if(si[ai].ty==="sh")if(si[ai].ks.k.i)si[ai].ks.k.c=si[ai].closed;else for(zi=si[ai].ks.k.length,Ei=0;Ei<zi;Ei+=1)si[ai].ks.k[Ei].s&&(si[ai].ks.k[Ei].s[0].c=si[ai].closed),si[ai].ks.k[Ei].e&&(si[ai].ks.k[Ei].e[0].c=si[ai].closed);else si[ai].ty==="gr"&&ui(si[ai].it)}function vi(si){var ai,Ci,Ei=si.length,zi,or,hr,mr;for(Ci=0;Ci<Ei;Ci+=1){if(ai=si[Ci],ai.hasMask){var cr=ai.masksProperties;for(or=cr.length,zi=0;zi<or;zi+=1)if(cr[zi].pt.k.i)cr[zi].pt.k.c=cr[zi].cl;else for(mr=cr[zi].pt.k.length,hr=0;hr<mr;hr+=1)cr[zi].pt.k[hr].s&&(cr[zi].pt.k[hr].s[0].c=cr[zi].cl),cr[zi].pt.k[hr].e&&(cr[zi].pt.k[hr].e[0].c=cr[zi].cl)}ai.ty===4&&ui(ai.shapes)}}return function(si){if(ri(Ri,si.v)&&(vi(si.layers),si.assets)){var ai,Ci=si.assets.length;for(ai=0;ai<Ci;ai+=1)si.assets[ai].layers&&vi(si.assets[ai].layers)}}}();function Di(Ri){Ri.__complete||($i(Ri),li(Ri),hi(Ri),xi(Ri),Mi(Ri),Ut(Ri.layers,Ri.assets),kt(Ri.chars,Ri.assets),Ri.__complete=!0)}function ki(Ri){Ri.t.a.length===0&&"m"in Ri.t.p}var ji={};return ji.completeData=Di,ji.checkColors=$i,ji.checkChars=hi,ji.checkPathProperties=xi,ji.checkShapes=Mi,ji.completeLayers=Ut,ji}if(Ce.dataManager||(Ce.dataManager=Mt()),Ce.assetLoader||(Ce.assetLoader=function(){function Ut(Ft){var Nt=Ft.getResponseHeader("content-type");return Nt&&Ft.responseType==="json"&&Nt.indexOf("json")!==-1||Ft.response&&_typeof$5(Ft.response)==="object"?Ft.response:Ft.response&&typeof Ft.response=="string"?JSON.parse(Ft.response):Ft.responseText?JSON.parse(Ft.responseText):null}function kt(Ft,Nt,Gt,Zt){var ri,li=new XMLHttpRequest;try{li.responseType="json"}catch{}li.onreadystatechange=function(){if(li.readyState===4)if(li.status===200)ri=Ut(li),Gt(ri);else try{ri=Ut(li),Gt(ri)}catch(hi){Zt&&Zt(hi)}};try{li.open(["G","E","T"].join(""),Ft,!0)}catch{li.open(["G","E","T"].join(""),Nt+"/"+Ft,!0)}li.send()}return{load:kt}}()),Ot.data.type==="loadAnimation")Ce.assetLoader.load(Ot.data.path,Ot.data.fullPath,function(Ut){Ce.dataManager.completeData(Ut),Ce.postMessage({id:Ot.data.id,payload:Ut,status:"success"})},function(){Ce.postMessage({id:Ot.data.id,status:"error"})});else if(Ot.data.type==="complete"){var St=Ot.data.animation;Ce.dataManager.completeData(St),Ce.postMessage({id:Ot.data.id,payload:St,status:"success"})}else Ot.data.type==="loadData"&&Ce.assetLoader.load(Ot.data.path,Ot.data.fullPath,function(Ut){Ce.postMessage({id:Ot.data.id,payload:Ut,status:"success"})},function(){Ce.postMessage({id:Ot.data.id,status:"error"})})}),C.onmessage=function(Dt){var Ot=Dt.data,Mt=Ot.id,St=S[Mt];S[Mt]=null,Ot.status==="success"?St.onComplete(Ot.payload):St.onError&&St.onError()})}function Xe(Dt,Ot){E+=1;var Mt="processId_"+E;return S[Mt]={onComplete:Dt,onError:Ot},Mt}function Ye(Dt,Ot,Mt){je();var St=Xe(Ot,Mt);C.postMessage({type:"loadAnimation",path:Dt,fullPath:window.location.origin+window.location.pathname,id:St})}function et(Dt,Ot,Mt){je();var St=Xe(Ot,Mt);C.postMessage({type:"loadData",path:Dt,fullPath:window.location.origin+window.location.pathname,id:St})}function ht(Dt,Ot,Mt){je();var St=Xe(Ot,Mt);C.postMessage({type:"complete",animation:Dt,id:St})}return{loadAnimation:Ye,loadData:et,completeAnimation:ht}}(),ImagePreloader=function(){var E=function(){var kt=createTag("canvas");kt.width=1,kt.height=1;var Ft=kt.getContext("2d");return Ft.fillStyle="rgba(0,0,0,0)",Ft.fillRect(0,0,1,1),kt}();function S(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function x(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function C(kt,Ft,Nt){var Gt="";if(kt.e)Gt=kt.p;else if(Ft){var Zt=kt.p;Zt.indexOf("images/")!==-1&&(Zt=Zt.split("/")[1]),Gt=Ft+Zt}else Gt=Nt,Gt+=kt.u?kt.u:"",Gt+=kt.p;return Gt}function R(kt){var Ft=0,Nt=setInterval((function(){var Gt=kt.getBBox();(Gt.width||Ft>500)&&(this._imageLoaded(),clearInterval(Nt)),Ft+=1}).bind(this),50)}function Ce(kt){var Ft=C(kt,this.assetsPath,this.path),Nt=createNS("image");isSafari?this.testImageLoaded(Nt):Nt.addEventListener("load",this._imageLoaded,!1),Nt.addEventListener("error",(function(){Gt.img=E,this._imageLoaded()}).bind(this),!1),Nt.setAttributeNS("http://www.w3.org/1999/xlink","href",Ft),this._elementHelper.append?this._elementHelper.append(Nt):this._elementHelper.appendChild(Nt);var Gt={img:Nt,assetData:kt};return Gt}function Ue(kt){var Ft=C(kt,this.assetsPath,this.path),Nt=createTag("img");Nt.crossOrigin="anonymous",Nt.addEventListener("load",this._imageLoaded,!1),Nt.addEventListener("error",(function(){Gt.img=E,this._imageLoaded()}).bind(this),!1),Nt.src=Ft;var Gt={img:Nt,assetData:kt};return Gt}function je(kt){var Ft={assetData:kt},Nt=C(kt,this.assetsPath,this.path);return dataManager.loadData(Nt,(function(Gt){Ft.img=Gt,this._footageLoaded()}).bind(this),(function(){Ft.img={},this._footageLoaded()}).bind(this)),Ft}function Xe(kt,Ft){this.imagesLoadedCb=Ft;var Nt,Gt=kt.length;for(Nt=0;Nt<Gt;Nt+=1)kt[Nt].layers||(!kt[Nt].t||kt[Nt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(kt[Nt]))):kt[Nt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(kt[Nt]))))}function Ye(kt){this.path=kt||""}function et(kt){this.assetsPath=kt||""}function ht(kt){for(var Ft=0,Nt=this.images.length;Ft<Nt;){if(this.images[Ft].assetData===kt)return this.images[Ft].img;Ft+=1}return null}function Dt(){this.imagesLoadedCb=null,this.images.length=0}function Ot(){return this.totalImages===this.loadedAssets}function Mt(){return this.totalFootages===this.loadedFootagesCount}function St(kt,Ft){kt==="svg"?(this._elementHelper=Ft,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ut(){this._imageLoaded=S.bind(this),this._footageLoaded=x.bind(this),this.testImageLoaded=R.bind(this),this.createFootageData=je.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ut.prototype={loadAssets:Xe,setAssetsPath:et,setPath:Ye,loadedImages:Ot,loadedFootages:Mt,destroy:Dt,getAsset:ht,createImgData:Ue,createImageData:Ce,imageLoaded:S,footageLoaded:x,setCacheType:St},Ut}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(S,x){if(this._cbs[S])for(var C=this._cbs[S],R=0;R<C.length;R+=1)C[R](x)},addEventListener:function(S,x){return this._cbs[S]||(this._cbs[S]=[]),this._cbs[S].push(x),(function(){this.removeEventListener(S,x)}).bind(this)},removeEventListener:function(S,x){if(!x)this._cbs[S]=null;else if(this._cbs[S]){for(var C=0,R=this._cbs[S].length;C<R;)this._cbs[S][C]===x&&(this._cbs[S].splice(C,1),C-=1,R-=1),C+=1;this._cbs[S].length||(this._cbs[S]=null)}}};var markerParser=function(){function E(S){for(var x=S.split(`\r
`),C={},R,Ce=0,Ue=0;Ue<x.length;Ue+=1)R=x[Ue].split(":"),R.length===2&&(C[R[0]]=R[1].trim(),Ce+=1);if(Ce===0)throw new Error;return C}return function(S){for(var x=[],C=0;C<S.length;C+=1){var R=S[C],Ce={time:R.tm,duration:R.dr};try{Ce.payload=JSON.parse(S[C].cm)}catch{try{Ce.payload=E(S[C].cm)}catch{Ce.payload={name:S[C].cm}}}x.push(Ce)}return x}}(),ProjectInterface=function(){function E(S){this.compositions.push(S)}return function(){function S(x){for(var C=0,R=this.compositions.length;C<R;){if(this.compositions[C].data&&this.compositions[C].data.nm===x)return this.compositions[C].prepareFrame&&this.compositions[C].data.xt&&this.compositions[C].prepareFrame(this.currentFrame),this.compositions[C].compInterface;C+=1}return null}return S.compositions=[],S.currentFrame=0,S.registerComposition=E,S}}(),renderers={},registerRenderer=function(S,x){renderers[S]=x};function getRenderer(E){return renderers[E]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var E in renderers)if(renderers[E])return E;return""}function _typeof$4(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(x){return typeof x}:_typeof$4=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof$4(E)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(E){(E.wrapper||E.container)&&(this.wrapper=E.wrapper||E.container);var S="svg";E.animType?S=E.animType:E.renderer&&(S=E.renderer);var x=getRenderer(S);this.renderer=new x(this,E.rendererSettings),this.imagePreloader.setCacheType(S,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=S,E.loop===""||E.loop===null||E.loop===void 0||E.loop===!0?this.loop=!0:E.loop===!1?this.loop=!1:this.loop=parseInt(E.loop,10),this.autoplay="autoplay"in E?E.autoplay:!0,this.name=E.name?E.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(E,"autoloadSegments")?E.autoloadSegments:!0,this.assetsPath=E.assetsPath,this.initialSegment=E.initialSegment,E.audioFactory&&this.audioController.setAudioFactory(E.audioFactory),E.animationData?this.setupAnimation(E.animationData):E.path&&(E.path.lastIndexOf("\\")!==-1?this.path=E.path.substr(0,E.path.lastIndexOf("\\")+1):this.path=E.path.substr(0,E.path.lastIndexOf("/")+1),this.fileName=E.path.substr(E.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(E.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(E){dataManager.completeAnimation(E,this.configAnimation)},AnimationItem.prototype.setData=function(E,S){S&&_typeof$4(S)!=="object"&&(S=JSON.parse(S));var x={wrapper:E,animationData:S},C=E.attributes;x.path=C.getNamedItem("data-animation-path")?C.getNamedItem("data-animation-path").value:C.getNamedItem("data-bm-path")?C.getNamedItem("data-bm-path").value:C.getNamedItem("bm-path")?C.getNamedItem("bm-path").value:"",x.animType=C.getNamedItem("data-anim-type")?C.getNamedItem("data-anim-type").value:C.getNamedItem("data-bm-type")?C.getNamedItem("data-bm-type").value:C.getNamedItem("bm-type")?C.getNamedItem("bm-type").value:C.getNamedItem("data-bm-renderer")?C.getNamedItem("data-bm-renderer").value:C.getNamedItem("bm-renderer")?C.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var R=C.getNamedItem("data-anim-loop")?C.getNamedItem("data-anim-loop").value:C.getNamedItem("data-bm-loop")?C.getNamedItem("data-bm-loop").value:C.getNamedItem("bm-loop")?C.getNamedItem("bm-loop").value:"";R==="false"?x.loop=!1:R==="true"?x.loop=!0:R!==""&&(x.loop=parseInt(R,10));var Ce=C.getNamedItem("data-anim-autoplay")?C.getNamedItem("data-anim-autoplay").value:C.getNamedItem("data-bm-autoplay")?C.getNamedItem("data-bm-autoplay").value:C.getNamedItem("bm-autoplay")?C.getNamedItem("bm-autoplay").value:!0;x.autoplay=Ce!=="false",x.name=C.getNamedItem("data-name")?C.getNamedItem("data-name").value:C.getNamedItem("data-bm-name")?C.getNamedItem("data-bm-name").value:C.getNamedItem("bm-name")?C.getNamedItem("bm-name").value:"";var Ue=C.getNamedItem("data-anim-prerender")?C.getNamedItem("data-anim-prerender").value:C.getNamedItem("data-bm-prerender")?C.getNamedItem("data-bm-prerender").value:C.getNamedItem("bm-prerender")?C.getNamedItem("bm-prerender").value:"";Ue==="false"&&(x.prerender=!1),x.path?this.setParams(x):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(E){E.op>this.animationData.op&&(this.animationData.op=E.op,this.totalFrames=Math.floor(E.op-this.animationData.ip));var S=this.animationData.layers,x,C=S.length,R=E.layers,Ce,Ue=R.length;for(Ce=0;Ce<Ue;Ce+=1)for(x=0;x<C;){if(S[x].id===R[Ce].id){S[x]=R[Ce];break}x+=1}if((E.chars||E.fonts)&&(this.renderer.globalData.fontManager.addChars(E.chars),this.renderer.globalData.fontManager.addFonts(E.fonts,this.renderer.globalData.defs)),E.assets)for(C=E.assets.length,x=0;x<C;x+=1)this.animationData.assets.push(E.assets[x]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(E){this.animationData=E;var S=getExpressionsPlugin();S&&S.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var E=this.animationData.segments;if(!E||E.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var S=E.shift();this.timeCompleted=S.time*this.frameRate;var x=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(x,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var E=this.animationData.segments;E||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(E){if(this.renderer)try{this.animationData=E,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(E),E.assets||(E.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(E.assets),this.markers=markerParser(E.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(S){this.triggerConfigError(S)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var E=getExpressionsPlugin();E&&E.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(E,S){var x=typeof E=="number"?E:void 0,C=typeof S=="number"?S:void 0;this.renderer.updateContainerSize(x,C)},AnimationItem.prototype.setSubframe=function(E){this.isSubframeEnabled=!!E},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(E){this.triggerRenderFrameError(E)}},AnimationItem.prototype.play=function(E){E&&this.name!==E||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(E){E&&this.name!==E||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(E){E&&this.name!==E||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(E){E&&this.name!==E||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(E){for(var S,x=0;x<this.markers.length;x+=1)if(S=this.markers[x],S.payload&&S.payload.name===E)return S;return null},AnimationItem.prototype.goToAndStop=function(E,S,x){if(!(x&&this.name!==x)){var C=Number(E);if(isNaN(C)){var R=this.getMarkerData(E);R&&this.goToAndStop(R.time,!0)}else S?this.setCurrentRawFrameValue(E):this.setCurrentRawFrameValue(E*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(E,S,x){if(!(x&&this.name!==x)){var C=Number(E);if(isNaN(C)){var R=this.getMarkerData(E);R&&(R.duration?this.playSegments([R.time,R.time+R.duration],!0):this.goToAndStop(R.time,!0))}else this.goToAndStop(C,S,x);this.play()}},AnimationItem.prototype.advanceTime=function(E){if(!(this.isPaused===!0||this.isLoaded===!1)){var S=this.currentRawFrame+E*this.frameModifier,x=!1;S>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(S>this.totalFrames?S%this.totalFrames:0)||(x=!0,S=this.totalFrames-1):S>=this.totalFrames?(this.playCount+=1,this.checkSegments(S%this.totalFrames)||(this.setCurrentRawFrameValue(S%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(S):S<0?this.checkSegments(S%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+S%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(x=!0,S=0)):this.setCurrentRawFrameValue(S),x&&(this.setCurrentRawFrameValue(S),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(E,S){this.playCount=0,E[1]<E[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=E[0]-E[1],this.timeCompleted=this.totalFrames,this.firstFrame=E[1],this.setCurrentRawFrameValue(this.totalFrames-.001-S)):E[1]>E[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=E[1]-E[0],this.timeCompleted=this.totalFrames,this.firstFrame=E[0],this.setCurrentRawFrameValue(.001+S)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(E,S){var x=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<E?x=E:this.currentRawFrame+this.firstFrame>S&&(x=S-E)),this.firstFrame=E,this.totalFrames=S-E,this.timeCompleted=this.totalFrames,x!==-1&&this.goToAndStop(x,!0)},AnimationItem.prototype.playSegments=function(E,S){if(S&&(this.segments.length=0),_typeof$4(E[0])==="object"){var x,C=E.length;for(x=0;x<C;x+=1)this.segments.push(E[x])}else this.segments.push(E);this.segments.length&&S&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(E){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),E&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(E){return this.segments.length?(this.adjustSegment(this.segments.shift(),E),!0):!1},AnimationItem.prototype.destroy=function(E){E&&this.name!==E||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(E){this.currentRawFrame=E,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(E){this.playSpeed=E,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(E){this.playDirection=E<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(E){this.loop=E},AnimationItem.prototype.setVolume=function(E,S){S&&this.name!==S||this.audioController.setVolume(E)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(E){E&&this.name!==E||this.audioController.mute()},AnimationItem.prototype.unmute=function(E){E&&this.name!==E||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(E){var S="";if(E.e)S=E.p;else if(this.assetsPath){var x=E.p;x.indexOf("images/")!==-1&&(x=x.split("/")[1]),S=this.assetsPath+x}else S=this.path,S+=E.u?E.u:"",S+=E.p;return S},AnimationItem.prototype.getAssetData=function(E){for(var S=0,x=this.assets.length;S<x;){if(E===this.assets[S].id)return this.assets[S];S+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(E){return E?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(E,S,x){try{var C=this.renderer.getElementByPath(E);C.updateDocumentData(S,x)}catch{}},AnimationItem.prototype.trigger=function(E){if(this._cbs&&this._cbs[E])switch(E){case"enterFrame":this.triggerEvent(E,new BMEnterFrameEvent(E,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(E,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(E,new BMCompleteLoopEvent(E,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(E,new BMCompleteEvent(E,this.frameMult));break;case"segmentStart":this.triggerEvent(E,new BMSegmentStartEvent(E,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(E,new BMDestroyEvent(E,this));break;default:this.triggerEvent(E)}E==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(E,this.currentFrame,this.totalFrames,this.frameMult)),E==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(E,this.loop,this.playCount,this.frameMult)),E==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(E,this.frameMult)),E==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(E,this.firstFrame,this.totalFrames)),E==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(E,this))},AnimationItem.prototype.triggerRenderFrameError=function(E){var S=new BMRenderFrameErrorEvent(E,this.currentFrame);this.triggerEvent("error",S),this.onError&&this.onError.call(this,S)},AnimationItem.prototype.triggerConfigError=function(E){var S=new BMConfigErrorEvent(E,this.currentFrame);this.triggerEvent("error",S),this.onError&&this.onError.call(this,S)};var animationManager=function(){var E={},S=[],x=0,C=0,R=0,Ce=!0,Ue=!1;function je(ui){for(var vi=0,si=ui.target;vi<C;)S[vi].animation===si&&(S.splice(vi,1),vi-=1,C-=1,si.isPaused||ht()),vi+=1}function Xe(ui,vi){if(!ui)return null;for(var si=0;si<C;){if(S[si].elem===ui&&S[si].elem!==null)return S[si].animation;si+=1}var ai=new AnimationItem;return Dt(ai,ui),ai.setData(ui,vi),ai}function Ye(){var ui,vi=S.length,si=[];for(ui=0;ui<vi;ui+=1)si.push(S[ui].animation);return si}function et(){R+=1,$i()}function ht(){R-=1}function Dt(ui,vi){ui.addEventListener("destroy",je),ui.addEventListener("_active",et),ui.addEventListener("_idle",ht),S.push({elem:vi,animation:ui}),C+=1}function Ot(ui){var vi=new AnimationItem;return Dt(vi,null),vi.setParams(ui),vi}function Mt(ui,vi){var si;for(si=0;si<C;si+=1)S[si].animation.setSpeed(ui,vi)}function St(ui,vi){var si;for(si=0;si<C;si+=1)S[si].animation.setDirection(ui,vi)}function Ut(ui){var vi;for(vi=0;vi<C;vi+=1)S[vi].animation.play(ui)}function kt(ui){var vi=ui-x,si;for(si=0;si<C;si+=1)S[si].animation.advanceTime(vi);x=ui,R&&!Ue?window.requestAnimationFrame(kt):Ce=!0}function Ft(ui){x=ui,window.requestAnimationFrame(kt)}function Nt(ui){var vi;for(vi=0;vi<C;vi+=1)S[vi].animation.pause(ui)}function Gt(ui,vi,si){var ai;for(ai=0;ai<C;ai+=1)S[ai].animation.goToAndStop(ui,vi,si)}function Zt(ui){var vi;for(vi=0;vi<C;vi+=1)S[vi].animation.stop(ui)}function ri(ui){var vi;for(vi=0;vi<C;vi+=1)S[vi].animation.togglePause(ui)}function li(ui){var vi;for(vi=C-1;vi>=0;vi-=1)S[vi].animation.destroy(ui)}function hi(ui,vi,si){var ai=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Ci,Ei=ai.length;for(Ci=0;Ci<Ei;Ci+=1)si&&ai[Ci].setAttribute("data-bm-type",si),Xe(ai[Ci],ui);if(vi&&Ei===0){si||(si="svg");var zi=document.getElementsByTagName("body")[0];zi.innerText="";var or=createTag("div");or.style.width="100%",or.style.height="100%",or.setAttribute("data-bm-type",si),zi.appendChild(or),Xe(or,ui)}}function xi(){var ui;for(ui=0;ui<C;ui+=1)S[ui].animation.resize()}function $i(){!Ue&&R&&Ce&&(window.requestAnimationFrame(Ft),Ce=!1)}function Mi(){Ue=!0}function Di(){Ue=!1,$i()}function ki(ui,vi){var si;for(si=0;si<C;si+=1)S[si].animation.setVolume(ui,vi)}function ji(ui){var vi;for(vi=0;vi<C;vi+=1)S[vi].animation.mute(ui)}function Ri(ui){var vi;for(vi=0;vi<C;vi+=1)S[vi].animation.unmute(ui)}return E.registerAnimation=Xe,E.loadAnimation=Ot,E.setSpeed=Mt,E.setDirection=St,E.play=Ut,E.pause=Nt,E.stop=Zt,E.togglePause=ri,E.searchAnimations=hi,E.resize=xi,E.goToAndStop=Gt,E.destroy=li,E.freeze=Mi,E.unfreeze=Di,E.setVolume=ki,E.mute=ji,E.unmute=Ri,E.getRegisteredAnimations=Ye,E}(),BezierFactory=function(){var E={};E.getBezierEasing=x;var S={};function x(Ft,Nt,Gt,Zt,ri){var li=ri||("bez_"+Ft+"_"+Nt+"_"+Gt+"_"+Zt).replace(/\./g,"p");if(S[li])return S[li];var hi=new kt([Ft,Nt,Gt,Zt]);return S[li]=hi,hi}var C=4,R=.001,Ce=1e-7,Ue=10,je=11,Xe=1/(je-1),Ye=typeof Float32Array=="function";function et(Ft,Nt){return 1-3*Nt+3*Ft}function ht(Ft,Nt){return 3*Nt-6*Ft}function Dt(Ft){return 3*Ft}function Ot(Ft,Nt,Gt){return((et(Nt,Gt)*Ft+ht(Nt,Gt))*Ft+Dt(Nt))*Ft}function Mt(Ft,Nt,Gt){return 3*et(Nt,Gt)*Ft*Ft+2*ht(Nt,Gt)*Ft+Dt(Nt)}function St(Ft,Nt,Gt,Zt,ri){var li,hi,xi=0;do hi=Nt+(Gt-Nt)/2,li=Ot(hi,Zt,ri)-Ft,li>0?Gt=hi:Nt=hi;while(Math.abs(li)>Ce&&++xi<Ue);return hi}function Ut(Ft,Nt,Gt,Zt){for(var ri=0;ri<C;++ri){var li=Mt(Nt,Gt,Zt);if(li===0)return Nt;var hi=Ot(Nt,Gt,Zt)-Ft;Nt-=hi/li}return Nt}function kt(Ft){this._p=Ft,this._mSampleValues=Ye?new Float32Array(je):new Array(je),this._precomputed=!1,this.get=this.get.bind(this)}return kt.prototype={get:function(Nt){var Gt=this._p[0],Zt=this._p[1],ri=this._p[2],li=this._p[3];return this._precomputed||this._precompute(),Gt===Zt&&ri===li?Nt:Nt===0?0:Nt===1?1:Ot(this._getTForX(Nt),Zt,li)},_precompute:function(){var Nt=this._p[0],Gt=this._p[1],Zt=this._p[2],ri=this._p[3];this._precomputed=!0,(Nt!==Gt||Zt!==ri)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Nt=this._p[0],Gt=this._p[2],Zt=0;Zt<je;++Zt)this._mSampleValues[Zt]=Ot(Zt*Xe,Nt,Gt)},_getTForX:function(Nt){for(var Gt=this._p[0],Zt=this._p[2],ri=this._mSampleValues,li=0,hi=1,xi=je-1;hi!==xi&&ri[hi]<=Nt;++hi)li+=Xe;--hi;var $i=(Nt-ri[hi])/(ri[hi+1]-ri[hi]),Mi=li+$i*Xe,Di=Mt(Mi,Gt,Zt);return Di>=R?Ut(Nt,Mi,Gt,Zt):Di===0?Mi:St(Nt,li,li+Xe,Gt,Zt)}},E}(),pooling=function(){function E(S){return S.concat(createSizedArray(S.length))}return{double:E}}(),poolFactory=function(){return function(E,S,x){var C=0,R=E,Ce=createSizedArray(R),Ue={newElement:je,release:Xe};function je(){var Ye;return C?(C-=1,Ye=Ce[C]):Ye=S(),Ye}function Xe(Ye){C===R&&(Ce=pooling.double(Ce),R*=2),x&&x(Ye),Ce[C]=Ye,C+=1}return Ue}}(),bezierLengthPool=function(){function E(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,E)}(),segmentsLengthPool=function(){function E(){return{lengths:[],totalLength:0}}function S(x){var C,R=x.lengths.length;for(C=0;C<R;C+=1)bezierLengthPool.release(x.lengths[C]);x.lengths.length=0}return poolFactory(8,E,S)}();function bezFunction(){var E=Math;function S(Dt,Ot,Mt,St,Ut,kt){var Ft=Dt*St+Ot*Ut+Mt*kt-Ut*St-kt*Dt-Mt*Ot;return Ft>-.001&&Ft<.001}function x(Dt,Ot,Mt,St,Ut,kt,Ft,Nt,Gt){if(Mt===0&&kt===0&&Gt===0)return S(Dt,Ot,St,Ut,Ft,Nt);var Zt=E.sqrt(E.pow(St-Dt,2)+E.pow(Ut-Ot,2)+E.pow(kt-Mt,2)),ri=E.sqrt(E.pow(Ft-Dt,2)+E.pow(Nt-Ot,2)+E.pow(Gt-Mt,2)),li=E.sqrt(E.pow(Ft-St,2)+E.pow(Nt-Ut,2)+E.pow(Gt-kt,2)),hi;return Zt>ri?Zt>li?hi=Zt-ri-li:hi=li-ri-Zt:li>ri?hi=li-ri-Zt:hi=ri-Zt-li,hi>-1e-4&&hi<1e-4}var C=function(){return function(Dt,Ot,Mt,St){var Ut=getDefaultCurveSegments(),kt,Ft,Nt,Gt,Zt,ri=0,li,hi=[],xi=[],$i=bezierLengthPool.newElement();for(Nt=Mt.length,kt=0;kt<Ut;kt+=1){for(Zt=kt/(Ut-1),li=0,Ft=0;Ft<Nt;Ft+=1)Gt=bmPow(1-Zt,3)*Dt[Ft]+3*bmPow(1-Zt,2)*Zt*Mt[Ft]+3*(1-Zt)*bmPow(Zt,2)*St[Ft]+bmPow(Zt,3)*Ot[Ft],hi[Ft]=Gt,xi[Ft]!==null&&(li+=bmPow(hi[Ft]-xi[Ft],2)),xi[Ft]=hi[Ft];li&&(li=bmSqrt(li),ri+=li),$i.percents[kt]=Zt,$i.lengths[kt]=ri}return $i.addedLength=ri,$i}}();function R(Dt){var Ot=segmentsLengthPool.newElement(),Mt=Dt.c,St=Dt.v,Ut=Dt.o,kt=Dt.i,Ft,Nt=Dt._length,Gt=Ot.lengths,Zt=0;for(Ft=0;Ft<Nt-1;Ft+=1)Gt[Ft]=C(St[Ft],St[Ft+1],Ut[Ft],kt[Ft+1]),Zt+=Gt[Ft].addedLength;return Mt&&Nt&&(Gt[Ft]=C(St[Ft],St[0],Ut[Ft],kt[0]),Zt+=Gt[Ft].addedLength),Ot.totalLength=Zt,Ot}function Ce(Dt){this.segmentLength=0,this.points=new Array(Dt)}function Ue(Dt,Ot){this.partialLength=Dt,this.point=Ot}var je=function(){var Dt={};return function(Ot,Mt,St,Ut){var kt=(Ot[0]+"_"+Ot[1]+"_"+Mt[0]+"_"+Mt[1]+"_"+St[0]+"_"+St[1]+"_"+Ut[0]+"_"+Ut[1]).replace(/\./g,"p");if(!Dt[kt]){var Ft=getDefaultCurveSegments(),Nt,Gt,Zt,ri,li,hi=0,xi,$i,Mi=null;Ot.length===2&&(Ot[0]!==Mt[0]||Ot[1]!==Mt[1])&&S(Ot[0],Ot[1],Mt[0],Mt[1],Ot[0]+St[0],Ot[1]+St[1])&&S(Ot[0],Ot[1],Mt[0],Mt[1],Mt[0]+Ut[0],Mt[1]+Ut[1])&&(Ft=2);var Di=new Ce(Ft);for(Zt=St.length,Nt=0;Nt<Ft;Nt+=1){for($i=createSizedArray(Zt),li=Nt/(Ft-1),xi=0,Gt=0;Gt<Zt;Gt+=1)ri=bmPow(1-li,3)*Ot[Gt]+3*bmPow(1-li,2)*li*(Ot[Gt]+St[Gt])+3*(1-li)*bmPow(li,2)*(Mt[Gt]+Ut[Gt])+bmPow(li,3)*Mt[Gt],$i[Gt]=ri,Mi!==null&&(xi+=bmPow($i[Gt]-Mi[Gt],2));xi=bmSqrt(xi),hi+=xi,Di.points[Nt]=new Ue(xi,$i),Mi=$i}Di.segmentLength=hi,Dt[kt]=Di}return Dt[kt]}}();function Xe(Dt,Ot){var Mt=Ot.percents,St=Ot.lengths,Ut=Mt.length,kt=bmFloor((Ut-1)*Dt),Ft=Dt*Ot.addedLength,Nt=0;if(kt===Ut-1||kt===0||Ft===St[kt])return Mt[kt];for(var Gt=St[kt]>Ft?-1:1,Zt=!0;Zt;)if(St[kt]<=Ft&&St[kt+1]>Ft?(Nt=(Ft-St[kt])/(St[kt+1]-St[kt]),Zt=!1):kt+=Gt,kt<0||kt>=Ut-1){if(kt===Ut-1)return Mt[kt];Zt=!1}return Mt[kt]+(Mt[kt+1]-Mt[kt])*Nt}function Ye(Dt,Ot,Mt,St,Ut,kt){var Ft=Xe(Ut,kt),Nt=1-Ft,Gt=E.round((Nt*Nt*Nt*Dt[0]+(Ft*Nt*Nt+Nt*Ft*Nt+Nt*Nt*Ft)*Mt[0]+(Ft*Ft*Nt+Nt*Ft*Ft+Ft*Nt*Ft)*St[0]+Ft*Ft*Ft*Ot[0])*1e3)/1e3,Zt=E.round((Nt*Nt*Nt*Dt[1]+(Ft*Nt*Nt+Nt*Ft*Nt+Nt*Nt*Ft)*Mt[1]+(Ft*Ft*Nt+Nt*Ft*Ft+Ft*Nt*Ft)*St[1]+Ft*Ft*Ft*Ot[1])*1e3)/1e3;return[Gt,Zt]}var et=createTypedArray("float32",8);function ht(Dt,Ot,Mt,St,Ut,kt,Ft){Ut<0?Ut=0:Ut>1&&(Ut=1);var Nt=Xe(Ut,Ft);kt=kt>1?1:kt;var Gt=Xe(kt,Ft),Zt,ri=Dt.length,li=1-Nt,hi=1-Gt,xi=li*li*li,$i=Nt*li*li*3,Mi=Nt*Nt*li*3,Di=Nt*Nt*Nt,ki=li*li*hi,ji=Nt*li*hi+li*Nt*hi+li*li*Gt,Ri=Nt*Nt*hi+li*Nt*Gt+Nt*li*Gt,ui=Nt*Nt*Gt,vi=li*hi*hi,si=Nt*hi*hi+li*Gt*hi+li*hi*Gt,ai=Nt*Gt*hi+li*Gt*Gt+Nt*hi*Gt,Ci=Nt*Gt*Gt,Ei=hi*hi*hi,zi=Gt*hi*hi+hi*Gt*hi+hi*hi*Gt,or=Gt*Gt*hi+hi*Gt*Gt+Gt*hi*Gt,hr=Gt*Gt*Gt;for(Zt=0;Zt<ri;Zt+=1)et[Zt*4]=E.round((xi*Dt[Zt]+$i*Mt[Zt]+Mi*St[Zt]+Di*Ot[Zt])*1e3)/1e3,et[Zt*4+1]=E.round((ki*Dt[Zt]+ji*Mt[Zt]+Ri*St[Zt]+ui*Ot[Zt])*1e3)/1e3,et[Zt*4+2]=E.round((vi*Dt[Zt]+si*Mt[Zt]+ai*St[Zt]+Ci*Ot[Zt])*1e3)/1e3,et[Zt*4+3]=E.round((Ei*Dt[Zt]+zi*Mt[Zt]+or*St[Zt]+hr*Ot[Zt])*1e3)/1e3;return et}return{getSegmentsLength:R,getNewSegment:ht,getPointInSegment:Ye,buildBezierData:je,pointOnLine2D:S,pointOnLine3D:x}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(E,S){var x=this.offsetTime,C;this.propType==="multidimensional"&&(C=createTypedArray("float32",this.pv.length));for(var R=S.lastIndex,Ce=R,Ue=this.keyframes.length-1,je=!0,Xe,Ye,et;je;){if(Xe=this.keyframes[Ce],Ye=this.keyframes[Ce+1],Ce===Ue-1&&E>=Ye.t-x){Xe.h&&(Xe=Ye),R=0;break}if(Ye.t-x>E){R=Ce;break}Ce<Ue-1?Ce+=1:(R=0,je=!1)}et=this.keyframesMetadata[Ce]||{};var ht,Dt,Ot,Mt,St,Ut,kt=Ye.t-x,Ft=Xe.t-x,Nt;if(Xe.to){et.bezierData||(et.bezierData=bez.buildBezierData(Xe.s,Ye.s||Xe.e,Xe.to,Xe.ti));var Gt=et.bezierData;if(E>=kt||E<Ft){var Zt=E>=kt?Gt.points.length-1:0;for(Dt=Gt.points[Zt].point.length,ht=0;ht<Dt;ht+=1)C[ht]=Gt.points[Zt].point[ht]}else{et.__fnct?Ut=et.__fnct:(Ut=BezierFactory.getBezierEasing(Xe.o.x,Xe.o.y,Xe.i.x,Xe.i.y,Xe.n).get,et.__fnct=Ut),Ot=Ut((E-Ft)/(kt-Ft));var ri=Gt.segmentLength*Ot,li,hi=S.lastFrame<E&&S._lastKeyframeIndex===Ce?S._lastAddedLength:0;for(St=S.lastFrame<E&&S._lastKeyframeIndex===Ce?S._lastPoint:0,je=!0,Mt=Gt.points.length;je;){if(hi+=Gt.points[St].partialLength,ri===0||Ot===0||St===Gt.points.length-1){for(Dt=Gt.points[St].point.length,ht=0;ht<Dt;ht+=1)C[ht]=Gt.points[St].point[ht];break}else if(ri>=hi&&ri<hi+Gt.points[St+1].partialLength){for(li=(ri-hi)/Gt.points[St+1].partialLength,Dt=Gt.points[St].point.length,ht=0;ht<Dt;ht+=1)C[ht]=Gt.points[St].point[ht]+(Gt.points[St+1].point[ht]-Gt.points[St].point[ht])*li;break}St<Mt-1?St+=1:je=!1}S._lastPoint=St,S._lastAddedLength=hi-Gt.points[St].partialLength,S._lastKeyframeIndex=Ce}}else{var xi,$i,Mi,Di,ki;if(Ue=Xe.s.length,Nt=Ye.s||Xe.e,this.sh&&Xe.h!==1)if(E>=kt)C[0]=Nt[0],C[1]=Nt[1],C[2]=Nt[2];else if(E<=Ft)C[0]=Xe.s[0],C[1]=Xe.s[1],C[2]=Xe.s[2];else{var ji=createQuaternion(Xe.s),Ri=createQuaternion(Nt),ui=(E-Ft)/(kt-Ft);quaternionToEuler(C,slerp(ji,Ri,ui))}else for(Ce=0;Ce<Ue;Ce+=1)Xe.h!==1&&(E>=kt?Ot=1:E<Ft?Ot=0:(Xe.o.x.constructor===Array?(et.__fnct||(et.__fnct=[]),et.__fnct[Ce]?Ut=et.__fnct[Ce]:(xi=Xe.o.x[Ce]===void 0?Xe.o.x[0]:Xe.o.x[Ce],$i=Xe.o.y[Ce]===void 0?Xe.o.y[0]:Xe.o.y[Ce],Mi=Xe.i.x[Ce]===void 0?Xe.i.x[0]:Xe.i.x[Ce],Di=Xe.i.y[Ce]===void 0?Xe.i.y[0]:Xe.i.y[Ce],Ut=BezierFactory.getBezierEasing(xi,$i,Mi,Di).get,et.__fnct[Ce]=Ut)):et.__fnct?Ut=et.__fnct:(xi=Xe.o.x,$i=Xe.o.y,Mi=Xe.i.x,Di=Xe.i.y,Ut=BezierFactory.getBezierEasing(xi,$i,Mi,Di).get,Xe.keyframeMetadata=Ut),Ot=Ut((E-Ft)/(kt-Ft)))),Nt=Ye.s||Xe.e,ki=Xe.h===1?Xe.s[Ce]:Xe.s[Ce]+(Nt[Ce]-Xe.s[Ce])*Ot,this.propType==="multidimensional"?C[Ce]=ki:C=ki}return S.lastIndex=R,C}function slerp(E,S,x){var C=[],R=E[0],Ce=E[1],Ue=E[2],je=E[3],Xe=S[0],Ye=S[1],et=S[2],ht=S[3],Dt,Ot,Mt,St,Ut;return Ot=R*Xe+Ce*Ye+Ue*et+je*ht,Ot<0&&(Ot=-Ot,Xe=-Xe,Ye=-Ye,et=-et,ht=-ht),1-Ot>1e-6?(Dt=Math.acos(Ot),Mt=Math.sin(Dt),St=Math.sin((1-x)*Dt)/Mt,Ut=Math.sin(x*Dt)/Mt):(St=1-x,Ut=x),C[0]=St*R+Ut*Xe,C[1]=St*Ce+Ut*Ye,C[2]=St*Ue+Ut*et,C[3]=St*je+Ut*ht,C}function quaternionToEuler(E,S){var x=S[0],C=S[1],R=S[2],Ce=S[3],Ue=Math.atan2(2*C*Ce-2*x*R,1-2*C*C-2*R*R),je=Math.asin(2*x*C+2*R*Ce),Xe=Math.atan2(2*x*Ce-2*C*R,1-2*x*x-2*R*R);E[0]=Ue/degToRads,E[1]=je/degToRads,E[2]=Xe/degToRads}function createQuaternion(E){var S=E[0]*degToRads,x=E[1]*degToRads,C=E[2]*degToRads,R=Math.cos(S/2),Ce=Math.cos(x/2),Ue=Math.cos(C/2),je=Math.sin(S/2),Xe=Math.sin(x/2),Ye=Math.sin(C/2),et=R*Ce*Ue-je*Xe*Ye,ht=je*Xe*Ue+R*Ce*Ye,Dt=je*Ce*Ue+R*Xe*Ye,Ot=R*Xe*Ue-je*Ce*Ye;return[ht,Dt,Ot,et]}function getValueAtCurrentTime(){var E=this.comp.renderedFrame-this.offsetTime,S=this.keyframes[0].t-this.offsetTime,x=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(E===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=x&&E>=x||this._caching.lastFrame<S&&E<S))){this._caching.lastFrame>=E&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var C=this.interpolateValue(E,this._caching);this.pv=C}return this._caching.lastFrame=E,this.pv}function setVValue(E){var S;if(this.propType==="unidimensional")S=E*this.mult,mathAbs(this.v-S)>1e-5&&(this.v=S,this._mdf=!0);else for(var x=0,C=this.v.length;x<C;)S=E[x]*this.mult,mathAbs(this.v[x]-S)>1e-5&&(this.v[x]=S,this._mdf=!0),x+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var E,S=this.effectsSequence.length,x=this.kf?this.pv:this.data.k;for(E=0;E<S;E+=1)x=this.effectsSequence[E](x);this.setVValue(x),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(E){this.effectsSequence.push(E),this.container.addDynamicProperty(this)}function ValueProperty(E,S,x,C){this.propType="unidimensional",this.mult=x||1,this.data=S,this.v=x?S.k*x:S.k,this.pv=S.k,this._mdf=!1,this.elem=E,this.container=C,this.comp=E.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(E,S,x,C){this.propType="multidimensional",this.mult=x||1,this.data=S,this._mdf=!1,this.elem=E,this.container=C,this.comp=E.comp,this.k=!1,this.kf=!1,this.frameId=-1;var R,Ce=S.k.length;for(this.v=createTypedArray("float32",Ce),this.pv=createTypedArray("float32",Ce),this.vel=createTypedArray("float32",Ce),R=0;R<Ce;R+=1)this.v[R]=S.k[R]*this.mult,this.pv[R]=S.k[R];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(E,S,x,C){this.propType="unidimensional",this.keyframes=S.k,this.keyframesMetadata=[],this.offsetTime=E.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=S,this.mult=x||1,this.elem=E,this.container=C,this.comp=E.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(E,S,x,C){this.propType="multidimensional";var R,Ce=S.k.length,Ue,je,Xe,Ye;for(R=0;R<Ce-1;R+=1)S.k[R].to&&S.k[R].s&&S.k[R+1]&&S.k[R+1].s&&(Ue=S.k[R].s,je=S.k[R+1].s,Xe=S.k[R].to,Ye=S.k[R].ti,(Ue.length===2&&!(Ue[0]===je[0]&&Ue[1]===je[1])&&bez.pointOnLine2D(Ue[0],Ue[1],je[0],je[1],Ue[0]+Xe[0],Ue[1]+Xe[1])&&bez.pointOnLine2D(Ue[0],Ue[1],je[0],je[1],je[0]+Ye[0],je[1]+Ye[1])||Ue.length===3&&!(Ue[0]===je[0]&&Ue[1]===je[1]&&Ue[2]===je[2])&&bez.pointOnLine3D(Ue[0],Ue[1],Ue[2],je[0],je[1],je[2],Ue[0]+Xe[0],Ue[1]+Xe[1],Ue[2]+Xe[2])&&bez.pointOnLine3D(Ue[0],Ue[1],Ue[2],je[0],je[1],je[2],je[0]+Ye[0],je[1]+Ye[1],je[2]+Ye[2]))&&(S.k[R].to=null,S.k[R].ti=null),Ue[0]===je[0]&&Ue[1]===je[1]&&Xe[0]===0&&Xe[1]===0&&Ye[0]===0&&Ye[1]===0&&(Ue.length===2||Ue[2]===je[2]&&Xe[2]===0&&Ye[2]===0)&&(S.k[R].to=null,S.k[R].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=S,this.keyframes=S.k,this.keyframesMetadata=[],this.offsetTime=E.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=x||1,this.elem=E,this.container=C,this.comp=E.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var et=S.k[0].s.length;for(this.v=createTypedArray("float32",et),this.pv=createTypedArray("float32",et),R=0;R<et;R+=1)this.v[R]=initFrame,this.pv[R]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",et)},this.addEffect=addEffect}var PropertyFactory=function(){function E(x,C,R,Ce,Ue){C.sid&&(C=x.globalData.slotManager.getProp(C));var je;if(!C.k.length)je=new ValueProperty(x,C,Ce,Ue);else if(typeof C.k[0]=="number")je=new MultiDimensionalProperty(x,C,Ce,Ue);else switch(R){case 0:je=new KeyframedValueProperty(x,C,Ce,Ue);break;case 1:je=new KeyframedMultidimensionalProperty(x,C,Ce,Ue);break}return je.effectsSequence.length&&Ue.addDynamicProperty(je),je}var S={getProp:E};return S}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(S){this.dynamicProperties.indexOf(S)===-1&&(this.dynamicProperties.push(S),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var S,x=this.dynamicProperties.length;for(S=0;S<x;S+=1)this.dynamicProperties[S].getValue(),this.dynamicProperties[S]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(S){this.container=S,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function E(){return createTypedArray("float32",2)}return poolFactory(8,E)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(E,S){this.c=E,this.setLength(S);for(var x=0;x<S;)this.v[x]=pointPool.newElement(),this.o[x]=pointPool.newElement(),this.i[x]=pointPool.newElement(),x+=1},ShapePath.prototype.setLength=function(E){for(;this._maxLength<E;)this.doubleArrayLength();this._length=E},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(E,S,x,C,R){var Ce;switch(this._length=Math.max(this._length,C+1),this._length>=this._maxLength&&this.doubleArrayLength(),x){case"v":Ce=this.v;break;case"i":Ce=this.i;break;case"o":Ce=this.o;break;default:Ce=[];break}(!Ce[C]||Ce[C]&&!R)&&(Ce[C]=pointPool.newElement()),Ce[C][0]=E,Ce[C][1]=S},ShapePath.prototype.setTripleAt=function(E,S,x,C,R,Ce,Ue,je){this.setXYAt(E,S,"v",Ue,je),this.setXYAt(x,C,"o",Ue,je),this.setXYAt(R,Ce,"i",Ue,je)},ShapePath.prototype.reverse=function(){var E=new ShapePath;E.setPathData(this.c,this._length);var S=this.v,x=this.o,C=this.i,R=0;this.c&&(E.setTripleAt(S[0][0],S[0][1],C[0][0],C[0][1],x[0][0],x[0][1],0,!1),R=1);var Ce=this._length-1,Ue=this._length,je;for(je=R;je<Ue;je+=1)E.setTripleAt(S[Ce][0],S[Ce][1],C[Ce][0],C[Ce][1],x[Ce][0],x[Ce][1],je,!1),Ce-=1;return E},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function E(){return new ShapePath}function S(R){var Ce=R._length,Ue;for(Ue=0;Ue<Ce;Ue+=1)pointPool.release(R.v[Ue]),pointPool.release(R.i[Ue]),pointPool.release(R.o[Ue]),R.v[Ue]=null,R.i[Ue]=null,R.o[Ue]=null;R._length=0,R.c=!1}function x(R){var Ce=C.newElement(),Ue,je=R._length===void 0?R.v.length:R._length;for(Ce.setLength(je),Ce.c=R.c,Ue=0;Ue<je;Ue+=1)Ce.setTripleAt(R.v[Ue][0],R.v[Ue][1],R.o[Ue][0],R.o[Ue][1],R.i[Ue][0],R.i[Ue][1],Ue);return Ce}var C=poolFactory(4,E,S);return C.clone=x,C}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(E){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=E,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var E;for(E=0;E<this._length;E+=1)shapePool.release(this.shapes[E]);this._length=0};var shapeCollectionPool=function(){var E={newShapeCollection:R,release:Ce},S=0,x=4,C=createSizedArray(x);function R(){var Ue;return S?(S-=1,Ue=C[S]):Ue=new ShapeCollection,Ue}function Ce(Ue){var je,Xe=Ue._length;for(je=0;je<Xe;je+=1)shapePool.release(Ue.shapes[je]);Ue._length=0,S===x&&(C=pooling.double(C),x*=2),C[S]=Ue,S+=1}return E}(),ShapePropertyFactory=function(){var E=-999999;function S(kt,Ft,Nt){var Gt=Nt.lastIndex,Zt,ri,li,hi,xi,$i,Mi,Di,ki,ji=this.keyframes;if(kt<ji[0].t-this.offsetTime)Zt=ji[0].s[0],li=!0,Gt=0;else if(kt>=ji[ji.length-1].t-this.offsetTime)Zt=ji[ji.length-1].s?ji[ji.length-1].s[0]:ji[ji.length-2].e[0],li=!0;else{for(var Ri=Gt,ui=ji.length-1,vi=!0,si,ai,Ci;vi&&(si=ji[Ri],ai=ji[Ri+1],!(ai.t-this.offsetTime>kt));)Ri<ui-1?Ri+=1:vi=!1;if(Ci=this.keyframesMetadata[Ri]||{},li=si.h===1,Gt=Ri,!li){if(kt>=ai.t-this.offsetTime)Di=1;else if(kt<si.t-this.offsetTime)Di=0;else{var Ei;Ci.__fnct?Ei=Ci.__fnct:(Ei=BezierFactory.getBezierEasing(si.o.x,si.o.y,si.i.x,si.i.y).get,Ci.__fnct=Ei),Di=Ei((kt-(si.t-this.offsetTime))/(ai.t-this.offsetTime-(si.t-this.offsetTime)))}ri=ai.s?ai.s[0]:si.e[0]}Zt=si.s[0]}for($i=Ft._length,Mi=Zt.i[0].length,Nt.lastIndex=Gt,hi=0;hi<$i;hi+=1)for(xi=0;xi<Mi;xi+=1)ki=li?Zt.i[hi][xi]:Zt.i[hi][xi]+(ri.i[hi][xi]-Zt.i[hi][xi])*Di,Ft.i[hi][xi]=ki,ki=li?Zt.o[hi][xi]:Zt.o[hi][xi]+(ri.o[hi][xi]-Zt.o[hi][xi])*Di,Ft.o[hi][xi]=ki,ki=li?Zt.v[hi][xi]:Zt.v[hi][xi]+(ri.v[hi][xi]-Zt.v[hi][xi])*Di,Ft.v[hi][xi]=ki}function x(){var kt=this.comp.renderedFrame-this.offsetTime,Ft=this.keyframes[0].t-this.offsetTime,Nt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Gt=this._caching.lastFrame;return Gt!==E&&(Gt<Ft&&kt<Ft||Gt>Nt&&kt>Nt)||(this._caching.lastIndex=Gt<kt?this._caching.lastIndex:0,this.interpolateShape(kt,this.pv,this._caching)),this._caching.lastFrame=kt,this.pv}function C(){this.paths=this.localShapeCollection}function R(kt,Ft){if(kt._length!==Ft._length||kt.c!==Ft.c)return!1;var Nt,Gt=kt._length;for(Nt=0;Nt<Gt;Nt+=1)if(kt.v[Nt][0]!==Ft.v[Nt][0]||kt.v[Nt][1]!==Ft.v[Nt][1]||kt.o[Nt][0]!==Ft.o[Nt][0]||kt.o[Nt][1]!==Ft.o[Nt][1]||kt.i[Nt][0]!==Ft.i[Nt][0]||kt.i[Nt][1]!==Ft.i[Nt][1])return!1;return!0}function Ce(kt){R(this.v,kt)||(this.v=shapePool.clone(kt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function Ue(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var kt;this.kf?kt=this.pv:this.data.ks?kt=this.data.ks.k:kt=this.data.pt.k;var Ft,Nt=this.effectsSequence.length;for(Ft=0;Ft<Nt;Ft+=1)kt=this.effectsSequence[Ft](kt);this.setVValue(kt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function je(kt,Ft,Nt){this.propType="shape",this.comp=kt.comp,this.container=kt,this.elem=kt,this.data=Ft,this.k=!1,this.kf=!1,this._mdf=!1;var Gt=Nt===3?Ft.pt.k:Ft.ks.k;this.v=shapePool.clone(Gt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=C,this.effectsSequence=[]}function Xe(kt){this.effectsSequence.push(kt),this.container.addDynamicProperty(this)}je.prototype.interpolateShape=S,je.prototype.getValue=Ue,je.prototype.setVValue=Ce,je.prototype.addEffect=Xe;function Ye(kt,Ft,Nt){this.propType="shape",this.comp=kt.comp,this.elem=kt,this.container=kt,this.offsetTime=kt.data.st,this.keyframes=Nt===3?Ft.pt.k:Ft.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Gt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Gt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=E,this.reset=C,this._caching={lastFrame:E,lastIndex:0},this.effectsSequence=[x.bind(this)]}Ye.prototype.getValue=Ue,Ye.prototype.interpolateShape=S,Ye.prototype.setVValue=Ce,Ye.prototype.addEffect=Xe;var et=function(){var kt=roundCorner;function Ft(Nt,Gt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Gt.d,this.elem=Nt,this.comp=Nt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Nt),this.p=PropertyFactory.getProp(Nt,Gt.p,1,0,this),this.s=PropertyFactory.getProp(Nt,Gt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ft.prototype={reset:C,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Gt=this.p.v[0],Zt=this.p.v[1],ri=this.s.v[0]/2,li=this.s.v[1]/2,hi=this.d!==3,xi=this.v;xi.v[0][0]=Gt,xi.v[0][1]=Zt-li,xi.v[1][0]=hi?Gt+ri:Gt-ri,xi.v[1][1]=Zt,xi.v[2][0]=Gt,xi.v[2][1]=Zt+li,xi.v[3][0]=hi?Gt-ri:Gt+ri,xi.v[3][1]=Zt,xi.i[0][0]=hi?Gt-ri*kt:Gt+ri*kt,xi.i[0][1]=Zt-li,xi.i[1][0]=hi?Gt+ri:Gt-ri,xi.i[1][1]=Zt-li*kt,xi.i[2][0]=hi?Gt+ri*kt:Gt-ri*kt,xi.i[2][1]=Zt+li,xi.i[3][0]=hi?Gt-ri:Gt+ri,xi.i[3][1]=Zt+li*kt,xi.o[0][0]=hi?Gt+ri*kt:Gt-ri*kt,xi.o[0][1]=Zt-li,xi.o[1][0]=hi?Gt+ri:Gt-ri,xi.o[1][1]=Zt+li*kt,xi.o[2][0]=hi?Gt-ri*kt:Gt+ri*kt,xi.o[2][1]=Zt+li,xi.o[3][0]=hi?Gt-ri:Gt+ri,xi.o[3][1]=Zt-li*kt}},extendPrototype([DynamicPropertyContainer],Ft),Ft}(),ht=function(){function kt(Ft,Nt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ft,this.comp=Ft.comp,this.data=Nt,this.frameId=-1,this.d=Nt.d,this.initDynamicPropertyContainer(Ft),Nt.sy===1?(this.ir=PropertyFactory.getProp(Ft,Nt.ir,0,0,this),this.is=PropertyFactory.getProp(Ft,Nt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ft,Nt.pt,0,0,this),this.p=PropertyFactory.getProp(Ft,Nt.p,1,0,this),this.r=PropertyFactory.getProp(Ft,Nt.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ft,Nt.or,0,0,this),this.os=PropertyFactory.getProp(Ft,Nt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return kt.prototype={reset:C,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Nt=Math.floor(this.pt.v)*2,Gt=Math.PI*2/Nt,Zt=!0,ri=this.or.v,li=this.ir.v,hi=this.os.v,xi=this.is.v,$i=2*Math.PI*ri/(Nt*2),Mi=2*Math.PI*li/(Nt*2),Di,ki,ji,Ri,ui=-Math.PI/2;ui+=this.r.v;var vi=this.data.d===3?-1:1;for(this.v._length=0,Di=0;Di<Nt;Di+=1){ki=Zt?ri:li,ji=Zt?hi:xi,Ri=Zt?$i:Mi;var si=ki*Math.cos(ui),ai=ki*Math.sin(ui),Ci=si===0&&ai===0?0:ai/Math.sqrt(si*si+ai*ai),Ei=si===0&&ai===0?0:-si/Math.sqrt(si*si+ai*ai);si+=+this.p.v[0],ai+=+this.p.v[1],this.v.setTripleAt(si,ai,si-Ci*Ri*ji*vi,ai-Ei*Ri*ji*vi,si+Ci*Ri*ji*vi,ai+Ei*Ri*ji*vi,Di,!0),Zt=!Zt,ui+=Gt*vi}},convertPolygonToPath:function(){var Nt=Math.floor(this.pt.v),Gt=Math.PI*2/Nt,Zt=this.or.v,ri=this.os.v,li=2*Math.PI*Zt/(Nt*4),hi,xi=-Math.PI*.5,$i=this.data.d===3?-1:1;for(xi+=this.r.v,this.v._length=0,hi=0;hi<Nt;hi+=1){var Mi=Zt*Math.cos(xi),Di=Zt*Math.sin(xi),ki=Mi===0&&Di===0?0:Di/Math.sqrt(Mi*Mi+Di*Di),ji=Mi===0&&Di===0?0:-Mi/Math.sqrt(Mi*Mi+Di*Di);Mi+=+this.p.v[0],Di+=+this.p.v[1],this.v.setTripleAt(Mi,Di,Mi-ki*li*ri*$i,Di-ji*li*ri*$i,Mi+ki*li*ri*$i,Di+ji*li*ri*$i,hi,!0),xi+=Gt*$i}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],kt),kt}(),Dt=function(){function kt(Ft,Nt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ft,this.comp=Ft.comp,this.frameId=-1,this.d=Nt.d,this.initDynamicPropertyContainer(Ft),this.p=PropertyFactory.getProp(Ft,Nt.p,1,0,this),this.s=PropertyFactory.getProp(Ft,Nt.s,1,0,this),this.r=PropertyFactory.getProp(Ft,Nt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return kt.prototype={convertRectToPath:function(){var Nt=this.p.v[0],Gt=this.p.v[1],Zt=this.s.v[0]/2,ri=this.s.v[1]/2,li=bmMin(Zt,ri,this.r.v),hi=li*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Nt+Zt,Gt-ri+li,Nt+Zt,Gt-ri+li,Nt+Zt,Gt-ri+hi,0,!0),this.v.setTripleAt(Nt+Zt,Gt+ri-li,Nt+Zt,Gt+ri-hi,Nt+Zt,Gt+ri-li,1,!0),li!==0?(this.v.setTripleAt(Nt+Zt-li,Gt+ri,Nt+Zt-li,Gt+ri,Nt+Zt-hi,Gt+ri,2,!0),this.v.setTripleAt(Nt-Zt+li,Gt+ri,Nt-Zt+hi,Gt+ri,Nt-Zt+li,Gt+ri,3,!0),this.v.setTripleAt(Nt-Zt,Gt+ri-li,Nt-Zt,Gt+ri-li,Nt-Zt,Gt+ri-hi,4,!0),this.v.setTripleAt(Nt-Zt,Gt-ri+li,Nt-Zt,Gt-ri+hi,Nt-Zt,Gt-ri+li,5,!0),this.v.setTripleAt(Nt-Zt+li,Gt-ri,Nt-Zt+li,Gt-ri,Nt-Zt+hi,Gt-ri,6,!0),this.v.setTripleAt(Nt+Zt-li,Gt-ri,Nt+Zt-hi,Gt-ri,Nt+Zt-li,Gt-ri,7,!0)):(this.v.setTripleAt(Nt-Zt,Gt+ri,Nt-Zt+hi,Gt+ri,Nt-Zt,Gt+ri,2),this.v.setTripleAt(Nt-Zt,Gt-ri,Nt-Zt,Gt-ri+hi,Nt-Zt,Gt-ri,3))):(this.v.setTripleAt(Nt+Zt,Gt-ri+li,Nt+Zt,Gt-ri+hi,Nt+Zt,Gt-ri+li,0,!0),li!==0?(this.v.setTripleAt(Nt+Zt-li,Gt-ri,Nt+Zt-li,Gt-ri,Nt+Zt-hi,Gt-ri,1,!0),this.v.setTripleAt(Nt-Zt+li,Gt-ri,Nt-Zt+hi,Gt-ri,Nt-Zt+li,Gt-ri,2,!0),this.v.setTripleAt(Nt-Zt,Gt-ri+li,Nt-Zt,Gt-ri+li,Nt-Zt,Gt-ri+hi,3,!0),this.v.setTripleAt(Nt-Zt,Gt+ri-li,Nt-Zt,Gt+ri-hi,Nt-Zt,Gt+ri-li,4,!0),this.v.setTripleAt(Nt-Zt+li,Gt+ri,Nt-Zt+li,Gt+ri,Nt-Zt+hi,Gt+ri,5,!0),this.v.setTripleAt(Nt+Zt-li,Gt+ri,Nt+Zt-hi,Gt+ri,Nt+Zt-li,Gt+ri,6,!0),this.v.setTripleAt(Nt+Zt,Gt+ri-li,Nt+Zt,Gt+ri-li,Nt+Zt,Gt+ri-hi,7,!0)):(this.v.setTripleAt(Nt-Zt,Gt-ri,Nt-Zt+hi,Gt-ri,Nt-Zt,Gt-ri,1,!0),this.v.setTripleAt(Nt-Zt,Gt+ri,Nt-Zt,Gt+ri-hi,Nt-Zt,Gt+ri,2,!0),this.v.setTripleAt(Nt+Zt,Gt+ri,Nt+Zt-hi,Gt+ri,Nt+Zt,Gt+ri,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:C},extendPrototype([DynamicPropertyContainer],kt),kt}();function Ot(kt,Ft,Nt){var Gt;if(Nt===3||Nt===4){var Zt=Nt===3?Ft.pt:Ft.ks,ri=Zt.k;ri.length?Gt=new Ye(kt,Ft,Nt):Gt=new je(kt,Ft,Nt)}else Nt===5?Gt=new Dt(kt,Ft):Nt===6?Gt=new et(kt,Ft):Nt===7&&(Gt=new ht(kt,Ft));return Gt.k&&kt.addDynamicProperty(Gt),Gt}function Mt(){return je}function St(){return Ye}var Ut={};return Ut.getShapeProp=Ot,Ut.getConstructorFunction=Mt,Ut.getKeyframedConstructorFunction=St,Ut}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var E=Math.cos,S=Math.sin,x=Math.tan,C=Math.round;function R(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function Ce(si){if(si===0)return this;var ai=E(si),Ci=S(si);return this._t(ai,-Ci,0,0,Ci,ai,0,0,0,0,1,0,0,0,0,1)}function Ue(si){if(si===0)return this;var ai=E(si),Ci=S(si);return this._t(1,0,0,0,0,ai,-Ci,0,0,Ci,ai,0,0,0,0,1)}function je(si){if(si===0)return this;var ai=E(si),Ci=S(si);return this._t(ai,0,Ci,0,0,1,0,0,-Ci,0,ai,0,0,0,0,1)}function Xe(si){if(si===0)return this;var ai=E(si),Ci=S(si);return this._t(ai,-Ci,0,0,Ci,ai,0,0,0,0,1,0,0,0,0,1)}function Ye(si,ai){return this._t(1,ai,si,1,0,0)}function et(si,ai){return this.shear(x(si),x(ai))}function ht(si,ai){var Ci=E(ai),Ei=S(ai);return this._t(Ci,Ei,0,0,-Ei,Ci,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,x(si),1,0,0,0,0,1,0,0,0,0,1)._t(Ci,-Ei,0,0,Ei,Ci,0,0,0,0,1,0,0,0,0,1)}function Dt(si,ai,Ci){return!Ci&&Ci!==0&&(Ci=1),si===1&&ai===1&&Ci===1?this:this._t(si,0,0,0,0,ai,0,0,0,0,Ci,0,0,0,0,1)}function Ot(si,ai,Ci,Ei,zi,or,hr,mr,cr,Li,Ji,Xi,nr,yr,_r,gi){return this.props[0]=si,this.props[1]=ai,this.props[2]=Ci,this.props[3]=Ei,this.props[4]=zi,this.props[5]=or,this.props[6]=hr,this.props[7]=mr,this.props[8]=cr,this.props[9]=Li,this.props[10]=Ji,this.props[11]=Xi,this.props[12]=nr,this.props[13]=yr,this.props[14]=_r,this.props[15]=gi,this}function Mt(si,ai,Ci){return Ci=Ci||0,si!==0||ai!==0||Ci!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,si,ai,Ci,1):this}function St(si,ai,Ci,Ei,zi,or,hr,mr,cr,Li,Ji,Xi,nr,yr,_r,gi){var mi=this.props;if(si===1&&ai===0&&Ci===0&&Ei===0&&zi===0&&or===1&&hr===0&&mr===0&&cr===0&&Li===0&&Ji===1&&Xi===0)return mi[12]=mi[12]*si+mi[15]*nr,mi[13]=mi[13]*or+mi[15]*yr,mi[14]=mi[14]*Ji+mi[15]*_r,mi[15]*=gi,this._identityCalculated=!1,this;var Ai=mi[0],Hi=mi[1],Ni=mi[2],Fi=mi[3],Zi=mi[4],Bi=mi[5],Ki=mi[6],Gi=mi[7],lr=mi[8],er=mi[9],Qi=mi[10],ur=mi[11],br=mi[12],Cr=mi[13],wr=mi[14],Nr=mi[15];return mi[0]=Ai*si+Hi*zi+Ni*cr+Fi*nr,mi[1]=Ai*ai+Hi*or+Ni*Li+Fi*yr,mi[2]=Ai*Ci+Hi*hr+Ni*Ji+Fi*_r,mi[3]=Ai*Ei+Hi*mr+Ni*Xi+Fi*gi,mi[4]=Zi*si+Bi*zi+Ki*cr+Gi*nr,mi[5]=Zi*ai+Bi*or+Ki*Li+Gi*yr,mi[6]=Zi*Ci+Bi*hr+Ki*Ji+Gi*_r,mi[7]=Zi*Ei+Bi*mr+Ki*Xi+Gi*gi,mi[8]=lr*si+er*zi+Qi*cr+ur*nr,mi[9]=lr*ai+er*or+Qi*Li+ur*yr,mi[10]=lr*Ci+er*hr+Qi*Ji+ur*_r,mi[11]=lr*Ei+er*mr+Qi*Xi+ur*gi,mi[12]=br*si+Cr*zi+wr*cr+Nr*nr,mi[13]=br*ai+Cr*or+wr*Li+Nr*yr,mi[14]=br*Ci+Cr*hr+wr*Ji+Nr*_r,mi[15]=br*Ei+Cr*mr+wr*Xi+Nr*gi,this._identityCalculated=!1,this}function Ut(si){var ai=si.props;return this.transform(ai[0],ai[1],ai[2],ai[3],ai[4],ai[5],ai[6],ai[7],ai[8],ai[9],ai[10],ai[11],ai[12],ai[13],ai[14],ai[15])}function kt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ft(si){for(var ai=0;ai<16;){if(si.props[ai]!==this.props[ai])return!1;ai+=1}return!0}function Nt(si){var ai;for(ai=0;ai<16;ai+=1)si.props[ai]=this.props[ai];return si}function Gt(si){var ai;for(ai=0;ai<16;ai+=1)this.props[ai]=si[ai]}function Zt(si,ai,Ci){return{x:si*this.props[0]+ai*this.props[4]+Ci*this.props[8]+this.props[12],y:si*this.props[1]+ai*this.props[5]+Ci*this.props[9]+this.props[13],z:si*this.props[2]+ai*this.props[6]+Ci*this.props[10]+this.props[14]}}function ri(si,ai,Ci){return si*this.props[0]+ai*this.props[4]+Ci*this.props[8]+this.props[12]}function li(si,ai,Ci){return si*this.props[1]+ai*this.props[5]+Ci*this.props[9]+this.props[13]}function hi(si,ai,Ci){return si*this.props[2]+ai*this.props[6]+Ci*this.props[10]+this.props[14]}function xi(){var si=this.props[0]*this.props[5]-this.props[1]*this.props[4],ai=this.props[5]/si,Ci=-this.props[1]/si,Ei=-this.props[4]/si,zi=this.props[0]/si,or=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/si,hr=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/si,mr=new Matrix;return mr.props[0]=ai,mr.props[1]=Ci,mr.props[4]=Ei,mr.props[5]=zi,mr.props[12]=or,mr.props[13]=hr,mr}function $i(si){var ai=this.getInverseMatrix();return ai.applyToPointArray(si[0],si[1],si[2]||0)}function Mi(si){var ai,Ci=si.length,Ei=[];for(ai=0;ai<Ci;ai+=1)Ei[ai]=$i(si[ai]);return Ei}function Di(si,ai,Ci){var Ei=createTypedArray("float32",6);if(this.isIdentity())Ei[0]=si[0],Ei[1]=si[1],Ei[2]=ai[0],Ei[3]=ai[1],Ei[4]=Ci[0],Ei[5]=Ci[1];else{var zi=this.props[0],or=this.props[1],hr=this.props[4],mr=this.props[5],cr=this.props[12],Li=this.props[13];Ei[0]=si[0]*zi+si[1]*hr+cr,Ei[1]=si[0]*or+si[1]*mr+Li,Ei[2]=ai[0]*zi+ai[1]*hr+cr,Ei[3]=ai[0]*or+ai[1]*mr+Li,Ei[4]=Ci[0]*zi+Ci[1]*hr+cr,Ei[5]=Ci[0]*or+Ci[1]*mr+Li}return Ei}function ki(si,ai,Ci){var Ei;return this.isIdentity()?Ei=[si,ai,Ci]:Ei=[si*this.props[0]+ai*this.props[4]+Ci*this.props[8]+this.props[12],si*this.props[1]+ai*this.props[5]+Ci*this.props[9]+this.props[13],si*this.props[2]+ai*this.props[6]+Ci*this.props[10]+this.props[14]],Ei}function ji(si,ai){if(this.isIdentity())return si+","+ai;var Ci=this.props;return Math.round((si*Ci[0]+ai*Ci[4]+Ci[12])*100)/100+","+Math.round((si*Ci[1]+ai*Ci[5]+Ci[13])*100)/100}function Ri(){for(var si=0,ai=this.props,Ci="matrix3d(",Ei=1e4;si<16;)Ci+=C(ai[si]*Ei)/Ei,Ci+=si===15?")":",",si+=1;return Ci}function ui(si){var ai=1e4;return si<1e-6&&si>0||si>-1e-6&&si<0?C(si*ai)/ai:si}function vi(){var si=this.props,ai=ui(si[0]),Ci=ui(si[1]),Ei=ui(si[4]),zi=ui(si[5]),or=ui(si[12]),hr=ui(si[13]);return"matrix("+ai+","+Ci+","+Ei+","+zi+","+or+","+hr+")"}return function(){this.reset=R,this.rotate=Ce,this.rotateX=Ue,this.rotateY=je,this.rotateZ=Xe,this.skew=et,this.skewFromAxis=ht,this.shear=Ye,this.scale=Dt,this.setTransform=Ot,this.translate=Mt,this.transform=St,this.multiply=Ut,this.applyToPoint=Zt,this.applyToX=ri,this.applyToY=li,this.applyToZ=hi,this.applyToPointArray=ki,this.applyToTriplePoints=Di,this.applyToPointStringified=ji,this.toCSS=Ri,this.to2dCSS=vi,this.clone=Nt,this.cloneFromProps=Gt,this.equals=Ft,this.inversePoints=Mi,this.inversePoint=$i,this.getInverseMatrix=xi,this._t=this.transform,this.isIdentity=kt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(x){return typeof x}:_typeof$3=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof$3(E)}var lottie={};function setLocation(E){setLocationHref(E)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(E){setSubframeEnabled(E)}function setPrefix(E){setIdPrefix(E)}function loadAnimation(E){return animationManager.loadAnimation(E)}function setQuality(E){if(typeof E=="string")switch(E){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(E)&&E>1&&setDefaultCurveSegments(E)}function inBrowser(){return typeof navigator<"u"}function installPlugin(E,S){E==="expressions"&&setExpressionsPlugin(S)}function getFactory(E){switch(E){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(E){for(var S=queryString.split("&"),x=0;x<S.length;x+=1){var C=S[x].split("=");if(decodeURIComponent(C[0])==E)return decodeURIComponent(C[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(E){}var ShapeModifiers=function(){var E={},S={};E.registerModifier=x,E.getModifier=C;function x(R,Ce){S[R]||(S[R]=Ce)}function C(R,Ce,Ue){return new S[R](Ce,Ue)}return E}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(E){if(!this.closed){E.sh.container.addDynamicProperty(E.sh);var S={shape:E.sh,data:E,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(S),this.addShapeToModifier(S),this._isAnimated&&E.setAsAnimated()}},ShapeModifier.prototype.init=function(E,S){this.shapes=[],this.elem=E,this.initDynamicPropertyContainer(E),this.initModifierProperties(E,S),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(E,S){this.s=PropertyFactory.getProp(E,S.s,0,.01,this),this.e=PropertyFactory.getProp(E,S.e,0,.01,this),this.o=PropertyFactory.getProp(E,S.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=S.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(E){E.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(E,S,x,C,R){var Ce=[];S<=1?Ce.push({s:E,e:S}):E>=1?Ce.push({s:E-1,e:S-1}):(Ce.push({s:E,e:1}),Ce.push({s:0,e:S-1}));var Ue=[],je,Xe=Ce.length,Ye;for(je=0;je<Xe;je+=1)if(Ye=Ce[je],!(Ye.e*R<C||Ye.s*R>C+x)){var et,ht;Ye.s*R<=C?et=0:et=(Ye.s*R-C)/x,Ye.e*R>=C+x?ht=1:ht=(Ye.e*R-C)/x,Ue.push([et,ht])}return Ue.length||Ue.push([0,0]),Ue},TrimModifier.prototype.releasePathsData=function(E){var S,x=E.length;for(S=0;S<x;S+=1)segmentsLengthPool.release(E[S]);return E.length=0,E},TrimModifier.prototype.processShapes=function(E){var S,x;if(this._mdf||E){var C=this.o.v%360/360;if(C<0&&(C+=1),this.s.v>1?S=1+C:this.s.v<0?S=0+C:S=this.s.v+C,this.e.v>1?x=1+C:this.e.v<0?x=0+C:x=this.e.v+C,S>x){var R=S;S=x,x=R}S=Math.round(S*1e4)*1e-4,x=Math.round(x*1e4)*1e-4,this.sValue=S,this.eValue=x}else S=this.sValue,x=this.eValue;var Ce,Ue,je=this.shapes.length,Xe,Ye,et,ht,Dt,Ot=0;if(x===S)for(Ue=0;Ue<je;Ue+=1)this.shapes[Ue].localShapeCollection.releaseShapes(),this.shapes[Ue].shape._mdf=!0,this.shapes[Ue].shape.paths=this.shapes[Ue].localShapeCollection,this._mdf&&(this.shapes[Ue].pathsData.length=0);else if(x===1&&S===0||x===0&&S===1){if(this._mdf)for(Ue=0;Ue<je;Ue+=1)this.shapes[Ue].pathsData.length=0,this.shapes[Ue].shape._mdf=!0}else{var Mt=[],St,Ut;for(Ue=0;Ue<je;Ue+=1)if(St=this.shapes[Ue],!St.shape._mdf&&!this._mdf&&!E&&this.m!==2)St.shape.paths=St.localShapeCollection;else{if(Ce=St.shape.paths,Ye=Ce._length,Dt=0,!St.shape._mdf&&St.pathsData.length)Dt=St.totalShapeLength;else{for(et=this.releasePathsData(St.pathsData),Xe=0;Xe<Ye;Xe+=1)ht=bez.getSegmentsLength(Ce.shapes[Xe]),et.push(ht),Dt+=ht.totalLength;St.totalShapeLength=Dt,St.pathsData=et}Ot+=Dt,St.shape._mdf=!0}var kt=S,Ft=x,Nt=0,Gt;for(Ue=je-1;Ue>=0;Ue-=1)if(St=this.shapes[Ue],St.shape._mdf){for(Ut=St.localShapeCollection,Ut.releaseShapes(),this.m===2&&je>1?(Gt=this.calculateShapeEdges(S,x,St.totalShapeLength,Nt,Ot),Nt+=St.totalShapeLength):Gt=[[kt,Ft]],Ye=Gt.length,Xe=0;Xe<Ye;Xe+=1){kt=Gt[Xe][0],Ft=Gt[Xe][1],Mt.length=0,Ft<=1?Mt.push({s:St.totalShapeLength*kt,e:St.totalShapeLength*Ft}):kt>=1?Mt.push({s:St.totalShapeLength*(kt-1),e:St.totalShapeLength*(Ft-1)}):(Mt.push({s:St.totalShapeLength*kt,e:St.totalShapeLength}),Mt.push({s:0,e:St.totalShapeLength*(Ft-1)}));var Zt=this.addShapes(St,Mt[0]);if(Mt[0].s!==Mt[0].e){if(Mt.length>1){var ri=St.shape.paths.shapes[St.shape.paths._length-1];if(ri.c){var li=Zt.pop();this.addPaths(Zt,Ut),Zt=this.addShapes(St,Mt[1],li)}else this.addPaths(Zt,Ut),Zt=this.addShapes(St,Mt[1])}this.addPaths(Zt,Ut)}}St.shape.paths=Ut}}},TrimModifier.prototype.addPaths=function(E,S){var x,C=E.length;for(x=0;x<C;x+=1)S.addShape(E[x])},TrimModifier.prototype.addSegment=function(E,S,x,C,R,Ce,Ue){R.setXYAt(S[0],S[1],"o",Ce),R.setXYAt(x[0],x[1],"i",Ce+1),Ue&&R.setXYAt(E[0],E[1],"v",Ce),R.setXYAt(C[0],C[1],"v",Ce+1)},TrimModifier.prototype.addSegmentFromArray=function(E,S,x,C){S.setXYAt(E[1],E[5],"o",x),S.setXYAt(E[2],E[6],"i",x+1),C&&S.setXYAt(E[0],E[4],"v",x),S.setXYAt(E[3],E[7],"v",x+1)},TrimModifier.prototype.addShapes=function(E,S,x){var C=E.pathsData,R=E.shape.paths.shapes,Ce,Ue=E.shape.paths._length,je,Xe,Ye=0,et,ht,Dt,Ot,Mt=[],St,Ut=!0;for(x?(ht=x._length,St=x._length):(x=shapePool.newElement(),ht=0,St=0),Mt.push(x),Ce=0;Ce<Ue;Ce+=1){for(Dt=C[Ce].lengths,x.c=R[Ce].c,Xe=R[Ce].c?Dt.length:Dt.length+1,je=1;je<Xe;je+=1)if(et=Dt[je-1],Ye+et.addedLength<S.s)Ye+=et.addedLength,x.c=!1;else if(Ye>S.e){x.c=!1;break}else S.s<=Ye&&S.e>=Ye+et.addedLength?(this.addSegment(R[Ce].v[je-1],R[Ce].o[je-1],R[Ce].i[je],R[Ce].v[je],x,ht,Ut),Ut=!1):(Ot=bez.getNewSegment(R[Ce].v[je-1],R[Ce].v[je],R[Ce].o[je-1],R[Ce].i[je],(S.s-Ye)/et.addedLength,(S.e-Ye)/et.addedLength,Dt[je-1]),this.addSegmentFromArray(Ot,x,ht,Ut),Ut=!1,x.c=!1),Ye+=et.addedLength,ht+=1;if(R[Ce].c&&Dt.length){if(et=Dt[je-1],Ye<=S.e){var kt=Dt[je-1].addedLength;S.s<=Ye&&S.e>=Ye+kt?(this.addSegment(R[Ce].v[je-1],R[Ce].o[je-1],R[Ce].i[0],R[Ce].v[0],x,ht,Ut),Ut=!1):(Ot=bez.getNewSegment(R[Ce].v[je-1],R[Ce].v[0],R[Ce].o[je-1],R[Ce].i[0],(S.s-Ye)/kt,(S.e-Ye)/kt,Dt[je-1]),this.addSegmentFromArray(Ot,x,ht,Ut),Ut=!1,x.c=!1)}else x.c=!1;Ye+=et.addedLength,ht+=1}if(x._length&&(x.setXYAt(x.v[St][0],x.v[St][1],"i",St),x.setXYAt(x.v[x._length-1][0],x.v[x._length-1][1],"o",x._length-1)),Ye>S.e)break;Ce<Ue-1&&(x=shapePool.newElement(),Ut=!0,Mt.push(x),ht=0)}return Mt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(E,S){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(E,S.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(E,S){var x=S/100,C=[0,0],R=E._length,Ce=0;for(Ce=0;Ce<R;Ce+=1)C[0]+=E.v[Ce][0],C[1]+=E.v[Ce][1];C[0]/=R,C[1]/=R;var Ue=shapePool.newElement();Ue.c=E.c;var je,Xe,Ye,et,ht,Dt;for(Ce=0;Ce<R;Ce+=1)je=E.v[Ce][0]+(C[0]-E.v[Ce][0])*x,Xe=E.v[Ce][1]+(C[1]-E.v[Ce][1])*x,Ye=E.o[Ce][0]+(C[0]-E.o[Ce][0])*-x,et=E.o[Ce][1]+(C[1]-E.o[Ce][1])*-x,ht=E.i[Ce][0]+(C[0]-E.i[Ce][0])*-x,Dt=E.i[Ce][1]+(C[1]-E.i[Ce][1])*-x,Ue.setTripleAt(je,Xe,Ye,et,ht,Dt,Ce);return Ue},PuckerAndBloatModifier.prototype.processShapes=function(E){var S,x,C=this.shapes.length,R,Ce,Ue=this.amount.v;if(Ue!==0){var je,Xe;for(x=0;x<C;x+=1){if(je=this.shapes[x],Xe=je.localShapeCollection,!(!je.shape._mdf&&!this._mdf&&!E))for(Xe.releaseShapes(),je.shape._mdf=!0,S=je.shape.paths.shapes,Ce=je.shape.paths._length,R=0;R<Ce;R+=1)Xe.addShape(this.processPath(S[R],Ue));je.shape.paths=je.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var E=[0,0];function S(Xe){var Ye=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||Ye,this.a&&Xe.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&Xe.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&Xe.skewFromAxis(-this.sk.v,this.sa.v),this.r?Xe.rotate(-this.r.v):Xe.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?Xe.translate(this.px.v,this.py.v,-this.pz.v):Xe.translate(this.px.v,this.py.v,0):Xe.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function x(Xe){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||Xe){var Ye;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var et,ht;if(Ye=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(et=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/Ye,0),ht=this.p.getValueAtTime(this.p.keyframes[0].t/Ye,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(et=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/Ye,0),ht=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/Ye,0)):(et=this.p.pv,ht=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/Ye,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){et=[],ht=[];var Dt=this.px,Ot=this.py;Dt._caching.lastFrame+Dt.offsetTime<=Dt.keyframes[0].t?(et[0]=Dt.getValueAtTime((Dt.keyframes[0].t+.01)/Ye,0),et[1]=Ot.getValueAtTime((Ot.keyframes[0].t+.01)/Ye,0),ht[0]=Dt.getValueAtTime(Dt.keyframes[0].t/Ye,0),ht[1]=Ot.getValueAtTime(Ot.keyframes[0].t/Ye,0)):Dt._caching.lastFrame+Dt.offsetTime>=Dt.keyframes[Dt.keyframes.length-1].t?(et[0]=Dt.getValueAtTime(Dt.keyframes[Dt.keyframes.length-1].t/Ye,0),et[1]=Ot.getValueAtTime(Ot.keyframes[Ot.keyframes.length-1].t/Ye,0),ht[0]=Dt.getValueAtTime((Dt.keyframes[Dt.keyframes.length-1].t-.01)/Ye,0),ht[1]=Ot.getValueAtTime((Ot.keyframes[Ot.keyframes.length-1].t-.01)/Ye,0)):(et=[Dt.pv,Ot.pv],ht[0]=Dt.getValueAtTime((Dt._caching.lastFrame+Dt.offsetTime-.01)/Ye,Dt.offsetTime),ht[1]=Ot.getValueAtTime((Ot._caching.lastFrame+Ot.offsetTime-.01)/Ye,Ot.offsetTime))}else ht=E,et=ht;this.v.rotate(-Math.atan2(et[1]-ht[1],et[0]-ht[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function C(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function R(){}function Ce(Xe){this._addDynamicProperty(Xe),this.elem.addDynamicProperty(Xe),this._isDirty=!0}function Ue(Xe,Ye,et){if(this.elem=Xe,this.frameId=-1,this.propType="transform",this.data=Ye,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(et||Xe),Ye.p&&Ye.p.s?(this.px=PropertyFactory.getProp(Xe,Ye.p.x,0,0,this),this.py=PropertyFactory.getProp(Xe,Ye.p.y,0,0,this),Ye.p.z&&(this.pz=PropertyFactory.getProp(Xe,Ye.p.z,0,0,this))):this.p=PropertyFactory.getProp(Xe,Ye.p||{k:[0,0,0]},1,0,this),Ye.rx){if(this.rx=PropertyFactory.getProp(Xe,Ye.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(Xe,Ye.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(Xe,Ye.rz,0,degToRads,this),Ye.or.k[0].ti){var ht,Dt=Ye.or.k.length;for(ht=0;ht<Dt;ht+=1)Ye.or.k[ht].to=null,Ye.or.k[ht].ti=null}this.or=PropertyFactory.getProp(Xe,Ye.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(Xe,Ye.r||{k:0},0,degToRads,this);Ye.sk&&(this.sk=PropertyFactory.getProp(Xe,Ye.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(Xe,Ye.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(Xe,Ye.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(Xe,Ye.s||{k:[100,100,100]},1,.01,this),Ye.o?this.o=PropertyFactory.getProp(Xe,Ye.o,0,.01,Xe):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}Ue.prototype={applyToMatrix:S,getValue:x,precalculateMatrix:C,autoOrient:R},extendPrototype([DynamicPropertyContainer],Ue),Ue.prototype.addDynamicProperty=Ce,Ue.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function je(Xe,Ye,et){return new Ue(Xe,Ye,et)}return{getTransformProperty:je}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(E,S){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(E,S.c,0,null,this),this.o=PropertyFactory.getProp(E,S.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(E,S.tr,this),this.so=PropertyFactory.getProp(E,S.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(E,S.tr.eo,0,.01,this),this.data=S,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(E,S,x,C,R,Ce){var Ue=Ce?-1:1,je=C.s.v[0]+(1-C.s.v[0])*(1-R),Xe=C.s.v[1]+(1-C.s.v[1])*(1-R);E.translate(C.p.v[0]*Ue*R,C.p.v[1]*Ue*R,C.p.v[2]),S.translate(-C.a.v[0],-C.a.v[1],C.a.v[2]),S.rotate(-C.r.v*Ue*R),S.translate(C.a.v[0],C.a.v[1],C.a.v[2]),x.translate(-C.a.v[0],-C.a.v[1],C.a.v[2]),x.scale(Ce?1/je:je,Ce?1/Xe:Xe),x.translate(C.a.v[0],C.a.v[1],C.a.v[2])},RepeaterModifier.prototype.init=function(E,S,x,C){for(this.elem=E,this.arr=S,this.pos=x,this.elemsData=C,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(E),this.initModifierProperties(E,S[x]);x>0;)x-=1,this._elements.unshift(S[x]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(E){var S,x=E.length;for(S=0;S<x;S+=1)E[S]._processed=!1,E[S].ty==="gr"&&this.resetElements(E[S].it)},RepeaterModifier.prototype.cloneElements=function(E){var S=JSON.parse(JSON.stringify(E));return this.resetElements(S),S},RepeaterModifier.prototype.changeGroupRender=function(E,S){var x,C=E.length;for(x=0;x<C;x+=1)E[x]._render=S,E[x].ty==="gr"&&this.changeGroupRender(E[x].it,S)},RepeaterModifier.prototype.processShapes=function(E){var S,x,C,R,Ce,Ue=!1;if(this._mdf||E){var je=Math.ceil(this.c.v);if(this._groups.length<je){for(;this._groups.length<je;){var Xe={it:this.cloneElements(this._elements),ty:"gr"};Xe.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Xe),this._groups.splice(0,0,Xe),this._currentCopies+=1}this.elem.reloadShapes(),Ue=!0}Ce=0;var Ye;for(C=0;C<=this._groups.length-1;C+=1){if(Ye=Ce<je,this._groups[C]._render=Ye,this.changeGroupRender(this._groups[C].it,Ye),!Ye){var et=this.elemsData[C].it,ht=et[et.length-1];ht.transform.op.v!==0?(ht.transform.op._mdf=!0,ht.transform.op.v=0):ht.transform.op._mdf=!1}Ce+=1}this._currentCopies=je;var Dt=this.o.v,Ot=Dt%1,Mt=Dt>0?Math.floor(Dt):Math.ceil(Dt),St=this.pMatrix.props,Ut=this.rMatrix.props,kt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ft=0;if(Dt>0){for(;Ft<Mt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ft+=1;Ot&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Ot,!1),Ft+=Ot)}else if(Dt<0){for(;Ft>Mt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ft-=1;Ot&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Ot,!0),Ft-=Ot)}C=this.data.m===1?0:this._currentCopies-1,R=this.data.m===1?1:-1,Ce=this._currentCopies;for(var Nt,Gt;Ce;){if(S=this.elemsData[C].it,x=S[S.length-1].transform.mProps.v.props,Gt=x.length,S[S.length-1].transform.mProps._mdf=!0,S[S.length-1].transform.op._mdf=!0,S[S.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(C/(this._currentCopies-1)),Ft!==0){for((C!==0&&R===1||C!==this._currentCopies-1&&R===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ut[0],Ut[1],Ut[2],Ut[3],Ut[4],Ut[5],Ut[6],Ut[7],Ut[8],Ut[9],Ut[10],Ut[11],Ut[12],Ut[13],Ut[14],Ut[15]),this.matrix.transform(kt[0],kt[1],kt[2],kt[3],kt[4],kt[5],kt[6],kt[7],kt[8],kt[9],kt[10],kt[11],kt[12],kt[13],kt[14],kt[15]),this.matrix.transform(St[0],St[1],St[2],St[3],St[4],St[5],St[6],St[7],St[8],St[9],St[10],St[11],St[12],St[13],St[14],St[15]),Nt=0;Nt<Gt;Nt+=1)x[Nt]=this.matrix.props[Nt];this.matrix.reset()}else for(this.matrix.reset(),Nt=0;Nt<Gt;Nt+=1)x[Nt]=this.matrix.props[Nt];Ft+=1,Ce-=1,C+=R}}else for(Ce=this._currentCopies,C=0,R=1;Ce;)S=this.elemsData[C].it,x=S[S.length-1].transform.mProps.v.props,S[S.length-1].transform.mProps._mdf=!1,S[S.length-1].transform.op._mdf=!1,Ce-=1,C+=R;return Ue},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(E,S){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(E,S.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(E,S){var x=shapePool.newElement();x.c=E.c;var C,R=E._length,Ce,Ue,je,Xe,Ye,et,ht=0,Dt,Ot,Mt,St,Ut,kt;for(C=0;C<R;C+=1)Ce=E.v[C],je=E.o[C],Ue=E.i[C],Ce[0]===je[0]&&Ce[1]===je[1]&&Ce[0]===Ue[0]&&Ce[1]===Ue[1]?(C===0||C===R-1)&&!E.c?(x.setTripleAt(Ce[0],Ce[1],je[0],je[1],Ue[0],Ue[1],ht),ht+=1):(C===0?Xe=E.v[R-1]:Xe=E.v[C-1],Ye=Math.sqrt(Math.pow(Ce[0]-Xe[0],2)+Math.pow(Ce[1]-Xe[1],2)),et=Ye?Math.min(Ye/2,S)/Ye:0,Ut=Ce[0]+(Xe[0]-Ce[0])*et,Dt=Ut,kt=Ce[1]-(Ce[1]-Xe[1])*et,Ot=kt,Mt=Dt-(Dt-Ce[0])*roundCorner,St=Ot-(Ot-Ce[1])*roundCorner,x.setTripleAt(Dt,Ot,Mt,St,Ut,kt,ht),ht+=1,C===R-1?Xe=E.v[0]:Xe=E.v[C+1],Ye=Math.sqrt(Math.pow(Ce[0]-Xe[0],2)+Math.pow(Ce[1]-Xe[1],2)),et=Ye?Math.min(Ye/2,S)/Ye:0,Mt=Ce[0]+(Xe[0]-Ce[0])*et,Dt=Mt,St=Ce[1]+(Xe[1]-Ce[1])*et,Ot=St,Ut=Dt-(Dt-Ce[0])*roundCorner,kt=Ot-(Ot-Ce[1])*roundCorner,x.setTripleAt(Dt,Ot,Mt,St,Ut,kt,ht),ht+=1):(x.setTripleAt(E.v[C][0],E.v[C][1],E.o[C][0],E.o[C][1],E.i[C][0],E.i[C][1],ht),ht+=1);return x},RoundCornersModifier.prototype.processShapes=function(E){var S,x,C=this.shapes.length,R,Ce,Ue=this.rd.v;if(Ue!==0){var je,Xe;for(x=0;x<C;x+=1){if(je=this.shapes[x],Xe=je.localShapeCollection,!(!je.shape._mdf&&!this._mdf&&!E))for(Xe.releaseShapes(),je.shape._mdf=!0,S=je.shape.paths.shapes,Ce=je.shape.paths._length,R=0;R<Ce;R+=1)Xe.addShape(this.processPath(S[R],Ue));je.shape.paths=je.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(E,S){return Math.abs(E-S)*1e5<=Math.min(Math.abs(E),Math.abs(S))}function floatZero(E){return Math.abs(E)<=1e-5}function lerp(E,S,x){return E*(1-x)+S*x}function lerpPoint(E,S,x){return[lerp(E[0],S[0],x),lerp(E[1],S[1],x)]}function quadRoots(E,S,x){if(E===0)return[];var C=S*S-4*E*x;if(C<0)return[];var R=-S/(2*E);if(C===0)return[R];var Ce=Math.sqrt(C)/(2*E);return[R-Ce,R+Ce]}function polynomialCoefficients(E,S,x,C){return[-E+3*S-3*x+C,3*E-6*S+3*x,-3*E+3*S,E]}function singlePoint(E){return new PolynomialBezier(E,E,E,E,!1)}function PolynomialBezier(E,S,x,C,R){R&&pointEqual(E,S)&&(S=lerpPoint(E,C,1/3)),R&&pointEqual(x,C)&&(x=lerpPoint(E,C,2/3));var Ce=polynomialCoefficients(E[0],S[0],x[0],C[0]),Ue=polynomialCoefficients(E[1],S[1],x[1],C[1]);this.a=[Ce[0],Ue[0]],this.b=[Ce[1],Ue[1]],this.c=[Ce[2],Ue[2]],this.d=[Ce[3],Ue[3]],this.points=[E,S,x,C]}PolynomialBezier.prototype.point=function(E){return[((this.a[0]*E+this.b[0])*E+this.c[0])*E+this.d[0],((this.a[1]*E+this.b[1])*E+this.c[1])*E+this.d[1]]},PolynomialBezier.prototype.derivative=function(E){return[(3*E*this.a[0]+2*this.b[0])*E+this.c[0],(3*E*this.a[1]+2*this.b[1])*E+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(E){var S=this.derivative(E);return Math.atan2(S[1],S[0])},PolynomialBezier.prototype.normalAngle=function(E){var S=this.derivative(E);return Math.atan2(S[0],S[1])},PolynomialBezier.prototype.inflectionPoints=function(){var E=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(E))return[];var S=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/E,x=S*S-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/E;if(x<0)return[];var C=Math.sqrt(x);return floatZero(C)?C>0&&C<1?[S]:[]:[S-C,S+C].filter(function(R){return R>0&&R<1})},PolynomialBezier.prototype.split=function(E){if(E<=0)return[singlePoint(this.points[0]),this];if(E>=1)return[this,singlePoint(this.points[this.points.length-1])];var S=lerpPoint(this.points[0],this.points[1],E),x=lerpPoint(this.points[1],this.points[2],E),C=lerpPoint(this.points[2],this.points[3],E),R=lerpPoint(S,x,E),Ce=lerpPoint(x,C,E),Ue=lerpPoint(R,Ce,E);return[new PolynomialBezier(this.points[0],S,R,Ue,!0),new PolynomialBezier(Ue,Ce,C,this.points[3],!0)]};function extrema(E,S){var x=E.points[0][S],C=E.points[E.points.length-1][S];if(x>C){var R=C;C=x,x=R}for(var Ce=quadRoots(3*E.a[S],2*E.b[S],E.c[S]),Ue=0;Ue<Ce.length;Ue+=1)if(Ce[Ue]>0&&Ce[Ue]<1){var je=E.point(Ce[Ue])[S];je<x?x=je:je>C&&(C=je)}return{min:x,max:C}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var E=this.bounds();return{left:E.x.min,right:E.x.max,top:E.y.min,bottom:E.y.max,width:E.x.max-E.x.min,height:E.y.max-E.y.min,cx:(E.x.max+E.x.min)/2,cy:(E.y.max+E.y.min)/2}};function intersectData(E,S,x){var C=E.boundingBox();return{cx:C.cx,cy:C.cy,width:C.width,height:C.height,bez:E,t:(S+x)/2,t1:S,t2:x}}function splitData(E){var S=E.bez.split(.5);return[intersectData(S[0],E.t1,E.t),intersectData(S[1],E.t,E.t2)]}function boxIntersect(E,S){return Math.abs(E.cx-S.cx)*2<E.width+S.width&&Math.abs(E.cy-S.cy)*2<E.height+S.height}function intersectsImpl(E,S,x,C,R,Ce){if(boxIntersect(E,S)){if(x>=Ce||E.width<=C&&E.height<=C&&S.width<=C&&S.height<=C){R.push([E.t,S.t]);return}var Ue=splitData(E),je=splitData(S);intersectsImpl(Ue[0],je[0],x+1,C,R,Ce),intersectsImpl(Ue[0],je[1],x+1,C,R,Ce),intersectsImpl(Ue[1],je[0],x+1,C,R,Ce),intersectsImpl(Ue[1],je[1],x+1,C,R,Ce)}}PolynomialBezier.prototype.intersections=function(E,S,x){S===void 0&&(S=2),x===void 0&&(x=7);var C=[];return intersectsImpl(intersectData(this,0,1),intersectData(E,0,1),0,S,C,x),C},PolynomialBezier.shapeSegment=function(E,S){var x=(S+1)%E.length();return new PolynomialBezier(E.v[S],E.o[S],E.i[x],E.v[x],!0)},PolynomialBezier.shapeSegmentInverted=function(E,S){var x=(S+1)%E.length();return new PolynomialBezier(E.v[x],E.i[x],E.o[S],E.v[S],!0)};function crossProduct(E,S){return[E[1]*S[2]-E[2]*S[1],E[2]*S[0]-E[0]*S[2],E[0]*S[1]-E[1]*S[0]]}function lineIntersection(E,S,x,C){var R=[E[0],E[1],1],Ce=[S[0],S[1],1],Ue=[x[0],x[1],1],je=[C[0],C[1],1],Xe=crossProduct(crossProduct(R,Ce),crossProduct(Ue,je));return floatZero(Xe[2])?null:[Xe[0]/Xe[2],Xe[1]/Xe[2]]}function polarOffset(E,S,x){return[E[0]+Math.cos(S)*x,E[1]-Math.sin(S)*x]}function pointDistance(E,S){return Math.hypot(E[0]-S[0],E[1]-S[1])}function pointEqual(E,S){return floatEqual(E[0],S[0])&&floatEqual(E[1],S[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(E,S){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(E,S.s,0,null,this),this.frequency=PropertyFactory.getProp(E,S.r,0,null,this),this.pointsType=PropertyFactory.getProp(E,S.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(E,S,x,C,R,Ce,Ue){var je=x-Math.PI/2,Xe=x+Math.PI/2,Ye=S[0]+Math.cos(x)*C*R,et=S[1]-Math.sin(x)*C*R;E.setTripleAt(Ye,et,Ye+Math.cos(je)*Ce,et-Math.sin(je)*Ce,Ye+Math.cos(Xe)*Ue,et-Math.sin(Xe)*Ue,E.length())}function getPerpendicularVector(E,S){var x=[S[0]-E[0],S[1]-E[1]],C=-Math.PI*.5,R=[Math.cos(C)*x[0]-Math.sin(C)*x[1],Math.sin(C)*x[0]+Math.cos(C)*x[1]];return R}function getProjectingAngle(E,S){var x=S===0?E.length()-1:S-1,C=(S+1)%E.length(),R=E.v[x],Ce=E.v[C],Ue=getPerpendicularVector(R,Ce);return Math.atan2(0,1)-Math.atan2(Ue[1],Ue[0])}function zigZagCorner(E,S,x,C,R,Ce,Ue){var je=getProjectingAngle(S,x),Xe=S.v[x%S._length],Ye=S.v[x===0?S._length-1:x-1],et=S.v[(x+1)%S._length],ht=Ce===2?Math.sqrt(Math.pow(Xe[0]-Ye[0],2)+Math.pow(Xe[1]-Ye[1],2)):0,Dt=Ce===2?Math.sqrt(Math.pow(Xe[0]-et[0],2)+Math.pow(Xe[1]-et[1],2)):0;setPoint(E,S.v[x%S._length],je,Ue,C,Dt/((R+1)*2),ht/((R+1)*2))}function zigZagSegment(E,S,x,C,R,Ce){for(var Ue=0;Ue<C;Ue+=1){var je=(Ue+1)/(C+1),Xe=R===2?Math.sqrt(Math.pow(S.points[3][0]-S.points[0][0],2)+Math.pow(S.points[3][1]-S.points[0][1],2)):0,Ye=S.normalAngle(je),et=S.point(je);setPoint(E,et,Ye,Ce,x,Xe/((C+1)*2),Xe/((C+1)*2)),Ce=-Ce}return Ce}ZigZagModifier.prototype.processPath=function(E,S,x,C){var R=E._length,Ce=shapePool.newElement();if(Ce.c=E.c,E.c||(R-=1),R===0)return Ce;var Ue=-1,je=PolynomialBezier.shapeSegment(E,0);zigZagCorner(Ce,E,0,S,x,C,Ue);for(var Xe=0;Xe<R;Xe+=1)Ue=zigZagSegment(Ce,je,S,x,C,-Ue),Xe===R-1&&!E.c?je=null:je=PolynomialBezier.shapeSegment(E,(Xe+1)%R),zigZagCorner(Ce,E,Xe+1,S,x,C,Ue);return Ce},ZigZagModifier.prototype.processShapes=function(E){var S,x,C=this.shapes.length,R,Ce,Ue=this.amplitude.v,je=Math.max(0,Math.round(this.frequency.v)),Xe=this.pointsType.v;if(Ue!==0){var Ye,et;for(x=0;x<C;x+=1){if(Ye=this.shapes[x],et=Ye.localShapeCollection,!(!Ye.shape._mdf&&!this._mdf&&!E))for(et.releaseShapes(),Ye.shape._mdf=!0,S=Ye.shape.paths.shapes,Ce=Ye.shape.paths._length,R=0;R<Ce;R+=1)et.addShape(this.processPath(S[R],Ue,je,Xe));Ye.shape.paths=Ye.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(E,S,x){var C=Math.atan2(S[0]-E[0],S[1]-E[1]);return[polarOffset(E,C,x),polarOffset(S,C,x)]}function offsetSegment(E,S){var x,C,R,Ce,Ue,je,Xe;Xe=linearOffset(E.points[0],E.points[1],S),x=Xe[0],C=Xe[1],Xe=linearOffset(E.points[1],E.points[2],S),R=Xe[0],Ce=Xe[1],Xe=linearOffset(E.points[2],E.points[3],S),Ue=Xe[0],je=Xe[1];var Ye=lineIntersection(x,C,R,Ce);Ye===null&&(Ye=C);var et=lineIntersection(Ue,je,R,Ce);return et===null&&(et=Ue),new PolynomialBezier(x,Ye,et,je)}function joinLines(E,S,x,C,R){var Ce=S.points[3],Ue=x.points[0];if(C===3||pointEqual(Ce,Ue))return Ce;if(C===2){var je=-S.tangentAngle(1),Xe=-x.tangentAngle(0)+Math.PI,Ye=lineIntersection(Ce,polarOffset(Ce,je+Math.PI/2,100),Ue,polarOffset(Ue,je+Math.PI/2,100)),et=Ye?pointDistance(Ye,Ce):pointDistance(Ce,Ue)/2,ht=polarOffset(Ce,je,2*et*roundCorner);return E.setXYAt(ht[0],ht[1],"o",E.length()-1),ht=polarOffset(Ue,Xe,2*et*roundCorner),E.setTripleAt(Ue[0],Ue[1],Ue[0],Ue[1],ht[0],ht[1],E.length()),Ue}var Dt=pointEqual(Ce,S.points[2])?S.points[0]:S.points[2],Ot=pointEqual(Ue,x.points[1])?x.points[3]:x.points[1],Mt=lineIntersection(Dt,Ce,Ue,Ot);return Mt&&pointDistance(Mt,Ce)<R?(E.setTripleAt(Mt[0],Mt[1],Mt[0],Mt[1],Mt[0],Mt[1],E.length()),Mt):Ce}function getIntersection(E,S){var x=E.intersections(S);return x.length&&floatEqual(x[0][0],1)&&x.shift(),x.length?x[0]:null}function pruneSegmentIntersection(E,S){var x=E.slice(),C=S.slice(),R=getIntersection(E[E.length-1],S[0]);return R&&(x[E.length-1]=E[E.length-1].split(R[0])[0],C[0]=S[0].split(R[1])[1]),E.length>1&&S.length>1&&(R=getIntersection(E[0],S[S.length-1]),R)?[[E[0].split(R[0])[0]],[S[S.length-1].split(R[1])[1]]]:[x,C]}function pruneIntersections(E){for(var S,x=1;x<E.length;x+=1)S=pruneSegmentIntersection(E[x-1],E[x]),E[x-1]=S[0],E[x]=S[1];return E.length>1&&(S=pruneSegmentIntersection(E[E.length-1],E[0]),E[E.length-1]=S[0],E[0]=S[1]),E}function offsetSegmentSplit(E,S){var x=E.inflectionPoints(),C,R,Ce,Ue;if(x.length===0)return[offsetSegment(E,S)];if(x.length===1||floatEqual(x[1],1))return Ce=E.split(x[0]),C=Ce[0],R=Ce[1],[offsetSegment(C,S),offsetSegment(R,S)];Ce=E.split(x[0]),C=Ce[0];var je=(x[1]-x[0])/(1-x[0]);return Ce=Ce[1].split(je),Ue=Ce[0],R=Ce[1],[offsetSegment(C,S),offsetSegment(Ue,S),offsetSegment(R,S)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(E,S){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(E,S.a,0,null,this),this.miterLimit=PropertyFactory.getProp(E,S.ml,0,null,this),this.lineJoin=S.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(E,S,x,C){var R=shapePool.newElement();R.c=E.c;var Ce=E.length();E.c||(Ce-=1);var Ue,je,Xe,Ye=[];for(Ue=0;Ue<Ce;Ue+=1)Xe=PolynomialBezier.shapeSegment(E,Ue),Ye.push(offsetSegmentSplit(Xe,S));if(!E.c)for(Ue=Ce-1;Ue>=0;Ue-=1)Xe=PolynomialBezier.shapeSegmentInverted(E,Ue),Ye.push(offsetSegmentSplit(Xe,S));Ye=pruneIntersections(Ye);var et=null,ht=null;for(Ue=0;Ue<Ye.length;Ue+=1){var Dt=Ye[Ue];for(ht&&(et=joinLines(R,ht,Dt[0],x,C)),ht=Dt[Dt.length-1],je=0;je<Dt.length;je+=1)Xe=Dt[je],et&&pointEqual(Xe.points[0],et)?R.setXYAt(Xe.points[1][0],Xe.points[1][1],"o",R.length()-1):R.setTripleAt(Xe.points[0][0],Xe.points[0][1],Xe.points[1][0],Xe.points[1][1],Xe.points[0][0],Xe.points[0][1],R.length()),R.setTripleAt(Xe.points[3][0],Xe.points[3][1],Xe.points[3][0],Xe.points[3][1],Xe.points[2][0],Xe.points[2][1],R.length()),et=Xe.points[3]}return Ye.length&&joinLines(R,ht,Ye[0][0],x,C),R},OffsetPathModifier.prototype.processShapes=function(E){var S,x,C=this.shapes.length,R,Ce,Ue=this.amount.v,je=this.miterLimit.v,Xe=this.lineJoin;if(Ue!==0){var Ye,et;for(x=0;x<C;x+=1){if(Ye=this.shapes[x],et=Ye.localShapeCollection,!(!Ye.shape._mdf&&!this._mdf&&!E))for(et.releaseShapes(),Ye.shape._mdf=!0,S=Ye.shape.paths.shapes,Ce=Ye.shape.paths._length,R=0;R<Ce;R+=1)et.addShape(this.processPath(S[R],Ue,Xe,je));Ye.shape.paths=Ye.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(E){for(var S=E.fStyle?E.fStyle.split(" "):[],x="normal",C="normal",R=S.length,Ce,Ue=0;Ue<R;Ue+=1)switch(Ce=S[Ue].toLowerCase(),Ce){case"italic":C="italic";break;case"bold":x="700";break;case"black":x="900";break;case"medium":x="500";break;case"regular":case"normal":x="400";break;case"light":case"thin":x="200";break}return{style:C,weight:E.fWeight||x}}var FontManager=function(){var E=5e3,S={w:0,size:0,shapes:[],data:{shapes:[]}},x=[];x=x.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var C=127988,R=917631,Ce=917601,Ue=917626,je=65039,Xe=8205,Ye=127462,et=127487,ht=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function Dt(ui){var vi=ui.split(","),si,ai=vi.length,Ci=[];for(si=0;si<ai;si+=1)vi[si]!=="sans-serif"&&vi[si]!=="monospace"&&Ci.push(vi[si]);return Ci.join(",")}function Ot(ui,vi){var si=createTag("span");si.setAttribute("aria-hidden",!0),si.style.fontFamily=vi;var ai=createTag("span");ai.innerText="giItT1WQy@!-/#",si.style.position="absolute",si.style.left="-10000px",si.style.top="-10000px",si.style.fontSize="300px",si.style.fontVariant="normal",si.style.fontStyle="normal",si.style.fontWeight="normal",si.style.letterSpacing="0",si.appendChild(ai),document.body.appendChild(si);var Ci=ai.offsetWidth;return ai.style.fontFamily=Dt(ui)+", "+vi,{node:ai,w:Ci,parent:si}}function Mt(){var ui,vi=this.fonts.length,si,ai,Ci=vi;for(ui=0;ui<vi;ui+=1)this.fonts[ui].loaded?Ci-=1:this.fonts[ui].fOrigin==="n"||this.fonts[ui].origin===0?this.fonts[ui].loaded=!0:(si=this.fonts[ui].monoCase.node,ai=this.fonts[ui].monoCase.w,si.offsetWidth!==ai?(Ci-=1,this.fonts[ui].loaded=!0):(si=this.fonts[ui].sansCase.node,ai=this.fonts[ui].sansCase.w,si.offsetWidth!==ai&&(Ci-=1,this.fonts[ui].loaded=!0)),this.fonts[ui].loaded&&(this.fonts[ui].sansCase.parent.parentNode.removeChild(this.fonts[ui].sansCase.parent),this.fonts[ui].monoCase.parent.parentNode.removeChild(this.fonts[ui].monoCase.parent)));Ci!==0&&Date.now()-this.initTime<E?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function St(ui,vi){var si=document.body&&vi?"svg":"canvas",ai,Ci=getFontProperties(ui);if(si==="svg"){var Ei=createNS("text");Ei.style.fontSize="100px",Ei.setAttribute("font-family",ui.fFamily),Ei.setAttribute("font-style",Ci.style),Ei.setAttribute("font-weight",Ci.weight),Ei.textContent="1",ui.fClass?(Ei.style.fontFamily="inherit",Ei.setAttribute("class",ui.fClass)):Ei.style.fontFamily=ui.fFamily,vi.appendChild(Ei),ai=Ei}else{var zi=new OffscreenCanvas(500,500).getContext("2d");zi.font=Ci.style+" "+Ci.weight+" 100px "+ui.fFamily,ai=zi}function or(hr){return si==="svg"?(ai.textContent=hr,ai.getComputedTextLength()):ai.measureText(hr).width}return{measureText:or}}function Ut(ui,vi){if(!ui){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=ui.list;return}if(!document.body){this.isLoaded=!0,ui.list.forEach(function(Ji){Ji.helper=St(Ji),Ji.cache={}}),this.fonts=ui.list;return}var si=ui.list,ai,Ci=si.length,Ei=Ci;for(ai=0;ai<Ci;ai+=1){var zi=!0,or,hr;if(si[ai].loaded=!1,si[ai].monoCase=Ot(si[ai].fFamily,"monospace"),si[ai].sansCase=Ot(si[ai].fFamily,"sans-serif"),!si[ai].fPath)si[ai].loaded=!0,Ei-=1;else if(si[ai].fOrigin==="p"||si[ai].origin===3){if(or=document.querySelectorAll('style[f-forigin="p"][f-family="'+si[ai].fFamily+'"], style[f-origin="3"][f-family="'+si[ai].fFamily+'"]'),or.length>0&&(zi=!1),zi){var mr=createTag("style");mr.setAttribute("f-forigin",si[ai].fOrigin),mr.setAttribute("f-origin",si[ai].origin),mr.setAttribute("f-family",si[ai].fFamily),mr.type="text/css",mr.innerText="@font-face {font-family: "+si[ai].fFamily+"; font-style: normal; src: url('"+si[ai].fPath+"');}",vi.appendChild(mr)}}else if(si[ai].fOrigin==="g"||si[ai].origin===1){for(or=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),hr=0;hr<or.length;hr+=1)or[hr].href.indexOf(si[ai].fPath)!==-1&&(zi=!1);if(zi){var cr=createTag("link");cr.setAttribute("f-forigin",si[ai].fOrigin),cr.setAttribute("f-origin",si[ai].origin),cr.type="text/css",cr.rel="stylesheet",cr.href=si[ai].fPath,document.body.appendChild(cr)}}else if(si[ai].fOrigin==="t"||si[ai].origin===2){for(or=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),hr=0;hr<or.length;hr+=1)si[ai].fPath===or[hr].src&&(zi=!1);if(zi){var Li=createTag("link");Li.setAttribute("f-forigin",si[ai].fOrigin),Li.setAttribute("f-origin",si[ai].origin),Li.setAttribute("rel","stylesheet"),Li.setAttribute("href",si[ai].fPath),vi.appendChild(Li)}}si[ai].helper=St(si[ai],vi),si[ai].cache={},this.fonts.push(si[ai])}Ei===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function kt(ui){if(ui){this.chars||(this.chars=[]);var vi,si=ui.length,ai,Ci=this.chars.length,Ei;for(vi=0;vi<si;vi+=1){for(ai=0,Ei=!1;ai<Ci;)this.chars[ai].style===ui[vi].style&&this.chars[ai].fFamily===ui[vi].fFamily&&this.chars[ai].ch===ui[vi].ch&&(Ei=!0),ai+=1;Ei||(this.chars.push(ui[vi]),Ci+=1)}}}function Ft(ui,vi,si){for(var ai=0,Ci=this.chars.length;ai<Ci;){if(this.chars[ai].ch===ui&&this.chars[ai].style===vi&&this.chars[ai].fFamily===si)return this.chars[ai];ai+=1}return(typeof ui=="string"&&ui.charCodeAt(0)!==13||!ui)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ui,vi,si)),S}function Nt(ui,vi,si){var ai=this.getFontByName(vi),Ci=ui;if(!ai.cache[Ci]){var Ei=ai.helper;if(ui===" "){var zi=Ei.measureText("|"+ui+"|"),or=Ei.measureText("||");ai.cache[Ci]=(zi-or)/100}else ai.cache[Ci]=Ei.measureText(ui)/100}return ai.cache[Ci]*si}function Gt(ui){for(var vi=0,si=this.fonts.length;vi<si;){if(this.fonts[vi].fName===ui)return this.fonts[vi];vi+=1}return this.fonts[0]}function Zt(ui){var vi=0,si=ui.charCodeAt(0);if(si>=55296&&si<=56319){var ai=ui.charCodeAt(1);ai>=56320&&ai<=57343&&(vi=(si-55296)*1024+ai-56320+65536)}return vi}function ri(ui,vi){var si=ui.toString(16)+vi.toString(16);return ht.indexOf(si)!==-1}function li(ui){return ui===Xe}function hi(ui){return ui===je}function xi(ui){var vi=Zt(ui);return vi>=Ye&&vi<=et}function $i(ui){return xi(ui.substr(0,2))&&xi(ui.substr(2,2))}function Mi(ui){return x.indexOf(ui)!==-1}function Di(ui,vi){var si=Zt(ui.substr(vi,2));if(si!==C)return!1;var ai=0;for(vi+=2;ai<5;){if(si=Zt(ui.substr(vi,2)),si<Ce||si>Ue)return!1;ai+=1,vi+=2}return Zt(ui.substr(vi,2))===R}function ki(){this.isLoaded=!0}var ji=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};ji.isModifier=ri,ji.isZeroWidthJoiner=li,ji.isFlagEmoji=$i,ji.isRegionalCode=xi,ji.isCombinedCharacter=Mi,ji.isRegionalFlag=Di,ji.isVariationSelector=hi,ji.BLACK_FLAG_CODE_POINT=C;var Ri={addChars:kt,addFonts:Ut,getCharData:Ft,getFontByName:Gt,measureText:Nt,checkLoadedFonts:Mt,setIsLoaded:ki};return ji.prototype=Ri,ji}();function SlotManager(E){this.animationData=E}SlotManager.prototype.getProp=function(E){return this.animationData.slots&&this.animationData.slots[E.sid]?Object.assign(E,this.animationData.slots[E.sid].p):E};function slotFactory(E){return new SlotManager(E)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(S){this.renderableComponents.indexOf(S)===-1&&this.renderableComponents.push(S)},removeRenderableComponent:function(S){this.renderableComponents.indexOf(S)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(S),1)},prepareRenderableFrame:function(S){this.checkLayerLimits(S)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(S){this.data.ip-this.data.st<=S&&this.data.op-this.data.st>S?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var S,x=this.renderableComponents.length;for(S=0;S<x;S+=1)this.renderableComponents[S].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var E={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(S){return E[S]||""}}();function SliderEffect(E,S,x){this.p=PropertyFactory.getProp(S,E.v,0,0,x)}function AngleEffect(E,S,x){this.p=PropertyFactory.getProp(S,E.v,0,0,x)}function ColorEffect(E,S,x){this.p=PropertyFactory.getProp(S,E.v,1,0,x)}function PointEffect(E,S,x){this.p=PropertyFactory.getProp(S,E.v,1,0,x)}function LayerIndexEffect(E,S,x){this.p=PropertyFactory.getProp(S,E.v,0,0,x)}function MaskIndexEffect(E,S,x){this.p=PropertyFactory.getProp(S,E.v,0,0,x)}function CheckboxEffect(E,S,x){this.p=PropertyFactory.getProp(S,E.v,0,0,x)}function NoValueEffect(){this.p={}}function EffectsManager(E,S){var x=E.ef||[];this.effectElements=[];var C,R=x.length,Ce;for(C=0;C<R;C+=1)Ce=new GroupEffect(x[C],S),this.effectElements.push(Ce)}function GroupEffect(E,S){this.init(E,S)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(E,S){this.data=E,this.effectElements=[],this.initDynamicPropertyContainer(S);var x,C=this.data.ef.length,R,Ce=this.data.ef;for(x=0;x<C;x+=1){switch(R=null,Ce[x].ty){case 0:R=new SliderEffect(Ce[x],S,this);break;case 1:R=new AngleEffect(Ce[x],S,this);break;case 2:R=new ColorEffect(Ce[x],S,this);break;case 3:R=new PointEffect(Ce[x],S,this);break;case 4:case 7:R=new CheckboxEffect(Ce[x],S,this);break;case 10:R=new LayerIndexEffect(Ce[x],S,this);break;case 11:R=new MaskIndexEffect(Ce[x],S,this);break;case 5:R=new EffectsManager(Ce[x],S);break;default:R=new NoValueEffect(Ce[x]);break}R&&this.effectElements.push(R)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var S=0,x=this.data.masksProperties.length;S<x;){if(this.data.masksProperties[S].mode!=="n"&&this.data.masksProperties[S].cl!==!1)return!0;S+=1}return!1},initExpressions:function(){var S=getExpressionInterfaces();if(S){var x=S("layer"),C=S("effects"),R=S("shape"),Ce=S("text"),Ue=S("comp");this.layerInterface=x(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var je=C.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(je),this.data.ty===0||this.data.xt?this.compInterface=Ue(this):this.data.ty===4?(this.layerInterface.shapeInterface=R(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=Ce(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var S=getBlendMode(this.data.bm),x=this.baseElement||this.layerElement;x.style["mix-blend-mode"]=S},initBaseData:function(S,x,C){this.globalData=x,this.comp=C,this.data=S,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(S,x){var C,R=this.dynamicProperties.length;for(C=0;C<R;C+=1)(x||this._isParent&&this.dynamicProperties[C].propType==="transform")&&(this.dynamicProperties[C].getValue(),this.dynamicProperties[C]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(S){this.dynamicProperties.indexOf(S)===-1&&this.dynamicProperties.push(S)}};function FootageElement(E,S,x){this.initFrame(),this.initRenderable(),this.assetData=S.getAssetData(E.refId),this.footageData=S.imageLoader.getAsset(this.assetData),this.initBaseData(E,S,x)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var E=getExpressionInterfaces();if(E){var S=E("footage");this.layerInterface=S(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(E,S,x){this.initFrame(),this.initRenderable(),this.assetData=S.getAssetData(E.refId),this.initBaseData(E,S,x),this._isPlaying=!1,this._canPlay=!1;var C=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(C),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=E.tm?PropertyFactory.getProp(this,E.tm,0,S.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,E.au&&E.au.lv?E.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(E){if(this.prepareRenderableFrame(E,!0),this.prepareProperties(E,!0),this.tm._placeholder)this._currentTime=E/this.data.sr;else{var S=this.tm.v;this._currentTime=S}this._volume=this.lv.v[0];var x=this._volume*this._volumeMultiplier;this._previousVolume!==x&&(this._previousVolume=x,this.audio.volume(x))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(E){this.audio.rate(E)},AudioElement.prototype.volume=function(E){this._volumeMultiplier=E,this._previousVolume=E*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(E){var S,x=this.layers.length,C;for(this.completeLayers=!0,S=x-1;S>=0;S-=1)this.elements[S]||(C=this.layers[S],C.ip-C.st<=E-this.layers[S].st&&C.op-C.st>E-this.layers[S].st&&this.buildItem(S)),this.completeLayers=this.elements[S]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(E){switch(E.ty){case 2:return this.createImage(E);case 0:return this.createComp(E);case 1:return this.createSolid(E);case 3:return this.createNull(E);case 4:return this.createShape(E);case 5:return this.createText(E);case 6:return this.createAudio(E);case 13:return this.createCamera(E);case 15:return this.createFootage(E);default:return this.createNull(E)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(E){return new AudioElement(E,this.globalData,this)},BaseRenderer.prototype.createFootage=function(E){return new FootageElement(E,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var E,S=this.layers.length;for(E=0;E<S;E+=1)this.buildItem(E);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(E){this.completeLayers=!1;var S,x=E.length,C,R=this.layers.length;for(S=0;S<x;S+=1)for(C=0;C<R;){if(this.layers[C].id===E[S].id){this.layers[C]=E[S];break}C+=1}},BaseRenderer.prototype.setProjectInterface=function(E){this.globalData.projectInterface=E},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(E,S,x){for(var C=this.elements,R=this.layers,Ce=0,Ue=R.length;Ce<Ue;)R[Ce].ind==S&&(!C[Ce]||C[Ce]===!0?(this.buildItem(Ce),this.addPendingElement(E)):(x.push(C[Ce]),C[Ce].setAsParent(),R[Ce].parent!==void 0?this.buildElementParenting(E,R[Ce].parent,x):E.setHierarchy(x))),Ce+=1},BaseRenderer.prototype.addPendingElement=function(E){this.pendingElements.push(E)},BaseRenderer.prototype.searchExtraCompositions=function(E){var S,x=E.length;for(S=0;S<x;S+=1)if(E[S].xt){var C=this.createComp(E[S]);C.initExpressions(),this.globalData.projectInterface.registerComposition(C)}},BaseRenderer.prototype.getElementById=function(E){var S,x=this.elements.length;for(S=0;S<x;S+=1)if(this.elements[S].data.ind===E)return this.elements[S];return null},BaseRenderer.prototype.getElementByPath=function(E){var S=E.shift(),x;if(typeof S=="number")x=this.elements[S];else{var C,R=this.elements.length;for(C=0;C<R;C+=1)if(this.elements[C].data.nm===S){x=this.elements[C];break}}return E.length===0?x:x.getElementByPath(E)},BaseRenderer.prototype.setupGlobalData=function(E,S){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(E),this.globalData.fontManager.addChars(E.chars),this.globalData.fontManager.addFonts(E.fonts,S),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=E.fr,this.globalData.nm=E.nm,this.globalData.compSize={w:E.w,h:E.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var S=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:S,localMat:S,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var S,x=this.finalTransform.mat,C=0,R=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;C<R;){if(this.hierarchy[C].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}C+=1}if(this.finalTransform._matMdf)for(S=this.finalTransform.mProp.v.props,x.cloneFromProps(S),C=0;C<R;C+=1)x.multiply(this.hierarchy[C].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var S=0,x=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;S<x;)this.localTransforms[S]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[S]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),S+=1;if(this.finalTransform._localMatMdf){var C=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(C),S=1;S<x;S+=1){var R=this.localTransforms[S].matrix;C.multiply(R)}C.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var Ce=this.finalTransform.localOpacity;for(S=0;S<x;S+=1)Ce*=this.localTransforms[S].opacity*.01;this.finalTransform.localOpacity=Ce}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var S=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(S.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var x=0,C=S.length;for(x=0;x<C;x+=1)this.localTransforms.push(S[x])}}},globalToLocal:function(S){var x=[];x.push(this.finalTransform);for(var C=!0,R=this.comp;C;)R.finalTransform?(R.data.hasMask&&x.splice(0,0,R.finalTransform),R=R.comp):C=!1;var Ce,Ue=x.length,je;for(Ce=0;Ce<Ue;Ce+=1)je=x[Ce].mat.applyToPointArray(0,0,0),S=[S[0]-je[0],S[1]-je[1],0];return S},mHelper:new Matrix};function MaskElement(E,S,x){this.data=E,this.element=S,this.globalData=x,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var C=this.globalData.defs,R,Ce=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(Ce),this.solidPath="";var Ue,je=this.masksProperties,Xe=0,Ye=[],et,ht,Dt=createElementID(),Ot,Mt,St,Ut,kt="clipPath",Ft="clip-path";for(R=0;R<Ce;R+=1)if((je[R].mode!=="a"&&je[R].mode!=="n"||je[R].inv||je[R].o.k!==100||je[R].o.x)&&(kt="mask",Ft="mask"),(je[R].mode==="s"||je[R].mode==="i")&&Xe===0?(Ot=createNS("rect"),Ot.setAttribute("fill","#ffffff"),Ot.setAttribute("width",this.element.comp.data.w||0),Ot.setAttribute("height",this.element.comp.data.h||0),Ye.push(Ot)):Ot=null,Ue=createNS("path"),je[R].mode==="n")this.viewData[R]={op:PropertyFactory.getProp(this.element,je[R].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,je[R],3),elem:Ue,lastPath:""},C.appendChild(Ue);else{Xe+=1,Ue.setAttribute("fill",je[R].mode==="s"?"#000000":"#ffffff"),Ue.setAttribute("clip-rule","nonzero");var Nt;if(je[R].x.k!==0?(kt="mask",Ft="mask",Ut=PropertyFactory.getProp(this.element,je[R].x,0,null,this.element),Nt=createElementID(),Mt=createNS("filter"),Mt.setAttribute("id",Nt),St=createNS("feMorphology"),St.setAttribute("operator","erode"),St.setAttribute("in","SourceGraphic"),St.setAttribute("radius","0"),Mt.appendChild(St),C.appendChild(Mt),Ue.setAttribute("stroke",je[R].mode==="s"?"#000000":"#ffffff")):(St=null,Ut=null),this.storedData[R]={elem:Ue,x:Ut,expan:St,lastPath:"",lastOperator:"",filterId:Nt,lastRadius:0},je[R].mode==="i"){ht=Ye.length;var Gt=createNS("g");for(et=0;et<ht;et+=1)Gt.appendChild(Ye[et]);var Zt=createNS("mask");Zt.setAttribute("mask-type","alpha"),Zt.setAttribute("id",Dt+"_"+Xe),Zt.appendChild(Ue),C.appendChild(Zt),Gt.setAttribute("mask","url("+getLocationHref()+"#"+Dt+"_"+Xe+")"),Ye.length=0,Ye.push(Gt)}else Ye.push(Ue);je[R].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[R]={elem:Ue,lastPath:"",op:PropertyFactory.getProp(this.element,je[R].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,je[R],3),invRect:Ot},this.viewData[R].prop.k||this.drawPath(je[R],this.viewData[R].prop.v,this.viewData[R])}for(this.maskElement=createNS(kt),Ce=Ye.length,R=0;R<Ce;R+=1)this.maskElement.appendChild(Ye[R]);Xe>0&&(this.maskElement.setAttribute("id",Dt),this.element.maskedElement.setAttribute(Ft,"url("+getLocationHref()+"#"+Dt+")"),C.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(E){return this.viewData[E].prop},MaskElement.prototype.renderFrame=function(E){var S=this.element.finalTransform.mat,x,C=this.masksProperties.length;for(x=0;x<C;x+=1)if((this.viewData[x].prop._mdf||E)&&this.drawPath(this.masksProperties[x],this.viewData[x].prop.v,this.viewData[x]),(this.viewData[x].op._mdf||E)&&this.viewData[x].elem.setAttribute("fill-opacity",this.viewData[x].op.v),this.masksProperties[x].mode!=="n"&&(this.viewData[x].invRect&&(this.element.finalTransform.mProp._mdf||E)&&this.viewData[x].invRect.setAttribute("transform",S.getInverseMatrix().to2dCSS()),this.storedData[x].x&&(this.storedData[x].x._mdf||E))){var R=this.storedData[x].expan;this.storedData[x].x.v<0?(this.storedData[x].lastOperator!=="erode"&&(this.storedData[x].lastOperator="erode",this.storedData[x].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[x].filterId+")")),R.setAttribute("radius",-this.storedData[x].x.v)):(this.storedData[x].lastOperator!=="dilate"&&(this.storedData[x].lastOperator="dilate",this.storedData[x].elem.setAttribute("filter",null)),this.storedData[x].elem.setAttribute("stroke-width",this.storedData[x].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var E="M0,0 ";return E+=" h"+this.globalData.compSize.w,E+=" v"+this.globalData.compSize.h,E+=" h-"+this.globalData.compSize.w,E+=" v-"+this.globalData.compSize.h+" ",E},MaskElement.prototype.drawPath=function(E,S,x){var C=" M"+S.v[0][0]+","+S.v[0][1],R,Ce;for(Ce=S._length,R=1;R<Ce;R+=1)C+=" C"+S.o[R-1][0]+","+S.o[R-1][1]+" "+S.i[R][0]+","+S.i[R][1]+" "+S.v[R][0]+","+S.v[R][1];if(S.c&&Ce>1&&(C+=" C"+S.o[R-1][0]+","+S.o[R-1][1]+" "+S.i[0][0]+","+S.i[0][1]+" "+S.v[0][0]+","+S.v[0][1]),x.lastPath!==C){var Ue="";x.elem&&(S.c&&(Ue=E.inv?this.solidPath+C:C),x.elem.setAttribute("d",Ue)),x.lastPath=C}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var E={};E.createFilter=S,E.createAlphaToLuminanceFilter=x;function S(C,R){var Ce=createNS("filter");return Ce.setAttribute("id",C),R!==!0&&(Ce.setAttribute("filterUnits","objectBoundingBox"),Ce.setAttribute("x","0%"),Ce.setAttribute("y","0%"),Ce.setAttribute("width","100%"),Ce.setAttribute("height","100%")),Ce}function x(){var C=createNS("feColorMatrix");return C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","sRGB"),C.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),C}return E}(),featureSupport=function(){var E={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(E.maskType=!1),/firefox/i.test(navigator.userAgent)&&(E.svgLumaHidden=!1),E}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(E){var S,x="SourceGraphic",C=E.data.ef?E.data.ef.length:0,R=createElementID(),Ce=filtersFactory.createFilter(R,!0),Ue=0;this.filters=[];var je;for(S=0;S<C;S+=1){je=null;var Xe=E.data.ef[S].ty;if(registeredEffects$1[Xe]){var Ye=registeredEffects$1[Xe].effect;je=new Ye(Ce,E.effectsManager.effectElements[S],E,idPrefix+Ue,x),x=idPrefix+Ue,registeredEffects$1[Xe].countsAsEffect&&(Ue+=1)}je&&this.filters.push(je)}Ue&&(E.globalData.defs.appendChild(Ce),E.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+R+")")),this.filters.length&&E.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(E){var S,x=this.filters.length;for(S=0;S<x;S+=1)this.filters[S].renderFrame(E)},SVGEffects.prototype.getEffects=function(E){var S,x=this.filters.length,C=[];for(S=0;S<x;S+=1)this.filters[S].type===E&&C.push(this.filters[S]);return C};function registerEffect$1(E,S,x){registeredEffects$1[E]={effect:S,countsAsEffect:x}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var S=null;if(this.data.td){this.matteMasks={};var x=createNS("g");x.setAttribute("id",this.layerId),x.appendChild(this.layerElement),S=x,this.globalData.defs.appendChild(x)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),S=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var C=createNS("clipPath"),R=createNS("path");R.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var Ce=createElementID();if(C.setAttribute("id",Ce),C.appendChild(R),this.globalData.defs.appendChild(C),this.checkMasks()){var Ue=createNS("g");Ue.setAttribute("clip-path","url("+getLocationHref()+"#"+Ce+")"),Ue.appendChild(this.layerElement),this.transformedElement=Ue,S?S.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Ce+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(S){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[S]){var x=this.layerId+"_"+S,C,R,Ce,Ue;if(S===1||S===3){var je=createNS("mask");je.setAttribute("id",x),je.setAttribute("mask-type",S===3?"luminance":"alpha"),Ce=createNS("use"),Ce.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),je.appendChild(Ce),this.globalData.defs.appendChild(je),!featureSupport.maskType&&S===1&&(je.setAttribute("mask-type","luminance"),C=createElementID(),R=filtersFactory.createFilter(C),this.globalData.defs.appendChild(R),R.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Ue=createNS("g"),Ue.appendChild(Ce),je.appendChild(Ue),Ue.setAttribute("filter","url("+getLocationHref()+"#"+C+")"))}else if(S===2){var Xe=createNS("mask");Xe.setAttribute("id",x),Xe.setAttribute("mask-type","alpha");var Ye=createNS("g");Xe.appendChild(Ye),C=createElementID(),R=filtersFactory.createFilter(C);var et=createNS("feComponentTransfer");et.setAttribute("in","SourceGraphic"),R.appendChild(et);var ht=createNS("feFuncA");ht.setAttribute("type","table"),ht.setAttribute("tableValues","1.0 0.0"),et.appendChild(ht),this.globalData.defs.appendChild(R);var Dt=createNS("rect");Dt.setAttribute("width",this.comp.data.w),Dt.setAttribute("height",this.comp.data.h),Dt.setAttribute("x","0"),Dt.setAttribute("y","0"),Dt.setAttribute("fill","#ffffff"),Dt.setAttribute("opacity","0"),Ye.setAttribute("filter","url("+getLocationHref()+"#"+C+")"),Ye.appendChild(Dt),Ce=createNS("use"),Ce.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Ye.appendChild(Ce),featureSupport.maskType||(Xe.setAttribute("mask-type","luminance"),R.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Ue=createNS("g"),Ye.appendChild(Dt),Ue.appendChild(this.layerElement),Ye.appendChild(Ue)),this.globalData.defs.appendChild(Xe)}this.matteMasks[S]=x}return this.matteMasks[S]},setMatte:function(S){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+S+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(S){this.hierarchy=S},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var E={initElement:function(x,C,R){this.initFrame(),this.initBaseData(x,C,R),this.initTransform(x,C,R),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var x=this.baseElement||this.layerElement;x.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var x=this.baseElement||this.layerElement;x.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(x){this._mdf=!1,this.prepareRenderableFrame(x),this.prepareProperties(x,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(E)],RenderableDOMElement)})();function IImageElement(E,S,x){this.assetData=S.getAssetData(E.refId),this.assetData&&this.assetData.sid&&(this.assetData=S.slotManager.getProp(this.assetData)),this.initElement(E,S,x),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var E=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",E),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(E,S){this.elem=E,this.pos=S}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(S){var x,C=this.shapeModifiers.length;for(x=0;x<C;x+=1)this.shapeModifiers[x].addShape(S)},isShapeInAnimatedModifiers:function(S){for(var x=0,C=this.shapeModifiers.length;x<C;)if(this.shapeModifiers[x].isAnimatedWithShape(S))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var S,x=this.shapes.length;for(S=0;S<x;S+=1)this.shapes[S].sh.reset();x=this.shapeModifiers.length;var C;for(S=x-1;S>=0&&(C=this.shapeModifiers[S].processShapes(this._isFirstFrame),!C);S-=1);}},searchProcessedElement:function(S){for(var x=this.processedElements,C=0,R=x.length;C<R;){if(x[C].elem===S)return x[C].pos;C+=1}return 0},addProcessedElement:function(S,x){for(var C=this.processedElements,R=C.length;R;)if(R-=1,C[R].elem===S){C[R].pos=x;return}C.push(new ProcessedElement(S,x))},prepareFrame:function(S){this.prepareRenderableFrame(S),this.prepareProperties(S,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(E,S,x){this.caches=[],this.styles=[],this.transformers=E,this.lStr="",this.sh=x,this.lvl=S,this._isAnimated=!!x.k;for(var C=0,R=E.length;C<R;){if(E[C].mProps.dynamicProperties.length){this._isAnimated=!0;break}C+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(E,S){this.data=E,this.type=E.ty,this.d="",this.lvl=S,this._mdf=!1,this.closed=E.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(E,S,x,C){this.elem=E,this.frameId=-1,this.dataProps=createSizedArray(S.length),this.renderer=x,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",S.length?S.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(C);var R,Ce=S.length||0,Ue;for(R=0;R<Ce;R+=1)Ue=PropertyFactory.getProp(E,S[R].v,0,0,this),this.k=Ue.k||this.k,this.dataProps[R]={n:S[R].n,p:Ue};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(E){if(!(this.elem.globalData.frameId===this.frameId&&!E)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||E,this._mdf)){var S=0,x=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),S=0;S<x;S+=1)this.dataProps[S].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[S].p.v:this.dashArray[S]=this.dataProps[S].p.v:this.dashoffset[0]=this.dataProps[S].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(E,S,x){this.initDynamicPropertyContainer(E),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(E,S.o,0,.01,this),this.w=PropertyFactory.getProp(E,S.w,0,null,this),this.d=new DashProperty(E,S.d||{},"svg",this),this.c=PropertyFactory.getProp(E,S.c,1,255,this),this.style=x,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(E,S,x){this.initDynamicPropertyContainer(E),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(E,S.o,0,.01,this),this.c=PropertyFactory.getProp(E,S.c,1,255,this),this.style=x}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(E,S,x){this.initDynamicPropertyContainer(E),this.getValue=this.iterateDynamicProperties,this.style=x}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(E,S,x){this.data=S,this.c=createTypedArray("uint8c",S.p*4);var C=S.k.k[0].s?S.k.k[0].s.length-S.p*4:S.k.k.length-S.p*4;this.o=createTypedArray("float32",C),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=C,this.initDynamicPropertyContainer(x),this.prop=PropertyFactory.getProp(E,S.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(E,S){for(var x=0,C=this.o.length/2,R;x<C;){if(R=Math.abs(E[x*4]-E[S*4+x*2]),R>.01)return!1;x+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var E=0,S=this.data.k.k.length;E<S;){if(!this.comparePoints(this.data.k.k[E].s,this.data.p))return!1;E+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(E){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||E){var S,x=this.data.p*4,C,R;for(S=0;S<x;S+=1)C=S%4===0?100:255,R=Math.round(this.prop.v[S]*C),this.c[S]!==R&&(this.c[S]=R,this._cmdf=!E);if(this.o.length)for(x=this.prop.v.length,S=this.data.p*4;S<x;S+=1)C=S%2===0?100:1,R=S%2===0?Math.round(this.prop.v[S]*100):this.prop.v[S],this.o[S-this.data.p*4]!==R&&(this.o[S-this.data.p*4]=R,this._omdf=!E);this._mdf=!E}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(E,S,x){this.initDynamicPropertyContainer(E),this.getValue=this.iterateDynamicProperties,this.initGradientData(E,S,x)}SVGGradientFillStyleData.prototype.initGradientData=function(E,S,x){this.o=PropertyFactory.getProp(E,S.o,0,.01,this),this.s=PropertyFactory.getProp(E,S.s,1,null,this),this.e=PropertyFactory.getProp(E,S.e,1,null,this),this.h=PropertyFactory.getProp(E,S.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(E,S.a||{k:0},0,degToRads,this),this.g=new GradientProperty(E,S.g,this),this.style=x,this.stops=[],this.setGradientData(x.pElem,S),this.setGradientOpacity(S,x),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(E,S){var x=createElementID(),C=createNS(S.t===1?"linearGradient":"radialGradient");C.setAttribute("id",x),C.setAttribute("spreadMethod","pad"),C.setAttribute("gradientUnits","userSpaceOnUse");var R=[],Ce,Ue,je;for(je=S.g.p*4,Ue=0;Ue<je;Ue+=4)Ce=createNS("stop"),C.appendChild(Ce),R.push(Ce);E.setAttribute(S.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+x+")"),this.gf=C,this.cst=R},SVGGradientFillStyleData.prototype.setGradientOpacity=function(E,S){if(this.g._hasOpacity&&!this.g._collapsable){var x,C,R,Ce=createNS("mask"),Ue=createNS("path");Ce.appendChild(Ue);var je=createElementID(),Xe=createElementID();Ce.setAttribute("id",Xe);var Ye=createNS(E.t===1?"linearGradient":"radialGradient");Ye.setAttribute("id",je),Ye.setAttribute("spreadMethod","pad"),Ye.setAttribute("gradientUnits","userSpaceOnUse"),R=E.g.k.k[0].s?E.g.k.k[0].s.length:E.g.k.k.length;var et=this.stops;for(C=E.g.p*4;C<R;C+=2)x=createNS("stop"),x.setAttribute("stop-color","rgb(255,255,255)"),Ye.appendChild(x),et.push(x);Ue.setAttribute(E.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+je+")"),E.ty==="gs"&&(Ue.setAttribute("stroke-linecap",lineCapEnum[E.lc||2]),Ue.setAttribute("stroke-linejoin",lineJoinEnum[E.lj||2]),E.lj===1&&Ue.setAttribute("stroke-miterlimit",E.ml)),this.of=Ye,this.ms=Ce,this.ost=et,this.maskId=Xe,S.msElem=Ue}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(E,S,x){this.initDynamicPropertyContainer(E),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(E,S.w,0,null,this),this.d=new DashProperty(E,S.d||{},"svg",this),this.initGradientData(E,S,x),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(E,S,x){this.transform={mProps:E,op:S,container:x},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(S,x,C,R){if(x===0)return"";var Ce=S.o,Ue=S.i,je=S.v,Xe,Ye=" M"+R.applyToPointStringified(je[0][0],je[0][1]);for(Xe=1;Xe<x;Xe+=1)Ye+=" C"+R.applyToPointStringified(Ce[Xe-1][0],Ce[Xe-1][1])+" "+R.applyToPointStringified(Ue[Xe][0],Ue[Xe][1])+" "+R.applyToPointStringified(je[Xe][0],je[Xe][1]);return C&&x&&(Ye+=" C"+R.applyToPointStringified(Ce[Xe-1][0],Ce[Xe-1][1])+" "+R.applyToPointStringified(Ue[0][0],Ue[0][1])+" "+R.applyToPointStringified(je[0][0],je[0][1]),Ye+="z"),Ye},SVGElementsRenderer=function(){var E=new Matrix,S=new Matrix,x={createRenderFunction:C};function C(ht){switch(ht.ty){case"fl":return je;case"gf":return Ye;case"gs":return Xe;case"st":return et;case"sh":case"el":case"rc":case"sr":return Ue;case"tr":return R;case"no":return Ce;default:return null}}function R(ht,Dt,Ot){(Ot||Dt.transform.op._mdf)&&Dt.transform.container.setAttribute("opacity",Dt.transform.op.v),(Ot||Dt.transform.mProps._mdf)&&Dt.transform.container.setAttribute("transform",Dt.transform.mProps.v.to2dCSS())}function Ce(){}function Ue(ht,Dt,Ot){var Mt,St,Ut,kt,Ft,Nt,Gt=Dt.styles.length,Zt=Dt.lvl,ri,li,hi,xi;for(Nt=0;Nt<Gt;Nt+=1){if(kt=Dt.sh._mdf||Ot,Dt.styles[Nt].lvl<Zt){for(li=S.reset(),hi=Zt-Dt.styles[Nt].lvl,xi=Dt.transformers.length-1;!kt&&hi>0;)kt=Dt.transformers[xi].mProps._mdf||kt,hi-=1,xi-=1;if(kt)for(hi=Zt-Dt.styles[Nt].lvl,xi=Dt.transformers.length-1;hi>0;)li.multiply(Dt.transformers[xi].mProps.v),hi-=1,xi-=1}else li=E;if(ri=Dt.sh.paths,St=ri._length,kt){for(Ut="",Mt=0;Mt<St;Mt+=1)Ft=ri.shapes[Mt],Ft&&Ft._length&&(Ut+=buildShapeString(Ft,Ft._length,Ft.c,li));Dt.caches[Nt]=Ut}else Ut=Dt.caches[Nt];Dt.styles[Nt].d+=ht.hd===!0?"":Ut,Dt.styles[Nt]._mdf=kt||Dt.styles[Nt]._mdf}}function je(ht,Dt,Ot){var Mt=Dt.style;(Dt.c._mdf||Ot)&&Mt.pElem.setAttribute("fill","rgb("+bmFloor(Dt.c.v[0])+","+bmFloor(Dt.c.v[1])+","+bmFloor(Dt.c.v[2])+")"),(Dt.o._mdf||Ot)&&Mt.pElem.setAttribute("fill-opacity",Dt.o.v)}function Xe(ht,Dt,Ot){Ye(ht,Dt,Ot),et(ht,Dt,Ot)}function Ye(ht,Dt,Ot){var Mt=Dt.gf,St=Dt.g._hasOpacity,Ut=Dt.s.v,kt=Dt.e.v;if(Dt.o._mdf||Ot){var Ft=ht.ty==="gf"?"fill-opacity":"stroke-opacity";Dt.style.pElem.setAttribute(Ft,Dt.o.v)}if(Dt.s._mdf||Ot){var Nt=ht.t===1?"x1":"cx",Gt=Nt==="x1"?"y1":"cy";Mt.setAttribute(Nt,Ut[0]),Mt.setAttribute(Gt,Ut[1]),St&&!Dt.g._collapsable&&(Dt.of.setAttribute(Nt,Ut[0]),Dt.of.setAttribute(Gt,Ut[1]))}var Zt,ri,li,hi;if(Dt.g._cmdf||Ot){Zt=Dt.cst;var xi=Dt.g.c;for(li=Zt.length,ri=0;ri<li;ri+=1)hi=Zt[ri],hi.setAttribute("offset",xi[ri*4]+"%"),hi.setAttribute("stop-color","rgb("+xi[ri*4+1]+","+xi[ri*4+2]+","+xi[ri*4+3]+")")}if(St&&(Dt.g._omdf||Ot)){var $i=Dt.g.o;for(Dt.g._collapsable?Zt=Dt.cst:Zt=Dt.ost,li=Zt.length,ri=0;ri<li;ri+=1)hi=Zt[ri],Dt.g._collapsable||hi.setAttribute("offset",$i[ri*2]+"%"),hi.setAttribute("stop-opacity",$i[ri*2+1])}if(ht.t===1)(Dt.e._mdf||Ot)&&(Mt.setAttribute("x2",kt[0]),Mt.setAttribute("y2",kt[1]),St&&!Dt.g._collapsable&&(Dt.of.setAttribute("x2",kt[0]),Dt.of.setAttribute("y2",kt[1])));else{var Mi;if((Dt.s._mdf||Dt.e._mdf||Ot)&&(Mi=Math.sqrt(Math.pow(Ut[0]-kt[0],2)+Math.pow(Ut[1]-kt[1],2)),Mt.setAttribute("r",Mi),St&&!Dt.g._collapsable&&Dt.of.setAttribute("r",Mi)),Dt.e._mdf||Dt.h._mdf||Dt.a._mdf||Ot){Mi||(Mi=Math.sqrt(Math.pow(Ut[0]-kt[0],2)+Math.pow(Ut[1]-kt[1],2)));var Di=Math.atan2(kt[1]-Ut[1],kt[0]-Ut[0]),ki=Dt.h.v;ki>=1?ki=.99:ki<=-1&&(ki=-.99);var ji=Mi*ki,Ri=Math.cos(Di+Dt.a.v)*ji+Ut[0],ui=Math.sin(Di+Dt.a.v)*ji+Ut[1];Mt.setAttribute("fx",Ri),Mt.setAttribute("fy",ui),St&&!Dt.g._collapsable&&(Dt.of.setAttribute("fx",Ri),Dt.of.setAttribute("fy",ui))}}}function et(ht,Dt,Ot){var Mt=Dt.style,St=Dt.d;St&&(St._mdf||Ot)&&St.dashStr&&(Mt.pElem.setAttribute("stroke-dasharray",St.dashStr),Mt.pElem.setAttribute("stroke-dashoffset",St.dashoffset[0])),Dt.c&&(Dt.c._mdf||Ot)&&Mt.pElem.setAttribute("stroke","rgb("+bmFloor(Dt.c.v[0])+","+bmFloor(Dt.c.v[1])+","+bmFloor(Dt.c.v[2])+")"),(Dt.o._mdf||Ot)&&Mt.pElem.setAttribute("stroke-opacity",Dt.o.v),(Dt.w._mdf||Ot)&&(Mt.pElem.setAttribute("stroke-width",Dt.w.v),Mt.msElem&&Mt.msElem.setAttribute("stroke-width",Dt.w.v))}return x}();function SVGShapeElement(E,S,x){this.shapes=[],this.shapesData=E.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(E,S,x),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var E,S=this.shapes.length,x,C,R=this.stylesList.length,Ce,Ue=[],je=!1;for(C=0;C<R;C+=1){for(Ce=this.stylesList[C],je=!1,Ue.length=0,E=0;E<S;E+=1)x=this.shapes[E],x.styles.indexOf(Ce)!==-1&&(Ue.push(x),je=x._isAnimated||je);Ue.length>1&&je&&this.setShapesAsAnimated(Ue)}},SVGShapeElement.prototype.setShapesAsAnimated=function(E){var S,x=E.length;for(S=0;S<x;S+=1)E[S].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(E,S){var x,C=new SVGStyleData(E,S),R=C.pElem;if(E.ty==="st")x=new SVGStrokeStyleData(this,E,C);else if(E.ty==="fl")x=new SVGFillStyleData(this,E,C);else if(E.ty==="gf"||E.ty==="gs"){var Ce=E.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;x=new Ce(this,E,C),this.globalData.defs.appendChild(x.gf),x.maskId&&(this.globalData.defs.appendChild(x.ms),this.globalData.defs.appendChild(x.of),R.setAttribute("mask","url("+getLocationHref()+"#"+x.maskId+")"))}else E.ty==="no"&&(x=new SVGNoStyleData(this,E,C));return(E.ty==="st"||E.ty==="gs")&&(R.setAttribute("stroke-linecap",lineCapEnum[E.lc||2]),R.setAttribute("stroke-linejoin",lineJoinEnum[E.lj||2]),R.setAttribute("fill-opacity","0"),E.lj===1&&R.setAttribute("stroke-miterlimit",E.ml)),E.r===2&&R.setAttribute("fill-rule","evenodd"),E.ln&&R.setAttribute("id",E.ln),E.cl&&R.setAttribute("class",E.cl),E.bm&&(R.style["mix-blend-mode"]=getBlendMode(E.bm)),this.stylesList.push(C),this.addToAnimatedContents(E,x),x},SVGShapeElement.prototype.createGroupElement=function(E){var S=new ShapeGroupData;return E.ln&&S.gr.setAttribute("id",E.ln),E.cl&&S.gr.setAttribute("class",E.cl),E.bm&&(S.gr.style["mix-blend-mode"]=getBlendMode(E.bm)),S},SVGShapeElement.prototype.createTransformElement=function(E,S){var x=TransformPropertyFactory.getTransformProperty(this,E,this),C=new SVGTransformData(x,x.o,S);return this.addToAnimatedContents(E,C),C},SVGShapeElement.prototype.createShapeElement=function(E,S,x){var C=4;E.ty==="rc"?C=5:E.ty==="el"?C=6:E.ty==="sr"&&(C=7);var R=ShapePropertyFactory.getShapeProp(this,E,C,this),Ce=new SVGShapeData(S,x,R);return this.shapes.push(Ce),this.addShapeToModifiers(Ce),this.addToAnimatedContents(E,Ce),Ce},SVGShapeElement.prototype.addToAnimatedContents=function(E,S){for(var x=0,C=this.animatedContents.length;x<C;){if(this.animatedContents[x].element===S)return;x+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(E),element:S,data:E})},SVGShapeElement.prototype.setElementStyles=function(E){var S=E.styles,x,C=this.stylesList.length;for(x=0;x<C;x+=1)this.stylesList[x].closed||S.push(this.stylesList[x])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var E,S=this.itemsData.length;for(E=0;E<S;E+=1)this.prevViewData[E]=this.itemsData[E];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),S=this.dynamicProperties.length,E=0;E<S;E+=1)this.dynamicProperties[E].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(E,S,x,C,R,Ce,Ue){var je=[].concat(Ce),Xe,Ye=E.length-1,et,ht,Dt=[],Ot=[],Mt,St,Ut;for(Xe=Ye;Xe>=0;Xe-=1){if(Ut=this.searchProcessedElement(E[Xe]),Ut?S[Xe]=x[Ut-1]:E[Xe]._render=Ue,E[Xe].ty==="fl"||E[Xe].ty==="st"||E[Xe].ty==="gf"||E[Xe].ty==="gs"||E[Xe].ty==="no")Ut?S[Xe].style.closed=!1:S[Xe]=this.createStyleElement(E[Xe],R),E[Xe]._render&&S[Xe].style.pElem.parentNode!==C&&C.appendChild(S[Xe].style.pElem),Dt.push(S[Xe].style);else if(E[Xe].ty==="gr"){if(!Ut)S[Xe]=this.createGroupElement(E[Xe]);else for(ht=S[Xe].it.length,et=0;et<ht;et+=1)S[Xe].prevViewData[et]=S[Xe].it[et];this.searchShapes(E[Xe].it,S[Xe].it,S[Xe].prevViewData,S[Xe].gr,R+1,je,Ue),E[Xe]._render&&S[Xe].gr.parentNode!==C&&C.appendChild(S[Xe].gr)}else E[Xe].ty==="tr"?(Ut||(S[Xe]=this.createTransformElement(E[Xe],C)),Mt=S[Xe].transform,je.push(Mt)):E[Xe].ty==="sh"||E[Xe].ty==="rc"||E[Xe].ty==="el"||E[Xe].ty==="sr"?(Ut||(S[Xe]=this.createShapeElement(E[Xe],je,R)),this.setElementStyles(S[Xe])):E[Xe].ty==="tm"||E[Xe].ty==="rd"||E[Xe].ty==="ms"||E[Xe].ty==="pb"||E[Xe].ty==="zz"||E[Xe].ty==="op"?(Ut?(St=S[Xe],St.closed=!1):(St=ShapeModifiers.getModifier(E[Xe].ty),St.init(this,E[Xe]),S[Xe]=St,this.shapeModifiers.push(St)),Ot.push(St)):E[Xe].ty==="rp"&&(Ut?(St=S[Xe],St.closed=!0):(St=ShapeModifiers.getModifier(E[Xe].ty),S[Xe]=St,St.init(this,E,Xe,S),this.shapeModifiers.push(St),Ue=!1),Ot.push(St));this.addProcessedElement(E[Xe],Xe+1)}for(Ye=Dt.length,Xe=0;Xe<Ye;Xe+=1)Dt[Xe].closed=!0;for(Ye=Ot.length,Xe=0;Xe<Ye;Xe+=1)Ot[Xe].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var E,S=this.stylesList.length;for(E=0;E<S;E+=1)this.stylesList[E].reset();for(this.renderShape(),E=0;E<S;E+=1)(this.stylesList[E]._mdf||this._isFirstFrame)&&(this.stylesList[E].msElem&&(this.stylesList[E].msElem.setAttribute("d",this.stylesList[E].d),this.stylesList[E].d="M0 0"+this.stylesList[E].d),this.stylesList[E].pElem.setAttribute("d",this.stylesList[E].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var E,S=this.animatedContents.length,x;for(E=0;E<S;E+=1)x=this.animatedContents[E],(this._isFirstFrame||x.element._isAnimated)&&x.data!==!0&&x.fn(x.data,x.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(E,S,x,C,R,Ce){this.o=E,this.sw=S,this.sc=x,this.fc=C,this.m=R,this.p=Ce,this._mdf={o:!0,sw:!!S,sc:!!x,fc:!!C,m:!0,p:!0}}LetterProps.prototype.update=function(E,S,x,C,R,Ce){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var Ue=!1;return this.o!==E&&(this.o=E,this._mdf.o=!0,Ue=!0),this.sw!==S&&(this.sw=S,this._mdf.sw=!0,Ue=!0),this.sc!==x&&(this.sc=x,this._mdf.sc=!0,Ue=!0),this.fc!==C&&(this.fc=C,this._mdf.fc=!0,Ue=!0),this.m!==R&&(this.m=R,this._mdf.m=!0,Ue=!0),Ce.length&&(this.p[0]!==Ce[0]||this.p[1]!==Ce[1]||this.p[4]!==Ce[4]||this.p[5]!==Ce[5]||this.p[12]!==Ce[12]||this.p[13]!==Ce[13])&&(this.p=Ce,this._mdf.p=!0,Ue=!0),Ue};function TextProperty(E,S){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,S.d&&S.d.sid&&(S.d=E.globalData.slotManager.getProp(S.d)),this.data=S,this.elem=E,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(E,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(E[x]=S[x]);return E},TextProperty.prototype.setCurrentData=function(E){E.__complete||this.completeTextData(E),this.currentData=E,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(E){this.effectsSequence.push(E),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(E){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!E)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var S=this.currentData,x=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var C,R=this.effectsSequence.length,Ce=E||this.data.d.k[this.keysIndex].s;for(C=0;C<R;C+=1)x!==this.keysIndex?Ce=this.effectsSequence[C](Ce,Ce.t):Ce=this.effectsSequence[C](this.currentData,Ce.t);S!==Ce&&this.setCurrentData(Ce),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var E=this.data.d.k,S=this.elem.comp.renderedFrame,x=0,C=E.length;x<=C-1&&!(x===C-1||E[x+1].t>S);)x+=1;return this.keysIndex!==x&&(this.keysIndex=x),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(E){for(var S=[],x=0,C=E.length,R,Ce,Ue=!1,je=!1,Xe="";x<C;)Ue=je,je=!1,R=E.charCodeAt(x),Xe=E.charAt(x),FontManager.isCombinedCharacter(R)?Ue=!0:R>=55296&&R<=56319?FontManager.isRegionalFlag(E,x)?Xe=E.substr(x,14):(Ce=E.charCodeAt(x+1),Ce>=56320&&Ce<=57343&&(FontManager.isModifier(R,Ce)?(Xe=E.substr(x,2),Ue=!0):FontManager.isFlagEmoji(E.substr(x,4))?Xe=E.substr(x,4):Xe=E.substr(x,2))):R>56319?(Ce=E.charCodeAt(x+1),FontManager.isVariationSelector(R)&&(Ue=!0)):FontManager.isZeroWidthJoiner(R)&&(Ue=!0,je=!0),Ue?(S[S.length-1]+=Xe,Ue=!1):S.push(Xe),x+=Xe.length;return S},TextProperty.prototype.completeTextData=function(E){E.__complete=!0;var S=this.elem.globalData.fontManager,x=this.data,C=[],R,Ce,Ue,je=0,Xe,Ye=x.m.g,et=0,ht=0,Dt=0,Ot=[],Mt=0,St=0,Ut,kt,Ft=S.getFontByName(E.f),Nt,Gt=0,Zt=getFontProperties(Ft);E.fWeight=Zt.weight,E.fStyle=Zt.style,E.finalSize=E.s,E.finalText=this.buildFinalText(E.t),Ce=E.finalText.length,E.finalLineHeight=E.lh;var ri=E.tr/1e3*E.finalSize,li;if(E.sz)for(var hi=!0,xi=E.sz[0],$i=E.sz[1],Mi,Di;hi;){Di=this.buildFinalText(E.t),Mi=0,Mt=0,Ce=Di.length,ri=E.tr/1e3*E.finalSize;var ki=-1;for(R=0;R<Ce;R+=1)li=Di[R].charCodeAt(0),Ue=!1,Di[R]===" "?ki=R:(li===13||li===3)&&(Mt=0,Ue=!0,Mi+=E.finalLineHeight||E.finalSize*1.2),S.chars?(Nt=S.getCharData(Di[R],Ft.fStyle,Ft.fFamily),Gt=Ue?0:Nt.w*E.finalSize/100):Gt=S.measureText(Di[R],E.f,E.finalSize),Mt+Gt>xi&&Di[R]!==" "?(ki===-1?Ce+=1:R=ki,Mi+=E.finalLineHeight||E.finalSize*1.2,Di.splice(R,ki===R?1:0,"\r"),ki=-1,Mt=0):(Mt+=Gt,Mt+=ri);Mi+=Ft.ascent*E.finalSize/100,this.canResize&&E.finalSize>this.minimumFontSize&&$i<Mi?(E.finalSize-=1,E.finalLineHeight=E.finalSize*E.lh/E.s):(E.finalText=Di,Ce=E.finalText.length,hi=!1)}Mt=-ri,Gt=0;var ji=0,Ri;for(R=0;R<Ce;R+=1)if(Ue=!1,Ri=E.finalText[R],li=Ri.charCodeAt(0),li===13||li===3?(ji=0,Ot.push(Mt),St=Mt>St?Mt:St,Mt=-2*ri,Xe="",Ue=!0,Dt+=1):Xe=Ri,S.chars?(Nt=S.getCharData(Ri,Ft.fStyle,S.getFontByName(E.f).fFamily),Gt=Ue?0:Nt.w*E.finalSize/100):Gt=S.measureText(Xe,E.f,E.finalSize),Ri===" "?ji+=Gt+ri:(Mt+=Gt+ri+ji,ji=0),C.push({l:Gt,an:Gt,add:et,n:Ue,anIndexes:[],val:Xe,line:Dt,animatorJustifyOffset:0}),Ye==2){if(et+=Gt,Xe===""||Xe===" "||R===Ce-1){for((Xe===""||Xe===" ")&&(et-=Gt);ht<=R;)C[ht].an=et,C[ht].ind=je,C[ht].extra=Gt,ht+=1;je+=1,et=0}}else if(Ye==3){if(et+=Gt,Xe===""||R===Ce-1){for(Xe===""&&(et-=Gt);ht<=R;)C[ht].an=et,C[ht].ind=je,C[ht].extra=Gt,ht+=1;et=0,je+=1}}else C[je].ind=je,C[je].extra=0,je+=1;if(E.l=C,St=Mt>St?Mt:St,Ot.push(Mt),E.sz)E.boxWidth=E.sz[0],E.justifyOffset=0;else switch(E.boxWidth=St,E.j){case 1:E.justifyOffset=-E.boxWidth;break;case 2:E.justifyOffset=-E.boxWidth/2;break;default:E.justifyOffset=0}E.lineWidths=Ot;var ui=x.a,vi,si;kt=ui.length;var ai,Ci,Ei=[];for(Ut=0;Ut<kt;Ut+=1){for(vi=ui[Ut],vi.a.sc&&(E.strokeColorAnim=!0),vi.a.sw&&(E.strokeWidthAnim=!0),(vi.a.fc||vi.a.fh||vi.a.fs||vi.a.fb)&&(E.fillColorAnim=!0),Ci=0,ai=vi.s.b,R=0;R<Ce;R+=1)si=C[R],si.anIndexes[Ut]=Ci,(ai==1&&si.val!==""||ai==2&&si.val!==""&&si.val!==" "||ai==3&&(si.n||si.val==" "||R==Ce-1)||ai==4&&(si.n||R==Ce-1))&&(vi.s.rn===1&&Ei.push(Ci),Ci+=1);x.a[Ut].s.totalChars=Ci;var zi=-1,or;if(vi.s.rn===1)for(R=0;R<Ce;R+=1)si=C[R],zi!=si.anIndexes[Ut]&&(zi=si.anIndexes[Ut],or=Ei.splice(Math.floor(Math.random()*Ei.length),1)[0]),si.anIndexes[Ut]=or}E.yOffset=E.finalLineHeight||E.finalSize*1.2,E.ls=E.ls||0,E.ascent=Ft.ascent*E.finalSize/100},TextProperty.prototype.updateDocumentData=function(E,S){S=S===void 0?this.keysIndex:S;var x=this.copyData({},this.data.d.k[S].s);x=this.copyData(x,E),this.data.d.k[S].s=x,this.recalculate(S),this.setCurrentData(x),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(E){var S=this.data.d.k[E].s;S.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(S)},TextProperty.prototype.canResizeFont=function(E){this.canResize=E,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(E){this.minimumFontSize=Math.floor(E)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var E=Math.max,S=Math.min,x=Math.floor;function C(Ce,Ue){this._currentTextLength=-1,this.k=!1,this.data=Ue,this.elem=Ce,this.comp=Ce.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(Ce),this.s=PropertyFactory.getProp(Ce,Ue.s||{k:0},0,0,this),"e"in Ue?this.e=PropertyFactory.getProp(Ce,Ue.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(Ce,Ue.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(Ce,Ue.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(Ce,Ue.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(Ce,Ue.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(Ce,Ue.a,0,.01,this),this.dynamicProperties.length||this.getValue()}C.prototype={getMult:function(Ue){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var je=0,Xe=0,Ye=1,et=1;this.ne.v>0?je=this.ne.v/100:Xe=-this.ne.v/100,this.xe.v>0?Ye=1-this.xe.v/100:et=1+this.xe.v/100;var ht=BezierFactory.getBezierEasing(je,Xe,Ye,et).get,Dt=0,Ot=this.finalS,Mt=this.finalE,St=this.data.sh;if(St===2)Mt===Ot?Dt=Ue>=Mt?1:0:Dt=E(0,S(.5/(Mt-Ot)+(Ue-Ot)/(Mt-Ot),1)),Dt=ht(Dt);else if(St===3)Mt===Ot?Dt=Ue>=Mt?0:1:Dt=1-E(0,S(.5/(Mt-Ot)+(Ue-Ot)/(Mt-Ot),1)),Dt=ht(Dt);else if(St===4)Mt===Ot?Dt=0:(Dt=E(0,S(.5/(Mt-Ot)+(Ue-Ot)/(Mt-Ot),1)),Dt<.5?Dt*=2:Dt=1-2*(Dt-.5)),Dt=ht(Dt);else if(St===5){if(Mt===Ot)Dt=0;else{var Ut=Mt-Ot;Ue=S(E(0,Ue+.5-Ot),Mt-Ot);var kt=-Ut/2+Ue,Ft=Ut/2;Dt=Math.sqrt(1-kt*kt/(Ft*Ft))}Dt=ht(Dt)}else St===6?(Mt===Ot?Dt=0:(Ue=S(E(0,Ue+.5-Ot),Mt-Ot),Dt=(1+Math.cos(Math.PI+Math.PI*2*Ue/(Mt-Ot)))/2),Dt=ht(Dt)):(Ue>=x(Ot)&&(Ue-Ot<0?Dt=E(0,S(S(Mt,1)-(Ot-Ue),1)):Dt=E(0,S(Mt-Ue,1))),Dt=ht(Dt));if(this.sm.v!==100){var Nt=this.sm.v*.01;Nt===0&&(Nt=1e-8);var Gt=.5-Nt*.5;Dt<Gt?Dt=0:(Dt=(Dt-Gt)/Nt,Dt>1&&(Dt=1))}return Dt*this.a.v},getValue:function(Ue){this.iterateDynamicProperties(),this._mdf=Ue||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,Ue&&this.data.r===2&&(this.e.v=this._currentTextLength);var je=this.data.r===2?1:100/this.data.totalChars,Xe=this.o.v/je,Ye=this.s.v/je+Xe,et=this.e.v/je+Xe;if(Ye>et){var ht=Ye;Ye=et,et=ht}this.finalS=Ye,this.finalE=et}},extendPrototype([DynamicPropertyContainer],C);function R(Ce,Ue,je){return new C(Ce,Ue)}return{getTextSelectorProp:R}}();function TextAnimatorDataProperty(E,S,x){var C={propType:!1},R=PropertyFactory.getProp,Ce=S.a;this.a={r:Ce.r?R(E,Ce.r,0,degToRads,x):C,rx:Ce.rx?R(E,Ce.rx,0,degToRads,x):C,ry:Ce.ry?R(E,Ce.ry,0,degToRads,x):C,sk:Ce.sk?R(E,Ce.sk,0,degToRads,x):C,sa:Ce.sa?R(E,Ce.sa,0,degToRads,x):C,s:Ce.s?R(E,Ce.s,1,.01,x):C,a:Ce.a?R(E,Ce.a,1,0,x):C,o:Ce.o?R(E,Ce.o,0,.01,x):C,p:Ce.p?R(E,Ce.p,1,0,x):C,sw:Ce.sw?R(E,Ce.sw,0,0,x):C,sc:Ce.sc?R(E,Ce.sc,1,0,x):C,fc:Ce.fc?R(E,Ce.fc,1,0,x):C,fh:Ce.fh?R(E,Ce.fh,0,0,x):C,fs:Ce.fs?R(E,Ce.fs,0,.01,x):C,fb:Ce.fb?R(E,Ce.fb,0,.01,x):C,t:Ce.t?R(E,Ce.t,0,0,x):C},this.s=TextSelectorProp.getTextSelectorProp(E,S.s,x),this.s.t=S.s.t}function TextAnimatorProperty(E,S,x){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=E,this._renderType=S,this._elem=x,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(x)}TextAnimatorProperty.prototype.searchProperties=function(){var E,S=this._textData.a.length,x,C=PropertyFactory.getProp;for(E=0;E<S;E+=1)x=this._textData.a[E],this._animatorsData[E]=new TextAnimatorDataProperty(this._elem,x,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:C(this._elem,this._textData.p.a,0,0,this),f:C(this._elem,this._textData.p.f,0,0,this),l:C(this._elem,this._textData.p.l,0,0,this),r:C(this._elem,this._textData.p.r,0,0,this),p:C(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=C(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(E,S){if(this.lettersChangedFlag=S,!(!this._mdf&&!this._isFirstFrame&&!S&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var x=this._moreOptions.alignment.v,C=this._animatorsData,R=this._textData,Ce=this.mHelper,Ue=this._renderType,je=this.renderedLetters.length,Xe,Ye,et,ht,Dt=E.l,Ot,Mt,St,Ut,kt,Ft,Nt,Gt,Zt,ri,li,hi,xi,$i,Mi;if(this._hasMaskedPath){if(Mi=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Di=Mi.v;this._pathData.r.v&&(Di=Di.reverse()),Ot={tLength:0,segments:[]},ht=Di._length-1;var ki;for(hi=0,et=0;et<ht;et+=1)ki=bez.buildBezierData(Di.v[et],Di.v[et+1],[Di.o[et][0]-Di.v[et][0],Di.o[et][1]-Di.v[et][1]],[Di.i[et+1][0]-Di.v[et+1][0],Di.i[et+1][1]-Di.v[et+1][1]]),Ot.tLength+=ki.segmentLength,Ot.segments.push(ki),hi+=ki.segmentLength;et=ht,Mi.v.c&&(ki=bez.buildBezierData(Di.v[et],Di.v[0],[Di.o[et][0]-Di.v[et][0],Di.o[et][1]-Di.v[et][1]],[Di.i[0][0]-Di.v[0][0],Di.i[0][1]-Di.v[0][1]]),Ot.tLength+=ki.segmentLength,Ot.segments.push(ki),hi+=ki.segmentLength),this._pathData.pi=Ot}if(Ot=this._pathData.pi,Mt=this._pathData.f.v,Nt=0,Ft=1,Ut=0,kt=!0,ri=Ot.segments,Mt<0&&Mi.v.c)for(Ot.tLength<Math.abs(Mt)&&(Mt=-Math.abs(Mt)%Ot.tLength),Nt=ri.length-1,Zt=ri[Nt].points,Ft=Zt.length-1;Mt<0;)Mt+=Zt[Ft].partialLength,Ft-=1,Ft<0&&(Nt-=1,Zt=ri[Nt].points,Ft=Zt.length-1);Zt=ri[Nt].points,Gt=Zt[Ft-1],St=Zt[Ft],li=St.partialLength}ht=Dt.length,Xe=0,Ye=0;var ji=E.finalSize*1.2*.714,Ri=!0,ui,vi,si,ai,Ci;ai=C.length;var Ei,zi=-1,or,hr,mr,cr=Mt,Li=Nt,Ji=Ft,Xi=-1,nr,yr,_r,gi,mi,Ai,Hi,Ni,Fi="",Zi=this.defaultPropsArray,Bi;if(E.j===2||E.j===1){var Ki=0,Gi=0,lr=E.j===2?-.5:-1,er=0,Qi=!0;for(et=0;et<ht;et+=1)if(Dt[et].n){for(Ki&&(Ki+=Gi);er<et;)Dt[er].animatorJustifyOffset=Ki,er+=1;Ki=0,Qi=!0}else{for(si=0;si<ai;si+=1)ui=C[si].a,ui.t.propType&&(Qi&&E.j===2&&(Gi+=ui.t.v*lr),vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),Ei.length?Ki+=ui.t.v*Ei[0]*lr:Ki+=ui.t.v*Ei*lr);Qi=!1}for(Ki&&(Ki+=Gi);er<et;)Dt[er].animatorJustifyOffset=Ki,er+=1}for(et=0;et<ht;et+=1){if(Ce.reset(),nr=1,Dt[et].n)Xe=0,Ye+=E.yOffset,Ye+=Ri?1:0,Mt=cr,Ri=!1,this._hasMaskedPath&&(Nt=Li,Ft=Ji,Zt=ri[Nt].points,Gt=Zt[Ft-1],St=Zt[Ft],li=St.partialLength,Ut=0),Fi="",Ni="",Ai="",Bi="",Zi=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Xi!==Dt[et].line){switch(E.j){case 1:Mt+=hi-E.lineWidths[Dt[et].line];break;case 2:Mt+=(hi-E.lineWidths[Dt[et].line])/2;break}Xi=Dt[et].line}zi!==Dt[et].ind&&(Dt[zi]&&(Mt+=Dt[zi].extra),Mt+=Dt[et].an/2,zi=Dt[et].ind),Mt+=x[0]*Dt[et].an*.005;var ur=0;for(si=0;si<ai;si+=1)ui=C[si].a,ui.p.propType&&(vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),Ei.length?ur+=ui.p.v[0]*Ei[0]:ur+=ui.p.v[0]*Ei),ui.a.propType&&(vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),Ei.length?ur+=ui.a.v[0]*Ei[0]:ur+=ui.a.v[0]*Ei);for(kt=!0,this._pathData.a.v&&(Mt=Dt[0].an*.5+(hi-this._pathData.f.v-Dt[0].an*.5-Dt[Dt.length-1].an*.5)*zi/(ht-1),Mt+=this._pathData.f.v);kt;)Ut+li>=Mt+ur||!Zt?(xi=(Mt+ur-Ut)/St.partialLength,hr=Gt.point[0]+(St.point[0]-Gt.point[0])*xi,mr=Gt.point[1]+(St.point[1]-Gt.point[1])*xi,Ce.translate(-x[0]*Dt[et].an*.005,-(x[1]*ji)*.01),kt=!1):Zt&&(Ut+=St.partialLength,Ft+=1,Ft>=Zt.length&&(Ft=0,Nt+=1,ri[Nt]?Zt=ri[Nt].points:Mi.v.c?(Ft=0,Nt=0,Zt=ri[Nt].points):(Ut-=St.partialLength,Zt=null)),Zt&&(Gt=St,St=Zt[Ft],li=St.partialLength));or=Dt[et].an/2-Dt[et].add,Ce.translate(-or,0,0)}else or=Dt[et].an/2-Dt[et].add,Ce.translate(-or,0,0),Ce.translate(-x[0]*Dt[et].an*.005,-x[1]*ji*.01,0);for(si=0;si<ai;si+=1)ui=C[si].a,ui.t.propType&&(vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),(Xe!==0||E.j!==0)&&(this._hasMaskedPath?Ei.length?Mt+=ui.t.v*Ei[0]:Mt+=ui.t.v*Ei:Ei.length?Xe+=ui.t.v*Ei[0]:Xe+=ui.t.v*Ei));for(E.strokeWidthAnim&&(_r=E.sw||0),E.strokeColorAnim&&(E.sc?yr=[E.sc[0],E.sc[1],E.sc[2]]:yr=[0,0,0]),E.fillColorAnim&&E.fc&&(gi=[E.fc[0],E.fc[1],E.fc[2]]),si=0;si<ai;si+=1)ui=C[si].a,ui.a.propType&&(vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),Ei.length?Ce.translate(-ui.a.v[0]*Ei[0],-ui.a.v[1]*Ei[1],ui.a.v[2]*Ei[2]):Ce.translate(-ui.a.v[0]*Ei,-ui.a.v[1]*Ei,ui.a.v[2]*Ei));for(si=0;si<ai;si+=1)ui=C[si].a,ui.s.propType&&(vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),Ei.length?Ce.scale(1+(ui.s.v[0]-1)*Ei[0],1+(ui.s.v[1]-1)*Ei[1],1):Ce.scale(1+(ui.s.v[0]-1)*Ei,1+(ui.s.v[1]-1)*Ei,1));for(si=0;si<ai;si+=1){if(ui=C[si].a,vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),ui.sk.propType&&(Ei.length?Ce.skewFromAxis(-ui.sk.v*Ei[0],ui.sa.v*Ei[1]):Ce.skewFromAxis(-ui.sk.v*Ei,ui.sa.v*Ei)),ui.r.propType&&(Ei.length?Ce.rotateZ(-ui.r.v*Ei[2]):Ce.rotateZ(-ui.r.v*Ei)),ui.ry.propType&&(Ei.length?Ce.rotateY(ui.ry.v*Ei[1]):Ce.rotateY(ui.ry.v*Ei)),ui.rx.propType&&(Ei.length?Ce.rotateX(ui.rx.v*Ei[0]):Ce.rotateX(ui.rx.v*Ei)),ui.o.propType&&(Ei.length?nr+=(ui.o.v*Ei[0]-nr)*Ei[0]:nr+=(ui.o.v*Ei-nr)*Ei),E.strokeWidthAnim&&ui.sw.propType&&(Ei.length?_r+=ui.sw.v*Ei[0]:_r+=ui.sw.v*Ei),E.strokeColorAnim&&ui.sc.propType)for(mi=0;mi<3;mi+=1)Ei.length?yr[mi]+=(ui.sc.v[mi]-yr[mi])*Ei[0]:yr[mi]+=(ui.sc.v[mi]-yr[mi])*Ei;if(E.fillColorAnim&&E.fc){if(ui.fc.propType)for(mi=0;mi<3;mi+=1)Ei.length?gi[mi]+=(ui.fc.v[mi]-gi[mi])*Ei[0]:gi[mi]+=(ui.fc.v[mi]-gi[mi])*Ei;ui.fh.propType&&(Ei.length?gi=addHueToRGB(gi,ui.fh.v*Ei[0]):gi=addHueToRGB(gi,ui.fh.v*Ei)),ui.fs.propType&&(Ei.length?gi=addSaturationToRGB(gi,ui.fs.v*Ei[0]):gi=addSaturationToRGB(gi,ui.fs.v*Ei)),ui.fb.propType&&(Ei.length?gi=addBrightnessToRGB(gi,ui.fb.v*Ei[0]):gi=addBrightnessToRGB(gi,ui.fb.v*Ei))}}for(si=0;si<ai;si+=1)ui=C[si].a,ui.p.propType&&(vi=C[si].s,Ei=vi.getMult(Dt[et].anIndexes[si],R.a[si].s.totalChars),this._hasMaskedPath?Ei.length?Ce.translate(0,ui.p.v[1]*Ei[0],-ui.p.v[2]*Ei[1]):Ce.translate(0,ui.p.v[1]*Ei,-ui.p.v[2]*Ei):Ei.length?Ce.translate(ui.p.v[0]*Ei[0],ui.p.v[1]*Ei[1],-ui.p.v[2]*Ei[2]):Ce.translate(ui.p.v[0]*Ei,ui.p.v[1]*Ei,-ui.p.v[2]*Ei));if(E.strokeWidthAnim&&(Ai=_r<0?0:_r),E.strokeColorAnim&&(Hi="rgb("+Math.round(yr[0]*255)+","+Math.round(yr[1]*255)+","+Math.round(yr[2]*255)+")"),E.fillColorAnim&&E.fc&&(Ni="rgb("+Math.round(gi[0]*255)+","+Math.round(gi[1]*255)+","+Math.round(gi[2]*255)+")"),this._hasMaskedPath){if(Ce.translate(0,-E.ls),Ce.translate(0,x[1]*ji*.01+Ye,0),this._pathData.p.v){$i=(St.point[1]-Gt.point[1])/(St.point[0]-Gt.point[0]);var br=Math.atan($i)*180/Math.PI;St.point[0]<Gt.point[0]&&(br+=180),Ce.rotate(-br*Math.PI/180)}Ce.translate(hr,mr,0),Mt-=x[0]*Dt[et].an*.005,Dt[et+1]&&zi!==Dt[et+1].ind&&(Mt+=Dt[et].an/2,Mt+=E.tr*.001*E.finalSize)}else{switch(Ce.translate(Xe,Ye,0),E.ps&&Ce.translate(E.ps[0],E.ps[1]+E.ascent,0),E.j){case 1:Ce.translate(Dt[et].animatorJustifyOffset+E.justifyOffset+(E.boxWidth-E.lineWidths[Dt[et].line]),0,0);break;case 2:Ce.translate(Dt[et].animatorJustifyOffset+E.justifyOffset+(E.boxWidth-E.lineWidths[Dt[et].line])/2,0,0);break}Ce.translate(0,-E.ls),Ce.translate(or,0,0),Ce.translate(x[0]*Dt[et].an*.005,x[1]*ji*.01,0),Xe+=Dt[et].l+E.tr*.001*E.finalSize}Ue==="html"?Fi=Ce.toCSS():Ue==="svg"?Fi=Ce.to2dCSS():Zi=[Ce.props[0],Ce.props[1],Ce.props[2],Ce.props[3],Ce.props[4],Ce.props[5],Ce.props[6],Ce.props[7],Ce.props[8],Ce.props[9],Ce.props[10],Ce.props[11],Ce.props[12],Ce.props[13],Ce.props[14],Ce.props[15]],Bi=nr}je<=et?(Ci=new LetterProps(Bi,Ai,Hi,Ni,Fi,Zi),this.renderedLetters.push(Ci),je+=1,this.lettersChangedFlag=!0):(Ci=this.renderedLetters[et],this.lettersChangedFlag=Ci.update(Bi,Ai,Hi,Ni,Fi,Zi)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(E,S,x){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(E,S,x),this.textProperty=new TextProperty(this,E.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(E.t,this.renderType,this),this.initTransform(E,S,x),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(E){this._mdf=!1,this.prepareRenderableFrame(E),this.prepareProperties(E,this.isInRange)},ITextElement.prototype.createPathShape=function(E,S){var x,C=S.length,R,Ce="";for(x=0;x<C;x+=1)S[x].ty==="sh"&&(R=S[x].ks.k,Ce+=buildShapeString(R,R.i.length,!0,E));return Ce},ITextElement.prototype.updateDocumentData=function(E,S){this.textProperty.updateDocumentData(E,S)},ITextElement.prototype.canResizeFont=function(E){this.textProperty.canResizeFont(E)},ITextElement.prototype.setMinimumFontSize=function(E){this.textProperty.setMinimumFontSize(E)},ITextElement.prototype.applyTextPropertiesToMatrix=function(E,S,x,C,R){switch(E.ps&&S.translate(E.ps[0],E.ps[1]+E.ascent,0),S.translate(0,-E.ls,0),E.j){case 1:S.translate(E.justifyOffset+(E.boxWidth-E.lineWidths[x]),0,0);break;case 2:S.translate(E.justifyOffset+(E.boxWidth-E.lineWidths[x])/2,0,0);break}S.translate(C,R,0)},ITextElement.prototype.buildColor=function(E){return"rgb("+Math.round(E[0]*255)+","+Math.round(E[1]*255)+","+Math.round(E[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(E,S,x){this.textSpans=[],this.renderType="svg",this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(E){for(var S=0,x=E.length,C=[],R="";S<x;)E[S]==="\r"||E[S]===""?(C.push(R),R=""):R+=E[S],S+=1;return C.push(R),C},SVGTextLottieElement.prototype.buildShapeData=function(E,S){if(E.shapes&&E.shapes.length){var x=E.shapes[0];if(x.it){var C=x.it[x.it.length-1];C.s&&(C.s.k[0]=S,C.s.k[1]=S)}}return E},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var E,S,x=this.textProperty.currentData;this.renderedLetters=createSizedArray(x?x.l.length:0),x.fc?this.layerElement.setAttribute("fill",this.buildColor(x.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),x.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(x.sc)),this.layerElement.setAttribute("stroke-width",x.sw)),this.layerElement.setAttribute("font-size",x.finalSize);var C=this.globalData.fontManager.getFontByName(x.f);if(C.fClass)this.layerElement.setAttribute("class",C.fClass);else{this.layerElement.setAttribute("font-family",C.fFamily);var R=x.fWeight,Ce=x.fStyle;this.layerElement.setAttribute("font-style",Ce),this.layerElement.setAttribute("font-weight",R)}this.layerElement.setAttribute("aria-label",x.t);var Ue=x.l||[],je=!!this.globalData.fontManager.chars;S=Ue.length;var Xe,Ye=this.mHelper,et="",ht=this.data.singleShape,Dt=0,Ot=0,Mt=!0,St=x.tr*.001*x.finalSize;if(ht&&!je&&!x.sz){var Ut=this.textContainer,kt="start";switch(x.j){case 1:kt="end";break;case 2:kt="middle";break;default:kt="start";break}Ut.setAttribute("text-anchor",kt),Ut.setAttribute("letter-spacing",St);var Ft=this.buildTextContents(x.finalText);for(S=Ft.length,Ot=x.ps?x.ps[1]+x.ascent:0,E=0;E<S;E+=1)Xe=this.textSpans[E].span||createNS("tspan"),Xe.textContent=Ft[E],Xe.setAttribute("x",0),Xe.setAttribute("y",Ot),Xe.style.display="inherit",Ut.appendChild(Xe),this.textSpans[E]||(this.textSpans[E]={span:null,glyph:null}),this.textSpans[E].span=Xe,Ot+=x.finalLineHeight;this.layerElement.appendChild(Ut)}else{var Nt=this.textSpans.length,Gt;for(E=0;E<S;E+=1){if(this.textSpans[E]||(this.textSpans[E]={span:null,childSpan:null,glyph:null}),!je||!ht||E===0){if(Xe=Nt>E?this.textSpans[E].span:createNS(je?"g":"text"),Nt<=E){if(Xe.setAttribute("stroke-linecap","butt"),Xe.setAttribute("stroke-linejoin","round"),Xe.setAttribute("stroke-miterlimit","4"),this.textSpans[E].span=Xe,je){var Zt=createNS("g");Xe.appendChild(Zt),this.textSpans[E].childSpan=Zt}this.textSpans[E].span=Xe,this.layerElement.appendChild(Xe)}Xe.style.display="inherit"}if(Ye.reset(),ht&&(Ue[E].n&&(Dt=-St,Ot+=x.yOffset,Ot+=Mt?1:0,Mt=!1),this.applyTextPropertiesToMatrix(x,Ye,Ue[E].line,Dt,Ot),Dt+=Ue[E].l||0,Dt+=St),je){Gt=this.globalData.fontManager.getCharData(x.finalText[E],C.fStyle,this.globalData.fontManager.getFontByName(x.f).fFamily);var ri;if(Gt.t===1)ri=new SVGCompElement(Gt.data,this.globalData,this);else{var li=emptyShapeData;Gt.data&&Gt.data.shapes&&(li=this.buildShapeData(Gt.data,x.finalSize)),ri=new SVGShapeElement(li,this.globalData,this)}if(this.textSpans[E].glyph){var hi=this.textSpans[E].glyph;this.textSpans[E].childSpan.removeChild(hi.layerElement),hi.destroy()}this.textSpans[E].glyph=ri,ri._debug=!0,ri.prepareFrame(0),ri.renderFrame(),this.textSpans[E].childSpan.appendChild(ri.layerElement),Gt.t===1&&this.textSpans[E].childSpan.setAttribute("transform","scale("+x.finalSize/100+","+x.finalSize/100+")")}else ht&&Xe.setAttribute("transform","translate("+Ye.props[12]+","+Ye.props[13]+")"),Xe.textContent=Ue[E].val,Xe.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}ht&&Xe&&Xe.setAttribute("d",et)}for(;E<this.textSpans.length;)this.textSpans[E].span.style.display="none",E+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var E=this.layerElement.getBBox();this.bbox={top:E.y,left:E.x,width:E.width,height:E.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var E,S=this.textSpans.length,x;for(this.renderedFrame=this.comp.renderedFrame,E=0;E<S;E+=1)x=this.textSpans[E].glyph,x&&(x.prepareFrame(this.comp.renderedFrame-this.data.st),x._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var E,S,x=this.textAnimator.renderedLetters,C=this.textProperty.currentData.l;S=C.length;var R,Ce,Ue;for(E=0;E<S;E+=1)C[E].n||(R=x[E],Ce=this.textSpans[E].span,Ue=this.textSpans[E].glyph,Ue&&Ue.renderFrame(),R._mdf.m&&Ce.setAttribute("transform",R.m),R._mdf.o&&Ce.setAttribute("opacity",R.o),R._mdf.sw&&Ce.setAttribute("stroke-width",R.sw),R._mdf.sc&&Ce.setAttribute("stroke",R.sc),R._mdf.fc&&Ce.setAttribute("fill",R.fc))}};function ISolidElement(E,S,x){this.initElement(E,S,x)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var E=createNS("rect");E.setAttribute("width",this.data.sw),E.setAttribute("height",this.data.sh),E.setAttribute("fill",this.data.sc),this.layerElement.appendChild(E)};function NullElement(E,S,x){this.initFrame(),this.initBaseData(E,S,x),this.initFrame(),this.initTransform(E,S,x),this.initHierarchy()}NullElement.prototype.prepareFrame=function(E){this.prepareProperties(E,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(E){return new NullElement(E,this.globalData,this)},SVGRendererBase.prototype.createShape=function(E){return new SVGShapeElement(E,this.globalData,this)},SVGRendererBase.prototype.createText=function(E){return new SVGTextLottieElement(E,this.globalData,this)},SVGRendererBase.prototype.createImage=function(E){return new IImageElement(E,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(E){return new ISolidElement(E,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(E){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+E.w+" "+E.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",E.w),this.svgElement.setAttribute("height",E.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var S=this.globalData.defs;this.setupGlobalData(E,S),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=E;var x=createNS("clipPath"),C=createNS("rect");C.setAttribute("width",E.w),C.setAttribute("height",E.h),C.setAttribute("x",0),C.setAttribute("y",0);var R=createElementID();x.setAttribute("id",R),x.appendChild(C),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+R+")"),S.appendChild(x),this.layers=E.layers,this.elements=createSizedArray(E.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var E,S=this.layers?this.layers.length:0;for(E=0;E<S;E+=1)this.elements[E]&&this.elements[E].destroy&&this.elements[E].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(E){var S=0,x=this.layers.length;for(S=0;S<x;S+=1)if(this.layers[S].ind===E)return S;return-1},SVGRendererBase.prototype.buildItem=function(E){var S=this.elements;if(!(S[E]||this.layers[E].ty===99)){S[E]=!0;var x=this.createItem(this.layers[E]);if(S[E]=x,getExpressionsPlugin()&&(this.layers[E].ty===0&&this.globalData.projectInterface.registerComposition(x),x.initExpressions()),this.appendElementInPos(x,E),this.layers[E].tt){var C="tp"in this.layers[E]?this.findIndexByInd(this.layers[E].tp):E-1;if(C===-1)return;if(!this.elements[C]||this.elements[C]===!0)this.buildItem(C),this.addPendingElement(x);else{var R=S[C],Ce=R.getMatte(this.layers[E].tt);x.setMatte(Ce)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var E=this.pendingElements.pop();if(E.checkParenting(),E.data.tt)for(var S=0,x=this.elements.length;S<x;){if(this.elements[S]===E){var C="tp"in E.data?this.findIndexByInd(E.data.tp):S-1,R=this.elements[C],Ce=R.getMatte(this.layers[S].tt);E.setMatte(Ce);break}S+=1}}},SVGRendererBase.prototype.renderFrame=function(E){if(!(this.renderedFrame===E||this.destroyed)){E===null?E=this.renderedFrame:this.renderedFrame=E,this.globalData.frameNum=E,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=E,this.globalData._mdf=!1;var S,x=this.layers.length;for(this.completeLayers||this.checkLayers(E),S=x-1;S>=0;S-=1)(this.completeLayers||this.elements[S])&&this.elements[S].prepareFrame(E-this.layers[S].st);if(this.globalData._mdf)for(S=0;S<x;S+=1)(this.completeLayers||this.elements[S])&&this.elements[S].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(E,S){var x=E.getBaseElement();if(x){for(var C=0,R;C<S;)this.elements[C]&&this.elements[C]!==!0&&this.elements[C].getBaseElement()&&(R=this.elements[C].getBaseElement()),C+=1;R?this.layerElement.insertBefore(x,R):this.layerElement.appendChild(x)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(E,S,x){this.initFrame(),this.initBaseData(E,S,x),this.initTransform(E,S,x),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!S.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(E){if(this._mdf=!1,this.prepareRenderableFrame(E),this.prepareProperties(E,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=E/this.data.sr;else{var S=this.tm.v;S===this.data.op&&(S=this.data.op-1),this.renderedFrame=S}var x,C=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),x=C-1;x>=0;x-=1)(this.completeLayers||this.elements[x])&&(this.elements[x].prepareFrame(this.renderedFrame-this.layers[x].st),this.elements[x]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var E,S=this.layers.length;for(E=0;E<S;E+=1)(this.completeLayers||this.elements[E])&&this.elements[E].renderFrame()},ICompElement.prototype.setElements=function(E){this.elements=E},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var E,S=this.layers.length;for(E=0;E<S;E+=1)this.elements[E]&&this.elements[E].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(E,S,x){this.layers=E.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(E,S,x),this.tm=E.tm?PropertyFactory.getProp(this,E.tm,0,S.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(E){return new SVGCompElement(E,this.globalData,this)};function SVGRenderer(E,S){this.animationItem=E,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var x="";if(S&&S.title){var C=createNS("title"),R=createElementID();C.setAttribute("id",R),C.textContent=S.title,this.svgElement.appendChild(C),x+=R}if(S&&S.description){var Ce=createNS("desc"),Ue=createElementID();Ce.setAttribute("id",Ue),Ce.textContent=S.description,this.svgElement.appendChild(Ce),x+=" "+Ue}x&&this.svgElement.setAttribute("aria-labelledby",x);var je=createNS("defs");this.svgElement.appendChild(je);var Xe=createNS("g");this.svgElement.appendChild(Xe),this.layerElement=Xe,this.renderConfig={preserveAspectRatio:S&&S.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:S&&S.contentVisibility||"visible",progressiveLoad:S&&S.progressiveLoad||!1,hideOnTransparent:!(S&&S.hideOnTransparent===!1),viewBoxOnly:S&&S.viewBoxOnly||!1,viewBoxSize:S&&S.viewBoxSize||!1,className:S&&S.className||"",id:S&&S.id||"",focusable:S&&S.focusable,filterSize:{width:S&&S.filterSize&&S.filterSize.width||"100%",height:S&&S.filterSize&&S.filterSize.height||"100%",x:S&&S.filterSize&&S.filterSize.x||"0%",y:S&&S.filterSize&&S.filterSize.y||"0%"},width:S&&S.width,height:S&&S.height,runExpressions:!S||S.runExpressions===void 0||S.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:je,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(E){return new SVGCompElement(E,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(S){var x,C=S.length,R="_";for(x=0;x<C;x+=1)R+=S[x].transform.key+"_";var Ce=this.sequences[R];return Ce||(Ce={transforms:[].concat(S),finalTransform:new Matrix,_mdf:!1},this.sequences[R]=Ce,this.sequenceList.push(Ce)),Ce},processSequence:function(S,x){for(var C=0,R=S.transforms.length,Ce=x;C<R&&!x;){if(S.transforms[C].transform.mProps._mdf){Ce=!0;break}C+=1}if(Ce)for(S.finalTransform.reset(),C=R-1;C>=0;C-=1)S.finalTransform.multiply(S.transforms[C].transform.mProps.v);S._mdf=Ce},processSequences:function(S){var x,C=this.sequenceList.length;for(x=0;x<C;x+=1)this.processSequence(this.sequenceList[x],S)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var S="__lottie_element_luma_buffer",x=null,C=null,R=null;function Ce(){var Xe=createNS("svg"),Ye=createNS("filter"),et=createNS("feColorMatrix");return Ye.setAttribute("id",S),et.setAttribute("type","matrix"),et.setAttribute("color-interpolation-filters","sRGB"),et.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),Ye.appendChild(et),Xe.appendChild(Ye),Xe.setAttribute("id",S+"_svg"),featureSupport.svgLumaHidden&&(Xe.style.display="none"),Xe}function Ue(){x||(R=Ce(),document.body.appendChild(R),x=createTag("canvas"),C=x.getContext("2d"),C.filter="url(#"+S+")",C.fillStyle="rgba(0,0,0,0)",C.fillRect(0,0,1,1))}function je(Xe){return x||Ue(),x.width=Xe.width,x.height=Xe.height,C.filter="url(#"+S+")",x}return{load:Ue,get:je}};function createCanvas(E,S){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(E,S);var x=createTag("canvas");return x.width=E,x.height=S,x}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(E){var S,x=E.data.ef?E.data.ef.length:0;this.filters=[];var C;for(S=0;S<x;S+=1){C=null;var R=E.data.ef[S].ty;if(registeredEffects[R]){var Ce=registeredEffects[R].effect;C=new Ce(E.effectsManager.effectElements[S],E)}C&&this.filters.push(C)}this.filters.length&&E.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(E){var S,x=this.filters.length;for(S=0;S<x;S+=1)this.filters[S].renderFrame(E)},CVEffects.prototype.getEffects=function(E){var S,x=this.filters.length,C=[];for(S=0;S<x;S+=1)this.filters[S].type===E&&C.push(this.filters[S]);return C};function registerEffect(E,S){registeredEffects[E]={effect:S}}function CVMaskElement(E,S){this.data=E,this.element=S,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var x,C=this.masksProperties.length,R=!1;for(x=0;x<C;x+=1)this.masksProperties[x].mode!=="n"&&(R=!0),this.viewData[x]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[x],3);this.hasMasks=R,R&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var E=this.element.finalTransform.mat,S=this.element.canvasContext,x,C=this.masksProperties.length,R,Ce,Ue;for(S.beginPath(),x=0;x<C;x+=1)if(this.masksProperties[x].mode!=="n"){this.masksProperties[x].inv&&(S.moveTo(0,0),S.lineTo(this.element.globalData.compSize.w,0),S.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),S.lineTo(0,this.element.globalData.compSize.h),S.lineTo(0,0)),Ue=this.viewData[x].v,R=E.applyToPointArray(Ue.v[0][0],Ue.v[0][1],0),S.moveTo(R[0],R[1]);var je,Xe=Ue._length;for(je=1;je<Xe;je+=1)Ce=E.applyToTriplePoints(Ue.o[je-1],Ue.i[je],Ue.v[je]),S.bezierCurveTo(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]);Ce=E.applyToTriplePoints(Ue.o[je-1],Ue.i[0],Ue.v[0]),S.bezierCurveTo(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5])}this.element.globalData.renderer.save(!0),S.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var S=this.globalData.canvasContext,x=assetLoader.createCanvas(S.canvas.width,S.canvas.height);this.buffers.push(x);var C=assetLoader.createCanvas(S.canvas.width,S.canvas.height);this.buffers.push(C),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var S=this.globalData;if(S.blendMode!==this.data.bm){S.blendMode=this.data.bm;var x=getBlendMode(this.data.bm);S.canvasContext.globalCompositeOperation=x}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(S){S.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var S=this.buffers[0],x=S.getContext("2d");this.clearCanvas(x),x.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var S=this.buffers[1],x=S.getContext("2d");this.clearCanvas(x),x.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var C=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(C.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var R=assetLoader.getLumaCanvas(this.canvasContext.canvas),Ce=R.getContext("2d");Ce.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(R,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(S,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(S){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!S)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var x=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(x),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(x),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(E,S,x,C){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var R=4;S.ty==="rc"?R=5:S.ty==="el"?R=6:S.ty==="sr"&&(R=7),this.sh=ShapePropertyFactory.getShapeProp(E,S,R,E);var Ce,Ue=x.length,je;for(Ce=0;Ce<Ue;Ce+=1)x[Ce].closed||(je={transforms:C.addTransformSequence(x[Ce].transforms),trNodes:[]},this.styledShapes.push(je),x[Ce].elements.push(je))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(E,S,x){this.shapes=[],this.shapesData=E.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(E,S){var x={data:E,type:E.ty,preTransforms:this.transformsManager.addTransformSequence(S),transforms:[],elements:[],closed:E.hd===!0},C={};if(E.ty==="fl"||E.ty==="st"?(C.c=PropertyFactory.getProp(this,E.c,1,255,this),C.c.k||(x.co="rgb("+bmFloor(C.c.v[0])+","+bmFloor(C.c.v[1])+","+bmFloor(C.c.v[2])+")")):(E.ty==="gf"||E.ty==="gs")&&(C.s=PropertyFactory.getProp(this,E.s,1,null,this),C.e=PropertyFactory.getProp(this,E.e,1,null,this),C.h=PropertyFactory.getProp(this,E.h||{k:0},0,.01,this),C.a=PropertyFactory.getProp(this,E.a||{k:0},0,degToRads,this),C.g=new GradientProperty(this,E.g,this)),C.o=PropertyFactory.getProp(this,E.o,0,.01,this),E.ty==="st"||E.ty==="gs"){if(x.lc=lineCapEnum[E.lc||2],x.lj=lineJoinEnum[E.lj||2],E.lj==1&&(x.ml=E.ml),C.w=PropertyFactory.getProp(this,E.w,0,null,this),C.w.k||(x.wi=C.w.v),E.d){var R=new DashProperty(this,E.d,"canvas",this);C.d=R,C.d.k||(x.da=C.d.dashArray,x.do=C.d.dashoffset[0])}}else x.r=E.r===2?"evenodd":"nonzero";return this.stylesList.push(x),C.style=x,C},CVShapeElement.prototype.createGroupElement=function(){var E={it:[],prevViewData:[]};return E},CVShapeElement.prototype.createTransformElement=function(E){var S={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,E.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,E,this)}};return S},CVShapeElement.prototype.createShapeElement=function(E){var S=new CVShapeData(this,E,this.stylesList,this.transformsManager);return this.shapes.push(S),this.addShapeToModifiers(S),S},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var E,S=this.itemsData.length;for(E=0;E<S;E+=1)this.prevViewData[E]=this.itemsData[E];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),S=this.dynamicProperties.length,E=0;E<S;E+=1)this.dynamicProperties[E].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(E){var S,x=this.stylesList.length;for(S=0;S<x;S+=1)this.stylesList[S].closed||this.stylesList[S].transforms.push(E)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var E,S=this.stylesList.length;for(E=0;E<S;E+=1)this.stylesList[E].closed||this.stylesList[E].transforms.pop()},CVShapeElement.prototype.closeStyles=function(E){var S,x=E.length;for(S=0;S<x;S+=1)E[S].closed=!0},CVShapeElement.prototype.searchShapes=function(E,S,x,C,R){var Ce,Ue=E.length-1,je,Xe,Ye=[],et=[],ht,Dt,Ot,Mt=[].concat(R);for(Ce=Ue;Ce>=0;Ce-=1){if(ht=this.searchProcessedElement(E[Ce]),ht?S[Ce]=x[ht-1]:E[Ce]._shouldRender=C,E[Ce].ty==="fl"||E[Ce].ty==="st"||E[Ce].ty==="gf"||E[Ce].ty==="gs")ht?S[Ce].style.closed=!1:S[Ce]=this.createStyleElement(E[Ce],Mt),Ye.push(S[Ce].style);else if(E[Ce].ty==="gr"){if(!ht)S[Ce]=this.createGroupElement(E[Ce]);else for(Xe=S[Ce].it.length,je=0;je<Xe;je+=1)S[Ce].prevViewData[je]=S[Ce].it[je];this.searchShapes(E[Ce].it,S[Ce].it,S[Ce].prevViewData,C,Mt)}else E[Ce].ty==="tr"?(ht||(Ot=this.createTransformElement(E[Ce]),S[Ce]=Ot),Mt.push(S[Ce]),this.addTransformToStyleList(S[Ce])):E[Ce].ty==="sh"||E[Ce].ty==="rc"||E[Ce].ty==="el"||E[Ce].ty==="sr"?ht||(S[Ce]=this.createShapeElement(E[Ce])):E[Ce].ty==="tm"||E[Ce].ty==="rd"||E[Ce].ty==="pb"||E[Ce].ty==="zz"||E[Ce].ty==="op"?(ht?(Dt=S[Ce],Dt.closed=!1):(Dt=ShapeModifiers.getModifier(E[Ce].ty),Dt.init(this,E[Ce]),S[Ce]=Dt,this.shapeModifiers.push(Dt)),et.push(Dt)):E[Ce].ty==="rp"&&(ht?(Dt=S[Ce],Dt.closed=!0):(Dt=ShapeModifiers.getModifier(E[Ce].ty),S[Ce]=Dt,Dt.init(this,E,Ce,S),this.shapeModifiers.push(Dt),C=!1),et.push(Dt));this.addProcessedElement(E[Ce],Ce+1)}for(this.removeTransformFromStyleList(),this.closeStyles(Ye),Ue=et.length,Ce=0;Ce<Ue;Ce+=1)et[Ce].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(E,S){(E._opMdf||S.op._mdf||this._isFirstFrame)&&(S.opacity=E.opacity,S.opacity*=S.op.v,S._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var E,S=this.stylesList.length,x,C,R,Ce,Ue,je,Xe=this.globalData.renderer,Ye=this.globalData.canvasContext,et,ht;for(E=0;E<S;E+=1)if(ht=this.stylesList[E],et=ht.type,!((et==="st"||et==="gs")&&ht.wi===0||!ht.data._shouldRender||ht.coOp===0||this.globalData.currentGlobalAlpha===0)){for(Xe.save(),Ue=ht.elements,et==="st"||et==="gs"?(Xe.ctxStrokeStyle(et==="st"?ht.co:ht.grd),Xe.ctxLineWidth(ht.wi),Xe.ctxLineCap(ht.lc),Xe.ctxLineJoin(ht.lj),Xe.ctxMiterLimit(ht.ml||0)):Xe.ctxFillStyle(et==="fl"?ht.co:ht.grd),Xe.ctxOpacity(ht.coOp),et!=="st"&&et!=="gs"&&Ye.beginPath(),Xe.ctxTransform(ht.preTransforms.finalTransform.props),C=Ue.length,x=0;x<C;x+=1){for((et==="st"||et==="gs")&&(Ye.beginPath(),ht.da&&(Ye.setLineDash(ht.da),Ye.lineDashOffset=ht.do)),je=Ue[x].trNodes,Ce=je.length,R=0;R<Ce;R+=1)je[R].t==="m"?Ye.moveTo(je[R].p[0],je[R].p[1]):je[R].t==="c"?Ye.bezierCurveTo(je[R].pts[0],je[R].pts[1],je[R].pts[2],je[R].pts[3],je[R].pts[4],je[R].pts[5]):Ye.closePath();(et==="st"||et==="gs")&&(Xe.ctxStroke(),ht.da&&Ye.setLineDash(this.dashResetter))}et!=="st"&&et!=="gs"&&this.globalData.renderer.ctxFill(ht.r),Xe.restore()}},CVShapeElement.prototype.renderShape=function(E,S,x,C){var R,Ce=S.length-1,Ue;for(Ue=E,R=Ce;R>=0;R-=1)S[R].ty==="tr"?(Ue=x[R].transform,this.renderShapeTransform(E,Ue)):S[R].ty==="sh"||S[R].ty==="el"||S[R].ty==="rc"||S[R].ty==="sr"?this.renderPath(S[R],x[R]):S[R].ty==="fl"?this.renderFill(S[R],x[R],Ue):S[R].ty==="st"?this.renderStroke(S[R],x[R],Ue):S[R].ty==="gf"||S[R].ty==="gs"?this.renderGradientFill(S[R],x[R],Ue):S[R].ty==="gr"?this.renderShape(Ue,S[R].it,x[R].it):S[R].ty;C&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(E,S){if(this._isFirstFrame||S._mdf||E.transforms._mdf){var x=E.trNodes,C=S.paths,R,Ce,Ue,je=C._length;x.length=0;var Xe=E.transforms.finalTransform;for(Ue=0;Ue<je;Ue+=1){var Ye=C.shapes[Ue];if(Ye&&Ye.v){for(Ce=Ye._length,R=1;R<Ce;R+=1)R===1&&x.push({t:"m",p:Xe.applyToPointArray(Ye.v[0][0],Ye.v[0][1],0)}),x.push({t:"c",pts:Xe.applyToTriplePoints(Ye.o[R-1],Ye.i[R],Ye.v[R])});Ce===1&&x.push({t:"m",p:Xe.applyToPointArray(Ye.v[0][0],Ye.v[0][1],0)}),Ye.c&&Ce&&(x.push({t:"c",pts:Xe.applyToTriplePoints(Ye.o[R-1],Ye.i[0],Ye.v[0])}),x.push({t:"z"}))}}E.trNodes=x}},CVShapeElement.prototype.renderPath=function(E,S){if(E.hd!==!0&&E._shouldRender){var x,C=S.styledShapes.length;for(x=0;x<C;x+=1)this.renderStyledShape(S.styledShapes[x],S.sh)}},CVShapeElement.prototype.renderFill=function(E,S,x){var C=S.style;(S.c._mdf||this._isFirstFrame)&&(C.co="rgb("+bmFloor(S.c.v[0])+","+bmFloor(S.c.v[1])+","+bmFloor(S.c.v[2])+")"),(S.o._mdf||x._opMdf||this._isFirstFrame)&&(C.coOp=S.o.v*x.opacity)},CVShapeElement.prototype.renderGradientFill=function(E,S,x){var C=S.style,R;if(!C.grd||S.g._mdf||S.s._mdf||S.e._mdf||E.t!==1&&(S.h._mdf||S.a._mdf)){var Ce=this.globalData.canvasContext,Ue=S.s.v,je=S.e.v;if(E.t===1)R=Ce.createLinearGradient(Ue[0],Ue[1],je[0],je[1]);else{var Xe=Math.sqrt(Math.pow(Ue[0]-je[0],2)+Math.pow(Ue[1]-je[1],2)),Ye=Math.atan2(je[1]-Ue[1],je[0]-Ue[0]),et=S.h.v;et>=1?et=.99:et<=-1&&(et=-.99);var ht=Xe*et,Dt=Math.cos(Ye+S.a.v)*ht+Ue[0],Ot=Math.sin(Ye+S.a.v)*ht+Ue[1];R=Ce.createRadialGradient(Dt,Ot,0,Ue[0],Ue[1],Xe)}var Mt,St=E.g.p,Ut=S.g.c,kt=1;for(Mt=0;Mt<St;Mt+=1)S.g._hasOpacity&&S.g._collapsable&&(kt=S.g.o[Mt*2+1]),R.addColorStop(Ut[Mt*4]/100,"rgba("+Ut[Mt*4+1]+","+Ut[Mt*4+2]+","+Ut[Mt*4+3]+","+kt+")");C.grd=R}C.coOp=S.o.v*x.opacity},CVShapeElement.prototype.renderStroke=function(E,S,x){var C=S.style,R=S.d;R&&(R._mdf||this._isFirstFrame)&&(C.da=R.dashArray,C.do=R.dashoffset[0]),(S.c._mdf||this._isFirstFrame)&&(C.co="rgb("+bmFloor(S.c.v[0])+","+bmFloor(S.c.v[1])+","+bmFloor(S.c.v[2])+")"),(S.o._mdf||x._opMdf||this._isFirstFrame)&&(C.coOp=S.o.v*x.opacity),(S.w._mdf||this._isFirstFrame)&&(C.wi=S.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(E,S,x){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var E=this.textProperty.currentData;this.renderedLetters=createSizedArray(E.l?E.l.length:0);var S=!1;E.fc?(S=!0,this.values.fill=this.buildColor(E.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=S;var x=!1;E.sc&&(x=!0,this.values.stroke=this.buildColor(E.sc),this.values.sWidth=E.sw);var C=this.globalData.fontManager.getFontByName(E.f),R,Ce,Ue=E.l,je=this.mHelper;this.stroke=x,this.values.fValue=E.finalSize+"px "+this.globalData.fontManager.getFontByName(E.f).fFamily,Ce=E.finalText.length;var Xe,Ye,et,ht,Dt,Ot,Mt,St,Ut,kt,Ft=this.data.singleShape,Nt=E.tr*.001*E.finalSize,Gt=0,Zt=0,ri=!0,li=0;for(R=0;R<Ce;R+=1){Xe=this.globalData.fontManager.getCharData(E.finalText[R],C.fStyle,this.globalData.fontManager.getFontByName(E.f).fFamily),Ye=Xe&&Xe.data||{},je.reset(),Ft&&Ue[R].n&&(Gt=-Nt,Zt+=E.yOffset,Zt+=ri?1:0,ri=!1),Dt=Ye.shapes?Ye.shapes[0].it:[],Mt=Dt.length,je.scale(E.finalSize/100,E.finalSize/100),Ft&&this.applyTextPropertiesToMatrix(E,je,Ue[R].line,Gt,Zt),Ut=createSizedArray(Mt-1);var hi=0;for(Ot=0;Ot<Mt;Ot+=1)if(Dt[Ot].ty==="sh"){for(ht=Dt[Ot].ks.k.i.length,St=Dt[Ot].ks.k,kt=[],et=1;et<ht;et+=1)et===1&&kt.push(je.applyToX(St.v[0][0],St.v[0][1],0),je.applyToY(St.v[0][0],St.v[0][1],0)),kt.push(je.applyToX(St.o[et-1][0],St.o[et-1][1],0),je.applyToY(St.o[et-1][0],St.o[et-1][1],0),je.applyToX(St.i[et][0],St.i[et][1],0),je.applyToY(St.i[et][0],St.i[et][1],0),je.applyToX(St.v[et][0],St.v[et][1],0),je.applyToY(St.v[et][0],St.v[et][1],0));kt.push(je.applyToX(St.o[et-1][0],St.o[et-1][1],0),je.applyToY(St.o[et-1][0],St.o[et-1][1],0),je.applyToX(St.i[0][0],St.i[0][1],0),je.applyToY(St.i[0][0],St.i[0][1],0),je.applyToX(St.v[0][0],St.v[0][1],0),je.applyToY(St.v[0][0],St.v[0][1],0)),Ut[hi]=kt,hi+=1}Ft&&(Gt+=Ue[R].l,Gt+=Nt),this.textSpans[li]?this.textSpans[li].elem=Ut:this.textSpans[li]={elem:Ut},li+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var E=this.canvasContext;E.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var S,x,C,R,Ce,Ue,je=this.textAnimator.renderedLetters,Xe=this.textProperty.currentData.l;x=Xe.length;var Ye,et=null,ht=null,Dt=null,Ot,Mt,St=this.globalData.renderer;for(S=0;S<x;S+=1)if(!Xe[S].n){if(Ye=je[S],Ye&&(St.save(),St.ctxTransform(Ye.p),St.ctxOpacity(Ye.o)),this.fill){for(Ye&&Ye.fc?et!==Ye.fc&&(St.ctxFillStyle(Ye.fc),et=Ye.fc):et!==this.values.fill&&(et=this.values.fill,St.ctxFillStyle(this.values.fill)),Ot=this.textSpans[S].elem,R=Ot.length,this.globalData.canvasContext.beginPath(),C=0;C<R;C+=1)for(Mt=Ot[C],Ue=Mt.length,this.globalData.canvasContext.moveTo(Mt[0],Mt[1]),Ce=2;Ce<Ue;Ce+=6)this.globalData.canvasContext.bezierCurveTo(Mt[Ce],Mt[Ce+1],Mt[Ce+2],Mt[Ce+3],Mt[Ce+4],Mt[Ce+5]);this.globalData.canvasContext.closePath(),St.ctxFill()}if(this.stroke){for(Ye&&Ye.sw?Dt!==Ye.sw&&(Dt=Ye.sw,St.ctxLineWidth(Ye.sw)):Dt!==this.values.sWidth&&(Dt=this.values.sWidth,St.ctxLineWidth(this.values.sWidth)),Ye&&Ye.sc?ht!==Ye.sc&&(ht=Ye.sc,St.ctxStrokeStyle(Ye.sc)):ht!==this.values.stroke&&(ht=this.values.stroke,St.ctxStrokeStyle(this.values.stroke)),Ot=this.textSpans[S].elem,R=Ot.length,this.globalData.canvasContext.beginPath(),C=0;C<R;C+=1)for(Mt=Ot[C],Ue=Mt.length,this.globalData.canvasContext.moveTo(Mt[0],Mt[1]),Ce=2;Ce<Ue;Ce+=6)this.globalData.canvasContext.bezierCurveTo(Mt[Ce],Mt[Ce+1],Mt[Ce+2],Mt[Ce+3],Mt[Ce+4],Mt[Ce+5]);this.globalData.canvasContext.closePath(),St.ctxStroke()}Ye&&this.globalData.renderer.restore()}};function CVImageElement(E,S,x){this.assetData=S.getAssetData(E.refId),this.img=S.imageLoader.getAsset(this.assetData),this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var E=createTag("canvas");E.width=this.assetData.w,E.height=this.assetData.h;var S=E.getContext("2d"),x=this.img.width,C=this.img.height,R=x/C,Ce=this.assetData.w/this.assetData.h,Ue,je,Xe=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;R>Ce&&Xe==="xMidYMid slice"||R<Ce&&Xe!=="xMidYMid slice"?(je=C,Ue=je*Ce):(Ue=x,je=Ue/Ce),S.drawImage(this.img,(x-Ue)/2,(C-je)/2,Ue,je,0,0,this.assetData.w,this.assetData.h),this.img=E}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(E,S,x){this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(E){return new CVShapeElement(E,this.globalData,this)},CanvasRendererBase.prototype.createText=function(E){return new CVTextElement(E,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(E){return new CVImageElement(E,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(E){return new CVSolidElement(E,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(E){E[0]===1&&E[1]===0&&E[4]===0&&E[5]===1&&E[12]===0&&E[13]===0||this.canvasContext.transform(E[0],E[1],E[4],E[5],E[12],E[13])},CanvasRendererBase.prototype.ctxOpacity=function(E){this.canvasContext.globalAlpha*=E<0?0:E},CanvasRendererBase.prototype.ctxFillStyle=function(E){this.canvasContext.fillStyle=E},CanvasRendererBase.prototype.ctxStrokeStyle=function(E){this.canvasContext.strokeStyle=E},CanvasRendererBase.prototype.ctxLineWidth=function(E){this.canvasContext.lineWidth=E},CanvasRendererBase.prototype.ctxLineCap=function(E){this.canvasContext.lineCap=E},CanvasRendererBase.prototype.ctxLineJoin=function(E){this.canvasContext.lineJoin=E},CanvasRendererBase.prototype.ctxMiterLimit=function(E){this.canvasContext.miterLimit=E},CanvasRendererBase.prototype.ctxFill=function(E){this.canvasContext.fill(E)},CanvasRendererBase.prototype.ctxFillRect=function(E,S,x,C){this.canvasContext.fillRect(E,S,x,C)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(E){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}E&&(this.globalData.blendMode="source-over"),this.contextData.restore(E)},CanvasRendererBase.prototype.configAnimation=function(E){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var S=this.animationItem.container.style;S.width="100%",S.height="100%";var x="0px 0px 0px";S.transformOrigin=x,S.mozTransformOrigin=x,S.webkitTransformOrigin=x,S["-webkit-transform"]=x,S.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=E,this.layers=E.layers,this.transformCanvas={w:E.w,h:E.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(E,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(E.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(E,S){this.reset();var x,C;E?(x=E,C=S,this.canvasContext.canvas.width=x,this.canvasContext.canvas.height=C):(this.animationItem.wrapper&&this.animationItem.container?(x=this.animationItem.wrapper.offsetWidth,C=this.animationItem.wrapper.offsetHeight):(x=this.canvasContext.canvas.width,C=this.canvasContext.canvas.height),this.canvasContext.canvas.width=x*this.renderConfig.dpr,this.canvasContext.canvas.height=C*this.renderConfig.dpr);var R,Ce;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var Ue=this.renderConfig.preserveAspectRatio.split(" "),je=Ue[1]||"meet",Xe=Ue[0]||"xMidYMid",Ye=Xe.substr(0,4),et=Xe.substr(4);R=x/C,Ce=this.transformCanvas.w/this.transformCanvas.h,Ce>R&&je==="meet"||Ce<R&&je==="slice"?(this.transformCanvas.sx=x/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=x/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=C/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=C/(this.transformCanvas.h/this.renderConfig.dpr)),Ye==="xMid"&&(Ce<R&&je==="meet"||Ce>R&&je==="slice")?this.transformCanvas.tx=(x-this.transformCanvas.w*(C/this.transformCanvas.h))/2*this.renderConfig.dpr:Ye==="xMax"&&(Ce<R&&je==="meet"||Ce>R&&je==="slice")?this.transformCanvas.tx=(x-this.transformCanvas.w*(C/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,et==="YMid"&&(Ce>R&&je==="meet"||Ce<R&&je==="slice")?this.transformCanvas.ty=(C-this.transformCanvas.h*(x/this.transformCanvas.w))/2*this.renderConfig.dpr:et==="YMax"&&(Ce>R&&je==="meet"||Ce<R&&je==="slice")?this.transformCanvas.ty=(C-this.transformCanvas.h*(x/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=x/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=C/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var E,S=this.layers?this.layers.length:0;for(E=S-1;E>=0;E-=1)this.elements[E]&&this.elements[E].destroy&&this.elements[E].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(E,S){if(!(this.renderedFrame===E&&this.renderConfig.clearCanvas===!0&&!S||this.destroyed||E===-1)){this.renderedFrame=E,this.globalData.frameNum=E-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||S,this.globalData.projectInterface.currentFrame=E;var x,C=this.layers.length;for(this.completeLayers||this.checkLayers(E),x=C-1;x>=0;x-=1)(this.completeLayers||this.elements[x])&&this.elements[x].prepareFrame(E-this.layers[x].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),x=C-1;x>=0;x-=1)(this.completeLayers||this.elements[x])&&this.elements[x].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(E){var S=this.elements;if(!(S[E]||this.layers[E].ty===99)){var x=this.createItem(this.layers[E],this,this.globalData);S[E]=x,x.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var E=this.pendingElements.pop();E.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var E,S=15;for(E=0;E<S;E+=1){var x=new CanvasContext;this.stack[E]=x}this._length=S,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var E=this._length*2,S=0;for(S=this._length;S<E;S+=1)this.stack[S]=new CanvasContext;this._length=E},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(E){this.cArrPos-=1;var S=this.stack[this.cArrPos],x=S.transform,C,R=this.cTr.props;for(C=0;C<16;C+=1)R[C]=x[C];if(E){this.nativeContext.restore();var Ce=this.stack[this.cArrPos+1];this.appliedFillStyle=Ce.fillStyle,this.appliedStrokeStyle=Ce.strokeStyle,this.appliedLineWidth=Ce.lineWidth,this.appliedLineCap=Ce.lineCap,this.appliedLineJoin=Ce.lineJoin,this.appliedMiterLimit=Ce.miterLimit}this.nativeContext.setTransform(x[0],x[1],x[4],x[5],x[12],x[13]),(E||S.opacity!==-1&&this.currentOpacity!==S.opacity)&&(this.nativeContext.globalAlpha=S.opacity,this.currentOpacity=S.opacity),this.currentFillStyle=S.fillStyle,this.currentStrokeStyle=S.strokeStyle,this.currentLineWidth=S.lineWidth,this.currentLineCap=S.lineCap,this.currentLineJoin=S.lineJoin,this.currentMiterLimit=S.miterLimit},CVContextData.prototype.save=function(E){E&&this.nativeContext.save();var S=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var x=this.stack[this.cArrPos],C;for(C=0;C<16;C+=1)x.transform[C]=S[C];this.cArrPos+=1;var R=this.stack[this.cArrPos];R.opacity=x.opacity,R.fillStyle=x.fillStyle,R.strokeStyle=x.strokeStyle,R.lineWidth=x.lineWidth,R.lineCap=x.lineCap,R.lineJoin=x.lineJoin,R.miterLimit=x.miterLimit},CVContextData.prototype.setOpacity=function(E){this.stack[this.cArrPos].opacity=E},CVContextData.prototype.setContext=function(E){this.nativeContext=E},CVContextData.prototype.fillStyle=function(E){this.stack[this.cArrPos].fillStyle!==E&&(this.currentFillStyle=E,this.stack[this.cArrPos].fillStyle=E)},CVContextData.prototype.strokeStyle=function(E){this.stack[this.cArrPos].strokeStyle!==E&&(this.currentStrokeStyle=E,this.stack[this.cArrPos].strokeStyle=E)},CVContextData.prototype.lineWidth=function(E){this.stack[this.cArrPos].lineWidth!==E&&(this.currentLineWidth=E,this.stack[this.cArrPos].lineWidth=E)},CVContextData.prototype.lineCap=function(E){this.stack[this.cArrPos].lineCap!==E&&(this.currentLineCap=E,this.stack[this.cArrPos].lineCap=E)},CVContextData.prototype.lineJoin=function(E){this.stack[this.cArrPos].lineJoin!==E&&(this.currentLineJoin=E,this.stack[this.cArrPos].lineJoin=E)},CVContextData.prototype.miterLimit=function(E){this.stack[this.cArrPos].miterLimit!==E&&(this.currentMiterLimit=E,this.stack[this.cArrPos].miterLimit=E)},CVContextData.prototype.transform=function(E){this.transformMat.cloneFromProps(E);var S=this.cTr;this.transformMat.multiply(S),S.cloneFromProps(this.transformMat.props);var x=S.props;this.nativeContext.setTransform(x[0],x[1],x[4],x[5],x[12],x[13])},CVContextData.prototype.opacity=function(E){var S=this.stack[this.cArrPos].opacity;S*=E<0?0:E,this.stack[this.cArrPos].opacity!==S&&(this.currentOpacity!==E&&(this.nativeContext.globalAlpha=E,this.currentOpacity=E),this.stack[this.cArrPos].opacity=S)},CVContextData.prototype.fill=function(E){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(E)},CVContextData.prototype.fillRect=function(E,S,x,C){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(E,S,x,C)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(E,S,x){this.completeLayers=!1,this.layers=E.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(E,S,x),this.tm=E.tm?PropertyFactory.getProp(this,E.tm,0,S.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var E=this.canvasContext;E.beginPath(),E.moveTo(0,0),E.lineTo(this.data.w,0),E.lineTo(this.data.w,this.data.h),E.lineTo(0,this.data.h),E.lineTo(0,0),E.clip();var S,x=this.layers.length;for(S=x-1;S>=0;S-=1)(this.completeLayers||this.elements[S])&&this.elements[S].renderFrame()},CVCompElement.prototype.destroy=function(){var E,S=this.layers.length;for(E=S-1;E>=0;E-=1)this.elements[E]&&this.elements[E].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(E){return new CVCompElement(E,this.globalData,this)};function CanvasRenderer(E,S){this.animationItem=E,this.renderConfig={clearCanvas:S&&S.clearCanvas!==void 0?S.clearCanvas:!0,context:S&&S.context||null,progressiveLoad:S&&S.progressiveLoad||!1,preserveAspectRatio:S&&S.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:S&&S.contentVisibility||"visible",className:S&&S.className||"",id:S&&S.id||"",runExpressions:!S||S.runExpressions===void 0||S.runExpressions},this.renderConfig.dpr=S&&S.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=S&&S.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(E){return new CVCompElement(E,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var S=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var x=this.finalTransform.mat.toCSS();S.transform=x,S.webkitTransform=x}this.finalTransform._opMdf&&(S.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(E,S,x){this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var E;this.data.hasMask?(E=createNS("rect"),E.setAttribute("width",this.data.sw),E.setAttribute("height",this.data.sh),E.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(E=createTag("div"),E.style.width=this.data.sw+"px",E.style.height=this.data.sh+"px",E.style.backgroundColor=this.data.sc),this.layerElement.appendChild(E)};function HShapeElement(E,S,x){this.shapes=[],this.shapesData=E.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(E,S,x),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var E;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),E=this.svgElement;else{E=createNS("svg");var S=this.comp.data?this.comp.data:this.globalData.compSize;E.setAttribute("width",S.w),E.setAttribute("height",S.h),E.appendChild(this.shapesContainer),this.layerElement.appendChild(E)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=E},HShapeElement.prototype.getTransformedPoint=function(E,S){var x,C=E.length;for(x=0;x<C;x+=1)S=E[x].mProps.v.applyToPointArray(S[0],S[1],0);return S},HShapeElement.prototype.calculateShapeBoundingBox=function(E,S){var x=E.sh.v,C=E.transformers,R,Ce=x._length,Ue,je,Xe,Ye;if(!(Ce<=1)){for(R=0;R<Ce-1;R+=1)Ue=this.getTransformedPoint(C,x.v[R]),je=this.getTransformedPoint(C,x.o[R]),Xe=this.getTransformedPoint(C,x.i[R+1]),Ye=this.getTransformedPoint(C,x.v[R+1]),this.checkBounds(Ue,je,Xe,Ye,S);x.c&&(Ue=this.getTransformedPoint(C,x.v[R]),je=this.getTransformedPoint(C,x.o[R]),Xe=this.getTransformedPoint(C,x.i[0]),Ye=this.getTransformedPoint(C,x.v[0]),this.checkBounds(Ue,je,Xe,Ye,S))}},HShapeElement.prototype.checkBounds=function(E,S,x,C,R){this.getBoundsOfCurve(E,S,x,C);var Ce=this.shapeBoundingBox;R.x=bmMin(Ce.left,R.x),R.xMax=bmMax(Ce.right,R.xMax),R.y=bmMin(Ce.top,R.y),R.yMax=bmMax(Ce.bottom,R.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(E,S,x,C){for(var R=[[E[0],C[0]],[E[1],C[1]]],Ce,Ue,je,Xe,Ye,et,ht,Dt=0;Dt<2;++Dt)Ue=6*E[Dt]-12*S[Dt]+6*x[Dt],Ce=-3*E[Dt]+9*S[Dt]-9*x[Dt]+3*C[Dt],je=3*S[Dt]-3*E[Dt],Ue|=0,Ce|=0,je|=0,Ce===0&&Ue===0||(Ce===0?(Xe=-je/Ue,Xe>0&&Xe<1&&R[Dt].push(this.calculateF(Xe,E,S,x,C,Dt))):(Ye=Ue*Ue-4*je*Ce,Ye>=0&&(et=(-Ue+bmSqrt(Ye))/(2*Ce),et>0&&et<1&&R[Dt].push(this.calculateF(et,E,S,x,C,Dt)),ht=(-Ue-bmSqrt(Ye))/(2*Ce),ht>0&&ht<1&&R[Dt].push(this.calculateF(ht,E,S,x,C,Dt)))));this.shapeBoundingBox.left=bmMin.apply(null,R[0]),this.shapeBoundingBox.top=bmMin.apply(null,R[1]),this.shapeBoundingBox.right=bmMax.apply(null,R[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,R[1])},HShapeElement.prototype.calculateF=function(E,S,x,C,R,Ce){return bmPow(1-E,3)*S[Ce]+3*bmPow(1-E,2)*E*x[Ce]+3*(1-E)*bmPow(E,2)*C[Ce]+bmPow(E,3)*R[Ce]},HShapeElement.prototype.calculateBoundingBox=function(E,S){var x,C=E.length;for(x=0;x<C;x+=1)E[x]&&E[x].sh?this.calculateShapeBoundingBox(E[x],S):E[x]&&E[x].it?this.calculateBoundingBox(E[x].it,S):E[x]&&E[x].style&&E[x].w&&this.expandStrokeBoundingBox(E[x].w,S)},HShapeElement.prototype.expandStrokeBoundingBox=function(E,S){var x=0;if(E.keyframes){for(var C=0;C<E.keyframes.length;C+=1){var R=E.keyframes[C].s;R>x&&(x=R)}x*=E.mult}else x=E.v*E.mult;S.x-=x,S.xMax+=x,S.y-=x,S.yMax+=x},HShapeElement.prototype.currentBoxContains=function(E){return this.currentBBox.x<=E.x&&this.currentBBox.y<=E.y&&this.currentBBox.width+this.currentBBox.x>=E.x+E.width&&this.currentBBox.height+this.currentBBox.y>=E.y+E.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var E=this.tempBoundingBox,S=999999;if(E.x=S,E.xMax=-S,E.y=S,E.yMax=-S,this.calculateBoundingBox(this.itemsData,E),E.width=E.xMax<E.x?0:E.xMax-E.x,E.height=E.yMax<E.y?0:E.yMax-E.y,this.currentBoxContains(E))return;var x=!1;if(this.currentBBox.w!==E.width&&(this.currentBBox.w=E.width,this.shapeCont.setAttribute("width",E.width),x=!0),this.currentBBox.h!==E.height&&(this.currentBBox.h=E.height,this.shapeCont.setAttribute("height",E.height),x=!0),x||this.currentBBox.x!==E.x||this.currentBBox.y!==E.y){this.currentBBox.w=E.width,this.currentBBox.h=E.height,this.currentBBox.x=E.x,this.currentBBox.y=E.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var C=this.shapeCont.style,R="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";C.transform=R,C.webkitTransform=R}}};function HTextElement(E,S,x){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var E=createNS("g");this.maskedElement.appendChild(E),this.innerElem=E}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var E=this.textProperty.currentData;this.renderedLetters=createSizedArray(E.l?E.l.length:0);var S=this.innerElem.style,x=E.fc?this.buildColor(E.fc):"rgba(0,0,0,0)";S.fill=x,S.color=x,E.sc&&(S.stroke=this.buildColor(E.sc),S.strokeWidth=E.sw+"px");var C=this.globalData.fontManager.getFontByName(E.f);if(!this.globalData.fontManager.chars)if(S.fontSize=E.finalSize+"px",S.lineHeight=E.finalSize+"px",C.fClass)this.innerElem.className=C.fClass;else{S.fontFamily=C.fFamily;var R=E.fWeight,Ce=E.fStyle;S.fontStyle=Ce,S.fontWeight=R}var Ue,je,Xe=E.l;je=Xe.length;var Ye,et,ht,Dt=this.mHelper,Ot,Mt="",St=0;for(Ue=0;Ue<je;Ue+=1){if(this.globalData.fontManager.chars?(this.textPaths[St]?Ye=this.textPaths[St]:(Ye=createNS("path"),Ye.setAttribute("stroke-linecap",lineCapEnum[1]),Ye.setAttribute("stroke-linejoin",lineJoinEnum[2]),Ye.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[St]?(et=this.textSpans[St],ht=et.children[0]):(et=createTag("div"),et.style.lineHeight=0,ht=createNS("svg"),ht.appendChild(Ye),styleDiv(et)))):this.isMasked?Ye=this.textPaths[St]?this.textPaths[St]:createNS("text"):this.textSpans[St]?(et=this.textSpans[St],Ye=this.textPaths[St]):(et=createTag("span"),styleDiv(et),Ye=createTag("span"),styleDiv(Ye),et.appendChild(Ye)),this.globalData.fontManager.chars){var Ut=this.globalData.fontManager.getCharData(E.finalText[Ue],C.fStyle,this.globalData.fontManager.getFontByName(E.f).fFamily),kt;if(Ut?kt=Ut.data:kt=null,Dt.reset(),kt&&kt.shapes&&kt.shapes.length&&(Ot=kt.shapes[0].it,Dt.scale(E.finalSize/100,E.finalSize/100),Mt=this.createPathShape(Dt,Ot),Ye.setAttribute("d",Mt)),this.isMasked)this.innerElem.appendChild(Ye);else{if(this.innerElem.appendChild(et),kt&&kt.shapes){document.body.appendChild(ht);var Ft=ht.getBBox();ht.setAttribute("width",Ft.width+2),ht.setAttribute("height",Ft.height+2),ht.setAttribute("viewBox",Ft.x-1+" "+(Ft.y-1)+" "+(Ft.width+2)+" "+(Ft.height+2));var Nt=ht.style,Gt="translate("+(Ft.x-1)+"px,"+(Ft.y-1)+"px)";Nt.transform=Gt,Nt.webkitTransform=Gt,Xe[Ue].yOffset=Ft.y-1}else ht.setAttribute("width",1),ht.setAttribute("height",1);et.appendChild(ht)}}else if(Ye.textContent=Xe[Ue].val,Ye.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(Ye);else{this.innerElem.appendChild(et);var Zt=Ye.style,ri="translate3d(0,"+-E.finalSize/1.2+"px,0)";Zt.transform=ri,Zt.webkitTransform=ri}this.isMasked?this.textSpans[St]=Ye:this.textSpans[St]=et,this.textSpans[St].style.display="block",this.textPaths[St]=Ye,St+=1}for(;St<this.textSpans.length;)this.textSpans[St].style.display="none",St+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var E;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),E=this.svgElement.style;var S="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";E.transform=S,E.webkitTransform=S}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var x,C,R=0,Ce=this.textAnimator.renderedLetters,Ue=this.textProperty.currentData.l;C=Ue.length;var je,Xe,Ye;for(x=0;x<C;x+=1)Ue[x].n?R+=1:(Xe=this.textSpans[x],Ye=this.textPaths[x],je=Ce[R],R+=1,je._mdf.m&&(this.isMasked?Xe.setAttribute("transform",je.m):(Xe.style.webkitTransform=je.m,Xe.style.transform=je.m)),Xe.style.opacity=je.o,je.sw&&je._mdf.sw&&Ye.setAttribute("stroke-width",je.sw),je.sc&&je._mdf.sc&&Ye.setAttribute("stroke",je.sc),je.fc&&je._mdf.fc&&(Ye.setAttribute("fill",je.fc),Ye.style.color=je.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var et=this.innerElem.getBBox();this.currentBBox.w!==et.width&&(this.currentBBox.w=et.width,this.svgElement.setAttribute("width",et.width)),this.currentBBox.h!==et.height&&(this.currentBBox.h=et.height,this.svgElement.setAttribute("height",et.height));var ht=1;if(this.currentBBox.w!==et.width+ht*2||this.currentBBox.h!==et.height+ht*2||this.currentBBox.x!==et.x-ht||this.currentBBox.y!==et.y-ht){this.currentBBox.w=et.width+ht*2,this.currentBBox.h=et.height+ht*2,this.currentBBox.x=et.x-ht,this.currentBBox.y=et.y-ht,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),E=this.svgElement.style;var Dt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";E.transform=Dt,E.webkitTransform=Dt}}}};function HCameraElement(E,S,x){this.initFrame(),this.initBaseData(E,S,x),this.initHierarchy();var C=PropertyFactory.getProp;if(this.pe=C(this,E.pe,0,0,this),E.ks.p.s?(this.px=C(this,E.ks.p.x,1,0,this),this.py=C(this,E.ks.p.y,1,0,this),this.pz=C(this,E.ks.p.z,1,0,this)):this.p=C(this,E.ks.p,1,0,this),E.ks.a&&(this.a=C(this,E.ks.a,1,0,this)),E.ks.or.k.length&&E.ks.or.k[0].to){var R,Ce=E.ks.or.k.length;for(R=0;R<Ce;R+=1)E.ks.or.k[R].to=null,E.ks.or.k[R].ti=null}this.or=C(this,E.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=C(this,E.ks.rx,0,degToRads,this),this.ry=C(this,E.ks.ry,0,degToRads,this),this.rz=C(this,E.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var E,S=this.comp.threeDElements.length,x,C,R;for(E=0;E<S;E+=1)if(x=this.comp.threeDElements[E],x.type==="3d"){C=x.perspectiveElem.style,R=x.container.style;var Ce=this.pe.v+"px",Ue="0px 0px 0px",je="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";C.perspective=Ce,C.webkitPerspective=Ce,R.transformOrigin=Ue,R.mozTransformOrigin=Ue,R.webkitTransformOrigin=Ue,C.transform=je,C.webkitTransform=je}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var E=this._isFirstFrame,S,x;if(this.hierarchy)for(x=this.hierarchy.length,S=0;S<x;S+=1)E=this.hierarchy[S].finalTransform.mProp._mdf||E;if(E||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(x=this.hierarchy.length-1,S=x;S>=0;S-=1){var C=this.hierarchy[S].finalTransform.mProp;this.mat.translate(-C.p.v[0],-C.p.v[1],C.p.v[2]),this.mat.rotateX(-C.or.v[0]).rotateY(-C.or.v[1]).rotateZ(C.or.v[2]),this.mat.rotateX(-C.rx.v).rotateY(-C.ry.v).rotateZ(C.rz.v),this.mat.scale(1/C.s.v[0],1/C.s.v[1],1/C.s.v[2]),this.mat.translate(C.a.v[0],C.a.v[1],C.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var R;this.p?R=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:R=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var Ce=Math.sqrt(Math.pow(R[0],2)+Math.pow(R[1],2)+Math.pow(R[2],2)),Ue=[R[0]/Ce,R[1]/Ce,R[2]/Ce],je=Math.sqrt(Ue[2]*Ue[2]+Ue[0]*Ue[0]),Xe=Math.atan2(Ue[1],je),Ye=Math.atan2(Ue[0],-Ue[2]);this.mat.rotateY(Ye).rotateX(-Xe)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var et=!this._prevMat.equals(this.mat);if((et||this.pe._mdf)&&this.comp.threeDElements){x=this.comp.threeDElements.length;var ht,Dt,Ot;for(S=0;S<x;S+=1)if(ht=this.comp.threeDElements[S],ht.type==="3d"){if(et){var Mt=this.mat.toCSS();Ot=ht.container.style,Ot.transform=Mt,Ot.webkitTransform=Mt}this.pe._mdf&&(Dt=ht.perspectiveElem.style,Dt.perspective=this.pe.v+"px",Dt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(E){this.prepareProperties(E,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(E,S,x){this.assetData=S.getAssetData(E.refId),this.initElement(E,S,x)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var E=this.globalData.getAssetsPath(this.assetData),S=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",E),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(S),S.crossOrigin="anonymous",S.src=E,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(E,S){this.animationItem=E,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:S&&S.className||"",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(S&&S.hideOnTransparent===!1),filterSize:{width:S&&S.filterSize&&S.filterSize.width||"400%",height:S&&S.filterSize&&S.filterSize.height||"400%",x:S&&S.filterSize&&S.filterSize.x||"-100%",y:S&&S.filterSize&&S.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var E=this.pendingElements.pop();E.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(E,S){var x=E.getBaseElement();if(x){var C=this.layers[S];if(!C.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(x,S);else{for(var R=0,Ce,Ue,je;R<S;)this.elements[R]&&this.elements[R]!==!0&&this.elements[R].getBaseElement&&(Ue=this.elements[R],je=this.layers[R].ddd?this.getThreeDContainerByPos(R):Ue.getBaseElement(),Ce=je||Ce),R+=1;Ce?(!C.ddd||!this.supports3d)&&this.layerElement.insertBefore(x,Ce):(!C.ddd||!this.supports3d)&&this.layerElement.appendChild(x)}else this.addTo3dContainer(x,S)}},HybridRendererBase.prototype.createShape=function(E){return this.supports3d?new HShapeElement(E,this.globalData,this):new SVGShapeElement(E,this.globalData,this)},HybridRendererBase.prototype.createText=function(E){return this.supports3d?new HTextElement(E,this.globalData,this):new SVGTextLottieElement(E,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(E){return this.camera=new HCameraElement(E,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(E){return this.supports3d?new HImageElement(E,this.globalData,this):new IImageElement(E,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(E){return this.supports3d?new HSolidElement(E,this.globalData,this):new ISolidElement(E,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(E){for(var S=0,x=this.threeDElements.length;S<x;){if(this.threeDElements[S].startPos<=E&&this.threeDElements[S].endPos>=E)return this.threeDElements[S].perspectiveElem;S+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(E,S){var x=createTag("div"),C,R;styleDiv(x);var Ce=createTag("div");if(styleDiv(Ce),S==="3d"){C=x.style,C.width=this.globalData.compSize.w+"px",C.height=this.globalData.compSize.h+"px";var Ue="50% 50%";C.webkitTransformOrigin=Ue,C.mozTransformOrigin=Ue,C.transformOrigin=Ue,R=Ce.style;var je="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";R.transform=je,R.webkitTransform=je}x.appendChild(Ce);var Xe={container:Ce,perspectiveElem:x,startPos:E,endPos:E,type:S};return this.threeDElements.push(Xe),Xe},HybridRendererBase.prototype.build3dContainers=function(){var E,S=this.layers.length,x,C="";for(E=0;E<S;E+=1)this.layers[E].ddd&&this.layers[E].ty!==3?(C!=="3d"&&(C="3d",x=this.createThreeDContainer(E,"3d")),x.endPos=Math.max(x.endPos,E)):(C!=="2d"&&(C="2d",x=this.createThreeDContainer(E,"2d")),x.endPos=Math.max(x.endPos,E));for(S=this.threeDElements.length,E=S-1;E>=0;E-=1)this.resizerElem.appendChild(this.threeDElements[E].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(E,S){for(var x=0,C=this.threeDElements.length;x<C;){if(S<=this.threeDElements[x].endPos){for(var R=this.threeDElements[x].startPos,Ce;R<S;)this.elements[R]&&this.elements[R].getBaseElement&&(Ce=this.elements[R].getBaseElement()),R+=1;Ce?this.threeDElements[x].container.insertBefore(E,Ce):this.threeDElements[x].container.appendChild(E);break}x+=1}},HybridRendererBase.prototype.configAnimation=function(E){var S=createTag("div"),x=this.animationItem.wrapper,C=S.style;C.width=E.w+"px",C.height=E.h+"px",this.resizerElem=S,styleDiv(S),C.transformStyle="flat",C.mozTransformStyle="flat",C.webkitTransformStyle="flat",this.renderConfig.className&&S.setAttribute("class",this.renderConfig.className),x.appendChild(S),C.overflow="hidden";var R=createNS("svg");R.setAttribute("width","1"),R.setAttribute("height","1"),styleDiv(R),this.resizerElem.appendChild(R);var Ce=createNS("defs");R.appendChild(Ce),this.data=E,this.setupGlobalData(E,R),this.globalData.defs=Ce,this.layers=E.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var E,S=this.layers?this.layers.length:0;for(E=0;E<S;E+=1)this.elements[E]&&this.elements[E].destroy&&this.elements[E].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var E=this.animationItem.wrapper.offsetWidth,S=this.animationItem.wrapper.offsetHeight,x=E/S,C=this.globalData.compSize.w/this.globalData.compSize.h,R,Ce,Ue,je;C>x?(R=E/this.globalData.compSize.w,Ce=E/this.globalData.compSize.w,Ue=0,je=(S-this.globalData.compSize.h*(E/this.globalData.compSize.w))/2):(R=S/this.globalData.compSize.h,Ce=S/this.globalData.compSize.h,Ue=(E-this.globalData.compSize.w*(S/this.globalData.compSize.h))/2,je=0);var Xe=this.resizerElem.style;Xe.webkitTransform="matrix3d("+R+",0,0,0,0,"+Ce+",0,0,0,0,1,0,"+Ue+","+je+",0,1)",Xe.transform=Xe.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var E=this.globalData.compSize.w,S=this.globalData.compSize.h,x,C=this.threeDElements.length;for(x=0;x<C;x+=1){var R=this.threeDElements[x].perspectiveElem.style;R.webkitPerspective=Math.sqrt(Math.pow(E,2)+Math.pow(S,2))+"px",R.perspective=R.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(E){var S,x=E.length,C=createTag("div");for(S=0;S<x;S+=1)if(E[S].xt){var R=this.createComp(E[S],C,this.globalData.comp,null);R.initExpressions(),this.globalData.projectInterface.registerComposition(R)}};function HCompElement(E,S,x){this.layers=E.layers,this.supports3d=!E.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(E,S,x),this.tm=E.tm?PropertyFactory.getProp(this,E.tm,0,S.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(E,S){for(var x=0,C;x<S;)this.elements[x]&&this.elements[x].getBaseElement&&(C=this.elements[x].getBaseElement()),x+=1;C?this.layerElement.insertBefore(E,C):this.layerElement.appendChild(E)},HCompElement.prototype.createComp=function(E){return this.supports3d?new HCompElement(E,this.globalData,this):new SVGCompElement(E,this.globalData,this)};function HybridRenderer(E,S){this.animationItem=E,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:S&&S.className||"",imagePreserveAspectRatio:S&&S.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(S&&S.hideOnTransparent===!1),filterSize:{width:S&&S.filterSize&&S.filterSize.width||"400%",height:S&&S.filterSize&&S.filterSize.height||"400%",x:S&&S.filterSize&&S.filterSize.x||"-100%",y:S&&S.filterSize&&S.filterSize.y||"-100%"},runExpressions:!S||S.runExpressions===void 0||S.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(E){return this.supports3d?new HCompElement(E,this.globalData,this):new SVGCompElement(E,this.globalData,this)};var CompExpressionInterface=function(){return function(E){function S(x){for(var C=0,R=E.layers.length;C<R;){if(E.layers[C].nm===x||E.layers[C].ind===x)return E.elements[C].layerInterface;C+=1}return null}return Object.defineProperty(S,"_name",{value:E.data.nm}),S.layer=S,S.pixelAspect=1,S.height=E.data.h||E.globalData.compSize.h,S.width=E.data.w||E.globalData.compSize.w,S.pixelAspect=1,S.frameDuration=1/E.globalData.frameRate,S.displayStartTime=0,S.numLayers=E.layers.length,S}}();function _typeof$2(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(x){return typeof x}:_typeof$2=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof$2(E)}function seedRandom(E,S){var x=this,C=256,R=6,Ce=52,Ue="random",je=S.pow(C,R),Xe=S.pow(2,Ce),Ye=Xe*2,et=C-1,ht;function Dt(Nt,Gt,Zt){var ri=[];Gt=Gt===!0?{entropy:!0}:Gt||{};var li=Ut(St(Gt.entropy?[Nt,Ft(E)]:Nt===null?kt():Nt,3),ri),hi=new Ot(ri),xi=function(){for(var Mi=hi.g(R),Di=je,ki=0;Mi<Xe;)Mi=(Mi+ki)*C,Di*=C,ki=hi.g(1);for(;Mi>=Ye;)Mi/=2,Di/=2,ki>>>=1;return(Mi+ki)/Di};return xi.int32=function(){return hi.g(4)|0},xi.quick=function(){return hi.g(4)/4294967296},xi.double=xi,Ut(Ft(hi.S),E),(Gt.pass||Zt||function($i,Mi,Di,ki){return ki&&(ki.S&&Mt(ki,hi),$i.state=function(){return Mt(hi,{})}),Di?(S[Ue]=$i,Mi):$i})(xi,li,"global"in Gt?Gt.global:this==S,Gt.state)}S["seed"+Ue]=Dt;function Ot(Nt){var Gt,Zt=Nt.length,ri=this,li=0,hi=ri.i=ri.j=0,xi=ri.S=[];for(Zt||(Nt=[Zt++]);li<C;)xi[li]=li++;for(li=0;li<C;li++)xi[li]=xi[hi=et&hi+Nt[li%Zt]+(Gt=xi[li])],xi[hi]=Gt;ri.g=function($i){for(var Mi,Di=0,ki=ri.i,ji=ri.j,Ri=ri.S;$i--;)Mi=Ri[ki=et&ki+1],Di=Di*C+Ri[et&(Ri[ki]=Ri[ji=et&ji+Mi])+(Ri[ji]=Mi)];return ri.i=ki,ri.j=ji,Di}}function Mt(Nt,Gt){return Gt.i=Nt.i,Gt.j=Nt.j,Gt.S=Nt.S.slice(),Gt}function St(Nt,Gt){var Zt=[],ri=_typeof$2(Nt),li;if(Gt&&ri=="object")for(li in Nt)try{Zt.push(St(Nt[li],Gt-1))}catch{}return Zt.length?Zt:ri=="string"?Nt:Nt+"\0"}function Ut(Nt,Gt){for(var Zt=Nt+"",ri,li=0;li<Zt.length;)Gt[et&li]=et&(ri^=Gt[et&li]*19)+Zt.charCodeAt(li++);return Ft(Gt)}function kt(){try{var Nt=new Uint8Array(C);return(x.crypto||x.msCrypto).getRandomValues(Nt),Ft(Nt)}catch{var Gt=x.navigator,Zt=Gt&&Gt.plugins;return[+new Date,x,Zt,x.screen,Ft(E)]}}function Ft(Nt){return String.fromCharCode.apply(0,Nt)}Ut(S.random(),E)}function initialize$2(E){seedRandom([],E)}var propTypes={SHAPE:"shape"};function _typeof$1(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(x){return typeof x}:_typeof$1=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof$1(E)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(E){return E.constructor===Array||E.constructor===Float32Array}function isNumerable(E,S){return E==="number"||S instanceof Number||E==="boolean"||E==="string"}function $bm_neg(E){var S=_typeof$1(E);if(S==="number"||E instanceof Number||S==="boolean")return-E;if($bm_isInstanceOfArray(E)){var x,C=E.length,R=[];for(x=0;x<C;x+=1)R[x]=-E[x];return R}return E.propType?E.v:-E}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(E,S){var x=_typeof$1(E),C=_typeof$1(S);if(isNumerable(x,E)&&isNumerable(C,S)||x==="string"||C==="string")return E+S;if($bm_isInstanceOfArray(E)&&isNumerable(C,S))return E=E.slice(0),E[0]+=S,E;if(isNumerable(x,E)&&$bm_isInstanceOfArray(S))return S=S.slice(0),S[0]=E+S[0],S;if($bm_isInstanceOfArray(E)&&$bm_isInstanceOfArray(S)){for(var R=0,Ce=E.length,Ue=S.length,je=[];R<Ce||R<Ue;)(typeof E[R]=="number"||E[R]instanceof Number)&&(typeof S[R]=="number"||S[R]instanceof Number)?je[R]=E[R]+S[R]:je[R]=S[R]===void 0?E[R]:E[R]||S[R],R+=1;return je}return 0}var add=sum;function sub(E,S){var x=_typeof$1(E),C=_typeof$1(S);if(isNumerable(x,E)&&isNumerable(C,S))return x==="string"&&(E=parseInt(E,10)),C==="string"&&(S=parseInt(S,10)),E-S;if($bm_isInstanceOfArray(E)&&isNumerable(C,S))return E=E.slice(0),E[0]-=S,E;if(isNumerable(x,E)&&$bm_isInstanceOfArray(S))return S=S.slice(0),S[0]=E-S[0],S;if($bm_isInstanceOfArray(E)&&$bm_isInstanceOfArray(S)){for(var R=0,Ce=E.length,Ue=S.length,je=[];R<Ce||R<Ue;)(typeof E[R]=="number"||E[R]instanceof Number)&&(typeof S[R]=="number"||S[R]instanceof Number)?je[R]=E[R]-S[R]:je[R]=S[R]===void 0?E[R]:E[R]||S[R],R+=1;return je}return 0}function mul(E,S){var x=_typeof$1(E),C=_typeof$1(S),R;if(isNumerable(x,E)&&isNumerable(C,S))return E*S;var Ce,Ue;if($bm_isInstanceOfArray(E)&&isNumerable(C,S)){for(Ue=E.length,R=createTypedArray("float32",Ue),Ce=0;Ce<Ue;Ce+=1)R[Ce]=E[Ce]*S;return R}if(isNumerable(x,E)&&$bm_isInstanceOfArray(S)){for(Ue=S.length,R=createTypedArray("float32",Ue),Ce=0;Ce<Ue;Ce+=1)R[Ce]=E*S[Ce];return R}return 0}function div(E,S){var x=_typeof$1(E),C=_typeof$1(S),R;if(isNumerable(x,E)&&isNumerable(C,S))return E/S;var Ce,Ue;if($bm_isInstanceOfArray(E)&&isNumerable(C,S)){for(Ue=E.length,R=createTypedArray("float32",Ue),Ce=0;Ce<Ue;Ce+=1)R[Ce]=E[Ce]/S;return R}if(isNumerable(x,E)&&$bm_isInstanceOfArray(S)){for(Ue=S.length,R=createTypedArray("float32",Ue),Ce=0;Ce<Ue;Ce+=1)R[Ce]=E/S[Ce];return R}return 0}function mod(E,S){return typeof E=="string"&&(E=parseInt(E,10)),typeof S=="string"&&(S=parseInt(S,10)),E%S}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(E,S,x){if(S>x){var C=x;x=S,S=C}return Math.min(Math.max(E,S),x)}function radiansToDegrees(E){return E/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(E){return E*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(E,S){if(typeof E=="number"||E instanceof Number)return S=S||0,Math.abs(E-S);S||(S=helperLengthArray);var x,C=Math.min(E.length,S.length),R=0;for(x=0;x<C;x+=1)R+=Math.pow(S[x]-E[x],2);return Math.sqrt(R)}function normalize(E){return div(E,length(E))}function rgbToHsl(E){var S=E[0],x=E[1],C=E[2],R=Math.max(S,x,C),Ce=Math.min(S,x,C),Ue,je,Xe=(R+Ce)/2;if(R===Ce)Ue=0,je=0;else{var Ye=R-Ce;switch(je=Xe>.5?Ye/(2-R-Ce):Ye/(R+Ce),R){case S:Ue=(x-C)/Ye+(x<C?6:0);break;case x:Ue=(C-S)/Ye+2;break;case C:Ue=(S-x)/Ye+4;break}Ue/=6}return[Ue,je,Xe,E[3]]}function hue2rgb(E,S,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?E+(S-E)*6*x:x<1/2?S:x<2/3?E+(S-E)*(2/3-x)*6:E}function hslToRgb(E){var S=E[0],x=E[1],C=E[2],R,Ce,Ue;if(x===0)R=C,Ue=C,Ce=C;else{var je=C<.5?C*(1+x):C+x-C*x,Xe=2*C-je;R=hue2rgb(Xe,je,S+1/3),Ce=hue2rgb(Xe,je,S),Ue=hue2rgb(Xe,je,S-1/3)}return[R,Ce,Ue,E[3]]}function linear(E,S,x,C,R){if((C===void 0||R===void 0)&&(C=S,R=x,S=0,x=1),x<S){var Ce=x;x=S,S=Ce}if(E<=S)return C;if(E>=x)return R;var Ue=x===S?0:(E-S)/(x-S);if(!C.length)return C+(R-C)*Ue;var je,Xe=C.length,Ye=createTypedArray("float32",Xe);for(je=0;je<Xe;je+=1)Ye[je]=C[je]+(R[je]-C[je])*Ue;return Ye}function random(E,S){if(S===void 0&&(E===void 0?(E=0,S=1):(S=E,E=void 0)),S.length){var x,C=S.length;E||(E=createTypedArray("float32",C));var R=createTypedArray("float32",C),Ce=BMMath.random();for(x=0;x<C;x+=1)R[x]=E[x]+Ce*(S[x]-E[x]);return R}E===void 0&&(E=0);var Ue=BMMath.random();return E+Ue*(S-E)}function createPath(E,S,x,C){var R,Ce=E.length,Ue=shapePool.newElement();Ue.setPathData(!!C,Ce);var je=[0,0],Xe,Ye;for(R=0;R<Ce;R+=1)Xe=S&&S[R]?S[R]:je,Ye=x&&x[R]?x[R]:je,Ue.setTripleAt(E[R][0],E[R][1],Ye[0]+E[R][0],Ye[1]+E[R][1],Xe[0]+E[R][0],Xe[1]+E[R][1],R,!0);return Ue}function initiateExpression(elem,data,property){function noOp(E){return E}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function E(S,x){var C,R,Ce=this.pv.length?this.pv.length:1,Ue=createTypedArray("float32",Ce);S=5;var je=Math.floor(time*S);for(C=0,R=0;C<je;){for(R=0;R<Ce;R+=1)Ue[R]+=-x+x*2*BMMath.random();C+=1}var Xe=time*S,Ye=Xe-Math.floor(Xe),et=createTypedArray("float32",Ce);if(Ce>1){for(R=0;R<Ce;R+=1)et[R]=this.pv[R]+Ue[R]+(-x+x*2*BMMath.random())*Ye;return et}return this.pv+Ue[0]+(-x+x*2*BMMath.random())*Ye}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(E,S){return loopIn(E,S,!0)}function loopOutDuration(E,S){return loopOut(E,S,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(E,S){var x=[S[0]-E[0],S[1]-E[1],S[2]-E[2]],C=Math.atan2(x[0],Math.sqrt(x[1]*x[1]+x[2]*x[2]))/degToRads,R=-Math.atan2(x[1],x[2])/degToRads;return[R,C,0]}function easeOut(E,S,x,C,R){return applyEase(easeOutBez,E,S,x,C,R)}function easeIn(E,S,x,C,R){return applyEase(easeInBez,E,S,x,C,R)}function ease(E,S,x,C,R){return applyEase(easeInOutBez,E,S,x,C,R)}function applyEase(E,S,x,C,R,Ce){R===void 0?(R=x,Ce=C):S=(S-x)/(C-x),S>1?S=1:S<0&&(S=0);var Ue=E(S);if($bm_isInstanceOfArray(R)){var je,Xe=R.length,Ye=createTypedArray("float32",Xe);for(je=0;je<Xe;je+=1)Ye[je]=(Ce[je]-R[je])*Ue+R[je];return Ye}return(Ce-R)*Ue+R}function nearestKey(E){var S,x=data.k.length,C,R;if(!data.k.length||typeof data.k[0]=="number")C=0,R=0;else if(C=-1,E*=elem.comp.globalData.frameRate,E<data.k[0].t)C=1,R=data.k[0].t;else{for(S=0;S<x-1;S+=1)if(E===data.k[S].t){C=S+1,R=data.k[S].t;break}else if(E>data.k[S].t&&E<data.k[S+1].t){E-data.k[S].t>data.k[S+1].t-E?(C=S+2,R=data.k[S+1].t):(C=S+1,R=data.k[S].t);break}C===-1&&(C=S+1,R=data.k[S].t)}var Ce={};return Ce.index=C,Ce.time=R/elem.comp.globalData.frameRate,Ce}function key(E){var S,x,C;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+E);E-=1,S={time:data.k[E].t/elem.comp.globalData.frameRate,value:[]};var R=Object.prototype.hasOwnProperty.call(data.k[E],"s")?data.k[E].s:data.k[E-1].e;for(C=R.length,x=0;x<C;x+=1)S[x]=R[x],S.value[x]=R[x];return S}function framesToTime(E,S){return S||(S=elem.comp.globalData.frameRate),E/S}function timeToFrames(E,S){return!E&&E!==0&&(E=time),S||(S=elem.comp.globalData.frameRate),E*S}function seedRandom(E){BMMath.seedrandom(randSeed+E)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(E,S){return typeof value=="string"?S===void 0?value.substring(E):value.substring(E,S):""}function substr(E,S){return typeof value=="string"?S===void 0?value.substr(E):value.substr(E,S):""}function posterizeTime(E){time=E===0?0:Math.floor(time*E)/E,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(E){return value=E,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var E={};E.initExpressions=S,E.resetFrame=ExpressionManager.resetFrame;function S(x){var C=0,R=[];function Ce(){C+=1}function Ue(){C-=1,C===0&&Xe()}function je(Ye){R.indexOf(Ye)===-1&&R.push(Ye)}function Xe(){var Ye,et=R.length;for(Ye=0;Ye<et;Ye+=1)R[Ye].release();R.length=0}x.renderer.compInterface=CompExpressionInterface(x.renderer),x.renderer.globalData.projectInterface.registerComposition(x.renderer),x.renderer.globalData.pushExpression=Ce,x.renderer.globalData.popExpression=Ue,x.renderer.globalData.registerExpressionProperty=je}return E}(),MaskManagerInterface=function(){function E(x,C){this._mask=x,this._data=C}Object.defineProperty(E.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(E.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var S=function(C){var R=createSizedArray(C.viewData.length),Ce,Ue=C.viewData.length;for(Ce=0;Ce<Ue;Ce+=1)R[Ce]=new E(C.viewData[Ce],C.masksProperties[Ce]);var je=function(Ye){for(Ce=0;Ce<Ue;){if(C.masksProperties[Ce].nm===Ye)return R[Ce];Ce+=1}return null};return je};return S}(),ExpressionPropertyInterface=function(){var E={pv:0,v:0,mult:1},S={pv:[0,0,0],v:[0,0,0],mult:1};function x(Ue,je,Xe){Object.defineProperty(Ue,"velocity",{get:function(){return je.getVelocityAtTime(je.comp.currentFrame)}}),Ue.numKeys=je.keyframes?je.keyframes.length:0,Ue.key=function(Ye){if(!Ue.numKeys)return 0;var et="";"s"in je.keyframes[Ye-1]?et=je.keyframes[Ye-1].s:"e"in je.keyframes[Ye-2]?et=je.keyframes[Ye-2].e:et=je.keyframes[Ye-2].s;var ht=Xe==="unidimensional"?new Number(et):Object.assign({},et);return ht.time=je.keyframes[Ye-1].t/je.elem.comp.globalData.frameRate,ht.value=Xe==="unidimensional"?et[0]:et,ht},Ue.valueAtTime=je.getValueAtTime,Ue.speedAtTime=je.getSpeedAtTime,Ue.velocityAtTime=je.getVelocityAtTime,Ue.propertyGroup=je.propertyGroup}function C(Ue){(!Ue||!("pv"in Ue))&&(Ue=E);var je=1/Ue.mult,Xe=Ue.pv*je,Ye=new Number(Xe);return Ye.value=Xe,x(Ye,Ue,"unidimensional"),function(){return Ue.k&&Ue.getValue(),Xe=Ue.v*je,Ye.value!==Xe&&(Ye=new Number(Xe),Ye.value=Xe,x(Ye,Ue,"unidimensional")),Ye}}function R(Ue){(!Ue||!("pv"in Ue))&&(Ue=S);var je=1/Ue.mult,Xe=Ue.data&&Ue.data.l||Ue.pv.length,Ye=createTypedArray("float32",Xe),et=createTypedArray("float32",Xe);return Ye.value=et,x(Ye,Ue,"multidimensional"),function(){Ue.k&&Ue.getValue();for(var ht=0;ht<Xe;ht+=1)et[ht]=Ue.v[ht]*je,Ye[ht]=et[ht];return Ye}}function Ce(){return E}return function(Ue){return Ue?Ue.propType==="unidimensional"?C(Ue):R(Ue):Ce}}(),TransformExpressionInterface=function(){return function(E){function S(Ue){switch(Ue){case"scale":case"Scale":case"ADBE Scale":case 6:return S.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return S.rotation;case"ADBE Rotate X":return S.xRotation;case"ADBE Rotate Y":return S.yRotation;case"position":case"Position":case"ADBE Position":case 2:return S.position;case"ADBE Position_0":return S.xPosition;case"ADBE Position_1":return S.yPosition;case"ADBE Position_2":return S.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return S.anchorPoint;case"opacity":case"Opacity":case 11:return S.opacity;default:return null}}Object.defineProperty(S,"rotation",{get:ExpressionPropertyInterface(E.r||E.rz)}),Object.defineProperty(S,"zRotation",{get:ExpressionPropertyInterface(E.rz||E.r)}),Object.defineProperty(S,"xRotation",{get:ExpressionPropertyInterface(E.rx)}),Object.defineProperty(S,"yRotation",{get:ExpressionPropertyInterface(E.ry)}),Object.defineProperty(S,"scale",{get:ExpressionPropertyInterface(E.s)});var x,C,R,Ce;return E.p?Ce=ExpressionPropertyInterface(E.p):(x=ExpressionPropertyInterface(E.px),C=ExpressionPropertyInterface(E.py),E.pz&&(R=ExpressionPropertyInterface(E.pz))),Object.defineProperty(S,"position",{get:function(){return E.p?Ce():[x(),C(),R?R():0]}}),Object.defineProperty(S,"xPosition",{get:ExpressionPropertyInterface(E.px)}),Object.defineProperty(S,"yPosition",{get:ExpressionPropertyInterface(E.py)}),Object.defineProperty(S,"zPosition",{get:ExpressionPropertyInterface(E.pz)}),Object.defineProperty(S,"anchorPoint",{get:ExpressionPropertyInterface(E.a)}),Object.defineProperty(S,"opacity",{get:ExpressionPropertyInterface(E.o)}),Object.defineProperty(S,"skew",{get:ExpressionPropertyInterface(E.sk)}),Object.defineProperty(S,"skewAxis",{get:ExpressionPropertyInterface(E.sa)}),Object.defineProperty(S,"orientation",{get:ExpressionPropertyInterface(E.or)}),S}}(),LayerExpressionInterface=function(){function E(Ye){var et=new Matrix;if(Ye!==void 0){var ht=this._elem.finalTransform.mProp.getValueAtTime(Ye);ht.clone(et)}else{var Dt=this._elem.finalTransform.mProp;Dt.applyToMatrix(et)}return et}function S(Ye,et){var ht=this.getMatrix(et);return ht.props[12]=0,ht.props[13]=0,ht.props[14]=0,this.applyPoint(ht,Ye)}function x(Ye,et){var ht=this.getMatrix(et);return this.applyPoint(ht,Ye)}function C(Ye,et){var ht=this.getMatrix(et);return ht.props[12]=0,ht.props[13]=0,ht.props[14]=0,this.invertPoint(ht,Ye)}function R(Ye,et){var ht=this.getMatrix(et);return this.invertPoint(ht,Ye)}function Ce(Ye,et){if(this._elem.hierarchy&&this._elem.hierarchy.length){var ht,Dt=this._elem.hierarchy.length;for(ht=0;ht<Dt;ht+=1)this._elem.hierarchy[ht].finalTransform.mProp.applyToMatrix(Ye)}return Ye.applyToPointArray(et[0],et[1],et[2]||0)}function Ue(Ye,et){if(this._elem.hierarchy&&this._elem.hierarchy.length){var ht,Dt=this._elem.hierarchy.length;for(ht=0;ht<Dt;ht+=1)this._elem.hierarchy[ht].finalTransform.mProp.applyToMatrix(Ye)}return Ye.inversePoint(et)}function je(Ye){var et=new Matrix;if(et.reset(),this._elem.finalTransform.mProp.applyToMatrix(et),this._elem.hierarchy&&this._elem.hierarchy.length){var ht,Dt=this._elem.hierarchy.length;for(ht=0;ht<Dt;ht+=1)this._elem.hierarchy[ht].finalTransform.mProp.applyToMatrix(et);return et.inversePoint(Ye)}return et.inversePoint(Ye)}function Xe(){return[1,1,1,1]}return function(Ye){var et;function ht(St){Ot.mask=new MaskManagerInterface(St,Ye)}function Dt(St){Ot.effect=St}function Ot(St){switch(St){case"ADBE Root Vectors Group":case"Contents":case 2:return Ot.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return et;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Ot.effect;case"ADBE Text Properties":return Ot.textInterface;default:return null}}Ot.getMatrix=E,Ot.invertPoint=Ue,Ot.applyPoint=Ce,Ot.toWorld=x,Ot.toWorldVec=S,Ot.fromWorld=R,Ot.fromWorldVec=C,Ot.toComp=x,Ot.fromComp=je,Ot.sampleImage=Xe,Ot.sourceRectAtTime=Ye.sourceRectAtTime.bind(Ye),Ot._elem=Ye,et=TransformExpressionInterface(Ye.finalTransform.mProp);var Mt=getDescriptor(et,"anchorPoint");return Object.defineProperties(Ot,{hasParent:{get:function(){return Ye.hierarchy.length}},parent:{get:function(){return Ye.hierarchy[0].layerInterface}},rotation:getDescriptor(et,"rotation"),scale:getDescriptor(et,"scale"),position:getDescriptor(et,"position"),opacity:getDescriptor(et,"opacity"),anchorPoint:Mt,anchor_point:Mt,transform:{get:function(){return et}},active:{get:function(){return Ye.isInRange}}}),Ot.startTime=Ye.data.st,Ot.index=Ye.data.ind,Ot.source=Ye.data.refId,Ot.height=Ye.data.ty===0?Ye.data.h:100,Ot.width=Ye.data.ty===0?Ye.data.w:100,Ot.inPoint=Ye.data.ip/Ye.comp.globalData.frameRate,Ot.outPoint=Ye.data.op/Ye.comp.globalData.frameRate,Ot._name=Ye.data.nm,Ot.registerMaskInterface=ht,Ot.registerEffectsInterface=Dt,Ot}}(),propertyGroupFactory=function(){return function(E,S){return function(x){return x=x===void 0?1:x,x<=0?E:S(x-1)}}}(),PropertyInterface=function(){return function(E,S){var x={_name:E};function C(R){return R=R===void 0?1:R,R<=0?x:S(R-1)}return C}}(),EffectsExpressionInterface=function(){var E={createEffectsInterface:S};function S(R,Ce){if(R.effectsManager){var Ue=[],je=R.data.ef,Xe,Ye=R.effectsManager.effectElements.length;for(Xe=0;Xe<Ye;Xe+=1)Ue.push(x(je[Xe],R.effectsManager.effectElements[Xe],Ce,R));var et=R.data.ef||[],ht=function(Ot){for(Xe=0,Ye=et.length;Xe<Ye;){if(Ot===et[Xe].nm||Ot===et[Xe].mn||Ot===et[Xe].ix)return Ue[Xe];Xe+=1}return null};return Object.defineProperty(ht,"numProperties",{get:function(){return et.length}}),ht}return null}function x(R,Ce,Ue,je){function Xe(Ot){for(var Mt=R.ef,St=0,Ut=Mt.length;St<Ut;){if(Ot===Mt[St].nm||Ot===Mt[St].mn||Ot===Mt[St].ix)return Mt[St].ty===5?et[St]:et[St]();St+=1}throw new Error}var Ye=propertyGroupFactory(Xe,Ue),et=[],ht,Dt=R.ef.length;for(ht=0;ht<Dt;ht+=1)R.ef[ht].ty===5?et.push(x(R.ef[ht],Ce.effectElements[ht],Ce.effectElements[ht].propertyGroup,je)):et.push(C(Ce.effectElements[ht],R.ef[ht].ty,je,Ye));return R.mn==="ADBE Color Control"&&Object.defineProperty(Xe,"color",{get:function(){return et[0]()}}),Object.defineProperties(Xe,{numProperties:{get:function(){return R.np}},_name:{value:R.nm},propertyGroup:{value:Ye}}),Xe.enabled=R.en!==0,Xe.active=Xe.enabled,Xe}function C(R,Ce,Ue,je){var Xe=ExpressionPropertyInterface(R.p);function Ye(){return Ce===10?Ue.comp.compInterface(R.p.v):Xe()}return R.p.setGroupProperty&&R.p.setGroupProperty(PropertyInterface("",je)),Ye}return E}(),ShapePathInterface=function(){return function(S,x,C){var R=x.sh;function Ce(je){return je==="Shape"||je==="shape"||je==="Path"||je==="path"||je==="ADBE Vector Shape"||je===2?Ce.path:null}var Ue=propertyGroupFactory(Ce,C);return R.setGroupProperty(PropertyInterface("Path",Ue)),Object.defineProperties(Ce,{path:{get:function(){return R.k&&R.getValue(),R}},shape:{get:function(){return R.k&&R.getValue(),R}},_name:{value:S.nm},ix:{value:S.ix},propertyIndex:{value:S.ix},mn:{value:S.mn},propertyGroup:{value:C}}),Ce}}(),ShapeExpressionInterface=function(){function E(Mt,St,Ut){var kt=[],Ft,Nt=Mt?Mt.length:0;for(Ft=0;Ft<Nt;Ft+=1)Mt[Ft].ty==="gr"?kt.push(x(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="fl"?kt.push(C(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="st"?kt.push(Ue(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="tm"?kt.push(je(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="tr"||(Mt[Ft].ty==="el"?kt.push(Ye(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="sr"?kt.push(et(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="sh"?kt.push(ShapePathInterface(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="rc"?kt.push(ht(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="rd"?kt.push(Dt(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="rp"?kt.push(Ot(Mt[Ft],St[Ft],Ut)):Mt[Ft].ty==="gf"?kt.push(R(Mt[Ft],St[Ft],Ut)):kt.push(Ce(Mt[Ft],St[Ft])));return kt}function S(Mt,St,Ut){var kt,Ft=function(Zt){for(var ri=0,li=kt.length;ri<li;){if(kt[ri]._name===Zt||kt[ri].mn===Zt||kt[ri].propertyIndex===Zt||kt[ri].ix===Zt||kt[ri].ind===Zt)return kt[ri];ri+=1}return typeof Zt=="number"?kt[Zt-1]:null};Ft.propertyGroup=propertyGroupFactory(Ft,Ut),kt=E(Mt.it,St.it,Ft.propertyGroup),Ft.numProperties=kt.length;var Nt=Xe(Mt.it[Mt.it.length-1],St.it[St.it.length-1],Ft.propertyGroup);return Ft.transform=Nt,Ft.propertyIndex=Mt.cix,Ft._name=Mt.nm,Ft}function x(Mt,St,Ut){var kt=function(Zt){switch(Zt){case"ADBE Vectors Group":case"Contents":case 2:return kt.content;default:return kt.transform}};kt.propertyGroup=propertyGroupFactory(kt,Ut);var Ft=S(Mt,St,kt.propertyGroup),Nt=Xe(Mt.it[Mt.it.length-1],St.it[St.it.length-1],kt.propertyGroup);return kt.content=Ft,kt.transform=Nt,Object.defineProperty(kt,"_name",{get:function(){return Mt.nm}}),kt.numProperties=Mt.np,kt.propertyIndex=Mt.ix,kt.nm=Mt.nm,kt.mn=Mt.mn,kt}function C(Mt,St,Ut){function kt(Ft){return Ft==="Color"||Ft==="color"?kt.color:Ft==="Opacity"||Ft==="opacity"?kt.opacity:null}return Object.defineProperties(kt,{color:{get:ExpressionPropertyInterface(St.c)},opacity:{get:ExpressionPropertyInterface(St.o)},_name:{value:Mt.nm},mn:{value:Mt.mn}}),St.c.setGroupProperty(PropertyInterface("Color",Ut)),St.o.setGroupProperty(PropertyInterface("Opacity",Ut)),kt}function R(Mt,St,Ut){function kt(Ft){return Ft==="Start Point"||Ft==="start point"?kt.startPoint:Ft==="End Point"||Ft==="end point"?kt.endPoint:Ft==="Opacity"||Ft==="opacity"?kt.opacity:null}return Object.defineProperties(kt,{startPoint:{get:ExpressionPropertyInterface(St.s)},endPoint:{get:ExpressionPropertyInterface(St.e)},opacity:{get:ExpressionPropertyInterface(St.o)},type:{get:function(){return"a"}},_name:{value:Mt.nm},mn:{value:Mt.mn}}),St.s.setGroupProperty(PropertyInterface("Start Point",Ut)),St.e.setGroupProperty(PropertyInterface("End Point",Ut)),St.o.setGroupProperty(PropertyInterface("Opacity",Ut)),kt}function Ce(){function Mt(){return null}return Mt}function Ue(Mt,St,Ut){var kt=propertyGroupFactory(li,Ut),Ft=propertyGroupFactory(ri,kt);function Nt(hi){Object.defineProperty(ri,Mt.d[hi].nm,{get:ExpressionPropertyInterface(St.d.dataProps[hi].p)})}var Gt,Zt=Mt.d?Mt.d.length:0,ri={};for(Gt=0;Gt<Zt;Gt+=1)Nt(Gt),St.d.dataProps[Gt].p.setGroupProperty(Ft);function li(hi){return hi==="Color"||hi==="color"?li.color:hi==="Opacity"||hi==="opacity"?li.opacity:hi==="Stroke Width"||hi==="stroke width"?li.strokeWidth:null}return Object.defineProperties(li,{color:{get:ExpressionPropertyInterface(St.c)},opacity:{get:ExpressionPropertyInterface(St.o)},strokeWidth:{get:ExpressionPropertyInterface(St.w)},dash:{get:function(){return ri}},_name:{value:Mt.nm},mn:{value:Mt.mn}}),St.c.setGroupProperty(PropertyInterface("Color",kt)),St.o.setGroupProperty(PropertyInterface("Opacity",kt)),St.w.setGroupProperty(PropertyInterface("Stroke Width",kt)),li}function je(Mt,St,Ut){function kt(Nt){return Nt===Mt.e.ix||Nt==="End"||Nt==="end"?kt.end:Nt===Mt.s.ix?kt.start:Nt===Mt.o.ix?kt.offset:null}var Ft=propertyGroupFactory(kt,Ut);return kt.propertyIndex=Mt.ix,St.s.setGroupProperty(PropertyInterface("Start",Ft)),St.e.setGroupProperty(PropertyInterface("End",Ft)),St.o.setGroupProperty(PropertyInterface("Offset",Ft)),kt.propertyIndex=Mt.ix,kt.propertyGroup=Ut,Object.defineProperties(kt,{start:{get:ExpressionPropertyInterface(St.s)},end:{get:ExpressionPropertyInterface(St.e)},offset:{get:ExpressionPropertyInterface(St.o)},_name:{value:Mt.nm}}),kt.mn=Mt.mn,kt}function Xe(Mt,St,Ut){function kt(Nt){return Mt.a.ix===Nt||Nt==="Anchor Point"?kt.anchorPoint:Mt.o.ix===Nt||Nt==="Opacity"?kt.opacity:Mt.p.ix===Nt||Nt==="Position"?kt.position:Mt.r.ix===Nt||Nt==="Rotation"||Nt==="ADBE Vector Rotation"?kt.rotation:Mt.s.ix===Nt||Nt==="Scale"?kt.scale:Mt.sk&&Mt.sk.ix===Nt||Nt==="Skew"?kt.skew:Mt.sa&&Mt.sa.ix===Nt||Nt==="Skew Axis"?kt.skewAxis:null}var Ft=propertyGroupFactory(kt,Ut);return St.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ft)),St.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ft)),St.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ft)),St.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ft)),St.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ft)),St.transform.mProps.sk&&(St.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ft)),St.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ft))),St.transform.op.setGroupProperty(PropertyInterface("Opacity",Ft)),Object.defineProperties(kt,{opacity:{get:ExpressionPropertyInterface(St.transform.mProps.o)},position:{get:ExpressionPropertyInterface(St.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(St.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(St.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(St.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(St.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(St.transform.mProps.sa)},_name:{value:Mt.nm}}),kt.ty="tr",kt.mn=Mt.mn,kt.propertyGroup=Ut,kt}function Ye(Mt,St,Ut){function kt(Gt){return Mt.p.ix===Gt?kt.position:Mt.s.ix===Gt?kt.size:null}var Ft=propertyGroupFactory(kt,Ut);kt.propertyIndex=Mt.ix;var Nt=St.sh.ty==="tm"?St.sh.prop:St.sh;return Nt.s.setGroupProperty(PropertyInterface("Size",Ft)),Nt.p.setGroupProperty(PropertyInterface("Position",Ft)),Object.defineProperties(kt,{size:{get:ExpressionPropertyInterface(Nt.s)},position:{get:ExpressionPropertyInterface(Nt.p)},_name:{value:Mt.nm}}),kt.mn=Mt.mn,kt}function et(Mt,St,Ut){function kt(Gt){return Mt.p.ix===Gt?kt.position:Mt.r.ix===Gt?kt.rotation:Mt.pt.ix===Gt?kt.points:Mt.or.ix===Gt||Gt==="ADBE Vector Star Outer Radius"?kt.outerRadius:Mt.os.ix===Gt?kt.outerRoundness:Mt.ir&&(Mt.ir.ix===Gt||Gt==="ADBE Vector Star Inner Radius")?kt.innerRadius:Mt.is&&Mt.is.ix===Gt?kt.innerRoundness:null}var Ft=propertyGroupFactory(kt,Ut),Nt=St.sh.ty==="tm"?St.sh.prop:St.sh;return kt.propertyIndex=Mt.ix,Nt.or.setGroupProperty(PropertyInterface("Outer Radius",Ft)),Nt.os.setGroupProperty(PropertyInterface("Outer Roundness",Ft)),Nt.pt.setGroupProperty(PropertyInterface("Points",Ft)),Nt.p.setGroupProperty(PropertyInterface("Position",Ft)),Nt.r.setGroupProperty(PropertyInterface("Rotation",Ft)),Mt.ir&&(Nt.ir.setGroupProperty(PropertyInterface("Inner Radius",Ft)),Nt.is.setGroupProperty(PropertyInterface("Inner Roundness",Ft))),Object.defineProperties(kt,{position:{get:ExpressionPropertyInterface(Nt.p)},rotation:{get:ExpressionPropertyInterface(Nt.r)},points:{get:ExpressionPropertyInterface(Nt.pt)},outerRadius:{get:ExpressionPropertyInterface(Nt.or)},outerRoundness:{get:ExpressionPropertyInterface(Nt.os)},innerRadius:{get:ExpressionPropertyInterface(Nt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Nt.is)},_name:{value:Mt.nm}}),kt.mn=Mt.mn,kt}function ht(Mt,St,Ut){function kt(Gt){return Mt.p.ix===Gt?kt.position:Mt.r.ix===Gt?kt.roundness:Mt.s.ix===Gt||Gt==="Size"||Gt==="ADBE Vector Rect Size"?kt.size:null}var Ft=propertyGroupFactory(kt,Ut),Nt=St.sh.ty==="tm"?St.sh.prop:St.sh;return kt.propertyIndex=Mt.ix,Nt.p.setGroupProperty(PropertyInterface("Position",Ft)),Nt.s.setGroupProperty(PropertyInterface("Size",Ft)),Nt.r.setGroupProperty(PropertyInterface("Rotation",Ft)),Object.defineProperties(kt,{position:{get:ExpressionPropertyInterface(Nt.p)},roundness:{get:ExpressionPropertyInterface(Nt.r)},size:{get:ExpressionPropertyInterface(Nt.s)},_name:{value:Mt.nm}}),kt.mn=Mt.mn,kt}function Dt(Mt,St,Ut){function kt(Gt){return Mt.r.ix===Gt||Gt==="Round Corners 1"?kt.radius:null}var Ft=propertyGroupFactory(kt,Ut),Nt=St;return kt.propertyIndex=Mt.ix,Nt.rd.setGroupProperty(PropertyInterface("Radius",Ft)),Object.defineProperties(kt,{radius:{get:ExpressionPropertyInterface(Nt.rd)},_name:{value:Mt.nm}}),kt.mn=Mt.mn,kt}function Ot(Mt,St,Ut){function kt(Gt){return Mt.c.ix===Gt||Gt==="Copies"?kt.copies:Mt.o.ix===Gt||Gt==="Offset"?kt.offset:null}var Ft=propertyGroupFactory(kt,Ut),Nt=St;return kt.propertyIndex=Mt.ix,Nt.c.setGroupProperty(PropertyInterface("Copies",Ft)),Nt.o.setGroupProperty(PropertyInterface("Offset",Ft)),Object.defineProperties(kt,{copies:{get:ExpressionPropertyInterface(Nt.c)},offset:{get:ExpressionPropertyInterface(Nt.o)},_name:{value:Mt.nm}}),kt.mn=Mt.mn,kt}return function(Mt,St,Ut){var kt;function Ft(Gt){if(typeof Gt=="number")return Gt=Gt===void 0?1:Gt,Gt===0?Ut:kt[Gt-1];for(var Zt=0,ri=kt.length;Zt<ri;){if(kt[Zt]._name===Gt)return kt[Zt];Zt+=1}return null}function Nt(){return Ut}return Ft.propertyGroup=propertyGroupFactory(Ft,Nt),kt=E(Mt,St,Ft.propertyGroup),Ft.numProperties=kt.length,Ft._name="Contents",Ft}}(),TextExpressionInterface=function(){return function(E){var S;function x(C){switch(C){case"ADBE Text Document":return x.sourceText;default:return null}}return Object.defineProperty(x,"sourceText",{get:function(){E.textProperty.getValue();var R=E.textProperty.currentData.t;return(!S||R!==S.value)&&(S=new String(R),S.value=R||new String(R),Object.defineProperty(S,"style",{get:function(){return{fillColor:E.textProperty.currentData.fc}}})),S}}),x}}();function _typeof(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(x){return typeof x}:_typeof=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},_typeof(E)}var FootageInterface=function(){var E=function(C){var R="",Ce=C.getFootageData();function Ue(){return R="",Ce=C.getFootageData(),je}function je(Xe){if(Ce[Xe])return R=Xe,Ce=Ce[Xe],_typeof(Ce)==="object"?je:Ce;var Ye=Xe.indexOf(R);if(Ye!==-1){var et=parseInt(Xe.substr(Ye+R.length),10);return Ce=Ce[et],_typeof(Ce)==="object"?je:Ce}return""}return Ue},S=function(C){function R(Ce){return Ce==="Outline"?R.outlineInterface():null}return R._name="Outline",R.outlineInterface=E(C),R};return function(x){function C(R){return R==="Data"?C.dataInterface:null}return C._name="Data",C.dataInterface=S(x),C}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(E){return interfaces[E]||null}var expressionHelpers=function(){function E(Ue,je,Xe){je.x&&(Xe.k=!0,Xe.x=!0,Xe.initiateExpression=ExpressionManager.initiateExpression,Xe.effectsSequence.push(Xe.initiateExpression(Ue,je,Xe).bind(Xe)))}function S(Ue){return Ue*=this.elem.globalData.frameRate,Ue-=this.offsetTime,Ue!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<Ue?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(Ue,this._cachingAtTime),this._cachingAtTime.lastFrame=Ue),this._cachingAtTime.value}function x(Ue){var je=-.01,Xe=this.getValueAtTime(Ue),Ye=this.getValueAtTime(Ue+je),et=0;if(Xe.length){var ht;for(ht=0;ht<Xe.length;ht+=1)et+=Math.pow(Ye[ht]-Xe[ht],2);et=Math.sqrt(et)*100}else et=0;return et}function C(Ue){if(this.vel!==void 0)return this.vel;var je=-.001,Xe=this.getValueAtTime(Ue),Ye=this.getValueAtTime(Ue+je),et;if(Xe.length){et=createTypedArray("float32",Xe.length);var ht;for(ht=0;ht<Xe.length;ht+=1)et[ht]=(Ye[ht]-Xe[ht])/je}else et=(Ye-Xe)/je;return et}function R(){return this.pv}function Ce(Ue){this.propertyGroup=Ue}return{searchExpressions:E,getSpeedAtTime:x,getVelocityAtTime:C,getValueAtTime:S,getStaticValueAtTime:R,setGroupProperty:Ce}}();function addPropertyDecorator(){function E(Dt,Ot,Mt){if(!this.k||!this.keyframes)return this.pv;Dt=Dt?Dt.toLowerCase():"";var St=this.comp.renderedFrame,Ut=this.keyframes,kt=Ut[Ut.length-1].t;if(St<=kt)return this.pv;var Ft,Nt;Mt?(Ot?Ft=Math.abs(kt-this.elem.comp.globalData.frameRate*Ot):Ft=Math.max(0,kt-this.elem.data.ip),Nt=kt-Ft):((!Ot||Ot>Ut.length-1)&&(Ot=Ut.length-1),Nt=Ut[Ut.length-1-Ot].t,Ft=kt-Nt);var Gt,Zt,ri;if(Dt==="pingpong"){var li=Math.floor((St-Nt)/Ft);if(li%2!==0)return this.getValueAtTime((Ft-(St-Nt)%Ft+Nt)/this.comp.globalData.frameRate,0)}else if(Dt==="offset"){var hi=this.getValueAtTime(Nt/this.comp.globalData.frameRate,0),xi=this.getValueAtTime(kt/this.comp.globalData.frameRate,0),$i=this.getValueAtTime(((St-Nt)%Ft+Nt)/this.comp.globalData.frameRate,0),Mi=Math.floor((St-Nt)/Ft);if(this.pv.length){for(ri=new Array(hi.length),Zt=ri.length,Gt=0;Gt<Zt;Gt+=1)ri[Gt]=(xi[Gt]-hi[Gt])*Mi+$i[Gt];return ri}return(xi-hi)*Mi+$i}else if(Dt==="continue"){var Di=this.getValueAtTime(kt/this.comp.globalData.frameRate,0),ki=this.getValueAtTime((kt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ri=new Array(Di.length),Zt=ri.length,Gt=0;Gt<Zt;Gt+=1)ri[Gt]=Di[Gt]+(Di[Gt]-ki[Gt])*((St-kt)/this.comp.globalData.frameRate)/5e-4;return ri}return Di+(Di-ki)*((St-kt)/.001)}return this.getValueAtTime(((St-Nt)%Ft+Nt)/this.comp.globalData.frameRate,0)}function S(Dt,Ot,Mt){if(!this.k)return this.pv;Dt=Dt?Dt.toLowerCase():"";var St=this.comp.renderedFrame,Ut=this.keyframes,kt=Ut[0].t;if(St>=kt)return this.pv;var Ft,Nt;Mt?(Ot?Ft=Math.abs(this.elem.comp.globalData.frameRate*Ot):Ft=Math.max(0,this.elem.data.op-kt),Nt=kt+Ft):((!Ot||Ot>Ut.length-1)&&(Ot=Ut.length-1),Nt=Ut[Ot].t,Ft=Nt-kt);var Gt,Zt,ri;if(Dt==="pingpong"){var li=Math.floor((kt-St)/Ft);if(li%2===0)return this.getValueAtTime(((kt-St)%Ft+kt)/this.comp.globalData.frameRate,0)}else if(Dt==="offset"){var hi=this.getValueAtTime(kt/this.comp.globalData.frameRate,0),xi=this.getValueAtTime(Nt/this.comp.globalData.frameRate,0),$i=this.getValueAtTime((Ft-(kt-St)%Ft+kt)/this.comp.globalData.frameRate,0),Mi=Math.floor((kt-St)/Ft)+1;if(this.pv.length){for(ri=new Array(hi.length),Zt=ri.length,Gt=0;Gt<Zt;Gt+=1)ri[Gt]=$i[Gt]-(xi[Gt]-hi[Gt])*Mi;return ri}return $i-(xi-hi)*Mi}else if(Dt==="continue"){var Di=this.getValueAtTime(kt/this.comp.globalData.frameRate,0),ki=this.getValueAtTime((kt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ri=new Array(Di.length),Zt=ri.length,Gt=0;Gt<Zt;Gt+=1)ri[Gt]=Di[Gt]+(Di[Gt]-ki[Gt])*(kt-St)/.001;return ri}return Di+(Di-ki)*(kt-St)/.001}return this.getValueAtTime((Ft-((kt-St)%Ft+kt))/this.comp.globalData.frameRate,0)}function x(Dt,Ot){if(!this.k)return this.pv;if(Dt=(Dt||.4)*.5,Ot=Math.floor(Ot||5),Ot<=1)return this.pv;var Mt=this.comp.renderedFrame/this.comp.globalData.frameRate,St=Mt-Dt,Ut=Mt+Dt,kt=Ot>1?(Ut-St)/(Ot-1):1,Ft=0,Nt=0,Gt;this.pv.length?Gt=createTypedArray("float32",this.pv.length):Gt=0;for(var Zt;Ft<Ot;){if(Zt=this.getValueAtTime(St+Ft*kt),this.pv.length)for(Nt=0;Nt<this.pv.length;Nt+=1)Gt[Nt]+=Zt[Nt];else Gt+=Zt;Ft+=1}if(this.pv.length)for(Nt=0;Nt<this.pv.length;Nt+=1)Gt[Nt]/=Ot;else Gt/=Ot;return Gt}function C(Dt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Ot=this._transformCachingAtTime.v;if(Ot.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Mt=this.a.getValueAtTime(Dt);Ot.translate(-Mt[0]*this.a.mult,-Mt[1]*this.a.mult,Mt[2]*this.a.mult)}if(this.appliedTransformations<2){var St=this.s.getValueAtTime(Dt);Ot.scale(St[0]*this.s.mult,St[1]*this.s.mult,St[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ut=this.sk.getValueAtTime(Dt),kt=this.sa.getValueAtTime(Dt);Ot.skewFromAxis(-Ut*this.sk.mult,kt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ft=this.r.getValueAtTime(Dt);Ot.rotate(-Ft*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Nt=this.rz.getValueAtTime(Dt),Gt=this.ry.getValueAtTime(Dt),Zt=this.rx.getValueAtTime(Dt),ri=this.or.getValueAtTime(Dt);Ot.rotateZ(-Nt*this.rz.mult).rotateY(Gt*this.ry.mult).rotateX(Zt*this.rx.mult).rotateZ(-ri[2]*this.or.mult).rotateY(ri[1]*this.or.mult).rotateX(ri[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var li=this.px.getValueAtTime(Dt),hi=this.py.getValueAtTime(Dt);if(this.data.p.z){var xi=this.pz.getValueAtTime(Dt);Ot.translate(li*this.px.mult,hi*this.py.mult,-xi*this.pz.mult)}else Ot.translate(li*this.px.mult,hi*this.py.mult,0)}else{var $i=this.p.getValueAtTime(Dt);Ot.translate($i[0]*this.p.mult,$i[1]*this.p.mult,-$i[2]*this.p.mult)}return Ot}function R(){return this.v.clone(new Matrix)}var Ce=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(Dt,Ot,Mt){var St=Ce(Dt,Ot,Mt);return St.dynamicProperties.length?St.getValueAtTime=C.bind(St):St.getValueAtTime=R.bind(St),St.setGroupProperty=expressionHelpers.setGroupProperty,St};var Ue=PropertyFactory.getProp;PropertyFactory.getProp=function(Dt,Ot,Mt,St,Ut){var kt=Ue(Dt,Ot,Mt,St,Ut);kt.kf?kt.getValueAtTime=expressionHelpers.getValueAtTime.bind(kt):kt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(kt),kt.setGroupProperty=expressionHelpers.setGroupProperty,kt.loopOut=E,kt.loopIn=S,kt.smooth=x,kt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(kt),kt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(kt),kt.numKeys=Ot.a===1?Ot.k.length:0,kt.propertyIndex=Ot.ix;var Ft=0;return Mt!==0&&(Ft=createTypedArray("float32",Ot.a===1?Ot.k[0].s.length:Ot.k.length)),kt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ft},expressionHelpers.searchExpressions(Dt,Ot,kt),kt.k&&Ut.addDynamicProperty(kt),kt};function je(Dt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),Dt*=this.elem.globalData.frameRate,Dt-=this.offsetTime,Dt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<Dt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=Dt,this.interpolateShape(Dt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var Xe=ShapePropertyFactory.getConstructorFunction(),Ye=ShapePropertyFactory.getKeyframedConstructorFunction();function et(){}et.prototype={vertices:function(Ot,Mt){this.k&&this.getValue();var St=this.v;Mt!==void 0&&(St=this.getValueAtTime(Mt,0));var Ut,kt=St._length,Ft=St[Ot],Nt=St.v,Gt=createSizedArray(kt);for(Ut=0;Ut<kt;Ut+=1)Ot==="i"||Ot==="o"?Gt[Ut]=[Ft[Ut][0]-Nt[Ut][0],Ft[Ut][1]-Nt[Ut][1]]:Gt[Ut]=[Ft[Ut][0],Ft[Ut][1]];return Gt},points:function(Ot){return this.vertices("v",Ot)},inTangents:function(Ot){return this.vertices("i",Ot)},outTangents:function(Ot){return this.vertices("o",Ot)},isClosed:function(){return this.v.c},pointOnPath:function(Ot,Mt){var St=this.v;Mt!==void 0&&(St=this.getValueAtTime(Mt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(St));for(var Ut=this._segmentsLength,kt=Ut.lengths,Ft=Ut.totalLength*Ot,Nt=0,Gt=kt.length,Zt=0,ri;Nt<Gt;){if(Zt+kt[Nt].addedLength>Ft){var li=Nt,hi=St.c&&Nt===Gt-1?0:Nt+1,xi=(Ft-Zt)/kt[Nt].addedLength;ri=bez.getPointInSegment(St.v[li],St.v[hi],St.o[li],St.i[hi],xi,kt[Nt]);break}else Zt+=kt[Nt].addedLength;Nt+=1}return ri||(ri=St.c?[St.v[0][0],St.v[0][1]]:[St.v[St._length-1][0],St.v[St._length-1][1]]),ri},vectorOnPath:function(Ot,Mt,St){Ot==1?Ot=this.v.c:Ot==0&&(Ot=.999);var Ut=this.pointOnPath(Ot,Mt),kt=this.pointOnPath(Ot+.001,Mt),Ft=kt[0]-Ut[0],Nt=kt[1]-Ut[1],Gt=Math.sqrt(Math.pow(Ft,2)+Math.pow(Nt,2));if(Gt===0)return[0,0];var Zt=St==="tangent"?[Ft/Gt,Nt/Gt]:[-Nt/Gt,Ft/Gt];return Zt},tangentOnPath:function(Ot,Mt){return this.vectorOnPath(Ot,Mt,"tangent")},normalOnPath:function(Ot,Mt){return this.vectorOnPath(Ot,Mt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([et],Xe),extendPrototype([et],Ye),Ye.prototype.getValueAtTime=je,Ye.prototype.initiateExpression=ExpressionManager.initiateExpression;var ht=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(Dt,Ot,Mt,St,Ut){var kt=ht(Dt,Ot,Mt,St,Ut);return kt.propertyIndex=Ot.ix,kt.lock=!1,Mt===3?expressionHelpers.searchExpressions(Dt,Ot.pt,kt):Mt===4&&expressionHelpers.searchExpressions(Dt,Ot.ks,kt),kt.k&&Dt.addDynamicProperty(kt),kt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function E(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(S,x){var C=this.calculateExpression(x);if(S.t!==C){var R={};return this.copyData(R,S),R.t=C.toString(),R.__complete=!1,R}return S},TextProperty.prototype.searchProperty=function(){var S=this.searchKeyframes(),x=this.searchExpressions();return this.kf=S||x,this.kf},TextProperty.prototype.searchExpressions=E}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function E(S,x){var C=createNS("feMerge");C.setAttribute("result",S);var R,Ce;for(Ce=0;Ce<x.length;Ce+=1)R=createNS("feMergeNode"),R.setAttribute("in",x[Ce]),C.appendChild(R),C.appendChild(R);return C}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(E,S,x,C,R){this.filterManager=S;var Ce=createNS("feColorMatrix");Ce.setAttribute("type","matrix"),Ce.setAttribute("color-interpolation-filters","linearRGB"),Ce.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=Ce,Ce.setAttribute("result",C+"_tint_1"),E.appendChild(Ce),Ce=createNS("feColorMatrix"),Ce.setAttribute("type","matrix"),Ce.setAttribute("color-interpolation-filters","sRGB"),Ce.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Ce.setAttribute("result",C+"_tint_2"),E.appendChild(Ce),this.matrixFilter=Ce;var Ue=this.createMergeNode(C,[R,C+"_tint_1",C+"_tint_2"]);E.appendChild(Ue)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(E){if(E||this.filterManager._mdf){var S=this.filterManager.effectElements[0].p.v,x=this.filterManager.effectElements[1].p.v,C=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+C+" 0"),this.matrixFilter.setAttribute("values",x[0]-S[0]+" 0 0 0 "+S[0]+" "+(x[1]-S[1])+" 0 0 0 "+S[1]+" "+(x[2]-S[2])+" 0 0 0 "+S[2]+" 0 0 0 1 0")}};function SVGFillFilter(E,S,x,C){this.filterManager=S;var R=createNS("feColorMatrix");R.setAttribute("type","matrix"),R.setAttribute("color-interpolation-filters","sRGB"),R.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),R.setAttribute("result",C),E.appendChild(R),this.matrixFilter=R}SVGFillFilter.prototype.renderFrame=function(E){if(E||this.filterManager._mdf){var S=this.filterManager.effectElements[2].p.v,x=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+S[0]+" 0 0 0 0 "+S[1]+" 0 0 0 0 "+S[2]+" 0 0 0 "+x+" 0")}};function SVGStrokeEffect(E,S,x){this.initialized=!1,this.filterManager=S,this.elem=x,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var E=this.elem.layerElement.children||this.elem.layerElement.childNodes,S,x,C,R;for(this.filterManager.effectElements[1].p.v===1?(R=this.elem.maskManager.masksProperties.length,C=0):(C=this.filterManager.effectElements[0].p.v-1,R=C+1),x=createNS("g"),x.setAttribute("fill","none"),x.setAttribute("stroke-linecap","round"),x.setAttribute("stroke-dashoffset",1),C;C<R;C+=1)S=createNS("path"),x.appendChild(S),this.paths.push({p:S,m:C});if(this.filterManager.effectElements[10].p.v===3){var Ce=createNS("mask"),Ue=createElementID();Ce.setAttribute("id",Ue),Ce.setAttribute("mask-type","alpha"),Ce.appendChild(x),this.elem.globalData.defs.appendChild(Ce);var je=createNS("g");for(je.setAttribute("mask","url("+getLocationHref()+"#"+Ue+")");E[0];)je.appendChild(E[0]);this.elem.layerElement.appendChild(je),this.masker=Ce,x.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(E=this.elem.layerElement.children||this.elem.layerElement.childNodes;E.length;)this.elem.layerElement.removeChild(E[0]);this.elem.layerElement.appendChild(x),this.elem.layerElement.removeAttribute("mask"),x.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=x},SVGStrokeEffect.prototype.renderFrame=function(E){this.initialized||this.initialize();var S,x=this.paths.length,C,R;for(S=0;S<x;S+=1)if(this.paths[S].m!==-1&&(C=this.elem.maskManager.viewData[this.paths[S].m],R=this.paths[S].p,(E||this.filterManager._mdf||C.prop._mdf)&&R.setAttribute("d",C.lastPath),E||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||C.prop._mdf)){var Ce;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var Ue=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,je=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Xe=R.getTotalLength();Ce="0 0 0 "+Xe*Ue+" ";var Ye=Xe*(je-Ue),et=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,ht=Math.floor(Ye/et),Dt;for(Dt=0;Dt<ht;Dt+=1)Ce+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";Ce+="0 "+Xe*10+" 0 0"}else Ce="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;R.setAttribute("stroke-dasharray",Ce)}if((E||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(E||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(E||this.filterManager.effectElements[3].p._mdf)){var Ot=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Ot[0]*255)+","+bmFloor(Ot[1]*255)+","+bmFloor(Ot[2]*255)+")")}};function SVGTritoneFilter(E,S,x,C){this.filterManager=S;var R=createNS("feColorMatrix");R.setAttribute("type","matrix"),R.setAttribute("color-interpolation-filters","linearRGB"),R.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),E.appendChild(R);var Ce=createNS("feComponentTransfer");Ce.setAttribute("color-interpolation-filters","sRGB"),Ce.setAttribute("result",C),this.matrixFilter=Ce;var Ue=createNS("feFuncR");Ue.setAttribute("type","table"),Ce.appendChild(Ue),this.feFuncR=Ue;var je=createNS("feFuncG");je.setAttribute("type","table"),Ce.appendChild(je),this.feFuncG=je;var Xe=createNS("feFuncB");Xe.setAttribute("type","table"),Ce.appendChild(Xe),this.feFuncB=Xe,E.appendChild(Ce)}SVGTritoneFilter.prototype.renderFrame=function(E){if(E||this.filterManager._mdf){var S=this.filterManager.effectElements[0].p.v,x=this.filterManager.effectElements[1].p.v,C=this.filterManager.effectElements[2].p.v,R=C[0]+" "+x[0]+" "+S[0],Ce=C[1]+" "+x[1]+" "+S[1],Ue=C[2]+" "+x[2]+" "+S[2];this.feFuncR.setAttribute("tableValues",R),this.feFuncG.setAttribute("tableValues",Ce),this.feFuncB.setAttribute("tableValues",Ue)}};function SVGProLevelsFilter(E,S,x,C){this.filterManager=S;var R=this.filterManager.effectElements,Ce=createNS("feComponentTransfer");(R[10].p.k||R[10].p.v!==0||R[11].p.k||R[11].p.v!==1||R[12].p.k||R[12].p.v!==1||R[13].p.k||R[13].p.v!==0||R[14].p.k||R[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",Ce)),(R[17].p.k||R[17].p.v!==0||R[18].p.k||R[18].p.v!==1||R[19].p.k||R[19].p.v!==1||R[20].p.k||R[20].p.v!==0||R[21].p.k||R[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",Ce)),(R[24].p.k||R[24].p.v!==0||R[25].p.k||R[25].p.v!==1||R[26].p.k||R[26].p.v!==1||R[27].p.k||R[27].p.v!==0||R[28].p.k||R[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",Ce)),(R[31].p.k||R[31].p.v!==0||R[32].p.k||R[32].p.v!==1||R[33].p.k||R[33].p.v!==1||R[34].p.k||R[34].p.v!==0||R[35].p.k||R[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",Ce)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(Ce.setAttribute("color-interpolation-filters","sRGB"),E.appendChild(Ce)),(R[3].p.k||R[3].p.v!==0||R[4].p.k||R[4].p.v!==1||R[5].p.k||R[5].p.v!==1||R[6].p.k||R[6].p.v!==0||R[7].p.k||R[7].p.v!==1)&&(Ce=createNS("feComponentTransfer"),Ce.setAttribute("color-interpolation-filters","sRGB"),Ce.setAttribute("result",C),E.appendChild(Ce),this.feFuncRComposed=this.createFeFunc("feFuncR",Ce),this.feFuncGComposed=this.createFeFunc("feFuncG",Ce),this.feFuncBComposed=this.createFeFunc("feFuncB",Ce))}SVGProLevelsFilter.prototype.createFeFunc=function(E,S){var x=createNS(E);return x.setAttribute("type","table"),S.appendChild(x),x},SVGProLevelsFilter.prototype.getTableValue=function(E,S,x,C,R){for(var Ce=0,Ue=256,je,Xe=Math.min(E,S),Ye=Math.max(E,S),et=Array.call(null,{length:Ue}),ht,Dt=0,Ot=R-C,Mt=S-E;Ce<=256;)je=Ce/256,je<=Xe?ht=Mt<0?R:C:je>=Ye?ht=Mt<0?C:R:ht=C+Ot*Math.pow((je-E)/Mt,1/x),et[Dt]=ht,Dt+=1,Ce+=256/(Ue-1);return et.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(E){if(E||this.filterManager._mdf){var S,x=this.filterManager.effectElements;this.feFuncRComposed&&(E||x[3].p._mdf||x[4].p._mdf||x[5].p._mdf||x[6].p._mdf||x[7].p._mdf)&&(S=this.getTableValue(x[3].p.v,x[4].p.v,x[5].p.v,x[6].p.v,x[7].p.v),this.feFuncRComposed.setAttribute("tableValues",S),this.feFuncGComposed.setAttribute("tableValues",S),this.feFuncBComposed.setAttribute("tableValues",S)),this.feFuncR&&(E||x[10].p._mdf||x[11].p._mdf||x[12].p._mdf||x[13].p._mdf||x[14].p._mdf)&&(S=this.getTableValue(x[10].p.v,x[11].p.v,x[12].p.v,x[13].p.v,x[14].p.v),this.feFuncR.setAttribute("tableValues",S)),this.feFuncG&&(E||x[17].p._mdf||x[18].p._mdf||x[19].p._mdf||x[20].p._mdf||x[21].p._mdf)&&(S=this.getTableValue(x[17].p.v,x[18].p.v,x[19].p.v,x[20].p.v,x[21].p.v),this.feFuncG.setAttribute("tableValues",S)),this.feFuncB&&(E||x[24].p._mdf||x[25].p._mdf||x[26].p._mdf||x[27].p._mdf||x[28].p._mdf)&&(S=this.getTableValue(x[24].p.v,x[25].p.v,x[26].p.v,x[27].p.v,x[28].p.v),this.feFuncB.setAttribute("tableValues",S)),this.feFuncA&&(E||x[31].p._mdf||x[32].p._mdf||x[33].p._mdf||x[34].p._mdf||x[35].p._mdf)&&(S=this.getTableValue(x[31].p.v,x[32].p.v,x[33].p.v,x[34].p.v,x[35].p.v),this.feFuncA.setAttribute("tableValues",S))}};function SVGDropShadowEffect(E,S,x,C,R){var Ce=S.container.globalData.renderConfig.filterSize,Ue=S.data.fs||Ce;E.setAttribute("x",Ue.x||Ce.x),E.setAttribute("y",Ue.y||Ce.y),E.setAttribute("width",Ue.width||Ce.width),E.setAttribute("height",Ue.height||Ce.height),this.filterManager=S;var je=createNS("feGaussianBlur");je.setAttribute("in","SourceAlpha"),je.setAttribute("result",C+"_drop_shadow_1"),je.setAttribute("stdDeviation","0"),this.feGaussianBlur=je,E.appendChild(je);var Xe=createNS("feOffset");Xe.setAttribute("dx","25"),Xe.setAttribute("dy","0"),Xe.setAttribute("in",C+"_drop_shadow_1"),Xe.setAttribute("result",C+"_drop_shadow_2"),this.feOffset=Xe,E.appendChild(Xe);var Ye=createNS("feFlood");Ye.setAttribute("flood-color","#00ff00"),Ye.setAttribute("flood-opacity","1"),Ye.setAttribute("result",C+"_drop_shadow_3"),this.feFlood=Ye,E.appendChild(Ye);var et=createNS("feComposite");et.setAttribute("in",C+"_drop_shadow_3"),et.setAttribute("in2",C+"_drop_shadow_2"),et.setAttribute("operator","in"),et.setAttribute("result",C+"_drop_shadow_4"),E.appendChild(et);var ht=this.createMergeNode(C,[C+"_drop_shadow_4",R]);E.appendChild(ht)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(E){if(E||this.filterManager._mdf){if((E||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),E||this.filterManager.effectElements[0].p._mdf){var S=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(S[0]*255),Math.round(S[1]*255),Math.round(S[2]*255)))}if((E||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),E||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var x=this.filterManager.effectElements[3].p.v,C=(this.filterManager.effectElements[2].p.v-90)*degToRads,R=x*Math.cos(C),Ce=x*Math.sin(C);this.feOffset.setAttribute("dx",R),this.feOffset.setAttribute("dy",Ce)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(E,S,x){this.initialized=!1,this.filterManager=S,this.filterElem=E,this.elem=x,x.matteElement=createNS("g"),x.matteElement.appendChild(x.layerElement),x.matteElement.appendChild(x.transformedElement),x.baseElement=x.matteElement}SVGMatte3Effect.prototype.findSymbol=function(E){for(var S=0,x=_svgMatteSymbols.length;S<x;){if(_svgMatteSymbols[S]===E)return _svgMatteSymbols[S];S+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(E,S){var x=E.layerElement.parentNode;if(x){for(var C=x.children,R=0,Ce=C.length;R<Ce&&C[R]!==E.layerElement;)R+=1;var Ue;R<=Ce-2&&(Ue=C[R+1]);var je=createNS("use");je.setAttribute("href","#"+S),Ue?x.insertBefore(je,Ue):x.appendChild(je)}},SVGMatte3Effect.prototype.setElementAsMask=function(E,S){if(!this.findSymbol(S)){var x=createElementID(),C=createNS("mask");C.setAttribute("id",S.layerId),C.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(S);var R=E.globalData.defs;R.appendChild(C);var Ce=createNS("symbol");Ce.setAttribute("id",x),this.replaceInParent(S,x),Ce.appendChild(S.layerElement),R.appendChild(Ce);var Ue=createNS("use");Ue.setAttribute("href","#"+x),C.appendChild(Ue),S.data.hd=!1,S.show()}E.setMatte(S.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var E=this.filterManager.effectElements[0].p.v,S=this.elem.comp.elements,x=0,C=S.length;x<C;)S[x]&&S[x].data.ind===E&&this.setElementAsMask(this.elem,S[x]),x+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(E,S,x,C){E.setAttribute("x","-100%"),E.setAttribute("y","-100%"),E.setAttribute("width","300%"),E.setAttribute("height","300%"),this.filterManager=S;var R=createNS("feGaussianBlur");R.setAttribute("result",C),E.appendChild(R),this.feGaussianBlur=R}SVGGaussianBlurEffect.prototype.renderFrame=function(E){if(E||this.filterManager._mdf){var S=.3,x=this.filterManager.effectElements[0].p.v*S,C=this.filterManager.effectElements[1].p.v,R=C==3?0:x,Ce=C==2?0:x;this.feGaussianBlur.setAttribute("stdDeviation",R+" "+Ce);var Ue=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",Ue)}};function TransformEffect(){}TransformEffect.prototype.init=function(E){this.effectsManager=E,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(E){if(this._opMdf=!1,this._mdf=!1,E||this.effectsManager._mdf){var S=this.effectsManager.effectElements,x=S[0].p.v,C=S[1].p.v,R=S[2].p.v===1,Ce=S[3].p.v,Ue=R?Ce:S[4].p.v,je=S[5].p.v,Xe=S[6].p.v,Ye=S[7].p.v;this.matrix.reset(),this.matrix.translate(-x[0],-x[1],x[2]),this.matrix.scale(Ue*.01,Ce*.01,1),this.matrix.rotate(-Ye*degToRads),this.matrix.skewFromAxis(-je*degToRads,(Xe+90)*degToRads),this.matrix.translate(C[0],C[1],0),this._mdf=!0,this.opacity!==S[8].p.v&&(this.opacity=S[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(E,S){this.init(S)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(E){this.init(E)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieExports=lottie.exports;const Lottie=getDefaultExportFromCjs(lottieExports);(function(){try{if(typeof document<"u"){var E=document.createElement("style");E.appendChild(document.createTextNode(".lottie-animation-container{width:var(--lottie-animation-container-width);height:var(--lottie-animation-container-height);background-color:var(--lottie-animation-container-background-color);overflow:hidden;margin:var(--lottie-animation-margin)}.lottie-animation-container svg{transform:scale(var(--lottie-animation-scale))}")),document.head.appendChild(E)}}catch(S){console.error("vite-plugin-css-injected-by-js",S)}})();var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(E,S,x)=>S in E?__defProp(E,S,{enumerable:!0,configurable:!0,writable:!0,value:x}):E[S]=x,__spreadValues=(E,S)=>{for(var x in S||(S={}))__hasOwnProp.call(S,x)&&__defNormalProp(E,x,S[x]);if(__getOwnPropSymbols)for(var x of __getOwnPropSymbols(S))__propIsEnum.call(S,x)&&__defNormalProp(E,x,S[x]);return E},__spreadProps=(E,S)=>__defProps(E,__getOwnPropDescs(S)),es6=function E(S,x){if(S===x)return!0;if(S&&x&&typeof S=="object"&&typeof x=="object"){if(S.constructor!==x.constructor)return!1;var C,R,Ce;if(Array.isArray(S)){if(C=S.length,C!=x.length)return!1;for(R=C;R--!==0;)if(!E(S[R],x[R]))return!1;return!0}if(S instanceof Map&&x instanceof Map){if(S.size!==x.size)return!1;for(R of S.entries())if(!x.has(R[0]))return!1;for(R of S.entries())if(!E(R[1],x.get(R[0])))return!1;return!0}if(S instanceof Set&&x instanceof Set){if(S.size!==x.size)return!1;for(R of S.entries())if(!x.has(R[0]))return!1;return!0}if(ArrayBuffer.isView(S)&&ArrayBuffer.isView(x)){if(C=S.length,C!=x.length)return!1;for(R=C;R--!==0;)if(S[R]!==x[R])return!1;return!0}if(S.constructor===RegExp)return S.source===x.source&&S.flags===x.flags;if(S.valueOf!==Object.prototype.valueOf)return S.valueOf()===x.valueOf();if(S.toString!==Object.prototype.toString)return S.toString()===x.toString();if(Ce=Object.keys(S),C=Ce.length,C!==Object.keys(x).length)return!1;for(R=C;R--!==0;)if(!Object.prototype.hasOwnProperty.call(x,Ce[R]))return!1;for(R=C;R--!==0;){var Ue=Ce[R];if(!E(S[Ue],x[Ue]))return!1}return!0}return S!==S&&x!==x};function klona(E){var S,x,C;if(Array.isArray(E)){for(x=Array(S=E.length);S--;)x[S]=(C=E[S])&&typeof C=="object"?klona(C):C;return x}if(Object.prototype.toString.call(E)==="[object Object]"){x={};for(S in E)S==="__proto__"?Object.defineProperty(x,S,{value:klona(E[S]),configurable:!0,enumerable:!0,writable:!0}):x[S]=(C=E[S])&&typeof C=="object"?klona(C):C;return x}return E}var _export_sfc=(E,S)=>{const x=E.__vccOpts||E;for(const[C,R]of S)x[C]=R;return x};const _sfc_main=defineComponent({props:{animationData:{type:Object,default:()=>({})},animationLink:{type:String,default:""},loop:{type:[Boolean,Number],default:!0},autoPlay:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},speed:{type:Number,default:1},delay:{type:Number,default:0},direction:{type:String,default:"forward"},pauseOnHover:{type:Boolean,default:!1},playOnHover:{type:Boolean,default:!1},backgroundColor:{type:String,default:"transparent"},pauseAnimation:{type:Boolean,default:!1},noMargin:{type:Boolean,default:!1},scale:{type:Number,default:1},renderer:{type:String,default:"svg"},rendererSettings:{type:Object,default:()=>({})},assetsPath:{type:String,default:""}},emits:{onComplete:null,onLoopComplete:null,onEnterFrame:null,onSegmentStart:null,onAnimationLoaded:null},setup(E,{emit:S}){const x=ref();let C,R=null,Ce=1;watchEffect(async()=>{if(x.value){if(E.animationLink!="")try{C=await(await fetch(E.animationLink)).json()}catch(ri){console.error(ri);return}else if(es6(E.animationData,{})===!1)C=klona(E.animationData);else throw new Error("You must provide either animationLink or animationData");Ue()}});const Ue=()=>{if(!x.value||!C)return;R==null||R.destroy(),R=null;let ri=E.autoPlay,li=E.loop;E.playOnHover&&(ri=!1),typeof li=="number"&&li>0&&(li=li-1),E.delay>0&&(ri=!1);const hi={container:x.value,renderer:E.renderer,loop:li,autoplay:ri,animationData:C,assetsPath:E.assetsPath};es6(E.rendererSettings,{})===!1&&(hi.rendererSettings=E.rendererSettings),E.scale!==1&&(hi.rendererSettings=__spreadProps(__spreadValues({},hi.rendererSettings),{viewBoxOnly:!0})),R=Lottie.loadAnimation(hi),setTimeout(()=>{ri=E.autoPlay,E.playOnHover?R==null||R.pause():ri?R==null||R.play():R==null||R.pause(),S("onAnimationLoaded")},E.delay),R.setSpeed(E.speed),E.direction==="reverse"&&R.setDirection(-1),E.direction==="normal"&&R.setDirection(1),(E.pauseAnimation||E.playOnHover)&&R.pause(),R.addEventListener("loopComplete",()=>{E.direction==="alternate"&&(R==null||R.stop(),Ce=Ce===-1?1:-1,R==null||R.setDirection(Ce),R==null||R.play()),S("onLoopComplete")}),R.addEventListener("complete",()=>{S("onComplete")}),R.addEventListener("enterFrame",()=>{S("onEnterFrame")}),R.addEventListener("segmentStart",()=>{S("onSegmentStart")})},je=computed(()=>{let ri=E.width,li=E.height;return typeof E.width=="number"&&(ri=`${E.width}px`),typeof E.height=="number"&&(li=`${E.height}px`),{"--lottie-animation-container-width":ri,"--lottie-animation-container-height":li,"--lottie-animation-container-background-color":E.backgroundColor,"--lottie-animation-margin":E.noMargin?"0":"0 auto","--lottie-animation-scale":E.scale!=1?E.scale:""}}),Xe=()=>{R&&E.pauseOnHover&&R.pause(),R&&E.playOnHover&&R.play()},Ye=()=>{R&&E.pauseOnHover&&R.play(),R&&E.playOnHover&&R.pause()};return watch(()=>E.pauseAnimation,()=>{if((E.pauseOnHover||E.playOnHover)&&E.pauseAnimation){console.error("If you are using pauseAnimation prop for Vue3-Lottie, please remove the props pauseOnHover and playOnHover");return}R&&(E.pauseAnimation?R.pause():R.play())}),{lottieAnimationContainer:x,hoverEnded:Ye,hoverStarted:Xe,getCurrentStyle:je,play:()=>{R&&R.play()},pause:()=>{R&&R.pause()},stop:()=>{R&&R.stop()},destroy:()=>{R&&R.destroy()},setSpeed:(ri=1)=>{if(ri<=0)throw new Error("Speed must be greater than 0");R&&R.setSpeed(ri)},setDirection:ri=>{R&&(ri==="forward"?R.setDirection(1):ri==="reverse"&&R.setDirection(-1))},goToAndStop:(ri,li=!0)=>{R&&R.goToAndStop(ri,li)},goToAndPlay:(ri,li=!0)=>{R&&R.goToAndPlay(ri,li)},playSegments:(ri,li=!1)=>{R&&R.playSegments(ri,li)},setSubFrame:(ri=!0)=>{R&&R.setSubframe(ri)},getDuration:(ri=!0)=>{if(R)return R.getDuration(ri)},updateDocumentData:(ri,li=0)=>{R&&R.renderer.elements[li].updateDocumentData(ri)}}}});function _sfc_render(E,S,x,C,R,Ce){return openBlock(),createElementBlock("div",{ref:"lottieAnimationContainer",class:"lottie-animation-container",style:normalizeStyle(E.getCurrentStyle),onMouseenter:S[0]||(S[0]=(...Ue)=>E.hoverStarted&&E.hoverStarted(...Ue)),onMouseleave:S[1]||(S[1]=(...Ue)=>E.hoverEnded&&E.hoverEnded(...Ue))},null,36)}var Vue3Lottie=_export_sfc(_sfc_main,[["render",_sfc_render]]),index$1={install(E,S){var x;const C=(x=S==null?void 0:S.name)!=null?x:"Vue3Lottie";E.component(C,Vue3Lottie)}};/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(E,S){var x=Object.keys(E);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(E);S&&(C=C.filter(function(R){return Object.getOwnPropertyDescriptor(E,R).enumerable})),x.push.apply(x,C)}return x}function _objectSpread2(E){for(var S=1;S<arguments.length;S++){var x=arguments[S]!=null?arguments[S]:{};S%2?ownKeys(Object(x),!0).forEach(function(C){_defineProperty(E,C,x[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(x)):ownKeys(Object(x)).forEach(function(C){Object.defineProperty(E,C,Object.getOwnPropertyDescriptor(x,C))})}return E}function _typeof(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(S){return typeof S}:_typeof=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof(E)}function _defineProperty(E,S,x){return S in E?Object.defineProperty(E,S,{value:x,enumerable:!0,configurable:!0,writable:!0}):E[S]=x,E}function _extends(){return _extends=Object.assign||function(E){for(var S=1;S<arguments.length;S++){var x=arguments[S];for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(E[C]=x[C])}return E},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(E,S){if(E==null)return{};var x={},C=Object.keys(E),R,Ce;for(Ce=0;Ce<C.length;Ce++)R=C[Ce],!(S.indexOf(R)>=0)&&(x[R]=E[R]);return x}function _objectWithoutProperties(E,S){if(E==null)return{};var x=_objectWithoutPropertiesLoose(E,S),C,R;if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(E);for(R=0;R<Ce.length;R++)C=Ce[R],!(S.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(E,C)&&(x[C]=E[C])}return x}var version="1.14.0";function userAgent(E){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(E)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(E,S,x){E.addEventListener(S,x,!IE11OrLess&&captureMode)}function off(E,S,x){E.removeEventListener(S,x,!IE11OrLess&&captureMode)}function matches(E,S){if(S){if(S[0]===">"&&(S=S.substring(1)),E)try{if(E.matches)return E.matches(S);if(E.msMatchesSelector)return E.msMatchesSelector(S);if(E.webkitMatchesSelector)return E.webkitMatchesSelector(S)}catch{return!1}return!1}}function getParentOrHost(E){return E.host&&E!==document&&E.host.nodeType?E.host:E.parentNode}function closest(E,S,x,C){if(E){x=x||document;do{if(S!=null&&(S[0]===">"?E.parentNode===x&&matches(E,S):matches(E,S))||C&&E===x)return E;if(E===x)break}while(E=getParentOrHost(E))}return null}var R_SPACE=/\s+/g;function toggleClass(E,S,x){if(E&&S)if(E.classList)E.classList[x?"add":"remove"](S);else{var C=(" "+E.className+" ").replace(R_SPACE," ").replace(" "+S+" "," ");E.className=(C+(x?" "+S:"")).replace(R_SPACE," ")}}function css(E,S,x){var C=E&&E.style;if(C){if(x===void 0)return document.defaultView&&document.defaultView.getComputedStyle?x=document.defaultView.getComputedStyle(E,""):E.currentStyle&&(x=E.currentStyle),S===void 0?x:x[S];!(S in C)&&S.indexOf("webkit")===-1&&(S="-webkit-"+S),C[S]=x+(typeof x=="string"?"":"px")}}function matrix(E,S){var x="";if(typeof E=="string")x=E;else do{var C=css(E,"transform");C&&C!=="none"&&(x=C+" "+x)}while(!S&&(E=E.parentNode));var R=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return R&&new R(x)}function find(E,S,x){if(E){var C=E.getElementsByTagName(S),R=0,Ce=C.length;if(x)for(;R<Ce;R++)x(C[R],R);return C}return[]}function getWindowScrollingElement(){var E=document.scrollingElement;return E||document.documentElement}function getRect(E,S,x,C,R){if(!(!E.getBoundingClientRect&&E!==window)){var Ce,Ue,je,Xe,Ye,et,ht;if(E!==window&&E.parentNode&&E!==getWindowScrollingElement()?(Ce=E.getBoundingClientRect(),Ue=Ce.top,je=Ce.left,Xe=Ce.bottom,Ye=Ce.right,et=Ce.height,ht=Ce.width):(Ue=0,je=0,Xe=window.innerHeight,Ye=window.innerWidth,et=window.innerHeight,ht=window.innerWidth),(S||x)&&E!==window&&(R=R||E.parentNode,!IE11OrLess))do if(R&&R.getBoundingClientRect&&(css(R,"transform")!=="none"||x&&css(R,"position")!=="static")){var Dt=R.getBoundingClientRect();Ue-=Dt.top+parseInt(css(R,"border-top-width")),je-=Dt.left+parseInt(css(R,"border-left-width")),Xe=Ue+Ce.height,Ye=je+Ce.width;break}while(R=R.parentNode);if(C&&E!==window){var Ot=matrix(R||E),Mt=Ot&&Ot.a,St=Ot&&Ot.d;Ot&&(Ue/=St,je/=Mt,ht/=Mt,et/=St,Xe=Ue+et,Ye=je+ht)}return{top:Ue,left:je,bottom:Xe,right:Ye,width:ht,height:et}}}function isScrolledPast(E,S,x){for(var C=getParentAutoScrollElement(E,!0),R=getRect(E)[S];C;){var Ce=getRect(C)[x],Ue=void 0;if(Ue=R>=Ce,!Ue)return C;if(C===getWindowScrollingElement())break;C=getParentAutoScrollElement(C,!1)}return!1}function getChild(E,S,x,C){for(var R=0,Ce=0,Ue=E.children;Ce<Ue.length;){if(Ue[Ce].style.display!=="none"&&Ue[Ce]!==Sortable.ghost&&(C||Ue[Ce]!==Sortable.dragged)&&closest(Ue[Ce],x.draggable,E,!1)){if(R===S)return Ue[Ce];R++}Ce++}return null}function lastChild(E,S){for(var x=E.lastElementChild;x&&(x===Sortable.ghost||css(x,"display")==="none"||S&&!matches(x,S));)x=x.previousElementSibling;return x||null}function index(E,S){var x=0;if(!E||!E.parentNode)return-1;for(;E=E.previousElementSibling;)E.nodeName.toUpperCase()!=="TEMPLATE"&&E!==Sortable.clone&&(!S||matches(E,S))&&x++;return x}function getRelativeScrollOffset(E){var S=0,x=0,C=getWindowScrollingElement();if(E)do{var R=matrix(E),Ce=R.a,Ue=R.d;S+=E.scrollLeft*Ce,x+=E.scrollTop*Ue}while(E!==C&&(E=E.parentNode));return[S,x]}function indexOfObject(E,S){for(var x in E)if(E.hasOwnProperty(x)){for(var C in S)if(S.hasOwnProperty(C)&&S[C]===E[x][C])return Number(x)}return-1}function getParentAutoScrollElement(E,S){if(!E||!E.getBoundingClientRect)return getWindowScrollingElement();var x=E,C=!1;do if(x.clientWidth<x.scrollWidth||x.clientHeight<x.scrollHeight){var R=css(x);if(x.clientWidth<x.scrollWidth&&(R.overflowX=="auto"||R.overflowX=="scroll")||x.clientHeight<x.scrollHeight&&(R.overflowY=="auto"||R.overflowY=="scroll")){if(!x.getBoundingClientRect||x===document.body)return getWindowScrollingElement();if(C||S)return x;C=!0}}while(x=x.parentNode);return getWindowScrollingElement()}function extend(E,S){if(E&&S)for(var x in S)S.hasOwnProperty(x)&&(E[x]=S[x]);return E}function isRectEqual(E,S){return Math.round(E.top)===Math.round(S.top)&&Math.round(E.left)===Math.round(S.left)&&Math.round(E.height)===Math.round(S.height)&&Math.round(E.width)===Math.round(S.width)}var _throttleTimeout;function throttle(E,S){return function(){if(!_throttleTimeout){var x=arguments,C=this;x.length===1?E.call(C,x[0]):E.apply(C,x),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},S)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(E,S,x){E.scrollLeft+=S,E.scrollTop+=x}function clone(E){var S=window.Polymer,x=window.jQuery||window.Zepto;return S&&S.dom?S.dom(E).cloneNode(!0):x?x(E).clone(!0)[0]:E.cloneNode(!0)}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var E=[],S;return{captureAnimationState:function(){if(E=[],!!this.options.animation){var C=[].slice.call(this.el.children);C.forEach(function(R){if(!(css(R,"display")==="none"||R===Sortable.ghost)){E.push({target:R,rect:getRect(R)});var Ce=_objectSpread2({},E[E.length-1].rect);if(R.thisAnimationDuration){var Ue=matrix(R,!0);Ue&&(Ce.top-=Ue.f,Ce.left-=Ue.e)}R.fromRect=Ce}})}},addAnimationState:function(C){E.push(C)},removeAnimationState:function(C){E.splice(indexOfObject(E,{target:C}),1)},animateAll:function(C){var R=this;if(!this.options.animation){clearTimeout(S),typeof C=="function"&&C();return}var Ce=!1,Ue=0;E.forEach(function(je){var Xe=0,Ye=je.target,et=Ye.fromRect,ht=getRect(Ye),Dt=Ye.prevFromRect,Ot=Ye.prevToRect,Mt=je.rect,St=matrix(Ye,!0);St&&(ht.top-=St.f,ht.left-=St.e),Ye.toRect=ht,Ye.thisAnimationDuration&&isRectEqual(Dt,ht)&&!isRectEqual(et,ht)&&(Mt.top-ht.top)/(Mt.left-ht.left)===(et.top-ht.top)/(et.left-ht.left)&&(Xe=calculateRealTime(Mt,Dt,Ot,R.options)),isRectEqual(ht,et)||(Ye.prevFromRect=et,Ye.prevToRect=ht,Xe||(Xe=R.options.animation),R.animate(Ye,Mt,ht,Xe)),Xe&&(Ce=!0,Ue=Math.max(Ue,Xe),clearTimeout(Ye.animationResetTimer),Ye.animationResetTimer=setTimeout(function(){Ye.animationTime=0,Ye.prevFromRect=null,Ye.fromRect=null,Ye.prevToRect=null,Ye.thisAnimationDuration=null},Xe),Ye.thisAnimationDuration=Xe)}),clearTimeout(S),Ce?S=setTimeout(function(){typeof C=="function"&&C()},Ue):typeof C=="function"&&C(),E=[]},animate:function(C,R,Ce,Ue){if(Ue){css(C,"transition",""),css(C,"transform","");var je=matrix(this.el),Xe=je&&je.a,Ye=je&&je.d,et=(R.left-Ce.left)/(Xe||1),ht=(R.top-Ce.top)/(Ye||1);C.animatingX=!!et,C.animatingY=!!ht,css(C,"transform","translate3d("+et+"px,"+ht+"px,0)"),this.forRepaintDummy=repaint(C),css(C,"transition","transform "+Ue+"ms"+(this.options.easing?" "+this.options.easing:"")),css(C,"transform","translate3d(0,0,0)"),typeof C.animated=="number"&&clearTimeout(C.animated),C.animated=setTimeout(function(){css(C,"transition",""),css(C,"transform",""),C.animated=!1,C.animatingX=!1,C.animatingY=!1},Ue)}}}}function repaint(E){return E.offsetWidth}function calculateRealTime(E,S,x,C){return Math.sqrt(Math.pow(S.top-E.top,2)+Math.pow(S.left-E.left,2))/Math.sqrt(Math.pow(S.top-x.top,2)+Math.pow(S.left-x.left,2))*C.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function E(S){for(var x in defaults)defaults.hasOwnProperty(x)&&!(x in S)&&(S[x]=defaults[x]);plugins.forEach(function(C){if(C.pluginName===S.pluginName)throw"Sortable: Cannot mount plugin ".concat(S.pluginName," more than once")}),plugins.push(S)},pluginEvent:function E(S,x,C){var R=this;this.eventCanceled=!1,C.cancel=function(){R.eventCanceled=!0};var Ce=S+"Global";plugins.forEach(function(Ue){x[Ue.pluginName]&&(x[Ue.pluginName][Ce]&&x[Ue.pluginName][Ce](_objectSpread2({sortable:x},C)),x.options[Ue.pluginName]&&x[Ue.pluginName][S]&&x[Ue.pluginName][S](_objectSpread2({sortable:x},C)))})},initializePlugins:function E(S,x,C,R){plugins.forEach(function(je){var Xe=je.pluginName;if(!(!S.options[Xe]&&!je.initializeByDefault)){var Ye=new je(S,x,S.options);Ye.sortable=S,Ye.options=S.options,S[Xe]=Ye,_extends(C,Ye.defaults)}});for(var Ce in S.options)if(S.options.hasOwnProperty(Ce)){var Ue=this.modifyOption(S,Ce,S.options[Ce]);typeof Ue<"u"&&(S.options[Ce]=Ue)}},getEventProperties:function E(S,x){var C={};return plugins.forEach(function(R){typeof R.eventProperties=="function"&&_extends(C,R.eventProperties.call(x[R.pluginName],S))}),C},modifyOption:function E(S,x,C){var R;return plugins.forEach(function(Ce){S[Ce.pluginName]&&Ce.optionListeners&&typeof Ce.optionListeners[x]=="function"&&(R=Ce.optionListeners[x].call(S[Ce.pluginName],C))}),R}};function dispatchEvent(E){var S=E.sortable,x=E.rootEl,C=E.name,R=E.targetEl,Ce=E.cloneEl,Ue=E.toEl,je=E.fromEl,Xe=E.oldIndex,Ye=E.newIndex,et=E.oldDraggableIndex,ht=E.newDraggableIndex,Dt=E.originalEvent,Ot=E.putSortable,Mt=E.extraEventProperties;if(S=S||x&&x[expando],!!S){var St,Ut=S.options,kt="on"+C.charAt(0).toUpperCase()+C.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?St=new CustomEvent(C,{bubbles:!0,cancelable:!0}):(St=document.createEvent("Event"),St.initEvent(C,!0,!0)),St.to=Ue||x,St.from=je||x,St.item=R||x,St.clone=Ce,St.oldIndex=Xe,St.newIndex=Ye,St.oldDraggableIndex=et,St.newDraggableIndex=ht,St.originalEvent=Dt,St.pullMode=Ot?Ot.lastPutMode:void 0;var Ft=_objectSpread2(_objectSpread2({},Mt),PluginManager.getEventProperties(C,S));for(var Nt in Ft)St[Nt]=Ft[Nt];x&&x.dispatchEvent(St),Ut[kt]&&Ut[kt].call(S,St)}}var _excluded=["evt"],pluginEvent=function E(S,x){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=C.evt,Ce=_objectWithoutProperties(C,_excluded);PluginManager.pluginEvent.bind(Sortable)(S,x,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:R,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(je){_dispatchEvent({sortable:x,name:je,originalEvent:R})}},Ce))};function _dispatchEvent(E){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},E))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var E=document.createElement("x");return E.style.cssText="pointer-events:auto",E.style.pointerEvents==="auto"}}(),_detectDirection=function E(S,x){var C=css(S),R=parseInt(C.width)-parseInt(C.paddingLeft)-parseInt(C.paddingRight)-parseInt(C.borderLeftWidth)-parseInt(C.borderRightWidth),Ce=getChild(S,0,x),Ue=getChild(S,1,x),je=Ce&&css(Ce),Xe=Ue&&css(Ue),Ye=je&&parseInt(je.marginLeft)+parseInt(je.marginRight)+getRect(Ce).width,et=Xe&&parseInt(Xe.marginLeft)+parseInt(Xe.marginRight)+getRect(Ue).width;if(C.display==="flex")return C.flexDirection==="column"||C.flexDirection==="column-reverse"?"vertical":"horizontal";if(C.display==="grid")return C.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(Ce&&je.float&&je.float!=="none"){var ht=je.float==="left"?"left":"right";return Ue&&(Xe.clear==="both"||Xe.clear===ht)?"vertical":"horizontal"}return Ce&&(je.display==="block"||je.display==="flex"||je.display==="table"||je.display==="grid"||Ye>=R&&C[CSSFloatProperty]==="none"||Ue&&C[CSSFloatProperty]==="none"&&Ye+et>R)?"vertical":"horizontal"},_dragElInRowColumn=function E(S,x,C){var R=C?S.left:S.top,Ce=C?S.right:S.bottom,Ue=C?S.width:S.height,je=C?x.left:x.top,Xe=C?x.right:x.bottom,Ye=C?x.width:x.height;return R===je||Ce===Xe||R+Ue/2===je+Ye/2},_detectNearestEmptySortable=function E(S,x){var C;return sortables.some(function(R){var Ce=R[expando].options.emptyInsertThreshold;if(!(!Ce||lastChild(R))){var Ue=getRect(R),je=S>=Ue.left-Ce&&S<=Ue.right+Ce,Xe=x>=Ue.top-Ce&&x<=Ue.bottom+Ce;if(je&&Xe)return C=R}}),C},_prepareGroup=function E(S){function x(Ce,Ue){return function(je,Xe,Ye,et){var ht=je.options.group.name&&Xe.options.group.name&&je.options.group.name===Xe.options.group.name;if(Ce==null&&(Ue||ht))return!0;if(Ce==null||Ce===!1)return!1;if(Ue&&Ce==="clone")return Ce;if(typeof Ce=="function")return x(Ce(je,Xe,Ye,et),Ue)(je,Xe,Ye,et);var Dt=(Ue?je:Xe).options.group.name;return Ce===!0||typeof Ce=="string"&&Ce===Dt||Ce.join&&Ce.indexOf(Dt)>-1}}var C={},R=S.group;(!R||_typeof(R)!="object")&&(R={name:R}),C.name=R.name,C.checkPull=x(R.pull,!0),C.checkPut=x(R.put),C.revertClone=R.revertClone,S.group=C},_hideGhostForTarget=function E(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function E(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",function(E){if(ignoreNextClick)return E.preventDefault(),E.stopPropagation&&E.stopPropagation(),E.stopImmediatePropagation&&E.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function E(S){if(dragEl){S=S.touches?S.touches[0]:S;var x=_detectNearestEmptySortable(S.clientX,S.clientY);if(x){var C={};for(var R in S)S.hasOwnProperty(R)&&(C[R]=S[R]);C.target=C.rootEl=x,C.preventDefault=void 0,C.stopPropagation=void 0,x[expando]._onDragOver(C)}}},_checkOutsideTargetEl=function E(S){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(S.target)};function Sortable(E,S){if(!(E&&E.nodeType&&E.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(E));this.el=E,this.options=S=_extends({},S),E[expando]=this;var x={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(E.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(E,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Ue,je){Ue.setData("Text",je.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,E,x);for(var C in x)!(C in S)&&(S[C]=x[C]);_prepareGroup(S);for(var R in this)R.charAt(0)==="_"&&typeof this[R]=="function"&&(this[R]=this[R].bind(this));this.nativeDraggable=S.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),S.supportPointer?on(E,"pointerdown",this._onTapStart):(on(E,"mousedown",this._onTapStart),on(E,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(E,"dragover",this),on(E,"dragenter",this)),sortables.push(this.el),S.store&&S.store.get&&this.sort(S.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function E(S){!this.el.contains(S)&&S!==this.el&&(lastTarget=null)},_getDirection:function E(S,x){return typeof this.options.direction=="function"?this.options.direction.call(this,S,x,dragEl):this.options.direction},_onTapStart:function E(S){if(S.cancelable){var x=this,C=this.el,R=this.options,Ce=R.preventOnFilter,Ue=S.type,je=S.touches&&S.touches[0]||S.pointerType&&S.pointerType==="touch"&&S,Xe=(je||S).target,Ye=S.target.shadowRoot&&(S.path&&S.path[0]||S.composedPath&&S.composedPath()[0])||Xe,et=R.filter;if(_saveInputCheckedState(C),!dragEl&&!(/mousedown|pointerdown/.test(Ue)&&S.button!==0||R.disabled)&&!Ye.isContentEditable&&!(!this.nativeDraggable&&Safari&&Xe&&Xe.tagName.toUpperCase()==="SELECT")&&(Xe=closest(Xe,R.draggable,C,!1),!(Xe&&Xe.animated)&&lastDownEl!==Xe)){if(oldIndex=index(Xe),oldDraggableIndex=index(Xe,R.draggable),typeof et=="function"){if(et.call(this,S,Xe,this)){_dispatchEvent({sortable:x,rootEl:Ye,name:"filter",targetEl:Xe,toEl:C,fromEl:C}),pluginEvent("filter",x,{evt:S}),Ce&&S.cancelable&&S.preventDefault();return}}else if(et&&(et=et.split(",").some(function(ht){if(ht=closest(Ye,ht.trim(),C,!1),ht)return _dispatchEvent({sortable:x,rootEl:ht,name:"filter",targetEl:Xe,fromEl:C,toEl:C}),pluginEvent("filter",x,{evt:S}),!0}),et)){Ce&&S.cancelable&&S.preventDefault();return}R.handle&&!closest(Ye,R.handle,C,!1)||this._prepareDragStart(S,je,Xe)}}},_prepareDragStart:function E(S,x,C){var R=this,Ce=R.el,Ue=R.options,je=Ce.ownerDocument,Xe;if(C&&!dragEl&&C.parentNode===Ce){var Ye=getRect(C);if(rootEl=Ce,dragEl=C,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=C,activeGroup=Ue.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(x||S).clientX,clientY:(x||S).clientY},tapDistanceLeft=tapEvt.clientX-Ye.left,tapDistanceTop=tapEvt.clientY-Ye.top,this._lastX=(x||S).clientX,this._lastY=(x||S).clientY,dragEl.style["will-change"]="all",Xe=function(){if(pluginEvent("delayEnded",R,{evt:S}),Sortable.eventCanceled){R._onDrop();return}R._disableDelayedDragEvents(),!FireFox&&R.nativeDraggable&&(dragEl.draggable=!0),R._triggerDragStart(S,x),_dispatchEvent({sortable:R,name:"choose",originalEvent:S}),toggleClass(dragEl,Ue.chosenClass,!0)},Ue.ignore.split(",").forEach(function(et){find(dragEl,et.trim(),_disableDraggable)}),on(je,"dragover",nearestEmptyInsertDetectEvent),on(je,"mousemove",nearestEmptyInsertDetectEvent),on(je,"touchmove",nearestEmptyInsertDetectEvent),on(je,"mouseup",R._onDrop),on(je,"touchend",R._onDrop),on(je,"touchcancel",R._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:S}),Ue.delay&&(!Ue.delayOnTouchOnly||x)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(je,"mouseup",R._disableDelayedDrag),on(je,"touchend",R._disableDelayedDrag),on(je,"touchcancel",R._disableDelayedDrag),on(je,"mousemove",R._delayedDragTouchMoveHandler),on(je,"touchmove",R._delayedDragTouchMoveHandler),Ue.supportPointer&&on(je,"pointermove",R._delayedDragTouchMoveHandler),R._dragStartTimer=setTimeout(Xe,Ue.delay)}else Xe()}},_delayedDragTouchMoveHandler:function E(S){var x=S.touches?S.touches[0]:S;Math.max(Math.abs(x.clientX-this._lastX),Math.abs(x.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function E(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function E(){var S=this.el.ownerDocument;off(S,"mouseup",this._disableDelayedDrag),off(S,"touchend",this._disableDelayedDrag),off(S,"touchcancel",this._disableDelayedDrag),off(S,"mousemove",this._delayedDragTouchMoveHandler),off(S,"touchmove",this._delayedDragTouchMoveHandler),off(S,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function E(S,x){x=x||S.pointerType=="touch"&&S,!this.nativeDraggable||x?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):x?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function E(S,x){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:x}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var C=this.options;!S&&toggleClass(dragEl,C.dragClass,!1),toggleClass(dragEl,C.ghostClass,!0),Sortable.active=this,S&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:x})}else this._nulling()},_emulateDragOver:function E(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var S=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),x=S;S&&S.shadowRoot&&(S=S.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),S!==x);)x=S;if(dragEl.parentNode[expando]._isOutsideThisEl(S),x)do{if(x[expando]){var C=void 0;if(C=x[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:S,rootEl:x}),C&&!this.options.dragoverBubble)break}S=x}while(x=x.parentNode);_unhideGhostForTarget()}},_onTouchMove:function E(S){if(tapEvt){var x=this.options,C=x.fallbackTolerance,R=x.fallbackOffset,Ce=S.touches?S.touches[0]:S,Ue=ghostEl&&matrix(ghostEl,!0),je=ghostEl&&Ue&&Ue.a,Xe=ghostEl&&Ue&&Ue.d,Ye=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),et=(Ce.clientX-tapEvt.clientX+R.x)/(je||1)+(Ye?Ye[0]-ghostRelativeParentInitialScroll[0]:0)/(je||1),ht=(Ce.clientY-tapEvt.clientY+R.y)/(Xe||1)+(Ye?Ye[1]-ghostRelativeParentInitialScroll[1]:0)/(Xe||1);if(!Sortable.active&&!awaitingDragStarted){if(C&&Math.max(Math.abs(Ce.clientX-this._lastX),Math.abs(Ce.clientY-this._lastY))<C)return;this._onDragStart(S,!0)}if(ghostEl){Ue?(Ue.e+=et-(lastDx||0),Ue.f+=ht-(lastDy||0)):Ue={a:1,b:0,c:0,d:1,e:et,f:ht};var Dt="matrix(".concat(Ue.a,",").concat(Ue.b,",").concat(Ue.c,",").concat(Ue.d,",").concat(Ue.e,",").concat(Ue.f,")");css(ghostEl,"webkitTransform",Dt),css(ghostEl,"mozTransform",Dt),css(ghostEl,"msTransform",Dt),css(ghostEl,"transform",Dt),lastDx=et,lastDy=ht,touchEvt=Ce}S.cancelable&&S.preventDefault()}},_appendGhost:function E(){if(!ghostEl){var S=this.options.fallbackOnBody?document.body:rootEl,x=getRect(dragEl,!0,PositionGhostAbsolutely,!0,S),C=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=S;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),x.top+=ghostRelativeParent.scrollTop,x.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,C.ghostClass,!1),toggleClass(ghostEl,C.fallbackClass,!0),toggleClass(ghostEl,C.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",x.top),css(ghostEl,"left",x.left),css(ghostEl,"width",x.width),css(ghostEl,"height",x.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,S.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function E(S,x){var C=this,R=S.dataTransfer,Ce=C.options;if(pluginEvent("dragStart",this,{evt:S}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),C.cloneId=_nextTick(function(){pluginEvent("clone",C),!Sortable.eventCanceled&&(C.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),C._hideClone(),_dispatchEvent({sortable:C,name:"clone"}))}),!x&&toggleClass(dragEl,Ce.dragClass,!0),x?(ignoreNextClick=!0,C._loopId=setInterval(C._emulateDragOver,50)):(off(document,"mouseup",C._onDrop),off(document,"touchend",C._onDrop),off(document,"touchcancel",C._onDrop),R&&(R.effectAllowed="move",Ce.setData&&Ce.setData.call(C,R,dragEl)),on(document,"drop",C),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,C._dragStartId=_nextTick(C._dragStarted.bind(C,x,S)),on(document,"selectstart",C),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function E(S){var x=this.el,C=S.target,R,Ce,Ue,je=this.options,Xe=je.group,Ye=Sortable.active,et=activeGroup===Xe,ht=je.sort,Dt=putSortable||Ye,Ot,Mt=this,St=!1;if(_silent)return;function Ut(si,ai){pluginEvent(si,Mt,_objectSpread2({evt:S,isOwner:et,axis:Ot?"vertical":"horizontal",revert:Ue,dragRect:R,targetRect:Ce,canSort:ht,fromSortable:Dt,target:C,completed:Ft,onMove:function(Ei,zi){return _onMove(rootEl,x,dragEl,R,Ei,getRect(Ei),S,zi)},changed:Nt},ai))}function kt(){Ut("dragOverAnimationCapture"),Mt.captureAnimationState(),Mt!==Dt&&Dt.captureAnimationState()}function Ft(si){return Ut("dragOverCompleted",{insertion:si}),si&&(et?Ye._hideClone():Ye._showClone(Mt),Mt!==Dt&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:Ye.options.ghostClass,!1),toggleClass(dragEl,je.ghostClass,!0)),putSortable!==Mt&&Mt!==Sortable.active?putSortable=Mt:Mt===Sortable.active&&putSortable&&(putSortable=null),Dt===Mt&&(Mt._ignoreWhileAnimating=C),Mt.animateAll(function(){Ut("dragOverAnimationComplete"),Mt._ignoreWhileAnimating=null}),Mt!==Dt&&(Dt.animateAll(),Dt._ignoreWhileAnimating=null)),(C===dragEl&&!dragEl.animated||C===x&&!C.animated)&&(lastTarget=null),!je.dragoverBubble&&!S.rootEl&&C!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(S.target),!si&&nearestEmptyInsertDetectEvent(S)),!je.dragoverBubble&&S.stopPropagation&&S.stopPropagation(),St=!0}function Nt(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,je.draggable),_dispatchEvent({sortable:Mt,name:"change",toEl:x,newIndex,newDraggableIndex,originalEvent:S})}if(S.preventDefault!==void 0&&S.cancelable&&S.preventDefault(),C=closest(C,je.draggable,x,!0),Ut("dragOver"),Sortable.eventCanceled)return St;if(dragEl.contains(S.target)||C.animated&&C.animatingX&&C.animatingY||Mt._ignoreWhileAnimating===C)return Ft(!1);if(ignoreNextClick=!1,Ye&&!je.disabled&&(et?ht||(Ue=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,Ye,dragEl,S))&&Xe.checkPut(this,Ye,dragEl,S))){if(Ot=this._getDirection(S,C)==="vertical",R=getRect(dragEl),Ut("dragOverValid"),Sortable.eventCanceled)return St;if(Ue)return parentEl=rootEl,kt(),this._hideClone(),Ut("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),Ft(!0);var Gt=lastChild(x,je.draggable);if(!Gt||_ghostIsLast(S,Ot,this)&&!Gt.animated){if(Gt===dragEl)return Ft(!1);if(Gt&&x===S.target&&(C=Gt),C&&(Ce=getRect(C)),_onMove(rootEl,x,dragEl,R,C,Ce,S,!!C)!==!1)return kt(),x.appendChild(dragEl),parentEl=x,Nt(),Ft(!0)}else if(Gt&&_ghostIsFirst(S,Ot,this)){var Zt=getChild(x,0,je,!0);if(Zt===dragEl)return Ft(!1);if(C=Zt,Ce=getRect(C),_onMove(rootEl,x,dragEl,R,C,Ce,S,!1)!==!1)return kt(),x.insertBefore(dragEl,Zt),parentEl=x,Nt(),Ft(!0)}else if(C.parentNode===x){Ce=getRect(C);var ri=0,li,hi=dragEl.parentNode!==x,xi=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||R,C.animated&&C.toRect||Ce,Ot),$i=Ot?"top":"left",Mi=isScrolledPast(C,"top","top")||isScrolledPast(dragEl,"top","top"),Di=Mi?Mi.scrollTop:void 0;lastTarget!==C&&(li=Ce[$i],pastFirstInvertThresh=!1,isCircumstantialInvert=!xi&&je.invertSwap||hi),ri=_getSwapDirection(S,C,Ce,Ot,xi?1:je.swapThreshold,je.invertedSwapThreshold==null?je.swapThreshold:je.invertedSwapThreshold,isCircumstantialInvert,lastTarget===C);var ki;if(ri!==0){var ji=index(dragEl);do ji-=ri,ki=parentEl.children[ji];while(ki&&(css(ki,"display")==="none"||ki===ghostEl))}if(ri===0||ki===C)return Ft(!1);lastTarget=C,lastDirection=ri;var Ri=C.nextElementSibling,ui=!1;ui=ri===1;var vi=_onMove(rootEl,x,dragEl,R,C,Ce,S,ui);if(vi!==!1)return(vi===1||vi===-1)&&(ui=vi===1),_silent=!0,setTimeout(_unsilent,30),kt(),ui&&!Ri?x.appendChild(dragEl):C.parentNode.insertBefore(dragEl,ui?Ri:C),Mi&&scrollBy(Mi,0,Di-Mi.scrollTop),parentEl=dragEl.parentNode,li!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(li-getRect(C)[$i])),Nt(),Ft(!0)}if(x.contains(dragEl))return Ft(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function E(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function E(){var S=this.el.ownerDocument;off(S,"mouseup",this._onDrop),off(S,"touchend",this._onDrop),off(S,"pointerup",this._onDrop),off(S,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function E(S){var x=this.el,C=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,C.draggable),pluginEvent("drop",this,{evt:S}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,C.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(x,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),S&&(moved&&(S.cancelable&&S.preventDefault(),!C.dropBubble&&S.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:S}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:S}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:S}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:S}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:S})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:S}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:S})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:S}),this.save()))),this._nulling()},_nulling:function E(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(S){S.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function E(S){switch(S.type){case"drop":case"dragend":this._onDrop(S);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(S),_globalDragOver(S));break;case"selectstart":S.preventDefault();break}},toArray:function E(){for(var S=[],x,C=this.el.children,R=0,Ce=C.length,Ue=this.options;R<Ce;R++)x=C[R],closest(x,Ue.draggable,this.el,!1)&&S.push(x.getAttribute(Ue.dataIdAttr)||_generateId(x));return S},sort:function E(S,x){var C={},R=this.el;this.toArray().forEach(function(Ce,Ue){var je=R.children[Ue];closest(je,this.options.draggable,R,!1)&&(C[Ce]=je)},this),x&&this.captureAnimationState(),S.forEach(function(Ce){C[Ce]&&(R.removeChild(C[Ce]),R.appendChild(C[Ce]))}),x&&this.animateAll()},save:function E(){var S=this.options.store;S&&S.set&&S.set(this)},closest:function E(S,x){return closest(S,x||this.options.draggable,this.el,!1)},option:function E(S,x){var C=this.options;if(x===void 0)return C[S];var R=PluginManager.modifyOption(this,S,x);typeof R<"u"?C[S]=R:C[S]=x,S==="group"&&_prepareGroup(C)},destroy:function E(){pluginEvent("destroy",this);var S=this.el;S[expando]=null,off(S,"mousedown",this._onTapStart),off(S,"touchstart",this._onTapStart),off(S,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(S,"dragover",this),off(S,"dragenter",this)),Array.prototype.forEach.call(S.querySelectorAll("[draggable]"),function(x){x.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=S=null},_hideClone:function E(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function E(S){if(S.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(E){E.dataTransfer&&(E.dataTransfer.dropEffect="move"),E.cancelable&&E.preventDefault()}function _onMove(E,S,x,C,R,Ce,Ue,je){var Xe,Ye=E[expando],et=Ye.options.onMove,ht;return window.CustomEvent&&!IE11OrLess&&!Edge?Xe=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Xe=document.createEvent("Event"),Xe.initEvent("move",!0,!0)),Xe.to=S,Xe.from=E,Xe.dragged=x,Xe.draggedRect=C,Xe.related=R||S,Xe.relatedRect=Ce||getRect(S),Xe.willInsertAfter=je,Xe.originalEvent=Ue,E.dispatchEvent(Xe),et&&(ht=et.call(Ye,Xe,Ue)),ht}function _disableDraggable(E){E.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(E,S,x){var C=getRect(getChild(x.el,0,x.options,!0)),R=10;return S?E.clientX<C.left-R||E.clientY<C.top&&E.clientX<C.right:E.clientY<C.top-R||E.clientY<C.bottom&&E.clientX<C.left}function _ghostIsLast(E,S,x){var C=getRect(lastChild(x.el,x.options.draggable)),R=10;return S?E.clientX>C.right+R||E.clientX<=C.right&&E.clientY>C.bottom&&E.clientX>=C.left:E.clientX>C.right&&E.clientY>C.top||E.clientX<=C.right&&E.clientY>C.bottom+R}function _getSwapDirection(E,S,x,C,R,Ce,Ue,je){var Xe=C?E.clientY:E.clientX,Ye=C?x.height:x.width,et=C?x.top:x.left,ht=C?x.bottom:x.right,Dt=!1;if(!Ue){if(je&&targetMoveDistance<Ye*R){if(!pastFirstInvertThresh&&(lastDirection===1?Xe>et+Ye*Ce/2:Xe<ht-Ye*Ce/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)Dt=!0;else if(lastDirection===1?Xe<et+targetMoveDistance:Xe>ht-targetMoveDistance)return-lastDirection}else if(Xe>et+Ye*(1-R)/2&&Xe<ht-Ye*(1-R)/2)return _getInsertDirection(S)}return Dt=Dt||Ue,Dt&&(Xe<et+Ye*Ce/2||Xe>ht-Ye*Ce/2)?Xe>et+Ye/2?1:-1:0}function _getInsertDirection(E){return index(dragEl)<index(E)?1:-1}function _generateId(E){for(var S=E.tagName+E.className+E.src+E.href+E.textContent,x=S.length,C=0;x--;)C+=S.charCodeAt(x);return C.toString(36)}function _saveInputCheckedState(E){savedInputChecked.length=0;for(var S=E.getElementsByTagName("input"),x=S.length;x--;){var C=S[x];C.checked&&savedInputChecked.push(C)}}function _nextTick(E){return setTimeout(E,0)}function _cancelNextTick(E){return clearTimeout(E)}documentExists&&on(document,"touchmove",function(E){(Sortable.active||awaitingDragStarted)&&E.cancelable&&E.preventDefault()});Sortable.utils={on,off,css,find,is:function E(S,x){return!!closest(S,x,S,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(E){return E[expando]};Sortable.mount=function(){for(var E=arguments.length,S=new Array(E),x=0;x<E;x++)S[x]=arguments[x];S[0].constructor===Array&&(S=S[0]),S.forEach(function(C){if(!C.prototype||!C.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(C));C.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),C.utils)),PluginManager.mount(C)})};Sortable.create=function(E,S){return new Sortable(E,S)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function E(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var S in this)S.charAt(0)==="_"&&typeof this[S]=="function"&&(this[S]=this[S].bind(this))}return E.prototype={dragStarted:function(x){var C=x.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):C.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(x){var C=x.originalEvent;!this.options.dragOverBubble&&!C.rootEl&&this._handleAutoScroll(C)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(x){this._handleAutoScroll(x,!0)},_handleAutoScroll:function(x,C){var R=this,Ce=(x.touches?x.touches[0]:x).clientX,Ue=(x.touches?x.touches[0]:x).clientY,je=document.elementFromPoint(Ce,Ue);if(touchEvt$1=x,C||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(x,this.options,je,C);var Xe=getParentAutoScrollElement(je,!0);scrolling&&(!pointerElemChangedInterval||Ce!==lastAutoScrollX||Ue!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var Ye=getParentAutoScrollElement(document.elementFromPoint(Ce,Ue),!0);Ye!==Xe&&(Xe=Ye,clearAutoScrolls()),autoScroll(x,R.options,Ye,C)},10),lastAutoScrollX=Ce,lastAutoScrollY=Ue)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(je,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(x,this.options,getParentAutoScrollElement(je,!1),!1)}}},_extends(E,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(E){clearInterval(E.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(E,S,x,C){if(S.scroll){var R=(E.touches?E.touches[0]:E).clientX,Ce=(E.touches?E.touches[0]:E).clientY,Ue=S.scrollSensitivity,je=S.scrollSpeed,Xe=getWindowScrollingElement(),Ye=!1,et;scrollRootEl!==x&&(scrollRootEl=x,clearAutoScrolls(),scrollEl=S.scroll,et=S.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(x,!0)));var ht=0,Dt=scrollEl;do{var Ot=Dt,Mt=getRect(Ot),St=Mt.top,Ut=Mt.bottom,kt=Mt.left,Ft=Mt.right,Nt=Mt.width,Gt=Mt.height,Zt=void 0,ri=void 0,li=Ot.scrollWidth,hi=Ot.scrollHeight,xi=css(Ot),$i=Ot.scrollLeft,Mi=Ot.scrollTop;Ot===Xe?(Zt=Nt<li&&(xi.overflowX==="auto"||xi.overflowX==="scroll"||xi.overflowX==="visible"),ri=Gt<hi&&(xi.overflowY==="auto"||xi.overflowY==="scroll"||xi.overflowY==="visible")):(Zt=Nt<li&&(xi.overflowX==="auto"||xi.overflowX==="scroll"),ri=Gt<hi&&(xi.overflowY==="auto"||xi.overflowY==="scroll"));var Di=Zt&&(Math.abs(Ft-R)<=Ue&&$i+Nt<li)-(Math.abs(kt-R)<=Ue&&!!$i),ki=ri&&(Math.abs(Ut-Ce)<=Ue&&Mi+Gt<hi)-(Math.abs(St-Ce)<=Ue&&!!Mi);if(!autoScrolls[ht])for(var ji=0;ji<=ht;ji++)autoScrolls[ji]||(autoScrolls[ji]={});(autoScrolls[ht].vx!=Di||autoScrolls[ht].vy!=ki||autoScrolls[ht].el!==Ot)&&(autoScrolls[ht].el=Ot,autoScrolls[ht].vx=Di,autoScrolls[ht].vy=ki,clearInterval(autoScrolls[ht].pid),(Di!=0||ki!=0)&&(Ye=!0,autoScrolls[ht].pid=setInterval((function(){C&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Ri=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*je:0,ui=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*je:0;typeof et=="function"&&et.call(Sortable.dragged.parentNode[expando],ui,Ri,E,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,ui,Ri)}).bind({layer:ht}),24))),ht++}while(S.bubbleScroll&&Dt!==Xe&&(Dt=getParentAutoScrollElement(Dt,!1)));scrolling=Ye}},30),drop=function E(S){var x=S.originalEvent,C=S.putSortable,R=S.dragEl,Ce=S.activeSortable,Ue=S.dispatchSortableEvent,je=S.hideGhostForTarget,Xe=S.unhideGhostForTarget;if(x){var Ye=C||Ce;je();var et=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:x,ht=document.elementFromPoint(et.clientX,et.clientY);Xe(),Ye&&!Ye.el.contains(ht)&&(Ue("spill"),this.onSpill({dragEl:R,putSortable:C}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function E(S){var x=S.oldDraggableIndex;this.startIndex=x},onSpill:function E(S){var x=S.dragEl,C=S.putSortable;this.sortable.captureAnimationState(),C&&C.captureAnimationState();var R=getChild(this.sortable.el,this.startIndex,this.options);R?this.sortable.el.insertBefore(x,R):this.sortable.el.appendChild(x),this.sortable.animateAll(),C&&C.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function E(S){var x=S.dragEl,C=S.putSortable,R=C||this.sortable;R.captureAnimationState(),x.parentNode&&x.parentNode.removeChild(x),R.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);function getConsole(){return typeof window<"u"?window.console:global.console}const console$1=getConsole();function cached(E){const S=Object.create(null);return function(C){return S[C]||(S[C]=E(C))}}const regex=/-(\w)/g,camelize=cached(E=>E.replace(regex,(S,x)=>x?x.toUpperCase():""));function removeNode(E){E.parentElement!==null&&E.parentElement.removeChild(E)}function insertNodeAt(E,S,x){const C=x===0?E.children[0]:E.children[x-1].nextSibling;E.insertBefore(S,C)}function computeVmIndex(E,S){return Object.values(E).indexOf(S)}function computeIndexes(E,S,x,C){if(!E)return[];const R=Object.values(E),Ce=S.length-C;return[...S].map((je,Xe)=>Xe>=Ce?R.length:R.indexOf(je))}function emit(E,S){this.$nextTick(()=>this.$emit(E.toLowerCase(),S))}function delegateAndEmit(E){return S=>{this.realList!==null&&this["onDrag"+E](S),emit.call(this,E,S)}}function isTransitionName(E){return["transition-group","TransitionGroup"].includes(E)}function isTransition(E){if(!E||E.length!==1)return!1;const[{type:S}]=E;return S?isTransitionName(S.name):!1}function getComponentAttributes(E,S){return S?{...S.props,...S.attrs}:E}const eventsListened=["Start","Add","Remove","Update","End"],eventsToEmit=["Choose","Unchoose","Sort","Filter","Clone"],readonlyProperties=["Move",...eventsListened,...eventsToEmit].map(E=>"on"+E);let draggingElement=null;const props={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:E=>E},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},VueDraggableNext=defineComponent({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...eventsListened.map(E=>E.toLowerCase()),...eventsToEmit.map(E=>E.toLowerCase())],props,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const E=this.$slots.default?this.$slots.default():null,S=getComponentAttributes(this.$attrs,this.componentData);return E?(this.transitionMode=isTransition(E),h$1(this.getTag(),S,E)):h$1(this.getTag(),S,[])},created(){this.list!==null&&this.modelValue!==null&&console$1.error("list props are mutually exclusive! Please set one.")},mounted(){const E={};eventsListened.forEach(R=>{E["on"+R]=delegateAndEmit.call(this,R)}),eventsToEmit.forEach(R=>{E["on"+R]=emit.bind(this,R)});const S=Object.keys(this.$attrs).reduce((R,Ce)=>(R[camelize(Ce)]=this.$attrs[Ce],R),{}),x=Object.assign({},S,E,{onMove:(R,Ce)=>this.onDragMove(R,Ce)});!("draggable"in x)&&(x.draggable=">*");const C=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Sortable(C,x),C.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(E){this.updateOptions(E)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?resolveComponent(this.component):this.tag},updateOptions(E){for(var S in E){const x=camelize(S);readonlyProperties.indexOf(x)===-1&&this._sortable.option(x,E[S])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=computeIndexes(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(E){const S=computeVmIndex(this.getChildrenNodes()||[],E);if(S===-1)return null;const x=this.realList[S];return{index:S,element:x}},emitChanges(E){this.$nextTick(()=>{this.$emit("change",E)})},alterList(E){if(this.list){E(this.list);return}const S=[...this.modelValue];E(S),this.$emit("update:modelValue",S)},spliceList(){const E=S=>S.splice(...arguments);this.alterList(E)},updatePosition(E,S){const x=C=>C.splice(S,0,C.splice(E,1)[0]);this.alterList(x)},getVmIndex(E){const S=this.visibleIndexes,x=S.length;return E>x-1?x:S[E]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(E){if(!this.noTransitionOnDrag||!this.transitionMode)return;var S=this.getChildrenNodes();S[E].data=null;const x=this.getComponent();x.children=[],x.kept=void 0},onDragStart(E){this.computeIndexes(),this.context=this.getUnderlyingVm(E.item),this.context&&(E.item._underlying_vm_=this.clone(this.context.element),draggingElement=E.item)},onDragAdd(E){const S=E.item._underlying_vm_;if(S===void 0)return;removeNode(E.item);const x=this.getVmIndex(E.newIndex);this.spliceList(x,0,S),this.computeIndexes();const C={element:S,newIndex:x};this.emitChanges({added:C})},onDragRemove(E){if(insertNodeAt(this.$el,E.item,E.oldIndex),E.pullMode==="clone"){removeNode(E.clone);return}if(!this.context)return;const S=this.context.index;this.spliceList(S,1);const x={element:this.context.element,oldIndex:S};this.resetTransitionData(S),this.emitChanges({removed:x})},onDragUpdate(E){removeNode(E.item),insertNodeAt(E.from,E.item,E.oldIndex);const S=this.context.index,x=this.getVmIndex(E.newIndex);this.updatePosition(S,x);const C={element:this.context.element,oldIndex:S,newIndex:x};this.emitChanges({moved:C})},updateProperty(E,S){E.hasOwnProperty(S)&&(E[S]+=this.headerOffset)},onDragMove(E,S){const x=this.move;if(!x||!this.realList)return!0;const C=this.getRelatedContextFromMoveEvent(E),R=this.context,Ce=this.computeFutureIndex(C,E);Object.assign(R,{futureIndex:Ce});const Ue=Object.assign({},E,{relatedContext:C,draggedContext:R});return x(Ue,S)},onDragEnd(){this.computeIndexes(),draggingElement=null},getTrargetedComponent(E){return E.__draggable_component__},getRelatedContextFromMoveEvent({to:E,related:S}){const x=this.getTrargetedComponent(E);if(!x)return{component:x};const C=x.realList,R={list:C,component:x};if(E!==S&&C&&x.getUnderlyingVm){const Ce=x.getUnderlyingVm(S);if(Ce)return Object.assign(Ce,R)}return R},computeFutureIndex(E,S){const x=[...S.to.children].filter(Ue=>Ue.style.display!=="none");if(x.length===0)return 0;const C=x.indexOf(S.related),R=E.component.getVmIndex(C);return x.indexOf(draggingElement)!==-1||!S.willInsertAfter?R:R+1}}});var bugsnag={exports:{}};(function(E,S){(function(x){E.exports=x()})(function(){var x=["navigation","request","process","log","user","state","error","manual"],C=function(ii,oi,di){for(var ci=di,Si=0,Ii=ii.length;Si<Ii;Si++)ci=oi(ci,ii[Si],Si,ii);return ci},R=function(ii,oi){return C(ii,function(di,ci,Si,Ii){return oi(ci,Si,Ii)?di.concat(ci):di},[])},Ce=function(ii,oi){return C(ii,function(di,ci,Si,Ii){return di===!0||ci===oi},!1)},Ue=function(ii){return Object.prototype.toString.call(ii)==="[object Array]"},je=!{toString:null}.propertyIsEnumerable("toString"),Xe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ye=function(ii){var oi=[],di;for(di in ii)Object.prototype.hasOwnProperty.call(ii,di)&&oi.push(di);if(!je)return oi;for(var ci=0,Si=Xe.length;ci<Si;ci++)Object.prototype.hasOwnProperty.call(ii,Xe[ci])&&oi.push(Xe[ci]);return oi},et=function(ii,oi){return ii===void 0&&(ii=1),function(di){return typeof di=="number"&&parseInt(""+di,10)===di&&di>=ii&&di<=oi}},ht=function(ii){return typeof ii=="function"||Ue(ii)&&R(ii,function(oi){return typeof oi=="function"}).length===ii.length},Dt=function(ii){return typeof ii=="string"&&!!ii.length},Ot={},Mt=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};Ot.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:Dt},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(ii){return ii===void 0||Dt(ii)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(ii){return ii===void 0||Dt(ii)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(ii){return ii===!0||ii===!1}},enabledErrorTypes:{defaultValue:function(){return Mt()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(ii){if(typeof ii!="object"||!ii)return!1;var oi=Ye(ii),di=Ye(Mt());return!(R(oi,function(ci){return Ce(di,ci)}).length<oi.length||R(Ye(ii),function(ci){return typeof ii[ci]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ht},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ht},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:ht},endpoints:{defaultValue:function(ii){return typeof ii>"u"?{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}:{notify:null,sessions:null}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(ii){return ii&&typeof ii=="object"&&Dt(ii.notify)&&Dt(ii.sessions)&&R(Ye(ii),function(oi){return!Ce(["notify","sessions"],oi)}).length===0}},autoTrackSessions:{defaultValue:function(ii){return!0},message:"should be true|false",validate:function(ii){return ii===!0||ii===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(ii){return ii===null||Ue(ii)&&R(ii,function(oi){return typeof oi=="string"}).length===ii.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(ii){return typeof ii=="string"&&ii.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number 100",validate:function(ii){return et(0,100)(ii)}},enabledBreadcrumbTypes:{defaultValue:function(){return x},message:"should be null or a list of available breadcrumb types ("+x.join(",")+")",validate:function(ii){return ii===null||Ue(ii)&&C(ii,function(oi,di){return oi===!1?oi:Ce(x,di)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(ii){return ii===void 0||typeof ii=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(ii){return ii===null||ii&&C(Ye(ii),function(oi,di){return oi&&Ce(["id","email","name"],di)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(ii){return typeof ii=="object"&&ii!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(ii){return!ii||ii&&C(["debug","info","warn","error"],function(oi,di){return oi&&typeof ii[di]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(ii){return Ue(ii)&&ii.length===R(ii,function(oi){return typeof oi=="string"||oi&&typeof oi.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(ii){return Ue(ii)&&ii.length===R(ii,function(oi){return oi&&typeof oi=="object"&&typeof oi.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(ii){return Ue(ii)&&ii.length===R(ii,function(oi){return oi&&typeof oi=="object"&&typeof oi.name=="string"}).length}},reportUnhandledPromiseRejectionsAsHandled:{defaultValue:function(){return!1},message:"should be true|false",validate:function(ii){return ii===!0||ii===!1}}};var St=function(ii){for(var oi=1;oi<arguments.length;oi++){var di=arguments[oi];for(var ci in di)Object.prototype.hasOwnProperty.call(di,ci)&&(ii[ci]=di[ci])}return ii},Ut=function(ii,oi){return C(ii,function(di,ci,Si,Ii){return di.concat(oi(ci,Si,Ii))},[])};function kt(){return kt=Object.assign?Object.assign.bind():function(ii){for(var oi=1;oi<arguments.length;oi++){var di=arguments[oi];for(var ci in di)Object.prototype.hasOwnProperty.call(di,ci)&&(ii[ci]=di[ci])}return ii},kt.apply(this,arguments)}var Ft=Ot.schema,Nt={releaseStage:St({},Ft.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:kt({},Ft.appType,{defaultValue:function(){return"browser"}}),logger:St({},Ft.logger,{defaultValue:function(){return typeof console<"u"&&typeof console.debug=="function"?Gt():void 0}})},Gt=function(){var ii={},oi=console.log;return Ut(["debug","info","warn","error"],function(di){var ci=console[di];ii[di]=typeof ci=="function"?ci.bind(console,"[bugsnag]"):oi.bind(console,"[bugsnag]")}),ii},Zt=function(){function ii(di,ci,Si,Ii){Ii===void 0&&(Ii=new Date),this.type=Si,this.message=di,this.metadata=ci,this.timestamp=Ii}var oi=ii.prototype;return oi.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},ii}(),ri=Zt,li={};(function(ii,oi){typeof li=="object"?li=oi():ii.StackFrame=oi()})(this,function(){function ii(ar){return!isNaN(parseFloat(ar))&&isFinite(ar)}function oi(ar){return ar.charAt(0).toUpperCase()+ar.substring(1)}function di(ar){return function(){return this[ar]}}var ci=["isConstructor","isEval","isNative","isToplevel"],Si=["columnNumber","lineNumber"],Ii=["fileName","functionName","source"],Pi=["args"],Yi=["evalOrigin"],Vi=ci.concat(Si,Ii,Pi,Yi);function tr(ar){if(ar)for(var gr=0;gr<Vi.length;gr++)ar[Vi[gr]]!==void 0&&this["set"+oi(Vi[gr])](ar[Vi[gr]])}tr.prototype={getArgs:function(){return this.args},setArgs:function(ar){if(Object.prototype.toString.call(ar)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=ar},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(ar){if(ar instanceof tr)this.evalOrigin=ar;else if(ar instanceof Object)this.evalOrigin=new tr(ar);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var ar=this.getFileName()||"",gr=this.getLineNumber()||"",Pr=this.getColumnNumber()||"",pr=this.getFunctionName()||"";return this.getIsEval()?ar?"[eval] ("+ar+":"+gr+":"+Pr+")":"[eval]:"+gr+":"+Pr:pr?pr+" ("+ar+":"+gr+":"+Pr+")":ar+":"+gr+":"+Pr}},tr.fromString=function(gr){var Pr=gr.indexOf("("),pr=gr.lastIndexOf(")"),Er=gr.substring(0,Pr),Lr=gr.substring(Pr+1,pr).split(","),kr=gr.substring(pr+1);if(kr.indexOf("@")===0)var Fr=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(kr,""),Rr=Fr[1],tn=Fr[2],Cn=Fr[3];return new tr({functionName:Er,args:Lr||void 0,fileName:Rr,lineNumber:tn||void 0,columnNumber:Cn||void 0})};for(var rr=0;rr<ci.length;rr++)tr.prototype["get"+oi(ci[rr])]=di(ci[rr]),tr.prototype["set"+oi(ci[rr])]=function(ar){return function(gr){this[ar]=!!gr}}(ci[rr]);for(var dr=0;dr<Si.length;dr++)tr.prototype["get"+oi(Si[dr])]=di(Si[dr]),tr.prototype["set"+oi(Si[dr])]=function(ar){return function(gr){if(!ii(gr))throw new TypeError(ar+" must be a Number");this[ar]=Number(gr)}}(Si[dr]);for(var Wi=0;Wi<Ii.length;Wi++)tr.prototype["get"+oi(Ii[Wi])]=di(Ii[Wi]),tr.prototype["set"+oi(Ii[Wi])]=function(ar){return function(gr){this[ar]=String(gr)}}(Ii[Wi]);return tr});var hi={};(function(ii,oi){typeof hi=="object"?hi=oi(li):ii.StackGenerator=oi(ii.StackFrame)})(this,function(ii){return{backtrace:function(di){var ci=[],Si=10;typeof di=="object"&&typeof di.maxStackSize=="number"&&(Si=di.maxStackSize);for(var Ii=arguments.callee;Ii&&ci.length<Si&&Ii.arguments;){for(var Pi=new Array(Ii.arguments.length),Yi=0;Yi<Pi.length;++Yi)Pi[Yi]=Ii.arguments[Yi];/function(?:\s+([\w$]+))+\s*\(/.test(Ii.toString())?ci.push(new ii({functionName:RegExp.$1||void 0,args:Pi})):ci.push(new ii({args:Pi}));try{Ii=Ii.caller}catch{break}}return ci}}});var xi={};(function(ii,oi){typeof xi=="object"?xi=oi(li):ii.ErrorStackParser=oi(ii.StackFrame)})(this,function(oi){var di=/(^|@)\S+:\d+/,ci=/^\s*at .*(\S+:\d+|\(native\))/m,Si=/^(eval@)?(\[native code])?$/;return{parse:function(Pi){if(typeof Pi.stacktrace<"u"||typeof Pi["opera#sourceloc"]<"u")return this.parseOpera(Pi);if(Pi.stack&&Pi.stack.match(ci))return this.parseV8OrIE(Pi);if(Pi.stack)return this.parseFFOrSafari(Pi);throw new Error("Cannot parse given Error object")},extractLocation:function(Pi){if(Pi.indexOf(":")===-1)return[Pi];var Yi=/(.+?)(?::(\d+))?(?::(\d+))?$/,Vi=Yi.exec(Pi.replace(/[()]/g,""));return[Vi[1],Vi[2]||void 0,Vi[3]||void 0]},parseV8OrIE:function(Pi){var Yi=Pi.stack.split(`
`).filter(function(Vi){return!!Vi.match(ci)},this);return Yi.map(function(Vi){Vi.indexOf("(eval ")>-1&&(Vi=Vi.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var tr=Vi.replace(/^\s+/,"").replace(/\(eval code/g,"("),rr=tr.match(/ (\((.+):(\d+):(\d+)\)$)/);tr=rr?tr.replace(rr[0],""):tr;var dr=tr.split(/\s+/).slice(1),Wi=this.extractLocation(rr?rr[1]:dr.pop()),ar=dr.join(" ")||void 0,gr=["eval","<anonymous>"].indexOf(Wi[0])>-1?void 0:Wi[0];return new oi({functionName:ar,fileName:gr,lineNumber:Wi[1],columnNumber:Wi[2],source:Vi})},this)},parseFFOrSafari:function(Pi){var Yi=Pi.stack.split(`
`).filter(function(Vi){return!Vi.match(Si)},this);return Yi.map(function(Vi){if(Vi.indexOf(" > eval")>-1&&(Vi=Vi.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),Vi.indexOf("@")===-1&&Vi.indexOf(":")===-1)return new oi({functionName:Vi});var tr=/((.*".+"[^@]*)?[^@]*)(?:@)/,rr=Vi.match(tr),dr=rr&&rr[1]?rr[1]:void 0,Wi=this.extractLocation(Vi.replace(tr,""));return new oi({functionName:dr,fileName:Wi[0],lineNumber:Wi[1],columnNumber:Wi[2],source:Vi})},this)},parseOpera:function(Pi){return!Pi.stacktrace||Pi.message.indexOf(`
`)>-1&&Pi.message.split(`
`).length>Pi.stacktrace.split(`
`).length?this.parseOpera9(Pi):Pi.stack?this.parseOpera11(Pi):this.parseOpera10(Pi)},parseOpera9:function(Pi){for(var Yi=/Line (\d+).*script (?:in )?(\S+)/i,Vi=Pi.message.split(`
`),tr=[],rr=2,dr=Vi.length;rr<dr;rr+=2){var Wi=Yi.exec(Vi[rr]);Wi&&tr.push(new oi({fileName:Wi[2],lineNumber:Wi[1],source:Vi[rr]}))}return tr},parseOpera10:function(Pi){for(var Yi=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,Vi=Pi.stacktrace.split(`
`),tr=[],rr=0,dr=Vi.length;rr<dr;rr+=2){var Wi=Yi.exec(Vi[rr]);Wi&&tr.push(new oi({functionName:Wi[3]||void 0,fileName:Wi[2],lineNumber:Wi[1],source:Vi[rr]}))}return tr},parseOpera11:function(Pi){var Yi=Pi.stack.split(`
`).filter(function(Vi){return!!Vi.match(di)&&!Vi.match(/^Error created at/)},this);return Yi.map(function(Vi){var tr=Vi.split("@"),rr=this.extractLocation(tr.pop()),dr=tr.shift()||"",Wi=dr.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,ar;dr.match(/\(([^)]*)\)/)&&(ar=dr.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var gr=ar===void 0||ar==="[arguments not available]"?void 0:ar.split(",");return new oi({functionName:Wi,args:gr,fileName:rr[0],lineNumber:rr[1],columnNumber:rr[2],source:Vi})},this)}}});var $i=xi,Mi=function(ii,oi,di,ci){var Si=ci&&ci.redactedKeys?ci.redactedKeys:[],Ii=ci&&ci.redactedPaths?ci.redactedPaths:[];return JSON.stringify(or(ii,Si,Ii),oi,di)},Di=20,ki=25e3,ji=8,Ri="...";function ui(ii){return ii instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(ii))}function vi(ii){return"[Throws: "+(ii?ii.message:"?")+"]"}function si(ii,oi){for(var di=0,ci=ii.length;di<ci;di++)if(ii[di]===oi)return!0;return!1}function ai(ii,oi){for(var di=0,ci=ii.length;di<ci;di++)if(oi.indexOf(ii[di])===0)return!0;return!1}function Ci(ii,oi){for(var di=0,ci=ii.length;di<ci;di++)if(typeof ii[di]=="string"&&ii[di].toLowerCase()===oi.toLowerCase()||ii[di]&&typeof ii[di].test=="function"&&ii[di].test(oi))return!0;return!1}function Ei(ii){return Object.prototype.toString.call(ii)==="[object Array]"}function zi(ii,oi){try{return ii[oi]}catch(di){return vi(di)}}function or(ii,oi,di){var ci=[],Si=0;function Ii(Pi,Yi){function Vi(){return Yi.length>ji&&Si>ki}if(Si++,Yi.length>Di||Vi())return Ri;if(Pi===null||typeof Pi!="object")return Pi;if(si(ci,Pi))return"[Circular]";if(ci.push(Pi),typeof Pi.toJSON=="function")try{Si--;var tr=Ii(Pi.toJSON(),Yi);return ci.pop(),tr}catch(Er){return vi(Er)}var rr=ui(Pi);if(rr){Si--;var dr=Ii({name:Pi.name,message:Pi.message},Yi);return ci.pop(),dr}if(Ei(Pi)){for(var Wi=[],ar=0,gr=Pi.length;ar<gr;ar++){if(Vi()){Wi.push(Ri);break}Wi.push(Ii(Pi[ar],Yi.concat("[]")))}return ci.pop(),Wi}var Pr={};try{for(var pr in Pi)if(Object.prototype.hasOwnProperty.call(Pi,pr)){if(ai(di,Yi.join("."))&&Ci(oi,pr)){Pr[pr]="[REDACTED]";continue}if(Vi()){Pr[pr]=Ri;break}Pr[pr]=Ii(zi(Pi,pr),Yi.concat(pr))}}catch{}return ci.pop(),Pr}return Ii(ii,[])}function hr(ii,oi,di,ci){if(typeof di=="string"){ci===void 0?ci=null:ci!==null&&typeof ci!="string"&&(ci=Mi(ci));var Si=oi[di];if(typeof Si=="number"){ii[Si]={name:di,variant:ci};return}ii.push({name:di,variant:ci}),oi[di]=ii.length-1}}function mr(ii,oi,di){if(Ue(oi)){for(var ci=0;ci<oi.length;++ci){var Si=oi[ci];Si===null||typeof Si!="object"||hr(ii,di,Si.name,Si.variant)}return ii}}function cr(ii){return Ut(R(ii,Boolean),function(oi){var di=oi.name,ci=oi.variant,Si={featureFlag:di};return typeof ci=="string"&&(Si.variant=ci),Si})}function Li(ii,oi,di){var ci=oi[di];typeof ci=="number"&&(ii[ci]=null,delete oi[di])}var Ji={add:hr,clear:Li,merge:mr,toEventApi:cr},Xi=function(ii){return!!ii&&(!!ii.stack||!!ii.stacktrace||!!ii["opera#sourceloc"])&&typeof(ii.stack||ii.stacktrace||ii["opera#sourceloc"])=="string"&&ii.stack!==ii.name+": "+ii.message},nr=yr;function yr(ii){switch(Object.prototype.toString.call(ii)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return ii instanceof Error}}var _r=nr,gi=function(ii,oi,di,ci){var Si;if(oi){var Ii;if(di===null)return Ai(ii,oi);typeof di=="object"&&(Ii=di),typeof di=="string"&&(Ii=(Si={},Si[di]=ci,Si)),Ii&&(oi==="__proto__"||oi==="constructor"||oi==="prototype"||(ii[oi]||(ii[oi]={}),ii[oi]=St({},ii[oi],Ii)))}},mi=function(ii,oi,di){if(typeof oi=="string"){if(!di)return ii[oi];if(ii[oi])return ii[oi][di]}},Ai=function(ii,oi,di){if(typeof oi=="string"){if(!di){delete ii[oi];return}oi==="__proto__"||oi==="constructor"||oi==="prototype"||ii[oi]&&delete ii[oi][di]}},Hi={add:gi,get:mi,clear:Ai};function Ni(){return Ni=Object.assign?Object.assign.bind():function(ii){for(var oi=1;oi<arguments.length;oi++){var di=arguments[oi];for(var ci in di)Object.prototype.hasOwnProperty.call(di,ci)&&(ii[ci]=di[ci])}return ii},Ni.apply(this,arguments)}var Fi=function(){function ii(di,ci,Si,Ii,Pi){Si===void 0&&(Si=[]),Ii===void 0&&(Ii=Ki()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=Pi,this._handledState=Ii,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[lr(di,ci,ii.__type,Si)]}var oi=ii.prototype;return oi.addMetadata=function(ci,Si,Ii){return Hi.add(this._metadata,ci,Si,Ii)},oi.setTraceCorrelation=function(ci,Si){typeof ci=="string"&&(this._correlation=Ni({traceId:ci},typeof Si=="string"?{spanId:Si}:{}))},oi.getMetadata=function(ci,Si){return Hi.get(this._metadata,ci,Si)},oi.clearMetadata=function(ci,Si){return Hi.clear(this._metadata,ci,Si)},oi.addFeatureFlag=function(ci,Si){Si===void 0&&(Si=null),Ji.add(this._features,this._featuresIndex,ci,Si)},oi.addFeatureFlags=function(ci){Ji.merge(this._features,ci,this._featuresIndex)},oi.getFeatureFlags=function(){return Ji.toEventApi(this._features)},oi.clearFeatureFlag=function(ci){Ji.clear(this._features,this._featuresIndex,ci)},oi.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},oi.getUser=function(){return this._user},oi.setUser=function(ci,Si,Ii){this._user={id:ci,email:Si,name:Ii}},oi.toJSON=function(){return{payloadVersion:"4",exceptions:Ut(this.errors,function(ci){return St({},ci,{message:ci.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},ii}(),Zi=function(ii){var oi={file:ii.fileName,method:Bi(ii.functionName),lineNumber:ii.lineNumber,columnNumber:ii.columnNumber,code:void 0,inProject:void 0};return oi.lineNumber>-1&&!oi.file&&!oi.method&&(oi.file="global code"),oi},Bi=function(ii){return/^global code$/i.test(ii)?"global code":ii},Ki=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},Gi=function(ii){return typeof ii=="string"?ii:""};function lr(ii,oi,di,ci){return{errorClass:Gi(ii),errorMessage:Gi(oi),type:di,stacktrace:C(ci,function(Si,Ii){var Pi=Zi(Ii);try{return JSON.stringify(Pi)==="{}"?Si:Si.concat(Pi)}catch{return Si}},[])}}function er(ii){return ii.cause?[ii].concat(er(ii.cause)):[ii]}Fi.getStacktrace=function(ii,oi,di){if(Xi(ii))return $i.parse(ii).slice(oi);try{return R(hi.backtrace(),function(ci){return(ci.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+di)}catch{return[]}},Fi.create=function(ii,oi,di,ci,Si,Ii){Si===void 0&&(Si=0);var Pi=ur(ii,oi,ci,Ii),Yi=Pi[0],Vi=Pi[1],tr;try{var rr=Fi.getStacktrace(Yi,Vi>0?1+Vi+Si:0,1+Si);tr=new Fi(Yi.name,Yi.message,rr,di,ii)}catch{tr=new Fi(Yi.name,Yi.message,[],di,ii)}if(Yi.name==="InvalidError"&&tr.addMetadata(""+ci,"non-error parameter",Qi(ii)),Yi.cause){var dr,Wi=er(Yi).slice(1),ar=Ut(Wi,function(gr){var Pr=_r(gr)&&Xi(gr)?$i.parse(gr):[],pr=ur(gr,!0,"error cause"),Er=pr[0];return Er.name==="InvalidError"&&tr.addMetadata("error cause",Qi(gr)),lr(Er.name,Er.message,Fi.__type,Pr)});(dr=tr.errors).push.apply(dr,ar)}return tr};var Qi=function(ii){return ii===null?"null":ii===void 0?"undefined":ii},ur=function(ii,oi,di,ci){var Si,Ii=0,Pi=function(Yi){var Vi=di==="error cause"?"was":"received";ci&&ci.warn(di+" "+Vi+' a non-error: "'+Yi+'"');var tr=new Error(di+" "+Vi+' a non-error. See "'+di+'" tab for more detail.');return tr.name="InvalidError",tr};if(!oi)_r(ii)?Si=ii:(Si=Pi(typeof ii),Ii+=2);else switch(typeof ii){case"string":case"number":case"boolean":Si=new Error(String(ii)),Ii+=1;break;case"function":Si=Pi("function"),Ii+=2;break;case"object":ii!==null&&_r(ii)?Si=ii:ii!==null&&br(ii)?(Si=new Error(ii.message||ii.errorMessage),Si.name=ii.name||ii.errorClass,Ii+=1):(Si=Pi(ii===null?"null":"unsupported object"),Ii+=2);break;default:Si=Pi("nothing"),Ii+=2}if(!Xi(Si))try{throw Si}catch(Yi){Xi(Yi)&&(Si=Yi,Ii=1)}return[Si,Ii]};Fi.__type="browserjs";var br=function(ii){return(typeof ii.name=="string"||typeof ii.errorClass=="string")&&(typeof ii.message=="string"||typeof ii.errorMessage=="string")},Cr=Fi,wr=function(ii,oi,di){var ci=0,Si=function(){if(ci>=ii.length)return di(null,!0);oi(ii[ci],function(Ii,Pi){if(Ii)return di(Ii);if(Pi===!1)return di(null,!1);ci++,Si()})};Si()},Nr=function(ii,oi,di,ci){var Si=function(Ii,Pi){if(typeof Ii!="function")return Pi(null);try{if(Ii.length!==2){var Yi=Ii(oi);return Yi&&typeof Yi.then=="function"?Yi.then(function(Vi){return setTimeout(function(){return Pi(null,Vi)})},function(Vi){setTimeout(function(){return di(Vi),Pi(null,!0)})}):Pi(null,Yi)}Ii(oi,function(Vi,tr){if(Vi)return di(Vi),Pi(null);Pi(null,tr)})}catch(Vi){di(Vi),Pi(null)}};wr(ii,Si,ci)},$r=function(ii,oi,di,ci){for(var Si=!1,Ii=ii.slice();!Si&&Ii.length;)try{Si=Ii.pop()(oi)===!1}catch(Pi){ci.error("Error occurred in "+di+" callback, continuing anyway"),ci.error(Pi)}return Si},xr=function(oi,di){var ci="000000000"+oi;return ci.substr(ci.length-di)},Ur=typeof window=="object"?window:self,Kr=0;for(var zn in Ur)Object.hasOwnProperty.call(Ur,zn)&&Kr++;var Gr=navigator.mimeTypes?navigator.mimeTypes.length:0,Qr=xr((Gr+navigator.userAgent.length).toString(36)+Kr.toString(36),4),Ln=function(){return Qr},ns=function(oi){return typeof oi=="string"&&/^c[a-z0-9]{20,32}$/.test(oi)},Xr=0,ss=4,cn=36,As=Math.pow(cn,ss);function as(){return xr((Math.random()*As<<0).toString(cn),ss)}function Ps(){return Xr=Xr<As?Xr:0,Xr++,Xr-1}function $n(){var ii="c",oi=new Date().getTime().toString(cn),di=xr(Ps().toString(cn),ss),ci=Ln(),Si=as()+as();return ii+oi+di+ci+Si}$n.fingerprint=Ln,$n.isCuid=ns;var os=$n,Bs=function(){function ii(){this.id=os(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var oi=ii.prototype;return oi.getUser=function(){return this._user},oi.setUser=function(ci,Si,Ii){this._user={id:ci,email:Si,name:Ii}},oi.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},oi._track=function(ci){this[ci._handledState.unhandled?"_unhandled":"_handled"]+=1},ii}(),ls=Bs,Us=Ji.add,Wn=Ji.clear,Kn=Ji.merge,Jr=function(){},Xn=function(){function ii(di,ci,Si,Ii){var Pi=this;ci===void 0&&(ci=Ot.schema),Si===void 0&&(Si=[]),this._notifier=Ii,this._config={},this._schema=ci,this._delivery={sendSession:Jr,sendEvent:Jr},this._logger={debug:Jr,info:Jr,warn:Jr,error:Jr},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=ii,this.Event=Cr,this.Breadcrumb=ri,this.Session=ls,this._config=this._configure(di,Si),Ut(Si.concat(this._config.plugins),function(tr){tr&&Pi._loadPlugin(tr)}),this._depth=1;var Yi=this,Vi=this.notify;this.notify=function(){return Vi.apply(Yi,arguments)}}var oi=ii.prototype;return oi.addMetadata=function(ci,Si,Ii){return Hi.add(this._metadata,ci,Si,Ii)},oi.getMetadata=function(ci,Si){return Hi.get(this._metadata,ci,Si)},oi.clearMetadata=function(ci,Si){return Hi.clear(this._metadata,ci,Si)},oi.addFeatureFlag=function(ci,Si){Si===void 0&&(Si=null),Us(this._features,this._featuresIndex,ci,Si)},oi.addFeatureFlags=function(ci){Kn(this._features,ci,this._featuresIndex)},oi.clearFeatureFlag=function(ci){Wn(this._features,this._featuresIndex,ci)},oi.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},oi.getContext=function(){return this._context},oi.setContext=function(ci){this._context=ci},oi._configure=function(ci,Si){var Ii=C(Si,function(tr,rr){return rr&&rr.configSchema?St({},tr,rr.configSchema):tr},this._schema),Pi=C(Ye(Ii),function(tr,rr){var dr=Ii[rr].defaultValue(ci[rr]);if(ci[rr]!==void 0){var Wi=Ii[rr].validate(ci[rr]);Wi?Ii[rr].allowPartialObject?tr.config[rr]=St(dr,ci[rr]):tr.config[rr]=ci[rr]:(tr.errors[rr]=Ii[rr].message,tr.config[rr]=dr)}else tr.config[rr]=dr;return tr},{errors:{},config:{}}),Yi=Pi.errors,Vi=Pi.config;if(Ii.apiKey){if(!Vi.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(Vi.apiKey)||(Yi.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=St({},Vi.metadata),Kn(this._features,Vi.featureFlags,this._featuresIndex),this._user=St({},Vi.user),this._context=Vi.context,Vi.logger&&(this._logger=Vi.logger),Vi.onError&&(this._cbs.e=this._cbs.e.concat(Vi.onError)),Vi.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(Vi.onBreadcrumb)),Vi.onSession&&(this._cbs.s=this._cbs.s.concat(Vi.onSession)),Ye(Yi).length&&this._logger.warn(Wr(Yi,ci)),Vi},oi.getUser=function(){return this._user},oi.setUser=function(ci,Si,Ii){this._user={id:ci,email:Si,name:Ii}},oi._loadPlugin=function(ci){var Si=ci.load(this);ci.name&&(this._plugins["~"+ci.name+"~"]=Si)},oi.getPlugin=function(ci){return this._plugins["~"+ci+"~"]},oi._setDelivery=function(ci){this._delivery=ci(this)},oi.startSession=function(){var ci=new ls;ci.app.releaseStage=this._config.releaseStage,ci.app.version=this._config.appVersion,ci.app.type=this._config.appType,ci._user=St({},this._user);var Si=$r(this._cbs.s,ci,"onSession",this._logger);return Si?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,ci)},oi.addOnError=function(ci,Si){Si===void 0&&(Si=!1),this._cbs.e[Si?"unshift":"push"](ci)},oi.removeOnError=function(ci){this._cbs.e=R(this._cbs.e,function(Si){return Si!==ci})},oi._addOnSessionPayload=function(ci){this._cbs.sp.push(ci)},oi.addOnSession=function(ci){this._cbs.s.push(ci)},oi.removeOnSession=function(ci){this._cbs.s=R(this._cbs.s,function(Si){return Si!==ci})},oi.addOnBreadcrumb=function(ci,Si){Si===void 0&&(Si=!1),this._cbs.b[Si?"unshift":"push"](ci)},oi.removeOnBreadcrumb=function(ci){this._cbs.b=R(this._cbs.b,function(Si){return Si!==ci})},oi.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},oi.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},oi.leaveBreadcrumb=function(ci,Si,Ii){if(ci=typeof ci=="string"?ci:"",Ii=typeof Ii=="string"&&Ce(x,Ii)?Ii:"manual",Si=typeof Si=="object"&&Si!==null?Si:{},!!ci){var Pi=new ri(ci,Si,Ii),Yi=$r(this._cbs.b,Pi,"onBreadcrumb",this._logger);if(Yi){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(Pi),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},oi._isBreadcrumbTypeEnabled=function(ci){var Si=this._config.enabledBreadcrumbTypes;return Si===null||Ce(Si,ci)},oi.notify=function(ci,Si,Ii){Ii===void 0&&(Ii=Jr);var Pi=Cr.create(ci,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(Pi,Si,Ii)},oi._notify=function(ci,Si,Ii){var Pi=this;if(Ii===void 0&&(Ii=Jr),ci.app=St({},ci.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),ci.context=ci.context||this._context,ci._metadata=St({},ci._metadata,this._metadata),ci._user=St({},ci._user,this._user),ci.breadcrumbs=this._breadcrumbs.slice(),Kn(ci._features,this._features,ci._featuresIndex),this._config.enabledReleaseStages!==null&&!Ce(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),Ii(null,ci);var Yi=ci.severity,Vi=function(rr){Pi._logger.error("Error occurred in onError callback, continuing anyway"),Pi._logger.error(rr)},tr=[].concat(this._cbs.e).concat(Si);Nr(tr,ci,Vi,function(rr,dr){if(rr&&Vi(rr),!dr)return Pi._logger.debug("Event not sent due to onError callback"),Ii(null,ci);Pi._isBreadcrumbTypeEnabled("error")&&ii.prototype.leaveBreadcrumb.call(Pi,ci.errors[0].errorClass,{errorClass:ci.errors[0].errorClass,errorMessage:ci.errors[0].errorMessage,severity:ci.severity},"error"),Yi!==ci.severity&&(ci._handledState.severityReason={type:"userCallbackSetSeverity"}),ci.unhandled!==ci._handledState.unhandled&&(ci._handledState.severityReason.unhandledOverridden=!0,ci._handledState.unhandled=ci.unhandled),Pi._session&&(Pi._session._track(ci),ci._session=Pi._session),Pi._delivery.sendEvent({apiKey:ci.apiKey||Pi._config.apiKey,notifier:Pi._notifier,events:[ci]},function(Wi){return Ii(Wi,ci)})})},ii}(),Wr=function(ii,oi){var di=new Error(`Invalid configuration
`+Ut(Ye(ii),function(ci){return"  - "+ci+" "+ii[ci]+", got "+Vs(oi[ci])}).join(`

`));return di},Vs=function(ii){switch(typeof ii){case"string":case"number":case"object":return JSON.stringify(ii);default:return String(ii)}},us=Xn,mn={},nn=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];mn.event=function(ii,oi){var di=Mi(ii,null,null,{redactedPaths:nn,redactedKeys:oi});return di.length>1e6&&(ii.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+di.length/1e6+`MB (limit = 1MB)
metadata was removed`},di=Mi(ii,null,null,{redactedPaths:nn,redactedKeys:oi})),di},mn.session=function(ii,oi){var di=Mi(ii,null,null);return di};var Sn={};Sn=function(ii,oi){return oi===void 0&&(oi=window),{sendEvent:function(di,ci){if(ci===void 0&&(ci=function(){}),ii._config.endpoints.notify===null){var Si=new Error("Event not sent due to incomplete endpoint configuration");return ci(Si)}var Ii=Ar(ii._config,"notify","4",oi),Pi=mn.event(di,ii._config.redactedKeys),Yi=new oi.XDomainRequest;Yi.onload=function(){ci(null)},Yi.onerror=function(){var Vi=new Error("Event failed to send");ii._logger.error("Event failed to send",Vi),Pi.length>1e6&&ii._logger.warn("Event oversized ("+(Pi.length/1e6).toFixed(2)+" MB)"),ci(Vi)},Yi.open("POST",Ii),setTimeout(function(){try{Yi.send(Pi)}catch(Vi){ii._logger.error(Vi),ci(Vi)}},0)},sendSession:function(di,ci){if(ci===void 0&&(ci=function(){}),ii._config.endpoints.sessions===null){var Si=new Error("Session not sent due to incomplete endpoint configuration");return ci(Si)}var Ii=Ar(ii._config,"sessions","1",oi),Pi=new oi.XDomainRequest;Pi.onload=function(){ci(null)},Pi.open("POST",Ii),setTimeout(function(){try{Pi.send(mn.session(di,ii._config.redactedKeys))}catch(Yi){ii._logger.error(Yi),ci(Yi)}},0)}}};var Ar=function(ii,oi,di,ci){var Si=JSON.parse(JSON.stringify(new Date)),Ii=js(ii.endpoints[oi],ci.location.protocol);return Ii+"?apiKey="+encodeURIComponent(ii.apiKey)+"&payloadVersion="+di+"&sentAt="+encodeURIComponent(Si)},js=Sn._matchPageProtocol=function(ii,oi){return oi==="http:"?ii.replace(/^https:/,"http:"):ii},Yn=function(ii,oi){return oi===void 0&&(oi=window),{sendEvent:function(di,ci){ci===void 0&&(ci=function(){});try{var Si=ii._config.endpoints.notify;if(Si===null){var Ii=new Error("Event not sent due to incomplete endpoint configuration");return ci(Ii)}var Pi=new oi.XMLHttpRequest,Yi=mn.event(di,ii._config.redactedKeys);Pi.onreadystatechange=function(){if(Pi.readyState===oi.XMLHttpRequest.DONE){var Vi=Pi.status;if(Vi===0||Vi>=400){var tr=new Error("Request failed with status "+Vi);ii._logger.error("Event failed to send",tr),Yi.length>1e6&&ii._logger.warn("Event oversized ("+(Yi.length/1e6).toFixed(2)+" MB)"),ci(tr)}else ci(null)}},Pi.open("POST",Si),Pi.setRequestHeader("Content-Type","application/json"),Pi.setRequestHeader("Bugsnag-Api-Key",di.apiKey||ii._config.apiKey),Pi.setRequestHeader("Bugsnag-Payload-Version","4"),Pi.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Pi.send(Yi)}catch(Vi){ii._logger.error(Vi)}},sendSession:function(di,ci){ci===void 0&&(ci=function(){});try{var Si=ii._config.endpoints.sessions;if(Si===null){var Ii=new Error("Session not sent due to incomplete endpoint configuration");return ci(Ii)}var Pi=new oi.XMLHttpRequest;Pi.onreadystatechange=function(){if(Pi.readyState===oi.XMLHttpRequest.DONE){var Yi=Pi.status;if(Yi===0||Yi>=400){var Vi=new Error("Request failed with status "+Yi);ii._logger.error("Session failed to send",Vi),ci(Vi)}else ci(null)}},Pi.open("POST",Si),Pi.setRequestHeader("Content-Type","application/json"),Pi.setRequestHeader("Bugsnag-Api-Key",ii._config.apiKey),Pi.setRequestHeader("Bugsnag-Payload-Version","1"),Pi.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Pi.send(mn.session(di,ii._config.redactedKeys))}catch(Yi){ii._logger.error(Yi)}}}},Bn=new Date,cs=function(){Bn=new Date},gn={name:"appDuration",load:function(ii){return ii.addOnError(function(oi){var di=new Date;oi.app.duration=di-Bn},!0),{reset:cs}}},Mr=function(ii){return ii===void 0&&(ii=window),{load:function(oi){oi.addOnError(function(di){di.context===void 0&&(di.context=ii.location.pathname)},!0)}}},hs="bugsnag-anonymous-id",Qn=function(ii){try{var oi=ii.localStorage,di=oi.getItem(hs);return di&&/^c[a-z0-9]{20,32}$/.test(di)||(di=os(),oi.setItem(hs,di)),di}catch{}},Hs=function(ii,oi){return ii===void 0&&(ii=navigator),oi===void 0&&(oi=window),{load:function(di){var ci={locale:ii.browserLanguage||ii.systemLanguage||ii.userLanguage||ii.language,userAgent:ii.userAgent};oi&&oi.screen&&oi.screen.orientation&&oi.screen.orientation.type?ci.orientation=oi.screen.orientation.type:oi&&oi.document&&(ci.orientation=oi.document.documentElement.clientWidth>oi.document.documentElement.clientHeight?"landscape":"portrait"),di._config.generateAnonymousId&&(ci.id=Qn(oi)),di.addOnSession(function(Si){Si.device=St({},Si.device,ci),di._config.collectUserIp||Jn(Si)}),di.addOnError(function(Si){Si.device=St({},Si.device,ci,{time:new Date}),di._config.collectUserIp||Jn(Si)},!0)},configSchema:{generateAnonymousId:{validate:function(di){return di===!0||di===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},Jn=function(ii){var oi=ii.getUser();(!oi||!oi.id)&&ii.setUser(ii.device.id)},qs=function(ii){return ii===void 0&&(ii=window),{load:function(oi){oi.addOnError(function(di){di.request&&di.request.url||(di.request=St({},di.request,{url:ii.location.href}))},!0)}}},Is={load:function(ii){ii._sessionDelegate=ds}},ds={startSession:function(ii,oi){var di=ii;return di._session=oi,di._pausedSession=null,di._config.enabledReleaseStages!==null&&!Ce(di._config.enabledReleaseStages,di._config.releaseStage)?(di._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),di):(di._delivery.sendSession({notifier:di._notifier,device:oi.device,app:oi.app,sessions:[{id:oi.id,startedAt:oi.startedAt,user:oi._user}]}),di)},resumeSession:function(ii){return ii._session?ii:ii._pausedSession?(ii._session=ii._pausedSession,ii._pausedSession=null,ii):ii.startSession()},pauseSession:function(ii){ii._pausedSession=ii._session,ii._session=null}},fs={load:function(ii){ii._config.collectUserIp||ii.addOnError(function(oi){oi._user&&typeof oi._user.id>"u"&&delete oi._user.id,oi._user=St({id:"[REDACTED]"},oi._user),oi.request=St({clientIp:"[REDACTED]"},oi.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(ii){return ii===!0||ii===!1}}}},ps={};ps.load=function(ii){var oi=/^(local-)?dev(elopment)?$/.test(ii._config.releaseStage);oi||!ii._isBreadcrumbTypeEnabled("log")||Ut(yn,function(di){var ci=console[di];console[di]=function(){for(var Si=arguments.length,Ii=new Array(Si),Pi=0;Pi<Si;Pi++)Ii[Pi]=arguments[Pi];ii.leaveBreadcrumb("Console output",C(Ii,function(Yi,Vi,tr){var rr="[Unknown value]";try{rr=String(Vi)}catch{}if(rr==="[object Object]")try{rr=JSON.stringify(Vi)}catch{}return Yi["["+tr+"]"]=rr,Yi},{severity:di.indexOf("group")===0?"log":di}),"log"),ci.apply(console,Ii)},console[di]._restore=function(){console[di]=ci}})};var yn=R(["log","debug","info","warn","error"],function(ii){return typeof console<"u"&&typeof console[ii]=="function"}),ms=200,Zr=5e5,Pn=function(ii,oi){return ii===void 0&&(ii=document),oi===void 0&&(oi=window),{load:function(di){if(!di._config.trackInlineScripts)return;var ci=oi.location.href,Si="",Ii=!!ii.attachEvent,Pi=Ii?ii.readyState==="complete":ii.readyState!=="loading",Yi=function(){return ii.documentElement.outerHTML};Si=Yi();var Vi=ii.onreadystatechange;ii.onreadystatechange=function(){ii.readyState==="interactive"&&(Si=Yi(),Pi=!0);try{Vi.apply(this,arguments)}catch{}};var tr=null,rr=function(pr){tr=pr},dr=function(){var pr=ii.currentScript||tr;if(!pr&&!Pi){var Er=ii.scripts||ii.getElementsByTagName("script");pr=Er[Er.length-1]}return pr},Wi=function(pr){(!Pi||!Si)&&(Si=Yi());var Er=["<!-- DOC START -->"].concat(Si.split(`
`)),Lr=pr-1,kr=Math.max(Lr-3,0),Fr=Math.min(Lr+3,Er.length);return C(Er.slice(kr,Fr),function(Rr,tn,Cn){return Rr[kr+1+Cn]=tn.length<=ms?tn:tn.substr(0,ms),Rr},{})};di.addOnError(function(pr){pr.errors[0].stacktrace=R(pr.errors[0].stacktrace,function(Rr){return!/__trace__$/.test(Rr.method)});var Er=pr.errors[0].stacktrace[0],Lr=function(Rr){return Rr.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(Er&&Er.file&&Lr(Er.file)!==Lr(ci))){var kr=dr();if(kr){var Fr=kr.innerHTML;pr.addMetadata("script","content",Fr.length<=Zr?Fr:Fr.substr(0,Zr)),Er&&Er.lineNumber&&(Er.code=Wi(Er.lineNumber))}}},!0);var ar=Ut(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(pr){return Zn(oi,pr,function(Er){return Pr(Er,function(Lr){return{get:function(){return Lr[0]},replace:function(kr){Lr[0]=kr}}})})}),gr=ar[0];Ut(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(pr){!oi[pr]||!oi[pr].prototype||!Object.prototype.hasOwnProperty.call(oi[pr].prototype,"addEventListener")||(Zn(oi[pr].prototype,"addEventListener",function(Er){return Pr(Er,In)}),Zn(oi[pr].prototype,"removeEventListener",function(Er){return Pr(Er,In,!0)}))});function Pr(pr,Er,Lr){return Lr===void 0&&(Lr=!1),function(){var kr=[].slice.call(arguments);try{var Fr=Er(kr),Rr=Fr.get();if(Lr&&pr.apply(this,kr),typeof Rr!="function")return pr.apply(this,kr);if(Rr.__trace__)Fr.replace(Rr.__trace__);else{var tn=dr();Rr.__trace__=function(){rr(tn),gr(function(){rr(null)},0);var Ws=Rr.apply(this,arguments);return rr(null),Ws},Rr.__trace__.__trace__=Rr.__trace__,Fr.replace(Rr.__trace__)}}catch{}if(pr.apply)return pr.apply(this,kr);switch(kr.length){case 1:return pr(kr[0]);case 2:return pr(kr[0],kr[1]);default:return pr()}}}},configSchema:{trackInlineScripts:{validate:function(di){return di===!0||di===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Zn(ii,oi,di){var ci=ii[oi];if(!ci)return ci;var Si=di(ci);return ii[oi]=Si,ci}function In(ii){var oi=!!ii[1]&&typeof ii[1].handleEvent=="function";return{get:function(){return oi?ii[1].handleEvent:ii[1]},replace:function(di){oi?ii[1].handleEvent=di:ii[1]=di}}}var Un=function(ii){return ii===void 0&&(ii=window),{load:function(oi){"addEventListener"in ii&&oi._isBreadcrumbTypeEnabled("user")&&ii.addEventListener("click",function(di){var ci,Si;try{ci=xn(di.target),Si=Ds(di.target,ii)}catch{ci="[hidden]",Si="[hidden]",oi._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}oi.leaveBreadcrumb("UI click",{targetText:ci,targetSelector:Si},"user")},!0)}}},Vn=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function xn(ii){var oi=ii.textContent||ii.innerText||"";return!oi&&(ii.type==="submit"||ii.type==="button")&&(oi=ii.value),oi=oi.replace(Vn,"$1"),oi.length>140?oi.slice(0,135)+"(...)":oi}function Ds(ii,oi){var di=[ii.tagName];if(ii.id&&di.push("#"+ii.id),ii.className&&ii.className.length&&di.push("."+ii.className.split(" ").join(".")),!oi.document.querySelectorAll||!Array.prototype.indexOf)return di.join("");try{if(oi.document.querySelectorAll(di.join("")).length===1)return di.join("")}catch{return di.join("")}if(ii.parentNode.childNodes.length>1){var ci=Array.prototype.indexOf.call(ii.parentNode.childNodes,ii)+1;di.push(":nth-child("+ci+")")}return oi.document.querySelectorAll(di.join("")).length===1?di.join(""):ii.parentNode?Ds(ii.parentNode,oi)+" > "+di.join(""):di.join("")}var gs={};gs=function(ii){ii===void 0&&(ii=window);var oi={load:function(di){if("addEventListener"in ii&&di._isBreadcrumbTypeEnabled("navigation")){var ci=function(Si){return function(){return di.leaveBreadcrumb(Si,{},"navigation")}};ii.addEventListener("pagehide",ci("Page hidden"),!0),ii.addEventListener("pageshow",ci("Page shown"),!0),ii.addEventListener("load",ci("Page loaded"),!0),ii.document.addEventListener("DOMContentLoaded",ci("DOMContentLoaded"),!0),ii.addEventListener("load",function(){return ii.addEventListener("popstate",ci("Navigated back"),!0)}),ii.addEventListener("hashchange",function(Si){var Ii=Si.oldURL?{from:jn(Si.oldURL,ii),to:jn(Si.newURL,ii),state:Hn(ii)}:{to:jn(ii.location.href,ii)};di.leaveBreadcrumb("Hash changed",Ii,"navigation")},!0),ii.history.pushState&&Yr(di,ii.history,"pushState",ii,!0),ii.history.replaceState&&Yr(di,ii.history,"replaceState",ii)}}};return oi};var jn=function(ii,oi){var di=oi.document.createElement("A");return di.href=ii,""+di.pathname+di.search+di.hash},es=function(ii,oi,di,ci){var Si=jn(ii.location.href,ii);return{title:di,state:oi,prevState:Hn(ii),to:ci||Si,from:Si}},Yr=function(ii,oi,di,ci,Si){Si===void 0&&(Si=!1);var Ii=oi[di];oi[di]=function(Pi,Yi,Vi){ii.leaveBreadcrumb("History "+di,es(ci,Pi,Yi,Vi),"navigation"),Si&&typeof ii.resetEventCount=="function"&&ii.resetEventCount(),Ii.apply(oi,[Pi,Yi].concat(Vi!==void 0?Vi:[]))}},Hn=function(ii){try{return ii.history.state}catch{}},sn="request",ys=function(ii,oi){ii===void 0&&(ii=[]),oi===void 0&&(oi=window);var di={load:function(ci){if(!ci._isBreadcrumbTypeEnabled("request"))return;var Si=[ci._config.endpoints.notify,ci._config.endpoints.sessions].concat(ii);Ii(),Vi();function Ii(){if(!(!("addEventListener"in oi.XMLHttpRequest.prototype)||!("WeakMap"in oi))){var dr=new WeakMap,Wi=new WeakMap,ar=oi.XMLHttpRequest.prototype.open;oi.XMLHttpRequest.prototype.open=function(pr,Er){this&&dr.set(this,{method:pr,url:Er}),ar.apply(this,arguments)};var gr=oi.XMLHttpRequest.prototype.send;oi.XMLHttpRequest.prototype.send=function(pr){var Er=this,Lr=dr.get(this);if(Lr){var kr=Wi.get(this);kr&&(this.removeEventListener("load",kr.load),this.removeEventListener("error",kr.error));var Fr=new Date,Rr=function(){return Yi(Lr.method,Lr.url,Dn(Fr))},tn=function(){return Pi(Lr.method,Lr.url,Er.status,Dn(Fr))};this.addEventListener("load",tn),this.addEventListener("error",Rr),this&&Wi.set(this,{load:tn,error:Rr})}gr.apply(this,arguments)}}}function Pi(dr,Wi,ar,gr){if(Wi===void 0){ci._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof Wi=="string"&&Ce(Si,Wi.replace(/\?.*$/,"")))){var Pr={status:ar,method:String(dr),url:String(Wi),duration:gr};ar>=400?ci.leaveBreadcrumb("XMLHttpRequest failed",Pr,sn):ci.leaveBreadcrumb("XMLHttpRequest succeeded",Pr,sn)}}function Yi(dr,Wi,ar){if(Wi===void 0){ci._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof Wi=="string"&&Ce(Si,Wi.replace(/\?.*$/,""))||ci.leaveBreadcrumb("XMLHttpRequest error",{method:String(dr),url:String(Wi),duration:ar},sn)}function Vi(){if(!(!("fetch"in oi)||oi.fetch.polyfill)){var dr=oi.fetch;oi.fetch=function(){var ar=arguments,gr=arguments[0],Pr=arguments[1],pr,Er=null;return gr&&typeof gr=="object"?(Er=gr.url,Pr&&"method"in Pr?pr=Pr.method:gr&&"method"in gr&&(pr=gr.method)):(Er=gr,Pr&&"method"in Pr&&(pr=Pr.method)),pr===void 0&&(pr="GET"),new Promise(function(Lr,kr){var Fr=new Date;dr.apply(void 0,ar).then(function(Rr){tr(Rr,pr,Er,Dn(Fr)),Lr(Rr)}).catch(function(Rr){rr(pr,Er,Dn(Fr)),kr(Rr)})})}}}var tr=function(dr,Wi,ar,gr){var Pr={method:String(Wi),status:dr.status,url:String(ar),duration:gr};dr.status>=400?ci.leaveBreadcrumb("fetch() failed",Pr,sn):ci.leaveBreadcrumb("fetch() succeeded",Pr,sn)},rr=function(dr,Wi,ar){ci.leaveBreadcrumb("fetch() error",{method:String(dr),url:String(Wi),duration:ar},sn)}}};return di},Dn=function(ii){return ii&&new Date-ii},en={load:function(ii){var oi=0;ii.addOnError(function(di){if(oi>=ii._config.maxEvents)return ii._logger.warn("Cancelling event send due to maxEvents per session limit of "+ii._config.maxEvents+" being reached"),!1;oi++}),ii.resetEventCount=function(){oi=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer 100",validate:function(ii){return et(1,100)(ii)}}}},vs={};vs={load:function(ii){ii.addOnError(function(oi){var di=C(oi.errors,function(ci,Si){return ci.concat(Si.stacktrace)},[]);Ut(di,function(ci){ci.file=ts(ci.file)})})}};var ts=vs._strip=function(ii){return typeof ii=="string"?ii.replace(/\?.*$/,"").replace(/#.*$/,""):ii},qn=function(ii,oi){return ii===void 0&&(ii=window),oi===void 0&&(oi="window onerror"),{load:function(di){if(!di._config.autoDetectErrors||!di._config.enabledErrorTypes.unhandledExceptions)return;function ci(Ii,Pi,Yi,Vi,tr){if(Yi===0&&/Script error\.?/.test(Ii))di._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var rr={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},dr;if(tr)dr=di.Event.create(tr,!0,rr,oi,1),Gn(dr.errors[0].stacktrace,Pi,Yi,Vi);else if(typeof Ii=="object"&&Ii!==null&&(!Pi||typeof Pi!="string")&&!Yi&&!Vi&&!tr){var Wi=Ii.type?"Event: "+Ii.type:"Error",ar=Ii.message||Ii.detail||"";dr=di.Event.create({name:Wi,message:ar},!0,rr,oi,1),dr.originalError=Ii,dr.addMetadata(oi,{event:Ii,extraParameters:Pi})}else dr=di.Event.create(Ii,!0,rr,oi,1),Gn(dr.errors[0].stacktrace,Pi,Yi,Vi);di._notify(dr)}typeof Si=="function"&&Si.apply(this,arguments)}var Si=ii.onerror;ii.onerror=ci}}},Gn=function(ii,oi,di,ci){ii[0]||ii.push({});var Si=ii[0];!Si.file&&typeof oi=="string"&&(Si.file=oi),!Si.lineNumber&&an(di)&&(Si.lineNumber=di),Si.columnNumber||(an(ci)?Si.columnNumber=ci:window.event&&an(window.event.errorCharacter)&&(Si.columnNumber=window.event.errorCharacter))},an=function(ii){return typeof ii=="number"&&String.call(ii)!=="NaN"},vn=function(ii){ii===void 0&&(ii=window);var oi={load:function(di){if(!(!di._config.autoDetectErrors||!di._config.enabledErrorTypes.unhandledRejections)){var ci=function(Si){var Ii=Si.reason,Pi=!1;try{Si.detail&&Si.detail.reason&&(Ii=Si.detail.reason,Pi=!0)}catch{}var Yi=!di._config.reportUnhandledPromiseRejectionsAsHandled,Vi=di.Event.create(Ii,!1,{severity:"error",unhandled:Yi,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,di._logger);Pi&&Ut(Vi.errors[0].stacktrace,ks(Ii)),di._notify(Vi,function(tr){if(_r(tr.originalError)&&!tr.originalError.stack){var rr;tr.addMetadata("unhandledRejection handler",(rr={},rr[Object.prototype.toString.call(tr.originalError)]={name:tr.originalError.name,message:tr.originalError.message,code:tr.originalError.code},rr))}})};"addEventListener"in ii?ii.addEventListener("unhandledrejection",ci):ii.onunhandledrejection=function(Si,Ii){ci({detail:{reason:Si,promise:Ii}})}}}};return oi},ks=function(ii){return function(oi){oi.file!==ii.toString()&&oi.method&&(oi.method=oi.method.replace(/^\s+/,""))}},_n={},Gs="Bugsnag JavaScript",zs="8.1.2",Rs="https://github.com/bugsnag/bugsnag-js",is=St({},Ot.schema,Nt),jr={_client:null,createClient:function(ii){typeof ii=="string"&&(ii={apiKey:ii}),ii||(ii={});var oi=[gn,Hs(),Mr(),qs(),en,Is,fs,vs,qn(),vn(),gs(),Un(),ys(),ps,Pn()],di=new us(ii,is,oi,{name:Gs,version:zs,url:Rs});return di._setDelivery(window.XDomainRequest?Sn:Yn),di._logger.debug("Loaded!"),di.leaveBreadcrumb("Bugsnag loaded",{},"state"),di._config.autoTrackSessions?di.startSession():di},start:function(ii){return jr._client?(jr._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),jr._client):(jr._client=jr.createClient(ii),jr._client)},isStarted:function(){return jr._client!=null}};return Ut(["resetEventCount"].concat(Ye(us.prototype)),function(ii){/^_/.test(ii)||(jr[ii]=function(){if(!jr._client)return console.log("Bugsnag."+ii+"() was called before Bugsnag.start()");jr._client._depth+=1;var oi=jr._client[ii].apply(jr._client,arguments);return jr._client._depth-=1,oi})}),_n=jr,_n.Client=us,_n.Event=Cr,_n.Session=ls,_n.Breadcrumb=ri,_n.default=jr,_n})})(bugsnag);var bugsnagExports=bugsnag.exports,notifier=bugsnagExports;const Bugsnag=getDefaultExportFromCjs(notifier);var bugsnagVue={exports:{}};(function(E,S){(function(x){E.exports=x()})(function(){var x=this,C,R=function(Mt,St){var Ut=Mt.config.errorHandler,kt=function(Ft,Nt,Gt){var Zt={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},ri=St.Event.create(Ft,!0,Zt,"vue error handler",1),li=typeof Gt=="string"&&Gt.indexOf("runtime-")>0?Gt.split("runtime-")[1]:Gt,hi=Xe[li]||Gt;ri.addMetadata("vue",{errorInfo:hi,component:Nt?Ce(Nt):void 0,props:Nt&&Nt.$options?Nt.$options.propsData:void 0}),St._notify(ri),typeof console<"u"&&typeof console.error=="function"&&console.error(Ft),typeof Ut=="function"&&Ut.call(x,Ft,Nt,Gt)};Mt.config.errorHandler=kt};function Ce(Mt){return Mt.$parent===null?"App":Mt.$options&&Mt.$options.name?Mt.$options.name:"Anonymous"}var Ue={BEFORE_CREATE:"bc",CREATED:"c",BEFORE_MOUNT:"bm",MOUNTED:"m",BEFORE_UPDATE:"bu",UPDATED:"u",BEFORE_UNMOUNT:"bum",UNMOUNTED:"um",DEACTIVATED:"da",ACTIVATED:"a",RENDER_TRIGGERED:"rtg",RENDER_TRACKED:"rtc",ERROR_CAPTURED:"ec",SERVER_PREFETCH:"sp"},je={SETUP_FUNCTION:0,RENDER_FUNCTION:1,WATCH_GETTER:2,WATCH_CALLBACK:3,WATCH_CLEANUP:4,NATIVE_EVENT_HANDLER:5,COMPONENT_EVENT_HANDLER:6,VNODE_HOOK:7,DIRECTIVE_HOOK:8,TRANSITION_HOOK:9,APP_ERROR_HANDLER:10,APP_WARN_HANDLER:11,FUNCTION_REF:12,ASYNC_COMPONENT_LOADER:13,SCHEDULER:14},Xe=(C={},C[Ue.SERVER_PREFETCH]="serverPrefetch hook",C[Ue.BEFORE_CREATE]="beforeCreate hook",C[Ue.CREATED]="created hook",C[Ue.BEFORE_MOUNT]="beforeMount hook",C[Ue.MOUNTED]="mounted hook",C[Ue.BEFORE_UPDATE]="beforeUpdate hook",C[Ue.UPDATED]="updated",C[Ue.BEFORE_UNMOUNT]="beforeUnmount hook",C[Ue.UNMOUNTED]="unmounted hook",C[Ue.ACTIVATED]="activated hook",C[Ue.DEACTIVATED]="deactivated hook",C[Ue.ERROR_CAPTURED]="errorCaptured hook",C[Ue.RENDER_TRACKED]="renderTracked hook",C[Ue.RENDER_TRIGGERED]="renderTriggered hook",C[je.SETUP_FUNCTION]="setup function",C[je.RENDER_FUNCTION]="render function",C[je.WATCH_GETTER]="watcher getter",C[je.WATCH_CALLBACK]="watcher callback",C[je.WATCH_CLEANUP]="watcher cleanup function",C[je.NATIVE_EVENT_HANDLER]="native event handler",C[je.COMPONENT_EVENT_HANDLER]="component event handler",C[je.VNODE_HOOK]="vnode hook",C[je.DIRECTIVE_HOOK]="directive hook",C[je.TRANSITION_HOOK]="transition hook",C[je.APP_ERROR_HANDLER]="app errorHandler",C[je.APP_WARN_HANDLER]="app warnHandler",C[je.FUNCTION_REF]="ref function",C[je.ASYNC_COMPONENT_LOADER]="async component loader",C[je.SCHEDULER]="scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core .",C),Ye={},et=this;Ye=function(Mt,St){var Ut=Mt.config.errorHandler,kt=function(Ft,Nt,Gt){var Zt={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},ri=St.Event.create(Ft,!0,Zt,"vue error handler",1);ri.addMetadata("vue",{errorInfo:Gt,component:Nt?ht(Nt,!0):void 0,props:Nt?Nt.$options.propsData:void 0}),St._notify(ri),typeof console<"u"&&typeof console.error=="function"&&console.error(Ft),typeof Ut=="function"&&Ut.call(et,Ft,Nt,Gt)};Mt.config.errorHandler=kt};var ht=function(Mt,St){if(Mt.$root===Mt)return"<Root>";var Ut=typeof Mt=="function"&&Mt.cid!=null?Mt.options:Mt._isVue?Mt.$options||Mt.constructor.options:Mt||{},kt=Ut.name||Ut._componentTag,Ft=Ut.__file;if(!kt&&Ft){var Nt=Ft.match(/([^/\\]+)\.vue$/);kt=Nt&&Nt[1]}return(kt?"<"+Dt(kt)+">":"<Anonymous>")+(Ft&&St!==!1?" at "+Ft:"")},Dt=Ye.classify=function(Mt){return Mt.replace(/(?:^|[-_])(\w)/g,function(St){return St.toUpperCase()}).replace(/[-_]/g,"")},Ot={};return Ot=function(){function Mt(){var Ut=typeof window<"u"&&window.Vue;if(this.name="vue",this.lazy=arguments.length===0&&!Ut,!this.lazy&&(this.Vue=(arguments.length<=0?void 0:arguments[0])||Ut,!this.Vue))throw new Error("@bugsnag/plugin-vue reference to `Vue` was undefined")}var St=Mt.prototype;return St.load=function(kt){return this.Vue&&this.Vue.config?(Ye(this.Vue,kt),{installVueErrorHandler:function(){return kt._logger.warn("installVueErrorHandler() was called unnecessarily")}}):{install:function(Ft){Ft||kt._logger.error(new Error("@bugsnag/plugin-vue reference to Vue `app` was undefined")),R(Ft,kt)},installVueErrorHandler:function(Ft){Ft||kt._logger.error(new Error("@bugsnag/plugin-vue reference to `Vue` was undefined")),Ye(Ft,kt)}}},Mt}(),Ot.default=Ot,Ot})})(bugsnagVue);var bugsnagVueExports=bugsnagVue.exports;const BugsnagPluginVue=getDefaultExportFromCjs(bugsnagVueExports);function e$1(E,S){const x=Object.create(null),C=E.split(",");for(let R=0;R<C.length;R++)x[C[R]]=!0;return R=>!!x[R]}const t$1={},n$1=()=>{},s=Object.assign,i$1=(E,S)=>{const x=E.indexOf(S);x>-1&&E.splice(x,1)},c$1=Object.prototype.hasOwnProperty,a$1=(E,S)=>c$1.call(E,S),l=Array.isArray,u$1=E=>y(E)==="[object Map]",p=E=>y(E)==="[object Set]",f=E=>typeof E=="function",d=E=>typeof E=="string",h=E=>typeof E=="symbol",v=E=>E!==null&&typeof E=="object",_=E=>(v(E)||f(E))&&f(E.then)&&f(E.catch),g=Object.prototype.toString,y=E=>g.call(E),b=E=>y(E).slice(8,-1),m=E=>y(E)==="[object Object]",w=E=>d(E)&&E!=="NaN"&&E[0]!=="-"&&""+parseInt(E,10)===E,N=(E,S)=>!Object.is(E,S),O=(E,S,x)=>{Object.defineProperty(E,S,{configurable:!0,enumerable:!1,value:x})};let k;const V=()=>k||(k=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let P;const I=E=>{const S=new Set(E);return S.w=0,S.n=0,S},T=E=>(E.w&U)>0,M=E=>(E.n&U)>0,F=new WeakMap;let A=0,U=1;const z=30;let H;const W=Symbol(""),J=Symbol("");class K{constructor(S,x=null,C){this.fn=S,this.scheduler=x,this.active=!0,this.deps=[],this.parent=void 0,function(R,Ce=P){Ce&&Ce.active&&Ce.effects.push(R)}(this,C)}run(){if(!this.active)return this.fn();let S=H,x=B;for(;S;){if(S===this)return;S=S.parent}try{return this.parent=H,H=this,B=!0,U=1<<++A,A<=z?(({deps:C})=>{if(C.length)for(let R=0;R<C.length;R++)C[R].w|=U})(this):q(this),this.fn()}finally{A<=z&&(C=>{const{deps:R}=C;if(R.length){let Ce=0;for(let Ue=0;Ue<R.length;Ue++){const je=R[Ue];T(je)&&!M(je)?je.delete(C):R[Ce++]=je,je.w&=~U,je.n&=~U}R.length=Ce}})(this),U=1<<--A,H=this.parent,B=x,this.parent=void 0,this.deferStop&&this.stop()}}stop(){H===this?this.deferStop=!0:this.active&&(q(this),this.onStop&&this.onStop(),this.active=!1)}}function q(E){const{deps:S}=E;if(S.length){for(let x=0;x<S.length;x++)S[x].delete(E);S.length=0}}let B=!0;const L=[];function G(){L.push(B),B=!1}function Q(){const E=L.pop();B=E===void 0||E}function X(E,S,x){if(B&&H){let C=F.get(E);C||F.set(E,C=new Map);let R=C.get(x);R||C.set(x,R=I()),function(Ce,Ue){let je=!1;A<=z?M(Ce)||(Ce.n|=U,je=!T(Ce)):je=!Ce.has(H),je&&(Ce.add(H),H.deps.push(Ce))}(R)}}function Y(E,S,x,C,R,Ce){const Ue=F.get(E);if(!Ue)return;let je=[];if(S==="clear")je=[...Ue.values()];else if(x==="length"&&l(E)){const Xe=Number(C);Ue.forEach((Ye,et)=>{(et==="length"||!h(et)&&et>=Xe)&&je.push(Ye)})}else switch(x!==void 0&&je.push(Ue.get(x)),S){case"add":l(E)?w(x)&&je.push(Ue.get("length")):(je.push(Ue.get(W)),u$1(E)&&je.push(Ue.get(J)));break;case"delete":l(E)||(je.push(Ue.get(W)),u$1(E)&&je.push(Ue.get(J)));break;case"set":u$1(E)&&je.push(Ue.get(W))}if(je.length===1)je[0]&&Z(je[0]);else{const Xe=[];for(const Ye of je)Ye&&Xe.push(...Ye);Z(I(Xe))}}function Z(E,S){const x=l(E)?E:[...E];for(const C of x)C.computed&&ee(C);for(const C of x)C.computed||ee(C)}function ee(E,S){(E!==H||E.allowRecurse)&&(E.scheduler?E.scheduler():E.run())}const te=e$1("__proto__,__v_isRef,__isVue"),ne=new Set(Object.getOwnPropertyNames(Symbol).filter(E=>E!=="arguments"&&E!=="caller").map(E=>Symbol[E]).filter(h)),oe=re();function re(){const E={};return["includes","indexOf","lastIndexOf"].forEach(S=>{E[S]=function(...x){const C=qe(this);for(let Ce=0,Ue=this.length;Ce<Ue;Ce++)X(C,"get",Ce+"");const R=C[S](...x);return R===-1||R===!1?C[S](...x.map(qe)):R}}),["push","pop","shift","unshift","splice"].forEach(S=>{E[S]=function(...x){G();const C=qe(this)[S].apply(this,x);return Q(),C}}),E}function se(E){const S=qe(this);return X(S,"has",E),S.hasOwnProperty(E)}class ie{constructor(S=!1,x=!1){this._isReadonly=S,this._shallow=x}get(S,x,C){const R=this._isReadonly,Ce=this._shallow;if(x==="__v_isReactive")return!R;if(x==="__v_isReadonly")return R;if(x==="__v_isShallow")return Ce;if(x==="__v_raw"&&C===(R?Ce?Me:Te:Ce?Ie:Pe).get(S))return S;const Ue=l(S);if(!R){if(Ue&&a$1(oe,x))return Reflect.get(oe,x,C);if(x==="hasOwnProperty")return se}const je=Reflect.get(S,x,C);return(h(x)?ne.has(x):te(x))?je:(R||X(S,"get",x),Ce?je:Ge(je)?Ue&&w(x)?je:je.value:v(je)?R?Ae(je):Fe(je):je)}}class ce extends ie{constructor(S=!1){super(!1,S)}set(S,x,C,R){let Ce=S[x];if(We(Ce)&&Ge(Ce)&&!Ge(C))return!1;if(!this._shallow&&(Je(C)||We(C)||(Ce=qe(Ce),C=qe(C)),!l(S)&&Ge(Ce)&&!Ge(C)))return Ce.value=C,!0;const Ue=l(S)&&w(x)?Number(x)<S.length:a$1(S,x),je=Reflect.set(S,x,C,R);return S===qe(R)&&(Ue?N(C,Ce)&&Y(S,"set",x,C):Y(S,"add",x,C)),je}deleteProperty(S,x){const C=a$1(S,x);S[x];const R=Reflect.deleteProperty(S,x);return R&&C&&Y(S,"delete",x,void 0),R}has(S,x){const C=Reflect.has(S,x);return h(x)&&ne.has(x)||X(S,"has",x),C}ownKeys(S){return X(S,"iterate",l(S)?"length":W),Reflect.ownKeys(S)}}class ae extends ie{constructor(S=!1){super(!0,S)}set(S,x){return!0}deleteProperty(S,x){return!0}}const le=new ce,ue=new ae;new ae(!0);const fe=E=>E,de=E=>Reflect.getPrototypeOf(E);function he(E,S,x=!1,C=!1){const R=qe(E=E.__v_raw),Ce=qe(S);x||(N(S,Ce)&&X(R,"get",S),X(R,"get",Ce));const{has:Ue}=de(R),je=C?fe:x?Le:Be;return Ue.call(R,S)?je(E.get(S)):Ue.call(R,Ce)?je(E.get(Ce)):void(E!==R&&E.get(S))}function ve(E,S=!1){const x=this.__v_raw,C=qe(x),R=qe(E);return S||(N(E,R)&&X(C,"has",E),X(C,"has",R)),E===R?x.has(E):x.has(E)||x.has(R)}function _e(E,S=!1){return E=E.__v_raw,!S&&X(qe(E),"iterate",W),Reflect.get(E,"size",E)}function ge(E){E=qe(E);const S=qe(this);return de(S).has.call(S,E)||(S.add(E),Y(S,"add",E,E)),this}function ye(E,S){S=qe(S);const x=qe(this),{has:C,get:R}=de(x);let Ce=C.call(x,E);Ce||(E=qe(E),Ce=C.call(x,E));const Ue=R.call(x,E);return x.set(E,S),Ce?N(S,Ue)&&Y(x,"set",E,S):Y(x,"add",E,S),this}function be(E){const S=qe(this),{has:x,get:C}=de(S);let R=x.call(S,E);R||(E=qe(E),R=x.call(S,E)),C&&C.call(S,E);const Ce=S.delete(E);return R&&Y(S,"delete",E,void 0),Ce}function me(){const E=qe(this),S=E.size!==0,x=E.clear();return S&&Y(E,"clear",void 0,void 0),x}function we(E,S){return function(x,C){const R=this,Ce=R.__v_raw,Ue=qe(Ce),je=S?fe:E?Le:Be;return!E&&X(Ue,"iterate",W),Ce.forEach((Xe,Ye)=>x.call(C,je(Xe),je(Ye),R))}}function Ee(E,S,x){return function(...C){const R=this.__v_raw,Ce=qe(R),Ue=u$1(Ce),je=E==="entries"||E===Symbol.iterator&&Ue,Xe=E==="keys"&&Ue,Ye=R[E](...C),et=x?fe:S?Le:Be;return!S&&X(Ce,"iterate",Xe?J:W),{next(){const{value:ht,done:Dt}=Ye.next();return Dt?{value:ht,done:Dt}:{value:je?[et(ht[0]),et(ht[1])]:et(ht),done:Dt}},[Symbol.iterator](){return this}}}}function Ne(E){return function(...S){return E!=="delete"&&(E==="clear"?void 0:this)}}function Oe(){const E={get(R){return he(this,R)},get size(){return _e(this)},has:ve,add:ge,set:ye,delete:be,clear:me,forEach:we(!1,!1)},S={get(R){return he(this,R,!1,!0)},get size(){return _e(this)},has:ve,add:ge,set:ye,delete:be,clear:me,forEach:we(!1,!0)},x={get(R){return he(this,R,!0)},get size(){return _e(this,!0)},has(R){return ve.call(this,R,!0)},add:Ne("add"),set:Ne("set"),delete:Ne("delete"),clear:Ne("clear"),forEach:we(!0,!1)},C={get(R){return he(this,R,!0,!0)},get size(){return _e(this,!0)},has(R){return ve.call(this,R,!0)},add:Ne("add"),set:Ne("set"),delete:Ne("delete"),clear:Ne("clear"),forEach:we(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(R=>{E[R]=Ee(R,!1,!1),x[R]=Ee(R,!0,!1),S[R]=Ee(R,!1,!0),C[R]=Ee(R,!0,!0)}),[E,x,S,C]}const[ke,Ve,Se,xe]=Oe();function De(E,S){const x=S?E?xe:Se:E?Ve:ke;return(C,R,Ce)=>R==="__v_isReactive"?!E:R==="__v_isReadonly"?E:R==="__v_raw"?C:Reflect.get(a$1(x,R)&&R in C?x:C,R,Ce)}const $e={get:De(!1,!1)},Re={get:De(!0,!1)},Pe=new WeakMap,Ie=new WeakMap,Te=new WeakMap,Me=new WeakMap;function Fe(E){return We(E)?E:ze(E,!1,le,$e,Pe)}function Ae(E){return ze(E,!0,ue,Re,Te)}function ze(E,S,x,C,R){if(!v(E)||E.__v_raw&&(!S||!E.__v_isReactive))return E;const Ce=R.get(E);if(Ce)return Ce;const Ue=(je=E).__v_skip||!Object.isExtensible(je)?0:function(Ye){switch(Ye){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(b(je));var je;if(Ue===0)return E;const Xe=new Proxy(E,Ue===2?C:x);return R.set(E,Xe),Xe}function He(E){return We(E)?He(E.__v_raw):!(!E||!E.__v_isReactive)}function We(E){return!(!E||!E.__v_isReadonly)}function Je(E){return!(!E||!E.__v_isShallow)}function qe(E){const S=E&&E.__v_raw;return S?qe(S):E}const Be=E=>v(E)?Fe(E):E,Le=E=>v(E)?Ae(E):E;function Ge(E){return!(!E||E.__v_isRef!==!0)}const Qe={get:(E,S,x)=>{return Ge(C=Reflect.get(E,S,x))?C.value:C;var C},set:(E,S,x,C)=>{const R=E[S];return Ge(R)&&!Ge(x)?(R.value=x,!0):Reflect.set(E,S,x,C)}};function nt(E,S,x,C){let R;try{R=C?E(...C):E()}catch(Ce){rt(Ce,S,x)}return R}function ot(E,S,x,C){if(f(E)){const Ce=nt(E,S,x,C);return Ce&&_(Ce)&&Ce.catch(Ue=>{rt(Ue,S,x)}),Ce}const R=[];for(let Ce=0;Ce<E.length;Ce++)R.push(ot(E[Ce],S,x,C));return R}function rt(E,S,x,C=!0){const R=S?S.vnode:null;if(S){let Ce=S.parent;const Ue=S.proxy,je=x;for(;Ce;){const Ye=Ce.ec;if(Ye){for(let et=0;et<Ye.length;et++)if(Ye[et](E,Ue,je)===!1)return}Ce=Ce.parent}const Xe=S.appContext.config.errorHandler;if(Xe)return void nt(Xe,null,10,[E,Ue,je])}(function(Ce,Ue,je,Xe=!0){console.error(Ce)})(E,x,R,C)}let st=!1,it=!1;const ct=[];let at=0;const lt=[];let ut=null,pt=0;const ft=Promise.resolve();let dt=null;function vt(E){const S=dt||ft;return E?S.then(this?E.bind(this):E):S}function _t(E){ct.length&&ct.includes(E,st&&E.allowRecurse?at+1:at)||(E.id==null?ct.push(E):ct.splice(function(S){let x=at+1,C=ct.length;for(;x<C;){const R=x+C>>>1,Ce=ct[R],Ue=bt(Ce);Ue<S||Ue===S&&Ce.pre?x=R+1:C=R}return x}(E.id),0,E),gt())}function gt(){st||it||(it=!0,dt=ft.then(wt))}function yt(E){l(E)?lt.push(...E):ut&&ut.includes(E,E.allowRecurse?pt+1:pt)||lt.push(E),gt()}const bt=E=>E.id==null?1/0:E.id,mt=(E,S)=>{const x=bt(E)-bt(S);if(x===0){if(E.pre&&!S.pre)return-1;if(S.pre&&!E.pre)return 1}return x};function wt(E){it=!1,st=!0,ct.sort(mt);try{for(at=0;at<ct.length;at++){const S=ct[at];S&&S.active!==!1&&nt(S,null,14)}}finally{at=0,ct.length=0,function(S){if(lt.length){const x=[...new Set(lt)];if(lt.length=0,ut)return void ut.push(...x);for(ut=x,ut.sort((C,R)=>bt(C)-bt(R)),pt=0;pt<ut.length;pt++)ut[pt]();ut=null,pt=0}}(),st=!1,dt=null,(ct.length||lt.length)&&wt()}}const Rt={};function Ct(E,S,{immediate:x,deep:C,flush:R,onTrack:Ce,onTrigger:Ue}=t$1){var je;const Xe=P===((je=pn)==null?void 0:je.scope)?pn:null;let Ye,et,ht=!1,Dt=!1;if(Ge(E)?(Ye=()=>E.value,ht=Je(E)):He(E)?(Ye=()=>E,C=!0):l(E)?(Dt=!0,ht=E.some(Ft=>He(Ft)||Je(Ft)),Ye=()=>E.map(Ft=>Ge(Ft)?Ft.value:He(Ft)?Pt(Ft):f(Ft)?nt(Ft,Xe,2):void 0)):f(E)?Ye=S?()=>nt(E,Xe,2):()=>{if(!Xe||!Xe.isUnmounted)return et&&et(),ot(E,Xe,3,[Ot])}:Ye=n$1,S&&C){const Ft=Ye;Ye=()=>Pt(Ft())}let Ot=Ft=>{et=kt.onStop=()=>{nt(Ft,Xe,4),et=kt.onStop=void 0}},Mt=Dt?new Array(E.length).fill(Rt):Rt;const St=()=>{if(kt.active)if(S){const Ft=kt.run();(C||ht||(Dt?Ft.some((Nt,Gt)=>N(Nt,Mt[Gt])):N(Ft,Mt)))&&(et&&et(),ot(S,Xe,3,[Ft,Mt===Rt?void 0:Dt&&Mt[0]===Rt?[]:Mt,Ot]),Mt=Ft)}else kt.run()};let Ut;St.allowRecurse=!!S,R==="sync"?Ut=St:R==="post"?Ut=()=>Lt(St,Xe&&Xe.suspense):(St.pre=!0,Xe&&(St.id=Xe.uid),Ut=()=>_t(St));const kt=new K(Ye,Ut);return S?x?St():Mt=kt.run():R==="post"?Lt(kt.run.bind(kt),Xe&&Xe.suspense):kt.run(),()=>{kt.stop(),Xe&&Xe.scope&&i$1(Xe.scope.effects,kt)}}function jt(E,S,x){const C=this.proxy,R=d(E)?E.includes(".")?function(Xe,Ye){const et=Ye.split(".");return()=>{let ht=Xe;for(let Dt=0;Dt<et.length&&ht;Dt++)ht=ht[et[Dt]];return ht}}(C,E):()=>C[E]:E.bind(C,C);let Ce;f(S)?Ce=S:(Ce=S.handler,x=S);const Ue=pn;dn(this);const je=Ct(R,Ce.bind(C),x);return Ue?dn(Ue):hn(),je}function Pt(E,S){if(!v(E)||E.__v_skip||(S=S||new Set).has(E))return E;if(S.add(E),Ge(E))Pt(E.value,S);else if(l(E))for(let x=0;x<E.length;x++)Pt(E[x],S);else if(p(E)||u$1(E))E.forEach(x=>{Pt(x,S)});else if(m(E))for(const x in E)Pt(E[x],S);return E}const It=E=>E?4&E.vnode.shapeFlag?function(S){if(S.exposed)return S.exposeProxy||(S.exposeProxy=new Proxy((C=S.exposed,O(C,"__v_skip",!0),He(x=C)?x:new Proxy(x,Qe)),{get:(R,Ce)=>Ce in R?R[Ce]:Ce in Tt?Tt[Ce](S):void 0,has:(R,Ce)=>Ce in R||Ce in Tt}));var x,C}(E)||E.proxy:It(E.parent):null,Tt=s(Object.create(null),{$:E=>E,$el:E=>E.vnode.el,$data:E=>E.data,$props:E=>E.props,$attrs:E=>E.attrs,$slots:E=>E.slots,$refs:E=>E.refs,$parent:E=>It(E.parent),$root:E=>It(E.root),$emit:E=>E.emit,$options:E=>function(S){const x=S.type,{mixins:C,extends:R}=x,{mixins:Ce,optionsCache:Ue,config:{optionMergeStrategies:je}}=S.appContext,Xe=Ue.get(x);let Ye;return Xe?Ye=Xe:Ce.length||C||R?(Ye={},Ce.length&&Ce.forEach(et=>zt(Ye,et,je,!0)),zt(Ye,x,je)):Ye=x,v(x)&&Ue.set(x,Ye),Ye}(E),$forceUpdate:E=>E.f||(E.f=()=>_t(E.update)),$nextTick:E=>E.n||(E.n=vt.bind(E.proxy)),$watch:E=>jt.bind(E)});function At(E){return l(E)?E.reduce((S,x)=>(S[x]=null,S),{}):E}function zt(E,S,x,C=!1){const{mixins:R,extends:Ce}=S;Ce&&zt(E,Ce,x,!0),R&&R.forEach(Ue=>zt(E,Ue,x,!0));for(const Ue in S)if(!(C&&Ue==="expose")){const je=Ht[Ue]||x&&x[Ue];E[Ue]=je?je(E[Ue],S[Ue]):S[Ue]}return E}const Ht={data:Wt,props:Bt,emits:Bt,methods:qt,computed:qt,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:qt,directives:qt,watch:function(E,S){if(!E)return S;if(!S)return E;const x=s(Object.create(null),E);for(const C in S)x[C]=Kt(E[C],S[C]);return x},provide:Wt,inject:function(E,S){return qt(Jt(E),Jt(S))}};function Wt(E,S){return S?E?function(){return s(f(E)?E.call(this,this):E,f(S)?S.call(this,this):S)}:S:E}function Jt(E){if(l(E)){const S={};for(let x=0;x<E.length;x++)S[E[x]]=E[x];return S}return E}function Kt(E,S){return E?[...new Set([].concat(E,S))]:S}function qt(E,S){return E?s(Object.create(null),E,S):S}function Bt(E,S){return E?l(E)&&l(S)?[...new Set([...E,...S])]:s(Object.create(null),At(E),At(S??{})):S}const Lt=function(E,S){S&&S.pendingBranch?l(E)?S.effects.push(...E):S.effects.push(E):yt(E)};let ln,un,pn=null,fn="__VUE_INSTANCE_SETTERS__";(un=V()[fn])||(un=V()[fn]=[]),un.push(E=>pn=E),ln=E=>{un.length>1?un.forEach(S=>S(E)):un[0](E)};const dn=E=>{ln(E),E.scope.on()},hn=()=>{pn&&pn.scope.off(),ln(null)};function wn(E,S,x){if(arguments.length===2)for(var C,R=0,Ce=S.length;R<Ce;R++)!C&&R in S||(C||(C=Array.prototype.slice.call(S,0,R)),C[R]=S[R]);return E.concat(C||Array.prototype.slice.call(S))}function En(E,S){if(E===S)return!0;if(typeof E=="object"){for(var x in E)if(!En(E[x],S[x]))return!1;return!0}return!1}var Nn=function(){function E(S,x){this.el=S,this.observer=null,this.frozen=!1,this.createObserver(x)}return Object.defineProperty(E.prototype,"threshold",{get:function(){return this.options.intersection&&this.options.intersection.threshold||0},enumerable:!1,configurable:!0}),E.prototype.createObserver=function(S){var x=this;if(this.observer&&this.destroyObserver(),!this.frozen){var C;if(this.options=typeof(C=S)=="function"?{callback:C}:C,this.callback=function(Ce,Ue){x.options.callback(Ce,Ue),Ce&&x.options.once&&(x.frozen=!0,x.destroyObserver())},this.callback&&this.options.throttle){var R=(this.options.throttleOptions||{}).leading;this.callback=function(Ce,Ue,je){var Xe,Ye,et;je===void 0&&(je={});var ht=function(Dt){for(var Ot=[],Mt=1;Mt<arguments.length;Mt++)Ot[Mt-1]=arguments[Mt];if(et=Ot,!Xe||Dt!==Ye){var St=je.leading;typeof St=="function"&&(St=St(Dt,Ye)),Xe&&Dt===Ye||!St||Ce.apply(void 0,wn([Dt],et,!1)),Ye=Dt,clearTimeout(Xe),Xe=setTimeout(function(){Ce.apply(void 0,wn([Dt],et,!1)),Xe=0},Ue)}};return ht._clear=function(){clearTimeout(Xe),Xe=null},ht}(this.callback,this.options.throttle,{leading:function(Ce){return R==="both"||R==="visible"&&Ce||R==="hidden"&&!Ce}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(Ce){var Ue=Ce[0];if(Ce.length>1){var je=Ce.find(function(Ye){return Ye.isIntersecting});je&&(Ue=je)}if(x.callback){var Xe=Ue.isIntersecting&&Ue.intersectionRatio>=x.threshold;if(Xe===x.oldResult)return;x.oldResult=Xe,x.callback(Xe,Ue)}},this.options.intersection),vt(function(){x.observer&&x.observer.observe(x.el)})}},E.prototype.destroyObserver=function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)},E}(),On={beforeMount:function(E,S){var x=S.value;x&&(typeof IntersectionObserver>"u"?console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill"):E._vue_visibilityState=new Nn(E,x))},updated:function(E,S){var x=S.value;if(!En(x,S.oldValue)){var C=E._vue_visibilityState;x&&C&&C.createObserver(x)}},unmounted:function(E){var S=E._vue_visibilityState;S&&(S.destroyObserver(),delete E._vue_visibilityState)}},kn={install:function(E){E.directive("observe-visibility",On)}};function touchX(E){return E.type.indexOf("mouse")!==-1?E.clientX:E.touches[0].clientX}function touchY(E){return E.type.indexOf("mouse")!==-1?E.clientY:E.touches[0].clientY}var isPassiveSupported=function(){var E=!1;try{var S=Object.defineProperty({},"passive",{get:function(){E=!0}});window.addEventListener("test",null,S)}catch{}return E}(),vueTouchEvents={install:function(E,S){var x=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100,namespace:"touch"},S);function C(St){var Ut=this.$$touchObj,kt=St.type.indexOf("touch")>=0,Ft=St.type.indexOf("mouse")>=0,Nt=this;kt&&(Ut.lastTouchStartTime=St.timeStamp),!(Ft&&Ut.lastTouchStartTime&&St.timeStamp-Ut.lastTouchStartTime<350)&&(Ut.touchStarted||(ht(this),Ut.touchStarted=!0,Ut.touchMoved=!1,Ut.swipeOutBounded=!1,Ut.startX=touchX(St),Ut.startY=touchY(St),Ut.currentX=0,Ut.currentY=0,Ut.touchStartTime=St.timeStamp,Ut.hasSwipe=Ye(this,"swipe")||Ye(this,"swipe.left")||Ye(this,"swipe.right")||Ye(this,"swipe.top")||Ye(this,"swipe.bottom"),Ye(this,"hold")&&(Ut.touchHoldTimer=setTimeout(function(){Ut.touchHoldTimer=null,et(St,Nt,"hold")},Ut.options.touchHoldTolerance)),et(St,this,"press")))}function R(St){var Ut=this.$$touchObj,kt=touchX(St),Ft=touchY(St),Nt=Ut.currentX!=kt||Ut.currentY!=Ft;if(Ut.currentX=kt,Ut.currentY=Ft,Ut.touchMoved){if(Ut.hasSwipe&&!Ut.swipeOutBounded){var Zt=Ut.options.swipeTolerance;Ut.swipeOutBounded=Math.abs(Ut.startX-Ut.currentX)>Zt&&Math.abs(Ut.startY-Ut.currentY)>Zt}}else{var Gt=Ut.options.tapTolerance;Ut.touchMoved=Math.abs(Ut.startX-Ut.currentX)>Gt||Math.abs(Ut.startY-Ut.currentY)>Gt,Ut.touchMoved&&(Ot(Ut),et(St,this,"drag.once"))}if(Ye(this,"rollover")&&Nt){var ri=St.timeStamp,li=Ut.options.rollOverFrequency;(Ut.touchRollTime==null||ri>Ut.touchRollTime+li)&&(Ut.touchRollTime=ri,et(St,this,"rollover"))}if(Ye(this,"drag")&&Ut.touchStarted&&Ut.touchMoved&&Nt){var ri=St.timeStamp,li=Ut.options.dragFrequency;(Ut.touchDragTime==null||ri>Ut.touchDragTime+li)&&(Ut.touchDragTime=ri,et(St,this,"drag"))}}function Ce(){var St=this.$$touchObj;Ot(St),Dt(this),St.touchStarted=St.touchMoved=!1,St.startX=St.startY=0}function Ue(St){var Ut=this.$$touchObj,kt=St.type.indexOf("touch")>=0,Ft=St.type.indexOf("mouse")>=0;kt&&(Ut.lastTouchEndTime=St.timeStamp);var Nt=kt&&!Ut.touchHoldTimer;if(Ot(Ut),Ut.touchStarted=!1,Dt(this),!(Ft&&Ut.lastTouchEndTime&&St.timeStamp-Ut.lastTouchEndTime<350))if(et(St,this,"release"),Ut.touchMoved){if(Ut.hasSwipe&&!Ut.swipeOutBounded){var Gt=Ut.options.swipeTolerance,Zt,ri=Math.abs(Ut.startY-Ut.currentY),li=Math.abs(Ut.startX-Ut.currentX);(ri>Gt||li>Gt)&&(ri>li?Zt=Ut.startY>Ut.currentY?"top":"bottom":Zt=Ut.startX>Ut.currentX?"left":"right",Ye(this,"swipe."+Zt)?et(St,this,"swipe."+Zt,Zt):et(St,this,"swipe",Zt))}}else if(Ye(this,"longtap")&&St.timeStamp-Ut.touchStartTime>Ut.options.longTapTimeInterval)St.cancelable&&St.preventDefault(),et(St,this,"longtap");else if(Ye(this,"hold")&&Nt){St.cancelable&&St.preventDefault();return}else et(St,this,"tap")}function je(){ht(this)}function Xe(){Dt(this)}function Ye(St,Ut){var kt=St.$$touchObj.callbacks[Ut];return kt!=null&&kt.length>0}function et(St,Ut,kt,Ft){var Nt=Ut.$$touchObj,Gt=Nt.callbacks[kt];if(Gt==null||Gt.length===0)return null;for(var Zt=0;Zt<Gt.length;Zt++){var ri=Gt[Zt];ri.modifiers.stop&&St.stopPropagation(),ri.modifiers.prevent&&St.preventDefault(),!(ri.modifiers.self&&St.target!==St.currentTarget)&&typeof ri.value=="function"&&(Ft?ri.value(Ft,St):ri.value(St))}}function ht(St){var Ut=St.$$touchObj.options.touchClass;Ut&&St.classList.add(Ut)}function Dt(St){var Ut=St.$$touchObj.options.touchClass;Ut&&St.classList.remove(Ut)}function Ot(St){St&&St.touchHoldTimer&&(clearTimeout(St.touchHoldTimer),St.touchHoldTimer=null)}function Mt(St,Ut){var kt=St.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:x};return Ut&&(kt.options=Object.assign({},kt.options,Ut)),St.$$touchObj=kt,St.$$touchObj}E.directive(x.namespace,{beforeMount:function(St,Ut){var kt=Mt(St),Ft=isPassiveSupported?{passive:!0}:!1,Nt=Ut.arg||"tap";switch(Nt){case"swipe":var Gt=Ut.modifiers;if(Gt.left||Gt.right||Gt.top||Gt.bottom){for(var Zt in Ut.modifiers)if(["left","right","top","bottom"].indexOf(Zt)>=0){var ri="swipe."+Zt;kt.callbacks[ri]=kt.callbacks[ri]||[],kt.callbacks[ri].push(Ut)}}else kt.callbacks.swipe=kt.callbacks.swipe||[],kt.callbacks.swipe.push(Ut);break;case"press":case"drag":Ut.modifiers.disablePassive&&(Ft=!1);default:kt.callbacks[Nt]=kt.callbacks[Nt]||[],kt.callbacks[Nt].push(Ut)}kt.hasBindTouchEvents||(St.addEventListener("touchstart",C,Ft),St.addEventListener("touchmove",R,Ft),St.addEventListener("touchcancel",Ce),St.addEventListener("touchend",Ue),kt.options.disableClick||(St.addEventListener("mousedown",C),St.addEventListener("mousemove",R),St.addEventListener("mouseup",Ue),St.addEventListener("mouseenter",je),St.addEventListener("mouseleave",Xe)),kt.hasBindTouchEvents=!0)},unmounted:function(St){Ot(St.$$touchObj),St.removeEventListener("touchstart",C),St.removeEventListener("touchmove",R),St.removeEventListener("touchcancel",Ce),St.removeEventListener("touchend",Ue),St.$$touchObj&&!St.$$touchObj.options.disableClick&&(St.removeEventListener("mousedown",C),St.removeEventListener("mousemove",R),St.removeEventListener("mouseup",Ue),St.removeEventListener("mouseenter",je),St.removeEventListener("mouseleave",Xe)),delete St.$$touchObj}}),E.directive(`${x.namespace}-class`,{beforeMount:function(St,Ut){Mt(St,{touchClass:Ut.value})}}),E.directive(`${x.namespace}-options`,{beforeMount:function(St,Ut){Mt(St,Ut.value)}})}};const clickEventType=function(){return document.ontouchstart!==null?"click":"touchstart"},UNIQUE_ID="__vue_click_away__",onMounted=function(E,S,x){onUnmounted(E);let C=x.context,R=S.value,Ce=!1;setTimeout(function(){Ce=!0},0),E[UNIQUE_ID]=function(Ue){if((!E||!E.contains(Ue.target))&&R&&Ce&&typeof R=="function")return R.call(C,Ue)},document.addEventListener(clickEventType(),E[UNIQUE_ID],!1)},onUnmounted=function(E){document.removeEventListener(clickEventType(),E[UNIQUE_ID],!1),delete E[UNIQUE_ID]},onUpdated=function(E,S,x){S.value!==S.oldValue&&onMounted(E,S,x)},plugin={install:function(E){E.directive("click-away",directive)}},directive={mounted:onMounted,updated:onUpdated,unmounted:onUnmounted};/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var storeKey="store";function forEachValue(E,S){Object.keys(E).forEach(function(x){return S(E[x],x)})}function isObject(E){return E!==null&&typeof E=="object"}function isPromise(E){return E&&typeof E.then=="function"}function partial(E,S){return function(){return E(S)}}function genericSubscribe(E,S,x){return S.indexOf(E)<0&&(x&&x.prepend?S.unshift(E):S.push(E)),function(){var C=S.indexOf(E);C>-1&&S.splice(C,1)}}function resetStore(E,S){E._actions=Object.create(null),E._mutations=Object.create(null),E._wrappedGetters=Object.create(null),E._modulesNamespaceMap=Object.create(null);var x=E.state;installModule(E,x,[],E._modules.root,!0),resetStoreState(E,x,S)}function resetStoreState(E,S,x){var C=E._state,R=E._scope;E.getters={},E._makeLocalGettersCache=Object.create(null);var Ce=E._wrappedGetters,Ue={},je={},Xe=effectScope(!0);Xe.run(function(){forEachValue(Ce,function(Ye,et){Ue[et]=partial(Ye,E),je[et]=computed(function(){return Ue[et]()}),Object.defineProperty(E.getters,et,{get:function(){return je[et].value},enumerable:!0})})}),E._state=reactive({data:S}),E._scope=Xe,E.strict&&enableStrictMode(E),C&&x&&E._withCommit(function(){C.data=null}),R&&R.stop()}function installModule(E,S,x,C,R){var Ce=!x.length,Ue=E._modules.getNamespace(x);if(C.namespaced&&(E._modulesNamespaceMap[Ue],E._modulesNamespaceMap[Ue]=C),!Ce&&!R){var je=getNestedState(S,x.slice(0,-1)),Xe=x[x.length-1];E._withCommit(function(){je[Xe]=C.state})}var Ye=C.context=makeLocalContext(E,Ue,x);C.forEachMutation(function(et,ht){var Dt=Ue+ht;registerMutation(E,Dt,et,Ye)}),C.forEachAction(function(et,ht){var Dt=et.root?ht:Ue+ht,Ot=et.handler||et;registerAction(E,Dt,Ot,Ye)}),C.forEachGetter(function(et,ht){var Dt=Ue+ht;registerGetter(E,Dt,et,Ye)}),C.forEachChild(function(et,ht){installModule(E,S,x.concat(ht),et,R)})}function makeLocalContext(E,S,x){var C=S==="",R={dispatch:C?E.dispatch:function(Ce,Ue,je){var Xe=unifyObjectStyle(Ce,Ue,je),Ye=Xe.payload,et=Xe.options,ht=Xe.type;return(!et||!et.root)&&(ht=S+ht),E.dispatch(ht,Ye)},commit:C?E.commit:function(Ce,Ue,je){var Xe=unifyObjectStyle(Ce,Ue,je),Ye=Xe.payload,et=Xe.options,ht=Xe.type;(!et||!et.root)&&(ht=S+ht),E.commit(ht,Ye,et)}};return Object.defineProperties(R,{getters:{get:C?function(){return E.getters}:function(){return makeLocalGetters(E,S)}},state:{get:function(){return getNestedState(E.state,x)}}}),R}function makeLocalGetters(E,S){if(!E._makeLocalGettersCache[S]){var x={},C=S.length;Object.keys(E.getters).forEach(function(R){if(R.slice(0,C)===S){var Ce=R.slice(C);Object.defineProperty(x,Ce,{get:function(){return E.getters[R]},enumerable:!0})}}),E._makeLocalGettersCache[S]=x}return E._makeLocalGettersCache[S]}function registerMutation(E,S,x,C){var R=E._mutations[S]||(E._mutations[S]=[]);R.push(function(Ue){x.call(E,C.state,Ue)})}function registerAction(E,S,x,C){var R=E._actions[S]||(E._actions[S]=[]);R.push(function(Ue){var je=x.call(E,{dispatch:C.dispatch,commit:C.commit,getters:C.getters,state:C.state,rootGetters:E.getters,rootState:E.state},Ue);return isPromise(je)||(je=Promise.resolve(je)),E._devtoolHook?je.catch(function(Xe){throw E._devtoolHook.emit("vuex:error",Xe),Xe}):je})}function registerGetter(E,S,x,C){E._wrappedGetters[S]||(E._wrappedGetters[S]=function(Ce){return x(C.state,C.getters,Ce.state,Ce.getters)})}function enableStrictMode(E){watch(function(){return E._state.data},function(){},{deep:!0,flush:"sync"})}function getNestedState(E,S){return S.reduce(function(x,C){return x[C]},E)}function unifyObjectStyle(E,S,x){return isObject(E)&&E.type&&(x=S,S=E,E=E.type),{type:E,payload:S,options:x}}var LABEL_VUEX_BINDINGS="vuex bindings",MUTATIONS_LAYER_ID="vuex:mutations",ACTIONS_LAYER_ID="vuex:actions",INSPECTOR_ID="vuex",actionId=0;function addDevtools(E,S){setupDevtoolsPlugin({id:"org.vuejs.vuex",app:E,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[LABEL_VUEX_BINDINGS]},function(x){x.addTimelineLayer({id:MUTATIONS_LAYER_ID,label:"Vuex Mutations",color:COLOR_LIME_500}),x.addTimelineLayer({id:ACTIONS_LAYER_ID,label:"Vuex Actions",color:COLOR_LIME_500}),x.addInspector({id:INSPECTOR_ID,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),x.on.getInspectorTree(function(C){if(C.app===E&&C.inspectorId===INSPECTOR_ID)if(C.filter){var R=[];flattenStoreForInspectorTree(R,S._modules.root,C.filter,""),C.rootNodes=R}else C.rootNodes=[formatStoreForInspectorTree(S._modules.root,"")]}),x.on.getInspectorState(function(C){if(C.app===E&&C.inspectorId===INSPECTOR_ID){var R=C.nodeId;makeLocalGetters(S,R),C.state=formatStoreForInspectorState(getStoreModule(S._modules,R),R==="root"?S.getters:S._makeLocalGettersCache,R)}}),x.on.editInspectorState(function(C){if(C.app===E&&C.inspectorId===INSPECTOR_ID){var R=C.nodeId,Ce=C.path;R!=="root"&&(Ce=R.split("/").filter(Boolean).concat(Ce)),S._withCommit(function(){C.set(S._state.data,Ce,C.state.value)})}}),S.subscribe(function(C,R){var Ce={};C.payload&&(Ce.payload=C.payload),Ce.state=R,x.notifyComponentUpdate(),x.sendInspectorTree(INSPECTOR_ID),x.sendInspectorState(INSPECTOR_ID),x.addTimelineEvent({layerId:MUTATIONS_LAYER_ID,event:{time:Date.now(),title:C.type,data:Ce}})}),S.subscribeAction({before:function(C,R){var Ce={};C.payload&&(Ce.payload=C.payload),C._id=actionId++,C._time=Date.now(),Ce.state=R,x.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:C._time,title:C.type,groupId:C._id,subtitle:"start",data:Ce}})},after:function(C,R){var Ce={},Ue=Date.now()-C._time;Ce.duration={_custom:{type:"duration",display:Ue+"ms",tooltip:"Action duration",value:Ue}},C.payload&&(Ce.payload=C.payload),Ce.state=R,x.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:Date.now(),title:C.type,groupId:C._id,subtitle:"end",data:Ce}})}})})}var COLOR_LIME_500=8702998,COLOR_DARK=6710886,COLOR_WHITE=16777215,TAG_NAMESPACED={label:"namespaced",textColor:COLOR_WHITE,backgroundColor:COLOR_DARK};function extractNameFromPath(E){return E&&E!=="root"?E.split("/").slice(-2,-1)[0]:"Root"}function formatStoreForInspectorTree(E,S){return{id:S||"root",label:extractNameFromPath(S),tags:E.namespaced?[TAG_NAMESPACED]:[],children:Object.keys(E._children).map(function(x){return formatStoreForInspectorTree(E._children[x],S+x+"/")})}}function flattenStoreForInspectorTree(E,S,x,C){C.includes(x)&&E.push({id:C||"root",label:C.endsWith("/")?C.slice(0,C.length-1):C||"Root",tags:S.namespaced?[TAG_NAMESPACED]:[]}),Object.keys(S._children).forEach(function(R){flattenStoreForInspectorTree(E,S._children[R],x,C+R+"/")})}function formatStoreForInspectorState(E,S,x){S=x==="root"?S:S[x];var C=Object.keys(S),R={state:Object.keys(E.state).map(function(Ue){return{key:Ue,editable:!0,value:E.state[Ue]}})};if(C.length){var Ce=transformPathsToObjectTree(S);R.getters=Object.keys(Ce).map(function(Ue){return{key:Ue.endsWith("/")?extractNameFromPath(Ue):Ue,editable:!1,value:canThrow(function(){return Ce[Ue]})}})}return R}function transformPathsToObjectTree(E){var S={};return Object.keys(E).forEach(function(x){var C=x.split("/");if(C.length>1){var R=S,Ce=C.pop();C.forEach(function(Ue){R[Ue]||(R[Ue]={_custom:{value:{},display:Ue,tooltip:"Module",abstract:!0}}),R=R[Ue]._custom.value}),R[Ce]=canThrow(function(){return E[x]})}else S[x]=canThrow(function(){return E[x]})}),S}function getStoreModule(E,S){var x=S.split("/").filter(function(C){return C});return x.reduce(function(C,R,Ce){var Ue=C[R];if(!Ue)throw new Error('Missing module "'+R+'" for path "'+S+'".');return Ce===x.length-1?Ue:Ue._children},S==="root"?E:E.root._children)}function canThrow(E){try{return E()}catch(S){return S}}var Module=function E(S,x){this.runtime=x,this._children=Object.create(null),this._rawModule=S;var C=S.state;this.state=(typeof C=="function"?C():C)||{}},prototypeAccessors$1={namespaced:{configurable:!0}};prototypeAccessors$1.namespaced.get=function(){return!!this._rawModule.namespaced};Module.prototype.addChild=function E(S,x){this._children[S]=x};Module.prototype.removeChild=function E(S){delete this._children[S]};Module.prototype.getChild=function E(S){return this._children[S]};Module.prototype.hasChild=function E(S){return S in this._children};Module.prototype.update=function E(S){this._rawModule.namespaced=S.namespaced,S.actions&&(this._rawModule.actions=S.actions),S.mutations&&(this._rawModule.mutations=S.mutations),S.getters&&(this._rawModule.getters=S.getters)};Module.prototype.forEachChild=function E(S){forEachValue(this._children,S)};Module.prototype.forEachGetter=function E(S){this._rawModule.getters&&forEachValue(this._rawModule.getters,S)};Module.prototype.forEachAction=function E(S){this._rawModule.actions&&forEachValue(this._rawModule.actions,S)};Module.prototype.forEachMutation=function E(S){this._rawModule.mutations&&forEachValue(this._rawModule.mutations,S)};Object.defineProperties(Module.prototype,prototypeAccessors$1);var ModuleCollection=function E(S){this.register([],S,!1)};ModuleCollection.prototype.get=function E(S){return S.reduce(function(x,C){return x.getChild(C)},this.root)};ModuleCollection.prototype.getNamespace=function E(S){var x=this.root;return S.reduce(function(C,R){return x=x.getChild(R),C+(x.namespaced?R+"/":"")},"")};ModuleCollection.prototype.update=function E(S){update2([],this.root,S)};ModuleCollection.prototype.register=function E(S,x,C){var R=this;C===void 0&&(C=!0);var Ce=new Module(x,C);if(S.length===0)this.root=Ce;else{var Ue=this.get(S.slice(0,-1));Ue.addChild(S[S.length-1],Ce)}x.modules&&forEachValue(x.modules,function(je,Xe){R.register(S.concat(Xe),je,C)})};ModuleCollection.prototype.unregister=function E(S){var x=this.get(S.slice(0,-1)),C=S[S.length-1],R=x.getChild(C);R&&R.runtime&&x.removeChild(C)};ModuleCollection.prototype.isRegistered=function E(S){var x=this.get(S.slice(0,-1)),C=S[S.length-1];return x?x.hasChild(C):!1};function update2(E,S,x){if(S.update(x),x.modules)for(var C in x.modules){if(!S.getChild(C))return;update2(E.concat(C),S.getChild(C),x.modules[C])}}function createStore(E){return new Store(E)}var Store=function E(S){var x=this;S===void 0&&(S={});var C=S.plugins;C===void 0&&(C=[]);var R=S.strict;R===void 0&&(R=!1);var Ce=S.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ModuleCollection(S),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=Ce;var Ue=this,je=this,Xe=je.dispatch,Ye=je.commit;this.dispatch=function(Dt,Ot){return Xe.call(Ue,Dt,Ot)},this.commit=function(Dt,Ot,Mt){return Ye.call(Ue,Dt,Ot,Mt)},this.strict=R;var et=this._modules.root.state;installModule(this,et,[],this._modules.root),resetStoreState(this,et),C.forEach(function(ht){return ht(x)})},prototypeAccessors={state:{configurable:!0}};Store.prototype.install=function E(S,x){S.provide(x||storeKey,this),S.config.globalProperties.$store=this;var C=this._devtools!==void 0?this._devtools:!1;C&&addDevtools(S,this)};prototypeAccessors.state.get=function(){return this._state.data};prototypeAccessors.state.set=function(E){};Store.prototype.commit=function E(S,x,C){var R=this,Ce=unifyObjectStyle(S,x,C),Ue=Ce.type,je=Ce.payload,Xe={type:Ue,payload:je},Ye=this._mutations[Ue];Ye&&(this._withCommit(function(){Ye.forEach(function(ht){ht(je)})}),this._subscribers.slice().forEach(function(et){return et(Xe,R.state)}))};Store.prototype.dispatch=function E(S,x){var C=this,R=unifyObjectStyle(S,x),Ce=R.type,Ue=R.payload,je={type:Ce,payload:Ue},Xe=this._actions[Ce];if(Xe){try{this._actionSubscribers.slice().filter(function(et){return et.before}).forEach(function(et){return et.before(je,C.state)})}catch{}var Ye=Xe.length>1?Promise.all(Xe.map(function(et){return et(Ue)})):Xe[0](Ue);return new Promise(function(et,ht){Ye.then(function(Dt){try{C._actionSubscribers.filter(function(Ot){return Ot.after}).forEach(function(Ot){return Ot.after(je,C.state)})}catch{}et(Dt)},function(Dt){try{C._actionSubscribers.filter(function(Ot){return Ot.error}).forEach(function(Ot){return Ot.error(je,C.state,Dt)})}catch{}ht(Dt)})})}};Store.prototype.subscribe=function E(S,x){return genericSubscribe(S,this._subscribers,x)};Store.prototype.subscribeAction=function E(S,x){var C=typeof S=="function"?{before:S}:S;return genericSubscribe(C,this._actionSubscribers,x)};Store.prototype.watch=function E(S,x,C){var R=this;return watch(function(){return S(R.state,R.getters)},x,Object.assign({},C))};Store.prototype.replaceState=function E(S){var x=this;this._withCommit(function(){x._state.data=S})};Store.prototype.registerModule=function E(S,x,C){C===void 0&&(C={}),typeof S=="string"&&(S=[S]),this._modules.register(S,x),installModule(this,this.state,S,this._modules.get(S),C.preserveState),resetStoreState(this,this.state)};Store.prototype.unregisterModule=function E(S){var x=this;typeof S=="string"&&(S=[S]),this._modules.unregister(S),this._withCommit(function(){var C=getNestedState(x.state,S.slice(0,-1));delete C[S[S.length-1]]}),resetStore(this)};Store.prototype.hasModule=function E(S){return typeof S=="string"&&(S=[S]),this._modules.isRegistered(S)};Store.prototype.hotUpdate=function E(S){this._modules.update(S),resetStore(this,!0)};Store.prototype._withCommit=function E(S){var x=this._committing;this._committing=!0,S(),this._committing=x};Object.defineProperties(Store.prototype,prototypeAccessors);var r=function(E){return function(S){return!!S&&typeof S=="object"}(E)&&!function(S){var x=Object.prototype.toString.call(S);return x==="[object RegExp]"||x==="[object Date]"||function(C){return C.$$typeof===e}(S)}(E)},e=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function t(E,S){return S.clone!==!1&&S.isMergeableObject(E)?u(Array.isArray(E)?[]:{},E,S):E}function n(E,S,x){return E.concat(S).map(function(C){return t(C,x)})}function o(E){return Object.keys(E).concat(function(S){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(S).filter(function(x){return S.propertyIsEnumerable(x)}):[]}(E))}function c(E,S){try{return S in E}catch{return!1}}function u(E,S,x){(x=x||{}).arrayMerge=x.arrayMerge||n,x.isMergeableObject=x.isMergeableObject||r,x.cloneUnlessOtherwiseSpecified=t;var C=Array.isArray(S);return C===Array.isArray(E)?C?x.arrayMerge(E,S,x):function(R,Ce,Ue){var je={};return Ue.isMergeableObject(R)&&o(R).forEach(function(Xe){je[Xe]=t(R[Xe],Ue)}),o(Ce).forEach(function(Xe){(function(Ye,et){return c(Ye,et)&&!(Object.hasOwnProperty.call(Ye,et)&&Object.propertyIsEnumerable.call(Ye,et))})(R,Xe)||(je[Xe]=c(R,Xe)&&Ue.isMergeableObject(Ce[Xe])?function(Ye,et){if(!et.customMerge)return u;var ht=et.customMerge(Ye);return typeof ht=="function"?ht:u}(Xe,Ue)(R[Xe],Ce[Xe],Ue):t(Ce[Xe],Ue))}),je}(E,S,x):t(S,x)}u.all=function(E,S){if(!Array.isArray(E))throw new Error("first argument should be an array");return E.reduce(function(x,C){return u(x,C,S)},{})};var i=u;function a(E){var S=(E=E||{}).storage||window&&window.localStorage,x=E.key||"vuex";function C(et,ht){var Dt=ht.getItem(et);try{return typeof Dt=="string"?JSON.parse(Dt):typeof Dt=="object"?Dt:void 0}catch{}}function R(){return!0}function Ce(et,ht,Dt){return Dt.setItem(et,JSON.stringify(ht))}function Ue(et,ht){return Array.isArray(ht)?ht.reduce(function(Dt,Ot){return function(Ut,kt,Ft,Nt){return!/^(__proto__|constructor|prototype)$/.test(kt)&&((kt=kt.split?kt.split("."):kt.slice(0)).slice(0,-1).reduce(function(Gt,Zt){return Gt[Zt]=Gt[Zt]||{}},Ut)[kt.pop()]=Ft),Ut}(Dt,Ot,(Mt=et,(Mt=((St=Ot).split?St.split("."):St).reduce(function(Ut,kt){return Ut&&Ut[kt]},Mt))===void 0?void 0:Mt));var Mt,St},{}):et}function je(et){return function(ht){return et.subscribe(ht)}}(E.assertStorage||function(){S.setItem("@@",1),S.removeItem("@@")})(S);var Xe,Ye=function(){return(E.getState||C)(x,S)};return E.fetchBeforeUse&&(Xe=Ye()),function(et){E.fetchBeforeUse||(Xe=Ye()),typeof Xe=="object"&&Xe!==null&&(et.replaceState(E.overwrite?Xe:i(et.state,Xe,{arrayMerge:E.arrayMerger||function(ht,Dt){return Dt},clone:!1})),(E.rehydrated||function(){})(et)),(E.subscriber||je)(et)(function(ht,Dt){(E.filter||R)(ht)&&(E.setState||Ce)(x,(E.reducer||Ue)(Dt,E.paths),S)})}}export{createWebHashHistory as A,createStore as B,a as C,createApp as D,Et as E,Fragment as F,Bugsnag as G,BugsnagPluginVue as H,kn as I,vueTouchEvents as J,plugin as K,Pt$1 as P,VueDraggableNext as V,createBaseVNode as a,createVNode as b,createElementBlock as c,createCommentVNode as d,createBlock as e,normalizeStyle as f,withDirectives as g,createStaticVNode as h,createTextVNode as i,jwtDecode as j,renderList as k,index$1 as l,Pusher as m,normalizeClass as n,openBlock as o,videojs as p,resolveDirective as q,resolveComponent as r,withModifiers as s,toDisplayString as t,withKeys as u,vModelText as v,withCtx as w,vModelSelect as x,vModelCheckbox as y,createRouter as z};
