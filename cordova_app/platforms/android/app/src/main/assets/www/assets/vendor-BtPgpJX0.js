/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(o){const r=Object.create(null);for(const S of o.split(","))r[S]=1;return S=>S in r}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=o=>o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&(o.charCodeAt(2)>122||o.charCodeAt(2)<97),isModelListener=o=>o.startsWith("onUpdate:"),extend$1=Object.assign,remove=(o,r)=>{const S=o.indexOf(r);S>-1&&o.splice(S,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(o,r)=>hasOwnProperty$1.call(o,r),isArray$1=Array.isArray,isMap=o=>toTypeString(o)==="[object Map]",isSet=o=>toTypeString(o)==="[object Set]",isDate=o=>toTypeString(o)==="[object Date]",isFunction$2=o=>typeof o=="function",isString=o=>typeof o=="string",isSymbol=o=>typeof o=="symbol",isObject$3=o=>o!==null&&typeof o=="object",isPromise$1=o=>(isObject$3(o)||isFunction$2(o))&&isFunction$2(o.then)&&isFunction$2(o.catch),objectToString=Object.prototype.toString,toTypeString=o=>objectToString.call(o),toRawType=o=>toTypeString(o).slice(8,-1),isPlainObject$1=o=>toTypeString(o)==="[object Object]",isIntegerKey=o=>isString(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=o=>{const r=Object.create(null);return S=>r[S]||(r[S]=o(S))},camelizeRE=/-(\w)/g,camelize$1=cacheStringFunction(o=>o.replace(camelizeRE,(r,S)=>S?S.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(o=>o.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(o=>o.charAt(0).toUpperCase()+o.slice(1)),toHandlerKey=cacheStringFunction(o=>o?`on${capitalize(o)}`:""),hasChanged=(o,r)=>!Object.is(o,r),invokeArrayFns=(o,...r)=>{for(let S=0;S<o.length;S++)o[S](...r)},def=(o,r,S,E=!1)=>{Object.defineProperty(o,r,{configurable:!0,enumerable:!1,writable:E,value:S})},looseToNumber=o=>{const r=parseFloat(o);return isNaN(r)?o:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(o){if(isArray$1(o)){const r={};for(let S=0;S<o.length;S++){const E=o[S],x=isString(E)?parseStringStyle(E):normalizeStyle(E);if(x)for(const C in x)r[C]=x[C]}return r}else if(isString(o)||isObject$3(o))return o}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(o){const r={};return o.replace(styleCommentRE,"").split(listDelimiterRE).forEach(S=>{if(S){const E=S.split(propertyDelimiterRE);E.length>1&&(r[E[0].trim()]=E[1].trim())}}),r}function normalizeClass(o){let r="";if(isString(o))r=o;else if(isArray$1(o))for(let S=0;S<o.length;S++){const E=normalizeClass(o[S]);E&&(r+=E+" ")}else if(isObject$3(o))for(const S in o)o[S]&&(r+=S+" ");return r.trim()}function normalizeProps(o){if(!o)return null;let{class:r,style:S}=o;return r&&!isString(r)&&(o.class=normalizeClass(r)),S&&(o.style=normalizeStyle(S)),o}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(o){return!!o||o===""}function looseCompareArrays(o,r){if(o.length!==r.length)return!1;let S=!0;for(let E=0;S&&E<o.length;E++)S=looseEqual(o[E],r[E]);return S}function looseEqual(o,r){if(o===r)return!0;let S=isDate(o),E=isDate(r);if(S||E)return S&&E?o.getTime()===r.getTime():!1;if(S=isSymbol(o),E=isSymbol(r),S||E)return o===r;if(S=isArray$1(o),E=isArray$1(r),S||E)return S&&E?looseCompareArrays(o,r):!1;if(S=isObject$3(o),E=isObject$3(r),S||E){if(!S||!E)return!1;const x=Object.keys(o).length,C=Object.keys(r).length;if(x!==C)return!1;for(const R in o){const Ce=o.hasOwnProperty(R),Ue=r.hasOwnProperty(R);if(Ce&&!Ue||!Ce&&Ue||!looseEqual(o[R],r[R]))return!1}}return String(o)===String(r)}function looseIndexOf(o,r){return o.findIndex(S=>looseEqual(S,r))}const isRef$1=o=>!!(o&&o.__v_isRef===!0),toDisplayString=o=>isString(o)?o:o==null?"":isArray$1(o)||isObject$3(o)&&(o.toString===objectToString||!isFunction$2(o.toString))?isRef$1(o)?toDisplayString(o.value):JSON.stringify(o,replacer,2):String(o),replacer=(o,r)=>isRef$1(r)?replacer(o,r.value):isMap(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((S,[E,x],C)=>(S[stringifySymbol(E,C)+" =>"]=x,S),{})}:isSet(r)?{[`Set(${r.size})`]:[...r.values()].map(S=>stringifySymbol(S))}:isSymbol(r)?stringifySymbol(r):isObject$3(r)&&!isArray$1(r)&&!isPlainObject$1(r)?String(r):r,stringifySymbol=(o,r="")=>{var S;return isSymbol(o)?`Symbol(${(S=o.description)!=null?S:r})`:o};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,S;if(this.scopes)for(r=0,S=this.scopes.length;r<S;r++)this.scopes[r].pause();for(r=0,S=this.effects.length;r<S;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,S;if(this.scopes)for(r=0,S=this.scopes.length;r<S;r++)this.scopes[r].resume();for(r=0,S=this.effects.length;r<S;r++)this.effects[r].resume()}}run(r){if(this._active){const S=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=S}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this._active){let S,E;for(S=0,E=this.effects.length;S<E;S++)this.effects[S].stop();for(S=0,E=this.cleanups.length;S<E;S++)this.cleanups[S]();if(this.scopes)for(S=0,E=this.scopes.length;S<E;S++)this.scopes[S].stop(!0);if(!this.detached&&this.parent&&!r){const x=this.parent.scopes.pop();x&&x!==this&&(this.parent.scopes[this.index]=x,x.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(o){return new EffectScope(o)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(o,r=!1){activeEffectScope&&activeEffectScope.cleanups.push(o)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const r=activeSub,S=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=r,shouldTrack=S,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)removeSub(r);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(o,r=!1){if(o.flags|=8,r){o.next=batchedComputed,batchedComputed=o;return}o.next=batchedSub,batchedSub=o}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let r=batchedComputed;for(batchedComputed=void 0;r;){const S=r.next;r.next=void 0,r.flags&=-9,r=S}}let o;for(;batchedSub;){let r=batchedSub;for(batchedSub=void 0;r;){const S=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(E){o||(o=E)}r=S}}if(o)throw o}function prepareDeps(o){for(let r=o.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function cleanupDeps(o){let r,S=o.depsTail,E=S;for(;E;){const x=E.prevDep;E.version===-1?(E===S&&(S=x),removeSub(E),removeDep(E)):r=E,E.dep.activeLink=E.prevActiveLink,E.prevActiveLink=void 0,E=x}o.deps=r,o.depsTail=S}function isDirty(o){for(let r=o.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(refreshComputed(r.dep.computed)||r.dep.version!==r.version))return!0;return!!o._dirty}function refreshComputed(o){if(o.flags&4&&!(o.flags&16)||(o.flags&=-17,o.globalVersion===globalVersion))return;o.globalVersion=globalVersion;const r=o.dep;if(o.flags|=2,r.version>0&&!o.isSSR&&o.deps&&!isDirty(o)){o.flags&=-3;return}const S=activeSub,E=shouldTrack;activeSub=o,shouldTrack=!0;try{prepareDeps(o);const x=o.fn(o._value);(r.version===0||hasChanged(x,o._value))&&(o._value=x,r.version++)}catch(x){throw r.version++,x}finally{activeSub=S,shouldTrack=E,cleanupDeps(o),o.flags&=-3}}function removeSub(o,r=!1){const{dep:S,prevSub:E,nextSub:x}=o;if(E&&(E.nextSub=x,o.prevSub=void 0),x&&(x.prevSub=E,o.nextSub=void 0),S.subs===o&&(S.subs=E,!E&&S.computed)){S.computed.flags&=-5;for(let C=S.computed.deps;C;C=C.nextDep)removeSub(C,!0)}!r&&!--S.sc&&S.map&&S.map.delete(S.key)}function removeDep(o){const{prevDep:r,nextDep:S}=o;r&&(r.nextDep=S,o.prevDep=void 0),S&&(S.prevDep=r,o.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const o=trackStack.pop();shouldTrack=o===void 0?!0:o}function cleanupEffect(o){const{cleanup:r}=o;if(o.cleanup=void 0,r){const S=activeSub;activeSub=void 0;try{r()}finally{activeSub=S}}}let globalVersion=0;class Link{constructor(r,S){this.sub=r,this.dep=S,this.version=S.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(r){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let S=this.activeLink;if(S===void 0||S.sub!==activeSub)S=this.activeLink=new Link(activeSub,this),activeSub.deps?(S.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=S,activeSub.depsTail=S):activeSub.deps=activeSub.depsTail=S,addSub(S);else if(S.version===-1&&(S.version=this.version,S.nextDep)){const E=S.nextDep;E.prevDep=S.prevDep,S.prevDep&&(S.prevDep.nextDep=E),S.prevDep=activeSub.depsTail,S.nextDep=void 0,activeSub.depsTail.nextDep=S,activeSub.depsTail=S,activeSub.deps===S&&(activeSub.deps=E)}return S}trigger(r){this.version++,globalVersion++,this.notify(r)}notify(r){startBatch();try{for(let S=this.subs;S;S=S.prevSub)S.sub.notify()&&S.sub.dep.notify()}finally{endBatch()}}}function addSub(o){if(o.dep.sc++,o.sub.flags&4){const r=o.dep.computed;if(r&&!o.dep.subs){r.flags|=20;for(let E=r.deps;E;E=E.nextDep)addSub(E)}const S=o.dep.subs;S!==o&&(o.prevSub=S,S&&(S.nextSub=o)),o.dep.subs=o}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(o,r,S){if(shouldTrack&&activeSub){let E=targetMap.get(o);E||targetMap.set(o,E=new Map);let x=E.get(S);x||(E.set(S,x=new Dep),x.map=E,x.key=S),x.track()}}function trigger$1(o,r,S,E,x,C){const R=targetMap.get(o);if(!R){globalVersion++;return}const Ce=Ue=>{Ue&&Ue.trigger()};if(startBatch(),r==="clear")R.forEach(Ce);else{const Ue=isArray$1(o),je=Ue&&isIntegerKey(S);if(Ue&&S==="length"){const Xe=Number(E);R.forEach((Ye,St)=>{(St==="length"||St===ARRAY_ITERATE_KEY||!isSymbol(St)&&St>=Xe)&&Ce(Ye)})}else switch((S!==void 0||R.has(void 0))&&Ce(R.get(S)),je&&Ce(R.get(ARRAY_ITERATE_KEY)),r){case"add":Ue?je&&Ce(R.get("length")):(Ce(R.get(ITERATE_KEY)),isMap(o)&&Ce(R.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Ue||(Ce(R.get(ITERATE_KEY)),isMap(o)&&Ce(R.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(o)&&Ce(R.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(o,r){const S=targetMap.get(o);return S&&S.get(r)}function reactiveReadArray(o){const r=toRaw(o);return r===o?r:(track(r,"iterate",ARRAY_ITERATE_KEY),isShallow(o)?r:r.map(toReactive))}function shallowReadArray(o){return track(o=toRaw(o),"iterate",ARRAY_ITERATE_KEY),o}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...o){return reactiveReadArray(this).concat(...o.map(r=>isArray$1(r)?reactiveReadArray(r):r))},entries(){return iterator(this,"entries",o=>(o[1]=toReactive(o[1]),o))},every(o,r){return apply(this,"every",o,r,void 0,arguments)},filter(o,r){return apply(this,"filter",o,r,S=>S.map(toReactive),arguments)},find(o,r){return apply(this,"find",o,r,toReactive,arguments)},findIndex(o,r){return apply(this,"findIndex",o,r,void 0,arguments)},findLast(o,r){return apply(this,"findLast",o,r,toReactive,arguments)},findLastIndex(o,r){return apply(this,"findLastIndex",o,r,void 0,arguments)},forEach(o,r){return apply(this,"forEach",o,r,void 0,arguments)},includes(...o){return searchProxy(this,"includes",o)},indexOf(...o){return searchProxy(this,"indexOf",o)},join(o){return reactiveReadArray(this).join(o)},lastIndexOf(...o){return searchProxy(this,"lastIndexOf",o)},map(o,r){return apply(this,"map",o,r,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...o){return noTracking(this,"push",o)},reduce(o,...r){return reduce$1(this,"reduce",o,r)},reduceRight(o,...r){return reduce$1(this,"reduceRight",o,r)},shift(){return noTracking(this,"shift")},some(o,r){return apply(this,"some",o,r,void 0,arguments)},splice(...o){return noTracking(this,"splice",o)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(o){return reactiveReadArray(this).toSorted(o)},toSpliced(...o){return reactiveReadArray(this).toSpliced(...o)},unshift(...o){return noTracking(this,"unshift",o)},values(){return iterator(this,"values",toReactive)}};function iterator(o,r,S){const E=shallowReadArray(o),x=E[r]();return E!==o&&!isShallow(o)&&(x._next=x.next,x.next=()=>{const C=x._next();return C.value&&(C.value=S(C.value)),C}),x}const arrayProto=Array.prototype;function apply(o,r,S,E,x,C){const R=shallowReadArray(o),Ce=R!==o&&!isShallow(o),Ue=R[r];if(Ue!==arrayProto[r]){const Ye=Ue.apply(o,C);return Ce?toReactive(Ye):Ye}let je=S;R!==o&&(Ce?je=function(Ye,St){return S.call(this,toReactive(Ye),St,o)}:S.length>2&&(je=function(Ye,St){return S.call(this,Ye,St,o)}));const Xe=Ue.call(R,je,E);return Ce&&x?x(Xe):Xe}function reduce$1(o,r,S,E){const x=shallowReadArray(o);let C=S;return x!==o&&(isShallow(o)?S.length>3&&(C=function(R,Ce,Ue){return S.call(this,R,Ce,Ue,o)}):C=function(R,Ce,Ue){return S.call(this,R,toReactive(Ce),Ue,o)}),x[r](C,...E)}function searchProxy(o,r,S){const E=toRaw(o);track(E,"iterate",ARRAY_ITERATE_KEY);const x=E[r](...S);return(x===-1||x===!1)&&isProxy(S[0])?(S[0]=toRaw(S[0]),E[r](...S)):x}function noTracking(o,r,S=[]){pauseTracking(),startBatch();const E=toRaw(o)[r].apply(o,S);return endBatch(),resetTracking(),E}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(o=>o!=="arguments"&&o!=="caller").map(o=>Symbol[o]).filter(isSymbol));function hasOwnProperty(o){isSymbol(o)||(o=String(o));const r=toRaw(this);return track(r,"has",o),r.hasOwnProperty(o)}class BaseReactiveHandler{constructor(r=!1,S=!1){this._isReadonly=r,this._isShallow=S}get(r,S,E){const x=this._isReadonly,C=this._isShallow;if(S==="__v_isReactive")return!x;if(S==="__v_isReadonly")return x;if(S==="__v_isShallow")return C;if(S==="__v_raw")return E===(x?C?shallowReadonlyMap:readonlyMap:C?shallowReactiveMap:reactiveMap).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(E)?r:void 0;const R=isArray$1(r);if(!x){let Ue;if(R&&(Ue=arrayInstrumentations[S]))return Ue;if(S==="hasOwnProperty")return hasOwnProperty}const Ce=Reflect.get(r,S,isRef(r)?r:E);return(isSymbol(S)?builtInSymbols.has(S):isNonTrackableKeys(S))||(x||track(r,"get",S),C)?Ce:isRef(Ce)?R&&isIntegerKey(S)?Ce:Ce.value:isObject$3(Ce)?x?readonly(Ce):reactive(Ce):Ce}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!1,r)}set(r,S,E,x){let C=r[S];if(!this._isShallow){const Ue=isReadonly(C);if(!isShallow(E)&&!isReadonly(E)&&(C=toRaw(C),E=toRaw(E)),!isArray$1(r)&&isRef(C)&&!isRef(E))return Ue?!1:(C.value=E,!0)}const R=isArray$1(r)&&isIntegerKey(S)?Number(S)<r.length:hasOwn(r,S),Ce=Reflect.set(r,S,E,isRef(r)?r:x);return r===toRaw(x)&&(R?hasChanged(E,C)&&trigger$1(r,"set",S,E):trigger$1(r,"add",S,E)),Ce}deleteProperty(r,S){const E=hasOwn(r,S);r[S];const x=Reflect.deleteProperty(r,S);return x&&E&&trigger$1(r,"delete",S,void 0),x}has(r,S){const E=Reflect.has(r,S);return(!isSymbol(S)||!builtInSymbols.has(S))&&track(r,"has",S),E}ownKeys(r){return track(r,"iterate",isArray$1(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!0,r)}set(r,S){return!0}deleteProperty(r,S){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=o=>o,getProto=o=>Reflect.getPrototypeOf(o);function createIterableMethod(o,r,S){return function(...E){const x=this.__v_raw,C=toRaw(x),R=isMap(C),Ce=o==="entries"||o===Symbol.iterator&&R,Ue=o==="keys"&&R,je=x[o](...E),Xe=S?toShallow:r?toReadonly:toReactive;return!r&&track(C,"iterate",Ue?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Ye,done:St}=je.next();return St?{value:Ye,done:St}:{value:Ce?[Xe(Ye[0]),Xe(Ye[1])]:Xe(Ye),done:St}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(o){return function(...r){return o==="delete"?!1:o==="clear"?void 0:this}}function createInstrumentations(o,r){const S={get(x){const C=this.__v_raw,R=toRaw(C),Ce=toRaw(x);o||(hasChanged(x,Ce)&&track(R,"get",x),track(R,"get",Ce));const{has:Ue}=getProto(R),je=r?toShallow:o?toReadonly:toReactive;if(Ue.call(R,x))return je(C.get(x));if(Ue.call(R,Ce))return je(C.get(Ce));C!==R&&C.get(x)},get size(){const x=this.__v_raw;return!o&&track(toRaw(x),"iterate",ITERATE_KEY),Reflect.get(x,"size",x)},has(x){const C=this.__v_raw,R=toRaw(C),Ce=toRaw(x);return o||(hasChanged(x,Ce)&&track(R,"has",x),track(R,"has",Ce)),x===Ce?C.has(x):C.has(x)||C.has(Ce)},forEach(x,C){const R=this,Ce=R.__v_raw,Ue=toRaw(Ce),je=r?toShallow:o?toReadonly:toReactive;return!o&&track(Ue,"iterate",ITERATE_KEY),Ce.forEach((Xe,Ye)=>x.call(C,je(Xe),je(Ye),R))}};return extend$1(S,o?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(x){!r&&!isShallow(x)&&!isReadonly(x)&&(x=toRaw(x));const C=toRaw(this);return getProto(C).has.call(C,x)||(C.add(x),trigger$1(C,"add",x,x)),this},set(x,C){!r&&!isShallow(C)&&!isReadonly(C)&&(C=toRaw(C));const R=toRaw(this),{has:Ce,get:Ue}=getProto(R);let je=Ce.call(R,x);je||(x=toRaw(x),je=Ce.call(R,x));const Xe=Ue.call(R,x);return R.set(x,C),je?hasChanged(C,Xe)&&trigger$1(R,"set",x,C):trigger$1(R,"add",x,C),this},delete(x){const C=toRaw(this),{has:R,get:Ce}=getProto(C);let Ue=R.call(C,x);Ue||(x=toRaw(x),Ue=R.call(C,x)),Ce&&Ce.call(C,x);const je=C.delete(x);return Ue&&trigger$1(C,"delete",x,void 0),je},clear(){const x=toRaw(this),C=x.size!==0,R=x.clear();return C&&trigger$1(x,"clear",void 0,void 0),R}}),["keys","values","entries",Symbol.iterator].forEach(x=>{S[x]=createIterableMethod(x,o,r)}),S}function createInstrumentationGetter(o,r){const S=createInstrumentations(o,r);return(E,x,C)=>x==="__v_isReactive"?!o:x==="__v_isReadonly"?o:x==="__v_raw"?E:Reflect.get(hasOwn(S,x)&&x in E?S:E,x,C)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(o){switch(o){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(o){return o.__v_skip||!Object.isExtensible(o)?0:targetTypeMap(toRawType(o))}function reactive(o){return isReadonly(o)?o:createReactiveObject(o,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(o){return createReactiveObject(o,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(o){return createReactiveObject(o,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(o){return createReactiveObject(o,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(o,r,S,E,x){if(!isObject$3(o)||o.__v_raw&&!(r&&o.__v_isReactive))return o;const C=x.get(o);if(C)return C;const R=getTargetType(o);if(R===0)return o;const Ce=new Proxy(o,R===2?E:S);return x.set(o,Ce),Ce}function isReactive(o){return isReadonly(o)?isReactive(o.__v_raw):!!(o&&o.__v_isReactive)}function isReadonly(o){return!!(o&&o.__v_isReadonly)}function isShallow(o){return!!(o&&o.__v_isShallow)}function isProxy(o){return o?!!o.__v_raw:!1}function toRaw(o){const r=o&&o.__v_raw;return r?toRaw(r):o}function markRaw(o){return!hasOwn(o,"__v_skip")&&Object.isExtensible(o)&&def(o,"__v_skip",!0),o}const toReactive=o=>isObject$3(o)?reactive(o):o,toReadonly=o=>isObject$3(o)?readonly(o):o;function isRef(o){return o?o.__v_isRef===!0:!1}function ref(o){return createRef(o,!1)}function shallowRef(o){return createRef(o,!0)}function createRef(o,r){return isRef(o)?o:new RefImpl(o,r)}class RefImpl{constructor(r,S){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=S?r:toRaw(r),this._value=S?r:toReactive(r),this.__v_isShallow=S}get value(){return this.dep.track(),this._value}set value(r){const S=this._rawValue,E=this.__v_isShallow||isShallow(r)||isReadonly(r);r=E?r:toRaw(r),hasChanged(r,S)&&(this._rawValue=r,this._value=E?r:toReactive(r),this.dep.trigger())}}function unref(o){return isRef(o)?o.value:o}const shallowUnwrapHandlers={get:(o,r,S)=>r==="__v_raw"?o:unref(Reflect.get(o,r,S)),set:(o,r,S,E)=>{const x=o[r];return isRef(x)&&!isRef(S)?(x.value=S,!0):Reflect.set(o,r,S,E)}};function proxyRefs(o){return isReactive(o)?o:new Proxy(o,shallowUnwrapHandlers)}function toRefs(o){const r=isArray$1(o)?new Array(o.length):{};for(const S in o)r[S]=propertyToRef(o,S);return r}class ObjectRefImpl{constructor(r,S,E){this._object=r,this._key=S,this._defaultValue=E,this.__v_isRef=!0,this._value=void 0}get value(){const r=this._object[this._key];return this._value=r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(r){this._getter=r,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(o,r,S){return isRef(o)?o:isFunction$2(o)?new GetterRefImpl(o):isObject$3(o)&&arguments.length>1?propertyToRef(o,r,S):ref(o)}function propertyToRef(o,r,S){const E=o[r];return isRef(E)?E:new ObjectRefImpl(o,r,S)}class ComputedRefImpl{constructor(r,S,E){this.fn=r,this.setter=S,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!S,this.isSSR=E}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const r=this.dep.track();return refreshComputed(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function computed$1(o,r,S=!1){let E,x;return isFunction$2(o)?E=o:(E=o.get,x=o.set),new ComputedRefImpl(E,x,S)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(o,r=!1,S=activeWatcher){if(S){let E=cleanupMap.get(S);E||cleanupMap.set(S,E=[]),E.push(o)}}function watch$1(o,r,S=EMPTY_OBJ){const{immediate:E,deep:x,once:C,scheduler:R,augmentJob:Ce,call:Ue}=S,je=Ut=>x?Ut:isShallow(Ut)||x===!1||x===0?traverse(Ut,1):traverse(Ut);let Xe,Ye,St,Dt,kt=!1,et=!1;if(isRef(o)?(Ye=()=>o.value,kt=isShallow(o)):isReactive(o)?(Ye=()=>je(o),kt=!0):isArray$1(o)?(et=!0,kt=o.some(Ut=>isReactive(Ut)||isShallow(Ut)),Ye=()=>o.map(Ut=>{if(isRef(Ut))return Ut.value;if(isReactive(Ut))return je(Ut);if(isFunction$2(Ut))return Ue?Ue(Ut,2):Ut()})):isFunction$2(o)?r?Ye=Ue?()=>Ue(o,2):o:Ye=()=>{if(St){pauseTracking();try{St()}finally{resetTracking()}}const Ut=activeWatcher;activeWatcher=Xe;try{return Ue?Ue(o,3,[Dt]):o(Dt)}finally{activeWatcher=Ut}}:Ye=NOOP,r&&x){const Ut=Ye,Xt=x===!0?1/0:x;Ye=()=>traverse(Ut(),Xt)}const Ft=getCurrentScope(),xt=()=>{Xe.stop(),Ft&&remove(Ft.effects,Xe)};if(C&&r){const Ut=r;r=(...Xt)=>{Ut(...Xt),xt()}}let Mt=et?new Array(o.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Ot=Ut=>{if(!(!(Xe.flags&1)||!Xe.dirty&&!Ut))if(r){const Xt=Xe.run();if(x||kt||(et?Xt.some((ei,si)=>hasChanged(ei,Mt[si])):hasChanged(Xt,Mt))){St&&St();const ei=activeWatcher;activeWatcher=Xe;try{const si=[Xt,Mt===INITIAL_WATCHER_VALUE?void 0:et&&Mt[0]===INITIAL_WATCHER_VALUE?[]:Mt,Dt];Ue?Ue(r,3,si):r(...si),Mt=Xt}finally{activeWatcher=ei}}}else Xe.run()};return Ce&&Ce(Ot),Xe=new ReactiveEffect(Ye),Xe.scheduler=R?()=>R(Ot,!1):Ot,Dt=Ut=>onWatcherCleanup(Ut,!1,Xe),St=Xe.onStop=()=>{const Ut=cleanupMap.get(Xe);if(Ut){if(Ue)Ue(Ut,4);else for(const Xt of Ut)Xt();cleanupMap.delete(Xe)}},r?E?Ot(!0):Mt=Xe.run():R?R(Ot.bind(null,!0),!0):Xe.run(),xt.pause=Xe.pause.bind(Xe),xt.resume=Xe.resume.bind(Xe),xt.stop=xt,xt}function traverse(o,r=1/0,S){if(r<=0||!isObject$3(o)||o.__v_skip||(S=S||new Set,S.has(o)))return o;if(S.add(o),r--,isRef(o))traverse(o.value,r,S);else if(isArray$1(o))for(let E=0;E<o.length;E++)traverse(o[E],r,S);else if(isSet(o)||isMap(o))o.forEach(E=>{traverse(E,r,S)});else if(isPlainObject$1(o)){for(const E in o)traverse(o[E],r,S);for(const E of Object.getOwnPropertySymbols(o))Object.prototype.propertyIsEnumerable.call(o,E)&&traverse(o[E],r,S)}return o}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(o,...r){if(isWarning)return;isWarning=!0,pauseTracking();const S=stack.length?stack[stack.length-1].component:null,E=S&&S.appContext.config.warnHandler,x=getComponentTrace();if(E)callWithErrorHandling(E,S,11,[o+r.map(C=>{var R,Ce;return(Ce=(R=C.toString)==null?void 0:R.call(C))!=null?Ce:JSON.stringify(C)}).join(""),S&&S.proxy,x.map(({vnode:C})=>`at <${formatComponentName(S,C.type)}>`).join(`
`),x]);else{const C=[`[Vue warn]: ${o}`,...r];x.length&&C.push(`
`,...formatTrace(x)),console.warn(...C)}resetTracking(),isWarning=!1}function getComponentTrace(){let o=stack[stack.length-1];if(!o)return[];const r=[];for(;o;){const S=r[0];S&&S.vnode===o?S.recurseCount++:r.push({vnode:o,recurseCount:0});const E=o.component&&o.component.parent;o=E&&E.vnode}return r}function formatTrace(o){const r=[];return o.forEach((S,E)=>{r.push(...E===0?[]:[`
`],...formatTraceEntry(S))}),r}function formatTraceEntry({vnode:o,recurseCount:r}){const S=r>0?`... (${r} recursive calls)`:"",E=o.component?o.component.parent==null:!1,x=` at <${formatComponentName(o.component,o.type,E)}`,C=">"+S;return o.props?[x,...formatProps(o.props),C]:[x+C]}function formatProps(o){const r=[],S=Object.keys(o);return S.slice(0,3).forEach(E=>{r.push(...formatProp(E,o[E]))}),S.length>3&&r.push(" ..."),r}function formatProp(o,r,S){return isString(r)?(r=JSON.stringify(r),S?r:[`${o}=${r}`]):typeof r=="number"||typeof r=="boolean"||r==null?S?r:[`${o}=${r}`]:isRef(r)?(r=formatProp(o,toRaw(r.value),!0),S?r:[`${o}=Ref<`,r,">"]):isFunction$2(r)?[`${o}=fn${r.name?`<${r.name}>`:""}`]:(r=toRaw(r),S?r:[`${o}=`,r])}function callWithErrorHandling(o,r,S,E){try{return E?o(...E):o()}catch(x){handleError(x,r,S)}}function callWithAsyncErrorHandling(o,r,S,E){if(isFunction$2(o)){const x=callWithErrorHandling(o,r,S,E);return x&&isPromise$1(x)&&x.catch(C=>{handleError(C,r,S)}),x}if(isArray$1(o)){const x=[];for(let C=0;C<o.length;C++)x.push(callWithAsyncErrorHandling(o[C],r,S,E));return x}}function handleError(o,r,S,E=!0){const x=r?r.vnode:null,{errorHandler:C,throwUnhandledErrorInProduction:R}=r&&r.appContext.config||EMPTY_OBJ;if(r){let Ce=r.parent;const Ue=r.proxy,je=`https://vuejs.org/error-reference/#runtime-${S}`;for(;Ce;){const Xe=Ce.ec;if(Xe){for(let Ye=0;Ye<Xe.length;Ye++)if(Xe[Ye](o,Ue,je)===!1)return}Ce=Ce.parent}if(C){pauseTracking(),callWithErrorHandling(C,null,10,[o,Ue,je]),resetTracking();return}}logError(o,S,x,E,R)}function logError(o,r,S,E=!0,x=!1){if(x)throw o;console.error(o)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(o){const r=currentFlushPromise||resolvedPromise;return o?r.then(this?o.bind(this):o):r}function findInsertionIndex$1(o){let r=flushIndex+1,S=queue.length;for(;r<S;){const E=r+S>>>1,x=queue[E],C=getId(x);C<o||C===o&&x.flags&2?r=E+1:S=E}return r}function queueJob(o){if(!(o.flags&1)){const r=getId(o),S=queue[queue.length-1];!S||!(o.flags&2)&&r>=getId(S)?queue.push(o):queue.splice(findInsertionIndex$1(r),0,o),o.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(o){isArray$1(o)?pendingPostFlushCbs.push(...o):activePostFlushCbs&&o.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,o):o.flags&1||(pendingPostFlushCbs.push(o),o.flags|=1),queueFlush()}function flushPreFlushCbs(o,r,S=flushIndex+1){for(;S<queue.length;S++){const E=queue[S];if(E&&E.flags&2){if(o&&E.id!==o.uid)continue;queue.splice(S,1),S--,E.flags&4&&(E.flags&=-2),E(),E.flags&4||(E.flags&=-2)}}}function flushPostFlushCbs(o){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)].sort((S,E)=>getId(S)-getId(E));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const S=activePostFlushCbs[postFlushIndex];S.flags&4&&(S.flags&=-2),S.flags&8||S(),S.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=o=>o.id==null?o.flags&2?-1:1/0:o.id;function flushJobs(o){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),callWithErrorHandling(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&(r.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(o){const r=currentRenderingInstance;return currentRenderingInstance=o,currentScopeId=o&&o.type.__scopeId||null,r}function withCtx(o,r=currentRenderingInstance,S){if(!r||o._n)return o;const E=(...x)=>{E._d&&setBlockTracking(-1);const C=setCurrentRenderingInstance(r);let R;try{R=o(...x)}finally{setCurrentRenderingInstance(C),E._d&&setBlockTracking(1)}return R};return E._n=!0,E._c=!0,E._d=!0,E}function withDirectives(o,r){if(currentRenderingInstance===null)return o;const S=getComponentPublicInstance(currentRenderingInstance),E=o.dirs||(o.dirs=[]);for(let x=0;x<r.length;x++){let[C,R,Ce,Ue=EMPTY_OBJ]=r[x];C&&(isFunction$2(C)&&(C={mounted:C,updated:C}),C.deep&&traverse(R),E.push({dir:C,instance:S,value:R,oldValue:void 0,arg:Ce,modifiers:Ue}))}return o}function invokeDirectiveHook(o,r,S,E){const x=o.dirs,C=r&&r.dirs;for(let R=0;R<x.length;R++){const Ce=x[R];C&&(Ce.oldValue=C[R].value);let Ue=Ce.dir[E];Ue&&(pauseTracking(),callWithAsyncErrorHandling(Ue,S,8,[o.el,Ce,o,r]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=o=>o.__isTeleport;function setTransitionHooks(o,r){o.shapeFlag&6&&o.component?(o.transition=r,setTransitionHooks(o.component.subTree,r)):o.shapeFlag&128?(o.ssContent.transition=r.clone(o.ssContent),o.ssFallback.transition=r.clone(o.ssFallback)):o.transition=r}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(o,r){return isFunction$2(o)?extend$1({name:o.name},r,{setup:o}):o}function markAsyncBoundary(o){o.ids=[o.ids[0]+o.ids[2]+++"-",0,0]}function setRef(o,r,S,E,x=!1){if(isArray$1(o)){o.forEach((kt,et)=>setRef(kt,r&&(isArray$1(r)?r[et]:r),S,E,x));return}if(isAsyncWrapper(E)&&!x)return;const C=E.shapeFlag&4?getComponentPublicInstance(E.component):E.el,R=x?null:C,{i:Ce,r:Ue}=o,je=r&&r.r,Xe=Ce.refs===EMPTY_OBJ?Ce.refs={}:Ce.refs,Ye=Ce.setupState,St=toRaw(Ye),Dt=Ye===EMPTY_OBJ?()=>!1:kt=>hasOwn(St,kt);if(je!=null&&je!==Ue&&(isString(je)?(Xe[je]=null,Dt(je)&&(Ye[je]=null)):isRef(je)&&(je.value=null)),isFunction$2(Ue))callWithErrorHandling(Ue,Ce,12,[R,Xe]);else{const kt=isString(Ue),et=isRef(Ue);if(kt||et){const Ft=()=>{if(o.f){const xt=kt?Dt(Ue)?Ye[Ue]:Xe[Ue]:Ue.value;x?isArray$1(xt)&&remove(xt,C):isArray$1(xt)?xt.includes(C)||xt.push(C):kt?(Xe[Ue]=[C],Dt(Ue)&&(Ye[Ue]=Xe[Ue])):(Ue.value=[C],o.k&&(Xe[o.k]=Ue.value))}else kt?(Xe[Ue]=R,Dt(Ue)&&(Ye[Ue]=R)):et&&(Ue.value=R,o.k&&(Xe[o.k]=R))};R?(Ft.id=-1,queuePostRenderEffect(Ft,S)):Ft()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=o=>!!o.type.__asyncLoader,isKeepAlive=o=>o.type.__isKeepAlive;function onActivated(o,r){registerKeepAliveHook(o,"a",r)}function onDeactivated(o,r){registerKeepAliveHook(o,"da",r)}function registerKeepAliveHook(o,r,S=currentInstance){const E=o.__wdc||(o.__wdc=()=>{let x=S;for(;x;){if(x.isDeactivated)return;x=x.parent}return o()});if(injectHook(r,E,S),S){let x=S.parent;for(;x&&x.parent;)isKeepAlive(x.parent.vnode)&&injectToKeepAliveRoot(E,r,S,x),x=x.parent}}function injectToKeepAliveRoot(o,r,S,E){const x=injectHook(r,o,E,!0);onUnmounted$1(()=>{remove(E[r],x)},S)}function injectHook(o,r,S=currentInstance,E=!1){if(S){const x=S[o]||(S[o]=[]),C=r.__weh||(r.__weh=(...R)=>{pauseTracking();const Ce=setCurrentInstance(S),Ue=callWithAsyncErrorHandling(r,S,o,R);return Ce(),resetTracking(),Ue});return E?x.unshift(C):x.push(C),C}}const createHook=o=>(r,S=currentInstance)=>{(!isInSSRComponentSetup||o==="sp")&&injectHook(o,(...E)=>r(...E),S)},onBeforeMount=createHook("bm"),onMounted$1=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated$1=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted$1=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(o,r=currentInstance){injectHook("ec",o,r)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(o,r){return resolveAsset(COMPONENTS,o,!0,r)||o}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDirective(o){return resolveAsset(DIRECTIVES,o)}function resolveAsset(o,r,S=!0,E=!1){const x=currentRenderingInstance||currentInstance;if(x){const C=x.type;if(o===COMPONENTS){const Ce=getComponentName(C,!1);if(Ce&&(Ce===r||Ce===camelize$1(r)||Ce===capitalize(camelize$1(r))))return C}const R=resolve(x[o]||C[o],r)||resolve(x.appContext[o],r);return!R&&E?C:R}}function resolve(o,r){return o&&(o[r]||o[camelize$1(r)]||o[capitalize(camelize$1(r))])}function renderList(o,r,S,E){let x;const C=S,R=isArray$1(o);if(R||isString(o)){const Ce=R&&isReactive(o);let Ue=!1;Ce&&(Ue=!isShallow(o),o=shallowReadArray(o)),x=new Array(o.length);for(let je=0,Xe=o.length;je<Xe;je++)x[je]=r(Ue?toReactive(o[je]):o[je],je,void 0,C)}else if(typeof o=="number"){x=new Array(o);for(let Ce=0;Ce<o;Ce++)x[Ce]=r(Ce+1,Ce,void 0,C)}else if(isObject$3(o))if(o[Symbol.iterator])x=Array.from(o,(Ce,Ue)=>r(Ce,Ue,void 0,C));else{const Ce=Object.keys(o);x=new Array(Ce.length);for(let Ue=0,je=Ce.length;Ue<je;Ue++){const Xe=Ce[Ue];x[Ue]=r(o[Xe],Xe,Ue,C)}}else x=[];return x}function renderSlot(o,r,S={},E,x){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return openBlock(),createBlock(Fragment,null,[createVNode("slot",S,E)],64);let C=o[r];C&&C._c&&(C._d=!1),openBlock();const R=C&&ensureValidVNode(C(S)),Ce=S.key||R&&R.key,Ue=createBlock(Fragment,{key:(Ce&&!isSymbol(Ce)?Ce:`_${r}`)+(!R&&E?"_fb":"")},R||[],R&&o._===1?64:-2);return C&&C._c&&(C._d=!0),Ue}function ensureValidVNode(o){return o.some(r=>isVNode(r)?!(r.type===Comment$1||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?o:null}const getPublicInstance=o=>o?isStatefulComponent(o)?getComponentPublicInstance(o):getPublicInstance(o.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>o.props,$attrs:o=>o.attrs,$slots:o=>o.slots,$refs:o=>o.refs,$parent:o=>getPublicInstance(o.parent),$root:o=>getPublicInstance(o.root),$host:o=>o.ce,$emit:o=>o.emit,$options:o=>resolveMergedOptions(o),$forceUpdate:o=>o.f||(o.f=()=>{queueJob(o.update)}),$nextTick:o=>o.n||(o.n=nextTick.bind(o.proxy)),$watch:o=>instanceWatch.bind(o)}),hasSetupBinding=(o,r)=>o!==EMPTY_OBJ&&!o.__isScriptSetup&&hasOwn(o,r),PublicInstanceProxyHandlers={get({_:o},r){if(r==="__v_skip")return!0;const{ctx:S,setupState:E,data:x,props:C,accessCache:R,type:Ce,appContext:Ue}=o;let je;if(r[0]!=="$"){const Dt=R[r];if(Dt!==void 0)switch(Dt){case 1:return E[r];case 2:return x[r];case 4:return S[r];case 3:return C[r]}else{if(hasSetupBinding(E,r))return R[r]=1,E[r];if(x!==EMPTY_OBJ&&hasOwn(x,r))return R[r]=2,x[r];if((je=o.propsOptions[0])&&hasOwn(je,r))return R[r]=3,C[r];if(S!==EMPTY_OBJ&&hasOwn(S,r))return R[r]=4,S[r];shouldCacheAccess&&(R[r]=0)}}const Xe=publicPropertiesMap[r];let Ye,St;if(Xe)return r==="$attrs"&&track(o.attrs,"get",""),Xe(o);if((Ye=Ce.__cssModules)&&(Ye=Ye[r]))return Ye;if(S!==EMPTY_OBJ&&hasOwn(S,r))return R[r]=4,S[r];if(St=Ue.config.globalProperties,hasOwn(St,r))return St[r]},set({_:o},r,S){const{data:E,setupState:x,ctx:C}=o;return hasSetupBinding(x,r)?(x[r]=S,!0):E!==EMPTY_OBJ&&hasOwn(E,r)?(E[r]=S,!0):hasOwn(o.props,r)||r[0]==="$"&&r.slice(1)in o?!1:(C[r]=S,!0)},has({_:{data:o,setupState:r,accessCache:S,ctx:E,appContext:x,propsOptions:C}},R){let Ce;return!!S[R]||o!==EMPTY_OBJ&&hasOwn(o,R)||hasSetupBinding(r,R)||(Ce=C[0])&&hasOwn(Ce,R)||hasOwn(E,R)||hasOwn(publicPropertiesMap,R)||hasOwn(x.config.globalProperties,R)},defineProperty(o,r,S){return S.get!=null?o._.accessCache[r]=0:hasOwn(S,"value")&&this.set(o,r,S.value,null),Reflect.defineProperty(o,r,S)}};function normalizePropsOrEmits(o){return isArray$1(o)?o.reduce((r,S)=>(r[S]=null,r),{}):o}let shouldCacheAccess=!0;function applyOptions(o){const r=resolveMergedOptions(o),S=o.proxy,E=o.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook(r.beforeCreate,o,"bc");const{data:x,computed:C,methods:R,watch:Ce,provide:Ue,inject:je,created:Xe,beforeMount:Ye,mounted:St,beforeUpdate:Dt,updated:kt,activated:et,deactivated:Ft,beforeDestroy:xt,beforeUnmount:Mt,destroyed:Ot,unmounted:Ut,render:Xt,renderTracked:ei,renderTriggered:si,errorCaptured:li,serverPrefetch:bi,expose:wi,inheritAttrs:Pi,components:Ci,directives:Di,filters:Bi}=r;if(je&&resolveInjections(je,E,null),R)for(const mi in R){const ri=R[mi];isFunction$2(ri)&&(E[mi]=ri.bind(S))}if(x){const mi=x.call(S,S);isObject$3(mi)&&(o.data=reactive(mi))}if(shouldCacheAccess=!0,C)for(const mi in C){const ri=C[mi],ni=isFunction$2(ri)?ri.bind(S,S):isFunction$2(ri.get)?ri.get.bind(S,S):NOOP,Ei=!isFunction$2(ri)&&isFunction$2(ri.set)?ri.set.bind(S):NOOP,Si=computed({get:ni,set:Ei});Object.defineProperty(E,mi,{enumerable:!0,configurable:!0,get:()=>Si.value,set:qi=>Si.value=qi})}if(Ce)for(const mi in Ce)createWatcher(Ce[mi],E,S,mi);if(Ue){const mi=isFunction$2(Ue)?Ue.call(S):Ue;Reflect.ownKeys(mi).forEach(ri=>{provide(ri,mi[ri])})}Xe&&callHook(Xe,o,"c");function oi(mi,ri){isArray$1(ri)?ri.forEach(ni=>mi(ni.bind(S))):ri&&mi(ri.bind(S))}if(oi(onBeforeMount,Ye),oi(onMounted$1,St),oi(onBeforeUpdate,Dt),oi(onUpdated$1,kt),oi(onActivated,et),oi(onDeactivated,Ft),oi(onErrorCaptured,li),oi(onRenderTracked,ei),oi(onRenderTriggered,si),oi(onBeforeUnmount,Mt),oi(onUnmounted$1,Ut),oi(onServerPrefetch,bi),isArray$1(wi))if(wi.length){const mi=o.exposed||(o.exposed={});wi.forEach(ri=>{Object.defineProperty(mi,ri,{get:()=>S[ri],set:ni=>S[ri]=ni})})}else o.exposed||(o.exposed={});Xt&&o.render===NOOP&&(o.render=Xt),Pi!=null&&(o.inheritAttrs=Pi),Ci&&(o.components=Ci),Di&&(o.directives=Di),bi&&markAsyncBoundary(o)}function resolveInjections(o,r,S=NOOP){isArray$1(o)&&(o=normalizeInject(o));for(const E in o){const x=o[E];let C;isObject$3(x)?"default"in x?C=inject(x.from||E,x.default,!0):C=inject(x.from||E):C=inject(x),isRef(C)?Object.defineProperty(r,E,{enumerable:!0,configurable:!0,get:()=>C.value,set:R=>C.value=R}):r[E]=C}}function callHook(o,r,S){callWithAsyncErrorHandling(isArray$1(o)?o.map(E=>E.bind(r.proxy)):o.bind(r.proxy),r,S)}function createWatcher(o,r,S,E){let x=E.includes(".")?createPathGetter(S,E):()=>S[E];if(isString(o)){const C=r[o];isFunction$2(C)&&watch(x,C)}else if(isFunction$2(o))watch(x,o.bind(S));else if(isObject$3(o))if(isArray$1(o))o.forEach(C=>createWatcher(C,r,S,E));else{const C=isFunction$2(o.handler)?o.handler.bind(S):r[o.handler];isFunction$2(C)&&watch(x,C,o)}}function resolveMergedOptions(o){const r=o.type,{mixins:S,extends:E}=r,{mixins:x,optionsCache:C,config:{optionMergeStrategies:R}}=o.appContext,Ce=C.get(r);let Ue;return Ce?Ue=Ce:!x.length&&!S&&!E?Ue=r:(Ue={},x.length&&x.forEach(je=>mergeOptions$1(Ue,je,R,!0)),mergeOptions$1(Ue,r,R)),isObject$3(r)&&C.set(r,Ue),Ue}function mergeOptions$1(o,r,S,E=!1){const{mixins:x,extends:C}=r;C&&mergeOptions$1(o,C,S,!0),x&&x.forEach(R=>mergeOptions$1(o,R,S,!0));for(const R in r)if(!(E&&R==="expose")){const Ce=internalOptionMergeStrats[R]||S&&S[R];o[R]=Ce?Ce(o[R],r[R]):r[R]}return o}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(o,r){return r?o?function(){return extend$1(isFunction$2(o)?o.call(this,this):o,isFunction$2(r)?r.call(this,this):r)}:r:o}function mergeInject(o,r){return mergeObjectOptions(normalizeInject(o),normalizeInject(r))}function normalizeInject(o){if(isArray$1(o)){const r={};for(let S=0;S<o.length;S++)r[o[S]]=o[S];return r}return o}function mergeAsArray(o,r){return o?[...new Set([].concat(o,r))]:r}function mergeObjectOptions(o,r){return o?extend$1(Object.create(null),o,r):r}function mergeEmitsOrPropsOptions(o,r){return o?isArray$1(o)&&isArray$1(r)?[...new Set([...o,...r])]:extend$1(Object.create(null),normalizePropsOrEmits(o),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(o,r){if(!o)return r;if(!r)return o;const S=extend$1(Object.create(null),o);for(const E in r)S[E]=mergeAsArray(o[E],r[E]);return S}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(o,r){return function(E,x=null){isFunction$2(E)||(E=extend$1({},E)),x!=null&&!isObject$3(x)&&(x=null);const C=createAppContext(),R=new WeakSet,Ce=[];let Ue=!1;const je=C.app={_uid:uid$1++,_component:E,_props:x,_container:null,_context:C,_instance:null,version:version$8,get config(){return C.config},set config(Xe){},use(Xe,...Ye){return R.has(Xe)||(Xe&&isFunction$2(Xe.install)?(R.add(Xe),Xe.install(je,...Ye)):isFunction$2(Xe)&&(R.add(Xe),Xe(je,...Ye))),je},mixin(Xe){return C.mixins.includes(Xe)||C.mixins.push(Xe),je},component(Xe,Ye){return Ye?(C.components[Xe]=Ye,je):C.components[Xe]},directive(Xe,Ye){return Ye?(C.directives[Xe]=Ye,je):C.directives[Xe]},mount(Xe,Ye,St){if(!Ue){const Dt=je._ceVNode||createVNode(E,x);return Dt.appContext=C,St===!0?St="svg":St===!1&&(St=void 0),Ye&&r?r(Dt,Xe):o(Dt,Xe,St),Ue=!0,je._container=Xe,Xe.__vue_app__=je,getComponentPublicInstance(Dt.component)}},onUnmount(Xe){Ce.push(Xe)},unmount(){Ue&&(callWithAsyncErrorHandling(Ce,je._instance,16),o(null,je._container),delete je._container.__vue_app__)},provide(Xe,Ye){return C.provides[Xe]=Ye,je},runWithContext(Xe){const Ye=currentApp;currentApp=je;try{return Xe()}finally{currentApp=Ye}}};return je}}let currentApp=null;function provide(o,r){if(currentInstance){let S=currentInstance.provides;const E=currentInstance.parent&&currentInstance.parent.provides;E===S&&(S=currentInstance.provides=Object.create(E)),S[o]=r}}function inject(o,r,S=!1){const E=currentInstance||currentRenderingInstance;if(E||currentApp){const x=currentApp?currentApp._context.provides:E?E.parent==null?E.vnode.appContext&&E.vnode.appContext.provides:E.parent.provides:void 0;if(x&&o in x)return x[o];if(arguments.length>1)return S&&isFunction$2(r)?r.call(E&&E.proxy):r}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=o=>Object.getPrototypeOf(o)===internalObjectProto;function initProps(o,r,S,E=!1){const x={},C=createInternalObject();o.propsDefaults=Object.create(null),setFullProps(o,r,x,C);for(const R in o.propsOptions[0])R in x||(x[R]=void 0);S?o.props=E?x:shallowReactive(x):o.type.props?o.props=x:o.props=C,o.attrs=C}function updateProps(o,r,S,E){const{props:x,attrs:C,vnode:{patchFlag:R}}=o,Ce=toRaw(x),[Ue]=o.propsOptions;let je=!1;if((E||R>0)&&!(R&16)){if(R&8){const Xe=o.vnode.dynamicProps;for(let Ye=0;Ye<Xe.length;Ye++){let St=Xe[Ye];if(isEmitListener(o.emitsOptions,St))continue;const Dt=r[St];if(Ue)if(hasOwn(C,St))Dt!==C[St]&&(C[St]=Dt,je=!0);else{const kt=camelize$1(St);x[kt]=resolvePropValue(Ue,Ce,kt,Dt,o,!1)}else Dt!==C[St]&&(C[St]=Dt,je=!0)}}}else{setFullProps(o,r,x,C)&&(je=!0);let Xe;for(const Ye in Ce)(!r||!hasOwn(r,Ye)&&((Xe=hyphenate(Ye))===Ye||!hasOwn(r,Xe)))&&(Ue?S&&(S[Ye]!==void 0||S[Xe]!==void 0)&&(x[Ye]=resolvePropValue(Ue,Ce,Ye,void 0,o,!0)):delete x[Ye]);if(C!==Ce)for(const Ye in C)(!r||!hasOwn(r,Ye))&&(delete C[Ye],je=!0)}je&&trigger$1(o.attrs,"set","")}function setFullProps(o,r,S,E){const[x,C]=o.propsOptions;let R=!1,Ce;if(r)for(let Ue in r){if(isReservedProp(Ue))continue;const je=r[Ue];let Xe;x&&hasOwn(x,Xe=camelize$1(Ue))?!C||!C.includes(Xe)?S[Xe]=je:(Ce||(Ce={}))[Xe]=je:isEmitListener(o.emitsOptions,Ue)||(!(Ue in E)||je!==E[Ue])&&(E[Ue]=je,R=!0)}if(C){const Ue=toRaw(S),je=Ce||EMPTY_OBJ;for(let Xe=0;Xe<C.length;Xe++){const Ye=C[Xe];S[Ye]=resolvePropValue(x,Ue,Ye,je[Ye],o,!hasOwn(je,Ye))}}return R}function resolvePropValue(o,r,S,E,x,C){const R=o[S];if(R!=null){const Ce=hasOwn(R,"default");if(Ce&&E===void 0){const Ue=R.default;if(R.type!==Function&&!R.skipFactory&&isFunction$2(Ue)){const{propsDefaults:je}=x;if(S in je)E=je[S];else{const Xe=setCurrentInstance(x);E=je[S]=Ue.call(null,r),Xe()}}else E=Ue;x.ce&&x.ce._setProp(S,E)}R[0]&&(C&&!Ce?E=!1:R[1]&&(E===""||E===hyphenate(S))&&(E=!0))}return E}const mixinPropsCache=new WeakMap;function normalizePropsOptions(o,r,S=!1){const E=S?mixinPropsCache:r.propsCache,x=E.get(o);if(x)return x;const C=o.props,R={},Ce=[];let Ue=!1;if(!isFunction$2(o)){const Xe=Ye=>{Ue=!0;const[St,Dt]=normalizePropsOptions(Ye,r,!0);extend$1(R,St),Dt&&Ce.push(...Dt)};!S&&r.mixins.length&&r.mixins.forEach(Xe),o.extends&&Xe(o.extends),o.mixins&&o.mixins.forEach(Xe)}if(!C&&!Ue)return isObject$3(o)&&E.set(o,EMPTY_ARR),EMPTY_ARR;if(isArray$1(C))for(let Xe=0;Xe<C.length;Xe++){const Ye=camelize$1(C[Xe]);validatePropName(Ye)&&(R[Ye]=EMPTY_OBJ)}else if(C)for(const Xe in C){const Ye=camelize$1(Xe);if(validatePropName(Ye)){const St=C[Xe],Dt=R[Ye]=isArray$1(St)||isFunction$2(St)?{type:St}:extend$1({},St),kt=Dt.type;let et=!1,Ft=!0;if(isArray$1(kt))for(let xt=0;xt<kt.length;++xt){const Mt=kt[xt],Ot=isFunction$2(Mt)&&Mt.name;if(Ot==="Boolean"){et=!0;break}else Ot==="String"&&(Ft=!1)}else et=isFunction$2(kt)&&kt.name==="Boolean";Dt[0]=et,Dt[1]=Ft,(et||hasOwn(Dt,"default"))&&Ce.push(Ye)}}const je=[R,Ce];return isObject$3(o)&&E.set(o,je),je}function validatePropName(o){return o[0]!=="$"&&!isReservedProp(o)}const isInternalKey=o=>o[0]==="_"||o==="$stable",normalizeSlotValue=o=>isArray$1(o)?o.map(normalizeVNode):[normalizeVNode(o)],normalizeSlot$1=(o,r,S)=>{if(r._n)return r;const E=withCtx((...x)=>normalizeSlotValue(r(...x)),S);return E._c=!1,E},normalizeObjectSlots=(o,r,S)=>{const E=o._ctx;for(const x in o){if(isInternalKey(x))continue;const C=o[x];if(isFunction$2(C))r[x]=normalizeSlot$1(x,C,E);else if(C!=null){const R=normalizeSlotValue(C);r[x]=()=>R}}},normalizeVNodeSlots=(o,r)=>{const S=normalizeSlotValue(r);o.slots.default=()=>S},assignSlots=(o,r,S)=>{for(const E in r)(S||E!=="_")&&(o[E]=r[E])},initSlots=(o,r,S)=>{const E=o.slots=createInternalObject();if(o.vnode.shapeFlag&32){const x=r._;x?(assignSlots(E,r,S),S&&def(E,"_",x,!0)):normalizeObjectSlots(r,E)}else r&&normalizeVNodeSlots(o,r)},updateSlots=(o,r,S)=>{const{vnode:E,slots:x}=o;let C=!0,R=EMPTY_OBJ;if(E.shapeFlag&32){const Ce=r._;Ce?S&&Ce===1?C=!1:assignSlots(x,r,S):(C=!r.$stable,normalizeObjectSlots(r,x)),R=r}else r&&(normalizeVNodeSlots(o,r),R={default:1});if(C)for(const Ce in x)!isInternalKey(Ce)&&R[Ce]==null&&delete x[Ce]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(o){return baseCreateRenderer(o)}function baseCreateRenderer(o,r){const S=getGlobalThis();S.__VUE__=!0;const{insert:E,remove:x,patchProp:C,createElement:R,createText:Ce,createComment:Ue,setText:je,setElementText:Xe,parentNode:Ye,nextSibling:St,setScopeId:Dt=NOOP,insertStaticContent:kt}=o,et=(pi,fi,Ai,Vi=null,Li=null,Ni=null,Qi=void 0,Fi=null,Gi=!!fi.dynamicChildren)=>{if(pi===fi)return;pi&&!isSameVNodeType(pi,fi)&&(Vi=Mi(pi),qi(pi,Li,Ni,!0),pi=null),fi.patchFlag===-2&&(Gi=!1,fi.dynamicChildren=null);const{type:ji,ref:ar,shapeFlag:Ji}=fi;switch(ji){case Text$1:Ft(pi,fi,Ai,Vi);break;case Comment$1:xt(pi,fi,Ai,Vi);break;case Static:pi==null&&Mt(fi,Ai,Vi,Qi);break;case Fragment:Ci(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi);break;default:Ji&1?Xt(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi):Ji&6?Di(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi):(Ji&64||Ji&128)&&ji.process(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi,ir)}ar!=null&&Li&&setRef(ar,pi&&pi.ref,Ni,fi||pi,!fi)},Ft=(pi,fi,Ai,Vi)=>{if(pi==null)E(fi.el=Ce(fi.children),Ai,Vi);else{const Li=fi.el=pi.el;fi.children!==pi.children&&je(Li,fi.children)}},xt=(pi,fi,Ai,Vi)=>{pi==null?E(fi.el=Ue(fi.children||""),Ai,Vi):fi.el=pi.el},Mt=(pi,fi,Ai,Vi)=>{[pi.el,pi.anchor]=kt(pi.children,fi,Ai,Vi,pi.el,pi.anchor)},Ot=({el:pi,anchor:fi},Ai,Vi)=>{let Li;for(;pi&&pi!==fi;)Li=St(pi),E(pi,Ai,Vi),pi=Li;E(fi,Ai,Vi)},Ut=({el:pi,anchor:fi})=>{let Ai;for(;pi&&pi!==fi;)Ai=St(pi),x(pi),pi=Ai;x(fi)},Xt=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi)=>{fi.type==="svg"?Qi="svg":fi.type==="math"&&(Qi="mathml"),pi==null?ei(fi,Ai,Vi,Li,Ni,Qi,Fi,Gi):bi(pi,fi,Li,Ni,Qi,Fi,Gi)},ei=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi)=>{let Gi,ji;const{props:ar,shapeFlag:Ji,transition:Xi,dirs:or}=pi;if(Gi=pi.el=R(pi.type,Ni,ar&&ar.is,ar),Ji&8?Xe(Gi,pi.children):Ji&16&&li(pi.children,Gi,null,Vi,Li,resolveChildrenNamespace(pi,Ni),Qi,Fi),or&&invokeDirectiveHook(pi,null,Vi,"created"),si(Gi,pi,pi.scopeId,Qi,Vi),ar){for(const Er in ar)Er!=="value"&&!isReservedProp(Er)&&C(Gi,Er,null,ar[Er],Ni,Vi);"value"in ar&&C(Gi,"value",null,ar.value,Ni),(ji=ar.onVnodeBeforeMount)&&invokeVNodeHook(ji,Vi,pi)}or&&invokeDirectiveHook(pi,null,Vi,"beforeMount");const vr=needTransition(Li,Xi);vr&&Xi.beforeEnter(Gi),E(Gi,fi,Ai),((ji=ar&&ar.onVnodeMounted)||vr||or)&&queuePostRenderEffect(()=>{ji&&invokeVNodeHook(ji,Vi,pi),vr&&Xi.enter(Gi),or&&invokeDirectiveHook(pi,null,Vi,"mounted")},Li)},si=(pi,fi,Ai,Vi,Li)=>{if(Ai&&Dt(pi,Ai),Vi)for(let Ni=0;Ni<Vi.length;Ni++)Dt(pi,Vi[Ni]);if(Li){let Ni=Li.subTree;if(fi===Ni||isSuspense(Ni.type)&&(Ni.ssContent===fi||Ni.ssFallback===fi)){const Qi=Li.vnode;si(pi,Qi,Qi.scopeId,Qi.slotScopeIds,Li.parent)}}},li=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi=0)=>{for(let ji=Gi;ji<pi.length;ji++){const ar=pi[ji]=Fi?cloneIfMounted(pi[ji]):normalizeVNode(pi[ji]);et(null,ar,fi,Ai,Vi,Li,Ni,Qi,Fi)}},bi=(pi,fi,Ai,Vi,Li,Ni,Qi)=>{const Fi=fi.el=pi.el;let{patchFlag:Gi,dynamicChildren:ji,dirs:ar}=fi;Gi|=pi.patchFlag&16;const Ji=pi.props||EMPTY_OBJ,Xi=fi.props||EMPTY_OBJ;let or;if(Ai&&toggleRecurse(Ai,!1),(or=Xi.onVnodeBeforeUpdate)&&invokeVNodeHook(or,Ai,fi,pi),ar&&invokeDirectiveHook(fi,pi,Ai,"beforeUpdate"),Ai&&toggleRecurse(Ai,!0),(Ji.innerHTML&&Xi.innerHTML==null||Ji.textContent&&Xi.textContent==null)&&Xe(Fi,""),ji?wi(pi.dynamicChildren,ji,Fi,Ai,Vi,resolveChildrenNamespace(fi,Li),Ni):Qi||ri(pi,fi,Fi,null,Ai,Vi,resolveChildrenNamespace(fi,Li),Ni,!1),Gi>0){if(Gi&16)Pi(Fi,Ji,Xi,Ai,Li);else if(Gi&2&&Ji.class!==Xi.class&&C(Fi,"class",null,Xi.class,Li),Gi&4&&C(Fi,"style",Ji.style,Xi.style,Li),Gi&8){const vr=fi.dynamicProps;for(let Er=0;Er<vr.length;Er++){const xr=vr[Er],Mr=Ji[xr],Nr=Xi[xr];(Nr!==Mr||xr==="value")&&C(Fi,xr,Mr,Nr,Li,Ai)}}Gi&1&&pi.children!==fi.children&&Xe(Fi,fi.children)}else!Qi&&ji==null&&Pi(Fi,Ji,Xi,Ai,Li);((or=Xi.onVnodeUpdated)||ar)&&queuePostRenderEffect(()=>{or&&invokeVNodeHook(or,Ai,fi,pi),ar&&invokeDirectiveHook(fi,pi,Ai,"updated")},Vi)},wi=(pi,fi,Ai,Vi,Li,Ni,Qi)=>{for(let Fi=0;Fi<fi.length;Fi++){const Gi=pi[Fi],ji=fi[Fi],ar=Gi.el&&(Gi.type===Fragment||!isSameVNodeType(Gi,ji)||Gi.shapeFlag&70)?Ye(Gi.el):Ai;et(Gi,ji,ar,null,Vi,Li,Ni,Qi,!0)}},Pi=(pi,fi,Ai,Vi,Li)=>{if(fi!==Ai){if(fi!==EMPTY_OBJ)for(const Ni in fi)!isReservedProp(Ni)&&!(Ni in Ai)&&C(pi,Ni,fi[Ni],null,Li,Vi);for(const Ni in Ai){if(isReservedProp(Ni))continue;const Qi=Ai[Ni],Fi=fi[Ni];Qi!==Fi&&Ni!=="value"&&C(pi,Ni,Fi,Qi,Li,Vi)}"value"in Ai&&C(pi,"value",fi.value,Ai.value,Li)}},Ci=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi)=>{const ji=fi.el=pi?pi.el:Ce(""),ar=fi.anchor=pi?pi.anchor:Ce("");let{patchFlag:Ji,dynamicChildren:Xi,slotScopeIds:or}=fi;or&&(Fi=Fi?Fi.concat(or):or),pi==null?(E(ji,Ai,Vi),E(ar,Ai,Vi),li(fi.children||[],Ai,ar,Li,Ni,Qi,Fi,Gi)):Ji>0&&Ji&64&&Xi&&pi.dynamicChildren?(wi(pi.dynamicChildren,Xi,Ai,Li,Ni,Qi,Fi),(fi.key!=null||Li&&fi===Li.subTree)&&traverseStaticChildren(pi,fi,!0)):ri(pi,fi,Ai,ar,Li,Ni,Qi,Fi,Gi)},Di=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi)=>{fi.slotScopeIds=Fi,pi==null?fi.shapeFlag&512?Li.ctx.activate(fi,Ai,Vi,Qi,Gi):Bi(fi,Ai,Vi,Li,Ni,Qi,Gi):Ri(pi,fi,Gi)},Bi=(pi,fi,Ai,Vi,Li,Ni,Qi)=>{const Fi=pi.component=createComponentInstance(pi,Vi,Li);if(isKeepAlive(pi)&&(Fi.ctx.renderer=ir),setupComponent(Fi,!1,Qi),Fi.asyncDep){if(Li&&Li.registerDep(Fi,oi,Qi),!pi.el){const Gi=Fi.subTree=createVNode(Comment$1);xt(null,Gi,fi,Ai)}}else oi(Fi,pi,fi,Ai,Li,Ni,Qi)},Ri=(pi,fi,Ai)=>{const Vi=fi.component=pi.component;if(shouldUpdateComponent(pi,fi,Ai))if(Vi.asyncDep&&!Vi.asyncResolved){mi(Vi,fi,Ai);return}else Vi.next=fi,Vi.update();else fi.el=pi.el,Vi.vnode=fi},oi=(pi,fi,Ai,Vi,Li,Ni,Qi)=>{const Fi=()=>{if(pi.isMounted){let{next:Ji,bu:Xi,u:or,parent:vr,vnode:Er}=pi;{const $r=locateNonHydratedAsyncRoot(pi);if($r){Ji&&(Ji.el=Er.el,mi(pi,Ji,Qi)),$r.asyncDep.then(()=>{pi.isUnmounted||Fi()});return}}let xr=Ji,Mr;toggleRecurse(pi,!1),Ji?(Ji.el=Er.el,mi(pi,Ji,Qi)):Ji=Er,Xi&&invokeArrayFns(Xi),(Mr=Ji.props&&Ji.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Mr,vr,Ji,Er),toggleRecurse(pi,!0);const Nr=renderComponentRoot(pi),Sr=pi.subTree;pi.subTree=Nr,et(Sr,Nr,Ye(Sr.el),Mi(Sr),pi,Li,Ni),Ji.el=Nr.el,xr===null&&updateHOCHostEl(pi,Nr.el),or&&queuePostRenderEffect(or,Li),(Mr=Ji.props&&Ji.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Mr,vr,Ji,Er),Li)}else{let Ji;const{el:Xi,props:or}=fi,{bm:vr,m:Er,parent:xr,root:Mr,type:Nr}=pi,Sr=isAsyncWrapper(fi);if(toggleRecurse(pi,!1),vr&&invokeArrayFns(vr),!Sr&&(Ji=or&&or.onVnodeBeforeMount)&&invokeVNodeHook(Ji,xr,fi),toggleRecurse(pi,!0),Xi&&yr){const $r=()=>{pi.subTree=renderComponentRoot(pi),yr(Xi,pi.subTree,pi,Li,null)};Sr&&Nr.__asyncHydrate?Nr.__asyncHydrate(Xi,pi,$r):$r()}else{Mr.ce&&Mr.ce._injectChildStyle(Nr);const $r=pi.subTree=renderComponentRoot(pi);et(null,$r,Ai,Vi,pi,Li,Ni),fi.el=$r.el}if(Er&&queuePostRenderEffect(Er,Li),!Sr&&(Ji=or&&or.onVnodeMounted)){const $r=fi;queuePostRenderEffect(()=>invokeVNodeHook(Ji,xr,$r),Li)}(fi.shapeFlag&256||xr&&isAsyncWrapper(xr.vnode)&&xr.vnode.shapeFlag&256)&&pi.a&&queuePostRenderEffect(pi.a,Li),pi.isMounted=!0,fi=Ai=Vi=null}};pi.scope.on();const Gi=pi.effect=new ReactiveEffect(Fi);pi.scope.off();const ji=pi.update=Gi.run.bind(Gi),ar=pi.job=Gi.runIfDirty.bind(Gi);ar.i=pi,ar.id=pi.uid,Gi.scheduler=()=>queueJob(ar),toggleRecurse(pi,!0),ji()},mi=(pi,fi,Ai)=>{fi.component=pi;const Vi=pi.vnode.props;pi.vnode=fi,pi.next=null,updateProps(pi,fi.props,Vi,Ai),updateSlots(pi,fi.children,Ai),pauseTracking(),flushPreFlushCbs(pi),resetTracking()},ri=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi=!1)=>{const ji=pi&&pi.children,ar=pi?pi.shapeFlag:0,Ji=fi.children,{patchFlag:Xi,shapeFlag:or}=fi;if(Xi>0){if(Xi&128){Ei(ji,Ji,Ai,Vi,Li,Ni,Qi,Fi,Gi);return}else if(Xi&256){ni(ji,Ji,Ai,Vi,Li,Ni,Qi,Fi,Gi);return}}or&8?(ar&16&&lr(ji,Li,Ni),Ji!==ji&&Xe(Ai,Ji)):ar&16?or&16?Ei(ji,Ji,Ai,Vi,Li,Ni,Qi,Fi,Gi):lr(ji,Li,Ni,!0):(ar&8&&Xe(Ai,""),or&16&&li(Ji,Ai,Vi,Li,Ni,Qi,Fi,Gi))},ni=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi)=>{pi=pi||EMPTY_ARR,fi=fi||EMPTY_ARR;const ji=pi.length,ar=fi.length,Ji=Math.min(ji,ar);let Xi;for(Xi=0;Xi<Ji;Xi++){const or=fi[Xi]=Gi?cloneIfMounted(fi[Xi]):normalizeVNode(fi[Xi]);et(pi[Xi],or,Ai,null,Li,Ni,Qi,Fi,Gi)}ji>ar?lr(pi,Li,Ni,!0,!1,Ji):li(fi,Ai,Vi,Li,Ni,Qi,Fi,Gi,Ji)},Ei=(pi,fi,Ai,Vi,Li,Ni,Qi,Fi,Gi)=>{let ji=0;const ar=fi.length;let Ji=pi.length-1,Xi=ar-1;for(;ji<=Ji&&ji<=Xi;){const or=pi[ji],vr=fi[ji]=Gi?cloneIfMounted(fi[ji]):normalizeVNode(fi[ji]);if(isSameVNodeType(or,vr))et(or,vr,Ai,null,Li,Ni,Qi,Fi,Gi);else break;ji++}for(;ji<=Ji&&ji<=Xi;){const or=pi[Ji],vr=fi[Xi]=Gi?cloneIfMounted(fi[Xi]):normalizeVNode(fi[Xi]);if(isSameVNodeType(or,vr))et(or,vr,Ai,null,Li,Ni,Qi,Fi,Gi);else break;Ji--,Xi--}if(ji>Ji){if(ji<=Xi){const or=Xi+1,vr=or<ar?fi[or].el:Vi;for(;ji<=Xi;)et(null,fi[ji]=Gi?cloneIfMounted(fi[ji]):normalizeVNode(fi[ji]),Ai,vr,Li,Ni,Qi,Fi,Gi),ji++}}else if(ji>Xi)for(;ji<=Ji;)qi(pi[ji],Li,Ni,!0),ji++;else{const or=ji,vr=ji,Er=new Map;for(ji=vr;ji<=Xi;ji++){const jr=fi[ji]=Gi?cloneIfMounted(fi[ji]):normalizeVNode(fi[ji]);jr.key!=null&&Er.set(jr.key,ji)}let xr,Mr=0;const Nr=Xi-vr+1;let Sr=!1,$r=0;const Gr=new Array(Nr);for(ji=0;ji<Nr;ji++)Gr[ji]=0;for(ji=or;ji<=Ji;ji++){const jr=pi[ji];if(Mr>=Nr){qi(jr,Li,Ni,!0);continue}let Xr;if(jr.key!=null)Xr=Er.get(jr.key);else for(xr=vr;xr<=Xi;xr++)if(Gr[xr-vr]===0&&isSameVNodeType(jr,fi[xr])){Xr=xr;break}Xr===void 0?qi(jr,Li,Ni,!0):(Gr[Xr-vr]=ji+1,Xr>=$r?$r=Xr:Sr=!0,et(jr,fi[Xr],Ai,null,Li,Ni,Qi,Fi,Gi),Mr++)}const qn=Sr?getSequence(Gr):EMPTY_ARR;for(xr=qn.length-1,ji=Nr-1;ji>=0;ji--){const jr=vr+ji,Xr=fi[jr],Rn=jr+1<ar?fi[jr+1].el:Vi;Gr[ji]===0?et(null,Xr,Ai,Rn,Li,Ni,Qi,Fi,Gi):Sr&&(xr<0||ji!==qn[xr]?Si(Xr,Ai,Rn,2):xr--)}}},Si=(pi,fi,Ai,Vi,Li=null)=>{const{el:Ni,type:Qi,transition:Fi,children:Gi,shapeFlag:ji}=pi;if(ji&6){Si(pi.component.subTree,fi,Ai,Vi);return}if(ji&128){pi.suspense.move(fi,Ai,Vi);return}if(ji&64){Qi.move(pi,fi,Ai,ir);return}if(Qi===Fragment){E(Ni,fi,Ai);for(let Ji=0;Ji<Gi.length;Ji++)Si(Gi[Ji],fi,Ai,Vi);E(pi.anchor,fi,Ai);return}if(Qi===Static){Ot(pi,fi,Ai);return}if(Vi!==2&&ji&1&&Fi)if(Vi===0)Fi.beforeEnter(Ni),E(Ni,fi,Ai),queuePostRenderEffect(()=>Fi.enter(Ni),Li);else{const{leave:Ji,delayLeave:Xi,afterLeave:or}=Fi,vr=()=>E(Ni,fi,Ai),Er=()=>{Ji(Ni,()=>{vr(),or&&or()})};Xi?Xi(Ni,vr,Er):Er()}else E(Ni,fi,Ai)},qi=(pi,fi,Ai,Vi=!1,Li=!1)=>{const{type:Ni,props:Qi,ref:Fi,children:Gi,dynamicChildren:ji,shapeFlag:ar,patchFlag:Ji,dirs:Xi,cacheIndex:or}=pi;if(Ji===-2&&(Li=!1),Fi!=null&&setRef(Fi,null,Ai,pi,!0),or!=null&&(fi.renderCache[or]=void 0),ar&256){fi.ctx.deactivate(pi);return}const vr=ar&1&&Xi,Er=!isAsyncWrapper(pi);let xr;if(Er&&(xr=Qi&&Qi.onVnodeBeforeUnmount)&&invokeVNodeHook(xr,fi,pi),ar&6)fr(pi.component,Ai,Vi);else{if(ar&128){pi.suspense.unmount(Ai,Vi);return}vr&&invokeDirectiveHook(pi,null,fi,"beforeUnmount"),ar&64?pi.type.remove(pi,fi,Ai,ir,Vi):ji&&!ji.hasOnce&&(Ni!==Fragment||Ji>0&&Ji&64)?lr(ji,fi,Ai,!1,!0):(Ni===Fragment&&Ji&384||!Li&&ar&16)&&lr(Gi,fi,Ai),Vi&&sr(pi)}(Er&&(xr=Qi&&Qi.onVnodeUnmounted)||vr)&&queuePostRenderEffect(()=>{xr&&invokeVNodeHook(xr,fi,pi),vr&&invokeDirectiveHook(pi,null,fi,"unmounted")},Ai)},sr=pi=>{const{type:fi,el:Ai,anchor:Vi,transition:Li}=pi;if(fi===Fragment){ur(Ai,Vi);return}if(fi===Static){Ut(pi);return}const Ni=()=>{x(Ai),Li&&!Li.persisted&&Li.afterLeave&&Li.afterLeave()};if(pi.shapeFlag&1&&Li&&!Li.persisted){const{leave:Qi,delayLeave:Fi}=Li,Gi=()=>Qi(Ai,Ni);Fi?Fi(pi.el,Ni,Gi):Gi()}else Ni()},ur=(pi,fi)=>{let Ai;for(;pi!==fi;)Ai=St(pi),x(pi),pi=Ai;x(fi)},fr=(pi,fi,Ai)=>{const{bum:Vi,scope:Li,job:Ni,subTree:Qi,um:Fi,m:Gi,a:ji}=pi;invalidateMount(Gi),invalidateMount(ji),Vi&&invokeArrayFns(Vi),Li.stop(),Ni&&(Ni.flags|=8,qi(Qi,pi,fi,Ai)),Fi&&queuePostRenderEffect(Fi,fi),queuePostRenderEffect(()=>{pi.isUnmounted=!0},fi),fi&&fi.pendingBranch&&!fi.isUnmounted&&pi.asyncDep&&!pi.asyncResolved&&pi.suspenseId===fi.pendingId&&(fi.deps--,fi.deps===0&&fi.resolve())},lr=(pi,fi,Ai,Vi=!1,Li=!1,Ni=0)=>{for(let Qi=Ni;Qi<pi.length;Qi++)qi(pi[Qi],fi,Ai,Vi,Li)},Mi=pi=>{if(pi.shapeFlag&6)return Mi(pi.component.subTree);if(pi.shapeFlag&128)return pi.suspense.next();const fi=St(pi.anchor||pi.el),Ai=fi&&fi[TeleportEndKey];return Ai?St(Ai):fi};let Yi=!1;const Wi=(pi,fi,Ai)=>{pi==null?fi._vnode&&qi(fi._vnode,null,null,!0):et(fi._vnode||null,pi,fi,null,null,null,Ai),fi._vnode=pi,Yi||(Yi=!0,flushPreFlushCbs(),flushPostFlushCbs(),Yi=!1)},ir={p:et,um:qi,m:Si,r:sr,mt:Bi,mc:li,pc:ri,pbc:wi,n:Mi,o};let mr,yr;return{render:Wi,hydrate:mr,createApp:createAppAPI(Wi,mr)}}function resolveChildrenNamespace({type:o,props:r},S){return S==="svg"&&o==="foreignObject"||S==="mathml"&&o==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:S}function toggleRecurse({effect:o,job:r},S){S?(o.flags|=32,r.flags|=4):(o.flags&=-33,r.flags&=-5)}function needTransition(o,r){return(!o||o&&!o.pendingBranch)&&r&&!r.persisted}function traverseStaticChildren(o,r,S=!1){const E=o.children,x=r.children;if(isArray$1(E)&&isArray$1(x))for(let C=0;C<E.length;C++){const R=E[C];let Ce=x[C];Ce.shapeFlag&1&&!Ce.dynamicChildren&&((Ce.patchFlag<=0||Ce.patchFlag===32)&&(Ce=x[C]=cloneIfMounted(x[C]),Ce.el=R.el),!S&&Ce.patchFlag!==-2&&traverseStaticChildren(R,Ce)),Ce.type===Text$1&&(Ce.el=R.el)}}function getSequence(o){const r=o.slice(),S=[0];let E,x,C,R,Ce;const Ue=o.length;for(E=0;E<Ue;E++){const je=o[E];if(je!==0){if(x=S[S.length-1],o[x]<je){r[E]=x,S.push(E);continue}for(C=0,R=S.length-1;C<R;)Ce=C+R>>1,o[S[Ce]]<je?C=Ce+1:R=Ce;je<o[S[C]]&&(C>0&&(r[E]=S[C-1]),S[C]=E)}}for(C=S.length,R=S[C-1];C-- >0;)S[C]=R,R=r[R];return S}function locateNonHydratedAsyncRoot(o){const r=o.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:locateNonHydratedAsyncRoot(r)}function invalidateMount(o){if(o)for(let r=0;r<o.length;r++)o[r].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(o,r){return doWatch(o,null,r)}function watch(o,r,S){return doWatch(o,r,S)}function doWatch(o,r,S=EMPTY_OBJ){const{immediate:E,deep:x,flush:C,once:R}=S,Ce=extend$1({},S),Ue=r&&E||!r&&C!=="post";let je;if(isInSSRComponentSetup){if(C==="sync"){const Dt=useSSRContext();je=Dt.__watcherHandles||(Dt.__watcherHandles=[])}else if(!Ue){const Dt=()=>{};return Dt.stop=NOOP,Dt.resume=NOOP,Dt.pause=NOOP,Dt}}const Xe=currentInstance;Ce.call=(Dt,kt,et)=>callWithAsyncErrorHandling(Dt,Xe,kt,et);let Ye=!1;C==="post"?Ce.scheduler=Dt=>{queuePostRenderEffect(Dt,Xe&&Xe.suspense)}:C!=="sync"&&(Ye=!0,Ce.scheduler=(Dt,kt)=>{kt?Dt():queueJob(Dt)}),Ce.augmentJob=Dt=>{r&&(Dt.flags|=4),Ye&&(Dt.flags|=2,Xe&&(Dt.id=Xe.uid,Dt.i=Xe))};const St=watch$1(o,r,Ce);return isInSSRComponentSetup&&(je?je.push(St):Ue&&St()),St}function instanceWatch(o,r,S){const E=this.proxy,x=isString(o)?o.includes(".")?createPathGetter(E,o):()=>E[o]:o.bind(E,E);let C;isFunction$2(r)?C=r:(C=r.handler,S=r);const R=setCurrentInstance(this),Ce=doWatch(x,C.bind(E),S);return R(),Ce}function createPathGetter(o,r){const S=r.split(".");return()=>{let E=o;for(let x=0;x<S.length&&E;x++)E=E[S[x]];return E}}const getModelModifiers=(o,r)=>r==="modelValue"||r==="model-value"?o.modelModifiers:o[`${r}Modifiers`]||o[`${camelize$1(r)}Modifiers`]||o[`${hyphenate(r)}Modifiers`];function emit$1(o,r,...S){if(o.isUnmounted)return;const E=o.vnode.props||EMPTY_OBJ;let x=S;const C=r.startsWith("update:"),R=C&&getModelModifiers(E,r.slice(7));R&&(R.trim&&(x=S.map(Xe=>isString(Xe)?Xe.trim():Xe)),R.number&&(x=S.map(looseToNumber)));let Ce,Ue=E[Ce=toHandlerKey(r)]||E[Ce=toHandlerKey(camelize$1(r))];!Ue&&C&&(Ue=E[Ce=toHandlerKey(hyphenate(r))]),Ue&&callWithAsyncErrorHandling(Ue,o,6,x);const je=E[Ce+"Once"];if(je){if(!o.emitted)o.emitted={};else if(o.emitted[Ce])return;o.emitted[Ce]=!0,callWithAsyncErrorHandling(je,o,6,x)}}function normalizeEmitsOptions(o,r,S=!1){const E=r.emitsCache,x=E.get(o);if(x!==void 0)return x;const C=o.emits;let R={},Ce=!1;if(!isFunction$2(o)){const Ue=je=>{const Xe=normalizeEmitsOptions(je,r,!0);Xe&&(Ce=!0,extend$1(R,Xe))};!S&&r.mixins.length&&r.mixins.forEach(Ue),o.extends&&Ue(o.extends),o.mixins&&o.mixins.forEach(Ue)}return!C&&!Ce?(isObject$3(o)&&E.set(o,null),null):(isArray$1(C)?C.forEach(Ue=>R[Ue]=null):extend$1(R,C),isObject$3(o)&&E.set(o,R),R)}function isEmitListener(o,r){return!o||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(o,r[0].toLowerCase()+r.slice(1))||hasOwn(o,hyphenate(r))||hasOwn(o,r))}function markAttrsAccessed(){}function renderComponentRoot(o){const{type:r,vnode:S,proxy:E,withProxy:x,propsOptions:[C],slots:R,attrs:Ce,emit:Ue,render:je,renderCache:Xe,props:Ye,data:St,setupState:Dt,ctx:kt,inheritAttrs:et}=o,Ft=setCurrentRenderingInstance(o);let xt,Mt;try{if(S.shapeFlag&4){const Ut=x||E,Xt=Ut;xt=normalizeVNode(je.call(Xt,Ut,Xe,Ye,Dt,St,kt)),Mt=Ce}else{const Ut=r;xt=normalizeVNode(Ut.length>1?Ut(Ye,{attrs:Ce,slots:R,emit:Ue}):Ut(Ye,null)),Mt=r.props?Ce:getFunctionalFallthrough(Ce)}}catch(Ut){blockStack.length=0,handleError(Ut,o,1),xt=createVNode(Comment$1)}let Ot=xt;if(Mt&&et!==!1){const Ut=Object.keys(Mt),{shapeFlag:Xt}=Ot;Ut.length&&Xt&7&&(C&&Ut.some(isModelListener)&&(Mt=filterModelListeners(Mt,C)),Ot=cloneVNode(Ot,Mt,!1,!0))}return S.dirs&&(Ot=cloneVNode(Ot,null,!1,!0),Ot.dirs=Ot.dirs?Ot.dirs.concat(S.dirs):S.dirs),S.transition&&setTransitionHooks(Ot,S.transition),xt=Ot,setCurrentRenderingInstance(Ft),xt}const getFunctionalFallthrough=o=>{let r;for(const S in o)(S==="class"||S==="style"||isOn(S))&&((r||(r={}))[S]=o[S]);return r},filterModelListeners=(o,r)=>{const S={};for(const E in o)(!isModelListener(E)||!(E.slice(9)in r))&&(S[E]=o[E]);return S};function shouldUpdateComponent(o,r,S){const{props:E,children:x,component:C}=o,{props:R,children:Ce,patchFlag:Ue}=r,je=C.emitsOptions;if(r.dirs||r.transition)return!0;if(S&&Ue>=0){if(Ue&1024)return!0;if(Ue&16)return E?hasPropsChanged(E,R,je):!!R;if(Ue&8){const Xe=r.dynamicProps;for(let Ye=0;Ye<Xe.length;Ye++){const St=Xe[Ye];if(R[St]!==E[St]&&!isEmitListener(je,St))return!0}}}else return(x||Ce)&&(!Ce||!Ce.$stable)?!0:E===R?!1:E?R?hasPropsChanged(E,R,je):!0:!!R;return!1}function hasPropsChanged(o,r,S){const E=Object.keys(r);if(E.length!==Object.keys(o).length)return!0;for(let x=0;x<E.length;x++){const C=E[x];if(r[C]!==o[C]&&!isEmitListener(S,C))return!0}return!1}function updateHOCHostEl({vnode:o,parent:r},S){for(;r;){const E=r.subTree;if(E.suspense&&E.suspense.activeBranch===o&&(E.el=o.el),E===o)(o=r.vnode).el=S,r=r.parent;else break}}const isSuspense=o=>o.__isSuspense;function queueEffectWithSuspense(o,r){r&&r.pendingBranch?isArray$1(o)?r.effects.push(...o):r.effects.push(o):queuePostFlushCb(o)}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment$1=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(o=!1){blockStack.push(currentBlock=o?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(o){isBlockTreeEnabled+=o,o<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(o){return o.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(o),o}function createElementBlock(o,r,S,E,x,C){return setupBlock(createBaseVNode(o,r,S,E,x,C,!0))}function createBlock(o,r,S,E,x){return setupBlock(createVNode(o,r,S,E,x,!0))}function isVNode(o){return o?o.__v_isVNode===!0:!1}function isSameVNodeType(o,r){return o.type===r.type&&o.key===r.key}const normalizeKey=({key:o})=>o??null,normalizeRef=({ref:o,ref_key:r,ref_for:S})=>(typeof o=="number"&&(o=""+o),o!=null?isString(o)||isRef(o)||isFunction$2(o)?{i:currentRenderingInstance,r:o,k:r,f:!!S}:o:null);function createBaseVNode(o,r=null,S=null,E=0,x=null,C=o===Fragment?0:1,R=!1,Ce=!1){const Ue={__v_isVNode:!0,__v_skip:!0,type:o,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:S,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:C,patchFlag:E,dynamicProps:x,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return Ce?(normalizeChildren(Ue,S),C&128&&o.normalize(Ue)):S&&(Ue.shapeFlag|=isString(S)?8:16),isBlockTreeEnabled>0&&!R&&currentBlock&&(Ue.patchFlag>0||C&6)&&Ue.patchFlag!==32&&currentBlock.push(Ue),Ue}const createVNode=_createVNode;function _createVNode(o,r=null,S=null,E=0,x=null,C=!1){if((!o||o===NULL_DYNAMIC_COMPONENT)&&(o=Comment$1),isVNode(o)){const Ce=cloneVNode(o,r,!0);return S&&normalizeChildren(Ce,S),isBlockTreeEnabled>0&&!C&&currentBlock&&(Ce.shapeFlag&6?currentBlock[currentBlock.indexOf(o)]=Ce:currentBlock.push(Ce)),Ce.patchFlag=-2,Ce}if(isClassComponent(o)&&(o=o.__vccOpts),r){r=guardReactiveProps(r);let{class:Ce,style:Ue}=r;Ce&&!isString(Ce)&&(r.class=normalizeClass(Ce)),isObject$3(Ue)&&(isProxy(Ue)&&!isArray$1(Ue)&&(Ue=extend$1({},Ue)),r.style=normalizeStyle(Ue))}const R=isString(o)?1:isSuspense(o)?128:isTeleport(o)?64:isObject$3(o)?4:isFunction$2(o)?2:0;return createBaseVNode(o,r,S,E,x,R,C,!0)}function guardReactiveProps(o){return o?isProxy(o)||isInternalObject(o)?extend$1({},o):o:null}function cloneVNode(o,r,S=!1,E=!1){const{props:x,ref:C,patchFlag:R,children:Ce,transition:Ue}=o,je=r?mergeProps(x||{},r):x,Xe={__v_isVNode:!0,__v_skip:!0,type:o.type,props:je,key:je&&normalizeKey(je),ref:r&&r.ref?S&&C?isArray$1(C)?C.concat(normalizeRef(r)):[C,normalizeRef(r)]:normalizeRef(r):C,scopeId:o.scopeId,slotScopeIds:o.slotScopeIds,children:Ce,target:o.target,targetStart:o.targetStart,targetAnchor:o.targetAnchor,staticCount:o.staticCount,shapeFlag:o.shapeFlag,patchFlag:r&&o.type!==Fragment?R===-1?16:R|16:R,dynamicProps:o.dynamicProps,dynamicChildren:o.dynamicChildren,appContext:o.appContext,dirs:o.dirs,transition:Ue,component:o.component,suspense:o.suspense,ssContent:o.ssContent&&cloneVNode(o.ssContent),ssFallback:o.ssFallback&&cloneVNode(o.ssFallback),el:o.el,anchor:o.anchor,ctx:o.ctx,ce:o.ce};return Ue&&E&&setTransitionHooks(Xe,Ue.clone(Xe)),Xe}function createTextVNode(o=" ",r=0){return createVNode(Text$1,null,o,r)}function createStaticVNode(o,r){const S=createVNode(Static,null,o);return S.staticCount=r,S}function createCommentVNode(o="",r=!1){return r?(openBlock(),createBlock(Comment$1,null,o)):createVNode(Comment$1,null,o)}function normalizeVNode(o){return o==null||typeof o=="boolean"?createVNode(Comment$1):isArray$1(o)?createVNode(Fragment,null,o.slice()):isVNode(o)?cloneIfMounted(o):createVNode(Text$1,null,String(o))}function cloneIfMounted(o){return o.el===null&&o.patchFlag!==-1||o.memo?o:cloneVNode(o)}function normalizeChildren(o,r){let S=0;const{shapeFlag:E}=o;if(r==null)r=null;else if(isArray$1(r))S=16;else if(typeof r=="object")if(E&65){const x=r.default;x&&(x._c&&(x._d=!1),normalizeChildren(o,x()),x._c&&(x._d=!0));return}else{S=32;const x=r._;!x&&!isInternalObject(r)?r._ctx=currentRenderingInstance:x===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,o.patchFlag|=1024))}else isFunction$2(r)?(r={default:r,_ctx:currentRenderingInstance},S=32):(r=String(r),E&64?(S=16,r=[createTextVNode(r)]):S=8);o.children=r,o.shapeFlag|=S}function mergeProps(...o){const r={};for(let S=0;S<o.length;S++){const E=o[S];for(const x in E)if(x==="class")r.class!==E.class&&(r.class=normalizeClass([r.class,E.class]));else if(x==="style")r.style=normalizeStyle([r.style,E.style]);else if(isOn(x)){const C=r[x],R=E[x];R&&C!==R&&!(isArray$1(C)&&C.includes(R))&&(r[x]=C?[].concat(C,R):R)}else x!==""&&(r[x]=E[x])}return r}function invokeVNodeHook(o,r,S,E=null){callWithAsyncErrorHandling(o,r,7,[S,E])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(o,r,S){const E=o.type,x=(r?r.appContext:o.appContext)||emptyAppContext,C={uid:uid++,vnode:o,type:E,parent:r,appContext:x,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(x.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(E,x),emitsOptions:normalizeEmitsOptions(E,x),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:E.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:S,suspenseId:S?S.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return C.ctx={_:C},C.root=r?r.root:C,C.emit=emit$1.bind(null,C),o.ce&&o.ce(C),C}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const o=getGlobalThis(),r=(S,E)=>{let x;return(x=o[S])||(x=o[S]=[]),x.push(E),C=>{x.length>1?x.forEach(R=>R(C)):x[0](C)}};internalSetCurrentInstance=r("__VUE_INSTANCE_SETTERS__",S=>currentInstance=S),setInSSRSetupState=r("__VUE_SSR_SETTERS__",S=>isInSSRComponentSetup=S)}const setCurrentInstance=o=>{const r=currentInstance;return internalSetCurrentInstance(o),o.scope.on(),()=>{o.scope.off(),internalSetCurrentInstance(r)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(o){return o.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(o,r=!1,S=!1){r&&setInSSRSetupState(r);const{props:E,children:x}=o.vnode,C=isStatefulComponent(o);initProps(o,E,C,r),initSlots(o,x,S);const R=C?setupStatefulComponent(o,r):void 0;return r&&setInSSRSetupState(!1),R}function setupStatefulComponent(o,r){const S=o.type;o.accessCache=Object.create(null),o.proxy=new Proxy(o.ctx,PublicInstanceProxyHandlers);const{setup:E}=S;if(E){pauseTracking();const x=o.setupContext=E.length>1?createSetupContext(o):null,C=setCurrentInstance(o),R=callWithErrorHandling(E,o,0,[o.props,x]),Ce=isPromise$1(R);if(resetTracking(),C(),(Ce||o.sp)&&!isAsyncWrapper(o)&&markAsyncBoundary(o),Ce){if(R.then(unsetCurrentInstance,unsetCurrentInstance),r)return R.then(Ue=>{handleSetupResult(o,Ue,r)}).catch(Ue=>{handleError(Ue,o,0)});o.asyncDep=R}else handleSetupResult(o,R,r)}else finishComponentSetup(o,r)}function handleSetupResult(o,r,S){isFunction$2(r)?o.type.__ssrInlineRender?o.ssrRender=r:o.render=r:isObject$3(r)&&(o.setupState=proxyRefs(r)),finishComponentSetup(o,S)}let compile;function finishComponentSetup(o,r,S){const E=o.type;if(!o.render){if(!r&&compile&&!E.render){const x=E.template||resolveMergedOptions(o).template;if(x){const{isCustomElement:C,compilerOptions:R}=o.appContext.config,{delimiters:Ce,compilerOptions:Ue}=E,je=extend$1(extend$1({isCustomElement:C,delimiters:Ce},R),Ue);E.render=compile(x,je)}}o.render=E.render||NOOP}{const x=setCurrentInstance(o);pauseTracking();try{applyOptions(o)}finally{resetTracking(),x()}}}const attrsProxyHandlers={get(o,r){return track(o,"get",""),o[r]}};function createSetupContext(o){const r=S=>{o.exposed=S||{}};return{attrs:new Proxy(o.attrs,attrsProxyHandlers),slots:o.slots,emit:o.emit,expose:r}}function getComponentPublicInstance(o){return o.exposed?o.exposeProxy||(o.exposeProxy=new Proxy(proxyRefs(markRaw(o.exposed)),{get(r,S){if(S in r)return r[S];if(S in publicPropertiesMap)return publicPropertiesMap[S](o)},has(r,S){return S in r||S in publicPropertiesMap}})):o.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=o=>o.replace(classifyRE,r=>r.toUpperCase()).replace(/[-_]/g,"");function getComponentName(o,r=!0){return isFunction$2(o)?o.displayName||o.name:o.name||r&&o.__name}function formatComponentName(o,r,S=!1){let E=getComponentName(r);if(!E&&r.__file){const x=r.__file.match(/([^/\\]+)\.\w+$/);x&&(E=x[1])}if(!E&&o&&o.parent){const x=C=>{for(const R in C)if(C[R]===r)return R};E=x(o.components||o.parent.type.components)||x(o.appContext.components)}return E?classify(E):S?"App":"Anonymous"}function isClassComponent(o){return isFunction$2(o)&&"__vccOpts"in o}const computed=(o,r)=>computed$1(o,r,isInSSRComponentSetup);function h$1(o,r,S){const E=arguments.length;return E===2?isObject$3(r)&&!isArray$1(r)?isVNode(r)?createVNode(o,null,[r]):createVNode(o,r):createVNode(o,null,r):(E>3?S=Array.prototype.slice.call(arguments,2):E===3&&isVNode(S)&&(S=[S]),createVNode(o,r,S))}const version$8="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:o=>o})}catch{}const unsafeToTrustedHTML=policy?o=>policy.createHTML(o):o=>o,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(o,r,S)=>{r.insertBefore(o,S||null)},remove:o=>{const r=o.parentNode;r&&r.removeChild(o)},createElement:(o,r,S,E)=>{const x=r==="svg"?doc.createElementNS(svgNS,o):r==="mathml"?doc.createElementNS(mathmlNS,o):S?doc.createElement(o,{is:S}):doc.createElement(o);return o==="select"&&E&&E.multiple!=null&&x.setAttribute("multiple",E.multiple),x},createText:o=>doc.createTextNode(o),createComment:o=>doc.createComment(o),setText:(o,r)=>{o.nodeValue=r},setElementText:(o,r)=>{o.textContent=r},parentNode:o=>o.parentNode,nextSibling:o=>o.nextSibling,querySelector:o=>doc.querySelector(o),setScopeId(o,r){o.setAttribute(r,"")},insertStaticContent(o,r,S,E,x,C){const R=S?S.previousSibling:r.lastChild;if(x&&(x===C||x.nextSibling))for(;r.insertBefore(x.cloneNode(!0),S),!(x===C||!(x=x.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(E==="svg"?`<svg>${o}</svg>`:E==="mathml"?`<math>${o}</math>`:o);const Ce=templateContainer.content;if(E==="svg"||E==="mathml"){const Ue=Ce.firstChild;for(;Ue.firstChild;)Ce.appendChild(Ue.firstChild);Ce.removeChild(Ue)}r.insertBefore(Ce,S)}return[R?R.nextSibling:r.firstChild,S?S.previousSibling:r.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(o,r,S){const E=o[vtcKey];E&&(r=(r?[r,...E]:[...E]).join(" ")),r==null?o.removeAttribute("class"):S?o.setAttribute("class",r):o.className=r}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(o,r,S){const E=o.style,x=isString(S);let C=!1;if(S&&!x){if(r)if(isString(r))for(const R of r.split(";")){const Ce=R.slice(0,R.indexOf(":")).trim();S[Ce]==null&&setStyle(E,Ce,"")}else for(const R in r)S[R]==null&&setStyle(E,R,"");for(const R in S)R==="display"&&(C=!0),setStyle(E,R,S[R])}else if(x){if(r!==S){const R=E[CSS_VAR_TEXT];R&&(S+=";"+R),E.cssText=S,C=displayRE.test(S)}}else r&&o.removeAttribute("style");vShowOriginalDisplay in o&&(o[vShowOriginalDisplay]=C?E.display:"",o[vShowHidden]&&(E.display="none"))}const importantRE=/\s*!important$/;function setStyle(o,r,S){if(isArray$1(S))S.forEach(E=>setStyle(o,r,E));else if(S==null&&(S=""),r.startsWith("--"))o.setProperty(r,S);else{const E=autoPrefix(o,r);importantRE.test(S)?o.setProperty(hyphenate(E),S.replace(importantRE,""),"important"):o[E]=S}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(o,r){const S=prefixCache[r];if(S)return S;let E=camelize$1(r);if(E!=="filter"&&E in o)return prefixCache[r]=E;E=capitalize(E);for(let x=0;x<prefixes.length;x++){const C=prefixes[x]+E;if(C in o)return prefixCache[r]=C}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(o,r,S,E,x,C=isSpecialBooleanAttr(r)){E&&r.startsWith("xlink:")?S==null?o.removeAttributeNS(xlinkNS,r.slice(6,r.length)):o.setAttributeNS(xlinkNS,r,S):S==null||C&&!includeBooleanAttr(S)?o.removeAttribute(r):o.setAttribute(r,C?"":isSymbol(S)?String(S):S)}function patchDOMProp(o,r,S,E,x){if(r==="innerHTML"||r==="textContent"){S!=null&&(o[r]=r==="innerHTML"?unsafeToTrustedHTML(S):S);return}const C=o.tagName;if(r==="value"&&C!=="PROGRESS"&&!C.includes("-")){const Ce=C==="OPTION"?o.getAttribute("value")||"":o.value,Ue=S==null?o.type==="checkbox"?"on":"":String(S);(Ce!==Ue||!("_value"in o))&&(o.value=Ue),S==null&&o.removeAttribute(r),o._value=S;return}let R=!1;if(S===""||S==null){const Ce=typeof o[r];Ce==="boolean"?S=includeBooleanAttr(S):S==null&&Ce==="string"?(S="",R=!0):Ce==="number"&&(S=0,R=!0)}try{o[r]=S}catch{}R&&o.removeAttribute(x||r)}function addEventListener(o,r,S,E){o.addEventListener(r,S,E)}function removeEventListener(o,r,S,E){o.removeEventListener(r,S,E)}const veiKey=Symbol("_vei");function patchEvent(o,r,S,E,x=null){const C=o[veiKey]||(o[veiKey]={}),R=C[r];if(E&&R)R.value=E;else{const[Ce,Ue]=parseName(r);if(E){const je=C[r]=createInvoker(E,x);addEventListener(o,Ce,je,Ue)}else R&&(removeEventListener(o,Ce,R,Ue),C[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(o){let r;if(optionsModifierRE.test(o)){r={};let E;for(;E=o.match(optionsModifierRE);)o=o.slice(0,o.length-E[0].length),r[E[0].toLowerCase()]=!0}return[o[2]===":"?o.slice(3):hyphenate(o.slice(2)),r]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(o,r){const S=E=>{if(!E._vts)E._vts=Date.now();else if(E._vts<=S.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(E,S.value),r,5,[E])};return S.value=o,S.attached=getNow(),S}function patchStopImmediatePropagation(o,r){if(isArray$1(r)){const S=o.stopImmediatePropagation;return o.stopImmediatePropagation=()=>{S.call(o),o._stopped=!0},r.map(E=>x=>!x._stopped&&E&&E(x))}else return r}const isNativeOn=o=>o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&o.charCodeAt(2)>96&&o.charCodeAt(2)<123,patchProp=(o,r,S,E,x,C)=>{const R=x==="svg";r==="class"?patchClass(o,E,R):r==="style"?patchStyle(o,S,E):isOn(r)?isModelListener(r)||patchEvent(o,r,S,E,C):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(o,r,E,R))?(patchDOMProp(o,r,E),!o.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&patchAttr(o,r,E,R,C,r!=="value")):o._isVueCE&&(/[A-Z]/.test(r)||!isString(E))?patchDOMProp(o,camelize$1(r),E,C,r):(r==="true-value"?o._trueValue=E:r==="false-value"&&(o._falseValue=E),patchAttr(o,r,E,R))};function shouldSetAsProp(o,r,S,E){if(E)return!!(r==="innerHTML"||r==="textContent"||r in o&&isNativeOn(r)&&isFunction$2(S));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&o.tagName==="INPUT"||r==="type"&&o.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const x=o.tagName;if(x==="IMG"||x==="VIDEO"||x==="CANVAS"||x==="SOURCE")return!1}return isNativeOn(r)&&isString(S)?!1:r in o}const getModelAssigner=o=>{const r=o.props["onUpdate:modelValue"]||!1;return isArray$1(r)?S=>invokeArrayFns(r,S):r};function onCompositionStart(o){o.target.composing=!0}function onCompositionEnd(o){const r=o.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(o,{modifiers:{lazy:r,trim:S,number:E}},x){o[assignKey]=getModelAssigner(x);const C=E||x.props&&x.props.type==="number";addEventListener(o,r?"change":"input",R=>{if(R.target.composing)return;let Ce=o.value;S&&(Ce=Ce.trim()),C&&(Ce=looseToNumber(Ce)),o[assignKey](Ce)}),S&&addEventListener(o,"change",()=>{o.value=o.value.trim()}),r||(addEventListener(o,"compositionstart",onCompositionStart),addEventListener(o,"compositionend",onCompositionEnd),addEventListener(o,"change",onCompositionEnd))},mounted(o,{value:r}){o.value=r??""},beforeUpdate(o,{value:r,oldValue:S,modifiers:{lazy:E,trim:x,number:C}},R){if(o[assignKey]=getModelAssigner(R),o.composing)return;const Ce=(C||o.type==="number")&&!/^0\d/.test(o.value)?looseToNumber(o.value):o.value,Ue=r??"";Ce!==Ue&&(document.activeElement===o&&o.type!=="range"&&(E&&r===S||x&&o.value.trim()===Ue)||(o.value=Ue))}},vModelCheckbox={deep:!0,created(o,r,S){o[assignKey]=getModelAssigner(S),addEventListener(o,"change",()=>{const E=o._modelValue,x=getValue(o),C=o.checked,R=o[assignKey];if(isArray$1(E)){const Ce=looseIndexOf(E,x),Ue=Ce!==-1;if(C&&!Ue)R(E.concat(x));else if(!C&&Ue){const je=[...E];je.splice(Ce,1),R(je)}}else if(isSet(E)){const Ce=new Set(E);C?Ce.add(x):Ce.delete(x),R(Ce)}else R(getCheckboxValue(o,C))})},mounted:setChecked,beforeUpdate(o,r,S){o[assignKey]=getModelAssigner(S),setChecked(o,r,S)}};function setChecked(o,{value:r,oldValue:S},E){o._modelValue=r;let x;if(isArray$1(r))x=looseIndexOf(r,E.props.value)>-1;else if(isSet(r))x=r.has(E.props.value);else{if(r===S)return;x=looseEqual(r,getCheckboxValue(o,!0))}o.checked!==x&&(o.checked=x)}const vModelSelect={deep:!0,created(o,{value:r,modifiers:{number:S}},E){const x=isSet(r);addEventListener(o,"change",()=>{const C=Array.prototype.filter.call(o.options,R=>R.selected).map(R=>S?looseToNumber(getValue(R)):getValue(R));o[assignKey](o.multiple?x?new Set(C):C:C[0]),o._assigning=!0,nextTick(()=>{o._assigning=!1})}),o[assignKey]=getModelAssigner(E)},mounted(o,{value:r}){setSelected(o,r)},beforeUpdate(o,r,S){o[assignKey]=getModelAssigner(S)},updated(o,{value:r}){o._assigning||setSelected(o,r)}};function setSelected(o,r){const S=o.multiple,E=isArray$1(r);if(!(S&&!E&&!isSet(r))){for(let x=0,C=o.options.length;x<C;x++){const R=o.options[x],Ce=getValue(R);if(S)if(E){const Ue=typeof Ce;Ue==="string"||Ue==="number"?R.selected=r.some(je=>String(je)===String(Ce)):R.selected=looseIndexOf(r,Ce)>-1}else R.selected=r.has(Ce);else if(looseEqual(getValue(R),r)){o.selectedIndex!==x&&(o.selectedIndex=x);return}}!S&&o.selectedIndex!==-1&&(o.selectedIndex=-1)}}function getValue(o){return"_value"in o?o._value:o.value}function getCheckboxValue(o,r){const S=r?"_trueValue":"_falseValue";return S in o?o[S]:r}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:o=>o.stopPropagation(),prevent:o=>o.preventDefault(),self:o=>o.target!==o.currentTarget,ctrl:o=>!o.ctrlKey,shift:o=>!o.shiftKey,alt:o=>!o.altKey,meta:o=>!o.metaKey,left:o=>"button"in o&&o.button!==0,middle:o=>"button"in o&&o.button!==1,right:o=>"button"in o&&o.button!==2,exact:(o,r)=>systemModifiers.some(S=>o[`${S}Key`]&&!r.includes(S))},withModifiers=(o,r)=>{const S=o._withMods||(o._withMods={}),E=r.join(".");return S[E]||(S[E]=(x,...C)=>{for(let R=0;R<r.length;R++){const Ce=modifierGuards[r[R]];if(Ce&&Ce(x,r))return}return o(x,...C)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(o,r)=>{const S=o._withKeys||(o._withKeys={}),E=r.join(".");return S[E]||(S[E]=x=>{if(!("key"in x))return;const C=hyphenate(x.key);if(r.some(R=>R===C||keyNames[R]===C))return o(x)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...o)=>{const r=ensureRenderer().createApp(...o),{mount:S}=r;return r.mount=E=>{const x=normalizeContainer(E);if(!x)return;const C=r._component;!isFunction$2(C)&&!C.render&&!C.template&&(C.template=x.innerHTML),x.nodeType===1&&(x.textContent="");const R=S(x,!1,resolveRootNamespace(x));return x instanceof Element&&(x.removeAttribute("v-cloak"),x.setAttribute("data-v-app","")),R},r};function resolveRootNamespace(o){if(o instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&o instanceof MathMLElement)return"mathml"}function normalizeContainer(o){return isString(o)?document.querySelector(o):o}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(o){return typeof o=="object"||"displayName"in o||"props"in o||"__vccOpts"in o}function isESModule(o){return o.__esModule||o[Symbol.toStringTag]==="Module"||o.default&&isRouteComponent(o.default)}const assign$2=Object.assign;function applyToParams(o,r){const S={};for(const E in r){const x=r[E];S[E]=isArray(x)?x.map(o):o(x)}return S}const noop$4=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(o){return encodeURI(""+o).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(o){return commonEncode(o).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(o){return commonEncode(o).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(o){return encodeQueryValue(o).replace(EQUAL_RE,"%3D")}function encodePath(o){return commonEncode(o).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(o){return o==null?"":encodePath(o).replace(SLASH_RE,"%2F")}function decode(o){try{return decodeURIComponent(""+o)}catch{}return""+o}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=o=>o.replace(TRAILING_SLASH_RE,"");function parseURL(o,r,S="/"){let E,x={},C="",R="";const Ce=r.indexOf("#");let Ue=r.indexOf("?");return Ce<Ue&&Ce>=0&&(Ue=-1),Ue>-1&&(E=r.slice(0,Ue),C=r.slice(Ue+1,Ce>-1?Ce:r.length),x=o(C)),Ce>-1&&(E=E||r.slice(0,Ce),R=r.slice(Ce,r.length)),E=resolveRelativePath(E??r,S),{fullPath:E+(C&&"?")+C+R,path:E,query:x,hash:decode(R)}}function stringifyURL(o,r){const S=r.query?o(r.query):"";return r.path+(S&&"?")+S+(r.hash||"")}function stripBase(o,r){return!r||!o.toLowerCase().startsWith(r.toLowerCase())?o:o.slice(r.length)||"/"}function isSameRouteLocation(o,r,S){const E=r.matched.length-1,x=S.matched.length-1;return E>-1&&E===x&&isSameRouteRecord(r.matched[E],S.matched[x])&&isSameRouteLocationParams(r.params,S.params)&&o(r.query)===o(S.query)&&r.hash===S.hash}function isSameRouteRecord(o,r){return(o.aliasOf||o)===(r.aliasOf||r)}function isSameRouteLocationParams(o,r){if(Object.keys(o).length!==Object.keys(r).length)return!1;for(const S in o)if(!isSameRouteLocationParamsValue(o[S],r[S]))return!1;return!0}function isSameRouteLocationParamsValue(o,r){return isArray(o)?isEquivalentArray(o,r):isArray(r)?isEquivalentArray(r,o):o===r}function isEquivalentArray(o,r){return isArray(r)?o.length===r.length&&o.every((S,E)=>S===r[E]):o.length===1&&o[0]===r}function resolveRelativePath(o,r){if(o.startsWith("/"))return o;if(!o)return r;const S=r.split("/"),E=o.split("/"),x=E[E.length-1];(x===".."||x===".")&&E.push("");let C=S.length-1,R,Ce;for(R=0;R<E.length;R++)if(Ce=E[R],Ce!==".")if(Ce==="..")C>1&&C--;else break;return S.slice(0,C).join("/")+"/"+E.slice(R).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(o){o.pop="pop",o.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(o){o.back="back",o.forward="forward",o.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(o){if(!o)if(isBrowser){const r=document.querySelector("base");o=r&&r.getAttribute("href")||"/",o=o.replace(/^\w+:\/\/[^\/]+/,"")}else o="/";return o[0]!=="/"&&o[0]!=="#"&&(o="/"+o),removeTrailingSlash(o)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(o,r){return o.replace(BEFORE_HASH_RE,"#")+r}function getElementPosition(o,r){const S=document.documentElement.getBoundingClientRect(),E=o.getBoundingClientRect();return{behavior:r.behavior,left:E.left-S.left-(r.left||0),top:E.top-S.top-(r.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(o){let r;if("el"in o){const S=o.el,E=typeof S=="string"&&S.startsWith("#"),x=typeof S=="string"?E?document.getElementById(S.slice(1)):document.querySelector(S):S;if(!x)return;r=getElementPosition(x,o)}else r=o;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.scrollX,r.top!=null?r.top:window.scrollY)}function getScrollKey(o,r){return(history.state?history.state.position-r:-1)+o}const scrollPositions=new Map;function saveScrollPosition(o,r){scrollPositions.set(o,r)}function getSavedScrollPosition(o){const r=scrollPositions.get(o);return scrollPositions.delete(o),r}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(o,r){const{pathname:S,search:E,hash:x}=r,C=o.indexOf("#");if(C>-1){let Ce=x.includes(o.slice(C))?o.slice(C).length:1,Ue=x.slice(Ce);return Ue[0]!=="/"&&(Ue="/"+Ue),stripBase(Ue,"")}return stripBase(S,o)+E+x}function useHistoryListeners(o,r,S,E){let x=[],C=[],R=null;const Ce=({state:St})=>{const Dt=createCurrentLocation(o,location),kt=S.value,et=r.value;let Ft=0;if(St){if(S.value=Dt,r.value=St,R&&R===kt){R=null;return}Ft=et?St.position-et.position:0}else E(Dt);x.forEach(xt=>{xt(S.value,kt,{delta:Ft,type:NavigationType.pop,direction:Ft?Ft>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function Ue(){R=S.value}function je(St){x.push(St);const Dt=()=>{const kt=x.indexOf(St);kt>-1&&x.splice(kt,1)};return C.push(Dt),Dt}function Xe(){const{history:St}=window;St.state&&St.replaceState(assign$2({},St.state,{scroll:computeScrollPosition()}),"")}function Ye(){for(const St of C)St();C=[],window.removeEventListener("popstate",Ce),window.removeEventListener("beforeunload",Xe)}return window.addEventListener("popstate",Ce),window.addEventListener("beforeunload",Xe,{passive:!0}),{pauseListeners:Ue,listen:je,destroy:Ye}}function buildState(o,r,S,E=!1,x=!1){return{back:o,current:r,forward:S,replaced:E,position:window.history.length,scroll:x?computeScrollPosition():null}}function useHistoryStateNavigation(o){const{history:r,location:S}=window,E={value:createCurrentLocation(o,S)},x={value:r.state};x.value||C(E.value,{back:null,current:E.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function C(Ue,je,Xe){const Ye=o.indexOf("#"),St=Ye>-1?(S.host&&document.querySelector("base")?o:o.slice(Ye))+Ue:createBaseLocation()+o+Ue;try{r[Xe?"replaceState":"pushState"](je,"",St),x.value=je}catch(Dt){console.error(Dt),S[Xe?"replace":"assign"](St)}}function R(Ue,je){const Xe=assign$2({},r.state,buildState(x.value.back,Ue,x.value.forward,!0),je,{position:x.value.position});C(Ue,Xe,!0),E.value=Ue}function Ce(Ue,je){const Xe=assign$2({},x.value,r.state,{forward:Ue,scroll:computeScrollPosition()});C(Xe.current,Xe,!0);const Ye=assign$2({},buildState(E.value,Ue,null),{position:Xe.position+1},je);C(Ue,Ye,!1),E.value=Ue}return{location:E,state:x,push:Ce,replace:R}}function createWebHistory(o){o=normalizeBase(o);const r=useHistoryStateNavigation(o),S=useHistoryListeners(o,r.state,r.location,r.replace);function E(C,R=!0){R||S.pauseListeners(),history.go(C)}const x=assign$2({location:"",base:o,go:E,createHref:createHref.bind(null,o)},r,S);return Object.defineProperty(x,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(x,"state",{enumerable:!0,get:()=>r.state.value}),x}function createWebHashHistory(o){return o=location.host?o||location.pathname+location.search:"",o.includes("#")||(o+="#"),createWebHistory(o)}function isRouteLocation(o){return typeof o=="string"||o&&typeof o=="object"}function isRouteName(o){return typeof o=="string"||typeof o=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(o){o[o.aborted=4]="aborted",o[o.cancelled=8]="cancelled",o[o.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(o,r){return assign$2(new Error,{type:o,[NavigationFailureSymbol]:!0},r)}function isNavigationFailure(o,r){return o instanceof Error&&NavigationFailureSymbol in o&&(r==null||!!(o.type&r))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(o,r){const S=assign$2({},BASE_PATH_PARSER_OPTIONS,r),E=[];let x=S.start?"^":"";const C=[];for(const je of o){const Xe=je.length?[]:[90];S.strict&&!je.length&&(x+="/");for(let Ye=0;Ye<je.length;Ye++){const St=je[Ye];let Dt=40+(S.sensitive?.25:0);if(St.type===0)Ye||(x+="/"),x+=St.value.replace(REGEX_CHARS_RE,"\\$&"),Dt+=40;else if(St.type===1){const{value:kt,repeatable:et,optional:Ft,regexp:xt}=St;C.push({name:kt,repeatable:et,optional:Ft});const Mt=xt||BASE_PARAM_PATTERN;if(Mt!==BASE_PARAM_PATTERN){Dt+=10;try{new RegExp(`(${Mt})`)}catch(Ut){throw new Error(`Invalid custom RegExp for param "${kt}" (${Mt}): `+Ut.message)}}let Ot=et?`((?:${Mt})(?:/(?:${Mt}))*)`:`(${Mt})`;Ye||(Ot=Ft&&je.length<2?`(?:/${Ot})`:"/"+Ot),Ft&&(Ot+="?"),x+=Ot,Dt+=20,Ft&&(Dt+=-8),et&&(Dt+=-20),Mt===".*"&&(Dt+=-50)}Xe.push(Dt)}E.push(Xe)}if(S.strict&&S.end){const je=E.length-1;E[je][E[je].length-1]+=.7000000000000001}S.strict||(x+="/?"),S.end?x+="$":S.strict&&(x+="(?:/|$)");const R=new RegExp(x,S.sensitive?"":"i");function Ce(je){const Xe=je.match(R),Ye={};if(!Xe)return null;for(let St=1;St<Xe.length;St++){const Dt=Xe[St]||"",kt=C[St-1];Ye[kt.name]=Dt&&kt.repeatable?Dt.split("/"):Dt}return Ye}function Ue(je){let Xe="",Ye=!1;for(const St of o){(!Ye||!Xe.endsWith("/"))&&(Xe+="/"),Ye=!1;for(const Dt of St)if(Dt.type===0)Xe+=Dt.value;else if(Dt.type===1){const{value:kt,repeatable:et,optional:Ft}=Dt,xt=kt in je?je[kt]:"";if(isArray(xt)&&!et)throw new Error(`Provided param "${kt}" is an array but it is not repeatable (* or + modifiers)`);const Mt=isArray(xt)?xt.join("/"):xt;if(!Mt)if(Ft)St.length<2&&(Xe.endsWith("/")?Xe=Xe.slice(0,-1):Ye=!0);else throw new Error(`Missing required param "${kt}"`);Xe+=Mt}}return Xe||"/"}return{re:R,score:E,keys:C,parse:Ce,stringify:Ue}}function compareScoreArray(o,r){let S=0;for(;S<o.length&&S<r.length;){const E=r[S]-o[S];if(E)return E;S++}return o.length<r.length?o.length===1&&o[0]===80?-1:1:o.length>r.length?r.length===1&&r[0]===80?1:-1:0}function comparePathParserScore(o,r){let S=0;const E=o.score,x=r.score;for(;S<E.length&&S<x.length;){const C=compareScoreArray(E[S],x[S]);if(C)return C;S++}if(Math.abs(x.length-E.length)===1){if(isLastScoreNegative(E))return 1;if(isLastScoreNegative(x))return-1}return x.length-E.length}function isLastScoreNegative(o){const r=o[o.length-1];return o.length>0&&r[r.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(o){if(!o)return[[]];if(o==="/")return[[ROOT_TOKEN]];if(!o.startsWith("/"))throw new Error(`Invalid path "${o}"`);function r(Dt){throw new Error(`ERR (${S})/"${je}": ${Dt}`)}let S=0,E=S;const x=[];let C;function R(){C&&x.push(C),C=[]}let Ce=0,Ue,je="",Xe="";function Ye(){je&&(S===0?C.push({type:0,value:je}):S===1||S===2||S===3?(C.length>1&&(Ue==="*"||Ue==="+")&&r(`A repeatable param (${je}) must be alone in its segment. eg: '/:ids+.`),C.push({type:1,value:je,regexp:Xe,repeatable:Ue==="*"||Ue==="+",optional:Ue==="*"||Ue==="?"})):r("Invalid state to consume buffer"),je="")}function St(){je+=Ue}for(;Ce<o.length;){if(Ue=o[Ce++],Ue==="\\"&&S!==2){E=S,S=4;continue}switch(S){case 0:Ue==="/"?(je&&Ye(),R()):Ue===":"?(Ye(),S=1):St();break;case 4:St(),S=E;break;case 1:Ue==="("?S=2:VALID_PARAM_RE.test(Ue)?St():(Ye(),S=0,Ue!=="*"&&Ue!=="?"&&Ue!=="+"&&Ce--);break;case 2:Ue===")"?Xe[Xe.length-1]=="\\"?Xe=Xe.slice(0,-1)+Ue:S=3:Xe+=Ue;break;case 3:Ye(),S=0,Ue!=="*"&&Ue!=="?"&&Ue!=="+"&&Ce--,Xe="";break;default:r("Unknown state");break}}return S===2&&r(`Unfinished custom RegExp for param "${je}"`),Ye(),R(),x}function createRouteRecordMatcher(o,r,S){const E=tokensToParser(tokenizePath(o.path),S),x=assign$2(E,{record:o,parent:r,children:[],alias:[]});return r&&!x.record.aliasOf==!r.record.aliasOf&&r.children.push(x),x}function createRouterMatcher(o,r){const S=[],E=new Map;r=mergeOptions({strict:!1,end:!0,sensitive:!1},r);function x(Ye){return E.get(Ye)}function C(Ye,St,Dt){const kt=!Dt,et=normalizeRouteRecord(Ye);et.aliasOf=Dt&&Dt.record;const Ft=mergeOptions(r,Ye),xt=[et];if("alias"in Ye){const Ut=typeof Ye.alias=="string"?[Ye.alias]:Ye.alias;for(const Xt of Ut)xt.push(normalizeRouteRecord(assign$2({},et,{components:Dt?Dt.record.components:et.components,path:Xt,aliasOf:Dt?Dt.record:et})))}let Mt,Ot;for(const Ut of xt){const{path:Xt}=Ut;if(St&&Xt[0]!=="/"){const ei=St.record.path,si=ei[ei.length-1]==="/"?"":"/";Ut.path=St.record.path+(Xt&&si+Xt)}if(Mt=createRouteRecordMatcher(Ut,St,Ft),Dt?Dt.alias.push(Mt):(Ot=Ot||Mt,Ot!==Mt&&Ot.alias.push(Mt),kt&&Ye.name&&!isAliasRecord(Mt)&&R(Ye.name)),isMatchable(Mt)&&Ue(Mt),et.children){const ei=et.children;for(let si=0;si<ei.length;si++)C(ei[si],Mt,Dt&&Dt.children[si])}Dt=Dt||Mt}return Ot?()=>{R(Ot)}:noop$4}function R(Ye){if(isRouteName(Ye)){const St=E.get(Ye);St&&(E.delete(Ye),S.splice(S.indexOf(St),1),St.children.forEach(R),St.alias.forEach(R))}else{const St=S.indexOf(Ye);St>-1&&(S.splice(St,1),Ye.record.name&&E.delete(Ye.record.name),Ye.children.forEach(R),Ye.alias.forEach(R))}}function Ce(){return S}function Ue(Ye){const St=findInsertionIndex(Ye,S);S.splice(St,0,Ye),Ye.record.name&&!isAliasRecord(Ye)&&E.set(Ye.record.name,Ye)}function je(Ye,St){let Dt,kt={},et,Ft;if("name"in Ye&&Ye.name){if(Dt=E.get(Ye.name),!Dt)throw createRouterError(1,{location:Ye});Ft=Dt.record.name,kt=assign$2(paramsFromLocation(St.params,Dt.keys.filter(Ot=>!Ot.optional).concat(Dt.parent?Dt.parent.keys.filter(Ot=>Ot.optional):[]).map(Ot=>Ot.name)),Ye.params&&paramsFromLocation(Ye.params,Dt.keys.map(Ot=>Ot.name))),et=Dt.stringify(kt)}else if(Ye.path!=null)et=Ye.path,Dt=S.find(Ot=>Ot.re.test(et)),Dt&&(kt=Dt.parse(et),Ft=Dt.record.name);else{if(Dt=St.name?E.get(St.name):S.find(Ot=>Ot.re.test(St.path)),!Dt)throw createRouterError(1,{location:Ye,currentLocation:St});Ft=Dt.record.name,kt=assign$2({},St.params,Ye.params),et=Dt.stringify(kt)}const xt=[];let Mt=Dt;for(;Mt;)xt.unshift(Mt.record),Mt=Mt.parent;return{name:Ft,path:et,params:kt,matched:xt,meta:mergeMetaFields(xt)}}o.forEach(Ye=>C(Ye));function Xe(){S.length=0,E.clear()}return{addRoute:C,resolve:je,removeRoute:R,clearRoutes:Xe,getRoutes:Ce,getRecordMatcher:x}}function paramsFromLocation(o,r){const S={};for(const E of r)E in o&&(S[E]=o[E]);return S}function normalizeRouteRecord(o){const r={path:o.path,redirect:o.redirect,name:o.name,meta:o.meta||{},aliasOf:o.aliasOf,beforeEnter:o.beforeEnter,props:normalizeRecordProps(o),children:o.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in o?o.components||null:o.component&&{default:o.component}};return Object.defineProperty(r,"mods",{value:{}}),r}function normalizeRecordProps(o){const r={},S=o.props||!1;if("component"in o)r.default=S;else for(const E in o.components)r[E]=typeof S=="object"?S[E]:S;return r}function isAliasRecord(o){for(;o;){if(o.record.aliasOf)return!0;o=o.parent}return!1}function mergeMetaFields(o){return o.reduce((r,S)=>assign$2(r,S.meta),{})}function mergeOptions(o,r){const S={};for(const E in o)S[E]=E in r?r[E]:o[E];return S}function findInsertionIndex(o,r){let S=0,E=r.length;for(;S!==E;){const C=S+E>>1;comparePathParserScore(o,r[C])<0?E=C:S=C+1}const x=getInsertionAncestor(o);return x&&(E=r.lastIndexOf(x,E-1)),E}function getInsertionAncestor(o){let r=o;for(;r=r.parent;)if(isMatchable(r)&&comparePathParserScore(o,r)===0)return r}function isMatchable({record:o}){return!!(o.name||o.components&&Object.keys(o.components).length||o.redirect)}function parseQuery(o){const r={};if(o===""||o==="?")return r;const E=(o[0]==="?"?o.slice(1):o).split("&");for(let x=0;x<E.length;++x){const C=E[x].replace(PLUS_RE," "),R=C.indexOf("="),Ce=decode(R<0?C:C.slice(0,R)),Ue=R<0?null:decode(C.slice(R+1));if(Ce in r){let je=r[Ce];isArray(je)||(je=r[Ce]=[je]),je.push(Ue)}else r[Ce]=Ue}return r}function stringifyQuery(o){let r="";for(let S in o){const E=o[S];if(S=encodeQueryKey(S),E==null){E!==void 0&&(r+=(r.length?"&":"")+S);continue}(isArray(E)?E.map(C=>C&&encodeQueryValue(C)):[E&&encodeQueryValue(E)]).forEach(C=>{C!==void 0&&(r+=(r.length?"&":"")+S,C!=null&&(r+="="+C))})}return r}function normalizeQuery(o){const r={};for(const S in o){const E=o[S];E!==void 0&&(r[S]=isArray(E)?E.map(x=>x==null?null:""+x):E==null?E:""+E)}return r}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let o=[];function r(E){return o.push(E),()=>{const x=o.indexOf(E);x>-1&&o.splice(x,1)}}function S(){o=[]}return{add:r,list:()=>o.slice(),reset:S}}function guardToPromiseFn(o,r,S,E,x,C=R=>R()){const R=E&&(E.enterCallbacks[x]=E.enterCallbacks[x]||[]);return()=>new Promise((Ce,Ue)=>{const je=St=>{St===!1?Ue(createRouterError(4,{from:S,to:r})):St instanceof Error?Ue(St):isRouteLocation(St)?Ue(createRouterError(2,{from:r,to:St})):(R&&E.enterCallbacks[x]===R&&typeof St=="function"&&R.push(St),Ce())},Xe=C(()=>o.call(E&&E.instances[x],r,S,je));let Ye=Promise.resolve(Xe);o.length<3&&(Ye=Ye.then(je)),Ye.catch(St=>Ue(St))})}function extractComponentsGuards(o,r,S,E,x=C=>C()){const C=[];for(const R of o)for(const Ce in R.components){let Ue=R.components[Ce];if(!(r!=="beforeRouteEnter"&&!R.instances[Ce]))if(isRouteComponent(Ue)){const Xe=(Ue.__vccOpts||Ue)[r];Xe&&C.push(guardToPromiseFn(Xe,S,E,R,Ce,x))}else{let je=Ue();C.push(()=>je.then(Xe=>{if(!Xe)throw new Error(`Couldn't resolve component "${Ce}" at "${R.path}"`);const Ye=isESModule(Xe)?Xe.default:Xe;R.mods[Ce]=Xe,R.components[Ce]=Ye;const Dt=(Ye.__vccOpts||Ye)[r];return Dt&&guardToPromiseFn(Dt,S,E,R,Ce,x)()}))}}return C}function useLink(o){const r=inject(routerKey),S=inject(routeLocationKey),E=computed(()=>{const Ue=unref(o.to);return r.resolve(Ue)}),x=computed(()=>{const{matched:Ue}=E.value,{length:je}=Ue,Xe=Ue[je-1],Ye=S.matched;if(!Xe||!Ye.length)return-1;const St=Ye.findIndex(isSameRouteRecord.bind(null,Xe));if(St>-1)return St;const Dt=getOriginalPath(Ue[je-2]);return je>1&&getOriginalPath(Xe)===Dt&&Ye[Ye.length-1].path!==Dt?Ye.findIndex(isSameRouteRecord.bind(null,Ue[je-2])):St}),C=computed(()=>x.value>-1&&includesParams(S.params,E.value.params)),R=computed(()=>x.value>-1&&x.value===S.matched.length-1&&isSameRouteLocationParams(S.params,E.value.params));function Ce(Ue={}){return guardEvent(Ue)?r[unref(o.replace)?"replace":"push"](unref(o.to)).catch(noop$4):Promise.resolve()}return{route:E,href:computed(()=>E.value.href),isActive:C,isExactActive:R,navigate:Ce}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(o,{slots:r}){const S=reactive(useLink(o)),{options:E}=inject(routerKey),x=computed(()=>({[getLinkClass(o.activeClass,E.linkActiveClass,"router-link-active")]:S.isActive,[getLinkClass(o.exactActiveClass,E.linkExactActiveClass,"router-link-exact-active")]:S.isExactActive}));return()=>{const C=r.default&&r.default(S);return o.custom?C:h$1("a",{"aria-current":S.isExactActive?o.ariaCurrentValue:null,href:S.href,onClick:S.navigate,class:x.value},C)}}}),RouterLink=RouterLinkImpl;function guardEvent(o){if(!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)&&!o.defaultPrevented&&!(o.button!==void 0&&o.button!==0)){if(o.currentTarget&&o.currentTarget.getAttribute){const r=o.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return o.preventDefault&&o.preventDefault(),!0}}function includesParams(o,r){for(const S in r){const E=r[S],x=o[S];if(typeof E=="string"){if(E!==x)return!1}else if(!isArray(x)||x.length!==E.length||E.some((C,R)=>C!==x[R]))return!1}return!0}function getOriginalPath(o){return o?o.aliasOf?o.aliasOf.path:o.path:""}const getLinkClass=(o,r,S)=>o??r??S,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(o,{attrs:r,slots:S}){const E=inject(routerViewLocationKey),x=computed(()=>o.route||E.value),C=inject(viewDepthKey,0),R=computed(()=>{let je=unref(C);const{matched:Xe}=x.value;let Ye;for(;(Ye=Xe[je])&&!Ye.components;)je++;return je}),Ce=computed(()=>x.value.matched[R.value]);provide(viewDepthKey,computed(()=>R.value+1)),provide(matchedRouteKey,Ce),provide(routerViewLocationKey,x);const Ue=ref();return watch(()=>[Ue.value,Ce.value,o.name],([je,Xe,Ye],[St,Dt,kt])=>{Xe&&(Xe.instances[Ye]=je,Dt&&Dt!==Xe&&je&&je===St&&(Xe.leaveGuards.size||(Xe.leaveGuards=Dt.leaveGuards),Xe.updateGuards.size||(Xe.updateGuards=Dt.updateGuards))),je&&Xe&&(!Dt||!isSameRouteRecord(Xe,Dt)||!St)&&(Xe.enterCallbacks[Ye]||[]).forEach(et=>et(je))},{flush:"post"}),()=>{const je=x.value,Xe=o.name,Ye=Ce.value,St=Ye&&Ye.components[Xe];if(!St)return normalizeSlot(S.default,{Component:St,route:je});const Dt=Ye.props[Xe],kt=Dt?Dt===!0?je.params:typeof Dt=="function"?Dt(je):Dt:null,Ft=h$1(St,assign$2({},kt,r,{onVnodeUnmounted:xt=>{xt.component.isUnmounted&&(Ye.instances[Xe]=null)},ref:Ue}));return normalizeSlot(S.default,{Component:Ft,route:je})||Ft}}});function normalizeSlot(o,r){if(!o)return null;const S=o(r);return S.length===1?S[0]:S}const RouterView=RouterViewImpl;function createRouter(o){const r=createRouterMatcher(o.routes,o),S=o.parseQuery||parseQuery,E=o.stringifyQuery||stringifyQuery,x=o.history,C=useCallbacks(),R=useCallbacks(),Ce=useCallbacks(),Ue=shallowRef(START_LOCATION_NORMALIZED);let je=START_LOCATION_NORMALIZED;isBrowser&&o.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const Xe=applyToParams.bind(null,Mi=>""+Mi),Ye=applyToParams.bind(null,encodeParam),St=applyToParams.bind(null,decode);function Dt(Mi,Yi){let Wi,ir;return isRouteName(Mi)?(Wi=r.getRecordMatcher(Mi),ir=Yi):ir=Mi,r.addRoute(ir,Wi)}function kt(Mi){const Yi=r.getRecordMatcher(Mi);Yi&&r.removeRoute(Yi)}function et(){return r.getRoutes().map(Mi=>Mi.record)}function Ft(Mi){return!!r.getRecordMatcher(Mi)}function xt(Mi,Yi){if(Yi=assign$2({},Yi||Ue.value),typeof Mi=="string"){const fi=parseURL(S,Mi,Yi.path),Ai=r.resolve({path:fi.path},Yi),Vi=x.createHref(fi.fullPath);return assign$2(fi,Ai,{params:St(Ai.params),hash:decode(fi.hash),redirectedFrom:void 0,href:Vi})}let Wi;if(Mi.path!=null)Wi=assign$2({},Mi,{path:parseURL(S,Mi.path,Yi.path).path});else{const fi=assign$2({},Mi.params);for(const Ai in fi)fi[Ai]==null&&delete fi[Ai];Wi=assign$2({},Mi,{params:Ye(fi)}),Yi.params=Ye(Yi.params)}const ir=r.resolve(Wi,Yi),mr=Mi.hash||"";ir.params=Xe(St(ir.params));const yr=stringifyURL(E,assign$2({},Mi,{hash:encodeHash(mr),path:ir.path})),pi=x.createHref(yr);return assign$2({fullPath:yr,hash:mr,query:E===stringifyQuery?normalizeQuery(Mi.query):Mi.query||{}},ir,{redirectedFrom:void 0,href:pi})}function Mt(Mi){return typeof Mi=="string"?parseURL(S,Mi,Ue.value.path):assign$2({},Mi)}function Ot(Mi,Yi){if(je!==Mi)return createRouterError(8,{from:Yi,to:Mi})}function Ut(Mi){return si(Mi)}function Xt(Mi){return Ut(assign$2(Mt(Mi),{replace:!0}))}function ei(Mi){const Yi=Mi.matched[Mi.matched.length-1];if(Yi&&Yi.redirect){const{redirect:Wi}=Yi;let ir=typeof Wi=="function"?Wi(Mi):Wi;return typeof ir=="string"&&(ir=ir.includes("?")||ir.includes("#")?ir=Mt(ir):{path:ir},ir.params={}),assign$2({query:Mi.query,hash:Mi.hash,params:ir.path!=null?{}:Mi.params},ir)}}function si(Mi,Yi){const Wi=je=xt(Mi),ir=Ue.value,mr=Mi.state,yr=Mi.force,pi=Mi.replace===!0,fi=ei(Wi);if(fi)return si(assign$2(Mt(fi),{state:typeof fi=="object"?assign$2({},mr,fi.state):mr,force:yr,replace:pi}),Yi||Wi);const Ai=Wi;Ai.redirectedFrom=Yi;let Vi;return!yr&&isSameRouteLocation(E,ir,Wi)&&(Vi=createRouterError(16,{to:Ai,from:ir}),Si(ir,ir,!0,!1)),(Vi?Promise.resolve(Vi):wi(Ai,ir)).catch(Li=>isNavigationFailure(Li)?isNavigationFailure(Li,2)?Li:Ei(Li):ri(Li,Ai,ir)).then(Li=>{if(Li){if(isNavigationFailure(Li,2))return si(assign$2({replace:pi},Mt(Li.to),{state:typeof Li.to=="object"?assign$2({},mr,Li.to.state):mr,force:yr}),Yi||Ai)}else Li=Ci(Ai,ir,!0,pi,mr);return Pi(Ai,ir,Li),Li})}function li(Mi,Yi){const Wi=Ot(Mi,Yi);return Wi?Promise.reject(Wi):Promise.resolve()}function bi(Mi){const Yi=ur.values().next().value;return Yi&&typeof Yi.runWithContext=="function"?Yi.runWithContext(Mi):Mi()}function wi(Mi,Yi){let Wi;const[ir,mr,yr]=extractChangingRecords(Mi,Yi);Wi=extractComponentsGuards(ir.reverse(),"beforeRouteLeave",Mi,Yi);for(const fi of ir)fi.leaveGuards.forEach(Ai=>{Wi.push(guardToPromiseFn(Ai,Mi,Yi))});const pi=li.bind(null,Mi,Yi);return Wi.push(pi),lr(Wi).then(()=>{Wi=[];for(const fi of C.list())Wi.push(guardToPromiseFn(fi,Mi,Yi));return Wi.push(pi),lr(Wi)}).then(()=>{Wi=extractComponentsGuards(mr,"beforeRouteUpdate",Mi,Yi);for(const fi of mr)fi.updateGuards.forEach(Ai=>{Wi.push(guardToPromiseFn(Ai,Mi,Yi))});return Wi.push(pi),lr(Wi)}).then(()=>{Wi=[];for(const fi of yr)if(fi.beforeEnter)if(isArray(fi.beforeEnter))for(const Ai of fi.beforeEnter)Wi.push(guardToPromiseFn(Ai,Mi,Yi));else Wi.push(guardToPromiseFn(fi.beforeEnter,Mi,Yi));return Wi.push(pi),lr(Wi)}).then(()=>(Mi.matched.forEach(fi=>fi.enterCallbacks={}),Wi=extractComponentsGuards(yr,"beforeRouteEnter",Mi,Yi,bi),Wi.push(pi),lr(Wi))).then(()=>{Wi=[];for(const fi of R.list())Wi.push(guardToPromiseFn(fi,Mi,Yi));return Wi.push(pi),lr(Wi)}).catch(fi=>isNavigationFailure(fi,8)?fi:Promise.reject(fi))}function Pi(Mi,Yi,Wi){Ce.list().forEach(ir=>bi(()=>ir(Mi,Yi,Wi)))}function Ci(Mi,Yi,Wi,ir,mr){const yr=Ot(Mi,Yi);if(yr)return yr;const pi=Yi===START_LOCATION_NORMALIZED,fi=isBrowser?history.state:{};Wi&&(ir||pi?x.replace(Mi.fullPath,assign$2({scroll:pi&&fi&&fi.scroll},mr)):x.push(Mi.fullPath,mr)),Ue.value=Mi,Si(Mi,Yi,Wi,pi),Ei()}let Di;function Bi(){Di||(Di=x.listen((Mi,Yi,Wi)=>{if(!fr.listening)return;const ir=xt(Mi),mr=ei(ir);if(mr){si(assign$2(mr,{replace:!0}),ir).catch(noop$4);return}je=ir;const yr=Ue.value;isBrowser&&saveScrollPosition(getScrollKey(yr.fullPath,Wi.delta),computeScrollPosition()),wi(ir,yr).catch(pi=>isNavigationFailure(pi,12)?pi:isNavigationFailure(pi,2)?(si(pi.to,ir).then(fi=>{isNavigationFailure(fi,20)&&!Wi.delta&&Wi.type===NavigationType.pop&&x.go(-1,!1)}).catch(noop$4),Promise.reject()):(Wi.delta&&x.go(-Wi.delta,!1),ri(pi,ir,yr))).then(pi=>{pi=pi||Ci(ir,yr,!1),pi&&(Wi.delta&&!isNavigationFailure(pi,8)?x.go(-Wi.delta,!1):Wi.type===NavigationType.pop&&isNavigationFailure(pi,20)&&x.go(-1,!1)),Pi(ir,yr,pi)}).catch(noop$4)}))}let Ri=useCallbacks(),oi=useCallbacks(),mi;function ri(Mi,Yi,Wi){Ei(Mi);const ir=oi.list();return ir.length?ir.forEach(mr=>mr(Mi,Yi,Wi)):console.error(Mi),Promise.reject(Mi)}function ni(){return mi&&Ue.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Mi,Yi)=>{Ri.add([Mi,Yi])})}function Ei(Mi){return mi||(mi=!Mi,Bi(),Ri.list().forEach(([Yi,Wi])=>Mi?Wi(Mi):Yi()),Ri.reset()),Mi}function Si(Mi,Yi,Wi,ir){const{scrollBehavior:mr}=o;if(!isBrowser||!mr)return Promise.resolve();const yr=!Wi&&getSavedScrollPosition(getScrollKey(Mi.fullPath,0))||(ir||!Wi)&&history.state&&history.state.scroll||null;return nextTick().then(()=>mr(Mi,Yi,yr)).then(pi=>pi&&scrollToPosition(pi)).catch(pi=>ri(pi,Mi,Yi))}const qi=Mi=>x.go(Mi);let sr;const ur=new Set,fr={currentRoute:Ue,listening:!0,addRoute:Dt,removeRoute:kt,clearRoutes:r.clearRoutes,hasRoute:Ft,getRoutes:et,resolve:xt,options:o,push:Ut,replace:Xt,go:qi,back:()=>qi(-1),forward:()=>qi(1),beforeEach:C.add,beforeResolve:R.add,afterEach:Ce.add,onError:oi.add,isReady:ni,install(Mi){const Yi=this;Mi.component("RouterLink",RouterLink),Mi.component("RouterView",RouterView),Mi.config.globalProperties.$router=Yi,Object.defineProperty(Mi.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(Ue)}),isBrowser&&!sr&&Ue.value===START_LOCATION_NORMALIZED&&(sr=!0,Ut(x.location).catch(mr=>{}));const Wi={};for(const mr in START_LOCATION_NORMALIZED)Object.defineProperty(Wi,mr,{get:()=>Ue.value[mr],enumerable:!0});Mi.provide(routerKey,Yi),Mi.provide(routeLocationKey,shallowReactive(Wi)),Mi.provide(routerViewLocationKey,Ue);const ir=Mi.unmount;ur.add(Mi),Mi.unmount=function(){ur.delete(Mi),ur.size<1&&(je=START_LOCATION_NORMALIZED,Di&&Di(),Di=null,Ue.value=START_LOCATION_NORMALIZED,sr=!1,mi=!1),ir()}}};function lr(Mi){return Mi.reduce((Yi,Wi)=>Yi.then(()=>bi(Wi)),Promise.resolve())}return fr}function extractChangingRecords(o,r){const S=[],E=[],x=[],C=Math.max(r.matched.length,o.matched.length);for(let R=0;R<C;R++){const Ce=r.matched[R];Ce&&(o.matched.find(je=>isSameRouteRecord(je,Ce))?E.push(Ce):S.push(Ce));const Ue=o.matched[R];Ue&&(r.matched.find(je=>isSameRouteRecord(je,Ue))||x.push(Ue))}return[S,E,x]}function useRouter(){return inject(routerKey)}function useRoute(o){return inject(routeLocationKey)}var isVue2=!1;/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=o=>activePinia=o,piniaSymbol=Symbol();function isPlainObject(o){return o&&typeof o=="object"&&Object.prototype.toString.call(o)==="[object Object]"&&typeof o.toJSON!="function"}var MutationType;(function(o){o.direct="direct",o.patchObject="patch object",o.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const o=effectScope(!0),r=o.run(()=>ref({}));let S=[],E=[];const x=markRaw({install(C){setActivePinia(x),x._a=C,C.provide(piniaSymbol,x),C.config.globalProperties.$pinia=x,E.forEach(R=>S.push(R)),E=[]},use(C){return!this._a&&!isVue2?E.push(C):S.push(C),this},_p:S,_a:null,_e:o,_s:new Map,state:r});return x}const noop$3=()=>{};function addSubscription(o,r,S,E=noop$3){o.push(r);const x=()=>{const C=o.indexOf(r);C>-1&&(o.splice(C,1),E())};return!S&&getCurrentScope()&&onScopeDispose(x),x}function triggerSubscriptions(o,...r){o.slice().forEach(S=>{S(...r)})}const fallbackRunWithContext=o=>o(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(o,r){o instanceof Map&&r instanceof Map?r.forEach((S,E)=>o.set(E,S)):o instanceof Set&&r instanceof Set&&r.forEach(o.add,o);for(const S in r){if(!r.hasOwnProperty(S))continue;const E=r[S],x=o[S];isPlainObject(x)&&isPlainObject(E)&&o.hasOwnProperty(S)&&!isRef(E)&&!isReactive(E)?o[S]=mergeReactiveObjects(x,E):o[S]=E}return o}const skipHydrateSymbol=Symbol();function shouldHydrate(o){return!isPlainObject(o)||!o.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(o){return!!(isRef(o)&&o.effect)}function createOptionsStore(o,r,S,E){const{state:x,actions:C,getters:R}=r,Ce=S.state.value[o];let Ue;function je(){Ce||(S.state.value[o]=x?x():{});const Xe=toRefs(S.state.value[o]);return assign$1(Xe,C,Object.keys(R||{}).reduce((Ye,St)=>(Ye[St]=markRaw(computed(()=>{setActivePinia(S);const Dt=S._s.get(o);return R[St].call(Dt,Dt)})),Ye),{}))}return Ue=createSetupStore(o,je,r,S,E,!0),Ue}function createSetupStore(o,r,S={},E,x,C){let R;const Ce=assign$1({actions:{}},S),Ue={deep:!0};let je,Xe,Ye=[],St=[],Dt;const kt=E.state.value[o];!C&&!kt&&(E.state.value[o]={}),ref({});let et;function Ft(li){let bi;je=Xe=!1,typeof li=="function"?(li(E.state.value[o]),bi={type:MutationType.patchFunction,storeId:o,events:Dt}):(mergeReactiveObjects(E.state.value[o],li),bi={type:MutationType.patchObject,payload:li,storeId:o,events:Dt});const wi=et=Symbol();nextTick().then(()=>{et===wi&&(je=!0)}),Xe=!0,triggerSubscriptions(Ye,bi,E.state.value[o])}const xt=C?function(){const{state:bi}=S,wi=bi?bi():{};this.$patch(Pi=>{assign$1(Pi,wi)})}:noop$3;function Mt(){R.stop(),Ye=[],St=[],E._s.delete(o)}const Ot=(li,bi="")=>{if(ACTION_MARKER in li)return li[ACTION_NAME]=bi,li;const wi=function(){setActivePinia(E);const Pi=Array.from(arguments),Ci=[],Di=[];function Bi(mi){Ci.push(mi)}function Ri(mi){Di.push(mi)}triggerSubscriptions(St,{args:Pi,name:wi[ACTION_NAME],store:Xt,after:Bi,onError:Ri});let oi;try{oi=li.apply(this&&this.$id===o?this:Xt,Pi)}catch(mi){throw triggerSubscriptions(Di,mi),mi}return oi instanceof Promise?oi.then(mi=>(triggerSubscriptions(Ci,mi),mi)).catch(mi=>(triggerSubscriptions(Di,mi),Promise.reject(mi))):(triggerSubscriptions(Ci,oi),oi)};return wi[ACTION_MARKER]=!0,wi[ACTION_NAME]=bi,wi},Ut={_p:E,$id:o,$onAction:addSubscription.bind(null,St),$patch:Ft,$reset:xt,$subscribe(li,bi={}){const wi=addSubscription(Ye,li,bi.detached,()=>Pi()),Pi=R.run(()=>watch(()=>E.state.value[o],Ci=>{(bi.flush==="sync"?Xe:je)&&li({storeId:o,type:MutationType.direct,events:Dt},Ci)},assign$1({},Ue,bi)));return wi},$dispose:Mt},Xt=reactive(Ut);E._s.set(o,Xt);const si=(E._a&&E._a.runWithContext||fallbackRunWithContext)(()=>E._e.run(()=>(R=effectScope()).run(()=>r({action:Ot}))));for(const li in si){const bi=si[li];if(isRef(bi)&&!isComputed(bi)||isReactive(bi))C||(kt&&shouldHydrate(bi)&&(isRef(bi)?bi.value=kt[li]:mergeReactiveObjects(bi,kt[li])),E.state.value[o][li]=bi);else if(typeof bi=="function"){const wi=Ot(bi,li);si[li]=wi,Ce.actions[li]=bi}}return assign$1(Xt,si),assign$1(toRaw(Xt),si),Object.defineProperty(Xt,"$state",{get:()=>E.state.value[o],set:li=>{Ft(bi=>{assign$1(bi,li)})}}),E._p.forEach(li=>{assign$1(Xt,R.run(()=>li({store:Xt,app:E._a,pinia:E,options:Ce})))}),kt&&C&&S.hydrate&&S.hydrate(Xt.$state,kt),je=!0,Xe=!0,Xt}/*! #__NO_SIDE_EFFECTS__ */function defineStore(o,r,S){let E,x;const C=typeof r=="function";E=o,x=C?S:r;function R(Ce,Ue){const je=hasInjectionContext();return Ce=Ce||(je?inject(piniaSymbol,null):null),Ce&&setActivePinia(Ce),Ce=activePinia,Ce._s.has(E)||(C?createSetupStore(E,r,x,Ce):createOptionsStore(E,x,Ce)),Ce._s.get(E)}return R.$id=E,R}function tryOnScopeDispose(o){return getCurrentScope()?(onScopeDispose(o),!0):!1}function toValue(o){return typeof o=="function"?o():unref(o)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$2=Object.prototype.toString,isObject$2=o=>toString$2.call(o)==="[object Object]",noop$2=()=>{};function createFilterWrapper(o,r){function S(...E){return new Promise((x,C)=>{Promise.resolve(o(()=>r.apply(this,E),{fn:r,thisArg:this,args:E})).then(x).catch(C)})}return S}const bypassFilter=o=>o();function pausableFilter(o=bypassFilter){const r=ref(!0);function S(){r.value=!1}function E(){r.value=!0}const x=(...C)=>{r.value&&o(...C)};return{isActive:readonly(r),pause:S,resume:E,eventFilter:x}}function getLifeCycleTarget(o){return getCurrentInstance()}function watchWithFilter(o,r,S={}){const{eventFilter:E=bypassFilter,...x}=S;return watch(o,createFilterWrapper(E,r),x)}function watchPausable(o,r,S={}){const{eventFilter:E,...x}=S,{eventFilter:C,pause:R,resume:Ce,isActive:Ue}=pausableFilter(E);return{stop:watchWithFilter(o,r,{...x,eventFilter:C}),pause:R,resume:Ce,isActive:Ue}}function tryOnMounted(o,r=!0,S){getLifeCycleTarget()?onMounted$1(o,S):r?o():nextTick(o)}const defaultWindow=isClient?window:void 0;function unrefElement(o){var r;const S=toValue(o);return(r=S==null?void 0:S.$el)!=null?r:S}function useEventListener(...o){let r,S,E,x;if(typeof o[0]=="string"||Array.isArray(o[0])?([S,E,x]=o,r=defaultWindow):[r,S,E,x]=o,!r)return noop$2;Array.isArray(S)||(S=[S]),Array.isArray(E)||(E=[E]);const C=[],R=()=>{C.forEach(Xe=>Xe()),C.length=0},Ce=(Xe,Ye,St,Dt)=>(Xe.addEventListener(Ye,St,Dt),()=>Xe.removeEventListener(Ye,St,Dt)),Ue=watch(()=>[unrefElement(r),toValue(x)],([Xe,Ye])=>{if(R(),!Xe)return;const St=isObject$2(Ye)?{...Ye}:Ye;C.push(...S.flatMap(Dt=>E.map(kt=>Ce(Xe,Dt,kt,St))))},{immediate:!0,flush:"post"}),je=()=>{Ue(),R()};return tryOnScopeDispose(je),je}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(o,r){return handlers[o]||r}function guessSerializerType(o){return o==null?"any":o instanceof Set?"set":o instanceof Map?"map":o instanceof Date?"date":typeof o=="boolean"?"boolean":typeof o=="string"?"string":typeof o=="object"?"object":Number.isNaN(o)?"any":"number"}const StorageSerializers={boolean:{read:o=>o==="true",write:o=>String(o)},object:{read:o=>JSON.parse(o),write:o=>JSON.stringify(o)},number:{read:o=>Number.parseFloat(o),write:o=>String(o)},any:{read:o=>o,write:o=>String(o)},string:{read:o=>o,write:o=>String(o)},map:{read:o=>new Map(JSON.parse(o)),write:o=>JSON.stringify(Array.from(o.entries()))},set:{read:o=>new Set(JSON.parse(o)),write:o=>JSON.stringify(Array.from(o))},date:{read:o=>new Date(o),write:o=>o.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(o,r,S,E={}){var x;const{flush:C="pre",deep:R=!0,listenToStorageChanges:Ce=!0,writeDefaults:Ue=!0,mergeDefaults:je=!1,shallow:Xe,window:Ye=defaultWindow,eventFilter:St,onError:Dt=wi=>{console.error(wi)},initOnMounted:kt}=E,et=(Xe?shallowRef:ref)(typeof r=="function"?r():r);if(!S)try{S=getSSRHandler("getDefaultStorage",()=>{var wi;return(wi=defaultWindow)==null?void 0:wi.localStorage})()}catch(wi){Dt(wi)}if(!S)return et;const Ft=toValue(r),xt=guessSerializerType(Ft),Mt=(x=E.serializer)!=null?x:StorageSerializers[xt],{pause:Ot,resume:Ut}=watchPausable(et,()=>ei(et.value),{flush:C,deep:R,eventFilter:St});Ye&&Ce&&tryOnMounted(()=>{S instanceof Storage?useEventListener(Ye,"storage",li):useEventListener(Ye,customStorageEventName,bi),kt&&li()}),kt||li();function Xt(wi,Pi){if(Ye){const Ci={key:o,oldValue:wi,newValue:Pi,storageArea:S};Ye.dispatchEvent(S instanceof Storage?new StorageEvent("storage",Ci):new CustomEvent(customStorageEventName,{detail:Ci}))}}function ei(wi){try{const Pi=S.getItem(o);if(wi==null)Xt(Pi,null),S.removeItem(o);else{const Ci=Mt.write(wi);Pi!==Ci&&(S.setItem(o,Ci),Xt(Pi,Ci))}}catch(Pi){Dt(Pi)}}function si(wi){const Pi=wi?wi.newValue:S.getItem(o);if(Pi==null)return Ue&&Ft!=null&&S.setItem(o,Mt.write(Ft)),Ft;if(!wi&&je){const Ci=Mt.read(Pi);return typeof je=="function"?je(Ci,Ft):xt==="object"&&!Array.isArray(Ci)?{...Ft,...Ci}:Ci}else return typeof Pi!="string"?Pi:Mt.read(Pi)}function li(wi){if(!(wi&&wi.storageArea!==S)){if(wi&&wi.key==null){et.value=Ft;return}if(!(wi&&wi.key!==o)){Ot();try{(wi==null?void 0:wi.newValue)!==Mt.write(et.value)&&(et.value=si(wi))}catch(Pi){Dt(Pi)}finally{wi?nextTick(Ut):Ut()}}}}function bi(wi){li(wi.detail)}return et}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var r=o.default;if(typeof r=="function"){var S=function E(){return this instanceof E?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};S.prototype=r.prototype}else S={};return Object.defineProperty(S,"__esModule",{value:!0}),Object.keys(o).forEach(function(E){var x=Object.getOwnPropertyDescriptor(o,E);Object.defineProperty(S,E,x.get?x:{enumerable:!0,get:function(){return o[E]}})}),S}var pusher={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0-rc2
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(o,r){(function(E,x){o.exports=x()})(window,function(){return function(S){var E={};function x(C){if(E[C])return E[C].exports;var R=E[C]={i:C,l:!1,exports:{}};return S[C].call(R.exports,R,R.exports,x),R.l=!0,R.exports}return x.m=S,x.c=E,x.d=function(C,R,Ce){x.o(C,R)||Object.defineProperty(C,R,{enumerable:!0,get:Ce})},x.r=function(C){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},x.t=function(C,R){if(R&1&&(C=x(C)),R&8||R&4&&typeof C=="object"&&C&&C.__esModule)return C;var Ce=Object.create(null);if(x.r(Ce),Object.defineProperty(Ce,"default",{enumerable:!0,value:C}),R&2&&typeof C!="string")for(var Ue in C)x.d(Ce,Ue,(function(je){return C[je]}).bind(null,Ue));return Ce},x.n=function(C){var R=C&&C.__esModule?function(){return C.default}:function(){return C};return x.d(R,"a",R),R},x.o=function(C,R){return Object.prototype.hasOwnProperty.call(C,R)},x.p="",x(x.s=2)}([function(S,E,x){var C=this&&this.__extends||function(){var et=function(Ft,xt){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Ot){Mt.__proto__=Ot}||function(Mt,Ot){for(var Ut in Ot)Ot.hasOwnProperty(Ut)&&(Mt[Ut]=Ot[Ut])},et(Ft,xt)};return function(Ft,xt){et(Ft,xt);function Mt(){this.constructor=Ft}Ft.prototype=xt===null?Object.create(xt):(Mt.prototype=xt.prototype,new Mt)}}();Object.defineProperty(E,"__esModule",{value:!0});var R=256,Ce=function(){function et(Ft){Ft===void 0&&(Ft="="),this._paddingCharacter=Ft}return et.prototype.encodedLength=function(Ft){return this._paddingCharacter?(Ft+2)/3*4|0:(Ft*8+5)/6|0},et.prototype.encode=function(Ft){for(var xt="",Mt=0;Mt<Ft.length-2;Mt+=3){var Ot=Ft[Mt]<<16|Ft[Mt+1]<<8|Ft[Mt+2];xt+=this._encodeByte(Ot>>>3*6&63),xt+=this._encodeByte(Ot>>>2*6&63),xt+=this._encodeByte(Ot>>>1*6&63),xt+=this._encodeByte(Ot>>>0*6&63)}var Ut=Ft.length-Mt;if(Ut>0){var Ot=Ft[Mt]<<16|(Ut===2?Ft[Mt+1]<<8:0);xt+=this._encodeByte(Ot>>>3*6&63),xt+=this._encodeByte(Ot>>>2*6&63),Ut===2?xt+=this._encodeByte(Ot>>>1*6&63):xt+=this._paddingCharacter||"",xt+=this._paddingCharacter||""}return xt},et.prototype.maxDecodedLength=function(Ft){return this._paddingCharacter?Ft/4*3|0:(Ft*6+7)/8|0},et.prototype.decodedLength=function(Ft){return this.maxDecodedLength(Ft.length-this._getPaddingLength(Ft))},et.prototype.decode=function(Ft){if(Ft.length===0)return new Uint8Array(0);for(var xt=this._getPaddingLength(Ft),Mt=Ft.length-xt,Ot=new Uint8Array(this.maxDecodedLength(Mt)),Ut=0,Xt=0,ei=0,si=0,li=0,bi=0,wi=0;Xt<Mt-4;Xt+=4)si=this._decodeChar(Ft.charCodeAt(Xt+0)),li=this._decodeChar(Ft.charCodeAt(Xt+1)),bi=this._decodeChar(Ft.charCodeAt(Xt+2)),wi=this._decodeChar(Ft.charCodeAt(Xt+3)),Ot[Ut++]=si<<2|li>>>4,Ot[Ut++]=li<<4|bi>>>2,Ot[Ut++]=bi<<6|wi,ei|=si&R,ei|=li&R,ei|=bi&R,ei|=wi&R;if(Xt<Mt-1&&(si=this._decodeChar(Ft.charCodeAt(Xt)),li=this._decodeChar(Ft.charCodeAt(Xt+1)),Ot[Ut++]=si<<2|li>>>4,ei|=si&R,ei|=li&R),Xt<Mt-2&&(bi=this._decodeChar(Ft.charCodeAt(Xt+2)),Ot[Ut++]=li<<4|bi>>>2,ei|=bi&R),Xt<Mt-3&&(wi=this._decodeChar(Ft.charCodeAt(Xt+3)),Ot[Ut++]=bi<<6|wi,ei|=wi&R),ei!==0)throw new Error("Base64Coder: incorrect characters for decoding");return Ot},et.prototype._encodeByte=function(Ft){var xt=Ft;return xt+=65,xt+=25-Ft>>>8&6,xt+=51-Ft>>>8&-75,xt+=61-Ft>>>8&-15,xt+=62-Ft>>>8&3,String.fromCharCode(xt)},et.prototype._decodeChar=function(Ft){var xt=R;return xt+=(42-Ft&Ft-44)>>>8&-R+Ft-43+62,xt+=(46-Ft&Ft-48)>>>8&-R+Ft-47+63,xt+=(47-Ft&Ft-58)>>>8&-R+Ft-48+52,xt+=(64-Ft&Ft-91)>>>8&-R+Ft-65+0,xt+=(96-Ft&Ft-123)>>>8&-R+Ft-97+26,xt},et.prototype._getPaddingLength=function(Ft){var xt=0;if(this._paddingCharacter){for(var Mt=Ft.length-1;Mt>=0&&Ft[Mt]===this._paddingCharacter;Mt--)xt++;if(Ft.length<4||xt>2)throw new Error("Base64Coder: incorrect padding")}return xt},et}();E.Coder=Ce;var Ue=new Ce;function je(et){return Ue.encode(et)}E.encode=je;function Xe(et){return Ue.decode(et)}E.decode=Xe;var Ye=function(et){C(Ft,et);function Ft(){return et!==null&&et.apply(this,arguments)||this}return Ft.prototype._encodeByte=function(xt){var Mt=xt;return Mt+=65,Mt+=25-xt>>>8&6,Mt+=51-xt>>>8&-75,Mt+=61-xt>>>8&-13,Mt+=62-xt>>>8&49,String.fromCharCode(Mt)},Ft.prototype._decodeChar=function(xt){var Mt=R;return Mt+=(44-xt&xt-46)>>>8&-R+xt-45+62,Mt+=(94-xt&xt-96)>>>8&-R+xt-95+63,Mt+=(47-xt&xt-58)>>>8&-R+xt-48+52,Mt+=(64-xt&xt-91)>>>8&-R+xt-65+0,Mt+=(96-xt&xt-123)>>>8&-R+xt-97+26,Mt},Ft}(Ce);E.URLSafeCoder=Ye;var St=new Ye;function Dt(et){return St.encode(et)}E.encodeURLSafe=Dt;function kt(et){return St.decode(et)}E.decodeURLSafe=kt,E.encodedLength=function(et){return Ue.encodedLength(et)},E.maxDecodedLength=function(et){return Ue.maxDecodedLength(et)},E.decodedLength=function(et){return Ue.decodedLength(et)}},function(S,E,x){Object.defineProperty(E,"__esModule",{value:!0});var C="utf8: invalid string",R="utf8: invalid source encoding";function Ce(Xe){for(var Ye=new Uint8Array(Ue(Xe)),St=0,Dt=0;Dt<Xe.length;Dt++){var kt=Xe.charCodeAt(Dt);kt<128?Ye[St++]=kt:kt<2048?(Ye[St++]=192|kt>>6,Ye[St++]=128|kt&63):kt<55296?(Ye[St++]=224|kt>>12,Ye[St++]=128|kt>>6&63,Ye[St++]=128|kt&63):(Dt++,kt=(kt&1023)<<10,kt|=Xe.charCodeAt(Dt)&1023,kt+=65536,Ye[St++]=240|kt>>18,Ye[St++]=128|kt>>12&63,Ye[St++]=128|kt>>6&63,Ye[St++]=128|kt&63)}return Ye}E.encode=Ce;function Ue(Xe){for(var Ye=0,St=0;St<Xe.length;St++){var Dt=Xe.charCodeAt(St);if(Dt<128)Ye+=1;else if(Dt<2048)Ye+=2;else if(Dt<55296)Ye+=3;else if(Dt<=57343){if(St>=Xe.length-1)throw new Error(C);St++,Ye+=4}else throw new Error(C)}return Ye}E.encodedLength=Ue;function je(Xe){for(var Ye=[],St=0;St<Xe.length;St++){var Dt=Xe[St];if(Dt&128){var kt=void 0;if(Dt<224){if(St>=Xe.length)throw new Error(R);var et=Xe[++St];if((et&192)!==128)throw new Error(R);Dt=(Dt&31)<<6|et&63,kt=128}else if(Dt<240){if(St>=Xe.length-1)throw new Error(R);var et=Xe[++St],Ft=Xe[++St];if((et&192)!==128||(Ft&192)!==128)throw new Error(R);Dt=(Dt&15)<<12|(et&63)<<6|Ft&63,kt=2048}else if(Dt<248){if(St>=Xe.length-2)throw new Error(R);var et=Xe[++St],Ft=Xe[++St],xt=Xe[++St];if((et&192)!==128||(Ft&192)!==128||(xt&192)!==128)throw new Error(R);Dt=(Dt&15)<<18|(et&63)<<12|(Ft&63)<<6|xt&63,kt=65536}else throw new Error(R);if(Dt<kt||Dt>=55296&&Dt<=57343)throw new Error(R);if(Dt>=65536){if(Dt>1114111)throw new Error(R);Dt-=65536,Ye.push(String.fromCharCode(55296|Dt>>10)),Dt=56320|Dt&1023}}Ye.push(String.fromCharCode(Dt))}return Ye.join("")}E.decode=je},function(S,E,x){S.exports=x(3).default},function(S,E,x){x.r(E);class C{constructor(Vt,Qt){this.lastId=0,this.prefix=Vt,this.name=Qt}create(Vt){this.lastId++;var Qt=this.lastId,di=this.prefix+Qt,vi=this.name+"["+Qt+"]",$i=!1,er=function(){$i||(Vt.apply(null,arguments),$i=!0)};return this[Qt]=er,{number:Qt,id:di,name:vi,callback:er}}remove(Vt){delete this[Vt.number]}}var R=new C("_pusher_script_","Pusher.ScriptReceivers"),Ce={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},Ue=Ce;class je{constructor(Vt){this.options=Vt,this.receivers=Vt.receivers||R,this.loading={}}load(Vt,Qt,di){var vi=this;if(vi.loading[Vt]&&vi.loading[Vt].length>0)vi.loading[Vt].push(di);else{vi.loading[Vt]=[di];var $i=zi.createScriptRequest(vi.getPath(Vt,Qt)),er=vi.receivers.create(function(hr){if(vi.receivers.remove(er),vi.loading[Vt]){var _r=vi.loading[Vt];delete vi.loading[Vt];for(var Ar=function(Br){Br||$i.cleanup()},Pr=0;Pr<_r.length;Pr++)_r[Pr](hr,Ar)}});$i.send(er)}}getRoot(Vt){var Qt,di=zi.getDocument().location.protocol;return Vt&&Vt.useTLS||di==="https:"?Qt=this.options.cdn_https:Qt=this.options.cdn_http,Qt.replace(/\/*$/,"")+"/"+this.options.version}getPath(Vt,Qt){return this.getRoot(Qt)+"/"+Vt+this.options.suffix+".js"}}var Xe=new C("_pusher_dependencies","Pusher.DependenciesReceivers"),Ye=new je({cdn_http:Ue.cdn_http,cdn_https:Ue.cdn_https,version:Ue.VERSION,suffix:Ue.dependency_suffix,receivers:Xe});const St={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var kt={buildLogSuffix:function(ii){const Vt="See:",Qt=St.urls[ii];if(!Qt)return"";let di;return Qt.fullUrl?di=Qt.fullUrl:Qt.path&&(di=St.baseUrl+Qt.path),di?`${Vt} ${di}`:""}},et;(function(ii){ii.UserAuthentication="user-authentication",ii.ChannelAuthorization="channel-authorization"})(et||(et={}));class Ft extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class xt extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class Mt extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class Ot extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class Ut extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class Xt extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class ei extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class si extends Error{constructor(Vt){super(Vt),Object.setPrototypeOf(this,new.target.prototype)}}class li extends Error{constructor(Vt,Qt){super(Qt),this.status=Vt,Object.setPrototypeOf(this,new.target.prototype)}}var wi=function(ii,Vt,Qt,di,vi){const $i=zi.createXHR();$i.open("POST",Qt.endpoint,!0),$i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var er in Qt.headers)$i.setRequestHeader(er,Qt.headers[er]);if(Qt.headersProvider!=null){let hr=Qt.headersProvider();for(var er in hr)$i.setRequestHeader(er,hr[er])}return $i.onreadystatechange=function(){if($i.readyState===4)if($i.status===200){let hr,_r=!1;try{hr=JSON.parse($i.responseText),_r=!0}catch{vi(new li(200,`JSON returned from ${di.toString()} endpoint was invalid, yet status code was 200. Data was: ${$i.responseText}`),null)}_r&&vi(null,hr)}else{let hr="";switch(di){case et.UserAuthentication:hr=kt.buildLogSuffix("authenticationEndpoint");break;case et.ChannelAuthorization:hr=`Clients must be authorized to join private or presence channels. ${kt.buildLogSuffix("authorizationEndpoint")}`;break}vi(new li($i.status,`Unable to retrieve auth string from ${di.toString()} endpoint - received status: ${$i.status} from ${Qt.endpoint}. ${hr}`),null)}},$i.send(Vt),$i};function Pi(ii){return mi(Ri(ii))}var Ci=String.fromCharCode,Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bi=function(ii){var Vt=ii.charCodeAt(0);return Vt<128?ii:Vt<2048?Ci(192|Vt>>>6)+Ci(128|Vt&63):Ci(224|Vt>>>12&15)+Ci(128|Vt>>>6&63)+Ci(128|Vt&63)},Ri=function(ii){return ii.replace(/[^\x00-\x7F]/g,Bi)},oi=function(ii){var Vt=[0,2,1][ii.length%3],Qt=ii.charCodeAt(0)<<16|(ii.length>1?ii.charCodeAt(1):0)<<8|(ii.length>2?ii.charCodeAt(2):0),di=[Di.charAt(Qt>>>18),Di.charAt(Qt>>>12&63),Vt>=2?"=":Di.charAt(Qt>>>6&63),Vt>=1?"=":Di.charAt(Qt&63)];return di.join("")},mi=window.btoa||function(ii){return ii.replace(/[\s\S]{1,3}/g,oi)};class ri{constructor(Vt,Qt,di,vi){this.clear=Qt,this.timer=Vt(()=>{this.timer&&(this.timer=vi(this.timer))},di)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var ni=ri;function Ei(ii){window.clearTimeout(ii)}function Si(ii){window.clearInterval(ii)}class qi extends ni{constructor(Vt,Qt){super(setTimeout,Ei,Vt,function(di){return Qt(),null})}}class sr extends ni{constructor(Vt,Qt){super(setInterval,Si,Vt,function(di){return Qt(),di})}}var ur={now(){return Date.now?Date.now():new Date().valueOf()},defer(ii){return new qi(0,ii)},method(ii,...Vt){var Qt=Array.prototype.slice.call(arguments,1);return function(di){return di[ii].apply(di,Qt.concat(arguments))}}},fr=ur;function lr(ii,...Vt){for(var Qt=0;Qt<Vt.length;Qt++){var di=Vt[Qt];for(var vi in di)di[vi]&&di[vi].constructor&&di[vi].constructor===Object?ii[vi]=lr(ii[vi]||{},di[vi]):ii[vi]=di[vi]}return ii}function Mi(){for(var ii=["Pusher"],Vt=0;Vt<arguments.length;Vt++)typeof arguments[Vt]=="string"?ii.push(arguments[Vt]):ii.push(ar(arguments[Vt]));return ii.join(" : ")}function Yi(ii,Vt){var Qt=Array.prototype.indexOf;if(ii===null)return-1;if(Qt&&ii.indexOf===Qt)return ii.indexOf(Vt);for(var di=0,vi=ii.length;di<vi;di++)if(ii[di]===Vt)return di;return-1}function Wi(ii,Vt){for(var Qt in ii)Object.prototype.hasOwnProperty.call(ii,Qt)&&Vt(ii[Qt],Qt,ii)}function ir(ii){var Vt=[];return Wi(ii,function(Qt,di){Vt.push(di)}),Vt}function mr(ii){var Vt=[];return Wi(ii,function(Qt){Vt.push(Qt)}),Vt}function yr(ii,Vt,Qt){for(var di=0;di<ii.length;di++)Vt.call(Qt||window,ii[di],di,ii)}function pi(ii,Vt){for(var Qt=[],di=0;di<ii.length;di++)Qt.push(Vt(ii[di],di,ii,Qt));return Qt}function fi(ii,Vt){var Qt={};return Wi(ii,function(di,vi){Qt[vi]=Vt(di)}),Qt}function Ai(ii,Vt){Vt=Vt||function(vi){return!!vi};for(var Qt=[],di=0;di<ii.length;di++)Vt(ii[di],di,ii,Qt)&&Qt.push(ii[di]);return Qt}function Vi(ii,Vt){var Qt={};return Wi(ii,function(di,vi){(Vt&&Vt(di,vi,ii,Qt)||di)&&(Qt[vi]=di)}),Qt}function Li(ii){var Vt=[];return Wi(ii,function(Qt,di){Vt.push([di,Qt])}),Vt}function Ni(ii,Vt){for(var Qt=0;Qt<ii.length;Qt++)if(Vt(ii[Qt],Qt,ii))return!0;return!1}function Qi(ii,Vt){for(var Qt=0;Qt<ii.length;Qt++)if(!Vt(ii[Qt],Qt,ii))return!1;return!0}function Fi(ii){return fi(ii,function(Vt){return typeof Vt=="object"&&(Vt=ar(Vt)),encodeURIComponent(Pi(Vt.toString()))})}function Gi(ii){var Vt=Vi(ii,function(di){return di!==void 0}),Qt=pi(Li(Fi(Vt)),fr.method("join","=")).join("&");return Qt}function ji(ii){var Vt=[],Qt=[];return function di(vi,$i){var er,hr,_r;switch(typeof vi){case"object":if(!vi)return null;for(er=0;er<Vt.length;er+=1)if(Vt[er]===vi)return{$ref:Qt[er]};if(Vt.push(vi),Qt.push($i),Object.prototype.toString.apply(vi)==="[object Array]")for(_r=[],er=0;er<vi.length;er+=1)_r[er]=di(vi[er],$i+"["+er+"]");else{_r={};for(hr in vi)Object.prototype.hasOwnProperty.call(vi,hr)&&(_r[hr]=di(vi[hr],$i+"["+JSON.stringify(hr)+"]"))}return _r;case"number":case"string":case"boolean":return vi}}(ii,"$")}function ar(ii){try{return JSON.stringify(ii)}catch{return JSON.stringify(ji(ii))}}class Ji{constructor(){this.globalLog=Vt=>{window.console&&window.console.log&&window.console.log(Vt)}}debug(...Vt){this.log(this.globalLog,Vt)}warn(...Vt){this.log(this.globalLogWarn,Vt)}error(...Vt){this.log(this.globalLogError,Vt)}globalLogWarn(Vt){window.console&&window.console.warn?window.console.warn(Vt):this.globalLog(Vt)}globalLogError(Vt){window.console&&window.console.error?window.console.error(Vt):this.globalLogWarn(Vt)}log(Vt,...Qt){var di=Mi.apply(this,arguments);In.log?In.log(di):In.logToConsole&&Vt.bind(this)(di)}}var Xi=new Ji,or=function(ii,Vt,Qt,di,vi){(Qt.headers!==void 0||Qt.headersProvider!=null)&&Xi.warn(`To send headers with the ${di.toString()} request, you must use AJAX, rather than JSONP.`);var $i=ii.nextAuthCallbackID.toString();ii.nextAuthCallbackID++;var er=ii.getDocument(),hr=er.createElement("script");ii.auth_callbacks[$i]=function(Pr){vi(null,Pr)};var _r="Pusher.auth_callbacks['"+$i+"']";hr.src=Qt.endpoint+"?callback="+encodeURIComponent(_r)+"&"+Vt;var Ar=er.getElementsByTagName("head")[0]||er.documentElement;Ar.insertBefore(hr,Ar.firstChild)},vr=or;class Er{constructor(Vt){this.src=Vt}send(Vt){var Qt=this,di="Error loading "+Qt.src;Qt.script=document.createElement("script"),Qt.script.id=Vt.id,Qt.script.src=Qt.src,Qt.script.type="text/javascript",Qt.script.charset="UTF-8",Qt.script.addEventListener?(Qt.script.onerror=function(){Vt.callback(di)},Qt.script.onload=function(){Vt.callback(null)}):Qt.script.onreadystatechange=function(){(Qt.script.readyState==="loaded"||Qt.script.readyState==="complete")&&Vt.callback(null)},Qt.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(Qt.errorScript=document.createElement("script"),Qt.errorScript.id=Vt.id+"_error",Qt.errorScript.text=Vt.name+"('"+di+"');",Qt.script.async=Qt.errorScript.async=!1):Qt.script.async=!0;var vi=document.getElementsByTagName("head")[0];vi.insertBefore(Qt.script,vi.firstChild),Qt.errorScript&&vi.insertBefore(Qt.errorScript,Qt.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class xr{constructor(Vt,Qt){this.url=Vt,this.data=Qt}send(Vt){if(!this.request){var Qt=Gi(this.data),di=this.url+"/"+Vt.number+"?"+Qt;this.request=zi.createScriptRequest(di),this.request.send(Vt)}}cleanup(){this.request&&this.request.cleanup()}}var Mr=function(ii,Vt){return function(Qt,di){var vi="http"+(Vt?"s":"")+"://",$i=vi+(ii.host||ii.options.host)+ii.options.path,er=zi.createJSONPRequest($i,Qt),hr=zi.ScriptReceivers.create(function(_r,Ar){R.remove(hr),er.cleanup(),Ar&&Ar.host&&(ii.host=Ar.host),di&&di(_r,Ar)});er.send(hr)}},Nr={name:"jsonp",getAgent:Mr},Sr=Nr;function $r(ii,Vt,Qt){var di=ii+(Vt.useTLS?"s":""),vi=Vt.useTLS?Vt.hostTLS:Vt.hostNonTLS;return di+"://"+vi+Qt}function Gr(ii,Vt){var Qt="/app/"+ii,di="?protocol="+Ue.PROTOCOL+"&client=js&version="+Ue.VERSION+(Vt?"&"+Vt:"");return Qt+di}var qn={getInitial:function(ii,Vt){var Qt=(Vt.httpPath||"")+Gr(ii,"flash=false");return $r("ws",Vt,Qt)}},jr={getInitial:function(ii,Vt){var Qt=(Vt.httpPath||"/pusher")+Gr(ii);return $r("http",Vt,Qt)}},Xr={getInitial:function(ii,Vt){return $r("http",Vt,Vt.httpPath||"/pusher")},getPath:function(ii,Vt){return Gr(ii)}};class Rn{constructor(){this._callbacks={}}get(Vt){return this._callbacks[is(Vt)]}add(Vt,Qt,di){var vi=is(Vt);this._callbacks[vi]=this._callbacks[vi]||[],this._callbacks[vi].push({fn:Qt,context:di})}remove(Vt,Qt,di){if(!Vt&&!Qt&&!di){this._callbacks={};return}var vi=Vt?[is(Vt)]:ir(this._callbacks);Qt||di?this.removeCallback(vi,Qt,di):this.removeAllCallbacks(vi)}removeCallback(Vt,Qt,di){yr(Vt,function(vi){this._callbacks[vi]=Ai(this._callbacks[vi]||[],function($i){return Qt&&Qt!==$i.fn||di&&di!==$i.context}),this._callbacks[vi].length===0&&delete this._callbacks[vi]},this)}removeAllCallbacks(Vt){yr(Vt,function(Qt){delete this._callbacks[Qt]},this)}}function is(ii){return"_"+ii}class Wr{constructor(Vt){this.callbacks=new Rn,this.global_callbacks=[],this.failThrough=Vt}bind(Vt,Qt,di){return this.callbacks.add(Vt,Qt,di),this}bind_global(Vt){return this.global_callbacks.push(Vt),this}unbind(Vt,Qt,di){return this.callbacks.remove(Vt,Qt,di),this}unbind_global(Vt){return Vt?(this.global_callbacks=Ai(this.global_callbacks||[],Qt=>Qt!==Vt),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(Vt,Qt,di){for(var vi=0;vi<this.global_callbacks.length;vi++)this.global_callbacks[vi](Vt,Qt);var $i=this.callbacks.get(Vt),er=[];if(di?er.push(Qt,di):Qt&&er.push(Qt),$i&&$i.length>0)for(var vi=0;vi<$i.length;vi++)$i[vi].fn.apply($i[vi].context||window,er);else this.failThrough&&this.failThrough(Vt,Qt);return this}}class rs extends Wr{constructor(Vt,Qt,di,vi,$i){super(),this.initialize=zi.transportConnectionInitializer,this.hooks=Vt,this.name=Qt,this.priority=di,this.key=vi,this.options=$i,this.state="new",this.timeline=$i.timeline,this.activityTimeout=$i.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var Vt=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(Vt,this.options)}catch(Qt){return fr.defer(()=>{this.onError(Qt),this.changeState("closed")}),!1}return this.bindListeners(),Xi.debug("Connecting",{transport:this.name,url:Vt}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(Vt){return this.state==="open"?(fr.defer(()=>{this.socket&&this.socket.send(Vt)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(Vt){this.emit("error",{type:"WebSocketError",error:Vt}),this.timeline.error(this.buildTimelineMessage({error:Vt.toString()}))}onClose(Vt){Vt?this.changeState("closed",{code:Vt.code,reason:Vt.reason,wasClean:Vt.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(Vt){this.emit("message",Vt)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=Vt=>{this.onError(Vt)},this.socket.onclose=Vt=>{this.onClose(Vt)},this.socket.onmessage=Vt=>{this.onMessage(Vt)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(Vt,Qt){this.state=Vt,this.timeline.info(this.buildTimelineMessage({state:Vt,params:Qt})),this.emit(Vt,Qt)}buildTimelineMessage(Vt){return lr({cid:this.id},Vt)}}class sn{constructor(Vt){this.hooks=Vt}isSupported(Vt){return this.hooks.isSupported(Vt)}createConnection(Vt,Qt,di,vi){return new rs(this.hooks,Vt,Qt,di,vi)}}var Cs=new sn({urls:qn,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!zi.getWebSocketAPI()},isSupported:function(){return!!zi.getWebSocketAPI()},getSocket:function(ii){return zi.createWebSocket(ii)}}),ns={urls:jr,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ws=lr({getSocket:function(ii){return zi.HTTPFactory.createStreamingSocket(ii)}},ns),Mn=lr({getSocket:function(ii){return zi.HTTPFactory.createPollingSocket(ii)}},ns),ss={isSupported:function(){return zi.isXHRSupported()}},Fs=new sn(lr({},ws,ss)),as=new sn(lr({},Mn,ss)),$s={ws:Cs,xhr_streaming:Fs,xhr_polling:as},zn=$s,Gn=new sn({file:"sockjs",urls:Xr,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(ii,Vt){return new window.SockJS(ii,null,{js_path:Ye.getPath("sockjs",{useTLS:Vt.useTLS}),ignore_null_origin:Vt.ignoreNullOrigin})},beforeOpen:function(ii,Vt){ii.send(JSON.stringify({path:Vt}))}}),Yr={isSupported:function(ii){var Vt=zi.isXDRSupported(ii.useTLS);return Vt}},Wn=new sn(lr({},ws,Yr)),zr=new sn(lr({},Mn,Yr));zn.xdr_streaming=Wn,zn.xdr_polling=zr,zn.sockjs=Gn;var Bs=zn;class os extends Wr{constructor(){super();var Vt=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){Vt.emit("online")},!1),window.addEventListener("offline",function(){Vt.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var an=new os;class tn{constructor(Vt,Qt,di){this.manager=Vt,this.transport=Qt,this.minPingDelay=di.minPingDelay,this.maxPingDelay=di.maxPingDelay,this.pingDelay=void 0}createConnection(Vt,Qt,di,vi){vi=lr({},vi,{activityTimeout:this.pingDelay});var $i=this.transport.createConnection(Vt,Qt,di,vi),er=null,hr=function(){$i.unbind("open",hr),$i.bind("closed",_r),er=fr.now()},_r=Ar=>{if($i.unbind("closed",_r),Ar.code===1002||Ar.code===1003)this.manager.reportDeath();else if(!Ar.wasClean&&er){var Pr=fr.now()-er;Pr<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Pr/2,this.minPingDelay))}};return $i.bind("open",hr),$i}isSupported(Vt){return this.manager.isAlive()&&this.transport.isSupported(Vt)}}const bn={decodeMessage:function(ii){try{var Vt=JSON.parse(ii.data),Qt=Vt.data;if(typeof Qt=="string")try{Qt=JSON.parse(Vt.data)}catch{}var di={event:Vt.event,channel:Vt.channel,data:Qt};return Vt.user_id&&(di.user_id=Vt.user_id),di}catch(vi){throw{type:"MessageParseError",error:vi,data:ii.data}}},encodeMessage:function(ii){return JSON.stringify(ii)},processHandshake:function(ii){var Vt=bn.decodeMessage(ii);if(Vt.event==="pusher:connection_established"){if(!Vt.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:Vt.data.socket_id,activityTimeout:Vt.data.activity_timeout*1e3}}else{if(Vt.event==="pusher:error")return{action:this.getCloseAction(Vt.data),error:this.getCloseError(Vt.data)};throw"Invalid handshake"}},getCloseAction:function(ii){return ii.code<4e3?ii.code>=1002&&ii.code<=1004?"backoff":null:ii.code===4e3?"tls_only":ii.code<4100?"refused":ii.code<4200?"backoff":ii.code<4300?"retry":"refused"},getCloseError:function(ii){return ii.code!==1e3&&ii.code!==1001?{type:"PusherError",data:{code:ii.code,message:ii.reason||ii.message}}:null}};var Cr=bn;class Us extends Wr{constructor(Vt,Qt){super(),this.id=Vt,this.transport=Qt,this.activityTimeout=Qt.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(Vt){return this.transport.send(Vt)}send_event(Vt,Qt,di){var vi={event:Vt,data:Qt};return di&&(vi.channel=di),Xi.debug("Event sent",vi),this.send(Cr.encodeMessage(vi))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var Vt={message:di=>{var vi;try{vi=Cr.decodeMessage(di)}catch($i){this.emit("error",{type:"MessageParseError",error:$i,data:di.data})}if(vi!==void 0){switch(Xi.debug("Event recd",vi),vi.event){case"pusher:error":this.emit("error",{type:"PusherError",data:vi.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",vi)}},activity:()=>{this.emit("activity")},error:di=>{this.emit("error",di)},closed:di=>{Qt(),di&&di.code&&this.handleCloseEvent(di),this.transport=null,this.emit("closed")}},Qt=()=>{Wi(Vt,(di,vi)=>{this.transport.unbind(vi,di)})};Wi(Vt,(di,vi)=>{this.transport.bind(vi,di)})}handleCloseEvent(Vt){var Qt=Cr.getCloseAction(Vt),di=Cr.getCloseError(Vt);di&&this.emit("error",di),Qt&&this.emit(Qt,{action:Qt,error:di})}}class Kn{constructor(Vt,Qt){this.transport=Vt,this.callback=Qt,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=Vt=>{this.unbindListeners();var Qt;try{Qt=Cr.processHandshake(Vt)}catch(di){this.finish("error",{error:di}),this.transport.close();return}Qt.action==="connected"?this.finish("connected",{connection:new Us(Qt.id,this.transport),activityTimeout:Qt.activityTimeout}):(this.finish(Qt.action,{error:Qt.error}),this.transport.close())},this.onClosed=Vt=>{this.unbindListeners();var Qt=Cr.getCloseAction(Vt)||"backoff",di=Cr.getCloseError(Vt);this.finish(Qt,{error:di})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(Vt,Qt){this.callback(lr({transport:this.transport,action:Vt},Qt))}}class Ln{constructor(Vt,Qt){this.timeline=Vt,this.options=Qt||{}}send(Vt,Qt){this.timeline.isEmpty()||this.timeline.send(zi.TimelineTransport.getAgent(this,Vt),Qt)}}class ls extends Wr{constructor(Vt,Qt){super(function(di,vi){Xi.debug("No callbacks on "+Vt+" for "+di)}),this.name=Vt,this.pusher=Qt,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(Vt,Qt){return Qt(null,{auth:""})}trigger(Vt,Qt){if(Vt.indexOf("client-")!==0)throw new Ft("Event '"+Vt+"' does not start with 'client-'");if(!this.subscribed){var di=kt.buildLogSuffix("triggeringClientEvents");Xi.warn(`Client event triggered before channel 'subscription_succeeded' event . ${di}`)}return this.pusher.send_event(Vt,Qt,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(Vt){var Qt=Vt.event,di=Vt.data;if(Qt==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(Vt);else if(Qt==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(Vt);else if(Qt.indexOf("pusher_internal:")!==0){var vi={};this.emit(Qt,di,vi)}}handleSubscriptionSucceededEvent(Vt){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",Vt.data)}handleSubscriptionCountEvent(Vt){Vt.data.subscription_count&&(this.subscriptionCount=Vt.data.subscription_count),this.emit("pusher:subscription_count",Vt.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(Vt,Qt)=>{Vt?(this.subscriptionPending=!1,Xi.error(Vt.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:Vt.message},Vt instanceof li?{status:Vt.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:Qt.auth,channel_data:Qt.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class cn extends ls{authorize(Vt,Qt){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:Vt},Qt)}}class Rr{constructor(){this.reset()}get(Vt){return Object.prototype.hasOwnProperty.call(this.members,Vt)?{id:Vt,info:this.members[Vt]}:null}each(Vt){Wi(this.members,(Qt,di)=>{Vt(this.get(di))})}setMyID(Vt){this.myID=Vt}onSubscription(Vt){this.members=Vt.presence.hash,this.count=Vt.presence.count,this.me=this.get(this.myID)}addMember(Vt){return this.get(Vt.user_id)===null&&this.count++,this.members[Vt.user_id]=Vt.user_info,this.get(Vt.user_id)}removeMember(Vt){var Qt=this.get(Vt.user_id);return Qt&&(delete this.members[Vt.user_id],this.count--),Qt}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var us=function(ii,Vt,Qt,di){function vi($i){return $i instanceof Qt?$i:new Qt(function(er){er($i)})}return new(Qt||(Qt=Promise))(function($i,er){function hr(Pr){try{Ar(di.next(Pr))}catch(Br){er(Br)}}function _r(Pr){try{Ar(di.throw(Pr))}catch(Br){er(Br)}}function Ar(Pr){Pr.done?$i(Pr.value):vi(Pr.value).then(hr,_r)}Ar((di=di.apply(ii,Vt||[])).next())})};class Xn extends cn{constructor(Vt,Qt){super(Vt,Qt),this.members=new Rr}authorize(Vt,Qt){super.authorize(Vt,(di,vi)=>us(this,void 0,void 0,function*(){if(!di)if(vi=vi,vi.channel_data!=null){var $i=JSON.parse(vi.channel_data);this.members.setMyID($i.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let er=kt.buildLogSuffix("authorizationEndpoint");Xi.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${er}, or the user should be signed in.`),Qt("Invalid auth response");return}Qt(di,vi)}))}handleEvent(Vt){var Qt=Vt.event;if(Qt.indexOf("pusher_internal:")===0)this.handleInternalEvent(Vt);else{var di=Vt.data,vi={};Vt.user_id&&(vi.user_id=Vt.user_id),this.emit(Qt,di,vi)}}handleInternalEvent(Vt){var Qt=Vt.event,di=Vt.data;switch(Qt){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(Vt);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(Vt);break;case"pusher_internal:member_added":var vi=this.members.addMember(di);this.emit("pusher:member_added",vi);break;case"pusher_internal:member_removed":var $i=this.members.removeMember(di);$i&&this.emit("pusher:member_removed",$i);break}}handleSubscriptionSucceededEvent(Vt){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(Vt.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Vs=x(1),Yn=x(0);class Hs extends cn{constructor(Vt,Qt,di){super(Vt,Qt),this.key=null,this.nacl=di}authorize(Vt,Qt){super.authorize(Vt,(di,vi)=>{if(di){Qt(di,vi);return}let $i=vi.shared_secret;if(!$i){Qt(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Yn.decode)($i),delete vi.shared_secret,Qt(null,vi)})}trigger(Vt,Qt){throw new Xt("Client events are not currently supported for encrypted channels")}handleEvent(Vt){var Qt=Vt.event,di=Vt.data;if(Qt.indexOf("pusher_internal:")===0||Qt.indexOf("pusher:")===0){super.handleEvent(Vt);return}this.handleEncryptedEvent(Qt,di)}handleEncryptedEvent(Vt,Qt){if(!this.key){Xi.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!Qt.ciphertext||!Qt.nonce){Xi.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+Qt);return}let di=Object(Yn.decode)(Qt.ciphertext);if(di.length<this.nacl.secretbox.overheadLength){Xi.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${di.length}`);return}let vi=Object(Yn.decode)(Qt.nonce);if(vi.length<this.nacl.secretbox.nonceLength){Xi.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${vi.length}`);return}let $i=this.nacl.secretbox.open(di,vi,this.key);if($i===null){Xi.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(er,hr)=>{if(er){Xi.error(`Failed to make a request to the authEndpoint: ${hr}. Unable to fetch new key, so dropping encrypted event`);return}if($i=this.nacl.secretbox.open(di,vi,this.key),$i===null){Xi.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(Vt,this.getDataToEmit($i))});return}this.emit(Vt,this.getDataToEmit($i))}getDataToEmit(Vt){let Qt=Object(Vs.decode)(Vt);try{return JSON.parse(Qt)}catch{return Qt}}}class As extends Wr{constructor(Vt,Qt){super(),this.state="initialized",this.connection=null,this.key=Vt,this.options=Qt,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var di=zi.getNetwork();di.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),di.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}switchCluster(Vt){this.key=Vt,this.updateStrategy(),this.retryIn(0)}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(Vt){return this.connection?this.connection.send(Vt):!1}send_event(Vt,Qt,di){return this.connection?this.connection.send_event(Vt,Qt,di):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var Vt=(Qt,di)=>{Qt?this.runner=this.strategy.connect(0,Vt):di.action==="error"?(this.emit("error",{type:"HandshakeError",error:di.error}),this.timeline.error({handshakeError:di.error})):(this.abortConnecting(),this.handshakeCallbacks[di.action](di))};this.runner=this.strategy.connect(0,Vt)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var Vt=this.abandonConnection();Vt.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(Vt){this.timeline.info({action:"retry",delay:Vt}),Vt>0&&this.emit("connecting_in",Math.round(Vt/1e3)),this.retryTimer=new qi(Vt||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new qi(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new qi(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new qi(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(Vt){return lr({},Vt,{message:Qt=>{this.resetActivityCheck(),this.emit("message",Qt)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:Qt=>{this.emit("error",Qt)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(Vt){return lr({},Vt,{connected:Qt=>{this.activityTimeout=Math.min(this.options.activityTimeout,Qt.activityTimeout,Qt.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(Qt.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let Vt=Qt=>di=>{di.error&&this.emit("error",{type:"WebSocketError",error:di.error}),Qt(di)};return{tls_only:Vt(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:Vt(()=>{this.disconnect()}),backoff:Vt(()=>{this.retryIn(1e3)}),retry:Vt(()=>{this.retryIn(0)})}}setConnection(Vt){this.connection=Vt;for(var Qt in this.connectionCallbacks)this.connection.bind(Qt,this.connectionCallbacks[Qt]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var Vt in this.connectionCallbacks)this.connection.unbind(Vt,this.connectionCallbacks[Vt]);var Qt=this.connection;return this.connection=null,Qt}}updateState(Vt,Qt){var di=this.state;if(this.state=Vt,di!==Vt){var vi=Vt;vi==="connected"&&(vi+=" with new socket ID "+Qt.socket_id),Xi.debug("State changed",di+" -> "+vi),this.timeline.info({state:Vt,params:Qt}),this.emit("state_change",{previous:di,current:Vt}),this.emit(Vt,Qt)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class cs{constructor(){this.channels={}}add(Vt,Qt){return this.channels[Vt]||(this.channels[Vt]=hs(Vt,Qt)),this.channels[Vt]}all(){return mr(this.channels)}find(Vt){return this.channels[Vt]}remove(Vt){var Qt=this.channels[Vt];return delete this.channels[Vt],Qt}disconnect(){Wi(this.channels,function(Vt){Vt.disconnect()})}}function hs(ii,Vt){if(ii.indexOf("private-encrypted-")===0){if(Vt.config.nacl)return mn.createEncryptedChannel(ii,Vt,Vt.config.nacl);let Qt="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",di=kt.buildLogSuffix("encryptedChannelSupport");throw new Xt(`${Qt}. ${di}`)}else{if(ii.indexOf("private-")===0)return mn.createPrivateChannel(ii,Vt);if(ii.indexOf("presence-")===0)return mn.createPresenceChannel(ii,Vt);if(ii.indexOf("#")===0)throw new xt('Cannot create a channel with name "'+ii+'".');return mn.createChannel(ii,Vt)}}var ds={createChannels(){return new cs},createConnectionManager(ii,Vt){return new As(ii,Vt)},createChannel(ii,Vt){return new ls(ii,Vt)},createPrivateChannel(ii,Vt){return new cn(ii,Vt)},createPresenceChannel(ii,Vt){return new Xn(ii,Vt)},createEncryptedChannel(ii,Vt,Qt){return new Hs(ii,Vt,Qt)},createTimelineSender(ii,Vt){return new Ln(ii,Vt)},createHandshake(ii,Vt){return new Kn(ii,Vt)},createAssistantToTheTransportManager(ii,Vt,Qt){return new tn(ii,Vt,Qt)}},mn=ds;class fs{constructor(Vt){this.options=Vt||{},this.livesLeft=this.options.lives||1/0}getAssistant(Vt){return mn.createAssistantToTheTransportManager(this,Vt,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Qr{constructor(Vt,Qt){this.strategies=Vt,this.loop=!!Qt.loop,this.failFast=!!Qt.failFast,this.timeout=Qt.timeout,this.timeoutLimit=Qt.timeoutLimit}isSupported(){return Ni(this.strategies,fr.method("isSupported"))}connect(Vt,Qt){var di=this.strategies,vi=0,$i=this.timeout,er=null,hr=(_r,Ar)=>{Ar?Qt(null,Ar):(vi=vi+1,this.loop&&(vi=vi%di.length),vi<di.length?($i&&($i=$i*2,this.timeoutLimit&&($i=Math.min($i,this.timeoutLimit))),er=this.tryStrategy(di[vi],Vt,{timeout:$i,failFast:this.failFast},hr)):Qt(!0))};return er=this.tryStrategy(di[vi],Vt,{timeout:$i,failFast:this.failFast},hr),{abort:function(){er.abort()},forceMinPriority:function(_r){Vt=_r,er&&er.forceMinPriority(_r)}}}tryStrategy(Vt,Qt,di,vi){var $i=null,er=null;return di.timeout>0&&($i=new qi(di.timeout,function(){er.abort(),vi(!0)})),er=Vt.connect(Qt,function(hr,_r){hr&&$i&&$i.isRunning()&&!di.failFast||($i&&$i.ensureAborted(),vi(hr,_r))}),{abort:function(){$i&&$i.ensureAborted(),er.abort()},forceMinPriority:function(hr){er.forceMinPriority(hr)}}}}class Cn{constructor(Vt){this.strategies=Vt}isSupported(){return Ni(this.strategies,fr.method("isSupported"))}connect(Vt,Qt){return Qn(this.strategies,Vt,function(di,vi){return function($i,er){if(vi[di].error=$i,$i){An(vi)&&Qt(!0);return}yr(vi,function(hr){hr.forceMinPriority(er.transport.priority)}),Qt(null,er)}})}}function Qn(ii,Vt,Qt){var di=pi(ii,function(vi,$i,er,hr){return vi.connect(Vt,Qt($i,hr))});return{abort:function(){yr(di,$n)},forceMinPriority:function(vi){yr(di,function($i){$i.forceMinPriority(vi)})}}}function An(ii){return Qi(ii,function(Vt){return!!Vt.error})}function $n(ii){!ii.error&&!ii.aborted&&(ii.abort(),ii.aborted=!0)}class Bn{constructor(Vt,Qt,di){this.strategy=Vt,this.transports=Qt,this.ttl=di.ttl||1800*1e3,this.usingTLS=di.useTLS,this.timeline=di.timeline}isSupported(){return this.strategy.isSupported()}connect(Vt,Qt){var di=this.usingTLS,vi=Ps(di),$i=vi&&vi.cacheSkipCount?vi.cacheSkipCount:0,er=[this.strategy];if(vi&&vi.timestamp+this.ttl>=fr.now()){var hr=this.transports[vi.transport];hr&&(["ws","wss"].includes(vi.transport)||$i>3?(this.timeline.info({cached:!0,transport:vi.transport,latency:vi.latency}),er.push(new Qr([hr],{timeout:vi.latency*2+1e3,failFast:!0}))):$i++)}var _r=fr.now(),Ar=er.pop().connect(Vt,function Pr(Br,Os){Br?(Un(di),er.length>0?(_r=fr.now(),Ar=er.pop().connect(Vt,Pr)):Qt(Br)):(ps(di,Os.transport.name,fr.now()-_r,$i),Qt(null,Os))});return{abort:function(){Ar.abort()},forceMinPriority:function(Pr){Vt=Pr,Ar&&Ar.forceMinPriority(Pr)}}}}function Tn(ii){return"pusherTransport"+(ii?"TLS":"NonTLS")}function Ps(ii){var Vt=zi.getLocalStorage();if(Vt)try{var Qt=Vt[Tn(ii)];if(Qt)return JSON.parse(Qt)}catch{Un(ii)}return null}function ps(ii,Vt,Qt,di){var vi=zi.getLocalStorage();if(vi)try{vi[Tn(ii)]=ar({timestamp:fr.now(),transport:Vt,latency:Qt,cacheSkipCount:di})}catch{}}function Un(ii){var Vt=zi.getLocalStorage();if(Vt)try{delete Vt[Tn(ii)]}catch{}}class Jn{constructor(Vt,{delay:Qt}){this.strategy=Vt,this.options={delay:Qt}}isSupported(){return this.strategy.isSupported()}connect(Vt,Qt){var di=this.strategy,vi,$i=new qi(this.options.delay,function(){vi=di.connect(Vt,Qt)});return{abort:function(){$i.ensureAborted(),vi&&vi.abort()},forceMinPriority:function(er){Vt=er,vi&&vi.forceMinPriority(er)}}}}class Kr{constructor(Vt,Qt,di){this.test=Vt,this.trueBranch=Qt,this.falseBranch=di}isSupported(){var Vt=this.test()?this.trueBranch:this.falseBranch;return Vt.isSupported()}connect(Vt,Qt){var di=this.test()?this.trueBranch:this.falseBranch;return di.connect(Vt,Qt)}}class Vn{constructor(Vt){this.strategy=Vt}isSupported(){return this.strategy.isSupported()}connect(Vt,Qt){var di=this.strategy.connect(Vt,function(vi,$i){$i&&di.abort(),Qt(vi,$i)});return di}}function rn(ii){return function(){return ii.isSupported()}}var ms=function(ii,Vt,Qt){var di={};function vi(ts,na,Ta,Sa,Ts){var sa=Qt(ii,ts,na,Ta,Sa,Ts);return di[ts]=sa,sa}var $i=Object.assign({},Vt,{hostNonTLS:ii.wsHost+":"+ii.wsPort,hostTLS:ii.wsHost+":"+ii.wssPort,httpPath:ii.wsPath}),er=Object.assign({},$i,{useTLS:!0}),hr=Object.assign({},Vt,{hostNonTLS:ii.httpHost+":"+ii.httpPort,hostTLS:ii.httpHost+":"+ii.httpsPort,httpPath:ii.httpPath}),_r={loop:!0,timeout:15e3,timeoutLimit:6e4},Ar=new fs({minPingDelay:1e4,maxPingDelay:ii.activityTimeout}),Pr=new fs({lives:2,minPingDelay:1e4,maxPingDelay:ii.activityTimeout}),Br=vi("ws","ws",3,$i,Ar),Os=vi("wss","ws",3,er,Ar),ta=vi("sockjs","sockjs",1,hr),Ks=vi("xhr_streaming","xhr_streaming",1,hr,Pr),ya=vi("xdr_streaming","xdr_streaming",1,hr,Pr),ia=vi("xhr_polling","xhr_polling",1,hr),va=vi("xdr_polling","xdr_polling",1,hr),Xs=new Qr([Br],_r),_a=new Qr([Os],_r),ba=new Qr([ta],_r),Ys=new Qr([new Kr(rn(Ks),Ks,ya)],_r),ra=new Qr([new Kr(rn(ia),ia,va)],_r),Qs=new Qr([new Kr(rn(Ys),new Cn([Ys,new Jn(ra,{delay:4e3})]),ra)],_r),Js=new Kr(rn(Qs),Qs,ba),Ms;return Vt.useTLS?Ms=new Cn([Xs,new Jn(Js,{delay:2e3})]):Ms=new Cn([Xs,new Jn(_a,{delay:2e3}),new Jn(Js,{delay:5e3})]),new Bn(new Vn(new Kr(rn(Br),Ms,Js)),di,{ttl:18e5,timeline:Vt.timeline,useTLS:Vt.useTLS})},Pn=ms,Jr=function(){var ii=this;ii.timeline.info(ii.buildTimelineMessage({transport:ii.name+(ii.options.useTLS?"s":"")})),ii.hooks.isInitialized()?ii.changeState("initialized"):ii.hooks.file?(ii.changeState("initializing"),Ye.load(ii.hooks.file,{useTLS:ii.options.useTLS},function(Vt,Qt){ii.hooks.isInitialized()?(ii.changeState("initialized"),Qt(!0)):(Vt&&ii.onError(Vt),ii.onClose(),Qt(!1))})):ii.onClose()},gs={getRequest:function(ii){var Vt=new window.XDomainRequest;return Vt.ontimeout=function(){ii.emit("error",new Mt),ii.close()},Vt.onerror=function(Qt){ii.emit("error",Qt),ii.close()},Vt.onprogress=function(){Vt.responseText&&Vt.responseText.length>0&&ii.onChunk(200,Vt.responseText)},Vt.onload=function(){Vt.responseText&&Vt.responseText.length>0&&ii.onChunk(200,Vt.responseText),ii.emit("finished",200),ii.close()},Vt},abortRequest:function(ii){ii.ontimeout=ii.onerror=ii.onprogress=ii.onload=null,ii.abort()}},Zn=gs;const Hn=256*1024;class jn extends Wr{constructor(Vt,Qt,di){super(),this.hooks=Vt,this.method=Qt,this.url=di}start(Vt){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},zi.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(Vt)}close(){this.unloader&&(zi.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(Vt,Qt){for(;;){var di=this.advanceBuffer(Qt);if(di)this.emit("chunk",{status:Vt,data:di});else break}this.isBufferTooLong(Qt)&&this.emit("buffer_too_long")}advanceBuffer(Vt){var Qt=Vt.slice(this.position),di=Qt.indexOf(`
`);return di!==-1?(this.position+=di+1,Qt.slice(0,di)):null}isBufferTooLong(Vt){return this.position===Vt.length&&Vt.length>Hn}}var nn;(function(ii){ii[ii.CONNECTING=0]="CONNECTING",ii[ii.OPEN=1]="OPEN",ii[ii.CLOSED=3]="CLOSED"})(nn||(nn={}));var gn=nn,Is=1;class yn{constructor(Vt,Qt){this.hooks=Vt,this.session=Ur(1e3)+"/"+ti(8),this.location=js(Qt),this.readyState=gn.CONNECTING,this.openStream()}send(Vt){return this.sendRaw(JSON.stringify([Vt]))}ping(){this.hooks.sendHeartbeat(this)}close(Vt,Qt){this.onClose(Vt,Qt,!0)}sendRaw(Vt){if(this.readyState===gn.OPEN)try{return zi.createSocketRequest("POST",Ds(qs(this.location,this.session))).start(Vt),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(Vt,Qt,di){this.closeStream(),this.readyState=gn.CLOSED,this.onclose&&this.onclose({code:Vt,reason:Qt,wasClean:di})}onChunk(Vt){if(Vt.status===200){this.readyState===gn.OPEN&&this.onActivity();var Qt,di=Vt.data.slice(0,1);switch(di){case"o":Qt=JSON.parse(Vt.data.slice(1)||"{}"),this.onOpen(Qt);break;case"a":Qt=JSON.parse(Vt.data.slice(1)||"[]");for(var vi=0;vi<Qt.length;vi++)this.onEvent(Qt[vi]);break;case"m":Qt=JSON.parse(Vt.data.slice(1)||"null"),this.onEvent(Qt);break;case"h":this.hooks.onHeartbeat(this);break;case"c":Qt=JSON.parse(Vt.data.slice(1)||"[]"),this.onClose(Qt[0],Qt[1],!0);break}}}onOpen(Vt){this.readyState===gn.CONNECTING?(Vt&&Vt.hostname&&(this.location.base=es(this.location.base,Vt.hostname)),this.readyState=gn.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(Vt){this.readyState===gn.OPEN&&this.onmessage&&this.onmessage({data:Vt})}onActivity(){this.onactivity&&this.onactivity()}onError(Vt){this.onerror&&this.onerror(Vt)}openStream(){this.stream=zi.createSocketRequest("POST",Ds(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",Vt=>{this.onChunk(Vt)}),this.stream.bind("finished",Vt=>{this.hooks.onFinished(this,Vt)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(Vt){fr.defer(()=>{this.onError(Vt),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function js(ii){var Vt=/([^\?]*)\/*(\??.*)/.exec(ii);return{base:Vt[1],queryString:Vt[2]}}function qs(ii,Vt){return ii.base+"/"+Vt+"/xhr_send"}function Ds(ii){var Vt=ii.indexOf("?")===-1?"?":"&";return ii+Vt+"t="+ +new Date+"&n="+Is++}function es(ii,Vt){var Qt=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(ii);return Qt[1]+Vt+Qt[3]}function Ur(ii){return zi.randomInt(ii)}function ti(ii){for(var Vt=[],Qt=0;Qt<ii;Qt++)Vt.push(Ur(32).toString(32));return Vt.join("")}var ai=yn,ci={getReceiveURL:function(ii,Vt){return ii.base+"/"+Vt+"/xhr_streaming"+ii.queryString},onHeartbeat:function(ii){ii.sendRaw("[]")},sendHeartbeat:function(ii){ii.sendRaw("[]")},onFinished:function(ii,Vt){ii.onClose(1006,"Connection interrupted ("+Vt+")",!1)}},ui=ci,Ti={getReceiveURL:function(ii,Vt){return ii.base+"/"+Vt+"/xhr"+ii.queryString},onHeartbeat:function(){},sendHeartbeat:function(ii){ii.sendRaw("[]")},onFinished:function(ii,Vt){Vt===200?ii.reconnect():ii.onClose(1006,"Connection interrupted ("+Vt+")",!1)}},ki=Ti,Ii={getRequest:function(ii){var Vt=zi.getXHRAPI(),Qt=new Vt;return Qt.onreadystatechange=Qt.onprogress=function(){switch(Qt.readyState){case 3:Qt.responseText&&Qt.responseText.length>0&&ii.onChunk(Qt.status,Qt.responseText);break;case 4:Qt.responseText&&Qt.responseText.length>0&&ii.onChunk(Qt.status,Qt.responseText),ii.emit("finished",Qt.status),ii.close();break}},Qt},abortRequest:function(ii){ii.onreadystatechange=null,ii.abort()}},Ki=Ii,Ui={createStreamingSocket(ii){return this.createSocket(ui,ii)},createPollingSocket(ii){return this.createSocket(ki,ii)},createSocket(ii,Vt){return new ai(ii,Vt)},createXHR(ii,Vt){return this.createRequest(Ki,ii,Vt)},createRequest(ii,Vt,Qt){return new jn(ii,Vt,Qt)}},Zi=Ui;Zi.createXDR=function(ii,Vt){return this.createRequest(Zn,ii,Vt)};var tr=Zi,cr={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:R,DependenciesReceivers:Xe,getDefaultStrategy:Pn,Transports:Bs,transportConnectionInitializer:Jr,HTTPFactory:tr,TimelineTransport:Sr,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(ii){window.Pusher=ii;var Vt=()=>{this.onDocumentBody(ii.ready)};window.JSON?Vt():Ye.load("json2",{},Vt)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:wi,jsonp:vr}},onDocumentBody(ii){document.body?ii():setTimeout(()=>{this.onDocumentBody(ii)},0)},createJSONPRequest(ii,Vt){return new xr(ii,Vt)},createScriptRequest(ii){return new Er(ii)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var ii=this.getXHRAPI();return new ii},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return an},createWebSocket(ii){var Vt=this.getWebSocketAPI();return new Vt(ii)},createSocketRequest(ii,Vt){if(this.isXHRSupported())return this.HTTPFactory.createXHR(ii,Vt);if(this.isXDRSupported(Vt.indexOf("https:")===0))return this.HTTPFactory.createXDR(ii,Vt);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var ii=this.getXHRAPI();return!!ii&&new ii().withCredentials!==void 0},isXDRSupported(ii){var Vt=ii?"https:":"http:",Qt=this.getProtocol();return!!window.XDomainRequest&&Qt===Vt},addUnloadListener(ii){window.addEventListener!==void 0?window.addEventListener("unload",ii,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",ii)},removeUnloadListener(ii){window.addEventListener!==void 0?window.removeEventListener("unload",ii,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",ii)},randomInt(ii){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*ii)}},zi=cr,nr;(function(ii){ii[ii.ERROR=3]="ERROR",ii[ii.INFO=6]="INFO",ii[ii.DEBUG=7]="DEBUG"})(nr||(nr={}));var pr=nr;class wr{constructor(Vt,Qt,di){this.key=Vt,this.session=Qt,this.events=[],this.options=di||{},this.sent=0,this.uniqueID=0}log(Vt,Qt){Vt<=this.options.level&&(this.events.push(lr({},Qt,{timestamp:fr.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(Vt){this.log(pr.ERROR,Vt)}info(Vt){this.log(pr.INFO,Vt)}debug(Vt){this.log(pr.DEBUG,Vt)}isEmpty(){return this.events.length===0}send(Vt,Qt){var di=lr({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],Vt(di,(vi,$i)=>{vi||this.sent++,Qt&&Qt(vi,$i)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class dr{constructor(Vt,Qt,di,vi){this.name=Vt,this.priority=Qt,this.transport=di,this.options=vi||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(Vt,Qt){if(this.isSupported()){if(this.priority<Vt)return Tr(new Ot,Qt)}else return Tr(new si,Qt);var di=!1,vi=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),$i=null,er=function(){vi.unbind("initialized",er),vi.connect()},hr=function(){$i=mn.createHandshake(vi,function(Br){di=!0,Pr(),Qt(null,Br)})},_r=function(Br){Pr(),Qt(Br)},Ar=function(){Pr();var Br;Br=ar(vi),Qt(new Ut(Br))},Pr=function(){vi.unbind("initialized",er),vi.unbind("open",hr),vi.unbind("error",_r),vi.unbind("closed",Ar)};return vi.bind("initialized",er),vi.bind("open",hr),vi.bind("error",_r),vi.bind("closed",Ar),vi.initialize(),{abort:()=>{di||(Pr(),$i?$i.close():vi.close())},forceMinPriority:Br=>{di||this.priority<Br&&($i?$i.close():vi.close())}}}}function Tr(ii,Vt){return fr.defer(function(){Vt(ii)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:Or}=zi;var Ir=function(ii,Vt,Qt,di,vi,$i){var er=Or[Qt];if(!er)throw new ei(Qt);var hr=(!ii.enabledTransports||Yi(ii.enabledTransports,Vt)!==-1)&&(!ii.disabledTransports||Yi(ii.disabledTransports,Vt)===-1),_r;return hr?(vi=Object.assign({ignoreNullOrigin:ii.ignoreNullOrigin},vi),_r=new dr(Vt,di,$i?$i.getAssistant(er):er,vi)):_r=Lr,_r},Lr={isSupported:function(){return!1},connect:function(ii,Vt){var Qt=fr.defer(function(){Vt(new si)});return{abort:function(){Qt.ensureAborted()},forceMinPriority:function(){}}}};function Dr(ii){if(ii==null)throw"You must pass an options object";if(ii.cluster==null)throw"Options object must provide a cluster";"disableStats"in ii&&Xi.warn("The disableStats option is deprecated in favor of enableStats")}const Zr=(ii,Vt)=>{var Qt="socket_id="+encodeURIComponent(ii.socketId);for(var di in Vt.params)Qt+="&"+encodeURIComponent(di)+"="+encodeURIComponent(Vt.params[di]);if(Vt.paramsProvider!=null){let vi=Vt.paramsProvider();for(var di in vi)Qt+="&"+encodeURIComponent(di)+"="+encodeURIComponent(vi[di])}return Qt};var zs=ii=>{if(typeof zi.getAuthorizers()[ii.transport]>"u")throw`'${ii.transport}' is not a recognized auth transport`;return(Vt,Qt)=>{const di=Zr(Vt,ii);zi.getAuthorizers()[ii.transport](zi,di,ii,et.UserAuthentication,Qt)}};const ca=(ii,Vt)=>{var Qt="socket_id="+encodeURIComponent(ii.socketId);Qt+="&channel_name="+encodeURIComponent(ii.channelName);for(var di in Vt.params)Qt+="&"+encodeURIComponent(di)+"="+encodeURIComponent(Vt.params[di]);if(Vt.paramsProvider!=null){let vi=Vt.paramsProvider();for(var di in vi)Qt+="&"+encodeURIComponent(di)+"="+encodeURIComponent(vi[di])}return Qt};var ha=ii=>{if(typeof zi.getAuthorizers()[ii.transport]>"u")throw`'${ii.transport}' is not a recognized auth transport`;return(Vt,Qt)=>{const di=ca(Vt,ii);zi.getAuthorizers()[ii.transport](zi,di,ii,et.ChannelAuthorization,Qt)}};const da=(ii,Vt,Qt)=>{const di={authTransport:Vt.transport,authEndpoint:Vt.endpoint,auth:{params:Vt.params,headers:Vt.headers}};return(vi,$i)=>{const er=ii.channel(vi.channelName);Qt(er,di).authorize(vi.socketId,$i)}};function ys(ii,Vt){let Qt={activityTimeout:ii.activityTimeout||Ue.activityTimeout,cluster:ii.cluster,httpPath:ii.httpPath||Ue.httpPath,httpPort:ii.httpPort||Ue.httpPort,httpsPort:ii.httpsPort||Ue.httpsPort,pongTimeout:ii.pongTimeout||Ue.pongTimeout,statsHost:ii.statsHost||Ue.stats_host,unavailableTimeout:ii.unavailableTimeout||Ue.unavailableTimeout,wsPath:ii.wsPath||Ue.wsPath,wsPort:ii.wsPort||Ue.wsPort,wssPort:ii.wssPort||Ue.wssPort,enableStats:xn(ii),httpHost:vs(ii),useTLS:vn(ii),wsHost:_s(ii),userAuthenticator:ea(ii),channelAuthorizer:pa(ii,Vt)};return"disabledTransports"in ii&&(Qt.disabledTransports=ii.disabledTransports),"enabledTransports"in ii&&(Qt.enabledTransports=ii.enabledTransports),"ignoreNullOrigin"in ii&&(Qt.ignoreNullOrigin=ii.ignoreNullOrigin),"timelineParams"in ii&&(Qt.timelineParams=ii.timelineParams),"nacl"in ii&&(Qt.nacl=ii.nacl),Qt}function vs(ii){return ii.httpHost?ii.httpHost:ii.cluster?`sockjs-${ii.cluster}.pusher.com`:Ue.httpHost}function _s(ii){return ii.wsHost?ii.wsHost:ks(ii.cluster)}function ks(ii){return`ws-${ii}.pusher.com`}function vn(ii){return zi.getProtocol()==="https:"?!0:ii.forceTLS!==!1}function xn(ii){return"enableStats"in ii?ii.enableStats:"disableStats"in ii?!ii.disableStats:!1}const bs=ii=>"customHandler"in ii&&ii.customHandler!=null;function ea(ii){const Vt=Object.assign(Object.assign({},Ue.userAuthentication),ii.userAuthentication);return bs(Vt)?Vt.customHandler:zs(Vt)}function fa(ii,Vt){let Qt;if("channelAuthorization"in ii)Qt=Object.assign(Object.assign({},Ue.channelAuthorization),ii.channelAuthorization);else if(Qt={transport:ii.authTransport||Ue.authTransport,endpoint:ii.authEndpoint||Ue.authEndpoint},"auth"in ii&&("params"in ii.auth&&(Qt.params=ii.auth.params),"headers"in ii.auth&&(Qt.headers=ii.auth.headers)),"authorizer"in ii)return{customHandler:da(Vt,Qt,ii.authorizer)};return Qt}function pa(ii,Vt){const Qt=fa(ii,Vt);return bs(Qt)?Qt.customHandler:ha(Qt)}class ma extends Wr{constructor(Vt){super(function(Qt,di){Xi.debug(`No callbacks on watchlist events for ${Qt}`)}),this.pusher=Vt,this.bindWatchlistInternalEvent()}handleEvent(Vt){Vt.data.events.forEach(Qt=>{this.emit(Qt.name,Qt)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",Vt=>{var Qt=Vt.event;Qt==="pusher_internal:watchlist_events"&&this.handleEvent(Vt)})}}function ga(){let ii,Vt;return{promise:new Promise((di,vi)=>{ii=di,Vt=vi}),resolve:ii,reject:Vt}}var Gs=ga;class Ws extends Wr{constructor(Vt){super(function(Qt,di){Xi.debug("No callbacks on user for "+Qt)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(Qt,di)=>{if(Qt){Xi.warn(`Error during signin: ${Qt}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:di.auth,user_data:di.user_data})},this.pusher=Vt,this.pusher.connection.bind("state_change",({previous:Qt,current:di})=>{Qt!=="connected"&&di==="connected"&&this._signin(),Qt==="connected"&&di!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new ma(Vt),this.pusher.connection.bind("message",Qt=>{var di=Qt.event;di==="pusher:signin_success"&&this._onSigninSuccess(Qt.data),this.serverToUserChannel&&this.serverToUserChannel.name===Qt.channel&&this.serverToUserChannel.handleEvent(Qt)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(Vt){try{this.user_data=JSON.parse(Vt.user_data)}catch{Xi.error(`Failed parsing user data after signin: ${Vt.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Xi.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const Vt=Qt=>{Qt.subscriptionPending&&Qt.subscriptionCancelled?Qt.reinstateSubscription():!Qt.subscriptionPending&&this.pusher.connection.state==="connected"&&Qt.subscribe()};this.serverToUserChannel=new ls(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((Qt,di)=>{Qt.indexOf("pusher_internal:")===0||Qt.indexOf("pusher:")===0||this.emit(Qt,di)}),Vt(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:Vt,resolve:Qt,reject:di}=Gs();Vt.done=!1;const vi=()=>{Vt.done=!0};Vt.then(vi).catch(vi),this.signinDonePromise=Vt,this._signinDoneResolve=Qt}}class Fr{static ready(){Fr.isReady=!0;for(var Vt=0,Qt=Fr.instances.length;Vt<Qt;Vt++)Fr.instances[Vt].connect()}static getClientFeatures(){return ir(Vi({ws:zi.Transports.ws},function(Vt){return Vt.isSupported({})}))}constructor(Vt,Qt){Rs(Vt),Dr(Qt),this.key=Vt,this.options=Qt,this.config=ys(this.options,this),this.channels=mn.createChannels(),this.global_emitter=new Wr,this.sessionID=zi.randomInt(1e9),this.timeline=new wr(this.key,this.sessionID,{cluster:this.config.cluster,features:Fr.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:pr.INFO,version:Ue.VERSION}),this.config.enableStats&&(this.timelineSender=mn.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+zi.TimelineTransport.name}));var di=vi=>zi.getDefaultStrategy(this.config,vi,Ir);this.connection=mn.createConnectionManager(this.key,{getStrategy:di,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",vi=>{var $i=vi.event,er=$i.indexOf("pusher_internal:")===0;if(vi.channel){var hr=this.channel(vi.channel);hr&&hr.handleEvent(vi)}er||this.global_emitter.emit(vi.event,vi.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",vi=>{Xi.warn(vi)}),Fr.instances.push(this),this.timeline.info({instances:Fr.instances.length}),this.user=new Ws(this),Fr.isReady&&this.connect()}switchCluster(Vt){const{appKey:Qt,cluster:di}=Vt;this.key=Qt,this.options=Object.assign(Object.assign({},this.options),{cluster:di}),this.config=ys(this.options,this),this.connection.switchCluster(this.key)}channel(Vt){return this.channels.find(Vt)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var Vt=this.connection.isUsingTLS(),Qt=this.timelineSender;this.timelineSenderTimer=new sr(6e4,function(){Qt.send(Vt)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(Vt,Qt,di){return this.global_emitter.bind(Vt,Qt,di),this}unbind(Vt,Qt,di){return this.global_emitter.unbind(Vt,Qt,di),this}bind_global(Vt){return this.global_emitter.bind_global(Vt),this}unbind_global(Vt){return this.global_emitter.unbind_global(Vt),this}unbind_all(Vt){return this.global_emitter.unbind_all(),this}subscribeAll(){var Vt;for(Vt in this.channels.channels)this.channels.channels.hasOwnProperty(Vt)&&this.subscribe(Vt)}subscribe(Vt){var Qt=this.channels.add(Vt,this);return Qt.subscriptionPending&&Qt.subscriptionCancelled?Qt.reinstateSubscription():!Qt.subscriptionPending&&this.connection.state==="connected"&&Qt.subscribe(),Qt}unsubscribe(Vt){var Qt=this.channels.find(Vt);Qt&&Qt.subscriptionPending?Qt.cancelSubscription():(Qt=this.channels.remove(Vt),Qt&&Qt.subscribed&&Qt.unsubscribe())}send_event(Vt,Qt,di){return this.connection.send_event(Vt,Qt,di)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Fr.instances=[],Fr.isReady=!1,Fr.logToConsole=!1,Fr.Runtime=zi,Fr.ScriptReceivers=zi.ScriptReceivers,Fr.DependenciesReceivers=zi.DependenciesReceivers,Fr.auth_callbacks=zi.auth_callbacks;var In=E.default=Fr;function Rs(ii){if(ii==null)throw"You must pass your app key when you instantiate Pusher."}zi.setup(Fr)}])})})(pusher);var pusherExports=pusher.exports;const Pusher=getDefaultExportFromCjs(pusherExports);class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(o){return decodeURIComponent(atob(o).replace(/(.)/g,(r,S)=>{let E=S.charCodeAt(0).toString(16).toUpperCase();return E.length<2&&(E="0"+E),"%"+E}))}function base64UrlDecode(o){let r=o.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(r)}catch{return atob(r)}}function jwtDecode(o,r){if(typeof o!="string")throw new InvalidTokenError("Invalid token specified: must be a string");r||(r={});const S=r.header===!0?0:1,E=o.split(".")[S];if(typeof E!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${S+1}`);let x;try{x=base64UrlDecode(E)}catch(C){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${S+1} (${C.message})`)}try{return JSON.parse(x)}catch(C){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${S+1} (${C.message})`)}}var win;typeof window<"u"?win=window:typeof commonjsGlobal<"u"?win=commonjsGlobal:typeof self<"u"?win=self:win={};var window_1=win;const window$1$1=getDefaultExportFromCjs(window_1),__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var topLevel=typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:{},minDoc=require$$0,doccy;typeof document<"u"?doccy=document:(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"],doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc));var document_1=doccy;const document$1$1=getDefaultExportFromCjs(document_1);var lib={exports:{}};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var S=arguments[r];for(var E in S)({}).hasOwnProperty.call(S,E)&&(o[E]=S[E])}return o},_extends$3.apply(null,arguments)}const _extends$4=Object.freeze(Object.defineProperty({__proto__:null,get default(){return _extends$3}},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(_extends$4);var isFunction_1=isFunction$1,toString$1=Object.prototype.toString;function isFunction$1(o){if(!o)return!1;var r=toString$1.call(o);return r==="[object Function]"||typeof o=="function"&&r!=="[object RegExp]"||typeof window<"u"&&(o===window.setTimeout||o===window.alert||o===window.confirm||o===window.prompt)}function _createForOfIteratorHelperLoose(o,r){var S=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(S)return(S=S.call(o)).next.bind(S);if(Array.isArray(o)||(S=_unsupportedIterableToArray(o))||r){S&&(o=S);var E=0;return function(){return E>=o.length?{done:!0}:{done:!1,value:o[E++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(o,r){if(o){if(typeof o=="string")return _arrayLikeToArray(o,r);var S=Object.prototype.toString.call(o).slice(8,-1);if(S==="Object"&&o.constructor&&(S=o.constructor.name),S==="Map"||S==="Set")return Array.from(o);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return _arrayLikeToArray(o,r)}}function _arrayLikeToArray(o,r){(r==null||r>o.length)&&(r=o.length);for(var S=0,E=new Array(r);S<r;S++)E[S]=o[S];return E}var InterceptorsStorage$1=function(){function o(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var r=o.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},r.addInterceptor=function(E,x){this.typeToInterceptorsMap_.has(E)||this.typeToInterceptorsMap_.set(E,new Set);var C=this.typeToInterceptorsMap_.get(E);return C.has(x)?!1:(C.add(x),!0)},r.removeInterceptor=function(E,x){var C=this.typeToInterceptorsMap_.get(E);return C&&C.has(x)?(C.delete(x),!0):!1},r.clearInterceptorsByType=function(E){var x=this.typeToInterceptorsMap_.get(E);return x?(this.typeToInterceptorsMap_.delete(E),this.typeToInterceptorsMap_.set(E,new Set),!0):!1},r.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},r.getForType=function(E){return this.typeToInterceptorsMap_.get(E)||new Set},r.execute=function(E,x){for(var C=this.getForType(E),R=_createForOfIteratorHelperLoose(C),Ce;!(Ce=R()).done;){var Ue=Ce.value;try{x=Ue(x)}catch{}}return x},o}(),interceptors=InterceptorsStorage$1,RetryManager$1=function(){function o(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var r=o.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},r.getMaxAttempts=function(){return this.maxAttempts_},r.setMaxAttempts=function(E){this.maxAttempts_=E},r.getDelayFactor=function(){return this.delayFactor_},r.setDelayFactor=function(E){this.delayFactor_=E},r.getFuzzFactor=function(){return this.fuzzFactor_},r.setFuzzFactor=function(E){this.fuzzFactor_=E},r.getInitialDelay=function(){return this.initialDelay_},r.setInitialDelay=function(E){this.initialDelay_=E},r.createRetry=function(E){var x=E===void 0?{}:E,C=x.maxAttempts,R=x.delayFactor,Ce=x.fuzzFactor,Ue=x.initialDelay;return new Retry({maxAttempts:C||this.maxAttempts_,delayFactor:R||this.delayFactor_,fuzzFactor:Ce||this.fuzzFactor_,initialDelay:Ue||this.initialDelay_})},o}(),Retry=function(){function o(S){this.maxAttempts_=S.maxAttempts,this.delayFactor_=S.delayFactor,this.fuzzFactor_=S.fuzzFactor,this.currentDelay_=S.initialDelay,this.currentAttempt_=1}var r=o.prototype;return r.moveToNextAttempt=function(){this.currentAttempt_++;var E=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+E},r.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},r.getCurrentDelay=function(){return this.currentDelay_},r.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},r.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},r.getCurrentFuzzedDelay=function(){var E=this.getCurrentMinPossibleDelay(),x=this.getCurrentMaxPossibleDelay();return E+Math.random()*(x-E)},o}(),retry=RetryManager$1,window$3=window_1,httpResponseHandler=function(r,S){return S===void 0&&(S=!1),function(E,x,C){if(E){r(E);return}if(x.statusCode>=400&&x.statusCode<=599){var R=C;if(S)if(window$3.TextDecoder){var Ce=getCharset(x.headers&&x.headers["content-type"]);try{R=new TextDecoder(Ce).decode(C)}catch{}}else R=String.fromCharCode.apply(null,new Uint8Array(C));r({cause:R});return}r(null,C)}};function getCharset(o){return o===void 0&&(o=""),o.toLowerCase().split(";").reduce(function(r,S){var E=S.split("="),x=E[0],C=E[1];return x.trim()==="charset"?C.trim():r},"utf-8")}var httpHandler=httpResponseHandler,window$2=window_1,_extends$2=require$$1,isFunction=isFunction_1,InterceptorsStorage=interceptors,RetryManager=retry;createXHR.httpHandler=httpHandler;createXHR.requestInterceptorsStorage=new InterceptorsStorage;createXHR.responseInterceptorsStorage=new InterceptorsStorage;createXHR.retryManager=new RetryManager;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var parseHeaders=function(r){var S={};return r&&r.trim().split(`
`).forEach(function(E){var x=E.indexOf(":"),C=E.slice(0,x).trim().toLowerCase(),R=E.slice(x+1).trim();typeof S[C]>"u"?S[C]=R:Array.isArray(S[C])?S[C].push(R):S[C]=[S[C],R]}),S};lib.exports=createXHR;lib.exports.default=createXHR;createXHR.XMLHttpRequest=window$2.XMLHttpRequest||noop$1;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window$2.XDomainRequest;forEachArray(["get","put","post","patch","head","delete"],function(o){createXHR[o==="delete"?"del":o]=function(r,S,E){return S=initParams(r,S,E),S.method=o.toUpperCase(),_createXHR(S)}});function forEachArray(o,r){for(var S=0;S<o.length;S++)r(o[S])}function isEmpty(o){for(var r in o)if(o.hasOwnProperty(r))return!1;return!0}function initParams(o,r,S){var E=o;return isFunction(r)?(S=r,typeof o=="string"&&(E={uri:o})):E=_extends$2({},r,{uri:o}),E.callback=S,E}function createXHR(o,r,S){return r=initParams(o,r,S),_createXHR(r)}function _createXHR(o){if(typeof o.callback>"u")throw new Error("callback argument missing");if(o.requestType&&createXHR.requestInterceptorsStorage.getIsEnabled()){var r={uri:o.uri||o.url,headers:o.headers||{},body:o.body,metadata:o.metadata||{},retry:o.retry,timeout:o.timeout},S=createXHR.requestInterceptorsStorage.execute(o.requestType,r);o.uri=S.uri,o.headers=S.headers,o.body=S.body,o.metadata=S.metadata,o.retry=S.retry,o.timeout=S.timeout}var E=!1,x=function(Xt,ei,si){E||(E=!0,o.callback(Xt,ei,si))};function C(){je.readyState===4&&!createXHR.responseInterceptorsStorage.getIsEnabled()&&setTimeout(Ue,0)}function R(){var Ut=void 0;if(je.response?Ut=je.response:Ut=je.responseText||getXml(je),xt)try{Ut=JSON.parse(Ut)}catch{}return Ut}function Ce(Ut){if(clearTimeout(Mt),clearTimeout(o.retryTimeout),Ut instanceof Error||(Ut=new Error(""+(Ut||"Unknown XMLHttpRequest Error"))),Ut.statusCode=0,!Ye&&createXHR.retryManager.getIsEnabled()&&o.retry&&o.retry.shouldRetry()){o.retryTimeout=setTimeout(function(){o.retry.moveToNextAttempt(),o.xhr=je,_createXHR(o)},o.retry.getCurrentFuzzedDelay());return}if(o.requestType&&createXHR.responseInterceptorsStorage.getIsEnabled()){var Xt={headers:Ot.headers||{},body:Ot.body,responseUrl:je.responseURL,responseType:je.responseType},ei=createXHR.responseInterceptorsStorage.execute(o.requestType,Xt);Ot.body=ei.body,Ot.headers=ei.headers}return x(Ut,Ot)}function Ue(){if(!Ye){var Ut;clearTimeout(Mt),clearTimeout(o.retryTimeout),o.useXDR&&je.status===void 0?Ut=200:Ut=je.status===1223?204:je.status;var Xt=Ot,ei=null;if(Ut!==0?(Xt={body:R(),statusCode:Ut,method:Dt,headers:{},url:St,rawRequest:je},je.getAllResponseHeaders&&(Xt.headers=parseHeaders(je.getAllResponseHeaders()))):ei=new Error("Internal XMLHttpRequest Error"),o.requestType&&createXHR.responseInterceptorsStorage.getIsEnabled()){var si={headers:Xt.headers||{},body:Xt.body,responseUrl:je.responseURL,responseType:je.responseType},li=createXHR.responseInterceptorsStorage.execute(o.requestType,si);Xt.body=li.body,Xt.headers=li.headers}return x(ei,Xt,Xt.body)}}var je=o.xhr||null;je||(o.cors||o.useXDR?je=new createXHR.XDomainRequest:je=new createXHR.XMLHttpRequest);var Xe,Ye,St=je.url=o.uri||o.url,Dt=je.method=o.method||"GET",kt=o.body||o.data,et=je.headers=o.headers||{},Ft=!!o.sync,xt=!1,Mt,Ot={body:void 0,headers:{},statusCode:0,method:Dt,url:St,rawRequest:je};if("json"in o&&o.json!==!1&&(xt=!0,et.accept||et.Accept||(et.Accept="application/json"),Dt!=="GET"&&Dt!=="HEAD"&&(et["content-type"]||et["Content-Type"]||(et["Content-Type"]="application/json"),kt=JSON.stringify(o.json===!0?kt:o.json))),je.onreadystatechange=C,je.onload=Ue,je.onerror=Ce,je.onprogress=function(){},je.onabort=function(){Ye=!0,clearTimeout(o.retryTimeout)},je.ontimeout=Ce,je.open(Dt,St,!Ft,o.username,o.password),Ft||(je.withCredentials=!!o.withCredentials),!Ft&&o.timeout>0&&(Mt=setTimeout(function(){if(!Ye){Ye=!0,je.abort("timeout");var Ut=new Error("XMLHttpRequest timeout");Ut.code="ETIMEDOUT",Ce(Ut)}},o.timeout)),je.setRequestHeader)for(Xe in et)et.hasOwnProperty(Xe)&&je.setRequestHeader(Xe,et[Xe]);else if(o.headers&&!isEmpty(o.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in o&&(je.responseType=o.responseType),"beforeSend"in o&&typeof o.beforeSend=="function"&&o.beforeSend(je),je.send(kt||null),je}function getXml(o){try{if(o.responseType==="document")return o.responseXML;var r=o.responseXML&&o.responseXML.documentElement.nodeName==="parsererror";if(o.responseType===""&&!r)return o.responseXML}catch{}return null}function noop$1(){}var libExports=lib.exports;const XHR=getDefaultExportFromCjs(libExports);var browserIndex={exports:{}},document$1=document_1,_objCreate=Object.create||function(){function o(){}return function(r){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return o.prototype=r,new o}}();function ParsingError(o,r){this.name="ParsingError",this.code=o.code,this.message=r||o.message}ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(o){function r(E,x,C,R){return(E|0)*3600+(x|0)*60+(C|0)+(R|0)/1e3}var S=o.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return S?S[3]?r(S[1],S[2],S[3].replace(":",""),S[4]):S[1]>59?r(S[1],S[2],0,S[4]):r(0,S[1],S[2],S[4]):null}function Settings(){this.values=_objCreate(null)}Settings.prototype={set:function(o,r){!this.get(o)&&r!==""&&(this.values[o]=r)},get:function(o,r,S){return S?this.has(o)?this.values[o]:r[S]:this.has(o)?this.values[o]:r},has:function(o){return o in this.values},alt:function(o,r,S){for(var E=0;E<S.length;++E)if(r===S[E]){this.set(o,r);break}},integer:function(o,r){/^-?\d+$/.test(r)&&this.set(o,parseInt(r,10))},percent:function(o,r){return r.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(r=parseFloat(r),r>=0&&r<=100)?(this.set(o,r),!0):!1}};function parseOptions(o,r,S,E){var x=E?o.split(E):[o];for(var C in x)if(typeof x[C]=="string"){var R=x[C].split(S);if(R.length===2){var Ce=R[0].trim(),Ue=R[1].trim();r(Ce,Ue)}}}function parseCue(o,r,S){var E=o;function x(){var Ce=parseTimeStamp(o);if(Ce===null)throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+E);return o=o.replace(/^[^\sa-zA-Z-]+/,""),Ce}function C(Ce,Ue){var je=new Settings;parseOptions(Ce,function(Xe,Ye){switch(Xe){case"region":for(var St=S.length-1;St>=0;St--)if(S[St].id===Ye){je.set(Xe,S[St].region);break}break;case"vertical":je.alt(Xe,Ye,["rl","lr"]);break;case"line":var Dt=Ye.split(","),kt=Dt[0];je.integer(Xe,kt),je.percent(Xe,kt)&&je.set("snapToLines",!1),je.alt(Xe,kt,["auto"]),Dt.length===2&&je.alt("lineAlign",Dt[1],["start","center","end"]);break;case"position":Dt=Ye.split(","),je.percent(Xe,Dt[0]),Dt.length===2&&je.alt("positionAlign",Dt[1],["start","center","end"]);break;case"size":je.percent(Xe,Ye);break;case"align":je.alt(Xe,Ye,["start","center","end","left","right"]);break}},/:/,/\s/),Ue.region=je.get("region",null),Ue.vertical=je.get("vertical","");try{Ue.line=je.get("line","auto")}catch{}Ue.lineAlign=je.get("lineAlign","start"),Ue.snapToLines=je.get("snapToLines",!0),Ue.size=je.get("size",100);try{Ue.align=je.get("align","center")}catch{Ue.align=je.get("align","middle")}try{Ue.position=je.get("position","auto")}catch{Ue.position=je.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Ue.align)}Ue.positionAlign=je.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Ue.align)}function R(){o=o.replace(/^\s+/,"")}if(R(),r.startTime=x(),R(),o.substr(0,3)!=="-->")throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+E);o=o.substr(3),R(),r.endTime=x(),R(),C(o,r)}var TEXTAREA_ELEMENT=document$1.createElement&&document$1.createElement("textarea"),TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},DEFAULT_COLOR_CLASS={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},TAG_ANNOTATION={v:"title",lang:"lang"},NEEDS_PARENT={rt:"ruby"};function parseContent(o,r){function S(){if(!r)return null;function kt(Ft){return r=r.substr(Ft.length),Ft}var et=r.match(/^([^<]*)(<[^>]*>?)?/);return kt(et[1]?et[1]:et[2])}function E(kt){return TEXTAREA_ELEMENT.innerHTML=kt,kt=TEXTAREA_ELEMENT.textContent,TEXTAREA_ELEMENT.textContent="",kt}function x(kt,et){return!NEEDS_PARENT[et.localName]||NEEDS_PARENT[et.localName]===kt.localName}function C(kt,et){var Ft=TAG_NAME[kt];if(!Ft)return null;var xt=o.document.createElement(Ft),Mt=TAG_ANNOTATION[kt];return Mt&&et&&(xt[Mt]=et.trim()),xt}for(var R=o.document.createElement("div"),Ce=R,Ue,je=[];(Ue=S())!==null;){if(Ue[0]==="<"){if(Ue[1]==="/"){je.length&&je[je.length-1]===Ue.substr(2).replace(">","")&&(je.pop(),Ce=Ce.parentNode);continue}var Xe=parseTimeStamp(Ue.substr(1,Ue.length-2)),Ye;if(Xe){Ye=o.document.createProcessingInstruction("timestamp",Xe),Ce.appendChild(Ye);continue}var St=Ue.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!St||(Ye=C(St[1],St[3]),!Ye)||!x(Ce,Ye))continue;if(St[2]){var Dt=St[2].split(".");Dt.forEach(function(kt){var et=/^bg_/.test(kt),Ft=et?kt.slice(3):kt;if(DEFAULT_COLOR_CLASS.hasOwnProperty(Ft)){var xt=et?"background-color":"color",Mt=DEFAULT_COLOR_CLASS[Ft];Ye.style[xt]=Mt}}),Ye.className=Dt.join(" ")}je.push(St[1]),Ce.appendChild(Ye),Ce=Ye;continue}Ce.appendChild(o.document.createTextNode(E(Ue)))}return R}var strongRTLRanges=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(o){for(var r=0;r<strongRTLRanges.length;r++){var S=strongRTLRanges[r];if(o>=S[0]&&o<=S[1])return!0}return!1}function determineBidi(o){var r=[],S="",E;if(!o||!o.childNodes)return"ltr";function x(Ce,Ue){for(var je=Ue.childNodes.length-1;je>=0;je--)Ce.push(Ue.childNodes[je])}function C(Ce){if(!Ce||!Ce.length)return null;var Ue=Ce.pop(),je=Ue.textContent||Ue.innerText;if(je){var Xe=je.match(/^.*(\n|\r)/);return Xe?(Ce.length=0,Xe[0]):je}if(Ue.tagName==="ruby")return C(Ce);if(Ue.childNodes)return x(Ce,Ue),C(Ce)}for(x(r,o);S=C(r);)for(var R=0;R<S.length;R++)if(E=S.charCodeAt(R),isStrongRTLChar(E))return"rtl";return"ltr"}function computeLinePos(o){if(typeof o.line=="number"&&(o.snapToLines||o.line>=0&&o.line<=100))return o.line;if(!o.track||!o.track.textTrackList||!o.track.textTrackList.mediaElement)return-1;for(var r=o.track,S=r.textTrackList,E=0,x=0;x<S.length&&S[x]!==r;x++)S[x].mode==="showing"&&E++;return++E*-1}function StyleBox(){}StyleBox.prototype.applyStyles=function(o,r){r=r||this.div;for(var S in o)o.hasOwnProperty(S)&&(r.style[S]=o[S])};StyleBox.prototype.formatStyle=function(o,r){return o===0?0:o+r};function CueStyleBox(o,r,S){StyleBox.call(this),this.cue=r,this.cueDiv=parseContent(o,r.text);var E={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:r.vertical===""?"horizontal-tb":r.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(E,this.cueDiv),this.div=o.document.createElement("div"),E={direction:determineBidi(this.cueDiv),writingMode:r.vertical===""?"horizontal-tb":r.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:r.align==="middle"?"center":r.align,font:S.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(E),this.div.appendChild(this.cueDiv);var x=0;switch(r.positionAlign){case"start":case"line-left":x=r.position;break;case"center":x=r.position-r.size/2;break;case"end":case"line-right":x=r.position-r.size;break}r.vertical===""?this.applyStyles({left:this.formatStyle(x,"%"),width:this.formatStyle(r.size,"%")}):this.applyStyles({top:this.formatStyle(x,"%"),height:this.formatStyle(r.size,"%")}),this.move=function(C){this.applyStyles({top:this.formatStyle(C.top,"px"),bottom:this.formatStyle(C.bottom,"px"),left:this.formatStyle(C.left,"px"),right:this.formatStyle(C.right,"px"),height:this.formatStyle(C.height,"px"),width:this.formatStyle(C.width,"px")})}}CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(o){var r,S,E,x;if(o.div){S=o.div.offsetHeight,E=o.div.offsetWidth,x=o.div.offsetTop;var C=(C=o.div.childNodes)&&(C=C[0])&&C.getClientRects&&C.getClientRects();o=o.div.getBoundingClientRect(),r=C?Math.max(C[0]&&C[0].height||0,o.height/C.length):0}this.left=o.left,this.right=o.right,this.top=o.top||x,this.height=o.height||S,this.bottom=o.bottom||x+(o.height||S),this.width=o.width||E,this.lineHeight=r!==void 0?r:o.lineHeight}BoxPosition.prototype.move=function(o,r){switch(r=r!==void 0?r:this.lineHeight,o){case"+x":this.left+=r,this.right+=r;break;case"-x":this.left-=r,this.right-=r;break;case"+y":this.top+=r,this.bottom+=r;break;case"-y":this.top-=r,this.bottom-=r;break}};BoxPosition.prototype.overlaps=function(o){return this.left<o.right&&this.right>o.left&&this.top<o.bottom&&this.bottom>o.top};BoxPosition.prototype.overlapsAny=function(o){for(var r=0;r<o.length;r++)if(this.overlaps(o[r]))return!0;return!1};BoxPosition.prototype.within=function(o){return this.top>=o.top&&this.bottom<=o.bottom&&this.left>=o.left&&this.right<=o.right};BoxPosition.prototype.overlapsOppositeAxis=function(o,r){switch(r){case"+x":return this.left<o.left;case"-x":return this.right>o.right;case"+y":return this.top<o.top;case"-y":return this.bottom>o.bottom}};BoxPosition.prototype.intersectPercentage=function(o){var r=Math.max(0,Math.min(this.right,o.right)-Math.max(this.left,o.left)),S=Math.max(0,Math.min(this.bottom,o.bottom)-Math.max(this.top,o.top)),E=r*S;return E/(this.height*this.width)};BoxPosition.prototype.toCSSCompatValues=function(o){return{top:this.top-o.top,bottom:o.bottom-this.bottom,left:this.left-o.left,right:o.right-this.right,height:this.height,width:this.width}};BoxPosition.getSimpleBoxPosition=function(o){var r=o.div?o.div.offsetHeight:o.tagName?o.offsetHeight:0,S=o.div?o.div.offsetWidth:o.tagName?o.offsetWidth:0,E=o.div?o.div.offsetTop:o.tagName?o.offsetTop:0;o=o.div?o.div.getBoundingClientRect():o.tagName?o.getBoundingClientRect():o;var x={left:o.left,right:o.right,top:o.top||E,height:o.height||r,bottom:o.bottom||E+(o.height||r),width:o.width||S};return x};function moveBoxToLinePosition(o,r,S,E){function x(Ft,xt){for(var Mt,Ot=new BoxPosition(Ft),Ut=1,Xt=0;Xt<xt.length;Xt++){for(;Ft.overlapsOppositeAxis(S,xt[Xt])||Ft.within(S)&&Ft.overlapsAny(E);)Ft.move(xt[Xt]);if(Ft.within(S))return Ft;var ei=Ft.intersectPercentage(S);Ut>ei&&(Mt=new BoxPosition(Ft),Ut=ei),Ft=new BoxPosition(Ot)}return Mt||Ot}var C=new BoxPosition(r),R=r.cue,Ce=computeLinePos(R),Ue=[];if(R.snapToLines){var je;switch(R.vertical){case"":Ue=["+y","-y"],je="height";break;case"rl":Ue=["+x","-x"],je="width";break;case"lr":Ue=["-x","+x"],je="width";break}var Xe=C.lineHeight,Ye=Xe*Math.round(Ce),St=S[je]+Xe,Dt=Ue[0];Math.abs(Ye)>St&&(Ye=Ye<0?-1:1,Ye*=Math.ceil(St/Xe)*Xe),Ce<0&&(Ye+=R.vertical===""?S.height:S.width,Ue=Ue.reverse()),C.move(Dt,Ye)}else{var kt=C.lineHeight/S.height*100;switch(R.lineAlign){case"center":Ce-=kt/2;break;case"end":Ce-=kt;break}switch(R.vertical){case"":r.applyStyles({top:r.formatStyle(Ce,"%")});break;case"rl":r.applyStyles({left:r.formatStyle(Ce,"%")});break;case"lr":r.applyStyles({right:r.formatStyle(Ce,"%")});break}Ue=["+y","-x","+x","-y"],C=new BoxPosition(r)}var et=x(C,Ue);r.move(et.toCSSCompatValues(S))}function WebVTT$1(){}WebVTT$1.StringDecoder=function(){return{decode:function(o){if(!o)return"";if(typeof o!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(o))}}};WebVTT$1.convertCueToDOMTree=function(o,r){return!o||!r?null:parseContent(o,r)};var FONT_SIZE_PERCENT=.05,FONT_STYLE="sans-serif",CUE_BACKGROUND_PADDING="1.5%";WebVTT$1.processCues=function(o,r,S){if(!o||!r||!S)return null;for(;S.firstChild;)S.removeChild(S.firstChild);var E=o.document.createElement("div");E.style.position="absolute",E.style.left="0",E.style.right="0",E.style.top="0",E.style.bottom="0",E.style.margin=CUE_BACKGROUND_PADDING,S.appendChild(E);function x(Xe){for(var Ye=0;Ye<Xe.length;Ye++)if(Xe[Ye].hasBeenReset||!Xe[Ye].displayState)return!0;return!1}if(!x(r)){for(var C=0;C<r.length;C++)E.appendChild(r[C].displayState);return}var R=[],Ce=BoxPosition.getSimpleBoxPosition(E),Ue=Math.round(Ce.height*FONT_SIZE_PERCENT*100)/100,je={font:Ue+"px "+FONT_STYLE};(function(){for(var Xe,Ye,St=0;St<r.length;St++)Ye=r[St],Xe=new CueStyleBox(o,Ye,je),E.appendChild(Xe.div),moveBoxToLinePosition(o,Xe,Ce,R),Ye.displayState=Xe.div,R.push(BoxPosition.getSimpleBoxPosition(Xe))})()};WebVTT$1.Parser=function(o,r,S){S||(S=r,r={}),r||(r={}),this.window=o,this.vttjs=r,this.state="INITIAL",this.buffer="",this.decoder=S||new TextDecoder("utf8"),this.regionList=[]};WebVTT$1.Parser.prototype={reportOrThrowError:function(o){if(o instanceof ParsingError)this.onparsingerror&&this.onparsingerror(o);else throw o},parse:function(o){var r=this;o&&(r.buffer+=r.decoder.decode(o,{stream:!0}));function S(){for(var Xe=r.buffer,Ye=0;Ye<Xe.length&&Xe[Ye]!=="\r"&&Xe[Ye]!==`
`;)++Ye;var St=Xe.substr(0,Ye);return Xe[Ye]==="\r"&&++Ye,Xe[Ye]===`
`&&++Ye,r.buffer=Xe.substr(Ye),St}function E(Xe){var Ye=new Settings;if(parseOptions(Xe,function(Dt,kt){switch(Dt){case"id":Ye.set(Dt,kt);break;case"width":Ye.percent(Dt,kt);break;case"lines":Ye.integer(Dt,kt);break;case"regionanchor":case"viewportanchor":var et=kt.split(",");if(et.length!==2)break;var Ft=new Settings;if(Ft.percent("x",et[0]),Ft.percent("y",et[1]),!Ft.has("x")||!Ft.has("y"))break;Ye.set(Dt+"X",Ft.get("x")),Ye.set(Dt+"Y",Ft.get("y"));break;case"scroll":Ye.alt(Dt,kt,["up"]);break}},/=/,/\s/),Ye.has("id")){var St=new(r.vttjs.VTTRegion||r.window.VTTRegion);St.width=Ye.get("width",100),St.lines=Ye.get("lines",3),St.regionAnchorX=Ye.get("regionanchorX",0),St.regionAnchorY=Ye.get("regionanchorY",100),St.viewportAnchorX=Ye.get("viewportanchorX",0),St.viewportAnchorY=Ye.get("viewportanchorY",100),St.scroll=Ye.get("scroll",""),r.onregion&&r.onregion(St),r.regionList.push({id:Ye.get("id"),region:St})}}function x(Xe){var Ye=new Settings;parseOptions(Xe,function(St,Dt){switch(St){case"MPEGT":Ye.integer(St+"S",Dt);break;case"LOCA":Ye.set(St+"L",parseTimeStamp(Dt));break}},/[^\d]:/,/,/),r.ontimestampmap&&r.ontimestampmap({MPEGTS:Ye.get("MPEGTS"),LOCAL:Ye.get("LOCAL")})}function C(Xe){Xe.match(/X-TIMESTAMP-MAP/)?parseOptions(Xe,function(Ye,St){switch(Ye){case"X-TIMESTAMP-MAP":x(St);break}},/=/):parseOptions(Xe,function(Ye,St){switch(Ye){case"Region":E(St);break}},/:/)}try{var R;if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;R=S();var Ce=R.match(/^WEBVTT([ \t].*)?$/);if(!Ce||!Ce[0])throw new ParsingError(ParsingError.Errors.BadSignature);r.state="HEADER"}for(var Ue=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(Ue?Ue=!1:R=S(),r.state){case"HEADER":/:/.test(R)?C(R):R||(r.state="ID");continue;case"NOTE":R||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(R)){r.state="NOTE";break}if(!R)continue;r.cue=new(r.vttjs.VTTCue||r.window.VTTCue)(0,0,"");try{r.cue.align="center"}catch{r.cue.align="middle"}if(r.state="CUE",R.indexOf("-->")===-1){r.cue.id=R;continue}case"CUE":try{parseCue(R,r.cue,r.regionList)}catch(Xe){r.reportOrThrowError(Xe),r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var je=R.indexOf("-->")!==-1;if(!R||je&&(Ue=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+=`
`),r.cue.text+=R.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":R||(r.state="ID");continue}}}catch(Xe){r.reportOrThrowError(Xe),r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var o=this;try{if(o.buffer+=o.decoder.decode(),(o.cue||o.state==="HEADER")&&(o.buffer+=`

`,o.parse()),o.state==="INITIAL")throw new ParsingError(ParsingError.Errors.BadSignature)}catch(r){o.reportOrThrowError(r)}return o.onflush&&o.onflush(),this}};var vtt$1=WebVTT$1,autoKeyword="auto",directionSetting={"":1,lr:1,rl:1},alignSetting={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function findDirectionSetting(o){if(typeof o!="string")return!1;var r=directionSetting[o.toLowerCase()];return r?o.toLowerCase():!1}function findAlignSetting(o){if(typeof o!="string")return!1;var r=alignSetting[o.toLowerCase()];return r?o.toLowerCase():!1}function VTTCue(o,r,S){this.hasBeenReset=!1;var E="",x=!1,C=o,R=r,Ce=S,Ue=null,je="",Xe=!0,Ye="auto",St="start",Dt="auto",kt="auto",et=100,Ft="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return E},set:function(xt){E=""+xt}},pauseOnExit:{enumerable:!0,get:function(){return x},set:function(xt){x=!!xt}},startTime:{enumerable:!0,get:function(){return C},set:function(xt){if(typeof xt!="number")throw new TypeError("Start time must be set to a number.");C=xt,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return R},set:function(xt){if(typeof xt!="number")throw new TypeError("End time must be set to a number.");R=xt,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Ce},set:function(xt){Ce=""+xt,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Ue},set:function(xt){Ue=xt,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return je},set:function(xt){var Mt=findDirectionSetting(xt);if(Mt===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");je=Mt,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Xe},set:function(xt){Xe=!!xt,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return Ye},set:function(xt){if(typeof xt!="number"&&xt!==autoKeyword)throw new SyntaxError("Line: an invalid number or illegal string was specified.");Ye=xt,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return St},set:function(xt){var Mt=findAlignSetting(xt);Mt?(St=Mt,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Dt},set:function(xt){if(xt<0||xt>100)throw new Error("Position must be between 0 and 100.");Dt=xt,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return kt},set:function(xt){var Mt=findAlignSetting(xt);Mt?(kt=Mt,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return et},set:function(xt){if(xt<0||xt>100)throw new Error("Size must be between 0 and 100.");et=xt,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ft},set:function(xt){var Mt=findAlignSetting(xt);if(!Mt)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ft=Mt,this.hasBeenReset=!0}}}),this.displayState=void 0}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var vttcue=VTTCue,scrollSetting={"":!0,up:!0};function findScrollSetting(o){if(typeof o!="string")return!1;var r=scrollSetting[o.toLowerCase()];return r?o.toLowerCase():!1}function isValidPercentValue(o){return typeof o=="number"&&o>=0&&o<=100}function VTTRegion(){var o=100,r=3,S=0,E=100,x=0,C=100,R="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return o},set:function(Ce){if(!isValidPercentValue(Ce))throw new Error("Width must be between 0 and 100.");o=Ce}},lines:{enumerable:!0,get:function(){return r},set:function(Ce){if(typeof Ce!="number")throw new TypeError("Lines must be set to a number.");r=Ce}},regionAnchorY:{enumerable:!0,get:function(){return E},set:function(Ce){if(!isValidPercentValue(Ce))throw new Error("RegionAnchorX must be between 0 and 100.");E=Ce}},regionAnchorX:{enumerable:!0,get:function(){return S},set:function(Ce){if(!isValidPercentValue(Ce))throw new Error("RegionAnchorY must be between 0 and 100.");S=Ce}},viewportAnchorY:{enumerable:!0,get:function(){return C},set:function(Ce){if(!isValidPercentValue(Ce))throw new Error("ViewportAnchorY must be between 0 and 100.");C=Ce}},viewportAnchorX:{enumerable:!0,get:function(){return x},set:function(Ce){if(!isValidPercentValue(Ce))throw new Error("ViewportAnchorX must be between 0 and 100.");x=Ce}},scroll:{enumerable:!0,get:function(){return R},set:function(Ce){var Ue=findScrollSetting(Ce);Ue===!1?console.warn("Scroll: an invalid or illegal string was specified."):R=Ue}}})}var vttregion=VTTRegion,window$1=window_1,vttjs=browserIndex.exports={WebVTT:vtt$1,VTTCue:vttcue,VTTRegion:vttregion};window$1.vttjs=vttjs;window$1.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue,regionShim=vttjs.VTTRegion,nativeVTTCue=window$1.VTTCue,nativeVTTRegion=window$1.VTTRegion;vttjs.shim=function(){window$1.VTTCue=cueShim,window$1.VTTRegion=regionShim};vttjs.restore=function(){window$1.VTTCue=nativeVTTCue,window$1.VTTRegion=nativeVTTRegion};window$1.VTTCue||vttjs.shim();var browserIndexExports=browserIndex.exports;const vtt=getDefaultExportFromCjs(browserIndexExports);var DEFAULT_LOCATION="https://example.com",resolveUrl$1=function(r,S){if(/^[a-z]+:/i.test(S))return S;/^data:/.test(r)&&(r=window$1$1.location&&window$1$1.location.href||"");var E=/^\/\//.test(r),x=!window$1$1.location&&!/\/\//i.test(r);r=new window$1$1.URL(r,window$1$1.location||DEFAULT_LOCATION);var C=new URL(S,r);return x?C.href.slice(DEFAULT_LOCATION.length):E?C.href.slice(C.protocol.length):C.href},Stream=function(){function o(){this.listeners={}}var r=o.prototype;return r.on=function(E,x){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push(x)},r.off=function(E,x){if(!this.listeners[E])return!1;var C=this.listeners[E].indexOf(x);return this.listeners[E]=this.listeners[E].slice(0),this.listeners[E].splice(C,1),C>-1},r.trigger=function(E){var x=this.listeners[E];if(x)if(arguments.length===2)for(var C=x.length,R=0;R<C;++R)x[R].call(this,arguments[1]);else for(var Ce=Array.prototype.slice.call(arguments,1),Ue=x.length,je=0;je<Ue;++je)x[je].apply(this,Ce)},r.dispose=function(){this.listeners={}},r.pipe=function(E){this.on("data",function(x){E.push(x)})},o}(),atob$1=function(r){return window$1$1.atob?window$1$1.atob(r):Buffer.from(r,"base64").toString("binary")};function decodeB64ToUint8Array(o){for(var r=atob$1(o),S=new Uint8Array(r.length),E=0;E<r.length;E++)S[E]=r.charCodeAt(E);return S}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class LineStream extends Stream{constructor(){super(),this.buffer=""}push(r){let S;for(this.buffer+=r,S=this.buffer.indexOf(`
`);S>-1;S=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,S)),this.buffer=this.buffer.substring(S+1)}}const TAB="	",parseByterange=function(o){const r=/([0-9.]*)?@?([0-9.]*)?/.exec(o||""),S={};return r[1]&&(S.length=parseInt(r[1],10)),r[2]&&(S.offset=parseInt(r[2],10)),S},attributeSeparator=function(){const S="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+S+")")},parseAttributes$1=function(o){const r={};if(!o)return r;const S=o.split(attributeSeparator());let E=S.length,x;for(;E--;)S[E]!==""&&(x=/([^=]*)=(.*)/.exec(S[E]).slice(1),x[0]=x[0].replace(/^\s+|\s+$/g,""),x[1]=x[1].replace(/^\s+|\s+$/g,""),x[1]=x[1].replace(/^['"](.*)['"]$/g,"$1"),r[x[0]]=x[1]);return r},parseResolution=o=>{const r=o.split("x"),S={};return r[0]&&(S.width=parseInt(r[0],10)),r[1]&&(S.height=parseInt(r[1],10)),S};class ParseStream extends Stream{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(r){let S,E;if(r=r.trim(),r.length===0)return;if(r[0]!=="#"){this.trigger("data",{type:"uri",uri:r});return}this.tagMappers.reduce((C,R)=>{const Ce=R(r);return Ce===r?C:C.concat([Ce])},[r]).forEach(C=>{for(let R=0;R<this.customParsers.length;R++)if(this.customParsers[R].call(this,C))return;if(C.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:C.slice(1)});return}if(C=C.replace("\r",""),S=/^#EXTM3U/.exec(C),S){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(S=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(C),S){E={type:"tag",tagType:"inf"},S[1]&&(E.duration=parseFloat(S[1])),S[2]&&(E.title=S[2]),this.trigger("data",E);return}if(S=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(C),S){E={type:"tag",tagType:"targetduration"},S[1]&&(E.duration=parseInt(S[1],10)),this.trigger("data",E);return}if(S=/^#EXT-X-VERSION:([0-9.]*)?/.exec(C),S){E={type:"tag",tagType:"version"},S[1]&&(E.version=parseInt(S[1],10)),this.trigger("data",E);return}if(S=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(C),S){E={type:"tag",tagType:"media-sequence"},S[1]&&(E.number=parseInt(S[1],10)),this.trigger("data",E);return}if(S=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(C),S){E={type:"tag",tagType:"discontinuity-sequence"},S[1]&&(E.number=parseInt(S[1],10)),this.trigger("data",E);return}if(S=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(C),S){E={type:"tag",tagType:"playlist-type"},S[1]&&(E.playlistType=S[1]),this.trigger("data",E);return}if(S=/^#EXT-X-BYTERANGE:(.*)?$/.exec(C),S){E=_extends$3(parseByterange(S[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",E);return}if(S=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(C),S){E={type:"tag",tagType:"allow-cache"},S[1]&&(E.allowed=!/NO/.test(S[1])),this.trigger("data",E);return}if(S=/^#EXT-X-MAP:(.*)$/.exec(C),S){if(E={type:"tag",tagType:"map"},S[1]){const R=parseAttributes$1(S[1]);R.URI&&(E.uri=R.URI),R.BYTERANGE&&(E.byterange=parseByterange(R.BYTERANGE))}this.trigger("data",E);return}if(S=/^#EXT-X-STREAM-INF:(.*)$/.exec(C),S){E={type:"tag",tagType:"stream-inf"},S[1]&&(E.attributes=parseAttributes$1(S[1]),E.attributes.RESOLUTION&&(E.attributes.RESOLUTION=parseResolution(E.attributes.RESOLUTION)),E.attributes.BANDWIDTH&&(E.attributes.BANDWIDTH=parseInt(E.attributes.BANDWIDTH,10)),E.attributes["FRAME-RATE"]&&(E.attributes["FRAME-RATE"]=parseFloat(E.attributes["FRAME-RATE"])),E.attributes["PROGRAM-ID"]&&(E.attributes["PROGRAM-ID"]=parseInt(E.attributes["PROGRAM-ID"],10))),this.trigger("data",E);return}if(S=/^#EXT-X-MEDIA:(.*)$/.exec(C),S){E={type:"tag",tagType:"media"},S[1]&&(E.attributes=parseAttributes$1(S[1])),this.trigger("data",E);return}if(S=/^#EXT-X-ENDLIST/.exec(C),S){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(S=/^#EXT-X-DISCONTINUITY/.exec(C),S){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(S=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(C),S){E={type:"tag",tagType:"program-date-time"},S[1]&&(E.dateTimeString=S[1],E.dateTimeObject=new Date(S[1])),this.trigger("data",E);return}if(S=/^#EXT-X-KEY:(.*)$/.exec(C),S){E={type:"tag",tagType:"key"},S[1]&&(E.attributes=parseAttributes$1(S[1]),E.attributes.IV&&(E.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(E.attributes.IV=E.attributes.IV.substring(2)),E.attributes.IV=E.attributes.IV.match(/.{8}/g),E.attributes.IV[0]=parseInt(E.attributes.IV[0],16),E.attributes.IV[1]=parseInt(E.attributes.IV[1],16),E.attributes.IV[2]=parseInt(E.attributes.IV[2],16),E.attributes.IV[3]=parseInt(E.attributes.IV[3],16),E.attributes.IV=new Uint32Array(E.attributes.IV))),this.trigger("data",E);return}if(S=/^#EXT-X-START:(.*)$/.exec(C),S){E={type:"tag",tagType:"start"},S[1]&&(E.attributes=parseAttributes$1(S[1]),E.attributes["TIME-OFFSET"]=parseFloat(E.attributes["TIME-OFFSET"]),E.attributes.PRECISE=/YES/.test(E.attributes.PRECISE)),this.trigger("data",E);return}if(S=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(C),S){E={type:"tag",tagType:"cue-out-cont"},S[1]?E.data=S[1]:E.data="",this.trigger("data",E);return}if(S=/^#EXT-X-CUE-OUT:(.*)?$/.exec(C),S){E={type:"tag",tagType:"cue-out"},S[1]?E.data=S[1]:E.data="",this.trigger("data",E);return}if(S=/^#EXT-X-CUE-IN:?(.*)?$/.exec(C),S){E={type:"tag",tagType:"cue-in"},S[1]?E.data=S[1]:E.data="",this.trigger("data",E);return}if(S=/^#EXT-X-SKIP:(.*)$/.exec(C),S&&S[1]){E={type:"tag",tagType:"skip"},E.attributes=parseAttributes$1(S[1]),E.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(E.attributes["SKIPPED-SEGMENTS"]=parseInt(E.attributes["SKIPPED-SEGMENTS"],10)),E.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(E.attributes["RECENTLY-REMOVED-DATERANGES"]=E.attributes["RECENTLY-REMOVED-DATERANGES"].split(TAB)),this.trigger("data",E);return}if(S=/^#EXT-X-PART:(.*)$/.exec(C),S&&S[1]){E={type:"tag",tagType:"part"},E.attributes=parseAttributes$1(S[1]),["DURATION"].forEach(function(R){E.attributes.hasOwnProperty(R)&&(E.attributes[R]=parseFloat(E.attributes[R]))}),["INDEPENDENT","GAP"].forEach(function(R){E.attributes.hasOwnProperty(R)&&(E.attributes[R]=/YES/.test(E.attributes[R]))}),E.attributes.hasOwnProperty("BYTERANGE")&&(E.attributes.byterange=parseByterange(E.attributes.BYTERANGE)),this.trigger("data",E);return}if(S=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(C),S&&S[1]){E={type:"tag",tagType:"server-control"},E.attributes=parseAttributes$1(S[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(R){E.attributes.hasOwnProperty(R)&&(E.attributes[R]=parseFloat(E.attributes[R]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(R){E.attributes.hasOwnProperty(R)&&(E.attributes[R]=/YES/.test(E.attributes[R]))}),this.trigger("data",E);return}if(S=/^#EXT-X-PART-INF:(.*)$/.exec(C),S&&S[1]){E={type:"tag",tagType:"part-inf"},E.attributes=parseAttributes$1(S[1]),["PART-TARGET"].forEach(function(R){E.attributes.hasOwnProperty(R)&&(E.attributes[R]=parseFloat(E.attributes[R]))}),this.trigger("data",E);return}if(S=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(C),S&&S[1]){E={type:"tag",tagType:"preload-hint"},E.attributes=parseAttributes$1(S[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(R){if(E.attributes.hasOwnProperty(R)){E.attributes[R]=parseInt(E.attributes[R],10);const Ce=R==="BYTERANGE-LENGTH"?"length":"offset";E.attributes.byterange=E.attributes.byterange||{},E.attributes.byterange[Ce]=E.attributes[R],delete E.attributes[R]}}),this.trigger("data",E);return}if(S=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(C),S&&S[1]){E={type:"tag",tagType:"rendition-report"},E.attributes=parseAttributes$1(S[1]),["LAST-MSN","LAST-PART"].forEach(function(R){E.attributes.hasOwnProperty(R)&&(E.attributes[R]=parseInt(E.attributes[R],10))}),this.trigger("data",E);return}if(S=/^#EXT-X-DATERANGE:(.*)$/.exec(C),S&&S[1]){E={type:"tag",tagType:"daterange"},E.attributes=parseAttributes$1(S[1]),["ID","CLASS"].forEach(function(Ce){E.attributes.hasOwnProperty(Ce)&&(E.attributes[Ce]=String(E.attributes[Ce]))}),["START-DATE","END-DATE"].forEach(function(Ce){E.attributes.hasOwnProperty(Ce)&&(E.attributes[Ce]=new Date(E.attributes[Ce]))}),["DURATION","PLANNED-DURATION"].forEach(function(Ce){E.attributes.hasOwnProperty(Ce)&&(E.attributes[Ce]=parseFloat(E.attributes[Ce]))}),["END-ON-NEXT"].forEach(function(Ce){E.attributes.hasOwnProperty(Ce)&&(E.attributes[Ce]=/YES/i.test(E.attributes[Ce]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(Ce){E.attributes.hasOwnProperty(Ce)&&(E.attributes[Ce]=E.attributes[Ce].toString(16))});const R=/^X-([A-Z]+-)+[A-Z]+$/;for(const Ce in E.attributes){if(!R.test(Ce))continue;const Ue=/[0-9A-Fa-f]{6}/g.test(E.attributes[Ce]),je=/^\d+(\.\d+)?$/.test(E.attributes[Ce]);E.attributes[Ce]=Ue?E.attributes[Ce].toString(16):je?parseFloat(E.attributes[Ce]):String(E.attributes[Ce])}this.trigger("data",E);return}if(S=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(C),S){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(S=/^#EXT-X-I-FRAMES-ONLY/.exec(C),S){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(S=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(C),S){E={type:"tag",tagType:"content-steering"},E.attributes=parseAttributes$1(S[1]),this.trigger("data",E);return}if(S=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(C),S){E={type:"tag",tagType:"i-frame-playlist"},E.attributes=parseAttributes$1(S[1]),E.attributes.URI&&(E.uri=E.attributes.URI),E.attributes.BANDWIDTH&&(E.attributes.BANDWIDTH=parseInt(E.attributes.BANDWIDTH,10)),E.attributes.RESOLUTION&&(E.attributes.RESOLUTION=parseResolution(E.attributes.RESOLUTION)),E.attributes["AVERAGE-BANDWIDTH"]&&(E.attributes["AVERAGE-BANDWIDTH"]=parseInt(E.attributes["AVERAGE-BANDWIDTH"],10)),E.attributes["FRAME-RATE"]&&(E.attributes["FRAME-RATE"]=parseFloat(E.attributes["FRAME-RATE"])),this.trigger("data",E);return}if(S=/^#EXT-X-DEFINE:(.*)$/.exec(C),S){E={type:"tag",tagType:"define"},E.attributes=parseAttributes$1(S[1]),this.trigger("data",E);return}this.trigger("data",{type:"tag",data:C.slice(4)})})}addParser({expression:r,customType:S,dataParser:E,segment:x}){typeof E!="function"&&(E=C=>C),this.customParsers.push(C=>{if(r.exec(C))return this.trigger("data",{type:"custom",data:E(C),customType:S,segment:x}),!0})}addTagMapper({expression:r,map:S}){const E=x=>r.test(x)?S(x):x;this.tagMappers.push(E)}}const camelCase=o=>o.toLowerCase().replace(/-(\w)/g,r=>r[1].toUpperCase()),camelCaseKeys=function(o){const r={};return Object.keys(o).forEach(function(S){r[camelCase(S)]=o[S]}),r},setHoldBack=function(o){const{serverControl:r,targetDuration:S,partTargetDuration:E}=o;if(!r)return;const x="#EXT-X-SERVER-CONTROL",C="holdBack",R="partHoldBack",Ce=S&&S*3,Ue=E&&E*2;S&&!r.hasOwnProperty(C)&&(r[C]=Ce,this.trigger("info",{message:`${x} defaulting HOLD-BACK to targetDuration * 3 (${Ce}).`})),Ce&&r[C]<Ce&&(this.trigger("warn",{message:`${x} clamping HOLD-BACK (${r[C]}) to targetDuration * 3 (${Ce})`}),r[C]=Ce),E&&!r.hasOwnProperty(R)&&(r[R]=E*3,this.trigger("info",{message:`${x} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${r[R]}).`})),E&&r[R]<Ue&&(this.trigger("warn",{message:`${x} clamping PART-HOLD-BACK (${r[R]}) to partTargetDuration * 2 (${Ue}).`}),r[R]=Ue)};class Parser extends Stream{constructor(r={}){super(),this.lineStream=new LineStream,this.parseStream=new ParseStream,this.lineStream.pipe(this.parseStream),this.mainDefinitions=r.mainDefinitions||{},this.params=new URL(r.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const S=this,E=[];let x={},C,R,Ce=!1;const Ue=function(){},je={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},Xe="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let Ye=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let St=0,Dt=0;const kt={};this.on("end",()=>{x.uri||!x.parts&&!x.preloadHints||(!x.map&&C&&(x.map=C),!x.key&&R&&(x.key=R),!x.timeline&&typeof Ye=="number"&&(x.timeline=Ye),this.manifest.preloadSegment=x)}),this.parseStream.on("data",function(et){let Ft,xt;if(S.manifest.definitions){for(const Mt in S.manifest.definitions)if(et.uri&&(et.uri=et.uri.replace(`{$${Mt}}`,S.manifest.definitions[Mt])),et.attributes)for(const Ot in et.attributes)typeof et.attributes[Ot]=="string"&&(et.attributes[Ot]=et.attributes[Ot].replace(`{$${Mt}}`,S.manifest.definitions[Mt]))}({tag(){({version(){et.version&&(this.manifest.version=et.version)},"allow-cache"(){this.manifest.allowCache=et.allowed,"allowed"in et||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const Mt={};"length"in et&&(x.byterange=Mt,Mt.length=et.length,"offset"in et||(et.offset=St)),"offset"in et&&(x.byterange=Mt,Mt.offset=et.offset),St=Mt.offset+Mt.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),et.title&&(x.title=et.title),et.duration>0&&(x.duration=et.duration),et.duration===0&&(x.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=E},key(){if(!et.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(et.attributes.METHOD==="NONE"){R=null;return}if(!et.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(et.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:et.attributes};return}if(et.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:et.attributes.URI};return}if(et.attributes.KEYFORMAT===Xe){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(et.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(et.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),et.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(et.attributes.KEYID&&et.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:et.attributes.KEYFORMAT,keyId:et.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array(et.attributes.URI.split(",")[1])};return}et.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),R={method:et.attributes.METHOD||"AES-128",uri:et.attributes.URI},typeof et.attributes.IV<"u"&&(R.iv=et.attributes.IV)},"media-sequence"(){if(!isFinite(et.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+et.number});return}this.manifest.mediaSequence=et.number},"discontinuity-sequence"(){if(!isFinite(et.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+et.number});return}this.manifest.discontinuitySequence=et.number,Ye=et.number},"playlist-type"(){if(!/VOD|EVENT/.test(et.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+et.playlist});return}this.manifest.playlistType=et.playlistType},map(){C={},et.uri&&(C.uri=et.uri),et.byterange&&(C.byterange=et.byterange),R&&(C.key=R)},"stream-inf"(){if(this.manifest.playlists=E,this.manifest.mediaGroups=this.manifest.mediaGroups||je,!et.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}x.attributes||(x.attributes={}),_extends$3(x.attributes,et.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||je,!(et.attributes&&et.attributes.TYPE&&et.attributes["GROUP-ID"]&&et.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const Mt=this.manifest.mediaGroups[et.attributes.TYPE];Mt[et.attributes["GROUP-ID"]]=Mt[et.attributes["GROUP-ID"]]||{},Ft=Mt[et.attributes["GROUP-ID"]],xt={default:/yes/i.test(et.attributes.DEFAULT)},xt.default?xt.autoselect=!0:xt.autoselect=/yes/i.test(et.attributes.AUTOSELECT),et.attributes.LANGUAGE&&(xt.language=et.attributes.LANGUAGE),et.attributes.URI&&(xt.uri=et.attributes.URI),et.attributes["INSTREAM-ID"]&&(xt.instreamId=et.attributes["INSTREAM-ID"]),et.attributes.CHARACTERISTICS&&(xt.characteristics=et.attributes.CHARACTERISTICS),et.attributes.FORCED&&(xt.forced=/yes/i.test(et.attributes.FORCED)),Ft[et.attributes.NAME]=xt},discontinuity(){Ye+=1,x.discontinuity=!0,this.manifest.discontinuityStarts.push(E.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=et.dateTimeString,this.manifest.dateTimeObject=et.dateTimeObject),x.dateTimeString=et.dateTimeString,x.dateTimeObject=et.dateTimeObject;const{lastProgramDateTime:Mt}=this;this.lastProgramDateTime=new Date(et.dateTimeString).getTime(),Mt===null&&this.manifest.segments.reduceRight((Ot,Ut)=>(Ut.programDateTime=Ot-Ut.duration*1e3,Ut.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(et.duration)||et.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+et.duration});return}this.manifest.targetDuration=et.duration,setHoldBack.call(this,this.manifest)},start(){if(!et.attributes||isNaN(et.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:et.attributes["TIME-OFFSET"],precise:et.attributes.PRECISE}},"cue-out"(){x.cueOut=et.data},"cue-out-cont"(){x.cueOutCont=et.data},"cue-in"(){x.cueIn=et.data},skip(){this.manifest.skip=camelCaseKeys(et.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",et.attributes,["SKIPPED-SEGMENTS"])},part(){Ce=!0;const Mt=this.manifest.segments.length,Ot=camelCaseKeys(et.attributes);x.parts=x.parts||[],x.parts.push(Ot),Ot.byterange&&(Ot.byterange.hasOwnProperty("offset")||(Ot.byterange.offset=Dt),Dt=Ot.byterange.offset+Ot.byterange.length);const Ut=x.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${Ut} for segment #${Mt}`,et.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((Xt,ei)=>{Xt.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${ei} lacks required attribute(s): LAST-PART`})})},"server-control"(){const Mt=this.manifest.serverControl=camelCaseKeys(et.attributes);Mt.hasOwnProperty("canBlockReload")||(Mt.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),setHoldBack.call(this,this.manifest),Mt.canSkipDateranges&&!Mt.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const Mt=this.manifest.segments.length,Ot=camelCaseKeys(et.attributes),Ut=Ot.type&&Ot.type==="PART";x.preloadHints=x.preloadHints||[],x.preloadHints.push(Ot),Ot.byterange&&(Ot.byterange.hasOwnProperty("offset")||(Ot.byterange.offset=Ut?Dt:0,Ut&&(Dt=Ot.byterange.offset+Ot.byterange.length)));const Xt=x.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Xt} for segment #${Mt}`,et.attributes,["TYPE","URI"]),!!Ot.type)for(let ei=0;ei<x.preloadHints.length-1;ei++){const si=x.preloadHints[ei];si.type&&si.type===Ot.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Xt} for segment #${Mt} has the same TYPE ${Ot.type} as preload hint #${ei}`})}},"rendition-report"(){const Mt=camelCaseKeys(et.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(Mt);const Ot=this.manifest.renditionReports.length-1,Ut=["LAST-MSN","URI"];Ce&&Ut.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${Ot}`,et.attributes,Ut)},"part-inf"(){this.manifest.partInf=camelCaseKeys(et.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",et.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),setHoldBack.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(camelCaseKeys(et.attributes));const Mt=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${Mt}`,et.attributes,["ID","START-DATE"]);const Ot=this.manifest.dateRanges[Mt];Ot.endDate&&Ot.startDate&&new Date(Ot.endDate)<new Date(Ot.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),Ot.duration&&Ot.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),Ot.plannedDuration&&Ot.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const Ut=!!Ot.endOnNext;if(Ut&&!Ot.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),Ut&&(Ot.duration||Ot.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),Ot.duration&&Ot.endDate){const ei=Ot.startDate.getTime()+Ot.duration*1e3;this.manifest.dateRanges[Mt].endDate=new Date(ei)}if(!kt[Ot.id])kt[Ot.id]=Ot;else{for(const ei in kt[Ot.id])if(Ot[ei]&&JSON.stringify(kt[Ot.id][ei])!==JSON.stringify(Ot[ei])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const Xt=this.manifest.dateRanges.findIndex(ei=>ei.id===Ot.id);this.manifest.dateRanges[Xt]=_extends$3(this.manifest.dateRanges[Xt],Ot),kt[Ot.id]=_extends$3(kt[Ot.id],Ot),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=camelCaseKeys(et.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",et.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const Mt=(Ot,Ut)=>{if(Ot in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${Ot}`});return}this.manifest.definitions[Ot]=Ut};if("QUERYPARAM"in et.attributes){if("NAME"in et.attributes||"IMPORT"in et.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const Ot=this.params.get(et.attributes.QUERYPARAM);if(!Ot){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${et.attributes.QUERYPARAM}`});return}Mt(et.attributes.QUERYPARAM,decodeURIComponent(Ot));return}if("NAME"in et.attributes){if("IMPORT"in et.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in et.attributes)||typeof et.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${et.attributes.NAME}`});return}Mt(et.attributes.NAME,et.attributes.VALUE);return}if("IMPORT"in et.attributes){if(!this.mainDefinitions[et.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${et.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}Mt(et.attributes.IMPORT,this.mainDefinitions[et.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:et.attributes,uri:et.uri,timeline:Ye}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",et.attributes,["BANDWIDTH","URI"])}}[et.tagType]||Ue).call(S)},uri(){x.uri=et.uri,E.push(x),this.manifest.targetDuration&&!("duration"in x)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),x.duration=this.manifest.targetDuration),R&&(x.key=R),x.timeline=Ye,C&&(x.map=C),Dt=0,this.lastProgramDateTime!==null&&(x.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=x.duration*1e3),x={}},comment(){},custom(){et.segment?(x.custom=x.custom||{},x.custom[et.customType]=et.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[et.customType]=et.data)}})[et.type].call(S)})}requiredCompatibilityversion(r,S){(r<S||!r)&&this.trigger("warn",{message:`manifest must be at least version ${S}`})}warnOnMissingAttributes_(r,S,E){const x=[];E.forEach(function(C){S.hasOwnProperty(C)||x.push(C)}),x.length&&this.trigger("warn",{message:`${r} lacks required attribute(s): ${x.join(", ")}`})}push(r){this.lineStream.push(r)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(r){this.parseStream.addParser(r)}addTagMapper(r){this.parseStream.addTagMapper(r)}}var regexs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},mediaTypes=["video","audio","text"],upperMediaTypes=["Video","Audio","Text"],translateLegacyCodec=function(r){return r&&r.replace(/avc1\.(\d+)\.(\d+)/i,function(S,E,x){var C=("00"+Number(E).toString(16)).slice(-2),R=("00"+Number(x).toString(16)).slice(-2);return"avc1."+C+"00"+R})},parseCodecs=function(r){r===void 0&&(r="");var S=r.split(","),E=[];return S.forEach(function(x){x=x.trim();var C;mediaTypes.forEach(function(R){var Ce=regexs[R].exec(x.toLowerCase());if(!(!Ce||Ce.length<=1)){C=R;var Ue=x.substring(0,Ce[1].length),je=x.replace(Ue,"");E.push({type:Ue,details:je,mediaType:R})}}),C||E.push({type:x,details:"",mediaType:"unknown"})}),E},codecsFromDefault=function(r,S){if(!r.mediaGroups.AUDIO||!S)return null;var E=r.mediaGroups.AUDIO[S];if(!E)return null;for(var x in E){var C=E[x];if(C.default&&C.playlists)return parseCodecs(C.playlists[0].attributes.CODECS)}return null},isAudioCodec=function(r){return r===void 0&&(r=""),regexs.audio.test(r.trim().toLowerCase())},isTextCodec=function(r){return r===void 0&&(r=""),regexs.text.test(r.trim().toLowerCase())},getMimeForCodec=function(r){if(!(!r||typeof r!="string")){var S=r.toLowerCase().split(",").map(function(C){return translateLegacyCodec(C.trim())}),E="video";S.length===1&&isAudioCodec(S[0])?E="audio":S.length===1&&isTextCodec(S[0])&&(E="application");var x="mp4";return S.every(function(C){return regexs.mp4.test(C)})?x="mp4":S.every(function(C){return regexs.webm.test(C)})?x="webm":S.every(function(C){return regexs.ogg.test(C)})&&(x="ogg"),E+"/"+x+';codecs="'+r+'"'}},browserSupportsCodec=function(r,S){return r===void 0&&(r=""),S===void 0&&(S=!1),window$1$1.MediaSource&&window$1$1.MediaSource.isTypeSupported&&window$1$1.MediaSource.isTypeSupported(getMimeForCodec(r))||S&&window$1$1.ManagedMediaSource&&window$1$1.ManagedMediaSource.isTypeSupported&&window$1$1.ManagedMediaSource.isTypeSupported(getMimeForCodec(r))||!1},muxerSupportsCodec=function(r){return r===void 0&&(r=""),r.toLowerCase().split(",").every(function(S){S=S.trim();for(var E=0;E<upperMediaTypes.length;E++){var x=upperMediaTypes[E];if(regexs["muxer"+x].test(S))return!0}return!1})},DEFAULT_AUDIO_CODEC="mp4a.40.2",DEFAULT_VIDEO_CODEC="avc1.4d400d",MPEGURL_REGEX=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,DASH_REGEX=/^application\/dash\+xml/i,simpleTypeFromSourceType=function(r){return MPEGURL_REGEX.test(r)?"hls":DASH_REGEX.test(r)?"dash":r==="application/vnd.videojs.vhs+json"?"vhs-json":null},countBits=function(r){return r.toString(2).length},countBytes=function(r){return Math.ceil(countBits(r)/8)},isArrayBufferView=function(r){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer},isTypedArray=function(r){return isArrayBufferView(r)},toUint8=function(r){return r instanceof Uint8Array?r:(!Array.isArray(r)&&!isTypedArray(r)&&!(r instanceof ArrayBuffer)&&(typeof r!="number"||typeof r=="number"&&r!==r?r=0:r=[r]),new Uint8Array(r&&r.buffer||r,r&&r.byteOffset||0,r&&r.byteLength||0))},BigInt=window$1$1.BigInt||Number,BYTE_TABLE=[BigInt("0x1"),BigInt("0x100"),BigInt("0x10000"),BigInt("0x1000000"),BigInt("0x100000000"),BigInt("0x10000000000"),BigInt("0x1000000000000"),BigInt("0x100000000000000"),BigInt("0x10000000000000000")];(function(){var o=new Uint16Array([65484]),r=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);return r[0]===255?"big":r[0]===204?"little":"unknown"})();var bytesToNumber=function(r,S){var E=S===void 0?{}:S,x=E.signed,C=x===void 0?!1:x,R=E.le,Ce=R===void 0?!1:R;r=toUint8(r);var Ue=Ce?"reduce":"reduceRight",je=r[Ue]?r[Ue]:Array.prototype[Ue],Xe=je.call(r,function(St,Dt,kt){var et=Ce?kt:Math.abs(kt+1-r.length);return St+BigInt(Dt)*BYTE_TABLE[et]},BigInt(0));if(C){var Ye=BYTE_TABLE[r.length]/BigInt(2)-BigInt(1);Xe=BigInt(Xe),Xe>Ye&&(Xe-=Ye,Xe-=Ye,Xe-=BigInt(2))}return Number(Xe)},numberToBytes=function(r,S){var E={},x=E.le,C=x===void 0?!1:x;(typeof r!="bigint"&&typeof r!="number"||typeof r=="number"&&r!==r)&&(r=0),r=BigInt(r);for(var R=countBytes(r),Ce=new Uint8Array(new ArrayBuffer(R)),Ue=0;Ue<R;Ue++){var je=C?Ue:Math.abs(Ue+1-Ce.length);Ce[je]=Number(r/BYTE_TABLE[Ue]&BigInt(255)),r<0&&(Ce[je]=Math.abs(~Ce[je]),Ce[je]-=Ue===0?1:2)}return Ce},stringToBytes=function(r,S){if(typeof r!="string"&&r&&typeof r.toString=="function"&&(r=r.toString()),typeof r!="string")return new Uint8Array;S||(r=unescape(encodeURIComponent(r)));for(var E=new Uint8Array(r.length),x=0;x<r.length;x++)E[x]=r.charCodeAt(x);return E},concatTypedArrays=function(){for(var r=arguments.length,S=new Array(r),E=0;E<r;E++)S[E]=arguments[E];if(S=S.filter(function(Ce){return Ce&&(Ce.byteLength||Ce.length)&&typeof Ce!="string"}),S.length<=1)return toUint8(S[0]);var x=S.reduce(function(Ce,Ue,je){return Ce+(Ue.byteLength||Ue.length)},0),C=new Uint8Array(x),R=0;return S.forEach(function(Ce){Ce=toUint8(Ce),C.set(Ce,R),R+=Ce.byteLength}),C},bytesMatch=function(r,S,E){var x=E===void 0?{}:E,C=x.offset,R=C===void 0?0:C,Ce=x.mask,Ue=Ce===void 0?[]:Ce;r=toUint8(r),S=toUint8(S);var je=S.every?S.every:Array.prototype.every;return S.length&&r.length-R>=S.length&&je.call(S,function(Xe,Ye){var St=Ue[Ye]?Ue[Ye]&r[R+Ye]:r[R+Ye];return Xe===St})},forEachMediaGroup$1=function(r,S,E){S.forEach(function(x){for(var C in r.mediaGroups[x])for(var R in r.mediaGroups[x][C]){var Ce=r.mediaGroups[x][C][R];E(Ce,x,C,R)}})},dom$1={},conventions$2={};function find$2(o,r,S){if(S===void 0&&(S=Array.prototype),o&&typeof S.find=="function")return S.find.call(o,r);for(var E=0;E<o.length;E++)if(Object.prototype.hasOwnProperty.call(o,E)){var x=o[E];if(r.call(void 0,x,E,o))return x}}function freeze(o,r){return r===void 0&&(r=Object),r&&typeof r.freeze=="function"?r.freeze(o):o}function assign(o,r){if(o===null||typeof o!="object")throw new TypeError("target is not an object");for(var S in r)Object.prototype.hasOwnProperty.call(r,S)&&(o[S]=r[S]);return o}var MIME_TYPE=freeze({HTML:"text/html",isHTML:function(o){return o===MIME_TYPE.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),NAMESPACE$3=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(o){return o===NAMESPACE$3.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});conventions$2.assign=assign;conventions$2.find=find$2;conventions$2.freeze=freeze;conventions$2.MIME_TYPE=MIME_TYPE;conventions$2.NAMESPACE=NAMESPACE$3;var conventions$1=conventions$2,find$1=conventions$1.find,NAMESPACE$2=conventions$1.NAMESPACE;function notEmptyString(o){return o!==""}function splitOnASCIIWhitespace(o){return o?o.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}function orderedSetReducer(o,r){return o.hasOwnProperty(r)||(o[r]=!0),o}function toOrderedSet(o){if(!o)return[];var r=splitOnASCIIWhitespace(o);return Object.keys(r.reduce(orderedSetReducer,{}))}function arrayIncludes(o){return function(r){return o&&o.indexOf(r)!==-1}}function copy(o,r){for(var S in o)Object.prototype.hasOwnProperty.call(o,S)&&(r[S]=o[S])}function _extends$1(o,r){var S=o.prototype;if(!(S instanceof r)){let E=function(){};E.prototype=r.prototype,E=new E,copy(S,E),o.prototype=S=E}S.constructor!=o&&(typeof o!="function"&&console.error("unknown Class:"+o),S.constructor=o)}var NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={};ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(o,r){if(r instanceof Error)var S=r;else S=this,Error.call(this,ExceptionMessage[o]),this.message=ExceptionMessage[o],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return S.code=o,r&&(this.message=this.message+": "+r),S}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(o){return o>=0&&o<this.length?this[o]:null},toString:function(o,r){for(var S=[],E=0;E<this.length;E++)serializeToString(this[E],S,o,r);return S.join("")},filter:function(o){return Array.prototype.filter.call(this,o)},indexOf:function(o){return Array.prototype.indexOf.call(this,o)}};function LiveNodeList(o,r){this._node=o,this._refresh=r,_updateLiveList(this)}function _updateLiveList(o){var r=o._node._inc||o._node.ownerDocument._inc;if(o._inc!==r){var S=o._refresh(o._node);if(__set__(o,"length",S.length),!o.$$length||S.length<o.$$length)for(var E=S.length;E in o;E++)Object.prototype.hasOwnProperty.call(o,E)&&delete o[E];copy(S,o),o._inc=r}}LiveNodeList.prototype.item=function(o){return _updateLiveList(this),this[o]||null};_extends$1(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(o,r){for(var S=o.length;S--;)if(o[S]===r)return S}function _addNamedNode(o,r,S,E){if(E?r[_findNodeIndex(r,E)]=S:r[r.length++]=S,o){S.ownerElement=o;var x=o.ownerDocument;x&&(E&&_onRemoveAttribute(x,o,E),_onAddAttribute(x,o,S))}}function _removeNamedNode(o,r,S){var E=_findNodeIndex(r,S);if(E>=0){for(var x=r.length-1;E<x;)r[E]=r[++E];if(r.length=x,o){var C=o.ownerDocument;C&&(_onRemoveAttribute(C,o,S),S.ownerElement=null)}}else throw new DOMException(NOT_FOUND_ERR,new Error(o.tagName+"@"+S))}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(o){for(var r=this.length;r--;){var S=this[r];if(S.nodeName==o)return S}},setNamedItem:function(o){var r=o.ownerElement;if(r&&r!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var S=this.getNamedItem(o.nodeName);return _addNamedNode(this._ownerElement,this,o,S),S},setNamedItemNS:function(o){var r=o.ownerElement,S;if(r&&r!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return S=this.getNamedItemNS(o.namespaceURI,o.localName),_addNamedNode(this._ownerElement,this,o,S),S},removeNamedItem:function(o){var r=this.getNamedItem(o);return _removeNamedNode(this._ownerElement,this,r),r},removeNamedItemNS:function(o,r){var S=this.getNamedItemNS(o,r);return _removeNamedNode(this._ownerElement,this,S),S},getNamedItemNS:function(o,r){for(var S=this.length;S--;){var E=this[S];if(E.localName==r&&E.namespaceURI==o)return E}return null}};function DOMImplementation$1(){}DOMImplementation$1.prototype={hasFeature:function(o,r){return!0},createDocument:function(o,r,S){var E=new Document;if(E.implementation=this,E.childNodes=new NodeList,E.doctype=S||null,S&&E.appendChild(S),r){var x=E.createElementNS(o,r);E.appendChild(x)}return E},createDocumentType:function(o,r,S){var E=new DocumentType;return E.name=o,E.nodeName=o,E.publicId=r||"",E.systemId=S||"",E}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(o,r){return _insertBefore(this,o,r)},replaceChild:function(o,r){_insertBefore(this,o,r,assertPreReplacementValidityInDocument),r&&this.removeChild(r)},removeChild:function(o){return _removeChild(this,o)},appendChild:function(o){return this.insertBefore(o,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(o){return cloneNode(this.ownerDocument||this,this,o)},normalize:function(){for(var o=this.firstChild;o;){var r=o.nextSibling;r&&r.nodeType==TEXT_NODE&&o.nodeType==TEXT_NODE?(this.removeChild(r),o.appendData(r.data)):(o.normalize(),o=r)}},isSupported:function(o,r){return this.ownerDocument.implementation.hasFeature(o,r)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(o){for(var r=this;r;){var S=r._nsMap;if(S){for(var E in S)if(Object.prototype.hasOwnProperty.call(S,E)&&S[E]===o)return E}r=r.nodeType==ATTRIBUTE_NODE?r.ownerDocument:r.parentNode}return null},lookupNamespaceURI:function(o){for(var r=this;r;){var S=r._nsMap;if(S&&Object.prototype.hasOwnProperty.call(S,o))return S[o];r=r.nodeType==ATTRIBUTE_NODE?r.ownerDocument:r.parentNode}return null},isDefaultNamespace:function(o){var r=this.lookupPrefix(o);return r==null}};function _xmlEncoder(o){return o=="<"&&"&lt;"||o==">"&&"&gt;"||o=="&"&&"&amp;"||o=='"'&&"&quot;"||"&#"+o.charCodeAt()+";"}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(o,r){if(r(o))return!0;if(o=o.firstChild)do if(_visitNode(o,r))return!0;while(o=o.nextSibling)}function Document(){this.ownerDocument=this}function _onAddAttribute(o,r,S){o&&o._inc++;var E=S.namespaceURI;E===NAMESPACE$2.XMLNS&&(r._nsMap[S.prefix?S.localName:""]=S.value)}function _onRemoveAttribute(o,r,S,E){o&&o._inc++;var x=S.namespaceURI;x===NAMESPACE$2.XMLNS&&delete r._nsMap[S.prefix?S.localName:""]}function _onUpdateChild(o,r,S){if(o&&o._inc){o._inc++;var E=r.childNodes;if(S)E[E.length++]=S;else{for(var x=r.firstChild,C=0;x;)E[C++]=x,x=x.nextSibling;E.length=C,delete E[E.length]}}}function _removeChild(o,r){var S=r.previousSibling,E=r.nextSibling;return S?S.nextSibling=E:o.firstChild=E,E?E.previousSibling=S:o.lastChild=S,r.parentNode=null,r.previousSibling=null,r.nextSibling=null,_onUpdateChild(o.ownerDocument,o),r}function hasValidParentNodeType(o){return o&&(o.nodeType===Node.DOCUMENT_NODE||o.nodeType===Node.DOCUMENT_FRAGMENT_NODE||o.nodeType===Node.ELEMENT_NODE)}function hasInsertableNodeType(o){return o&&(isElementNode(o)||isTextNode$1(o)||isDocTypeNode(o)||o.nodeType===Node.DOCUMENT_FRAGMENT_NODE||o.nodeType===Node.COMMENT_NODE||o.nodeType===Node.PROCESSING_INSTRUCTION_NODE)}function isDocTypeNode(o){return o&&o.nodeType===Node.DOCUMENT_TYPE_NODE}function isElementNode(o){return o&&o.nodeType===Node.ELEMENT_NODE}function isTextNode$1(o){return o&&o.nodeType===Node.TEXT_NODE}function isElementInsertionPossible(o,r){var S=o.childNodes||[];if(find$1(S,isElementNode)||isDocTypeNode(r))return!1;var E=find$1(S,isDocTypeNode);return!(r&&E&&S.indexOf(E)>S.indexOf(r))}function isElementReplacementPossible(o,r){var S=o.childNodes||[];function E(C){return isElementNode(C)&&C!==r}if(find$1(S,E))return!1;var x=find$1(S,isDocTypeNode);return!(r&&x&&S.indexOf(x)>S.indexOf(r))}function assertPreInsertionValidity1to5(o,r,S){if(!hasValidParentNodeType(o))throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+o.nodeType);if(S&&S.parentNode!==o)throw new DOMException(NOT_FOUND_ERR,"child not in parent");if(!hasInsertableNodeType(r)||isDocTypeNode(r)&&o.nodeType!==Node.DOCUMENT_NODE)throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected node type "+r.nodeType+" for parent node type "+o.nodeType)}function assertPreInsertionValidityInDocument(o,r,S){var E=o.childNodes||[],x=r.childNodes||[];if(r.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var C=x.filter(isElementNode);if(C.length>1||find$1(x,isTextNode$1))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(C.length===1&&!isElementInsertionPossible(o,S))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(r)&&!isElementInsertionPossible(o,S))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(r)){if(find$1(E,isDocTypeNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var R=find$1(E,isElementNode);if(S&&E.indexOf(R)<E.indexOf(S))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!S&&R)throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function assertPreReplacementValidityInDocument(o,r,S){var E=o.childNodes||[],x=r.childNodes||[];if(r.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var C=x.filter(isElementNode);if(C.length>1||find$1(x,isTextNode$1))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(C.length===1&&!isElementReplacementPossible(o,S))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(r)&&!isElementReplacementPossible(o,S))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(r)){if(find$1(E,function(Ue){return isDocTypeNode(Ue)&&Ue!==S}))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var R=find$1(E,isElementNode);if(S&&E.indexOf(R)<E.indexOf(S))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function _insertBefore(o,r,S,E){assertPreInsertionValidity1to5(o,r,S),o.nodeType===Node.DOCUMENT_NODE&&(E||assertPreInsertionValidityInDocument)(o,r,S);var x=r.parentNode;if(x&&x.removeChild(r),r.nodeType===DOCUMENT_FRAGMENT_NODE){var C=r.firstChild;if(C==null)return r;var R=r.lastChild}else C=R=r;var Ce=S?S.previousSibling:o.lastChild;C.previousSibling=Ce,R.nextSibling=S,Ce?Ce.nextSibling=C:o.firstChild=C,S==null?o.lastChild=R:S.previousSibling=R;do C.parentNode=o;while(C!==R&&(C=C.nextSibling));return _onUpdateChild(o.ownerDocument||o,o),r.nodeType==DOCUMENT_FRAGMENT_NODE&&(r.firstChild=r.lastChild=null),r}function _appendSingleChild(o,r){return r.parentNode&&r.parentNode.removeChild(r),r.parentNode=o,r.previousSibling=o.lastChild,r.nextSibling=null,r.previousSibling?r.previousSibling.nextSibling=r:o.firstChild=r,o.lastChild=r,_onUpdateChild(o.ownerDocument,o,r),r}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(o,r){if(o.nodeType==DOCUMENT_FRAGMENT_NODE){for(var S=o.firstChild;S;){var E=S.nextSibling;this.insertBefore(S,r),S=E}return o}return _insertBefore(this,o,r),o.ownerDocument=this,this.documentElement===null&&o.nodeType===ELEMENT_NODE&&(this.documentElement=o),o},removeChild:function(o){return this.documentElement==o&&(this.documentElement=null),_removeChild(this,o)},replaceChild:function(o,r){_insertBefore(this,o,r,assertPreReplacementValidityInDocument),o.ownerDocument=this,r&&this.removeChild(r),isElementNode(o)&&(this.documentElement=o)},importNode:function(o,r){return importNode(this,o,r)},getElementById:function(o){var r=null;return _visitNode(this.documentElement,function(S){if(S.nodeType==ELEMENT_NODE&&S.getAttribute("id")==o)return r=S,!0}),r},getElementsByClassName:function(o){var r=toOrderedSet(o);return new LiveNodeList(this,function(S){var E=[];return r.length>0&&_visitNode(S.documentElement,function(x){if(x!==S&&x.nodeType===ELEMENT_NODE){var C=x.getAttribute("class");if(C){var R=o===C;if(!R){var Ce=toOrderedSet(C);R=r.every(arrayIncludes(Ce))}R&&E.push(x)}}}),E})},createElement:function(o){var r=new Element$1;r.ownerDocument=this,r.nodeName=o,r.tagName=o,r.localName=o,r.childNodes=new NodeList;var S=r.attributes=new NamedNodeMap;return S._ownerElement=r,r},createDocumentFragment:function(){var o=new DocumentFragment;return o.ownerDocument=this,o.childNodes=new NodeList,o},createTextNode:function(o){var r=new Text;return r.ownerDocument=this,r.appendData(o),r},createComment:function(o){var r=new Comment;return r.ownerDocument=this,r.appendData(o),r},createCDATASection:function(o){var r=new CDATASection;return r.ownerDocument=this,r.appendData(o),r},createProcessingInstruction:function(o,r){var S=new ProcessingInstruction;return S.ownerDocument=this,S.tagName=S.nodeName=S.target=o,S.nodeValue=S.data=r,S},createAttribute:function(o){var r=new Attr;return r.ownerDocument=this,r.name=o,r.nodeName=o,r.localName=o,r.specified=!0,r},createEntityReference:function(o){var r=new EntityReference;return r.ownerDocument=this,r.nodeName=o,r},createElementNS:function(o,r){var S=new Element$1,E=r.split(":"),x=S.attributes=new NamedNodeMap;return S.childNodes=new NodeList,S.ownerDocument=this,S.nodeName=r,S.tagName=r,S.namespaceURI=o,E.length==2?(S.prefix=E[0],S.localName=E[1]):S.localName=r,x._ownerElement=S,S},createAttributeNS:function(o,r){var S=new Attr,E=r.split(":");return S.ownerDocument=this,S.nodeName=r,S.name=r,S.namespaceURI=o,S.specified=!0,E.length==2?(S.prefix=E[0],S.localName=E[1]):S.localName=r,S}};_extends$1(Document,Node);function Element$1(){this._nsMap={}}Element$1.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(o){return this.getAttributeNode(o)!=null},getAttribute:function(o){var r=this.getAttributeNode(o);return r&&r.value||""},getAttributeNode:function(o){return this.attributes.getNamedItem(o)},setAttribute:function(o,r){var S=this.ownerDocument.createAttribute(o);S.value=S.nodeValue=""+r,this.setAttributeNode(S)},removeAttribute:function(o){var r=this.getAttributeNode(o);r&&this.removeAttributeNode(r)},appendChild:function(o){return o.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(o,null):_appendSingleChild(this,o)},setAttributeNode:function(o){return this.attributes.setNamedItem(o)},setAttributeNodeNS:function(o){return this.attributes.setNamedItemNS(o)},removeAttributeNode:function(o){return this.attributes.removeNamedItem(o.nodeName)},removeAttributeNS:function(o,r){var S=this.getAttributeNodeNS(o,r);S&&this.removeAttributeNode(S)},hasAttributeNS:function(o,r){return this.getAttributeNodeNS(o,r)!=null},getAttributeNS:function(o,r){var S=this.getAttributeNodeNS(o,r);return S&&S.value||""},setAttributeNS:function(o,r,S){var E=this.ownerDocument.createAttributeNS(o,r);E.value=E.nodeValue=""+S,this.setAttributeNode(E)},getAttributeNodeNS:function(o,r){return this.attributes.getNamedItemNS(o,r)},getElementsByTagName:function(o){return new LiveNodeList(this,function(r){var S=[];return _visitNode(r,function(E){E!==r&&E.nodeType==ELEMENT_NODE&&(o==="*"||E.tagName==o)&&S.push(E)}),S})},getElementsByTagNameNS:function(o,r){return new LiveNodeList(this,function(S){var E=[];return _visitNode(S,function(x){x!==S&&x.nodeType===ELEMENT_NODE&&(o==="*"||x.namespaceURI===o)&&(r==="*"||x.localName==r)&&E.push(x)}),E})}};Document.prototype.getElementsByTagName=Element$1.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element$1.prototype.getElementsByTagNameNS;_extends$1(Element$1,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends$1(Attr,Node);function CharacterData(){}CharacterData.prototype={data:"",substringData:function(o,r){return this.data.substring(o,o+r)},appendData:function(o){o=this.data+o,this.nodeValue=this.data=o,this.length=o.length},insertData:function(o,r){this.replaceData(o,0,r)},appendChild:function(o){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(o,r){this.replaceData(o,r,"")},replaceData:function(o,r,S){var E=this.data.substring(0,o),x=this.data.substring(o+r);S=E+S+x,this.nodeValue=this.data=S,this.length=S.length}};_extends$1(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(o){var r=this.data,S=r.substring(o);r=r.substring(0,o),this.data=this.nodeValue=r,this.length=r.length;var E=this.ownerDocument.createTextNode(S);return this.parentNode&&this.parentNode.insertBefore(E,this.nextSibling),E}};_extends$1(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends$1(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends$1(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends$1(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends$1(Notation,Node);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends$1(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends$1(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends$1(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends$1(ProcessingInstruction,Node);function XMLSerializer(){}XMLSerializer.prototype.serializeToString=function(o,r,S){return nodeSerializeToString.call(o,r,S)};Node.prototype.toString=nodeSerializeToString;function nodeSerializeToString(o,r){var S=[],E=this.nodeType==9&&this.documentElement||this,x=E.prefix,C=E.namespaceURI;if(C&&x==null){var x=E.lookupPrefix(C);if(x==null)var R=[{namespace:C,prefix:null}]}return serializeToString(this,S,o,r,R),S.join("")}function needNamespaceDefine(o,r,S){var E=o.prefix||"",x=o.namespaceURI;if(!x||E==="xml"&&x===NAMESPACE$2.XML||x===NAMESPACE$2.XMLNS)return!1;for(var C=S.length;C--;){var R=S[C];if(R.prefix===E)return R.namespace!==x}return!0}function addSerializedAttribute(o,r,S){o.push(" ",r,'="',S.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"')}function serializeToString(o,r,S,E,x){if(x||(x=[]),E)if(o=E(o),o){if(typeof o=="string"){r.push(o);return}}else return;switch(o.nodeType){case ELEMENT_NODE:var C=o.attributes,R=C.length,xt=o.firstChild,Ce=o.tagName;S=NAMESPACE$2.isHTML(o.namespaceURI)||S;var Ue=Ce;if(!S&&!o.prefix&&o.namespaceURI){for(var je,Xe=0;Xe<C.length;Xe++)if(C.item(Xe).name==="xmlns"){je=C.item(Xe).value;break}if(!je)for(var Ye=x.length-1;Ye>=0;Ye--){var St=x[Ye];if(St.prefix===""&&St.namespace===o.namespaceURI){je=St.namespace;break}}if(je!==o.namespaceURI)for(var Ye=x.length-1;Ye>=0;Ye--){var St=x[Ye];if(St.namespace===o.namespaceURI){St.prefix&&(Ue=St.prefix+":"+Ce);break}}}r.push("<",Ue);for(var Dt=0;Dt<R;Dt++){var kt=C.item(Dt);kt.prefix=="xmlns"?x.push({prefix:kt.localName,namespace:kt.value}):kt.nodeName=="xmlns"&&x.push({prefix:"",namespace:kt.value})}for(var Dt=0;Dt<R;Dt++){var kt=C.item(Dt);if(needNamespaceDefine(kt,S,x)){var et=kt.prefix||"",Ft=kt.namespaceURI;addSerializedAttribute(r,et?"xmlns:"+et:"xmlns",Ft),x.push({prefix:et,namespace:Ft})}serializeToString(kt,r,S,E,x)}if(Ce===Ue&&needNamespaceDefine(o,S,x)){var et=o.prefix||"",Ft=o.namespaceURI;addSerializedAttribute(r,et?"xmlns:"+et:"xmlns",Ft),x.push({prefix:et,namespace:Ft})}if(xt||S&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ce)){if(r.push(">"),S&&/^script$/i.test(Ce))for(;xt;)xt.data?r.push(xt.data):serializeToString(xt,r,S,E,x.slice()),xt=xt.nextSibling;else for(;xt;)serializeToString(xt,r,S,E,x.slice()),xt=xt.nextSibling;r.push("</",Ue,">")}else r.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var xt=o.firstChild;xt;)serializeToString(xt,r,S,E,x.slice()),xt=xt.nextSibling;return;case ATTRIBUTE_NODE:return addSerializedAttribute(r,o.name,o.value);case TEXT_NODE:return r.push(o.data.replace(/[<&>]/g,_xmlEncoder));case CDATA_SECTION_NODE:return r.push("<![CDATA[",o.data,"]]>");case COMMENT_NODE:return r.push("<!--",o.data,"-->");case DOCUMENT_TYPE_NODE:var Mt=o.publicId,Ot=o.systemId;if(r.push("<!DOCTYPE ",o.name),Mt)r.push(" PUBLIC ",Mt),Ot&&Ot!="."&&r.push(" ",Ot),r.push(">");else if(Ot&&Ot!=".")r.push(" SYSTEM ",Ot,">");else{var Ut=o.internalSubset;Ut&&r.push(" [",Ut,"]"),r.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return r.push("<?",o.target," ",o.data,"?>");case ENTITY_REFERENCE_NODE:return r.push("&",o.nodeName,";");default:r.push("??",o.nodeName)}}function importNode(o,r,S){var E;switch(r.nodeType){case ELEMENT_NODE:E=r.cloneNode(!1),E.ownerDocument=o;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:S=!0;break}if(E||(E=r.cloneNode(!1)),E.ownerDocument=o,E.parentNode=null,S)for(var x=r.firstChild;x;)E.appendChild(importNode(o,x,S)),x=x.nextSibling;return E}function cloneNode(o,r,S){var E=new r.constructor;for(var x in r)if(Object.prototype.hasOwnProperty.call(r,x)){var C=r[x];typeof C!="object"&&C!=E[x]&&(E[x]=C)}switch(r.childNodes&&(E.childNodes=new NodeList),E.ownerDocument=o,E.nodeType){case ELEMENT_NODE:var R=r.attributes,Ce=E.attributes=new NamedNodeMap,Ue=R.length;Ce._ownerElement=E;for(var je=0;je<Ue;je++)E.setAttributeNode(cloneNode(o,R.item(je),!0));break;case ATTRIBUTE_NODE:S=!0}if(S)for(var Xe=r.firstChild;Xe;)E.appendChild(cloneNode(o,Xe,S)),Xe=Xe.nextSibling;return E}function __set__(o,r,S){o[r]=S}try{if(Object.defineProperty){let o=function(r){switch(r.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var S=[];for(r=r.firstChild;r;)r.nodeType!==7&&r.nodeType!==8&&S.push(o(r)),r=r.nextSibling;return S.join("");default:return r.nodeValue}};Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return o(this)},set:function(r){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(r||String(r))&&this.appendChild(this.ownerDocument.createTextNode(r));break;default:this.data=r,this.value=r,this.nodeValue=r}}}),__set__=function(r,S,E){r["$$"+S]=E}}}catch{}dom$1.DocumentType=DocumentType;dom$1.DOMException=DOMException;dom$1.DOMImplementation=DOMImplementation$1;dom$1.Element=Element$1;dom$1.Node=Node;dom$1.NodeList=NodeList;dom$1.XMLSerializer=XMLSerializer;var domParser={},entities$1={};(function(o){var r=conventions$2.freeze;o.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),o.HTML_ENTITIES=r({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),o.entityMap=o.HTML_ENTITIES})(entities$1);var sax$1={},NAMESPACE$1=conventions$2.NAMESPACE,nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function ParseError$1(o,r){this.message=o,this.locator=r,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError$1)}ParseError$1.prototype=new Error;ParseError$1.prototype.name=ParseError$1.name;function XMLReader$1(){}XMLReader$1.prototype={parse:function(o,r,S){var E=this.domBuilder;E.startDocument(),_copy(r,r={}),parse$1(o,r,S,E,this.errorHandler),E.endDocument()}};function parse$1(o,r,S,E,x){function C(oi){if(oi>65535){oi-=65536;var mi=55296+(oi>>10),ri=56320+(oi&1023);return String.fromCharCode(mi,ri)}else return String.fromCharCode(oi)}function R(oi){var mi=oi.slice(1,-1);return Object.hasOwnProperty.call(S,mi)?S[mi]:mi.charAt(0)==="#"?C(parseInt(mi.substr(1).replace("x","0x"))):(x.error("entity not found:"+oi),oi)}function Ce(oi){if(oi>et){var mi=o.substring(et,oi).replace(/&#?\w+;/g,R);St&&Ue(et),E.characters(mi,0,oi-et),et=oi}}function Ue(oi,mi){for(;oi>=Xe&&(mi=Ye.exec(o));)je=mi.index,Xe=je+mi[0].length,St.lineNumber++;St.columnNumber=oi-je+1}for(var je=0,Xe=0,Ye=/.*(?:\r\n?|\n)|.*$/g,St=E.locator,Dt=[{currentNSMap:r}],kt={},et=0;;){try{var Ft=o.indexOf("<",et);if(Ft<0){if(!o.substr(et).match(/^\s*$/)){var xt=E.doc,Mt=xt.createTextNode(o.substr(et));xt.appendChild(Mt),E.currentElement=Mt}return}switch(Ft>et&&Ce(Ft),o.charAt(Ft+1)){case"/":var Pi=o.indexOf(">",Ft+3),Ot=o.substring(Ft+2,Pi).replace(/[ \t\n\r]+$/g,""),Ut=Dt.pop();Pi<0?(Ot=o.substring(Ft+2).replace(/[\s<].*/,""),x.error("end tag name: "+Ot+" is not complete:"+Ut.tagName),Pi=Ft+1+Ot.length):Ot.match(/\s</)&&(Ot=Ot.replace(/[\s<].*/,""),x.error("end tag name: "+Ot+" maybe not complete"),Pi=Ft+1+Ot.length);var Xt=Ut.localNSMap,ei=Ut.tagName==Ot,si=ei||Ut.tagName&&Ut.tagName.toLowerCase()==Ot.toLowerCase();if(si){if(E.endElement(Ut.uri,Ut.localName,Ot),Xt)for(var li in Xt)Object.prototype.hasOwnProperty.call(Xt,li)&&E.endPrefixMapping(li);ei||x.fatalError("end tag name: "+Ot+" is not match the current start tagName:"+Ut.tagName)}else Dt.push(Ut);Pi++;break;case"?":St&&Ue(Ft),Pi=parseInstruction(o,Ft,E);break;case"!":St&&Ue(Ft),Pi=parseDCC(o,Ft,E,x);break;default:St&&Ue(Ft);var bi=new ElementAttributes,wi=Dt[Dt.length-1].currentNSMap,Pi=parseElementStartPart(o,Ft,bi,wi,R,x),Ci=bi.length;if(!bi.closed&&fixSelfClosed(o,Pi,bi.tagName,kt)&&(bi.closed=!0,S.nbsp||x.warning("unclosed xml attribute")),St&&Ci){for(var Di=copyLocator(St,{}),Bi=0;Bi<Ci;Bi++){var Ri=bi[Bi];Ue(Ri.offset),Ri.locator=copyLocator(St,{})}E.locator=Di,appendElement$1(bi,E,wi)&&Dt.push(bi),E.locator=St}else appendElement$1(bi,E,wi)&&Dt.push(bi);NAMESPACE$1.isHTML(bi.uri)&&!bi.closed?Pi=parseHtmlSpecialContent(o,Pi,bi.tagName,R,E):Pi++}}catch(oi){if(oi instanceof ParseError$1)throw oi;x.error("element parse error: "+oi),Pi=-1}Pi>et?et=Pi:Ce(Math.max(Ft,et)+1)}}function copyLocator(o,r){return r.lineNumber=o.lineNumber,r.columnNumber=o.columnNumber,r}function parseElementStartPart(o,r,S,E,x,C){function R(St,Dt,kt){S.attributeNames.hasOwnProperty(St)&&C.fatalError("Attribute "+St+" redefined"),S.addValue(St,Dt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,x),kt)}for(var Ce,Ue,je=++r,Xe=S_TAG;;){var Ye=o.charAt(je);switch(Ye){case"=":if(Xe===S_ATTR)Ce=o.slice(r,je),Xe=S_EQ;else if(Xe===S_ATTR_SPACE)Xe=S_EQ;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Xe===S_EQ||Xe===S_ATTR)if(Xe===S_ATTR&&(C.warning('attribute value must after "="'),Ce=o.slice(r,je)),r=je+1,je=o.indexOf(Ye,r),je>0)Ue=o.slice(r,je),R(Ce,Ue,r-1),Xe=S_ATTR_END;else throw new Error("attribute value no end '"+Ye+"' match");else if(Xe==S_ATTR_NOQUOT_VALUE)Ue=o.slice(r,je),R(Ce,Ue,r),C.warning('attribute "'+Ce+'" missed start quot('+Ye+")!!"),r=je+1,Xe=S_ATTR_END;else throw new Error('attribute value must after "="');break;case"/":switch(Xe){case S_TAG:S.setTagName(o.slice(r,je));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:Xe=S_TAG_CLOSE,S.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:break;case S_ATTR_SPACE:S.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return C.error("unexpected end of input"),Xe==S_TAG&&S.setTagName(o.slice(r,je)),je;case">":switch(Xe){case S_TAG:S.setTagName(o.slice(r,je));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:Ue=o.slice(r,je),Ue.slice(-1)==="/"&&(S.closed=!0,Ue=Ue.slice(0,-1));case S_ATTR_SPACE:Xe===S_ATTR_SPACE&&(Ue=Ce),Xe==S_ATTR_NOQUOT_VALUE?(C.warning('attribute "'+Ue+'" missed quot(")!'),R(Ce,Ue,r)):((!NAMESPACE$1.isHTML(E[""])||!Ue.match(/^(?:disabled|checked|selected)$/i))&&C.warning('attribute "'+Ue+'" missed value!! "'+Ue+'" instead!!'),R(Ue,Ue,r));break;case S_EQ:throw new Error("attribute value missed!!")}return je;case"":Ye=" ";default:if(Ye<=" ")switch(Xe){case S_TAG:S.setTagName(o.slice(r,je)),Xe=S_TAG_SPACE;break;case S_ATTR:Ce=o.slice(r,je),Xe=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var Ue=o.slice(r,je);C.warning('attribute "'+Ue+'" missed quot(")!!'),R(Ce,Ue,r);case S_ATTR_END:Xe=S_TAG_SPACE;break}else switch(Xe){case S_ATTR_SPACE:S.tagName,(!NAMESPACE$1.isHTML(E[""])||!Ce.match(/^(?:disabled|checked|selected)$/i))&&C.warning('attribute "'+Ce+'" missed value!! "'+Ce+'" instead2!!'),R(Ce,Ce,r),r=je,Xe=S_ATTR;break;case S_ATTR_END:C.warning('attribute space is required"'+Ce+'"!!');case S_TAG_SPACE:Xe=S_ATTR,r=je;break;case S_EQ:Xe=S_ATTR_NOQUOT_VALUE,r=je;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}je++}}function appendElement$1(o,r,S){for(var E=o.tagName,x=null,Ye=o.length;Ye--;){var C=o[Ye],R=C.qName,Ce=C.value,St=R.indexOf(":");if(St>0)var Ue=C.prefix=R.slice(0,St),je=R.slice(St+1),Xe=Ue==="xmlns"&&je;else je=R,Ue=null,Xe=R==="xmlns"&&"";C.localName=je,Xe!==!1&&(x==null&&(x={},_copy(S,S={})),S[Xe]=x[Xe]=Ce,C.uri=NAMESPACE$1.XMLNS,r.startPrefixMapping(Xe,Ce))}for(var Ye=o.length;Ye--;){C=o[Ye];var Ue=C.prefix;Ue&&(Ue==="xml"&&(C.uri=NAMESPACE$1.XML),Ue!=="xmlns"&&(C.uri=S[Ue||""]))}var St=E.indexOf(":");St>0?(Ue=o.prefix=E.slice(0,St),je=o.localName=E.slice(St+1)):(Ue=null,je=o.localName=E);var Dt=o.uri=S[Ue||""];if(r.startElement(Dt,je,E,o),o.closed){if(r.endElement(Dt,je,E),x)for(Ue in x)Object.prototype.hasOwnProperty.call(x,Ue)&&r.endPrefixMapping(Ue)}else return o.currentNSMap=S,o.localNSMap=x,!0}function parseHtmlSpecialContent(o,r,S,E,x){if(/^(?:script|textarea)$/i.test(S)){var C=o.indexOf("</"+S+">",r),R=o.substring(r+1,C);if(/[&<]/.test(R))return/^script$/i.test(S)?(x.characters(R,0,R.length),C):(R=R.replace(/&#?\w+;/g,E),x.characters(R,0,R.length),C)}return r+1}function fixSelfClosed(o,r,S,E){var x=E[S];return x==null&&(x=o.lastIndexOf("</"+S+">"),x<r&&(x=o.lastIndexOf("</"+S)),E[S]=x),x<r}function _copy(o,r){for(var S in o)Object.prototype.hasOwnProperty.call(o,S)&&(r[S]=o[S])}function parseDCC(o,r,S,E){var x=o.charAt(r+2);switch(x){case"-":if(o.charAt(r+3)==="-"){var C=o.indexOf("-->",r+4);return C>r?(S.comment(o,r+4,C-r-4),C+3):(E.error("Unclosed comment"),-1)}else return-1;default:if(o.substr(r+3,6)=="CDATA["){var C=o.indexOf("]]>",r+9);return S.startCDATA(),S.characters(o,r+9,C-r-9),S.endCDATA(),C+3}var R=split(o,r),Ce=R.length;if(Ce>1&&/!doctype/i.test(R[0][0])){var Ue=R[1][0],je=!1,Xe=!1;Ce>3&&(/^public$/i.test(R[2][0])?(je=R[3][0],Xe=Ce>4&&R[4][0]):/^system$/i.test(R[2][0])&&(Xe=R[3][0]));var Ye=R[Ce-1];return S.startDTD(Ue,je,Xe),S.endDTD(),Ye.index+Ye[0].length}}return-1}function parseInstruction(o,r,S){var E=o.indexOf("?>",r);if(E){var x=o.substring(r,E).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return x?(x[0].length,S.processingInstruction(x[1],x[2]),E+2):-1}return-1}function ElementAttributes(){this.attributeNames={}}ElementAttributes.prototype={setTagName:function(o){if(!tagNamePattern.test(o))throw new Error("invalid tagName:"+o);this.tagName=o},addValue:function(o,r,S){if(!tagNamePattern.test(o))throw new Error("invalid attribute:"+o);this.attributeNames[o]=this.length,this[this.length++]={qName:o,value:r,offset:S}},length:0,getLocalName:function(o){return this[o].localName},getLocator:function(o){return this[o].locator},getQName:function(o){return this[o].qName},getURI:function(o){return this[o].uri},getValue:function(o){return this[o].value}};function split(o,r){var S,E=[],x=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(x.lastIndex=r,x.exec(o);S=x.exec(o);)if(E.push(S),S[1])return E}sax$1.XMLReader=XMLReader$1;sax$1.ParseError=ParseError$1;var conventions=conventions$2,dom=dom$1,entities=entities$1,sax=sax$1,DOMImplementation=dom.DOMImplementation,NAMESPACE=conventions.NAMESPACE,ParseError=sax.ParseError,XMLReader=sax.XMLReader;function normalizeLineEndings(o){return o.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function DOMParser$1(o){this.options=o||{locator:{}}}DOMParser$1.prototype.parseFromString=function(o,r){var S=this.options,E=new XMLReader,x=S.domBuilder||new DOMHandler,C=S.errorHandler,R=S.locator,Ce=S.xmlns||{},Ue=/\/x?html?$/.test(r),je=Ue?entities.HTML_ENTITIES:entities.XML_ENTITIES;R&&x.setDocumentLocator(R),E.errorHandler=buildErrorHandler(C,x,R),E.domBuilder=S.domBuilder||x,Ue&&(Ce[""]=NAMESPACE.HTML),Ce.xml=Ce.xml||NAMESPACE.XML;var Xe=S.normalizeLineEndings||normalizeLineEndings;return o&&typeof o=="string"?E.parse(Xe(o),Ce,je):E.errorHandler.error("invalid doc source"),x.doc};function buildErrorHandler(o,r,S){if(!o){if(r instanceof DOMHandler)return r;o=r}var E={},x=o instanceof Function;S=S||{};function C(R){var Ce=o[R];!Ce&&x&&(Ce=o.length==2?function(Ue){o(R,Ue)}:o),E[R]=Ce&&function(Ue){Ce("[xmldom "+R+"]	"+Ue+_locator(S))}||function(){}}return C("warning"),C("error"),C("fatalError"),E}function DOMHandler(){this.cdata=!1}function position(o,r){r.lineNumber=o.lineNumber,r.columnNumber=o.columnNumber}DOMHandler.prototype={startDocument:function(){this.doc=new DOMImplementation().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(o,r,S,E){var x=this.doc,C=x.createElementNS(o,S||r),R=E.length;appendElement(this,C),this.currentElement=C,this.locator&&position(this.locator,C);for(var Ce=0;Ce<R;Ce++){var o=E.getURI(Ce),Ue=E.getValue(Ce),S=E.getQName(Ce),je=x.createAttributeNS(o,S);this.locator&&position(E.getLocator(Ce),je),je.value=je.nodeValue=Ue,C.setAttributeNode(je)}},endElement:function(o,r,S){var E=this.currentElement;E.tagName,this.currentElement=E.parentNode},startPrefixMapping:function(o,r){},endPrefixMapping:function(o){},processingInstruction:function(o,r){var S=this.doc.createProcessingInstruction(o,r);this.locator&&position(this.locator,S),appendElement(this,S)},ignorableWhitespace:function(o,r,S){},characters:function(o,r,S){if(o=_toString.apply(this,arguments),o){if(this.cdata)var E=this.doc.createCDATASection(o);else var E=this.doc.createTextNode(o);this.currentElement?this.currentElement.appendChild(E):/^\s*$/.test(o)&&this.doc.appendChild(E),this.locator&&position(this.locator,E)}},skippedEntity:function(o){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(o){(this.locator=o)&&(o.lineNumber=0)},comment:function(o,r,S){o=_toString.apply(this,arguments);var E=this.doc.createComment(o);this.locator&&position(this.locator,E),appendElement(this,E)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(o,r,S){var E=this.doc.implementation;if(E&&E.createDocumentType){var x=E.createDocumentType(o,r,S);this.locator&&position(this.locator,x),appendElement(this,x),this.doc.doctype=x}},warning:function(o){console.warn("[xmldom warning]	"+o,_locator(this.locator))},error:function(o){console.error("[xmldom error]	"+o,_locator(this.locator))},fatalError:function(o){throw new ParseError(o,this.locator)}};function _locator(o){if(o)return`
@`+(o.systemId||"")+"#[line:"+o.lineNumber+",col:"+o.columnNumber+"]"}function _toString(o,r,S){return typeof o=="string"?o.substr(r,S):o.length>=r+S||r?new java.lang.String(o,r,S)+"":o}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(o){DOMHandler.prototype[o]=function(){return null}});function appendElement(o,r){o.currentElement?o.currentElement.appendChild(r):o.doc.appendChild(r)}domParser.__DOMHandler=DOMHandler;domParser.normalizeLineEndings=normalizeLineEndings;domParser.DOMParser=DOMParser$1;var DOMParser=domParser.DOMParser;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const isObject$1=o=>!!o&&typeof o=="object",merge$2=(...o)=>o.reduce((r,S)=>(typeof S!="object"||Object.keys(S).forEach(E=>{Array.isArray(r[E])&&Array.isArray(S[E])?r[E]=r[E].concat(S[E]):isObject$1(r[E])&&isObject$1(S[E])?r[E]=merge$2(r[E],S[E]):r[E]=S[E]}),r),{}),values$1=o=>Object.keys(o).map(r=>o[r]),range=(o,r)=>{const S=[];for(let E=o;E<r;E++)S.push(E);return S},flatten=o=>o.reduce((r,S)=>r.concat(S),[]),from=o=>{if(!o.length)return[];const r=[];for(let S=0;S<o.length;S++)r.push(o[S]);return r},findIndexes=(o,r)=>o.reduce((S,E,x)=>(E[r]&&S.push(x),S),[]),union=(o,r)=>values$1(o.reduce((S,E)=>(E.forEach(x=>{S[r(x)]=x}),S),{}));var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const urlTypeToSegment=({baseUrl:o="",source:r="",range:S="",indexRange:E=""})=>{const x={uri:r,resolvedUri:resolveUrl$1(o||"",r)};if(S||E){const R=(S||E).split("-");let Ce=window$1$1.BigInt?window$1$1.BigInt(R[0]):parseInt(R[0],10),Ue=window$1$1.BigInt?window$1$1.BigInt(R[1]):parseInt(R[1],10);Ce<Number.MAX_SAFE_INTEGER&&typeof Ce=="bigint"&&(Ce=Number(Ce)),Ue<Number.MAX_SAFE_INTEGER&&typeof Ue=="bigint"&&(Ue=Number(Ue));let je;typeof Ue=="bigint"||typeof Ce=="bigint"?je=window$1$1.BigInt(Ue)-window$1$1.BigInt(Ce)+window$1$1.BigInt(1):je=Ue-Ce+1,typeof je=="bigint"&&je<Number.MAX_SAFE_INTEGER&&(je=Number(je)),x.byterange={length:je,offset:Ce}}return x},byteRangeToString=o=>{let r;return typeof o.offset=="bigint"||typeof o.length=="bigint"?r=window$1$1.BigInt(o.offset)+window$1$1.BigInt(o.length)-window$1$1.BigInt(1):r=o.offset+o.length-1,`${o.offset}-${r}`},parseEndNumber=o=>(o&&typeof o!="number"&&(o=parseInt(o,10)),isNaN(o)?null:o),segmentRange={static(o){const{duration:r,timescale:S=1,sourceDuration:E,periodDuration:x}=o,C=parseEndNumber(o.endNumber),R=r/S;return typeof C=="number"?{start:0,end:C}:typeof x=="number"?{start:0,end:x/R}:{start:0,end:E/R}},dynamic(o){const{NOW:r,clientOffset:S,availabilityStartTime:E,timescale:x=1,duration:C,periodStart:R=0,minimumUpdatePeriod:Ce=0,timeShiftBufferDepth:Ue=1/0}=o,je=parseEndNumber(o.endNumber),Xe=(r+S)/1e3,Ye=E+R,Dt=Xe+Ce-Ye,kt=Math.ceil(Dt*x/C),et=Math.floor((Xe-Ye-Ue)*x/C),Ft=Math.floor((Xe-Ye)*x/C);return{start:Math.max(0,et),end:typeof je=="number"?je:Math.min(kt,Ft)}}},toSegments=o=>r=>{const{duration:S,timescale:E=1,periodStart:x,startNumber:C=1}=o;return{number:C+r,duration:S/E,timeline:x,time:r*S}},parseByDuration=o=>{const{type:r,duration:S,timescale:E=1,periodDuration:x,sourceDuration:C}=o,{start:R,end:Ce}=segmentRange[r](o),Ue=range(R,Ce).map(toSegments(o));if(r==="static"){const je=Ue.length-1,Xe=typeof x=="number"?x:C;Ue[je].duration=Xe-S/E*je}return Ue},segmentsFromBase=o=>{const{baseUrl:r,initialization:S={},sourceDuration:E,indexRange:x="",periodStart:C,presentationTime:R,number:Ce=0,duration:Ue}=o;if(!r)throw new Error(errors.NO_BASE_URL);const je=urlTypeToSegment({baseUrl:r,source:S.sourceURL,range:S.range}),Xe=urlTypeToSegment({baseUrl:r,source:r,indexRange:x});if(Xe.map=je,Ue){const Ye=parseByDuration(o);Ye.length&&(Xe.duration=Ye[0].duration,Xe.timeline=Ye[0].timeline)}else E&&(Xe.duration=E,Xe.timeline=C);return Xe.presentationTime=R||C,Xe.number=Ce,[Xe]},addSidxSegmentsToPlaylist$1=(o,r,S)=>{const E=o.sidx.map?o.sidx.map:null,x=o.sidx.duration,C=o.timeline||0,R=o.sidx.byterange,Ce=R.offset+R.length,Ue=r.timescale,je=r.references.filter(Ft=>Ft.referenceType!==1),Xe=[],Ye=o.endList?"static":"dynamic",St=o.sidx.timeline;let Dt=St,kt=o.mediaSequence||0,et;typeof r.firstOffset=="bigint"?et=window$1$1.BigInt(Ce)+r.firstOffset:et=Ce+r.firstOffset;for(let Ft=0;Ft<je.length;Ft++){const xt=r.references[Ft],Mt=xt.referencedSize,Ot=xt.subsegmentDuration;let Ut;typeof et=="bigint"?Ut=et+window$1$1.BigInt(Mt)-window$1$1.BigInt(1):Ut=et+Mt-1;const Xt=`${et}-${Ut}`,si=segmentsFromBase({baseUrl:S,timescale:Ue,timeline:C,periodStart:St,presentationTime:Dt,number:kt,duration:Ot,sourceDuration:x,indexRange:Xt,type:Ye})[0];E&&(si.map=E),Xe.push(si),typeof et=="bigint"?et+=window$1$1.BigInt(Mt):et+=Mt,Dt+=Ot/Ue,kt++}return o.segments=Xe,o},SUPPORTED_MEDIA_TYPES=["AUDIO","SUBTITLES"],TIME_FUDGE=1/60,getUniqueTimelineStarts=o=>union(o,({timeline:r})=>r).sort((r,S)=>r.timeline>S.timeline?1:-1),findPlaylistWithName=(o,r)=>{for(let S=0;S<o.length;S++)if(o[S].attributes.NAME===r)return o[S];return null},getMediaGroupPlaylists=o=>{let r=[];return forEachMediaGroup$1(o,SUPPORTED_MEDIA_TYPES,(S,E,x,C)=>{r=r.concat(S.playlists||[])}),r},updateMediaSequenceForPlaylist=({playlist:o,mediaSequence:r})=>{o.mediaSequence=r,o.segments.forEach((S,E)=>{S.number=o.mediaSequence+E})},updateSequenceNumbers=({oldPlaylists:o,newPlaylists:r,timelineStarts:S})=>{r.forEach(E=>{E.discontinuitySequence=S.findIndex(function({timeline:Ue}){return Ue===E.timeline});const x=findPlaylistWithName(o,E.attributes.NAME);if(!x||E.sidx)return;const C=E.segments[0],R=x.segments.findIndex(function(Ue){return Math.abs(Ue.presentationTime-C.presentationTime)<TIME_FUDGE});if(R===-1){updateMediaSequenceForPlaylist({playlist:E,mediaSequence:x.mediaSequence+x.segments.length}),E.segments[0].discontinuity=!0,E.discontinuityStarts.unshift(0),(!x.segments.length&&E.timeline>x.timeline||x.segments.length&&E.timeline>x.segments[x.segments.length-1].timeline)&&E.discontinuitySequence--;return}x.segments[R].discontinuity&&!C.discontinuity&&(C.discontinuity=!0,E.discontinuityStarts.unshift(0),E.discontinuitySequence--),updateMediaSequenceForPlaylist({playlist:E,mediaSequence:x.segments[R].number})})},positionManifestOnTimeline=({oldManifest:o,newManifest:r})=>{const S=o.playlists.concat(getMediaGroupPlaylists(o)),E=r.playlists.concat(getMediaGroupPlaylists(r));return r.timelineStarts=getUniqueTimelineStarts([o.timelineStarts,r.timelineStarts]),updateSequenceNumbers({oldPlaylists:S,newPlaylists:E,timelineStarts:r.timelineStarts}),r},generateSidxKey=o=>o&&o.uri+"-"+byteRangeToString(o.byterange),mergeDiscontiguousPlaylists=o=>{const r=o.reduce(function(E,x){return E[x.attributes.baseUrl]||(E[x.attributes.baseUrl]=[]),E[x.attributes.baseUrl].push(x),E},{});let S=[];return Object.values(r).forEach(E=>{const x=values$1(E.reduce((C,R)=>{const Ce=R.attributes.id+(R.attributes.lang||"");return C[Ce]?(R.segments&&(R.segments[0]&&(R.segments[0].discontinuity=!0),C[Ce].segments.push(...R.segments)),R.attributes.contentProtection&&(C[Ce].attributes.contentProtection=R.attributes.contentProtection)):(C[Ce]=R,C[Ce].attributes.timelineStarts=[]),C[Ce].attributes.timelineStarts.push({start:R.attributes.periodStart,timeline:R.attributes.periodStart}),C},{}));S=S.concat(x)}),S.map(E=>(E.discontinuityStarts=findIndexes(E.segments||[],"discontinuity"),E))},addSidxSegmentsToPlaylist=(o,r)=>{const S=generateSidxKey(o.sidx),E=S&&r[S]&&r[S].sidx;return E&&addSidxSegmentsToPlaylist$1(o,E,o.sidx.resolvedUri),o},addSidxSegmentsToPlaylists=(o,r={})=>{if(!Object.keys(r).length)return o;for(const S in o)o[S]=addSidxSegmentsToPlaylist(o[S],r);return o},formatAudioPlaylist=({attributes:o,segments:r,sidx:S,mediaSequence:E,discontinuitySequence:x,discontinuityStarts:C},R)=>{const Ce={attributes:{NAME:o.id,BANDWIDTH:o.bandwidth,CODECS:o.codecs,"PROGRAM-ID":1},uri:"",endList:o.type==="static",timeline:o.periodStart,resolvedUri:o.baseUrl||"",targetDuration:o.duration,discontinuitySequence:x,discontinuityStarts:C,timelineStarts:o.timelineStarts,mediaSequence:E,segments:r};return o.contentProtection&&(Ce.contentProtection=o.contentProtection),o.serviceLocation&&(Ce.attributes.serviceLocation=o.serviceLocation),S&&(Ce.sidx=S),R&&(Ce.attributes.AUDIO="audio",Ce.attributes.SUBTITLES="subs"),Ce},formatVttPlaylist=({attributes:o,segments:r,mediaSequence:S,discontinuityStarts:E,discontinuitySequence:x})=>{typeof r>"u"&&(r=[{uri:o.baseUrl,timeline:o.periodStart,resolvedUri:o.baseUrl||"",duration:o.sourceDuration,number:0}],o.duration=o.sourceDuration);const C={NAME:o.id,BANDWIDTH:o.bandwidth,"PROGRAM-ID":1};o.codecs&&(C.CODECS=o.codecs);const R={attributes:C,uri:"",endList:o.type==="static",timeline:o.periodStart,resolvedUri:o.baseUrl||"",targetDuration:o.duration,timelineStarts:o.timelineStarts,discontinuityStarts:E,discontinuitySequence:x,mediaSequence:S,segments:r};return o.serviceLocation&&(R.attributes.serviceLocation=o.serviceLocation),R},organizeAudioPlaylists=(o,r={},S=!1)=>{let E;const x=o.reduce((C,R)=>{const Ce=R.attributes.role&&R.attributes.role.value||"",Ue=R.attributes.lang||"";let je=R.attributes.label||"main";if(Ue&&!R.attributes.label){const Ye=Ce?` (${Ce})`:"";je=`${R.attributes.lang}${Ye}`}C[je]||(C[je]={language:Ue,autoselect:!0,default:Ce==="main",playlists:[],uri:""});const Xe=addSidxSegmentsToPlaylist(formatAudioPlaylist(R,S),r);return C[je].playlists.push(Xe),typeof E>"u"&&Ce==="main"&&(E=R,E.default=!0),C},{});if(!E){const C=Object.keys(x)[0];x[C].default=!0}return x},organizeVttPlaylists=(o,r={})=>o.reduce((S,E)=>{const x=E.attributes.label||E.attributes.lang||"text",C=E.attributes.lang||"und";return S[x]||(S[x]={language:C,default:!1,autoselect:!1,playlists:[],uri:""}),S[x].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(E),r)),S},{}),organizeCaptionServices=o=>o.reduce((r,S)=>(S&&S.forEach(E=>{const{channel:x,language:C}=E;r[C]={autoselect:!1,default:!1,instreamId:x,language:C},E.hasOwnProperty("aspectRatio")&&(r[C].aspectRatio=E.aspectRatio),E.hasOwnProperty("easyReader")&&(r[C].easyReader=E.easyReader),E.hasOwnProperty("3D")&&(r[C]["3D"]=E["3D"])}),r),{}),formatVideoPlaylist=({attributes:o,segments:r,sidx:S,discontinuityStarts:E})=>{const x={attributes:{NAME:o.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:o.width,height:o.height},CODECS:o.codecs,BANDWIDTH:o.bandwidth,"PROGRAM-ID":1},uri:"",endList:o.type==="static",timeline:o.periodStart,resolvedUri:o.baseUrl||"",targetDuration:o.duration,discontinuityStarts:E,timelineStarts:o.timelineStarts,segments:r};return o.frameRate&&(x.attributes["FRAME-RATE"]=o.frameRate),o.contentProtection&&(x.contentProtection=o.contentProtection),o.serviceLocation&&(x.attributes.serviceLocation=o.serviceLocation),S&&(x.sidx=S),x},videoOnly=({attributes:o})=>o.mimeType==="video/mp4"||o.mimeType==="video/webm"||o.contentType==="video",audioOnly=({attributes:o})=>o.mimeType==="audio/mp4"||o.mimeType==="audio/webm"||o.contentType==="audio",vttOnly=({attributes:o})=>o.mimeType==="text/vtt"||o.contentType==="text",addMediaSequenceValues=(o,r)=>{o.forEach(S=>{S.mediaSequence=0,S.discontinuitySequence=r.findIndex(function({timeline:E}){return E===S.timeline}),S.segments&&S.segments.forEach((E,x)=>{E.number=x})})},flattenMediaGroupPlaylists=o=>o?Object.keys(o).reduce((r,S)=>{const E=o[S];return r.concat(E.playlists)},[]):[],toM3u8=({dashPlaylists:o,locations:r,contentSteering:S,sidxMapping:E={},previousManifest:x,eventStream:C})=>{if(!o.length)return{};const{sourceDuration:R,type:Ce,suggestedPresentationDelay:Ue,minimumUpdatePeriod:je}=o[0].attributes,Xe=mergeDiscontiguousPlaylists(o.filter(videoOnly)).map(formatVideoPlaylist),Ye=mergeDiscontiguousPlaylists(o.filter(audioOnly)),St=mergeDiscontiguousPlaylists(o.filter(vttOnly)),Dt=o.map(Ut=>Ut.attributes.captionServices).filter(Boolean),kt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:R,playlists:addSidxSegmentsToPlaylists(Xe,E)};je>=0&&(kt.minimumUpdatePeriod=je*1e3),r&&(kt.locations=r),S&&(kt.contentSteering=S),Ce==="dynamic"&&(kt.suggestedPresentationDelay=Ue),C&&C.length>0&&(kt.eventStream=C);const et=kt.playlists.length===0,Ft=Ye.length?organizeAudioPlaylists(Ye,E,et):null,xt=St.length?organizeVttPlaylists(St,E):null,Mt=Xe.concat(flattenMediaGroupPlaylists(Ft),flattenMediaGroupPlaylists(xt)),Ot=Mt.map(({timelineStarts:Ut})=>Ut);return kt.timelineStarts=getUniqueTimelineStarts(Ot),addMediaSequenceValues(Mt,kt.timelineStarts),Ft&&(kt.mediaGroups.AUDIO.audio=Ft),xt&&(kt.mediaGroups.SUBTITLES.subs=xt),Dt.length&&(kt.mediaGroups["CLOSED-CAPTIONS"].cc=organizeCaptionServices(Dt)),x?positionManifestOnTimeline({oldManifest:x,newManifest:kt}):kt},getLiveRValue=(o,r,S)=>{const{NOW:E,clientOffset:x,availabilityStartTime:C,timescale:R=1,periodStart:Ce=0,minimumUpdatePeriod:Ue=0}=o,je=(E+x)/1e3,Xe=C+Ce,St=je+Ue-Xe;return Math.ceil((St*R-r)/S)},parseByTimeline=(o,r)=>{const{type:S,minimumUpdatePeriod:E=0,media:x="",sourceDuration:C,timescale:R=1,startNumber:Ce=1,periodStart:Ue}=o,je=[];let Xe=-1;for(let Ye=0;Ye<r.length;Ye++){const St=r[Ye],Dt=St.d,kt=St.r||0,et=St.t||0;Xe<0&&(Xe=et),et&&et>Xe&&(Xe=et);let Ft;if(kt<0){const Ot=Ye+1;Ot===r.length?S==="dynamic"&&E>0&&x.indexOf("$Number$")>0?Ft=getLiveRValue(o,Xe,Dt):Ft=(C*R-Xe)/Dt:Ft=(r[Ot].t-Xe)/Dt}else Ft=kt+1;const xt=Ce+je.length+Ft;let Mt=Ce+je.length;for(;Mt<xt;)je.push({number:Mt,duration:Dt/R,time:Xe,timeline:Ue}),Xe+=Dt,Mt++}return je},identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,identifierReplacement=o=>(r,S,E,x)=>{if(r==="$$")return"$";if(typeof o[S]>"u")return r;const C=""+o[S];return S==="RepresentationID"||(E?x=parseInt(x,10):x=1,C.length>=x)?C:`${new Array(x-C.length+1).join("0")}${C}`},constructTemplateUrl=(o,r)=>o.replace(identifierPattern,identifierReplacement(r)),parseTemplateInfo=(o,r)=>!o.duration&&!r?[{number:o.startNumber||1,duration:o.sourceDuration,time:0,timeline:o.periodStart}]:o.duration?parseByDuration(o):parseByTimeline(o,r),segmentsFromTemplate=(o,r)=>{const S={RepresentationID:o.id,Bandwidth:o.bandwidth||0},{initialization:E={sourceURL:"",range:""}}=o,x=urlTypeToSegment({baseUrl:o.baseUrl,source:constructTemplateUrl(E.sourceURL,S),range:E.range});return parseTemplateInfo(o,r).map(R=>{S.Number=R.number,S.Time=R.time;const Ce=constructTemplateUrl(o.media||"",S),Ue=o.timescale||1,je=o.presentationTimeOffset||0,Xe=o.periodStart+(R.time-je)/Ue;return{uri:Ce,timeline:R.timeline,duration:R.duration,resolvedUri:resolveUrl$1(o.baseUrl||"",Ce),map:x,number:R.number,presentationTime:Xe}})},SegmentURLToSegmentObject=(o,r)=>{const{baseUrl:S,initialization:E={}}=o,x=urlTypeToSegment({baseUrl:S,source:E.sourceURL,range:E.range}),C=urlTypeToSegment({baseUrl:S,source:r.media,range:r.mediaRange});return C.map=x,C},segmentsFromList=(o,r)=>{const{duration:S,segmentUrls:E=[],periodStart:x}=o;if(!S&&!r||S&&r)throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);const C=E.map(Ue=>SegmentURLToSegmentObject(o,Ue));let R;return S&&(R=parseByDuration(o)),r&&(R=parseByTimeline(o,r)),R.map((Ue,je)=>{if(C[je]){const Xe=C[je],Ye=o.timescale||1,St=o.presentationTimeOffset||0;return Xe.timeline=Ue.timeline,Xe.duration=Ue.duration,Xe.number=Ue.number,Xe.presentationTime=x+(Ue.time-St)/Ye,Xe}}).filter(Ue=>Ue)},generateSegments=({attributes:o,segmentInfo:r})=>{let S,E;r.template?(E=segmentsFromTemplate,S=merge$2(o,r.template)):r.base?(E=segmentsFromBase,S=merge$2(o,r.base)):r.list&&(E=segmentsFromList,S=merge$2(o,r.list));const x={attributes:o};if(!E)return x;const C=E(S,r.segmentTimeline);if(S.duration){const{duration:R,timescale:Ce=1}=S;S.duration=R/Ce}else C.length?S.duration=C.reduce((R,Ce)=>Math.max(R,Math.ceil(Ce.duration)),0):S.duration=0;return x.attributes=S,x.segments=C,r.base&&S.indexRange&&(x.sidx=C[0],x.segments=[]),x},toPlaylists=o=>o.map(generateSegments),findChildren=(o,r)=>from(o.childNodes).filter(({tagName:S})=>S===r),getContent=o=>o.textContent.trim(),parseDivisionValue=o=>parseFloat(o.split("/").reduce((r,S)=>r/S)),parseDuration=o=>{const Ce=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(o);if(!Ce)return 0;const[Ue,je,Xe,Ye,St,Dt]=Ce.slice(1);return parseFloat(Ue||0)*31536e3+parseFloat(je||0)*2592e3+parseFloat(Xe||0)*86400+parseFloat(Ye||0)*3600+parseFloat(St||0)*60+parseFloat(Dt||0)},parseDate=o=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(o)&&(o+="Z"),Date.parse(o)),parsers={mediaPresentationDuration(o){return parseDuration(o)},availabilityStartTime(o){return parseDate(o)/1e3},minimumUpdatePeriod(o){return parseDuration(o)},suggestedPresentationDelay(o){return parseDuration(o)},type(o){return o},timeShiftBufferDepth(o){return parseDuration(o)},start(o){return parseDuration(o)},width(o){return parseInt(o,10)},height(o){return parseInt(o,10)},bandwidth(o){return parseInt(o,10)},frameRate(o){return parseDivisionValue(o)},startNumber(o){return parseInt(o,10)},timescale(o){return parseInt(o,10)},presentationTimeOffset(o){return parseInt(o,10)},duration(o){const r=parseInt(o,10);return isNaN(r)?parseDuration(o):r},d(o){return parseInt(o,10)},t(o){return parseInt(o,10)},r(o){return parseInt(o,10)},presentationTime(o){return parseInt(o,10)},DEFAULT(o){return o}},parseAttributes=o=>o&&o.attributes?from(o.attributes).reduce((r,S)=>{const E=parsers[S.name]||parsers.DEFAULT;return r[S.name]=E(S.value),r},{}):{},keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},buildBaseUrls=(o,r)=>r.length?flatten(o.map(function(S){return r.map(function(E){const x=getContent(E),C=resolveUrl$1(S.baseUrl,x),R=merge$2(parseAttributes(E),{baseUrl:C});return C!==x&&!R.serviceLocation&&S.serviceLocation&&(R.serviceLocation=S.serviceLocation),R})})):o,getSegmentInformation=o=>{const r=findChildren(o,"SegmentTemplate")[0],S=findChildren(o,"SegmentList")[0],E=S&&findChildren(S,"SegmentURL").map(Ye=>merge$2({tag:"SegmentURL"},parseAttributes(Ye))),x=findChildren(o,"SegmentBase")[0],C=S||r,R=C&&findChildren(C,"SegmentTimeline")[0],Ce=S||x||r,Ue=Ce&&findChildren(Ce,"Initialization")[0],je=r&&parseAttributes(r);je&&Ue?je.initialization=Ue&&parseAttributes(Ue):je&&je.initialization&&(je.initialization={sourceURL:je.initialization});const Xe={template:je,segmentTimeline:R&&findChildren(R,"S").map(Ye=>parseAttributes(Ye)),list:S&&merge$2(parseAttributes(S),{segmentUrls:E,initialization:parseAttributes(Ue)}),base:x&&merge$2(parseAttributes(x),{initialization:parseAttributes(Ue)})};return Object.keys(Xe).forEach(Ye=>{Xe[Ye]||delete Xe[Ye]}),Xe},inheritBaseUrls=(o,r,S)=>E=>{const x=findChildren(E,"BaseURL"),C=buildBaseUrls(r,x),R=merge$2(o,parseAttributes(E)),Ce=getSegmentInformation(E);return C.map(Ue=>({segmentInfo:merge$2(S,Ce),attributes:merge$2(R,Ue)}))},generateKeySystemInformation=o=>o.reduce((r,S)=>{const E=parseAttributes(S);E.schemeIdUri&&(E.schemeIdUri=E.schemeIdUri.toLowerCase());const x=keySystemsMap[E.schemeIdUri];if(x){r[x]={attributes:E};const C=findChildren(S,"cenc:pssh")[0];if(C){const R=getContent(C);r[x].pssh=R&&decodeB64ToUint8Array(R)}}return r},{}),parseCaptionServiceMetadata=o=>{if(o.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof o.value!="string"?[]:o.value.split(";")).map(S=>{let E,x;return x=S,/^CC\d=/.test(S)?[E,x]=S.split("="):/^CC\d$/.test(S)&&(E=S),{channel:E,language:x}});if(o.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof o.value!="string"?[]:o.value.split(";")).map(S=>{const E={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(S)){const[x,C=""]=S.split("=");E.channel=x,E.language=S,C.split(",").forEach(R=>{const[Ce,Ue]=R.split(":");Ce==="lang"?E.language=Ue:Ce==="er"?E.easyReader=Number(Ue):Ce==="war"?E.aspectRatio=Number(Ue):Ce==="3D"&&(E["3D"]=Number(Ue))})}else E.language=S;return E.channel&&(E.channel="SERVICE"+E.channel),E})},toEventStream=o=>flatten(findChildren(o.node,"EventStream").map(r=>{const S=parseAttributes(r),E=S.schemeIdUri;return findChildren(r,"Event").map(x=>{const C=parseAttributes(x),R=C.presentationTime||0,Ce=S.timescale||1,Ue=C.duration||0,je=R/Ce+o.attributes.start;return{schemeIdUri:E,value:S.value,id:C.id,start:je,end:je+Ue/Ce,messageData:getContent(x)||C.messageData,contentEncoding:S.contentEncoding,presentationTimeOffset:S.presentationTimeOffset||0}})})),toRepresentations=(o,r,S)=>E=>{const x=parseAttributes(E),C=buildBaseUrls(r,findChildren(E,"BaseURL")),R=findChildren(E,"Role")[0],Ce={role:parseAttributes(R)};let Ue=merge$2(o,x,Ce);const je=findChildren(E,"Accessibility")[0],Xe=parseCaptionServiceMetadata(parseAttributes(je));Xe&&(Ue=merge$2(Ue,{captionServices:Xe}));const Ye=findChildren(E,"Label")[0];if(Ye&&Ye.childNodes.length){const Ft=Ye.childNodes[0].nodeValue.trim();Ue=merge$2(Ue,{label:Ft})}const St=generateKeySystemInformation(findChildren(E,"ContentProtection"));Object.keys(St).length&&(Ue=merge$2(Ue,{contentProtection:St}));const Dt=getSegmentInformation(E),kt=findChildren(E,"Representation"),et=merge$2(S,Dt);return flatten(kt.map(inheritBaseUrls(Ue,C,et)))},toAdaptationSets=(o,r)=>(S,E)=>{const x=buildBaseUrls(r,findChildren(S.node,"BaseURL")),C=merge$2(o,{periodStart:S.attributes.start});typeof S.attributes.duration=="number"&&(C.periodDuration=S.attributes.duration);const R=findChildren(S.node,"AdaptationSet"),Ce=getSegmentInformation(S.node);return flatten(R.map(toRepresentations(C,x,Ce)))},generateContentSteeringInformation=(o,r)=>{if(o.length>1&&r({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!o.length)return null;const S=merge$2({serverURL:getContent(o[0])},parseAttributes(o[0]));return S.queryBeforeStart=S.queryBeforeStart==="true",S},getPeriodStart=({attributes:o,priorPeriodAttributes:r,mpdType:S})=>typeof o.start=="number"?o.start:r&&typeof r.start=="number"&&typeof r.duration=="number"?r.start+r.duration:!r&&S==="static"?0:null,inheritAttributes=(o,r={})=>{const{manifestUri:S="",NOW:E=Date.now(),clientOffset:x=0,eventHandler:C=function(){}}=r,R=findChildren(o,"Period");if(!R.length)throw new Error(errors.INVALID_NUMBER_OF_PERIOD);const Ce=findChildren(o,"Location"),Ue=parseAttributes(o),je=buildBaseUrls([{baseUrl:S}],findChildren(o,"BaseURL")),Xe=findChildren(o,"ContentSteering");Ue.type=Ue.type||"static",Ue.sourceDuration=Ue.mediaPresentationDuration||0,Ue.NOW=E,Ue.clientOffset=x,Ce.length&&(Ue.locations=Ce.map(getContent));const Ye=[];return R.forEach((St,Dt)=>{const kt=parseAttributes(St),et=Ye[Dt-1];kt.start=getPeriodStart({attributes:kt,priorPeriodAttributes:et?et.attributes:null,mpdType:Ue.type}),Ye.push({node:St,attributes:kt})}),{locations:Ue.locations,contentSteeringInfo:generateContentSteeringInformation(Xe,C),representationInfo:flatten(Ye.map(toAdaptationSets(Ue,je))),eventStream:flatten(Ye.map(toEventStream))}},stringToMpdXml=o=>{if(o==="")throw new Error(errors.DASH_EMPTY_MANIFEST);const r=new DOMParser;let S,E;try{S=r.parseFromString(o,"application/xml"),E=S&&S.documentElement.tagName==="MPD"?S.documentElement:null}catch{}if(!E||E&&E.getElementsByTagName("parsererror").length>0)throw new Error(errors.DASH_INVALID_XML);return E},parseUTCTimingScheme=o=>{const r=findChildren(o,"UTCTiming")[0];if(!r)return null;const S=parseAttributes(r);switch(S.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":S.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":S.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":S.method="DIRECT",S.value=Date.parse(S.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME)}return S},parse=(o,r={})=>{const S=inheritAttributes(stringToMpdXml(o),r),E=toPlaylists(S.representationInfo);return toM3u8({dashPlaylists:E,locations:S.locations,contentSteering:S.contentSteeringInfo,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest,eventStream:S.eventStream})},parseUTCTiming=o=>parseUTCTimingScheme(stringToMpdXml(o));var MAX_UINT32=Math.pow(2,32),getUint64$1=function(o){var r=new DataView(o.buffer,o.byteOffset,o.byteLength),S;return r.getBigUint64?(S=r.getBigUint64(0),S<Number.MAX_SAFE_INTEGER?Number(S):S):r.getUint32(0)*MAX_UINT32+r.getUint32(4)},numbers={getUint64:getUint64$1,MAX_UINT32},getUint64=numbers.getUint64,parseSidx=function(o){var r=new DataView(o.buffer,o.byteOffset,o.byteLength),S={version:o[0],flags:new Uint8Array(o.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8)},E=12;S.version===0?(S.earliestPresentationTime=r.getUint32(E),S.firstOffset=r.getUint32(E+4),E+=8):(S.earliestPresentationTime=getUint64(o.subarray(E)),S.firstOffset=getUint64(o.subarray(E+8)),E+=16),E+=2;var x=r.getUint16(E);for(E+=2;x>0;E+=12,x--)S.references.push({referenceType:(o[E]&128)>>>7,referencedSize:r.getUint32(E)&2147483647,subsegmentDuration:r.getUint32(E+4),startsWithSap:!!(o[E+8]&128),sapType:(o[E+8]&112)>>>4,sapDeltaTime:r.getUint32(E+8)&268435455});return S},parseSidx_1=parseSidx;const parseSidx$1=getDefaultExportFromCjs(parseSidx_1);var ID3=toUint8([73,68,51]),getId3Size=function(r,S){S===void 0&&(S=0),r=toUint8(r);var E=r[S+5],x=r[S+6]<<21|r[S+7]<<14|r[S+8]<<7|r[S+9],C=(E&16)>>4;return C?x+20:x+10},getId3Offset=function o(r,S){return S===void 0&&(S=0),r=toUint8(r),r.length-S<10||!bytesMatch(r,ID3,{offset:S})?S:(S+=getId3Size(r,S),o(r,S))},normalizePath$1=function(r){return typeof r=="string"?stringToBytes(r):r},normalizePaths$1=function(r){return Array.isArray(r)?r.map(function(S){return normalizePath$1(S)}):[normalizePath$1(r)]},findBox=function o(r,S,E){E===void 0&&(E=!1),S=normalizePaths$1(S),r=toUint8(r);var x=[];if(!S.length)return x;for(var C=0;C<r.length;){var R=(r[C]<<24|r[C+1]<<16|r[C+2]<<8|r[C+3])>>>0,Ce=r.subarray(C+4,C+8);if(R===0)break;var Ue=C+R;if(Ue>r.length){if(E)break;Ue=r.length}var je=r.subarray(C+8,Ue);bytesMatch(Ce,S[0])&&(S.length===1?x.push(je):x.push.apply(x,o(je,S.slice(1),E))),C=Ue}return x},EBML_TAGS={EBML:toUint8([26,69,223,163]),DocType:toUint8([66,130]),Segment:toUint8([24,83,128,103]),SegmentInfo:toUint8([21,73,169,102]),Tracks:toUint8([22,84,174,107]),Track:toUint8([174]),TrackNumber:toUint8([215]),DefaultDuration:toUint8([35,227,131]),TrackEntry:toUint8([174]),TrackType:toUint8([131]),FlagDefault:toUint8([136]),CodecID:toUint8([134]),CodecPrivate:toUint8([99,162]),VideoTrack:toUint8([224]),AudioTrack:toUint8([225]),Cluster:toUint8([31,67,182,117]),Timestamp:toUint8([231]),TimestampScale:toUint8([42,215,177]),BlockGroup:toUint8([160]),BlockDuration:toUint8([155]),Block:toUint8([161]),SimpleBlock:toUint8([163])},LENGTH_TABLE=[128,64,32,16,8,4,2,1],getLength=function(r){for(var S=1,E=0;E<LENGTH_TABLE.length&&!(r&LENGTH_TABLE[E]);E++)S++;return S},getvint=function(r,S,E,x){E===void 0&&(E=!0),x===void 0&&(x=!1);var C=getLength(r[S]),R=r.subarray(S,S+C);return E&&(R=Array.prototype.slice.call(r,S,S+C),R[0]^=LENGTH_TABLE[C-1]),{length:C,value:bytesToNumber(R,{signed:x}),bytes:R}},normalizePath=function o(r){return typeof r=="string"?r.match(/.{1,2}/g).map(function(S){return o(S)}):typeof r=="number"?numberToBytes(r):r},normalizePaths=function(r){return Array.isArray(r)?r.map(function(S){return normalizePath(S)}):[normalizePath(r)]},getInfinityDataSize=function o(r,S,E){if(E>=S.length)return S.length;var x=getvint(S,E,!1);if(bytesMatch(r.bytes,x.bytes))return E;var C=getvint(S,E+x.length);return o(r,S,E+C.length+C.value+x.length)},findEbml=function o(r,S){S=normalizePaths(S),r=toUint8(r);var E=[];if(!S.length)return E;for(var x=0;x<r.length;){var C=getvint(r,x,!1),R=getvint(r,x+C.length),Ce=x+C.length+R.length;R.value===127&&(R.value=getInfinityDataSize(C,r,Ce),R.value!==r.length&&(R.value-=Ce));var Ue=Ce+R.value>r.length?r.length:Ce+R.value,je=r.subarray(Ce,Ue);bytesMatch(S[0],C.bytes)&&(S.length===1?E.push(je):E=E.concat(o(je,S.slice(1))));var Xe=C.length+R.length+je.length;x+=Xe}return E},NAL_TYPE_ONE=toUint8([0,0,0,1]),NAL_TYPE_TWO=toUint8([0,0,1]),EMULATION_PREVENTION=toUint8([0,0,3]),discardEmulationPreventionBytes=function(r){for(var S=[],E=1;E<r.length-2;)bytesMatch(r.subarray(E,E+3),EMULATION_PREVENTION)&&(S.push(E+2),E++),E++;if(S.length===0)return r;var x=r.length-S.length,C=new Uint8Array(x),R=0;for(E=0;E<x;R++,E++)R===S[0]&&(R++,S.shift()),C[E]=r[R];return C},findNal=function(r,S,E,x){r=toUint8(r),E=[].concat(E);for(var C=0,R,Ce=0;C<r.length&&(Ce<x||R);){var Ue=void 0;if(bytesMatch(r.subarray(C),NAL_TYPE_ONE)?Ue=4:bytesMatch(r.subarray(C),NAL_TYPE_TWO)&&(Ue=3),!Ue){C++;continue}if(Ce++,R)return discardEmulationPreventionBytes(r.subarray(R,C));var je=void 0;S==="h264"?je=r[C+Ue]&31:S==="h265"&&(je=r[C+Ue]>>1&63),E.indexOf(je)!==-1&&(R=C+Ue),C+=Ue+(S==="h264"?1:2)}return r.subarray(0,0)},findH264Nal=function(r,S,E){return findNal(r,"h264",S,E)},findH265Nal=function(r,S,E){return findNal(r,"h265",S,E)},CONSTANTS={webm:toUint8([119,101,98,109]),matroska:toUint8([109,97,116,114,111,115,107,97]),flac:toUint8([102,76,97,67]),ogg:toUint8([79,103,103,83]),ac3:toUint8([11,119]),riff:toUint8([82,73,70,70]),avi:toUint8([65,86,73]),wav:toUint8([87,65,86,69]),"3gp":toUint8([102,116,121,112,51,103]),mp4:toUint8([102,116,121,112]),fmp4:toUint8([115,116,121,112]),mov:toUint8([102,116,121,112,113,116]),moov:toUint8([109,111,111,118]),moof:toUint8([109,111,111,102])},_isLikely={aac:function(r){var S=getId3Offset(r);return bytesMatch(r,[255,16],{offset:S,mask:[255,22]})},mp3:function(r){var S=getId3Offset(r);return bytesMatch(r,[255,2],{offset:S,mask:[255,6]})},webm:function(r){var S=findEbml(r,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(S,CONSTANTS.webm)},mkv:function(r){var S=findEbml(r,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(S,CONSTANTS.matroska)},mp4:function(r){if(_isLikely["3gp"](r)||_isLikely.mov(r))return!1;if(bytesMatch(r,CONSTANTS.mp4,{offset:4})||bytesMatch(r,CONSTANTS.fmp4,{offset:4})||bytesMatch(r,CONSTANTS.moof,{offset:4})||bytesMatch(r,CONSTANTS.moov,{offset:4}))return!0},mov:function(r){return bytesMatch(r,CONSTANTS.mov,{offset:4})},"3gp":function(r){return bytesMatch(r,CONSTANTS["3gp"],{offset:4})},ac3:function(r){var S=getId3Offset(r);return bytesMatch(r,CONSTANTS.ac3,{offset:S})},ts:function(r){if(r.length<189&&r.length>=1)return r[0]===71;for(var S=0;S+188<r.length&&S<188;){if(r[S]===71&&r[S+188]===71)return!0;S+=1}return!1},flac:function(r){var S=getId3Offset(r);return bytesMatch(r,CONSTANTS.flac,{offset:S})},ogg:function(r){return bytesMatch(r,CONSTANTS.ogg)},avi:function(r){return bytesMatch(r,CONSTANTS.riff)&&bytesMatch(r,CONSTANTS.avi,{offset:8})},wav:function(r){return bytesMatch(r,CONSTANTS.riff)&&bytesMatch(r,CONSTANTS.wav,{offset:8})},h264:function(r){return findH264Nal(r,7,3).length},h265:function(r){return findH265Nal(r,[32,33],3).length}},isLikelyTypes=Object.keys(_isLikely).filter(function(o){return o!=="ts"&&o!=="h264"&&o!=="h265"}).concat(["ts","h264","h265"]);isLikelyTypes.forEach(function(o){var r=_isLikely[o];_isLikely[o]=function(S){return r(toUint8(S))}});var isLikely=_isLikely,detectContainerForBytes=function(r){r=toUint8(r);for(var S=0;S<isLikelyTypes.length;S++){var E=isLikelyTypes[S];if(isLikely[E](r))return E}return""},isLikelyFmp4MediaSegment=function(r){return findBox(r,["moof"]).length>0},ONE_SECOND_IN_TS=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds;secondsToVideoTs=function(o){return o*ONE_SECOND_IN_TS};secondsToAudioTs=function(o,r){return o*r};videoTsToSeconds=function(o){return o/ONE_SECOND_IN_TS};audioTsToSeconds=function(o,r){return o/r};audioTsToVideoTs=function(o,r){return secondsToVideoTs(audioTsToSeconds(o,r))};videoTsToAudioTs=function(o,r){return secondsToAudioTs(videoTsToSeconds(o),r)};metadataTsToSeconds=function(o,r,S){return videoTsToSeconds(S?o:o-r)};var clock={ONE_SECOND_IN_TS,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds};/**
 * @license
 * Video.js 8.19.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var version$6="8.19.1";const hooks_={},hooks=function(o,r){return hooks_[o]=hooks_[o]||[],r&&(hooks_[o]=hooks_[o].concat(r)),hooks_[o]},hook=function(o,r){hooks(o,r)},removeHook=function(o,r){const S=hooks(o).indexOf(r);return S<=-1?!1:(hooks_[o]=hooks_[o].slice(),hooks_[o].splice(S,1),!0)},hookOnce=function(o,r){hooks(o,[].concat(r).map(S=>{const E=(...x)=>(removeHook(o,E),S(...x));return E}))},FullscreenApi={prefixed:!0},apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],specApi=apiMap[0];let browserApi;for(let o=0;o<apiMap.length;o++)if(apiMap[o][1]in document$1$1){browserApi=apiMap[o];break}if(browserApi){for(let o=0;o<browserApi.length;o++)FullscreenApi[specApi[o]]=browserApi[o];FullscreenApi.prefixed=browserApi[0]!==specApi[0]}let history$1=[];const LogByTypeFactory=(o,r,S)=>(E,x,C)=>{const R=r.levels[x],Ce=new RegExp(`^(${R})$`);let Ue=o;if(E!=="log"&&C.unshift(E.toUpperCase()+":"),S&&(Ue=`%c${o}`,C.unshift(S)),C.unshift(Ue+":"),history$1){history$1.push([].concat(C));const Xe=history$1.length-1e3;history$1.splice(0,Xe>0?Xe:0)}if(!window$1$1.console)return;let je=window$1$1.console[E];!je&&E==="debug"&&(je=window$1$1.console.info||window$1$1.console.log),!(!je||!R||!Ce.test(E))&&je[Array.isArray(C)?"apply":"call"](window$1$1.console,C)};function createLogger$1(o,r=":",S=""){let E="info",x;function C(...R){x("log",E,R)}return x=LogByTypeFactory(o,C,S),C.createLogger=(R,Ce,Ue)=>{const je=Ce!==void 0?Ce:r,Xe=Ue!==void 0?Ue:S,Ye=`${o} ${je} ${R}`;return createLogger$1(Ye,je,Xe)},C.createNewLogger=(R,Ce,Ue)=>createLogger$1(R,Ce,Ue),C.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:E},C.level=R=>{if(typeof R=="string"){if(!C.levels.hasOwnProperty(R))throw new Error(`"${R}" in not a valid log level`);E=R}return E},C.history=()=>history$1?[].concat(history$1):[],C.history.filter=R=>(history$1||[]).filter(Ce=>new RegExp(`.*${R}.*`).test(Ce[0])),C.history.clear=()=>{history$1&&(history$1.length=0)},C.history.disable=()=>{history$1!==null&&(history$1.length=0,history$1=null)},C.history.enable=()=>{history$1===null&&(history$1=[])},C.error=(...R)=>x("error",E,R),C.warn=(...R)=>x("warn",E,R),C.debug=(...R)=>x("debug",E,R),C}const log$1=createLogger$1("VIDEOJS"),createLogger=log$1.createLogger,toString=Object.prototype.toString,keys=function(o){return isObject(o)?Object.keys(o):[]};function each(o,r){keys(o).forEach(S=>r(o[S],S))}function reduce(o,r,S=0){return keys(o).reduce((E,x)=>r(E,o[x],x),S)}function isObject(o){return!!o&&typeof o=="object"}function isPlain(o){return isObject(o)&&toString.call(o)==="[object Object]"&&o.constructor===Object}function merge$1(...o){const r={};return o.forEach(S=>{S&&each(S,(E,x)=>{if(!isPlain(E)){r[x]=E;return}isPlain(r[x])||(r[x]={}),r[x]=merge$1(r[x],E)})}),r}function values(o={}){const r=[];for(const S in o)if(o.hasOwnProperty(S)){const E=o[S];r.push(E)}return r}function defineLazyProperty(o,r,S,E=!0){const x=R=>Object.defineProperty(o,r,{value:R,enumerable:!0,writable:!0}),C={configurable:!0,enumerable:!0,get(){const R=S();return x(R),R}};return E&&(C.set=x),Object.defineProperty(o,r,C)}var Obj=Object.freeze({__proto__:null,each,reduce,isObject,isPlain,merge:merge$1,values,defineLazyProperty});let IS_IPOD=!1,IOS_VERSION=null,IS_ANDROID=!1,ANDROID_VERSION,IS_FIREFOX=!1,IS_EDGE=!1,IS_CHROMIUM=!1,IS_CHROME=!1,CHROMIUM_VERSION=null,CHROME_VERSION=null;const IS_CHROMECAST_RECEIVER=!!(window$1$1.cast&&window$1$1.cast.framework&&window$1$1.cast.framework.CastReceiverContext);let IE_VERSION=null,IS_SAFARI=!1,IS_WINDOWS=!1,IS_IPAD=!1,IS_IPHONE=!1,IS_TIZEN=!1,IS_WEBOS=!1,IS_SMART_TV=!1;const TOUCH_ENABLED=!!(isReal()&&("ontouchstart"in window$1$1||window$1$1.navigator.maxTouchPoints||window$1$1.DocumentTouch&&window$1$1.document instanceof window$1$1.DocumentTouch)),UAD=window$1$1.navigator&&window$1$1.navigator.userAgentData;UAD&&UAD.platform&&UAD.brands&&(IS_ANDROID=UAD.platform==="Android",IS_EDGE=!!UAD.brands.find(o=>o.brand==="Microsoft Edge"),IS_CHROMIUM=!!UAD.brands.find(o=>o.brand==="Chromium"),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=(UAD.brands.find(o=>o.brand==="Chromium")||{}).version||null,IS_WINDOWS=UAD.platform==="Windows");if(!IS_CHROMIUM){const o=window$1$1.navigator&&window$1$1.navigator.userAgent||"";IS_IPOD=/iPod/i.test(o),IOS_VERSION=function(){const r=o.match(/OS (\d+)_/i);return r&&r[1]?r[1]:null}(),IS_ANDROID=/Android/i.test(o),ANDROID_VERSION=function(){const r=o.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;const S=r[1]&&parseFloat(r[1]),E=r[2]&&parseFloat(r[2]);return S&&E?parseFloat(r[1]+"."+r[2]):S||null}(),IS_FIREFOX=/Firefox/i.test(o),IS_EDGE=/Edg/i.test(o),IS_CHROMIUM=/Chrome/i.test(o)||/CriOS/i.test(o),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=function(){const r=o.match(/(Chrome|CriOS)\/(\d+)/);return r&&r[2]?parseFloat(r[2]):null}(),IE_VERSION=function(){const r=/MSIE\s(\d+)\.\d/.exec(o);let S=r&&parseFloat(r[1]);return!S&&/Trident\/7.0/i.test(o)&&/rv:11.0/.test(o)&&(S=11),S}(),IS_TIZEN=/Tizen/i.test(o),IS_WEBOS=/Web0S/i.test(o),IS_SMART_TV=IS_TIZEN||IS_WEBOS,IS_SAFARI=/Safari/i.test(o)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE&&!IS_SMART_TV,IS_WINDOWS=/Windows/i.test(o),IS_IPAD=/iPad/i.test(o)||IS_SAFARI&&TOUCH_ENABLED&&!/iPhone/i.test(o),IS_IPHONE=/iPhone/i.test(o)&&!IS_IPAD}const IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD,IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var browser=Object.freeze({__proto__:null,get IS_IPOD(){return IS_IPOD},get IOS_VERSION(){return IOS_VERSION},get IS_ANDROID(){return IS_ANDROID},get ANDROID_VERSION(){return ANDROID_VERSION},get IS_FIREFOX(){return IS_FIREFOX},get IS_EDGE(){return IS_EDGE},get IS_CHROMIUM(){return IS_CHROMIUM},get IS_CHROME(){return IS_CHROME},get CHROMIUM_VERSION(){return CHROMIUM_VERSION},get CHROME_VERSION(){return CHROME_VERSION},IS_CHROMECAST_RECEIVER,get IE_VERSION(){return IE_VERSION},get IS_SAFARI(){return IS_SAFARI},get IS_WINDOWS(){return IS_WINDOWS},get IS_IPAD(){return IS_IPAD},get IS_IPHONE(){return IS_IPHONE},get IS_TIZEN(){return IS_TIZEN},get IS_WEBOS(){return IS_WEBOS},get IS_SMART_TV(){return IS_SMART_TV},TOUCH_ENABLED,IS_IOS,IS_ANY_SAFARI});function isNonBlankString(o){return typeof o=="string"&&!!o.trim()}function throwIfWhitespace(o){if(o.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal(){return document$1$1===window$1$1.document}function isEl(o){return isObject(o)&&o.nodeType===1}function isInFrame(){try{return window$1$1.parent!==window$1$1.self}catch{return!0}}function createQuerier(o){return function(r,S){if(!isNonBlankString(r))return document$1$1[o](null);isNonBlankString(S)&&(S=document$1$1.querySelector(S));const E=isEl(S)?S:document$1$1;return E[o]&&E[o](r)}}function createEl(o="div",r={},S={},E){const x=document$1$1.createElement(o);return Object.getOwnPropertyNames(r).forEach(function(C){const R=r[C];C==="textContent"?textContent(x,R):(x[C]!==R||C==="tabIndex")&&(x[C]=R)}),Object.getOwnPropertyNames(S).forEach(function(C){x.setAttribute(C,S[C])}),E&&appendContent(x,E),x}function textContent(o,r){return typeof o.textContent>"u"?o.innerText=r:o.textContent=r,o}function prependTo(o,r){r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)}function hasClass(o,r){return throwIfWhitespace(r),o.classList.contains(r)}function addClass(o,...r){return o.classList.add(...r.reduce((S,E)=>S.concat(E.split(/\s+/)),[])),o}function removeClass(o,...r){return o?(o.classList.remove(...r.reduce((S,E)=>S.concat(E.split(/\s+/)),[])),o):(log$1.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass$1(o,r,S){return typeof S=="function"&&(S=S(o,r)),typeof S!="boolean"&&(S=void 0),r.split(/\s+/).forEach(E=>o.classList.toggle(E,S)),o}function setAttributes(o,r){Object.getOwnPropertyNames(r).forEach(function(S){const E=r[S];E===null||typeof E>"u"||E===!1?o.removeAttribute(S):o.setAttribute(S,E===!0?"":E)})}function getAttributes(o){const r={},S=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(o&&o.attributes&&o.attributes.length>0){const E=o.attributes;for(let x=E.length-1;x>=0;x--){const C=E[x].name;let R=E[x].value;S.includes(C)&&(R=R!==null),r[C]=R}}return r}function getAttribute(o,r){return o.getAttribute(r)}function setAttribute(o,r,S){o.setAttribute(r,S)}function removeAttribute(o,r){o.removeAttribute(r)}function blockTextSelection(){document$1$1.body.focus(),document$1$1.onselectstart=function(){return!1}}function unblockTextSelection(){document$1$1.onselectstart=function(){return!0}}function getBoundingClientRect(o){if(o&&o.getBoundingClientRect&&o.parentNode){const r=o.getBoundingClientRect(),S={};return["bottom","height","left","right","top","width"].forEach(E=>{r[E]!==void 0&&(S[E]=r[E])}),S.height||(S.height=parseFloat(computedStyle(o,"height"))),S.width||(S.width=parseFloat(computedStyle(o,"width"))),S}}function findPosition(o){if(!o||o&&!o.offsetParent)return{left:0,top:0,width:0,height:0};const r=o.offsetWidth,S=o.offsetHeight;let E=0,x=0;for(;o.offsetParent&&o!==document$1$1[FullscreenApi.fullscreenElement];)E+=o.offsetLeft,x+=o.offsetTop,o=o.offsetParent;return{left:E,top:x,width:r,height:S}}function getPointerPosition(o,r){const S={x:0,y:0};if(IS_IOS){let Xe=o;for(;Xe&&Xe.nodeName.toLowerCase()!=="html";){const Ye=computedStyle(Xe,"transform");if(/^matrix/.test(Ye)){const St=Ye.slice(7,-1).split(/,\s/).map(Number);S.x+=St[4],S.y+=St[5]}else if(/^matrix3d/.test(Ye)){const St=Ye.slice(9,-1).split(/,\s/).map(Number);S.x+=St[12],S.y+=St[13]}if(Xe.assignedSlot&&Xe.assignedSlot.parentElement&&window$1$1.WebKitCSSMatrix){const St=window$1$1.getComputedStyle(Xe.assignedSlot.parentElement).transform,Dt=new window$1$1.WebKitCSSMatrix(St);S.x+=Dt.m41,S.y+=Dt.m42}Xe=Xe.parentNode||Xe.host}}const E={},x=findPosition(r.target),C=findPosition(o),R=C.width,Ce=C.height;let Ue=r.offsetY-(C.top-x.top),je=r.offsetX-(C.left-x.left);return r.changedTouches&&(je=r.changedTouches[0].pageX-C.left,Ue=r.changedTouches[0].pageY+C.top,IS_IOS&&(je-=S.x,Ue-=S.y)),E.y=1-Math.max(0,Math.min(1,Ue/Ce)),E.x=Math.max(0,Math.min(1,je/R)),E}function isTextNode(o){return isObject(o)&&o.nodeType===3}function emptyEl(o){for(;o.firstChild;)o.removeChild(o.firstChild);return o}function normalizeContent(o){return typeof o=="function"&&(o=o()),(Array.isArray(o)?o:[o]).map(r=>{if(typeof r=="function"&&(r=r()),isEl(r)||isTextNode(r))return r;if(typeof r=="string"&&/\S/.test(r))return document$1$1.createTextNode(r)}).filter(r=>r)}function appendContent(o,r){return normalizeContent(r).forEach(S=>o.appendChild(S)),o}function insertContent(o,r){return appendContent(emptyEl(o),r)}function isSingleLeftClick(o){return o.button===void 0&&o.buttons===void 0||o.button===0&&o.buttons===void 0||o.type==="mouseup"&&o.button===0&&o.buttons===0||o.type==="mousedown"&&o.button===0&&o.buttons===0?!0:!(o.button!==0||o.buttons!==1)}const $=createQuerier("querySelector"),$$=createQuerier("querySelectorAll");function computedStyle(o,r){if(!o||!r)return"";if(typeof window$1$1.getComputedStyle=="function"){let S;try{S=window$1$1.getComputedStyle(o)}catch{return""}return S?S.getPropertyValue(r)||S[r]:""}return""}function copyStyleSheetsToWindow(o){[...document$1$1.styleSheets].forEach(r=>{try{const S=[...r.cssRules].map(x=>x.cssText).join(""),E=document$1$1.createElement("style");E.textContent=S,o.document.head.appendChild(E)}catch{const E=document$1$1.createElement("link");E.rel="stylesheet",E.type=r.type,E.media=r.media.mediaText,E.href=r.href,o.document.head.appendChild(E)}})}var Dom=Object.freeze({__proto__:null,isReal,isEl,isInFrame,createEl,textContent,prependTo,hasClass,addClass,removeClass,toggleClass:toggleClass$1,setAttributes,getAttributes,getAttribute,setAttribute,removeAttribute,blockTextSelection,unblockTextSelection,getBoundingClientRect,findPosition,getPointerPosition,isTextNode,emptyEl,normalizeContent,appendContent,insertContent,isSingleLeftClick,$,$$,computedStyle,copyStyleSheetsToWindow});let _windowLoaded=!1,videojs$1;const autoSetup=function(){if(videojs$1.options.autoSetup===!1)return;const o=Array.prototype.slice.call(document$1$1.getElementsByTagName("video")),r=Array.prototype.slice.call(document$1$1.getElementsByTagName("audio")),S=Array.prototype.slice.call(document$1$1.getElementsByTagName("video-js")),E=o.concat(r,S);if(E&&E.length>0)for(let x=0,C=E.length;x<C;x++){const R=E[x];if(R&&R.getAttribute)R.player===void 0&&R.getAttribute("data-setup")!==null&&videojs$1(R);else{autoSetupTimeout(1);break}}else _windowLoaded||autoSetupTimeout(1)};function autoSetupTimeout(o,r){isReal()&&(r&&(videojs$1=r),window$1$1.setTimeout(autoSetup,o))}function setWindowLoaded(){_windowLoaded=!0,window$1$1.removeEventListener("load",setWindowLoaded)}isReal()&&(document$1$1.readyState==="complete"?setWindowLoaded():window$1$1.addEventListener("load",setWindowLoaded));const createStyleElement=function(o){const r=document$1$1.createElement("style");return r.className=o,r},setTextContent=function(o,r){o.styleSheet?o.styleSheet.cssText=r:o.textContent=r};var DomData=new WeakMap;const _initialGuid=3;let _guid=_initialGuid;function newGUID(){return _guid++}function _cleanUpEvents(o,r){if(!DomData.has(o))return;const S=DomData.get(o);S.handlers[r].length===0&&(delete S.handlers[r],o.removeEventListener?o.removeEventListener(r,S.dispatcher,!1):o.detachEvent&&o.detachEvent("on"+r,S.dispatcher)),Object.getOwnPropertyNames(S.handlers).length<=0&&(delete S.handlers,delete S.dispatcher,delete S.disabled),Object.getOwnPropertyNames(S).length===0&&DomData.delete(o)}function _handleMultipleEvents(o,r,S,E){S.forEach(function(x){o(r,x,E)})}function fixEvent(o){if(o.fixed_)return o;function r(){return!0}function S(){return!1}if(!o||!o.isPropagationStopped||!o.isImmediatePropagationStopped){const E=o||window$1$1.event;o={};const x=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const C in E)x.includes(C)||C==="returnValue"&&E.preventDefault||(o[C]=E[C]);if(o.target||(o.target=o.srcElement||document$1$1),o.relatedTarget||(o.relatedTarget=o.fromElement===o.target?o.toElement:o.fromElement),o.preventDefault=function(){E.preventDefault&&E.preventDefault(),o.returnValue=!1,E.returnValue=!1,o.defaultPrevented=!0},o.defaultPrevented=!1,o.stopPropagation=function(){E.stopPropagation&&E.stopPropagation(),o.cancelBubble=!0,E.cancelBubble=!0,o.isPropagationStopped=r},o.isPropagationStopped=S,o.stopImmediatePropagation=function(){E.stopImmediatePropagation&&E.stopImmediatePropagation(),o.isImmediatePropagationStopped=r,o.stopPropagation()},o.isImmediatePropagationStopped=S,o.clientX!==null&&o.clientX!==void 0){const C=document$1$1.documentElement,R=document$1$1.body;o.pageX=o.clientX+(C&&C.scrollLeft||R&&R.scrollLeft||0)-(C&&C.clientLeft||R&&R.clientLeft||0),o.pageY=o.clientY+(C&&C.scrollTop||R&&R.scrollTop||0)-(C&&C.clientTop||R&&R.clientTop||0)}o.which=o.charCode||o.keyCode,o.button!==null&&o.button!==void 0&&(o.button=o.button&1?0:o.button&4?1:o.button&2?2:0)}return o.fixed_=!0,o}let _supportsPassive;const supportsPassive=function(){if(typeof _supportsPassive!="boolean"){_supportsPassive=!1;try{const o=Object.defineProperty({},"passive",{get(){_supportsPassive=!0}});window$1$1.addEventListener("test",null,o),window$1$1.removeEventListener("test",null,o)}catch{}}return _supportsPassive},passiveEvents=["touchstart","touchmove"];function on$1(o,r,S){if(Array.isArray(r))return _handleMultipleEvents(on$1,o,r,S);DomData.has(o)||DomData.set(o,{});const E=DomData.get(o);if(E.handlers||(E.handlers={}),E.handlers[r]||(E.handlers[r]=[]),S.guid||(S.guid=newGUID()),E.handlers[r].push(S),E.dispatcher||(E.disabled=!1,E.dispatcher=function(x,C){if(E.disabled)return;x=fixEvent(x);const R=E.handlers[x.type];if(R){const Ce=R.slice(0);for(let Ue=0,je=Ce.length;Ue<je&&!x.isImmediatePropagationStopped();Ue++)try{Ce[Ue].call(o,x,C)}catch(Xe){log$1.error(Xe)}}}),E.handlers[r].length===1)if(o.addEventListener){let x=!1;supportsPassive()&&passiveEvents.indexOf(r)>-1&&(x={passive:!0}),o.addEventListener(r,E.dispatcher,x)}else o.attachEvent&&o.attachEvent("on"+r,E.dispatcher)}function off$1(o,r,S){if(!DomData.has(o))return;const E=DomData.get(o);if(!E.handlers)return;if(Array.isArray(r))return _handleMultipleEvents(off$1,o,r,S);const x=function(R,Ce){E.handlers[Ce]=[],_cleanUpEvents(R,Ce)};if(r===void 0){for(const R in E.handlers)Object.prototype.hasOwnProperty.call(E.handlers||{},R)&&x(o,R);return}const C=E.handlers[r];if(C){if(!S){x(o,r);return}if(S.guid)for(let R=0;R<C.length;R++)C[R].guid===S.guid&&C.splice(R--,1);_cleanUpEvents(o,r)}}function trigger(o,r,S){const E=DomData.has(o)?DomData.get(o):{},x=o.parentNode||o.ownerDocument;if(typeof r=="string"?r={type:r,target:o}:r.target||(r.target=o),r=fixEvent(r),E.dispatcher&&E.dispatcher.call(o,r,S),x&&!r.isPropagationStopped()&&r.bubbles===!0)trigger.call(null,x,r,S);else if(!x&&!r.defaultPrevented&&r.target&&r.target[r.type]){DomData.has(r.target)||DomData.set(r.target,{});const C=DomData.get(r.target);r.target[r.type]&&(C.disabled=!0,typeof r.target[r.type]=="function"&&r.target[r.type](),C.disabled=!1)}return!r.defaultPrevented}function one(o,r,S){if(Array.isArray(r))return _handleMultipleEvents(one,o,r,S);const E=function(){off$1(o,r,E),S.apply(this,arguments)};E.guid=S.guid=S.guid||newGUID(),on$1(o,r,E)}function any(o,r,S){const E=function(){off$1(o,r,E),S.apply(this,arguments)};E.guid=S.guid=S.guid||newGUID(),on$1(o,r,E)}var Events=Object.freeze({__proto__:null,fixEvent,on:on$1,off:off$1,trigger,one,any});const UPDATE_REFRESH_INTERVAL=30,bind_=function(o,r,S){r.guid||(r.guid=newGUID());const E=r.bind(o);return E.guid=S?S+"_"+r.guid:r.guid,E},throttle$1=function(o,r){let S=window$1$1.performance.now();return function(...x){const C=window$1$1.performance.now();C-S>=r&&(o(...x),S=C)}},debounce=function(o,r,S,E=window$1$1){let x;const C=()=>{E.clearTimeout(x),x=null},R=function(){const Ce=this,Ue=arguments;let je=function(){x=null,je=null,S||o.apply(Ce,Ue)};!x&&S&&o.apply(Ce,Ue),E.clearTimeout(x),x=E.setTimeout(je,r)};return R.cancel=C,R};var Fn=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL,bind_,throttle:throttle$1,debounce});let EVENT_MAP;class EventTarget$2{on(r,S){const E=this.addEventListener;this.addEventListener=()=>{},on$1(this,r,S),this.addEventListener=E}off(r,S){off$1(this,r,S)}one(r,S){const E=this.addEventListener;this.addEventListener=()=>{},one(this,r,S),this.addEventListener=E}any(r,S){const E=this.addEventListener;this.addEventListener=()=>{},any(this,r,S),this.addEventListener=E}trigger(r){const S=r.type||r;typeof r=="string"&&(r={type:S}),r=fixEvent(r),this.allowedEvents_[S]&&this["on"+S]&&this["on"+S](r),trigger(this,r)}queueTrigger(r){EVENT_MAP||(EVENT_MAP=new Map);const S=r.type||r;let E=EVENT_MAP.get(this);E||(E=new Map,EVENT_MAP.set(this,E));const x=E.get(S);E.delete(S),window$1$1.clearTimeout(x);const C=window$1$1.setTimeout(()=>{E.delete(S),E.size===0&&(E=null,EVENT_MAP.delete(this)),this.trigger(r)},0);E.set(S,C)}}EventTarget$2.prototype.allowedEvents_={};EventTarget$2.prototype.addEventListener=EventTarget$2.prototype.on;EventTarget$2.prototype.removeEventListener=EventTarget$2.prototype.off;EventTarget$2.prototype.dispatchEvent=EventTarget$2.prototype.trigger;const objName=o=>typeof o.name=="function"?o.name():typeof o.name=="string"?o.name:o.name_?o.name_:o.constructor&&o.constructor.name?o.constructor.name:typeof o,isEvented=o=>o instanceof EventTarget$2||!!o.eventBusEl_&&["on","one","off","trigger"].every(r=>typeof o[r]=="function"),addEventedCallback=(o,r)=>{isEvented(o)?r():(o.eventedCallbacks||(o.eventedCallbacks=[]),o.eventedCallbacks.push(r))},isValidEventType=o=>typeof o=="string"&&/\S/.test(o)||Array.isArray(o)&&!!o.length,validateTarget=(o,r,S)=>{if(!o||!o.nodeName&&!isEvented(o))throw new Error(`Invalid target for ${objName(r)}#${S}; must be a DOM node or evented object.`)},validateEventType=(o,r,S)=>{if(!isValidEventType(o))throw new Error(`Invalid event type for ${objName(r)}#${S}; must be a non-empty string or array.`)},validateListener=(o,r,S)=>{if(typeof o!="function")throw new Error(`Invalid listener for ${objName(r)}#${S}; must be a function.`)},normalizeListenArgs=(o,r,S)=>{const E=r.length<3||r[0]===o||r[0]===o.eventBusEl_;let x,C,R;return E?(x=o.eventBusEl_,r.length>=3&&r.shift(),[C,R]=r):(x=r[0],C=r[1],R=r[2]),validateTarget(x,o,S),validateEventType(C,o,S),validateListener(R,o,S),R=bind_(o,R),{isTargetingSelf:E,target:x,type:C,listener:R}},listen=(o,r,S,E)=>{validateTarget(o,o,r),o.nodeName?Events[r](o,S,E):o[r](S,E)},EventedMixin={on(...o){const{isTargetingSelf:r,target:S,type:E,listener:x}=normalizeListenArgs(this,o,"on");if(listen(S,"on",E,x),!r){const C=()=>this.off(S,E,x);C.guid=x.guid;const R=()=>this.off("dispose",C);R.guid=x.guid,listen(this,"on","dispose",C),listen(S,"on","dispose",R)}},one(...o){const{isTargetingSelf:r,target:S,type:E,listener:x}=normalizeListenArgs(this,o,"one");if(r)listen(S,"one",E,x);else{const C=(...R)=>{this.off(S,E,C),x.apply(null,R)};C.guid=x.guid,listen(S,"one",E,C)}},any(...o){const{isTargetingSelf:r,target:S,type:E,listener:x}=normalizeListenArgs(this,o,"any");if(r)listen(S,"any",E,x);else{const C=(...R)=>{this.off(S,E,C),x.apply(null,R)};C.guid=x.guid,listen(S,"any",E,C)}},off(o,r,S){if(!o||isValidEventType(o))off$1(this.eventBusEl_,o,r);else{const E=o,x=r;validateTarget(E,this,"off"),validateEventType(x,this,"off"),validateListener(S,this,"off"),S=bind_(this,S),this.off("dispose",S),E.nodeName?(off$1(E,x,S),off$1(E,"dispose",S)):isEvented(E)&&(E.off(x,S),E.off("dispose",S))}},trigger(o,r){validateTarget(this.eventBusEl_,this,"trigger");const S=o&&typeof o!="string"?o.type:o;if(!isValidEventType(S))throw new Error(`Invalid event type for ${objName(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return trigger(this.eventBusEl_,o,r)}};function evented(o,r={}){const{eventBusKey:S}=r;if(S){if(!o[S].nodeName)throw new Error(`The eventBusKey "${S}" does not refer to an element.`);o.eventBusEl_=o[S]}else o.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return Object.assign(o,EventedMixin),o.eventedCallbacks&&o.eventedCallbacks.forEach(E=>{E()}),o.on("dispose",()=>{o.off(),[o,o.el_,o.eventBusEl_].forEach(function(E){E&&DomData.has(E)&&DomData.delete(E)}),window$1$1.setTimeout(()=>{o.eventBusEl_=null},0)}),o}const StatefulMixin={state:{},setState(o){typeof o=="function"&&(o=o());let r;return each(o,(S,E)=>{this.state[E]!==S&&(r=r||{},r[E]={from:this.state[E],to:S}),this.state[E]=S}),r&&isEvented(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function stateful(o,r){return Object.assign(o,StatefulMixin),o.state=Object.assign({},o.state,r),typeof o.handleStateChanged=="function"&&isEvented(o)&&o.on("statechanged",o.handleStateChanged),o}const toLowerCase=function(o){return typeof o!="string"?o:o.replace(/./,r=>r.toLowerCase())},toTitleCase$1=function(o){return typeof o!="string"?o:o.replace(/./,r=>r.toUpperCase())},titleCaseEquals=function(o,r){return toTitleCase$1(o)===toTitleCase$1(r)};var Str=Object.freeze({__proto__:null,toLowerCase,toTitleCase:toTitleCase$1,titleCaseEquals});class Component$1{constructor(r,S,E){if(!r&&this.play?this.player_=r=this:this.player_=r,this.isDisposed_=!1,this.parentComponent_=null,this.options_=merge$1({},this.options_),S=this.options_=merge$1(this.options_,S),this.id_=S.id||S.el&&S.el.id,!this.id_){const x=r&&r.id&&r.id()||"no_player";this.id_=`${x}_component_${newGUID()}`}this.name_=S.name||null,S.el?this.el_=S.el:S.createEl!==!1&&(this.el_=this.createEl()),S.className&&this.el_&&S.className.split(" ").forEach(x=>this.addClass(x)),["on","off","one","any","trigger"].forEach(x=>{this[x]=void 0}),S.evented!==!1&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,S.initChildren!==!1&&this.initChildren(),this.ready(E),S.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(r={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let S=this.children_.length-1;S>=0;S--)this.children_[S].dispose&&this.children_[S].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(r){return r?(this.options_=merge$1(this.options_,r),this.options_):this.options_}el(){return this.el_}createEl(r,S,E){return createEl(r,S,E)}localize(r,S,E=r){const x=this.player_.language&&this.player_.language(),C=this.player_.languages&&this.player_.languages(),R=C&&C[x],Ce=x&&x.split("-")[0],Ue=C&&C[Ce];let je=E;return R&&R[r]?je=R[r]:Ue&&Ue[r]&&(je=Ue[r]),S&&(je=je.replace(/\{(\d+)\}/g,function(Xe,Ye){const St=S[Ye-1];let Dt=St;return typeof St>"u"&&(Dt=Xe),Dt})),je}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(r){return this.childIndex_[r]}getChild(r){if(r)return this.childNameIndex_[r]}getDescendant(...r){r=r.reduce((E,x)=>E.concat(x),[]);let S=this;for(let E=0;E<r.length;E++)if(S=S.getChild(r[E]),!S||!S.getChild)return;return S}setIcon(r,S=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const E="http://www.w3.org/2000/svg",x=createEl("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),C=document$1$1.createElementNS(E,"svg");C.setAttributeNS(null,"viewBox","0 0 512 512");const R=document$1$1.createElementNS(E,"use");return C.appendChild(R),R.setAttributeNS(null,"href",`#vjs-icon-${r}`),x.appendChild(C),this.iconIsSet_?S.replaceChild(x,S.querySelector(".vjs-icon-placeholder")):S.appendChild(x),this.iconIsSet_=!0,x}addChild(r,S={},E=this.children_.length){let x,C;if(typeof r=="string"){C=toTitleCase$1(r);const R=S.componentClass||C;S.name=C;const Ce=Component$1.getComponent(R);if(!Ce)throw new Error(`Component ${R} does not exist`);if(typeof Ce!="function")return null;x=new Ce(this.player_||this,S)}else x=r;if(x.parentComponent_&&x.parentComponent_.removeChild(x),this.children_.splice(E,0,x),x.parentComponent_=this,typeof x.id=="function"&&(this.childIndex_[x.id()]=x),C=C||x.name&&toTitleCase$1(x.name()),C&&(this.childNameIndex_[C]=x,this.childNameIndex_[toLowerCase(C)]=x),typeof x.el=="function"&&x.el()){let R=null;this.children_[E+1]&&(this.children_[E+1].el_?R=this.children_[E+1].el_:isEl(this.children_[E+1])&&(R=this.children_[E+1])),this.contentEl().insertBefore(x.el(),R)}return x}removeChild(r){if(typeof r=="string"&&(r=this.getChild(r)),!r||!this.children_)return;let S=!1;for(let x=this.children_.length-1;x>=0;x--)if(this.children_[x]===r){S=!0,this.children_.splice(x,1);break}if(!S)return;r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[toTitleCase$1(r.name())]=null,this.childNameIndex_[toLowerCase(r.name())]=null;const E=r.el();E&&E.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}initChildren(){const r=this.options_.children;if(r){const S=this.options_,E=R=>{const Ce=R.name;let Ue=R.opts;if(S[Ce]!==void 0&&(Ue=S[Ce]),Ue===!1)return;Ue===!0&&(Ue={}),Ue.playerOptions=this.options_.playerOptions;const je=this.addChild(Ce,Ue);je&&(this[Ce]=je)};let x;const C=Component$1.getComponent("Tech");Array.isArray(r)?x=r:x=Object.keys(r),x.concat(Object.keys(this.options_).filter(function(R){return!x.some(function(Ce){return typeof Ce=="string"?R===Ce:R===Ce.name})})).map(R=>{let Ce,Ue;return typeof R=="string"?(Ce=R,Ue=r[Ce]||this.options_[Ce]||{}):(Ce=R.name,Ue=R),{name:Ce,opts:Ue}}).filter(R=>{const Ce=Component$1.getComponent(R.opts.componentClass||toTitleCase$1(R.name));return Ce&&!C.isTech(Ce)}).forEach(E)}}buildCSSClass(){return""}ready(r,S=!1){if(r){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(r);return}S?r.call(this):this.setTimeout(r,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(S){S.call(this)},this),this.trigger("ready")},1)}$(r,S){return $(r,S||this.contentEl())}$$(r,S){return $$(r,S||this.contentEl())}hasClass(r){return hasClass(this.el_,r)}addClass(...r){addClass(this.el_,...r)}removeClass(...r){removeClass(this.el_,...r)}toggleClass(r,S){toggleClass$1(this.el_,r,S)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(r){return getAttribute(this.el_,r)}setAttribute(r,S){setAttribute(this.el_,r,S)}removeAttribute(r){removeAttribute(this.el_,r)}width(r,S){return this.dimension("width",r,S)}height(r,S){return this.dimension("height",r,S)}dimensions(r,S){this.width(r,!0),this.height(S)}dimension(r,S,E){if(S!==void 0){(S===null||S!==S)&&(S=0),(""+S).indexOf("%")!==-1||(""+S).indexOf("px")!==-1?this.el_.style[r]=S:S==="auto"?this.el_.style[r]="":this.el_.style[r]=S+"px",E||this.trigger("componentresize");return}if(!this.el_)return 0;const x=this.el_.style[r],C=x.indexOf("px");return parseInt(C!==-1?x.slice(0,C):this.el_["offset"+toTitleCase$1(r)],10)}currentDimension(r){let S=0;if(r!=="width"&&r!=="height")throw new Error("currentDimension only accepts width or height value");if(S=computedStyle(this.el_,r),S=parseFloat(S),S===0||isNaN(S)){const E=`offset${toTitleCase$1(r)}`;S=this.el_[E]}return S}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const r=this.el_.getBoundingClientRect(),S={x:r.x,y:r.y,width:r.width,height:r.height,top:r.top,right:r.right,bottom:r.bottom,left:r.left},E={x:r.left+r.width/2,y:r.top+r.height/2,width:0,height:0,top:r.top+r.height/2,right:r.left+r.width/2,bottom:r.top+r.height/2,left:r.left+r.width/2};return{boundingClientRect:S,center:E}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(r){this.player_&&(r.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&r.stopPropagation(),this.player_.handleKeyDown(r))}handleKeyPress(r){this.handleKeyDown(r)}emitTapEvents(){let r=0,S=null;const E=10,x=200;let C;this.on("touchstart",function(Ce){Ce.touches.length===1&&(S={pageX:Ce.touches[0].pageX,pageY:Ce.touches[0].pageY},r=window$1$1.performance.now(),C=!0)}),this.on("touchmove",function(Ce){if(Ce.touches.length>1)C=!1;else if(S){const Ue=Ce.touches[0].pageX-S.pageX,je=Ce.touches[0].pageY-S.pageY;Math.sqrt(Ue*Ue+je*je)>E&&(C=!1)}});const R=function(){C=!1};this.on("touchleave",R),this.on("touchcancel",R),this.on("touchend",function(Ce){S=null,C===!0&&window$1$1.performance.now()-r<x&&(Ce.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const r=bind_(this.player(),this.player().reportUserActivity);let S;this.on("touchstart",function(){r(),this.clearInterval(S),S=this.setInterval(r,250)});const E=function(x){r(),this.clearInterval(S)};this.on("touchmove",r),this.on("touchend",E),this.on("touchcancel",E)}setTimeout(r,S){var E;return r=bind_(this,r),this.clearTimersOnDispose_(),E=window$1$1.setTimeout(()=>{this.setTimeoutIds_.has(E)&&this.setTimeoutIds_.delete(E),r()},S),this.setTimeoutIds_.add(E),E}clearTimeout(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),window$1$1.clearTimeout(r)),r}setInterval(r,S){r=bind_(this,r),this.clearTimersOnDispose_();const E=window$1$1.setInterval(r,S);return this.setIntervalIds_.add(E),E}clearInterval(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),window$1$1.clearInterval(r)),r}requestAnimationFrame(r){this.clearTimersOnDispose_();var S;return r=bind_(this,r),S=window$1$1.requestAnimationFrame(()=>{this.rafIds_.has(S)&&this.rafIds_.delete(S),r()}),this.rafIds_.add(S),S}requestNamedAnimationFrame(r,S){this.namedRafs_.has(r)&&this.cancelNamedAnimationFrame(r),this.clearTimersOnDispose_(),S=bind_(this,S);const E=this.requestAnimationFrame(()=>{S(),this.namedRafs_.has(r)&&this.namedRafs_.delete(r)});return this.namedRafs_.set(r,E),r}cancelNamedAnimationFrame(r){this.namedRafs_.has(r)&&(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))}cancelAnimationFrame(r){return this.rafIds_.has(r)&&(this.rafIds_.delete(r),window$1$1.cancelAnimationFrame(r)),r}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([r,S])=>{this[r].forEach((E,x)=>this[S](x))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(r){return(r||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(r){function S(C){const R=window$1$1.getComputedStyle(C,null),Ce=R.getPropertyValue("visibility");return R.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(Ce)}function E(C){return!(!S(C.parentElement)||!S(C)||C.style.opacity==="0"||window$1$1.getComputedStyle(C).height==="0px"||window$1$1.getComputedStyle(C).width==="0px")}function x(C){if(C.offsetWidth+C.offsetHeight+C.getBoundingClientRect().height+C.getBoundingClientRect().width===0)return!1;const R={x:C.getBoundingClientRect().left+C.offsetWidth/2,y:C.getBoundingClientRect().top+C.offsetHeight/2};if(R.x<0||R.x>(document$1$1.documentElement.clientWidth||window$1$1.innerWidth)||R.y<0||R.y>(document$1$1.documentElement.clientHeight||window$1$1.innerHeight))return!1;let Ce=document$1$1.elementFromPoint(R.x,R.y);for(;Ce;){if(Ce===C)return!0;if(Ce.parentNode)Ce=Ce.parentNode;else return!1}}return r||(r=this.el()),!!(x(r)&&E(r)&&(!r.parentElement||r.tabIndex>=0))}static registerComponent(r,S){if(typeof r!="string"||!r)throw new Error(`Illegal component name, "${r}"; must be a non-empty string.`);const E=Component$1.getComponent("Tech"),x=E&&E.isTech(S),C=Component$1===S||Component$1.prototype.isPrototypeOf(S.prototype);if(x||!C){let Ce;throw x?Ce="techs must be registered using Tech.registerTech()":Ce="must be a Component subclass",new Error(`Illegal component, "${r}"; ${Ce}.`)}r=toTitleCase$1(r),Component$1.components_||(Component$1.components_={});const R=Component$1.getComponent("Player");if(r==="Player"&&R&&R.players){const Ce=R.players,Ue=Object.keys(Ce);if(Ce&&Ue.length>0&&Ue.map(je=>Ce[je]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Component$1.components_[r]=S,Component$1.components_[toLowerCase(r)]=S,S}static getComponent(r){if(!(!r||!Component$1.components_))return Component$1.components_[r]}}Component$1.registerComponent("Component",Component$1);function rangeCheck(o,r,S){if(typeof r!="number"||r<0||r>S)throw new Error(`Failed to execute '${o}' on 'TimeRanges': The index provided (${r}) is non-numeric or out of bounds (0-${S}).`)}function getRange(o,r,S,E){return rangeCheck(o,E,S.length-1),S[E][r]}function createTimeRangesObj(o){let r;return o===void 0||o.length===0?r={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:r={length:o.length,start:getRange.bind(null,"start",0,o),end:getRange.bind(null,"end",1,o)},window$1$1.Symbol&&window$1$1.Symbol.iterator&&(r[window$1$1.Symbol.iterator]=()=>(o||[]).values()),r}function createTimeRanges$1(o,r){return Array.isArray(o)?createTimeRangesObj(o):o===void 0||r===void 0?createTimeRangesObj():createTimeRangesObj([[o,r]])}const defaultImplementation=function(o,r){o=o<0?0:o;let S=Math.floor(o%60),E=Math.floor(o/60%60),x=Math.floor(o/3600);const C=Math.floor(r/60%60),R=Math.floor(r/3600);return(isNaN(o)||o===1/0)&&(x=E=S="-"),x=x>0||R>0?x+":":"",E=((x||C>=10)&&E<10?"0"+E:E)+":",S=S<10?"0"+S:S,x+E+S};let implementation=defaultImplementation;function setFormatTime(o){implementation=o}function resetFormatTime(){implementation=defaultImplementation}function formatTime(o,r=o){return implementation(o,r)}var Time=Object.freeze({__proto__:null,createTimeRanges:createTimeRanges$1,createTimeRange:createTimeRanges$1,setFormatTime,resetFormatTime,formatTime});function bufferedPercent(o,r){let S=0,E,x;if(!r)return 0;(!o||!o.length)&&(o=createTimeRanges$1(0,0));for(let C=0;C<o.length;C++)E=o.start(C),x=o.end(C),x>r&&(x=r),S+=x-E;return S/r}function MediaError(o){if(o instanceof MediaError)return o;typeof o=="number"?this.code=o:typeof o=="string"?this.message=o:isObject(o)&&(typeof o.code=="number"&&(this.code=o.code),Object.assign(this,o)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.prototype.metadata=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};MediaError.MEDIA_ERR_CUSTOM=0;MediaError.prototype.MEDIA_ERR_CUSTOM=0;MediaError.MEDIA_ERR_ABORTED=1;MediaError.prototype.MEDIA_ERR_ABORTED=1;MediaError.MEDIA_ERR_NETWORK=2;MediaError.prototype.MEDIA_ERR_NETWORK=2;MediaError.MEDIA_ERR_DECODE=3;MediaError.prototype.MEDIA_ERR_DECODE=3;MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.MEDIA_ERR_ENCRYPTED=5;MediaError.prototype.MEDIA_ERR_ENCRYPTED=5;function isPromise(o){return o!=null&&typeof o.then=="function"}function silencePromise(o){isPromise(o)&&o.then(null,r=>{})}const trackToJson_=function(o){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((S,E,x)=>(o[E]&&(S[E]=o[E]),S),{cues:o.cues&&Array.prototype.map.call(o.cues,function(S){return{startTime:S.startTime,endTime:S.endTime,text:S.text,id:S.id}})})},textTracksToJson=function(o){const r=o.$$("track"),S=Array.prototype.map.call(r,x=>x.track);return Array.prototype.map.call(r,function(x){const C=trackToJson_(x.track);return x.src&&(C.src=x.src),C}).concat(Array.prototype.filter.call(o.textTracks(),function(x){return S.indexOf(x)===-1}).map(trackToJson_))},jsonToTextTracks=function(o,r){return o.forEach(function(S){const E=r.addRemoteTextTrack(S).track;!S.src&&S.cues&&S.cues.forEach(x=>E.addCue(x))}),r.textTracks()};var textTrackConverter={textTracksToJson,jsonToTextTracks,trackToJson_};const MODAL_CLASS_NAME="vjs-modal-dialog";class ModalDialog extends Component$1{constructor(r,S){super(r,S),this.handleKeyDown_=E=>this.handleKeyDown(E),this.close_=E=>this.close(E),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=createEl("div",{className:`${MODAL_CLASS_NAME}-content`},{role:"document"}),this.descEl_=createEl("p",{className:`${MODAL_CLASS_NAME}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${MODAL_CLASS_NAME} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let r=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(r+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),r}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const r=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!r.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&r.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=r.controls(),r.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(r){return typeof r=="boolean"&&this[r?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const r=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&r.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&r.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(r){if(typeof r=="boolean"){const S=this.closeable_=!!r;let E=this.getChild("closeButton");if(S&&!E){const x=this.contentEl_;this.contentEl_=this.el_,E=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=x,this.on(E,"close",this.close_)}!S&&E&&(this.off(E,"close",this.close_),this.removeChild(E),E.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(r){const S=this.contentEl(),E=S.parentNode,x=S.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,E.removeChild(S),this.empty(),insertContent(S,r),this.trigger("modalfill"),x?E.insertBefore(S,x):E.appendChild(S);const C=this.getChild("closeButton");C&&E.appendChild(C.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")}content(r){return typeof r<"u"&&(this.content_=r),this.content_}conditionalFocus_(){const r=document$1$1.activeElement,S=this.player_.el_;this.previouslyActiveEl_=null,(S.contains(r)||S===r)&&(this.previouslyActiveEl_=r,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(r){if(this.trigger({type:"modalKeydown",originalEvent:r,target:this,bubbles:!0}),r.stopPropagation(),r.key==="Escape"&&this.closeable()){r.preventDefault(),this.close();return}if(r.key!=="Tab")return;const S=this.focusableEls_(),E=this.el_.querySelector(":focus");let x;for(let C=0;C<S.length;C++)if(E===S[C]){x=C;break}document$1$1.activeElement===this.el_&&(x=0),r.shiftKey&&x===0?(S[S.length-1].focus(),r.preventDefault()):!r.shiftKey&&x===S.length-1&&(S[0].focus(),r.preventDefault())}focusableEls_(){const r=this.el_.querySelectorAll("*");return Array.prototype.filter.call(r,S=>(S instanceof window$1$1.HTMLAnchorElement||S instanceof window$1$1.HTMLAreaElement)&&S.hasAttribute("href")||(S instanceof window$1$1.HTMLInputElement||S instanceof window$1$1.HTMLSelectElement||S instanceof window$1$1.HTMLTextAreaElement||S instanceof window$1$1.HTMLButtonElement)&&!S.hasAttribute("disabled")||S instanceof window$1$1.HTMLIFrameElement||S instanceof window$1$1.HTMLObjectElement||S instanceof window$1$1.HTMLEmbedElement||S.hasAttribute("tabindex")&&S.getAttribute("tabindex")!==-1||S.hasAttribute("contenteditable"))}}ModalDialog.prototype.options_={pauseOnOpen:!0,temporary:!0};Component$1.registerComponent("ModalDialog",ModalDialog);class TrackList extends EventTarget$2{constructor(r=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let S=0;S<r.length;S++)this.addTrack(r[S])}addTrack(r){const S=this.tracks_.length;""+S in this||Object.defineProperty(this,S,{get(){return this.tracks_[S]}}),this.tracks_.indexOf(r)===-1&&(this.tracks_.push(r),this.trigger({track:r,type:"addtrack",target:this})),r.labelchange_=()=>{this.trigger({track:r,type:"labelchange",target:this})},isEvented(r)&&r.addEventListener("labelchange",r.labelchange_)}removeTrack(r){let S;for(let E=0,x=this.length;E<x;E++)if(this[E]===r){S=this[E],S.off&&S.off(),this.tracks_.splice(E,1);break}S&&this.trigger({track:S,type:"removetrack",target:this})}getTrackById(r){let S=null;for(let E=0,x=this.length;E<x;E++){const C=this[E];if(C.id===r){S=C;break}}return S}}TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const o in TrackList.prototype.allowedEvents_)TrackList.prototype["on"+o]=null;const disableOthers$1=function(o,r){for(let S=0;S<o.length;S++)!Object.keys(o[S]).length||r.id===o[S].id||(o[S].enabled=!1)};class AudioTrackList extends TrackList{constructor(r=[]){for(let S=r.length-1;S>=0;S--)if(r[S].enabled){disableOthers$1(r,r[S]);break}super(r),this.changing_=!1}addTrack(r){r.enabled&&disableOthers$1(this,r),super.addTrack(r),r.addEventListener&&(r.enabledChange_=()=>{this.changing_||(this.changing_=!0,disableOthers$1(this,r),this.changing_=!1,this.trigger("change"))},r.addEventListener("enabledchange",r.enabledChange_))}removeTrack(r){super.removeTrack(r),r.removeEventListener&&r.enabledChange_&&(r.removeEventListener("enabledchange",r.enabledChange_),r.enabledChange_=null)}}const disableOthers=function(o,r){for(let S=0;S<o.length;S++)!Object.keys(o[S]).length||r.id===o[S].id||(o[S].selected=!1)};class VideoTrackList extends TrackList{constructor(r=[]){for(let S=r.length-1;S>=0;S--)if(r[S].selected){disableOthers(r,r[S]);break}super(r),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let S=0;S<this.length;S++)if(this[S].selected)return S;return-1},set(){}})}addTrack(r){r.selected&&disableOthers(this,r),super.addTrack(r),r.addEventListener&&(r.selectedChange_=()=>{this.changing_||(this.changing_=!0,disableOthers(this,r),this.changing_=!1,this.trigger("change"))},r.addEventListener("selectedchange",r.selectedChange_))}removeTrack(r){super.removeTrack(r),r.removeEventListener&&r.selectedChange_&&(r.removeEventListener("selectedchange",r.selectedChange_),r.selectedChange_=null)}}class TextTrackList extends TrackList{addTrack(r){super.addTrack(r),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),r.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(r.kind)===-1&&r.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(r){super.removeTrack(r),r.removeEventListener&&(this.queueChange_&&r.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&r.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class HtmlTrackElementList{constructor(r=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let S=0,E=r.length;S<E;S++)this.addTrackElement_(r[S])}addTrackElement_(r){const S=this.trackElements_.length;""+S in this||Object.defineProperty(this,S,{get(){return this.trackElements_[S]}}),this.trackElements_.indexOf(r)===-1&&this.trackElements_.push(r)}getTrackElementByTrack_(r){let S;for(let E=0,x=this.trackElements_.length;E<x;E++)if(r===this.trackElements_[E].track){S=this.trackElements_[E];break}return S}removeTrackElement_(r){for(let S=0,E=this.trackElements_.length;S<E;S++)if(r===this.trackElements_[S]){this.trackElements_[S].track&&typeof this.trackElements_[S].track.off=="function"&&this.trackElements_[S].track.off(),typeof this.trackElements_[S].off=="function"&&this.trackElements_[S].off(),this.trackElements_.splice(S,1);break}}}class TextTrackCueList{constructor(r){TextTrackCueList.prototype.setCues_.call(this,r),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(r){const S=this.length||0;let E=0;const x=r.length;this.cues_=r,this.length_=r.length;const C=function(R){""+R in this||Object.defineProperty(this,""+R,{get(){return this.cues_[R]}})};if(S<x)for(E=S;E<x;E++)C.call(this,E)}getCueById(r){let S=null;for(let E=0,x=this.length;E<x;E++){const C=this[E];if(C.id===r){S=C;break}}return S}}const VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};class Track extends EventTarget$2{constructor(r={}){super();const S={id:r.id||"vjs_track_"+newGUID(),kind:r.kind||"",language:r.language||""};let E=r.label||"";for(const x in S)Object.defineProperty(this,x,{get(){return S[x]},set(){}});Object.defineProperty(this,"label",{get(){return E},set(x){x!==E&&(E=x,this.trigger("labelchange"))}})}}const parseUrl=function(o){return new URL(o,document$1$1.baseURI)},getAbsoluteURL=function(o){return new URL(o,document$1$1.baseURI).href},getFileExtension=function(o){if(typeof o=="string"){const S=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(o);if(S)return S.pop().toLowerCase()}return""},isCrossOrigin=function(o,r=window$1$1.location){return parseUrl(o).origin!==r.origin};var Url=Object.freeze({__proto__:null,parseUrl,getAbsoluteURL,getFileExtension,isCrossOrigin});const parseCues=function(o,r){const S=new window$1$1.WebVTT.Parser(window$1$1,window$1$1.vttjs,window$1$1.WebVTT.StringDecoder()),E=[];S.oncue=function(x){r.addCue(x)},S.onparsingerror=function(x){E.push(x)},S.onflush=function(){r.trigger({type:"loadeddata",target:r})},S.parse(o),E.length>0&&(window$1$1.console&&window$1$1.console.groupCollapsed&&window$1$1.console.groupCollapsed(`Text Track parsing errors for ${r.src}`),E.forEach(x=>log$1.error(x)),window$1$1.console&&window$1$1.console.groupEnd&&window$1$1.console.groupEnd()),S.flush()},loadTrack=function(o,r){const S={uri:o},E=isCrossOrigin(o);E&&(S.cors=E);const x=r.tech_.crossOrigin()==="use-credentials";x&&(S.withCredentials=x),XHR(S,bind_(this,function(C,R,Ce){if(C)return log$1.error(C,R);r.loaded_=!0,typeof window$1$1.WebVTT!="function"?r.tech_&&r.tech_.any(["vttjsloaded","vttjserror"],Ue=>{if(Ue.type==="vttjserror"){log$1.error(`vttjs failed to load, stopping trying to process ${r.src}`);return}return parseCues(Ce,r)}):parseCues(Ce,r)}))};class TextTrack extends Track{constructor(r={}){if(!r.tech)throw new Error("A tech was not provided.");const S=merge$1(r,{kind:TextTrackKind[r.kind]||"subtitles",language:r.language||r.srclang||""});let E=TextTrackMode[S.mode]||"disabled";const x=S.default;(S.kind==="metadata"||S.kind==="chapters")&&(E="hidden"),super(S),this.tech_=S.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const C=new TextTrackCueList(this.cues_),R=new TextTrackCueList(this.activeCues_);let Ce=!1;this.timeupdateHandler=bind_(this,function(je={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){je.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,Ce&&(this.trigger("cuechange"),Ce=!1),je.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const Ue=()=>{this.stopTracking()};this.tech_.one("dispose",Ue),E!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return x},set(){}},mode:{get(){return E},set(je){TextTrackMode[je]&&E!==je&&(E=je,!this.preload_&&E!=="disabled"&&this.cues.length===0&&loadTrack(this.src,this),this.stopTracking(),E!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?C:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return R;const je=this.tech_.currentTime(),Xe=[];for(let Ye=0,St=this.cues.length;Ye<St;Ye++){const Dt=this.cues[Ye];Dt.startTime<=je&&Dt.endTime>=je&&Xe.push(Dt)}if(Ce=!1,Xe.length!==this.activeCues_.length)Ce=!0;else for(let Ye=0;Ye<Xe.length;Ye++)this.activeCues_.indexOf(Xe[Ye])===-1&&(Ce=!0);return this.activeCues_=Xe,R.setCues_(this.activeCues_),R},set(){}}}),S.src?(this.src=S.src,this.preload_||(this.loaded_=!0),(this.preload_||S.kind!=="subtitles"&&S.kind!=="captions")&&loadTrack(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(r){let S=r;if(!("getCueAsHTML"in S)){S=new window$1$1.vttjs.VTTCue(r.startTime,r.endTime,r.text);for(const x in r)x in S||(S[x]=r[x]);S.id=r.id,S.originalCue_=r}const E=this.tech_.textTracks();for(let x=0;x<E.length;x++)E[x]!==this&&E[x].removeCue(S);this.cues_.push(S),this.cues.setCues_(this.cues_)}removeCue(r){let S=this.cues_.length;for(;S--;){const E=this.cues_[S];if(E===r||E.originalCue_&&E.originalCue_===r){this.cues_.splice(S,1),this.cues.setCues_(this.cues_);break}}}}TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};class AudioTrack extends Track{constructor(r={}){const S=merge$1(r,{kind:AudioTrackKind[r.kind]||""});super(S);let E=!1;Object.defineProperty(this,"enabled",{get(){return E},set(x){typeof x!="boolean"||x===E||(E=x,this.trigger("enabledchange"))}}),S.enabled&&(this.enabled=S.enabled),this.loaded_=!0}}class VideoTrack extends Track{constructor(r={}){const S=merge$1(r,{kind:VideoTrackKind[r.kind]||""});super(S);let E=!1;Object.defineProperty(this,"selected",{get(){return E},set(x){typeof x!="boolean"||x===E||(E=x,this.trigger("selectedchange"))}}),S.selected&&(this.selected=S.selected)}}class HTMLTrackElement extends EventTarget$2{constructor(r={}){super();let S;const E=new TextTrack(r);this.kind=E.kind,this.src=E.src,this.srclang=E.language,this.label=E.label,this.default=E.default,Object.defineProperties(this,{readyState:{get(){return S}},track:{get(){return E}}}),S=HTMLTrackElement.NONE,E.addEventListener("loadeddata",()=>{S=HTMLTrackElement.LOADED,this.trigger({type:"load",target:this})})}}HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=0;HTMLTrackElement.LOADING=1;HTMLTrackElement.LOADED=2;HTMLTrackElement.ERROR=3;const NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(o){NORMAL[o].getterName=`${o}Tracks`,NORMAL[o].privateName=`${o}Tracks_`});const REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ALL=Object.assign({},NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(o,r,S,E,x={}){const C=o.textTracks();x.kind=r,S&&(x.label=S),E&&(x.language=E),x.tech=o;const R=new ALL.text.TrackClass(x);return C.addTrack(R),R}class Tech extends Component$1{constructor(r={},S=function(){}){r.reportTouchActivity=!1,super(null,r,S),this.onDurationChange_=E=>this.onDurationChange(E),this.trackProgress_=E=>this.trackProgress(E),this.trackCurrentTime_=E=>this.trackCurrentTime(E),this.stopTrackingCurrentTime_=E=>this.stopTrackingCurrentTime(E),this.disposeSourceHandler_=E=>this.disposeSourceHandler(E),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ALL.names.forEach(E=>{const x=ALL[E];r&&r[x.getterName]&&(this[x.privateName]=r[x.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(E=>{r[`native${E}Tracks`]===!1&&(this[`featuresNative${E}Tracks`]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=r.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ALL.text.ListClass,this.initTrackListeners(),r.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(r){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(r),1)),this.trigger({src:r,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(r){this.stopTrackingProgress(),this.progressInterval=this.setInterval(bind_(this,function(){const S=this.bufferedPercent();this.bufferedPercent_!==S&&this.trigger("progress"),this.bufferedPercent_=S,S===1&&this.stopTrackingProgress()}),500)}onDurationChange(r){this.duration_=this.duration()}buffered(){return createTimeRanges$1(0,0)}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(NORMAL.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(r){r=[].concat(r),r.forEach(S=>{const E=this[`${S}Tracks`]()||[];let x=E.length;for(;x--;){const C=E[x];S==="text"&&this.removeRemoteTextTrack(C),E.removeTrack(C)}})}cleanupAutoTextTracks(){const r=this.autoRemoteTextTracks_||[];let S=r.length;for(;S--;){const E=r[S];this.removeRemoteTextTrack(E)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(r){return r!==void 0&&(this.error_=new MediaError(r),this.trigger("error")),this.error_}played(){return this.hasStarted_?createTimeRanges$1(0,0):createTimeRanges$1()}play(){}setScrubbing(r){}scrubbing(){}setCurrentTime(r){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){NORMAL.names.forEach(r=>{const S=NORMAL[r],E=()=>{this.trigger(`${r}trackchange`)},x=this[S.getterName]();x.addEventListener("removetrack",E),x.addEventListener("addtrack",E),this.on("dispose",()=>{x.removeEventListener("removetrack",E),x.removeEventListener("addtrack",E)})})}addWebVttScript_(){if(!window$1$1.WebVTT)if(document$1$1.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(vtt)&&Object.keys(vtt).length>0){this.trigger("vttjsloaded");return}const r=document$1$1.createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",r.onload=()=>{this.trigger("vttjsloaded")},r.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{r.onload=null,r.onerror=null}),window$1$1.WebVTT=!0,this.el().parentNode.appendChild(r)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const r=this.textTracks(),S=this.remoteTextTracks(),E=Ce=>r.addTrack(Ce.track),x=Ce=>r.removeTrack(Ce.track);S.on("addtrack",E),S.on("removetrack",x),this.addWebVttScript_();const C=()=>this.trigger("texttrackchange"),R=()=>{C();for(let Ce=0;Ce<r.length;Ce++){const Ue=r[Ce];Ue.removeEventListener("cuechange",C),Ue.mode==="showing"&&Ue.addEventListener("cuechange",C)}};R(),r.addEventListener("change",R),r.addEventListener("addtrack",R),r.addEventListener("removetrack",R),this.on("dispose",function(){S.off("addtrack",E),S.off("removetrack",x),r.removeEventListener("change",R),r.removeEventListener("addtrack",R),r.removeEventListener("removetrack",R);for(let Ce=0;Ce<r.length;Ce++)r[Ce].removeEventListener("cuechange",C)})}addTextTrack(r,S,E){if(!r)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,r,S,E)}createRemoteTextTrack(r){const S=merge$1(r,{tech:this});return new REMOTE.remoteTextEl.TrackClass(S)}addRemoteTextTrack(r={},S){const E=this.createRemoteTextTrack(r);return typeof S!="boolean"&&(S=!1),this.remoteTextTrackEls().addTrackElement_(E),this.remoteTextTracks().addTrack(E.track),S===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(E.track)),E}removeRemoteTextTrack(r){const S=this.remoteTextTrackEls().getTrackElementByTrack_(r);this.remoteTextTrackEls().removeTrackElement_(S),this.remoteTextTracks().removeTrack(r),this.autoRemoteTextTracks_.removeTrack(r)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(r){const S=newGUID();return!this.isReady_||this.paused()?(this.queuedHanders_.add(S),this.one("playing",()=>{this.queuedHanders_.has(S)&&(this.queuedHanders_.delete(S),r())})):this.requestNamedAnimationFrame(S,r),S}cancelVideoFrameCallback(r){this.queuedHanders_.has(r)?this.queuedHanders_.delete(r):this.cancelNamedAnimationFrame(r)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(r){}overrideNativeVideoTracks(r){}canPlayType(r){return""}static canPlayType(r){return""}static canPlaySource(r,S){return Tech.canPlayType(r.type)}static isTech(r){return r.prototype instanceof Tech||r instanceof Tech||r===Tech}static registerTech(r,S){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(S))throw new Error(`Tech ${r} must be a Tech`);if(!Tech.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return r=toTitleCase$1(r),Tech.techs_[r]=S,Tech.techs_[toLowerCase(r)]=S,r!=="Tech"&&Tech.defaultTechOrder_.push(r),S}static getTech(r){if(r){if(Tech.techs_&&Tech.techs_[r])return Tech.techs_[r];if(r=toTitleCase$1(r),window$1$1&&window$1$1.videojs&&window$1$1.videojs[r])return log$1.warn(`The ${r} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),window$1$1.videojs[r]}}}ALL.names.forEach(function(o){const r=ALL[o];Tech.prototype[r.getterName]=function(){return this[r.privateName]=this[r.privateName]||new r.ListClass,this[r.privateName]}});Tech.prototype.featuresVolumeControl=!0;Tech.prototype.featuresMuteControl=!0;Tech.prototype.featuresFullscreenResize=!1;Tech.prototype.featuresPlaybackRate=!1;Tech.prototype.featuresProgressEvents=!1;Tech.prototype.featuresSourceset=!1;Tech.prototype.featuresTimeupdateEvents=!1;Tech.prototype.featuresNativeTextTracks=!1;Tech.prototype.featuresVideoFrameCallback=!1;Tech.withSourceHandlers=function(o){o.registerSourceHandler=function(S,E){let x=o.sourceHandlers;x||(x=o.sourceHandlers=[]),E===void 0&&(E=x.length),x.splice(E,0,S)},o.canPlayType=function(S){const E=o.sourceHandlers||[];let x;for(let C=0;C<E.length;C++)if(x=E[C].canPlayType(S),x)return x;return""},o.selectSourceHandler=function(S,E){const x=o.sourceHandlers||[];let C;for(let R=0;R<x.length;R++)if(C=x[R].canHandleSource(S,E),C)return x[R];return null},o.canPlaySource=function(S,E){const x=o.selectSourceHandler(S,E);return x?x.canHandleSource(S,E):""},["seekable","seeking","duration"].forEach(function(S){const E=this[S];typeof E=="function"&&(this[S]=function(){return this.sourceHandler_&&this.sourceHandler_[S]?this.sourceHandler_[S].apply(this.sourceHandler_,arguments):E.apply(this,arguments)})},o.prototype),o.prototype.setSource=function(S){let E=o.selectSourceHandler(S,this.options_);E||(o.nativeSourceHandler?E=o.nativeSourceHandler:log$1.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),E!==o.nativeSourceHandler&&(this.currentSource_=S),this.sourceHandler_=E.handleSource(S,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},o.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Component$1.registerComponent("Tech",Tech);Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];const middlewares={},middlewareInstances={},TERMINATOR={};function use(o,r){middlewares[o]=middlewares[o]||[],middlewares[o].push(r)}function setSource(o,r,S){o.setTimeout(()=>setSourceHelper(r,middlewares[r.type],S,o),1)}function setTech(o,r){o.forEach(S=>S.setTech&&S.setTech(r))}function get(o,r,S){return o.reduceRight(middlewareIterator(S),r[S]())}function set(o,r,S,E){return r[S](o.reduce(middlewareIterator(S),E))}function mediate(o,r,S,E=null){const x="call"+toTitleCase$1(S),C=o.reduce(middlewareIterator(x),E),R=C===TERMINATOR,Ce=R?null:r[S](C);return executeRight(o,S,Ce,R),Ce}const allowedGetters={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},allowedSetters={setCurrentTime:1,setMuted:1,setVolume:1},allowedMediators={play:1,pause:1};function middlewareIterator(o){return(r,S)=>r===TERMINATOR?TERMINATOR:S[o]?S[o](r):r}function executeRight(o,r,S,E){for(let x=o.length-1;x>=0;x--){const C=o[x];C[r]&&C[r](E,S)}}function clearCacheForPlayer(o){middlewareInstances.hasOwnProperty(o.id())&&delete middlewareInstances[o.id()]}function getOrCreateFactory(o,r){const S=middlewareInstances[o.id()];let E=null;if(S==null)return E=r(o),middlewareInstances[o.id()]=[[r,E]],E;for(let x=0;x<S.length;x++){const[C,R]=S[x];C===r&&(E=R)}return E===null&&(E=r(o),S.push([r,E])),E}function setSourceHelper(o={},r=[],S,E,x=[],C=!1){const[R,...Ce]=r;if(typeof R=="string")setSourceHelper(o,middlewares[R],S,E,x,C);else if(R){const Ue=getOrCreateFactory(E,R);if(!Ue.setSource)return x.push(Ue),setSourceHelper(o,Ce,S,E,x,C);Ue.setSource(Object.assign({},o),function(je,Xe){if(je)return setSourceHelper(o,Ce,S,E,x,C);x.push(Ue),setSourceHelper(Xe,o.type===Xe.type?Ce:middlewares[Xe.type],S,E,x,C)})}else Ce.length?setSourceHelper(o,Ce,S,E,x,C):C?S(o,x):setSourceHelper(o,middlewares["*"],S,E,x,!0)}const MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},getMimetype=function(o=""){const r=getFileExtension(o);return MimetypesKind[r.toLowerCase()]||""},findMimetype=(o,r)=>{if(!r)return"";if(o.cache_.source.src===r&&o.cache_.source.type)return o.cache_.source.type;const S=o.cache_.sources.filter(x=>x.src===r);if(S.length)return S[0].type;const E=o.$$("source");for(let x=0;x<E.length;x++){const C=E[x];if(C.type&&C.src&&C.src===r)return C.type}return getMimetype(r)},filterSource=function(o){if(Array.isArray(o)){let r=[];o.forEach(function(S){S=filterSource(S),Array.isArray(S)?r=r.concat(S):isObject(S)&&r.push(S)}),o=r}else typeof o=="string"&&o.trim()?o=[fixSource({src:o})]:isObject(o)&&typeof o.src=="string"&&o.src&&o.src.trim()?o=[fixSource(o)]:o=[];return o};function fixSource(o){if(!o.type){const r=getMimetype(o.src);r&&(o.type=r)}return o}var icons=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const backKeyCode=IS_TIZEN?10009:IS_WEBOS?461:8,SpatialNavKeyCodes={codes:{play:415,pause:19,ff:417,rw:412,back:backKeyCode},names:{415:"play",19:"pause",417:"ff",412:"rw",[backKeyCode]:"back"},isEventKey(o,r){return r=r.toLowerCase(),!!(this.names[o.keyCode]&&this.names[o.keyCode]===r)},getEventName(o){if(this.names[o.keyCode])return this.names[o.keyCode];if(this.codes[o.code]){const r=this.codes[o.code];return this.names[r]}return null}},STEP_SECONDS$1=5;class SpatialNavigation extends EventTarget$2{constructor(r){super(),this.player_=r,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(r){const S=r.originalEvent?r.originalEvent:r;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(S.key)){if(this.isPaused_)return;S.preventDefault();const E=S.key.substring(5).toLowerCase();this.move(E)}else if(SpatialNavKeyCodes.isEventKey(S,"play")||SpatialNavKeyCodes.isEventKey(S,"pause")||SpatialNavKeyCodes.isEventKey(S,"ff")||SpatialNavKeyCodes.isEventKey(S,"rw")){S.preventDefault();const E=SpatialNavKeyCodes.getEventName(S);this.performMediaAction_(E)}else SpatialNavKeyCodes.isEventKey(S,"Back")&&r.target&&typeof r.target.closeable=="function"&&r.target.closeable()&&(S.preventDefault(),r.target.close())}performMediaAction_(r){if(this.player_)switch(r){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+STEP_SECONDS$1);break;case"rw":this.userSeek_(this.player_.currentTime()-STEP_SECONDS$1);break}}userSeek_(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(r)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(r){const S=r.relatedTarget;let E=null;const x=this.getCurrentComponent(r.target);S&&(E=!!S.closest(".video-js"),S.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!r.currentTarget.contains(r.relatedTarget)&&!E||!S)&&(x&&x.name()==="CloseButton"?this.refocusComponent():(this.pause(),x&&x.el()&&(this.lastFocusedComponent_=x)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const r=this.player_,S=[];function E(x){for(const C of x)C.hasOwnProperty("el_")&&C.getIsFocusable()&&C.getIsAvailableToBeFocused(C.el())&&S.push(C),C.hasOwnProperty("children_")&&C.children_.length>0&&E(C.children_)}return r.children_.forEach(x=>{if(x.hasOwnProperty("el_"))if(x.getIsFocusable&&x.getIsAvailableToBeFocused&&x.getIsFocusable()&&x.getIsAvailableToBeFocused(x.el())){S.push(x);return}else x.hasOwnProperty("children_")&&x.children_.length>0?E(x.children_):x.hasOwnProperty("items")&&x.items.length>0?E(x.items):this.findSuitableDOMChild(x)&&S.push(x);if(x.name_==="ErrorDisplay"&&x.opened_){const C=x.el_.querySelector(".vjs-errors-ok-button-container");C&&C.querySelectorAll("button").forEach((Ce,Ue)=>{S.push({name:()=>"ModalButton"+(Ue+1),el:()=>Ce,getPositions:()=>{const je=Ce.getBoundingClientRect(),Xe={x:je.x,y:je.y,width:je.width,height:je.height,top:je.top,right:je.right,bottom:je.bottom,left:je.left},Ye={x:je.left+je.width/2,y:je.top+je.height/2,width:0,height:0,top:je.top+je.height/2,right:je.left+je.width/2,bottom:je.top+je.height/2,left:je.left+je.width/2};return{boundingClientRect:Xe,center:Ye}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:je=>!0,focus:()=>Ce.focus()})})}}),this.focusableComponents=S,this.focusableComponents}findSuitableDOMChild(r){function S(E){if(r.getIsFocusable(E)&&r.getIsAvailableToBeFocused(E))return E;for(let x=0;x<E.children.length;x++){const C=E.children[x],R=S(C);if(R)return R}return null}return r.el()?S(r.el()):null}getCurrentComponent(r){this.updateFocusableComponents();const S=r||document.activeElement;if(this.focusableComponents.length){for(const E of this.focusableComponents)if(E.el()===S)return E}}add(r){const S=[...this.focusableComponents];r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&S.push(r),this.focusableComponents=S,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(r){for(let S=0;S<this.focusableComponents.length;S++)if(this.focusableComponents[S].name()===r.name()){this.focusableComponents.splice(S,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(r){const S=this.getCurrentComponent();if(!S)return;const E=S.getPositions(),x=this.focusableComponents.filter(R=>R!==S&&this.isInDirection_(E.boundingClientRect,R.getPositions().boundingClientRect,r)),C=this.findBestCandidate_(E.center,x,r);C?this.focus(C):this.trigger({type:"endOfFocusableComponents",direction:r,focusedComponent:S})}findBestCandidate_(r,S,E){let x=1/0,C=null;for(const R of S){const Ce=R.getPositions().center,Ue=this.calculateDistance_(r,Ce,E);Ue<x&&(x=Ue,C=R)}return C}isInDirection_(r,S,E){switch(E){case"right":return S.left>=r.right;case"left":return S.right<=r.left;case"down":return S.top>=r.bottom;case"up":return S.bottom<=r.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let r=0;r<this.focusableComponents.length;r++)if(this.focusableComponents[r].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[r]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(r){typeof r=="object"&&(r.getIsAvailableToBeFocused(r.el())?r.focus():this.findSuitableDOMChild(r)&&this.findSuitableDOMChild(r).focus())}calculateDistance_(r,S,E){const x=Math.abs(r.x-S.x),C=Math.abs(r.y-S.y);let R;switch(E){case"right":case"left":R=x+C*100;break;case"up":R=C*2+x*.5;break;case"down":R=C*5+x;break;default:R=x+C}return R}searchForTrackSelect_(){const r=this;for(const S of r.updateFocusableComponents())if(S.constructor.name==="TextTrackSelect"){r.focus(S);break}}}class MediaLoader extends Component$1{constructor(r,S,E){const x=merge$1({createEl:!1},S);if(super(r,x,E),!S.playerOptions.sources||S.playerOptions.sources.length===0)for(let C=0,R=S.playerOptions.techOrder;C<R.length;C++){const Ce=toTitleCase$1(R[C]);let Ue=Tech.getTech(Ce);if(Ce||(Ue=Component$1.getComponent(Ce)),Ue&&Ue.isSupported()){r.loadTech_(Ce);break}}else r.src(S.playerOptions.sources)}}Component$1.registerComponent("MediaLoader",MediaLoader);class ClickableComponent extends Component$1{constructor(r,S){super(r,S),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=E=>this.handleMouseOver(E),this.handleMouseOut_=E=>this.handleMouseOut(E),this.handleClick_=E=>this.handleClick(E),this.handleKeyDown_=E=>this.handleKeyDown(E),this.emitTapEvents(),this.enable()}createEl(r="div",S={},E={}){S=Object.assign({className:this.buildCSSClass(),tabIndex:0},S),r==="button"&&log$1.error(`Creating a ClickableComponent with an HTML element of ${r} is not supported; use a Button instead.`),E=Object.assign({role:"button"},E),this.tabIndex_=S.tabIndex;const x=createEl(r,S,E);return this.player_.options_.experimentalSvgIcons||x.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(x),x}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(r){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),r&&r.appendChild(this.controlTextEl_),this.controlText(this.controlText_,r),this.controlTextEl_}controlText(r,S=this.el()){if(r===void 0)return this.controlText_||"Need Text";const E=this.localize(r);this.controlText_=r,textContent(this.controlTextEl_,E),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&S.setAttribute("title",E)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(r){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(r){r.key===" "||r.key==="Enter"?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):super.handleKeyDown(r)}}Component$1.registerComponent("ClickableComponent",ClickableComponent);class PosterImage extends ClickableComponent{constructor(r,S){super(r,S),this.update(),this.update_=E=>this.update(E),r.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return createEl("div",{className:"vjs-poster"})}crossOrigin(r){if(typeof r>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(r!==null&&r!=="anonymous"&&r!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${r}"`);return}this.$("img")&&(this.$("img").crossOrigin=r)}update(r){const S=this.player().poster();this.setSrc(S),S?this.show():this.hide()}setSrc(r){if(!r){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(createEl("picture",{className:"vjs-poster",tabIndex:-1},{},createEl("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=r}handleClick(r){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause())}}PosterImage.prototype.crossorigin=PosterImage.prototype.crossOrigin;Component$1.registerComponent("PosterImage",PosterImage);const darkGray="#222",lightGray="#ccc",fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(o,r){let S;if(o.length===4)S=o[1]+o[1]+o[2]+o[2]+o[3]+o[3];else if(o.length===7)S=o.slice(1);else throw new Error("Invalid color code provided, "+o+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(S.slice(0,2),16)+","+parseInt(S.slice(2,4),16)+","+parseInt(S.slice(4,6),16)+","+r+")"}function tryUpdateStyle(o,r,S){try{o.style[r]=S}catch{return}}function getCSSPositionValue(o){return o?`${o}px`:""}class TextTrackDisplay extends Component$1{constructor(r,S,E){super(r,S,E);const x=R=>this.updateDisplay(R),C=R=>{this.updateDisplayOverlay(),this.updateDisplay(R)};r.on("loadstart",R=>this.toggleDisplay(R)),r.on("texttrackchange",x),r.on("loadedmetadata",R=>{this.updateDisplayOverlay(),this.preselectTrack(R)}),r.ready(bind_(this,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",C),r.on("playerresize",C);const R=window$1$1.screen.orientation||window$1$1,Ce=window$1$1.screen.orientation?"change":"orientationchange";R.addEventListener(Ce,C),r.on("dispose",()=>R.removeEventListener(Ce,C));const Ue=this.options_.playerOptions.tracks||[];for(let je=0;je<Ue.length;je++)this.player_.addRemoteTextTrack(Ue[je],!0);this.preselectTrack()}))}preselectTrack(){const r={captions:1,subtitles:1},S=this.player_.textTracks(),E=this.player_.cache_.selectedLanguage;let x,C,R;for(let Ce=0;Ce<S.length;Ce++){const Ue=S[Ce];E&&E.enabled&&E.language&&E.language===Ue.language&&Ue.kind in r?Ue.kind===E.kind?R=Ue:R||(R=Ue):E&&!E.enabled?(R=null,x=null,C=null):Ue.default&&(Ue.kind==="descriptions"&&!x?x=Ue:Ue.kind in r&&!C&&(C=Ue))}R?R.mode="showing":C?C.mode="showing":x&&(x.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof window$1$1.WebVTT=="function"&&window$1$1.WebVTT.processCues(window$1$1,[],this.el_)}updateDisplay(){const r=this.player_.textTracks(),S=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),S){const R=[];for(let Ce=0;Ce<r.length;++Ce){const Ue=r[Ce];Ue.mode==="showing"&&R.push(Ue)}this.updateForTrack(R);return}let E=null,x=null,C=r.length;for(;C--;){const R=r[C];R.mode==="showing"&&(R.kind==="descriptions"?E=R:x=R)}if(x?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(x)):E&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(E)),!window$1$1.CSS.supports("inset","10px")){const R=this.el_,Ce=R.querySelectorAll(".vjs-text-track-cue"),Ue=this.player_.controlBar.el_.getBoundingClientRect().height,je=this.player_.el_.getBoundingClientRect().height;R.style="",tryUpdateStyle(R,"position","relative"),tryUpdateStyle(R,"height",je-Ue+"px"),tryUpdateStyle(R,"top","unset"),IS_SMART_TV?tryUpdateStyle(R,"bottom",je+"px"):tryUpdateStyle(R,"bottom","0px"),Ce.length>0&&Ce.forEach(Xe=>{if(Xe.style.inset){const Ye=Xe.style.inset.split(" ");Ye.length===3&&Object.assign(Xe.style,{top:Ye[0],right:Ye[1],bottom:Ye[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!window$1$1.CSS.supports("inset-inline: 10px"))return;const r=this.player_.currentWidth(),S=this.player_.currentHeight(),E=r/S,x=this.player_.videoWidth()/this.player_.videoHeight();let C=0,R=0;Math.abs(E-x)>.1&&(E>x?C=Math.round((r-S*x)/2):R=Math.round((S-r/x)/2)),tryUpdateStyle(this.el_,"insetInline",getCSSPositionValue(C)),tryUpdateStyle(this.el_,"insetBlock",getCSSPositionValue(R))}updateDisplayState(r){const S=this.player_.textTrackSettings.getValues(),E=r.activeCues;let x=E.length;for(;x--;){const C=E[x];if(!C)continue;const R=C.displayState;if(S.color&&(R.firstChild.style.color=S.color),S.textOpacity&&tryUpdateStyle(R.firstChild,"color",constructColor(S.color||"#fff",S.textOpacity)),S.backgroundColor&&(R.firstChild.style.backgroundColor=S.backgroundColor),S.backgroundOpacity&&tryUpdateStyle(R.firstChild,"backgroundColor",constructColor(S.backgroundColor||"#000",S.backgroundOpacity)),S.windowColor&&(S.windowOpacity?tryUpdateStyle(R,"backgroundColor",constructColor(S.windowColor,S.windowOpacity)):R.style.backgroundColor=S.windowColor),S.edgeStyle&&(S.edgeStyle==="dropshadow"?R.firstChild.style.textShadow=`2px 2px 3px ${darkGray}, 2px 2px 4px ${darkGray}, 2px 2px 5px ${darkGray}`:S.edgeStyle==="raised"?R.firstChild.style.textShadow=`1px 1px ${darkGray}, 2px 2px ${darkGray}, 3px 3px ${darkGray}`:S.edgeStyle==="depressed"?R.firstChild.style.textShadow=`1px 1px ${lightGray}, 0 1px ${lightGray}, -1px -1px ${darkGray}, 0 -1px ${darkGray}`:S.edgeStyle==="uniform"&&(R.firstChild.style.textShadow=`0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}`)),S.fontPercent&&S.fontPercent!==1){const Ce=window$1$1.parseFloat(R.style.fontSize);R.style.fontSize=Ce*S.fontPercent+"px",R.style.height="auto",R.style.top="auto"}S.fontFamily&&S.fontFamily!=="default"&&(S.fontFamily==="small-caps"?R.firstChild.style.fontVariant="small-caps":R.firstChild.style.fontFamily=fontMap[S.fontFamily])}}updateForTrack(r){if(Array.isArray(r)||(r=[r]),typeof window$1$1.WebVTT!="function"||r.every(E=>!E.activeCues))return;const S=[];for(let E=0;E<r.length;++E){const x=r[E];for(let C=0;C<x.activeCues.length;++C)S.push(x.activeCues[C])}window$1$1.WebVTT.processCues(window$1$1,S,this.el_);for(let E=0;E<r.length;++E){const x=r[E];for(let C=0;C<x.activeCues.length;++C){const R=x.activeCues[C].displayState;addClass(R,"vjs-text-track-cue","vjs-text-track-cue-"+(x.language?x.language:E)),x.language&&setAttribute(R,"lang",x.language)}this.player_.textTrackSettings&&this.updateDisplayState(x)}}}Component$1.registerComponent("TextTrackDisplay",TextTrackDisplay);class LoadingSpinner extends Component$1{createEl(){const r=this.player_.isAudio(),S=this.localize(r?"Audio Player":"Video Player"),E=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[S])}),x=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return x.appendChild(E),x}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Component$1.registerComponent("LoadingSpinner",LoadingSpinner);class Button extends ClickableComponent{createEl(r,S={},E={}){r="button",S=Object.assign({className:this.buildCSSClass()},S),E=Object.assign({type:"button"},E);const x=createEl(r,S,E);return this.player_.options_.experimentalSvgIcons||x.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(x),x}addChild(r,S={}){const E=this.constructor.name;return log$1.warn(`Adding an actionable (user controllable) child to a Button (${E}) is not supported; use a ClickableComponent instead.`),Component$1.prototype.addChild.call(this,r,S)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(r){if(r.key===" "||r.key==="Enter"){r.stopPropagation();return}super.handleKeyDown(r)}}Component$1.registerComponent("Button",Button);class BigPlayButton extends Button{constructor(r,S){super(r,S),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",E=>this.handleMouseDown(E))}buildCSSClass(){return"vjs-big-play-button"}handleClick(r){const S=this.player_.play();if(this.mouseused_&&"clientX"in r&&"clientY"in r){silencePromise(S),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const E=this.player_.getChild("controlBar"),x=E&&E.getChild("playToggle");if(!x){this.player_.tech(!0).focus();return}const C=()=>x.focus();isPromise(S)?S.then(C,()=>{}):this.setTimeout(C,1)}handleKeyDown(r){this.mouseused_=!1,super.handleKeyDown(r)}handleMouseDown(r){this.mouseused_=!0}}BigPlayButton.prototype.controlText_="Play Video";Component$1.registerComponent("BigPlayButton",BigPlayButton);class CloseButton extends Button{constructor(r,S){super(r,S),this.setIcon("cancel"),this.controlText(S&&S.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(r){this.trigger({type:"close",bubbles:!1})}handleKeyDown(r){r.key==="Escape"?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):super.handleKeyDown(r)}}Component$1.registerComponent("CloseButton",CloseButton);class PlayToggle extends Button{constructor(r,S={}){super(r,S),S.replay=S.replay===void 0||S.replay,this.setIcon("play"),this.on(r,"play",E=>this.handlePlay(E)),this.on(r,"pause",E=>this.handlePause(E)),S.replay&&this.on(r,"ended",E=>this.handleEnded(E))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(r){this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}handleSeeked(r){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(r):this.handlePlay(r)}handlePlay(r){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(r){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(r){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",S=>this.handleSeeked(S))}}PlayToggle.prototype.controlText_="Play";Component$1.registerComponent("PlayToggle",PlayToggle);class TimeDisplay extends Component$1{constructor(r,S){super(r,S),this.on(r,["timeupdate","ended","seeking"],E=>this.update(E)),this.updateTextNode_()}createEl(){const r=this.buildCSSClass(),S=super.createEl("div",{className:`${r} vjs-time-control vjs-control`}),E=createEl("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return S.appendChild(E),this.contentEl_=createEl("span",{className:`${r}-display`},{role:"presentation"}),S.appendChild(this.contentEl_),S}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(r){!this.player_.options_.enableSmoothSeeking&&r.type==="seeking"||this.updateContent(r)}updateTextNode_(r=0){r=formatTime(r),this.formattedTime_!==r&&(this.formattedTime_=r,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let S=this.textNode_;S&&this.contentEl_.firstChild!==S&&(S=null,log$1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=document$1$1.createTextNode(this.formattedTime_),this.textNode_&&(S?this.contentEl_.replaceChild(this.textNode_,S):this.contentEl_.appendChild(this.textNode_))}))}updateContent(r){}}TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component$1.registerComponent("TimeDisplay",TimeDisplay);class CurrentTimeDisplay extends TimeDisplay{buildCSSClass(){return"vjs-current-time"}updateContent(r){let S;this.player_.ended()?S=this.player_.duration():S=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(S)}}CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component$1.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);class DurationDisplay extends TimeDisplay{constructor(r,S){super(r,S);const E=x=>this.updateContent(x);this.on(r,"durationchange",E),this.on(r,"loadstart",E),this.on(r,"loadedmetadata",E)}buildCSSClass(){return"vjs-duration"}updateContent(r){const S=this.player_.duration();this.updateTextNode_(S)}}DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component$1.registerComponent("DurationDisplay",DurationDisplay);class TimeDivider extends Component$1{createEl(){const r=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),S=super.createEl("div"),E=super.createEl("span",{textContent:"/"});return S.appendChild(E),r.appendChild(S),r}}Component$1.registerComponent("TimeDivider",TimeDivider);class RemainingTimeDisplay extends TimeDisplay{constructor(r,S){super(r,S),this.on(r,"durationchange",E=>this.updateContent(E))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const r=super.createEl();return this.options_.displayNegative!==!1&&r.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),r}updateContent(r){if(typeof this.player_.duration()!="number")return;let S;this.player_.ended()?S=0:this.player_.remainingTimeDisplay?S=this.player_.remainingTimeDisplay():S=this.player_.remainingTime(),this.updateTextNode_(S)}}RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component$1.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);class LiveDisplay extends Component$1{constructor(r,S){super(r,S),this.updateShowing(),this.on(this.player(),"durationchange",E=>this.updateShowing(E))}createEl(){const r=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(document$1$1.createTextNode(this.localize("LIVE"))),r.appendChild(this.contentEl_),r}dispose(){this.contentEl_=null,super.dispose()}updateShowing(r){this.player().duration()===1/0?this.show():this.hide()}}Component$1.registerComponent("LiveDisplay",LiveDisplay);class SeekToLive extends Button{constructor(r,S){super(r,S),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=E=>this.updateLiveEdgeStatus(E),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const r=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",r),this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),r.appendChild(this.textEl_),r}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component$1.registerComponent("SeekToLive",SeekToLive);function clamp(o,r,S){return o=Number(o),Math.min(S,Math.max(r,isNaN(o)?r:o))}var Num=Object.freeze({__proto__:null,clamp});class Slider extends Component$1{constructor(r,S){super(r,S),this.handleMouseDown_=E=>this.handleMouseDown(E),this.handleMouseUp_=E=>this.handleMouseUp(E),this.handleKeyDown_=E=>this.handleKeyDown(E),this.handleClick_=E=>this.handleClick(E),this.handleMouseMove_=E=>this.handleMouseMove(E),this.update_=E=>this.update(E),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const r=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(r,S={},E={}){return S.className=S.className+" vjs-slider",S=Object.assign({tabIndex:0},S),E=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},E),super.createEl(r,S,E)}handleMouseDown(r){const S=this.bar.el_.ownerDocument;r.type==="mousedown"&&r.preventDefault(),r.type==="touchstart"&&!IS_CHROME&&r.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(S,"mousemove",this.handleMouseMove_),this.on(S,"mouseup",this.handleMouseUp_),this.on(S,"touchmove",this.handleMouseMove_),this.on(S,"touchend",this.handleMouseUp_),this.handleMouseMove(r,!0)}handleMouseMove(r){}handleMouseUp(r){const S=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(S,"mousemove",this.handleMouseMove_),this.off(S,"mouseup",this.handleMouseUp_),this.off(S,"touchmove",this.handleMouseMove_),this.off(S,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const r=this.getProgress();return r===this.progress_||(this.progress_=r,this.requestNamedAnimationFrame("Slider#update",()=>{const S=this.vertical()?"height":"width";this.bar.el().style[S]=(r*100).toFixed(2)+"%"})),r}getProgress(){return Number(clamp(this.getPercent(),0,1).toFixed(4))}calculateDistance(r){const S=getPointerPosition(this.el_,r);return this.vertical()?S.y:S.x}handleKeyDown(r){const S=this.options_.playerOptions.spatialNavigation,E=S&&S.enabled,x=S&&S.horizontalSeek;E?x&&r.key==="ArrowLeft"||!x&&r.key==="ArrowDown"?(r.preventDefault(),r.stopPropagation(),this.stepBack()):x&&r.key==="ArrowRight"||!x&&r.key==="ArrowUp"?(r.preventDefault(),r.stopPropagation(),this.stepForward()):super.handleKeyDown(r):r.key==="ArrowLeft"||r.key==="ArrowDown"?(r.preventDefault(),r.stopPropagation(),this.stepBack()):r.key==="ArrowUp"||r.key==="ArrowRight"?(r.preventDefault(),r.stopPropagation(),this.stepForward()):super.handleKeyDown(r)}handleClick(r){r.stopPropagation(),r.preventDefault()}vertical(r){if(r===void 0)return this.vertical_||!1;this.vertical_=!!r,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Component$1.registerComponent("Slider",Slider);const percentify=(o,r)=>clamp(o/r*100,0,100).toFixed(2)+"%";class LoadProgressBar extends Component$1{constructor(r,S){super(r,S),this.partEls_=[],this.on(r,"progress",E=>this.update(E))}createEl(){const r=super.createEl("div",{className:"vjs-load-progress"}),S=createEl("span",{className:"vjs-control-text"}),E=createEl("span",{textContent:this.localize("Loaded")}),x=document$1$1.createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),r.appendChild(S),S.appendChild(E),S.appendChild(x),S.appendChild(this.percentageEl_),r}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(r){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const S=this.player_.liveTracker,E=this.player_.buffered(),x=S&&S.isLive()?S.seekableEnd():this.player_.duration(),C=this.player_.bufferedEnd(),R=this.partEls_,Ce=percentify(C,x);this.percent_!==Ce&&(this.el_.style.width=Ce,textContent(this.percentageEl_,Ce),this.percent_=Ce);for(let Ue=0;Ue<E.length;Ue++){const je=E.start(Ue),Xe=E.end(Ue);let Ye=R[Ue];Ye||(Ye=this.el_.appendChild(createEl()),R[Ue]=Ye),!(Ye.dataset.start===je&&Ye.dataset.end===Xe)&&(Ye.dataset.start=je,Ye.dataset.end=Xe,Ye.style.left=percentify(je,C),Ye.style.width=percentify(Xe-je,C))}for(let Ue=R.length;Ue>E.length;Ue--)this.el_.removeChild(R[Ue-1]);R.length=E.length})}}Component$1.registerComponent("LoadProgressBar",LoadProgressBar);class TimeTooltip extends Component$1{constructor(r,S){super(r,S),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(r,S,E){const x=findPosition(this.el_),C=getBoundingClientRect(this.player_.el()),R=r.width*S;if(!C||!x)return;let Ce=r.left-C.left+R,Ue=r.width-R+(C.right-r.right);Ue||(Ue=r.width-R,Ce=R);let je=x.width/2;Ce<je?je+=je-Ce:Ue<je&&(je=Ue),je<0?je=0:je>x.width&&(je=x.width),je=Math.round(je),this.el_.style.right=`-${je}px`,this.write(E)}write(r){textContent(this.el_,r)}updateTime(r,S,E,x){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let C;const R=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const Ce=this.player_.liveTracker.liveWindow(),Ue=Ce-S*Ce;C=(Ue<1?"":"-")+formatTime(Ue,Ce)}else C=formatTime(E,R);this.update(r,S,C),x&&x()})}}Component$1.registerComponent("TimeTooltip",TimeTooltip);class PlayProgressBar extends Component$1{constructor(r,S){super(r,S),this.setIcon("circle"),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(r,S){const E=this.getChild("timeTooltip");if(!E)return;const x=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();E.updateTime(r,S,x)}}PlayProgressBar.prototype.options_={children:[]};!IS_IOS&&!IS_ANDROID&&PlayProgressBar.prototype.options_.children.push("timeTooltip");Component$1.registerComponent("PlayProgressBar",PlayProgressBar);class MouseTimeDisplay extends Component$1{constructor(r,S){super(r,S),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(r,S){const E=S*this.player_.duration();this.getChild("timeTooltip").updateTime(r,S,E,()=>{this.el_.style.left=`${r.width*S}px`})}}MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component$1.registerComponent("MouseTimeDisplay",MouseTimeDisplay);const STEP_SECONDS=5,PAGE_KEY_MULTIPLIER=12;class SeekBar extends Slider{constructor(r,S){super(r,S),this.setEventHandlers_()}setEventHandlers_(){this.update_=bind_(this,this.update),this.update=throttle$1(this.update_,UPDATE_REFRESH_INTERVAL),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=r=>this.enableInterval_(r),this.disableIntervalHandler_=r=>this.disableInterval_(r),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1$1&&"visibilityState"in document$1$1&&this.on(document$1$1,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(r){document$1$1.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(r)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,UPDATE_REFRESH_INTERVAL))}disableInterval_(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&r&&r.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(r){if(document$1$1.visibilityState==="hidden")return;const S=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const E=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),x=this.player_.liveTracker;let C=this.player_.duration();x&&x.isLive()&&(C=this.player_.liveTracker.liveCurrentTime()),this.percent_!==S&&(this.el_.setAttribute("aria-valuenow",(S*100).toFixed(2)),this.percent_=S),(this.currentTime_!==E||this.duration_!==C)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(E,C),formatTime(C,C)],"{1} of {2}")),this.currentTime_=E,this.duration_=C),this.bar&&this.bar.update(getBoundingClientRect(this.el()),this.getProgress())}),S}userSeek_(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(r)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const r=this.getCurrentTime_();let S;const E=this.player_.liveTracker;return E&&E.isLive()?(S=(r-E.seekableStart())/E.liveWindow(),E.atLiveEdge()&&(S=1)):S=r/this.player_.duration(),S}handleMouseDown(r){isSingleLeftClick(r)&&(r.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(r))}handleMouseMove(r,S=!1){if(!isSingleLeftClick(r)||isNaN(this.player_.duration()))return;!S&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let E;const x=this.calculateDistance(r),C=this.player_.liveTracker;if(!C||!C.isLive())E=x*this.player_.duration(),E===this.player_.duration()&&(E=E-.1);else{if(x>=.99){C.seekToLiveEdge();return}const R=C.seekableStart(),Ce=C.liveCurrentTime();if(E=R+x*C.liveWindow(),E>=Ce&&(E=Ce),E<=R&&(E=R+.1),E===1/0)return}this.userSeek_(E),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const r=this.getChild("mouseTimeDisplay");r&&r.show()}disable(){super.disable();const r=this.getChild("mouseTimeDisplay");r&&r.hide()}handleMouseUp(r){super.handleMouseUp(r),r&&r.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+STEP_SECONDS)}stepBack(){this.userSeek_(this.player_.currentTime()-STEP_SECONDS)}handleAction(r){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(r){const S=this.player_.liveTracker;if(r.key===" "||r.key==="Enter")r.preventDefault(),r.stopPropagation(),this.handleAction(r);else if(r.key==="Home")r.preventDefault(),r.stopPropagation(),this.userSeek_(0);else if(r.key==="End")r.preventDefault(),r.stopPropagation(),S&&S.isLive()?this.userSeek_(S.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(r.key)){r.preventDefault(),r.stopPropagation();const E=parseInt(r.key,10)*.1;S&&S.isLive()?this.userSeek_(S.seekableStart()+S.liveWindow()*E):this.userSeek_(this.player_.duration()*E)}else r.key==="PageDown"?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER)):r.key==="PageUp"?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER)):super.handleKeyDown(r)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1$1&&"visibilityState"in document$1$1&&this.off(document$1$1,"visibilitychange",this.toggleVisibility_),super.dispose()}}SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!IS_IOS&&!IS_ANDROID&&SeekBar.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Component$1.registerComponent("SeekBar",SeekBar);class ProgressControl extends Component$1{constructor(r,S){super(r,S),this.handleMouseMove=throttle$1(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.throttledHandleMouseSeek=throttle$1(bind_(this,this.handleMouseSeek),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=E=>this.handleMouseUp(E),this.handleMouseDownHandler_=E=>this.handleMouseDown(E),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(r){const S=this.getChild("seekBar");if(!S)return;const E=S.getChild("playProgressBar"),x=S.getChild("mouseTimeDisplay");if(!E&&!x)return;const C=S.el(),R=findPosition(C);let Ce=getPointerPosition(C,r).x;Ce=clamp(Ce,0,1),x&&x.update(R,Ce),E&&E.update(R,S.getProgress())}handleMouseSeek(r){const S=this.getChild("seekBar");S&&S.handleMouseMove(r)}enabled(){return this.enabled_}disable(){if(this.children().forEach(r=>r.disable&&r.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const r=this.getChild("seekBar");this.player_.scrubbing(!1),r.videoWasPlaying&&silencePromise(this.player_.play())}}enable(){this.children().forEach(r=>r.enable&&r.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const r=this.el_.ownerDocument;this.off(r,"mousemove",this.throttledHandleMouseSeek),this.off(r,"touchmove",this.throttledHandleMouseSeek),this.off(r,"mouseup",this.handleMouseUpHandler_),this.off(r,"touchend",this.handleMouseUpHandler_)}handleMouseDown(r){const S=this.el_.ownerDocument,E=this.getChild("seekBar");E&&E.handleMouseDown(r),this.on(S,"mousemove",this.throttledHandleMouseSeek),this.on(S,"touchmove",this.throttledHandleMouseSeek),this.on(S,"mouseup",this.handleMouseUpHandler_),this.on(S,"touchend",this.handleMouseUpHandler_)}handleMouseUp(r){const S=this.getChild("seekBar");S&&S.handleMouseUp(r),this.removeListenersAddedOnMousedownAndTouchstart()}}ProgressControl.prototype.options_={children:["seekBar"]};Component$1.registerComponent("ProgressControl",ProgressControl);class PictureInPictureToggle extends Button{constructor(r,S){super(r,S),this.setIcon("picture-in-picture-enter"),this.on(r,["enterpictureinpicture","leavepictureinpicture"],E=>this.handlePictureInPictureChange(E)),this.on(r,["disablepictureinpicturechanged","loadedmetadata"],E=>this.handlePictureInPictureEnabledChange(E)),this.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){document$1$1.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in window$1$1?this.enable():this.disable()}handlePictureInPictureChange(r){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(r){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof document$1$1.exitPictureInPicture=="function"&&super.show()}}PictureInPictureToggle.prototype.controlText_="Picture-in-Picture";Component$1.registerComponent("PictureInPictureToggle",PictureInPictureToggle);class FullscreenToggle extends Button{constructor(r,S){super(r,S),this.setIcon("fullscreen-enter"),this.on(r,"fullscreenchange",E=>this.handleFullscreenChange(E)),document$1$1[r.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(r){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(r){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}FullscreenToggle.prototype.controlText_="Fullscreen";Component$1.registerComponent("FullscreenToggle",FullscreenToggle);const checkVolumeSupport=function(o,r){r.tech_&&!r.tech_.featuresVolumeControl&&o.addClass("vjs-hidden"),o.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?o.removeClass("vjs-hidden"):o.addClass("vjs-hidden")})};class VolumeLevel extends Component$1{createEl(){const r=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",r),r.appendChild(super.createEl("span",{className:"vjs-control-text"})),r}}Component$1.registerComponent("VolumeLevel",VolumeLevel);class VolumeLevelTooltip extends Component$1{constructor(r,S){super(r,S),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(r,S,E,x){if(!E){const C=getBoundingClientRect(this.el_),R=getBoundingClientRect(this.player_.el()),Ce=r.width*S;if(!R||!C)return;const Ue=r.left-R.left+Ce,je=r.width-Ce+(R.right-r.right);let Xe=C.width/2;Ue<Xe?Xe+=Xe-Ue:je<Xe&&(Xe=je),Xe<0?Xe=0:Xe>C.width&&(Xe=C.width),this.el_.style.right=`-${Xe}px`}this.write(`${x}%`)}write(r){textContent(this.el_,r)}updateVolume(r,S,E,x,C){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(r,S,E,x.toFixed(0)),C&&C()})}}Component$1.registerComponent("VolumeLevelTooltip",VolumeLevelTooltip);class MouseVolumeLevelDisplay extends Component$1{constructor(r,S){super(r,S),this.update=throttle$1(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(r,S,E){const x=100*S;this.getChild("volumeLevelTooltip").updateVolume(r,S,E,x,()=>{E?this.el_.style.bottom=`${r.height*S}px`:this.el_.style.left=`${r.width*S}px`})}}MouseVolumeLevelDisplay.prototype.options_={children:["volumeLevelTooltip"]};Component$1.registerComponent("MouseVolumeLevelDisplay",MouseVolumeLevelDisplay);class VolumeBar extends Slider{constructor(r,S){super(r,S),this.on("slideractive",E=>this.updateLastVolume_(E)),this.on(r,"volumechange",E=>this.updateARIAAttributes(E)),r.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(r){isSingleLeftClick(r)&&super.handleMouseDown(r)}handleMouseMove(r){const S=this.getChild("mouseVolumeLevelDisplay");if(S){const E=this.el(),x=getBoundingClientRect(E),C=this.vertical();let R=getPointerPosition(E,r);R=C?R.y:R.x,R=clamp(R,0,1),S.update(x,R,C)}isSingleLeftClick(r)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(r)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(r){const S=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",S),this.el_.setAttribute("aria-valuetext",S+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const r=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(r)})}}VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!IS_IOS&&!IS_ANDROID&&VolumeBar.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");VolumeBar.prototype.playerEvent="volumechange";Component$1.registerComponent("VolumeBar",VolumeBar);class VolumeControl extends Component$1{constructor(r,S={}){S.vertical=S.vertical||!1,(typeof S.volumeBar>"u"||isPlain(S.volumeBar))&&(S.volumeBar=S.volumeBar||{},S.volumeBar.vertical=S.vertical),super(r,S),checkVolumeSupport(this,r),this.throttledHandleMouseMove=throttle$1(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=E=>this.handleMouseUp(E),this.on("mousedown",E=>this.handleMouseDown(E)),this.on("touchstart",E=>this.handleMouseDown(E)),this.on("mousemove",E=>this.handleMouseMove(E)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let r="vjs-volume-horizontal";return this.options_.vertical&&(r="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${r}`})}handleMouseDown(r){const S=this.el_.ownerDocument;this.on(S,"mousemove",this.throttledHandleMouseMove),this.on(S,"touchmove",this.throttledHandleMouseMove),this.on(S,"mouseup",this.handleMouseUpHandler_),this.on(S,"touchend",this.handleMouseUpHandler_)}handleMouseUp(r){const S=this.el_.ownerDocument;this.off(S,"mousemove",this.throttledHandleMouseMove),this.off(S,"touchmove",this.throttledHandleMouseMove),this.off(S,"mouseup",this.handleMouseUpHandler_),this.off(S,"touchend",this.handleMouseUpHandler_)}handleMouseMove(r){this.volumeBar.handleMouseMove(r)}}VolumeControl.prototype.options_={children:["volumeBar"]};Component$1.registerComponent("VolumeControl",VolumeControl);const checkMuteSupport=function(o,r){r.tech_&&!r.tech_.featuresMuteControl&&o.addClass("vjs-hidden"),o.on(r,"loadstart",function(){r.tech_.featuresMuteControl?o.removeClass("vjs-hidden"):o.addClass("vjs-hidden")})};class MuteToggle extends Button{constructor(r,S){super(r,S),checkMuteSupport(this,r),this.on(r,["loadstart","volumechange"],E=>this.update(E))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(r){const S=this.player_.volume(),E=this.player_.lastVolume_();if(S===0){const x=E<.1?.1:E;this.player_.volume(x),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(r){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const r=this.player_.volume();let S=3;this.setIcon("volume-high"),IS_IOS&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),r===0||this.player_.muted()?(this.setIcon("volume-mute"),S=0):r<.33?(this.setIcon("volume-low"),S=1):r<.67&&(this.setIcon("volume-medium"),S=2),removeClass(this.el_,[0,1,2,3].reduce((E,x)=>E+`${x?" ":""}vjs-vol-${x}`,"")),addClass(this.el_,`vjs-vol-${S}`)}updateControlText_(){const S=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==S&&this.controlText(S)}}MuteToggle.prototype.controlText_="Mute";Component$1.registerComponent("MuteToggle",MuteToggle);class VolumePanel extends Component$1{constructor(r,S={}){typeof S.inline<"u"?S.inline=S.inline:S.inline=!0,(typeof S.volumeControl>"u"||isPlain(S.volumeControl))&&(S.volumeControl=S.volumeControl||{},S.volumeControl.vertical=!S.inline),super(r,S),this.handleKeyPressHandler_=E=>this.handleKeyPress(E),this.on(r,["loadstart"],E=>this.volumePanelState_(E)),this.on(this.muteToggle,"keyup",E=>this.handleKeyPress(E)),this.on(this.volumeControl,"keyup",E=>this.handleVolumeControlKeyUp(E)),this.on("keydown",E=>this.handleKeyPress(E)),this.on("mouseover",E=>this.handleMouseOver(E)),this.on("mouseout",E=>this.handleMouseOut(E)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let r="vjs-volume-panel-horizontal";return this.options_.inline||(r="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${r}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(r){r.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(r){this.addClass("vjs-hover"),on$1(document$1$1,"keyup",this.handleKeyPressHandler_)}handleMouseOut(r){this.removeClass("vjs-hover"),off$1(document$1$1,"keyup",this.handleKeyPressHandler_)}handleKeyPress(r){r.key==="Escape"&&this.handleMouseOut()}}VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component$1.registerComponent("VolumePanel",VolumePanel);class SkipForward extends Button{constructor(r,S){super(r,S),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(r.language())])),this.show()):this.hide()}getSkipForwardTime(){const r=this.options_.playerOptions;return r.controlBar&&r.controlBar.skipButtons&&r.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(r){if(isNaN(this.player_.duration()))return;const S=this.player_.currentTime(),E=this.player_.liveTracker,x=E&&E.isLive()?E.seekableEnd():this.player_.duration();let C;S+this.skipTime<=x?C=S+this.skipTime:C=x,this.player_.currentTime(C)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}SkipForward.prototype.controlText_="Skip Forward";Component$1.registerComponent("SkipForward",SkipForward);class SkipBackward extends Button{constructor(r,S){super(r,S),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(r.language())])),this.show()):this.hide()}getSkipBackwardTime(){const r=this.options_.playerOptions;return r.controlBar&&r.controlBar.skipButtons&&r.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(r){const S=this.player_.currentTime(),E=this.player_.liveTracker,x=E&&E.isLive()&&E.seekableStart();let C;x&&S-this.skipTime<=x?C=x:S>=this.skipTime?C=S-this.skipTime:C=0,this.player_.currentTime(C)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}SkipBackward.prototype.controlText_="Skip Backward";Component$1.registerComponent("SkipBackward",SkipBackward);class Menu extends Component$1{constructor(r,S){super(r,S),S&&(this.menuButton_=S.menuButton),this.focusedChild_=-1,this.on("keydown",E=>this.handleKeyDown(E)),this.boundHandleBlur_=E=>this.handleBlur(E),this.boundHandleTapClick_=E=>this.handleTapClick(E)}addEventListenerForItem(r){r instanceof Component$1&&(this.on(r,"blur",this.boundHandleBlur_),this.on(r,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(r){r instanceof Component$1&&(this.off(r,"blur",this.boundHandleBlur_),this.off(r,["tap","click"],this.boundHandleTapClick_))}removeChild(r){typeof r=="string"&&(r=this.getChild(r)),this.removeEventListenerForItem(r),super.removeChild(r)}addItem(r){const S=this.addChild(r);S&&this.addEventListenerForItem(S)}createEl(){const r=this.options_.contentElType||"ul";this.contentEl_=createEl(r,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const S=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return S.appendChild(this.contentEl_),on$1(S,"click",function(E){E.preventDefault(),E.stopImmediatePropagation()}),S}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(r){const S=r.relatedTarget||document$1$1.activeElement;if(!this.children().some(E=>E.el()===S)){const E=this.menuButton_;E&&E.buttonPressed_&&S!==E.el().firstChild&&E.unpressButton()}}handleTapClick(r){if(this.menuButton_){this.menuButton_.unpressButton();const S=this.children();if(!Array.isArray(S))return;const E=S.filter(x=>x.el()===r.target)[0];if(!E)return;E.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(r){r.key==="ArrowLeft"||r.key==="ArrowDown"?(r.preventDefault(),r.stopPropagation(),this.stepForward()):(r.key==="ArrowRight"||r.key==="ArrowUp")&&(r.preventDefault(),r.stopPropagation(),this.stepBack())}stepForward(){let r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_+1),this.focus(r)}stepBack(){let r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_-1),this.focus(r)}focus(r=0){const S=this.children().slice();S.length&&S[0].hasClass("vjs-menu-title")&&S.shift(),S.length>0&&(r<0?r=0:r>=S.length&&(r=S.length-1),this.focusedChild_=r,S[r].el_.focus())}}Component$1.registerComponent("Menu",Menu);class MenuButton extends Component$1{constructor(r,S={}){super(r,S),this.menuButton_=new Button(r,S),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const E=Button.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+E,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const x=C=>this.handleClick(C);this.handleMenuKeyUp_=C=>this.handleMenuKeyUp(C),this.on(this.menuButton_,"tap",x),this.on(this.menuButton_,"click",x),this.on(this.menuButton_,"keydown",C=>this.handleKeyDown(C)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),on$1(document$1$1,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",C=>this.handleMouseLeave(C)),this.on("keydown",C=>this.handleSubmenuKeyDown(C))}update(){const r=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=r,this.addChild(r),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const r=new Menu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const S=createEl("li",{className:"vjs-menu-title",textContent:toTitleCase$1(this.options_.title),tabIndex:-1}),E=new Component$1(this.player_,{el:S});r.addItem(E)}if(this.items=this.createItems(),this.items)for(let S=0;S<this.items.length;S++)r.addItem(this.items[S]);return r}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(r){super.setIcon(r,this.menuButton_.el_)}buildWrapperCSSClass(){let r="vjs-menu-button";this.options_.inline===!0?r+="-inline":r+="-popup";const S=Button.prototype.buildCSSClass();return`vjs-menu-button ${r} ${S} ${super.buildCSSClass()}`}buildCSSClass(){let r="vjs-menu-button";return this.options_.inline===!0?r+="-inline":r+="-popup",`vjs-menu-button ${r} ${super.buildCSSClass()}`}controlText(r,S=this.menuButton_.el()){return this.menuButton_.controlText(r,S)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(r){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(r){this.removeClass("vjs-hover"),off$1(document$1$1,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(r){r.key==="Esc"||r.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!r.key==="Tab"&&(r.preventDefault(),this.menuButton_.focus())):(r.key==="Up"||r.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(r.preventDefault(),this.pressButton()))}handleMenuKeyUp(r){(r.key==="Esc"||r.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(r){this.handleSubmenuKeyDown(r)}handleSubmenuKeyDown(r){(r.key==="Esc"||r.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!r.key==="Tab"&&(r.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),IS_IOS&&isInFrame())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Component$1.registerComponent("MenuButton",MenuButton);class TrackButton extends MenuButton{constructor(r,S){const E=S.tracks;if(super(r,S),this.items.length<=1&&this.hide(),!E)return;const x=bind_(this,this.update);E.addEventListener("removetrack",x),E.addEventListener("addtrack",x),E.addEventListener("labelchange",x),this.player_.on("ready",x),this.player_.on("dispose",function(){E.removeEventListener("removetrack",x),E.removeEventListener("addtrack",x),E.removeEventListener("labelchange",x)})}}Component$1.registerComponent("TrackButton",TrackButton);class MenuItem extends ClickableComponent{constructor(r,S){super(r,S),this.selectable=S.selectable,this.isSelected_=S.selected||!1,this.multiSelectable=S.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(r,S,E){this.nonIconControl=!0;const x=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},S),E),C=createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?x.appendChild(C):x.replaceChild(C,x.querySelector(".vjs-icon-placeholder")),x}handleKeyDown(r){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(r.key)||super.handleKeyDown(r)}handleClick(r){this.selected(!0)}selected(r){this.selectable&&(r?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Component$1.registerComponent("MenuItem",MenuItem);class TextTrackMenuItem extends MenuItem{constructor(r,S){const E=S.track,x=r.textTracks();S.label=E.label||E.language||"Unknown",S.selected=E.mode==="showing",super(r,S),this.track=E,this.kinds=(S.kinds||[S.kind||this.track.kind]).filter(Boolean);const C=(...Ce)=>{this.handleTracksChange.apply(this,Ce)},R=(...Ce)=>{this.handleSelectedLanguageChange.apply(this,Ce)};if(r.on(["loadstart","texttrackchange"],C),x.addEventListener("change",C),x.addEventListener("selectedlanguagechange",R),this.on("dispose",function(){r.off(["loadstart","texttrackchange"],C),x.removeEventListener("change",C),x.removeEventListener("selectedlanguagechange",R)}),x.onchange===void 0){let Ce;this.on(["tap","click"],function(){if(typeof window$1$1.Event!="object")try{Ce=new window$1$1.Event("change")}catch{}Ce||(Ce=document$1$1.createEvent("Event"),Ce.initEvent("change",!0,!0)),x.dispatchEvent(Ce)})}this.handleTracksChange()}handleClick(r){const S=this.track,E=this.player_.textTracks();if(super.handleClick(r),!!E)for(let x=0;x<E.length;x++){const C=E[x];this.kinds.indexOf(C.kind)!==-1&&(C===S?C.mode!=="showing"&&(C.mode="showing"):C.mode!=="disabled"&&(C.mode="disabled"))}}handleTracksChange(r){const S=this.track.mode==="showing";S!==this.isSelected_&&this.selected(S)}handleSelectedLanguageChange(r){if(this.track.mode==="showing"){const S=this.player_.cache_.selectedLanguage;if(S&&S.enabled&&S.language===this.track.language&&S.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Component$1.registerComponent("TextTrackMenuItem",TextTrackMenuItem);class OffTextTrackMenuItem extends TextTrackMenuItem{constructor(r,S){S.track={player:r,kind:S.kind,kinds:S.kinds,default:!1,mode:"disabled"},S.kinds||(S.kinds=[S.kind]),S.label?S.track.label=S.label:S.track.label=S.kinds.join(" and ")+" off",S.selectable=!0,S.multiSelectable=!1,super(r,S)}handleTracksChange(r){const S=this.player().textTracks();let E=!0;for(let x=0,C=S.length;x<C;x++){const R=S[x];if(this.options_.kinds.indexOf(R.kind)>-1&&R.mode==="showing"){E=!1;break}}E!==this.isSelected_&&this.selected(E)}handleSelectedLanguageChange(r){const S=this.player().textTracks();let E=!0;for(let x=0,C=S.length;x<C;x++){const R=S[x];if(["captions","descriptions","subtitles"].indexOf(R.kind)>-1&&R.mode==="showing"){E=!1;break}}E&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Component$1.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);class TextTrackButton extends TrackButton{constructor(r,S={}){S.tracks=r.textTracks(),super(r,S)}createItems(r=[],S=TextTrackMenuItem){let E;this.label_&&(E=`${this.label_} off`),r.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:E})),this.hideThreshold_+=1;const x=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let C=0;C<x.length;C++){const R=x[C];if(this.kinds_.indexOf(R.kind)>-1){const Ce=new S(this.player_,{track:R,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});Ce.addClass(`vjs-${R.kind}-menu-item`),r.push(Ce)}}return r}}Component$1.registerComponent("TextTrackButton",TextTrackButton);class ChaptersTrackMenuItem extends MenuItem{constructor(r,S){const E=S.track,x=S.cue,C=r.currentTime();S.selectable=!0,S.multiSelectable=!1,S.label=x.text,S.selected=x.startTime<=C&&C<x.endTime,super(r,S),this.track=E,this.cue=x}handleClick(r){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Component$1.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);class ChaptersButton extends TextTrackButton{constructor(r,S,E){super(r,S,E),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(x=>{x.selected(this.track_.activeCues[0]===x.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(r){if(r&&r.track&&r.track.kind!=="chapters")return;const S=this.findChaptersTrack();S!==this.track_?(this.setTrack(S),super.update()):(!this.items||S&&S.cues&&S.cues.length!==this.items.length)&&super.update()}setTrack(r){if(this.track_!==r){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const S=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);S&&S.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=r,this.track_){this.track_.mode="hidden";const S=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);S&&S.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const r=this.player_.textTracks()||[];for(let S=r.length-1;S>=0;S--){const E=r[S];if(E.kind===this.kind_)return E}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(toTitleCase$1(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const r=[];if(!this.track_)return r;const S=this.track_.cues;if(!S)return r;for(let E=0,x=S.length;E<x;E++){const C=S[E],R=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:C});r.push(R)}return r}}ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component$1.registerComponent("ChaptersButton",ChaptersButton);class DescriptionsButton extends TextTrackButton{constructor(r,S,E){super(r,S,E),this.setIcon("audio-description");const x=r.textTracks(),C=bind_(this,this.handleTracksChange);x.addEventListener("change",C),this.on("dispose",function(){x.removeEventListener("change",C)})}handleTracksChange(r){const S=this.player().textTracks();let E=!1;for(let x=0,C=S.length;x<C;x++){const R=S[x];if(R.kind!==this.kind_&&R.mode==="showing"){E=!0;break}}E?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component$1.registerComponent("DescriptionsButton",DescriptionsButton);class SubtitlesButton extends TextTrackButton{constructor(r,S,E){super(r,S,E),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubtitlesButton",SubtitlesButton);class CaptionSettingsMenuItem extends TextTrackMenuItem{constructor(r,S){S.track={player:r,kind:S.kind,label:S.kind+" settings",selectable:!1,default:!1,mode:"disabled"},S.selectable=!1,S.name="CaptionSettingsMenuItem",super(r,S),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+S.kind+" settings dialog")}handleClick(r){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Component$1.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);class CaptionsButton extends TextTrackButton{constructor(r,S,E){super(r,S,E),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(r)}}CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component$1.registerComponent("CaptionsButton",CaptionsButton);class SubsCapsMenuItem extends TextTrackMenuItem{createEl(r,S,E){const x=super.createEl(r,S,E),C=x.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",x):C.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),C.appendChild(createEl("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),x}}Component$1.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);class SubsCapsButton extends TextTrackButton{constructor(r,S={}){super(r,S),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(toTitleCase$1(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r=super.createItems(r,SubsCapsMenuItem),r}}SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubsCapsButton",SubsCapsButton);class AudioTrackMenuItem extends MenuItem{constructor(r,S){const E=S.track,x=r.audioTracks();S.label=E.label||E.language||"Unknown",S.selected=E.enabled,super(r,S),this.track=E,this.addClass(`vjs-${E.kind}-menu-item`);const C=(...R)=>{this.handleTracksChange.apply(this,R)};x.addEventListener("change",C),this.on("dispose",()=>{x.removeEventListener("change",C)})}createEl(r,S,E){const x=super.createEl(r,S,E),C=x.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(C.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),C.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),x}handleClick(r){if(super.handleClick(r),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const S=this.player_.audioTracks();for(let E=0;E<S.length;E++){const x=S[E];x!==this.track&&(x.enabled=x===this.track)}}}handleTracksChange(r){this.selected(this.track.enabled)}}Component$1.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);class AudioTrackButton extends TrackButton{constructor(r,S={}){S.tracks=r.audioTracks(),super(r,S),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(r=[]){this.hideThreshold_=1;const S=this.player_.audioTracks();for(let E=0;E<S.length;E++){const x=S[E];r.push(new AudioTrackMenuItem(this.player_,{track:x,selectable:!0,multiSelectable:!1}))}return r}}AudioTrackButton.prototype.controlText_="Audio Track";Component$1.registerComponent("AudioTrackButton",AudioTrackButton);class PlaybackRateMenuItem extends MenuItem{constructor(r,S){const E=S.rate,x=parseFloat(E,10);S.label=E,S.selected=x===r.playbackRate(),S.selectable=!0,S.multiSelectable=!1,super(r,S),this.label=E,this.rate=x,this.on(r,"ratechange",C=>this.update(C))}handleClick(r){super.handleClick(),this.player().playbackRate(this.rate)}update(r){this.selected(this.player().playbackRate()===this.rate)}}PlaybackRateMenuItem.prototype.contentElType="button";Component$1.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);class PlaybackRateMenuButton extends MenuButton{constructor(r,S){super(r,S),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(r,"loadstart",E=>this.updateVisibility(E)),this.on(r,"ratechange",E=>this.updateLabel(E)),this.on(r,"playbackrateschange",E=>this.handlePlaybackRateschange(E))}createEl(){const r=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),r.appendChild(this.labelEl_),r}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const r=this.playbackRates(),S=[];for(let E=r.length-1;E>=0;E--)S.push(new PlaybackRateMenuItem(this.player(),{rate:r[E]+"x"}));return S}handlePlaybackRateschange(r){this.update()}playbackRates(){const r=this.player();return r.playbackRates&&r.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(r){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(r){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);class Spacer extends Component$1{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(r="div",S={},E={}){return S.className||(S.className=this.buildCSSClass()),super.createEl(r,S,E)}}Component$1.registerComponent("Spacer",Spacer);class CustomControlSpacer extends Spacer{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}Component$1.registerComponent("CustomControlSpacer",CustomControlSpacer);class ControlBar extends Component$1{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ControlBar.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Component$1.registerComponent("ControlBar",ControlBar);class ErrorDisplay extends ModalDialog{constructor(r,S){super(r,S),this.on(r,"error",E=>{this.open(E)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const r=this.player().error();return r?this.localize(r.message):""}}ErrorDisplay.prototype.options_=Object.assign({},ModalDialog.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Component$1.registerComponent("ErrorDisplay",ErrorDisplay);class TextTrackSelect extends Component$1{constructor(r,S={}){super(r,S),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),createEl("select",{id:this.options_.id},{},this.options_.SelectOptions.map(S=>{const E=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${newGUID()}`)+"-"+S[1].replace(/\W+/g,""),x=createEl("option",{id:E,value:this.localize(S[0]),textContent:S[1]});return x.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${E}`),x}))}}Component$1.registerComponent("TextTrackSelect",TextTrackSelect);class TextTrackFieldset extends Component$1{constructor(r,S={}){super(r,S);const E=createEl("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(E);const x=this.options_.selects;for(const C of x){const R=this.options_.selectConfigs[C],Ce=R.className,Ue=R.id.replace("%s",this.options_.id_);let je=null;const Xe=`vjs_select_${newGUID()}`;if(this.options_.type==="colors"){je=createEl("span",{className:Ce});const St=createEl("label",{id:Ue,className:"vjs-label",textContent:R.label});St.setAttribute("for",Xe),je.appendChild(St)}const Ye=new TextTrackSelect(r,{SelectOptions:R.options,legendId:this.options_.legendId,id:Xe,labelId:Ue});this.addChild(Ye),this.options_.type==="colors"&&(je.appendChild(Ye.el()),this.el().appendChild(je))}}createEl(){return createEl("fieldset",{className:this.options_.className})}}Component$1.registerComponent("TextTrackFieldset",TextTrackFieldset);class TextTrackSettingsColors extends Component$1{constructor(r,S={}){super(r,S);const E=this.options_.textTrackComponentid,x=new TextTrackFieldset(r,{id_:E,legendId:`captions-text-legend-${E}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(x);const C=new TextTrackFieldset(r,{id_:E,legendId:`captions-background-${E}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(C);const R=new TextTrackFieldset(r,{id_:E,legendId:`captions-window-${E}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(R)}createEl(){return createEl("div",{className:"vjs-track-settings-colors"})}}Component$1.registerComponent("TextTrackSettingsColors",TextTrackSettingsColors);class TextTrackSettingsFont extends Component$1{constructor(r,S={}){super(r,S);const E=this.options_.textTrackComponentid,x=new TextTrackFieldset(r,{id_:E,legendId:`captions-font-size-${E}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(x);const C=new TextTrackFieldset(r,{id_:E,legendId:`captions-edge-style-${E}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(C);const R=new TextTrackFieldset(r,{id_:E,legendId:`captions-font-family-${E}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(R)}createEl(){return createEl("div",{className:"vjs-track-settings-font"})}}Component$1.registerComponent("TextTrackSettingsFont",TextTrackSettingsFont);class TrackSettingsControls extends Component$1{constructor(r,S={}){super(r,S);const E=this.localize("restore all settings to the default values"),x=new Button(r,{controlText:E,className:"vjs-default-button"});x.el().classList.remove("vjs-control","vjs-button"),x.el().textContent=this.localize("Reset"),this.addChild(x);const C=new Button(r,{controlText:E,className:"vjs-done-button"});C.el().classList.remove("vjs-control","vjs-button"),C.el().textContent=this.localize("Done"),this.addChild(C)}createEl(){return createEl("div",{className:"vjs-track-settings-controls"})}}Component$1.registerComponent("TrackSettingsControls",TrackSettingsControls);const LOCAL_STORAGE_KEY$1="vjs-text-track-settings",COLOR_BLACK=["#000","Black"],COLOR_BLUE=["#00F","Blue"],COLOR_CYAN=["#0FF","Cyan"],COLOR_GREEN=["#0F0","Green"],COLOR_MAGENTA=["#F0F","Magenta"],COLOR_RED=["#F00","Red"],COLOR_WHITE=["#FFF","White"],COLOR_YELLOW=["#FF0","Yellow"],OPACITY_OPAQUE=["1","Opaque"],OPACITY_SEMI=["0.5","Semi-Transparent"],OPACITY_TRANS=["0","Transparent"],selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:o=>o==="1.00"?null:Number(o)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE],className:"vjs-window-opacity vjs-opacity"}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(o,r){if(r&&(o=r(o)),o&&o!=="none")return o}function getSelectedOptionValue(o,r){const S=o.options[o.options.selectedIndex].value;return parseOptionValue(S,r)}function setSelectedOption(o,r,S){if(r){for(let E=0;E<o.options.length;E++)if(parseOptionValue(o.options[E].value,S)===r){o.selectedIndex=E;break}}}class TextTrackSettings extends ModalDialog{constructor(r,S){S.temporary=!1,super(r,S),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(r),this.endDialog=createEl("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),S.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(r){const S=new TextTrackSettingsColors(r,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(S);const E=new TextTrackSettingsFont(r,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(E);const x=new TrackSettingsControls(r);this.addChild(x)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),each(selectConfigs,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return reduce(selectConfigs,(r,S,E)=>{const x=getSelectedOptionValue(this.$(S.selector),S.parser);return x!==void 0&&(r[E]=x),r},{})}setValues(r){each(selectConfigs,(S,E)=>{setSelectedOption(this.$(S.selector),r[E],S.parser)})}setDefaults(){each(selectConfigs,r=>{const S=r.hasOwnProperty("default")?r.default:0;this.$(r.selector).selectedIndex=S})}restoreSettings(){let r;try{r=JSON.parse(window$1$1.localStorage.getItem(LOCAL_STORAGE_KEY$1))}catch(S){log$1.warn(S)}r&&this.setValues(r)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const r=this.getValues();try{Object.keys(r).length?window$1$1.localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(r)):window$1$1.localStorage.removeItem(LOCAL_STORAGE_KEY$1)}catch(S){log$1.warn(S)}}updateDisplay(){const r=this.player_.getChild("textTrackDisplay");r&&r.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Component$1.registerComponent("TextTrackSettings",TextTrackSettings);class ResizeManager extends Component$1{constructor(r,S){let E=S.ResizeObserver||window$1$1.ResizeObserver;S.ResizeObserver===null&&(E=!1);const x=merge$1({createEl:!E,reportTouchActivity:!1},S);super(r,x),this.ResizeObserver=S.ResizeObserver||window$1$1.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=debounce(()=>{this.resizeHandler()},100,!1,this),E?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(r.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const C=this.debouncedHandler_;let R=this.unloadListener_=function(){off$1(this,"resize",C),off$1(this,"unload",R),R=null};on$1(this.el_.contentWindow,"unload",R),on$1(this.el_.contentWindow,"resize",C)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Component$1.registerComponent("ResizeManager",ResizeManager);const defaults$1={trackingThreshold:20,liveTolerance:15};class LiveTracker extends Component$1{constructor(r,S){const E=merge$1(defaults$1,S,{createEl:!1});super(r,E),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=x=>this.handlePlay(x),this.handleFirstTimeupdate_=x=>this.handleFirstTimeupdate(x),this.handleSeeked_=x=>this.handleSeeked(x),this.seekToLiveEdge_=x=>this.seekToLiveEdge(x),this.reset_(),this.on(this.player_,"durationchange",x=>this.handleDurationchange(x)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const r=this.player_.seekable();if(!r||!r.length)return;const S=Number(window$1$1.performance.now().toFixed(4)),E=this.lastTime_===-1?0:(S-this.lastTime_)/1e3;this.lastTime_=S,this.pastSeekEnd_=this.pastSeekEnd()+E;const x=this.liveCurrentTime(),C=this.player_.currentTime();let R=this.player_.paused()||this.seekedBehindLive_||Math.abs(x-C)>this.options_.liveTolerance;(!this.timeupdateSeen_||x===1/0)&&(R=!1),R!==this.behindLiveEdge_&&(this.behindLiveEdge_=R,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,UPDATE_REFRESH_INTERVAL),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const r=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&r>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const r=this.player_.seekable(),S=[];let E=r?r.length:0;for(;E--;)S.push(r.end(E));return S.length?S.sort()[S.length-1]:1/0}seekableStart(){const r=this.player_.seekable(),S=[];let E=r?r.length:0;for(;E--;)S.push(r.start(E));return S.length?S.sort()[0]:0}liveWindow(){const r=this.liveCurrentTime();return r===1/0?0:r-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const r=this.seekableEnd();return this.lastSeekEnd_!==-1&&r!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=r,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Component$1.registerComponent("LiveTracker",LiveTracker);class TitleBar extends Component$1{constructor(r,S){super(r,S),this.on("statechanged",E=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:createEl("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${newGUID()}`}),description:createEl("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${newGUID()}`})},createEl("div",{className:"vjs-title-bar"},{},values(this.els))}updateDom_(){const r=this.player_.tech_,S=r&&r.el_,E={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(x=>{const C=this.state[x],R=this.els[x],Ce=E[x];emptyEl(R),C&&textContent(R,C),S&&(S.removeAttribute(Ce),C&&S.setAttribute(Ce,R.id))}),this.state.title||this.state.description?this.show():this.hide()}update(r){this.setState(r)}dispose(){const r=this.player_.tech_,S=r&&r.el_;S&&(S.removeAttribute("aria-labelledby"),S.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Component$1.registerComponent("TitleBar",TitleBar);const defaults$2={initialDisplay:4e3,position:[],takeFocus:!1};class TransientButton extends Button{constructor(r,S){S=merge$1(defaults$2,S),super(r,S),this.controlText(S.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],E=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(r=>`vjs-${r}`).join(" ")}`}createEl(){const r=createEl("button",{},{type:"button",class:this.buildCSSClass()},createEl("span"));return this.controlTextEl_=r.querySelector("span"),r}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Component$1.registerComponent("TransientButton",TransientButton);const sourcesetLoad=o=>{const r=o.el();if(r.hasAttribute("src"))return o.triggerSourceset(r.src),!0;const S=o.$$("source"),E=[];let x="";if(!S.length)return!1;for(let C=0;C<S.length;C++){const R=S[C].src;R&&E.indexOf(R)===-1&&E.push(R)}return E.length?(E.length===1&&(x=E[0]),o.triggerSourceset(x),!0):!1},innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(o){const r=document$1$1.createElement(this.nodeName.toLowerCase());r.innerHTML=o;const S=document$1$1.createDocumentFragment();for(;r.childNodes.length;)S.appendChild(r.childNodes[0]);return this.innerText="",window$1$1.Element.prototype.appendChild.call(this,S),this.innerHTML}}),getDescriptor=(o,r)=>{let S={};for(let E=0;E<o.length&&(S=Object.getOwnPropertyDescriptor(o[E],r),!(S&&S.set&&S.get));E++);return S.enumerable=!0,S.configurable=!0,S},getInnerHTMLDescriptor=o=>getDescriptor([o.el(),window$1$1.HTMLMediaElement.prototype,window$1$1.Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML"),firstSourceWatch=function(o){const r=o.el();if(r.resetSourceWatch_)return;const S={},E=getInnerHTMLDescriptor(o),x=C=>(...R)=>{const Ce=C.apply(r,R);return sourcesetLoad(o),Ce};["append","appendChild","insertAdjacentHTML"].forEach(C=>{r[C]&&(S[C]=r[C],r[C]=x(S[C]))}),Object.defineProperty(r,"innerHTML",merge$1(E,{set:x(E.set)})),r.resetSourceWatch_=()=>{r.resetSourceWatch_=null,Object.keys(S).forEach(C=>{r[C]=S[C]}),Object.defineProperty(r,"innerHTML",E)},o.one("sourceset",r.resetSourceWatch_)},srcDescriptorPolyfill=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?getAbsoluteURL(window$1$1.Element.prototype.getAttribute.call(this,"src")):""},set(o){return window$1$1.Element.prototype.setAttribute.call(this,"src",o),o}}),getSrcDescriptor=o=>getDescriptor([o.el(),window$1$1.HTMLMediaElement.prototype,srcDescriptorPolyfill],"src"),setupSourceset=function(o){if(!o.featuresSourceset)return;const r=o.el();if(r.resetSourceset_)return;const S=getSrcDescriptor(o),E=r.setAttribute,x=r.load;Object.defineProperty(r,"src",merge$1(S,{set:C=>{const R=S.set.call(r,C);return o.triggerSourceset(r.src),R}})),r.setAttribute=(C,R)=>{const Ce=E.call(r,C,R);return/src/i.test(C)&&o.triggerSourceset(r.src),Ce},r.load=()=>{const C=x.call(r);return sourcesetLoad(o)||(o.triggerSourceset(""),firstSourceWatch(o)),C},r.currentSrc?o.triggerSourceset(r.currentSrc):sourcesetLoad(o)||firstSourceWatch(o),r.resetSourceset_=()=>{r.resetSourceset_=null,r.load=x,r.setAttribute=E,Object.defineProperty(r,"src",S),r.resetSourceWatch_&&r.resetSourceWatch_()}};class Html5 extends Tech{constructor(r,S){super(r,S);const E=r.source;let x=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",E&&(this.el_.currentSrc!==E.src||r.tag&&r.tag.initNetworkState_===3)?this.setSource(E):this.handleLateInit_(this.el_),r.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const C=this.el_.childNodes;let R=C.length;const Ce=[];for(;R--;){const Ue=C[R];Ue.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(Ue),this.remoteTextTracks().addTrack(Ue.track),this.textTracks().addTrack(Ue.track),!x&&!this.el_.hasAttribute("crossorigin")&&isCrossOrigin(Ue.src)&&(x=!0)):Ce.push(Ue))}for(let Ue=0;Ue<Ce.length;Ue++)this.el_.removeChild(Ce[Ue])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&x&&log$1.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(TOUCH_ENABLED||IS_IPHONE)&&r.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html5.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){setupSourceset(this)}restoreMetadataTracksInIOSNativePlayer_(){const r=this.textTracks();let S;const E=()=>{S=[];for(let C=0;C<r.length;C++){const R=r[C];R.kind==="metadata"&&S.push({track:R,storedMode:R.mode})}};E(),r.addEventListener("change",E),this.on("dispose",()=>r.removeEventListener("change",E));const x=()=>{for(let C=0;C<S.length;C++){const R=S[C];R.track.mode==="disabled"&&R.track.mode!==R.storedMode&&(R.track.mode=R.storedMode)}r.removeEventListener("change",x)};this.on("webkitbeginfullscreen",()=>{r.removeEventListener("change",E),r.removeEventListener("change",x),r.addEventListener("change",x)}),this.on("webkitendfullscreen",()=>{r.removeEventListener("change",E),r.addEventListener("change",E),r.removeEventListener("change",x)})}overrideNative_(r,S){if(S!==this[`featuresNative${r}Tracks`])return;const E=r.toLowerCase();this[`${E}TracksListeners_`]&&Object.keys(this[`${E}TracksListeners_`]).forEach(x=>{this.el()[`${E}Tracks`].removeEventListener(x,this[`${E}TracksListeners_`][x])}),this[`featuresNative${r}Tracks`]=!S,this[`${E}TracksListeners_`]=null,this.proxyNativeTracksForType_(E)}overrideNativeAudioTracks(r){this.overrideNative_("Audio",r)}overrideNativeVideoTracks(r){this.overrideNative_("Video",r)}proxyNativeTracksForType_(r){const S=NORMAL[r],E=this.el()[S.getterName],x=this[S.getterName]();if(!this[`featuresNative${S.capitalName}Tracks`]||!E||!E.addEventListener)return;const C={change:Ce=>{const Ue={type:"change",target:x,currentTarget:x,srcElement:x};x.trigger(Ue),r==="text"&&this[REMOTE.remoteText.getterName]().trigger(Ue)},addtrack(Ce){x.addTrack(Ce.track)},removetrack(Ce){x.removeTrack(Ce.track)}},R=function(){const Ce=[];for(let Ue=0;Ue<x.length;Ue++){let je=!1;for(let Xe=0;Xe<E.length;Xe++)if(E[Xe]===x[Ue]){je=!0;break}je||Ce.push(x[Ue])}for(;Ce.length;)x.removeTrack(Ce.shift())};this[S.getterName+"Listeners_"]=C,Object.keys(C).forEach(Ce=>{const Ue=C[Ce];E.addEventListener(Ce,Ue),this.on("dispose",je=>E.removeEventListener(Ce,Ue))}),this.on("loadstart",R),this.on("dispose",Ce=>this.off("loadstart",R))}proxyNativeTracks_(){NORMAL.names.forEach(r=>{this.proxyNativeTracksForType_(r)})}createEl(){let r=this.options_.tag;if(!r||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(r){const E=r.cloneNode(!0);r.parentNode&&r.parentNode.insertBefore(E,r),Html5.disposeMediaElement(r),r=E}else{r=document$1$1.createElement("video");const E=this.options_.tag&&getAttributes(this.options_.tag),x=merge$1({},E);(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==!0)&&delete x.controls,setAttributes(r,Object.assign(x,{id:this.options_.techId,class:"vjs-tech"}))}r.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&setAttribute(r,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(r.disablePictureInPicture=this.options_.disablePictureInPicture);const S=["loop","muted","playsinline","autoplay"];for(let E=0;E<S.length;E++){const x=S[E],C=this.options_[x];typeof C<"u"&&(C?setAttribute(r,x,x):removeAttribute(r,x),r[x]=C)}return r}handleLateInit_(r){if(r.networkState===0||r.networkState===3)return;if(r.readyState===0){let E=!1;const x=function(){E=!0};this.on("loadstart",x);const C=function(){E||this.trigger("loadstart")};this.on("loadedmetadata",C),this.ready(function(){this.off("loadstart",x),this.off("loadedmetadata",C),E||this.trigger("loadstart")});return}const S=["loadstart"];S.push("loadedmetadata"),r.readyState>=2&&S.push("loadeddata"),r.readyState>=3&&S.push("canplay"),r.readyState>=4&&S.push("canplaythrough"),this.ready(function(){S.forEach(function(E){this.trigger(E)},this)})}setScrubbing(r){this.isScrubbing_=r}scrubbing(){return this.isScrubbing_}setCurrentTime(r){try{this.isScrubbing_&&this.el_.fastSeek&&IS_ANY_SAFARI?this.el_.fastSeek(r):this.el_.currentTime=r}catch(S){log$1(S,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){const r=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",r))};return this.on("timeupdate",r),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const r=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},S=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",r),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",S),this.on("dispose",()=>{this.off("webkitbeginfullscreen",S),this.off("webkitendfullscreen",r)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const r=this.el_;if(r.paused&&r.networkState<=r.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout(function(){r.pause();try{r.webkitEnterFullScreen()}catch(S){this.trigger("fullscreenerror",S)}},0);else try{r.webkitEnterFullScreen()}catch(S){this.trigger("fullscreenerror",S)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(r){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(r):super.requestVideoFrameCallback(r)}cancelVideoFrameCallback(r){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(r):super.cancelVideoFrameCallback(r)}src(r){if(r===void 0)return this.el_.src;this.setSrc(r)}addSourceElement(r,S){if(!r)return log$1.error("Invalid source URL."),!1;const E={src:r};S&&(E.type=S);const x=createEl("source",{},E);return this.el_.appendChild(x),!0}removeSourceElement(r){if(!r)return log$1.error("Source URL is required to remove the source element."),!1;const S=this.el_.querySelectorAll("source");for(const E of S)if(E.src===r)return this.el_.removeChild(E),!0;return log$1.warn(`No matching source element found with src: ${r}`),!1}reset(){Html5.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(r){this.el_.controls=!!r}addTextTrack(r,S,E){return this.featuresNativeTextTracks?this.el_.addTextTrack(r,S,E):super.addTextTrack(r,S,E)}createRemoteTextTrack(r){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(r);const S=document$1$1.createElement("track");return r.kind&&(S.kind=r.kind),r.label&&(S.label=r.label),(r.language||r.srclang)&&(S.srclang=r.language||r.srclang),r.default&&(S.default=r.default),r.id&&(S.id=r.id),r.src&&(S.src=r.src),S}addRemoteTextTrack(r,S){const E=super.addRemoteTextTrack(r,S);return this.featuresNativeTextTracks&&this.el().appendChild(E),E}removeRemoteTextTrack(r){if(super.removeRemoteTextTrack(r),this.featuresNativeTextTracks){const S=this.$$("track");let E=S.length;for(;E--;)(r===S[E]||r===S[E].track)&&this.el().removeChild(S[E])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const r={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(r.droppedVideoFrames=this.el().webkitDroppedFrameCount,r.totalVideoFrames=this.el().webkitDecodedFrameCount),window$1$1.performance&&(r.creationTime=window$1$1.performance.now()),r}}defineLazyProperty(Html5,"TEST_VID",function(){if(!isReal())return;const o=document$1$1.createElement("video"),r=document$1$1.createElement("track");return r.kind="captions",r.srclang="en",r.label="English",o.appendChild(r),o});Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch{return!1}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType)};Html5.canPlayType=function(o){return Html5.TEST_VID.canPlayType(o)};Html5.canPlaySource=function(o,r){return Html5.canPlayType(o.type)};Html5.canControlVolume=function(){try{const o=Html5.TEST_VID.volume;Html5.TEST_VID.volume=o/2+.1;const r=o!==Html5.TEST_VID.volume;return r&&IS_IOS?(window$1$1.setTimeout(()=>{Html5&&Html5.prototype&&(Html5.prototype.featuresVolumeControl=o!==Html5.TEST_VID.volume)}),!1):r}catch{return!1}};Html5.canMuteVolume=function(){try{const o=Html5.TEST_VID.muted;return Html5.TEST_VID.muted=!o,Html5.TEST_VID.muted?setAttribute(Html5.TEST_VID,"muted","muted"):removeAttribute(Html5.TEST_VID,"muted","muted"),o!==Html5.TEST_VID.muted}catch{return!1}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58)return!1;try{const o=Html5.TEST_VID.playbackRate;return Html5.TEST_VID.playbackRate=o/2+.1,o!==Html5.TEST_VID.playbackRate}catch{return!1}};Html5.canOverrideAttributes=function(){try{const o=()=>{};Object.defineProperty(document$1$1.createElement("video"),"src",{get:o,set:o}),Object.defineProperty(document$1$1.createElement("audio"),"src",{get:o,set:o}),Object.defineProperty(document$1$1.createElement("video"),"innerHTML",{get:o,set:o}),Object.defineProperty(document$1$1.createElement("audio"),"innerHTML",{get:o,set:o})}catch{return!1}return!0};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks)};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks)};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([o,r]){defineLazyProperty(Html5.prototype,o,()=>Html5[r](),!0)});Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=!0;Html5.prototype.featuresProgressEvents=!0;Html5.prototype.featuresTimeupdateEvents=!0;Html5.prototype.featuresVideoFrameCallback=!!(Html5.TEST_VID&&Html5.TEST_VID.requestVideoFrameCallback);Html5.disposeMediaElement=function(o){if(o){for(o.parentNode&&o.parentNode.removeChild(o);o.hasChildNodes();)o.removeChild(o.firstChild);o.removeAttribute("src"),typeof o.load=="function"&&function(){try{o.load()}catch{}}()}};Html5.resetMediaElement=function(o){if(!o)return;const r=o.querySelectorAll("source");let S=r.length;for(;S--;)o.removeChild(r[S]);o.removeAttribute("src"),typeof o.load=="function"&&function(){try{o.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(o){Html5.prototype[o]=function(){return this.el_[o]||this.el_.hasAttribute(o)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(o){Html5.prototype["set"+toTitleCase$1(o)]=function(r){this.el_[o]=r,r?this.el_.setAttribute(o,o):this.el_.removeAttribute(o)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(o){Html5.prototype[o]=function(){return this.el_[o]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(o){Html5.prototype["set"+toTitleCase$1(o)]=function(r){this.el_[o]=r}});["pause","load","play"].forEach(function(o){Html5.prototype[o]=function(){return this.el_[o]()}});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(o){try{return Html5.TEST_VID.canPlayType(o)}catch{return""}};Html5.nativeSourceHandler.canHandleSource=function(o,r){if(o.type)return Html5.nativeSourceHandler.canPlayType(o.type);if(o.src){const S=getFileExtension(o.src);return Html5.nativeSourceHandler.canPlayType(`video/${S}`)}return""};Html5.nativeSourceHandler.handleSource=function(o,r,S){r.setSrc(o.src)};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);const TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"],BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(o=>{const r=o.charAt(0)==="x"?`x-${o.substring(1)}`:o;BREAKPOINT_CLASSES[o]=`vjs-layout-${r}`});const DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Player extends Component$1{constructor(r,S,E){if(r.id=r.id||S.id||`vjs_video_${newGUID()}`,S=Object.assign(Player.getTagSettings(r),S),S.initChildren=!1,S.createEl=!1,S.evented=!1,S.reportTouchActivity=!1,!S.language){const R=r.closest("[lang]");R&&(S.language=R.getAttribute("lang"))}if(super(null,S,E),this.boundDocumentFullscreenChange_=R=>this.documentFullscreenChange_(R),this.boundFullWindowOnEscKey_=R=>this.fullWindowOnEscKey(R),this.boundUpdateStyleEl_=R=>this.updateStyleEl_(R),this.boundApplyInitTime_=R=>this.applyInitTime_(R),this.boundUpdateCurrentBreakpoint_=R=>this.updateCurrentBreakpoint_(R),this.boundHandleTechClick_=R=>this.handleTechClick_(R),this.boundHandleTechDoubleClick_=R=>this.handleTechDoubleClick_(R),this.boundHandleTechTouchStart_=R=>this.handleTechTouchStart_(R),this.boundHandleTechTouchMove_=R=>this.handleTechTouchMove_(R),this.boundHandleTechTouchEnd_=R=>this.handleTechTouchEnd_(R),this.boundHandleTechTap_=R=>this.handleTechTap_(R),this.boundUpdatePlayerHeightOnAudioOnlyMode_=R=>this.updatePlayerHeightOnAudioOnlyMode_(R),this.isFullscreen_=!1,this.log=createLogger(this.id_),this.fsApi_=FullscreenApi,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=r,this.tagAttributes=r&&getAttributes(r),this.language(this.options_.language),S.languages){const R={};Object.getOwnPropertyNames(S.languages).forEach(function(Ce){R[Ce.toLowerCase()]=S.languages[Ce]}),this.languages_=R}else this.languages_=Player.prototype.options_.languages;this.resetCache_(),this.poster_=S.poster||"",this.controls_=!!S.controls,r.controls=!1,r.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],r.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),S.plugins&&Object.keys(S.plugins).forEach(R=>{if(typeof this[R]!="function")throw new Error(`plugin "${R}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),evented(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(on$1(document$1$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const x=merge$1(this.options_);if(S.plugins&&Object.keys(S.plugins).forEach(R=>{this[R](S.plugins[R])}),S.debug&&this.debug(!0),this.options_.playerOptions=x,this.middleware_=[],this.playbackRates(S.playbackRates),S.experimentalSvgIcons){const Ce=new window$1$1.DOMParser().parseFromString(icons,"image/svg+xml");if(Ce.querySelector("parsererror"))log$1.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const je=Ce.documentElement;je.style.display="none",this.el_.appendChild(je),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(r.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),S.spatialNavigation&&S.spatialNavigation.enabled&&(this.spatialNavigation=new SpatialNavigation(this),this.addClass("vjs-spatial-navigation-enabled")),TOUCH_ENABLED&&this.addClass("vjs-touch-enabled"),IS_IOS||this.addClass("vjs-workinghover"),Player.players[this.id_]=this;const C=version$6.split(".")[0];this.addClass(`vjs-v${C}`),this.userActive(!0),this.reportUserActivity(),this.one("play",R=>this.listenForUserActivity_(R)),this.on("keydown",R=>this.handleKeyDown(R)),this.on("languagechange",R=>this.handleLanguagechange(R)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),off$1(document$1$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off$1(document$1$1,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),clearCacheForPlayer(this),ALL.names.forEach(r=>{const S=ALL[r],E=this[S.getterName]();E&&E.off&&E.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let r=this.tag,S,E=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player");const x=this.tag.tagName.toLowerCase()==="video-js";E?S=this.el_=r.parentNode:x||(S=this.el_=super.createEl("div"));const C=getAttributes(r);if(x){for(S=this.el_=r,r=this.tag=document$1$1.createElement("video");S.children.length;)r.appendChild(S.firstChild);hasClass(S,"video-js")||addClass(S,"video-js"),S.appendChild(r),E=this.playerElIngest_=S,Object.keys(S).forEach(Ue=>{try{r[Ue]=S[Ue]}catch{}})}r.setAttribute("tabindex","-1"),C.tabindex="-1",IS_CHROME&&IS_WINDOWS&&(r.setAttribute("role","application"),C.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in C&&delete C.width,"height"in C&&delete C.height,Object.getOwnPropertyNames(C).forEach(function(Ue){x&&Ue==="class"||S.setAttribute(Ue,C[Ue]),x&&r.setAttribute(Ue,C[Ue])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=S.player=this,this.addClass("vjs-paused");const R=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(Ue=>browser[Ue]).map(Ue=>"vjs-device-"+Ue.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...R),window$1$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=createStyleElement("vjs-styles-dimensions");const Ue=$(".vjs-styles-defaults"),je=$("head");je.insertBefore(this.styleEl_,Ue?Ue.nextSibling:je.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const Ce=r.getElementsByTagName("a");for(let Ue=0;Ue<Ce.length;Ue++){const je=Ce.item(Ue);addClass(je,"vjs-hidden"),je.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!E&&r.parentNode.insertBefore(S,r),prependTo(r,S),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=S,S}crossOrigin(r){if(typeof r>"u")return this.techGet_("crossOrigin");if(r!==null&&r!=="anonymous"&&r!=="use-credentials"){log$1.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${r}"`);return}this.techCall_("setCrossOrigin",r),this.posterImage&&this.posterImage.crossOrigin(r)}width(r){return this.dimension("width",r)}height(r){return this.dimension("height",r)}dimension(r,S){const E=r+"_";if(S===void 0)return this[E]||0;if(S===""||S==="auto"){this[E]=void 0,this.updateStyleEl_();return}const x=parseFloat(S);if(isNaN(x)){log$1.error(`Improper value "${S}" supplied for for ${r}`);return}this[E]=x,this.updateStyleEl_()}fluid(r){if(r===void 0)return!!this.fluid_;this.fluid_=!!r,isEvented(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),r?(this.addClass("vjs-fluid"),this.fill(!1),addEventedCallback(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(r){if(r===void 0)return!!this.fill_;this.fill_=!!r,r?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(r){if(r===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(r))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=r,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(window$1$1.VIDEOJS_NO_DYNAMIC_STYLE===!0){const Ce=typeof this.width_=="number"?this.width_:this.options_.width,Ue=typeof this.height_=="number"?this.height_:this.options_.height,je=this.tech_&&this.tech_.el();je&&(Ce>=0&&(je.width=Ce),Ue>=0&&(je.height=Ue));return}let r,S,E,x;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?E=this.aspectRatio_:this.videoWidth()>0?E=this.videoWidth()+":"+this.videoHeight():E="16:9";const C=E.split(":"),R=C[1]/C[0];this.width_!==void 0?r=this.width_:this.height_!==void 0?r=this.height_/R:r=this.videoWidth()||300,this.height_!==void 0?S=this.height_:S=r*R,/^[^a-zA-Z]/.test(this.id())?x="dimensions-"+this.id():x=this.id()+"-dimensions",this.addClass(x),setTextContent(this.styleEl_,`
      .${x} {
        width: ${r}px;
        height: ${S}px;
      }

      .${x}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${R*100}%;
      }
    `)}loadTech_(r,S){this.tech_&&this.unloadTech_();const E=toTitleCase$1(r),x=r.charAt(0).toLowerCase()+r.slice(1);E!=="Html5"&&this.tag&&(Tech.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=E,this.isReady_=!1;let C=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(C=!1);const R={source:S,autoplay:C,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${x}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ALL.names.forEach(Ue=>{const je=ALL[Ue];R[je.getterName]=this[je.privateName]}),Object.assign(R,this.options_[E]),Object.assign(R,this.options_[x]),Object.assign(R,this.options_[r.toLowerCase()]),this.tag&&(R.tag=this.tag),S&&S.src===this.cache_.src&&this.cache_.currentTime>0&&(R.startTime=this.cache_.currentTime);const Ce=Tech.getTech(r);if(!Ce)throw new Error(`No Tech named '${E}' exists! '${E}' should be registered using videojs.registerTech()'`);this.tech_=new Ce(R),this.tech_.ready(bind_(this,this.handleTechReady_),!0),textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_),TECH_EVENTS_RETRIGGER.forEach(Ue=>{this.on(this.tech_,Ue,je=>this[`handleTech${toTitleCase$1(Ue)}_`](je))}),Object.keys(TECH_EVENTS_QUEUE).forEach(Ue=>{this.on(this.tech_,Ue,je=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${TECH_EVENTS_QUEUE[Ue]}_`].bind(this),event:je});return}this[`handleTech${TECH_EVENTS_QUEUE[Ue]}_`](je)})}),this.on(this.tech_,"loadstart",Ue=>this.handleTechLoadStart_(Ue)),this.on(this.tech_,"sourceset",Ue=>this.handleTechSourceset_(Ue)),this.on(this.tech_,"waiting",Ue=>this.handleTechWaiting_(Ue)),this.on(this.tech_,"ended",Ue=>this.handleTechEnded_(Ue)),this.on(this.tech_,"seeking",Ue=>this.handleTechSeeking_(Ue)),this.on(this.tech_,"play",Ue=>this.handleTechPlay_(Ue)),this.on(this.tech_,"pause",Ue=>this.handleTechPause_(Ue)),this.on(this.tech_,"durationchange",Ue=>this.handleTechDurationChange_(Ue)),this.on(this.tech_,"fullscreenchange",(Ue,je)=>this.handleTechFullscreenChange_(Ue,je)),this.on(this.tech_,"fullscreenerror",(Ue,je)=>this.handleTechFullscreenError_(Ue,je)),this.on(this.tech_,"enterpictureinpicture",Ue=>this.handleTechEnterPictureInPicture_(Ue)),this.on(this.tech_,"leavepictureinpicture",Ue=>this.handleTechLeavePictureInPicture_(Ue)),this.on(this.tech_,"error",Ue=>this.handleTechError_(Ue)),this.on(this.tech_,"posterchange",Ue=>this.handleTechPosterChange_(Ue)),this.on(this.tech_,"textdata",Ue=>this.handleTechTextData_(Ue)),this.on(this.tech_,"ratechange",Ue=>this.handleTechRateChange_(Ue)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(E!=="Html5"||!this.tag)&&prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ALL.names.forEach(r=>{const S=ALL[r];this[S.privateName]=this[S.getterName]()}),this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(r){return r===void 0&&log$1.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":version$6}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(r){if(!this.tech_||typeof r!="string")return;const S=()=>{const x=this.muted();this.muted(!0);const C=()=>{this.muted(x)};this.playTerminatedQueue_.push(C);const R=this.play();if(isPromise(R))return R.catch(Ce=>{throw C(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${Ce||""}`)})};let E;if(r==="any"&&!this.muted()?(E=this.play(),isPromise(E)&&(E=E.catch(S))):r==="muted"&&!this.muted()?E=S():E=this.play(),!!isPromise(E))return E.then(()=>{this.trigger({type:"autoplay-success",autoplay:r})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:r})})}updateSourceCaches_(r=""){let S=r,E="";typeof S!="string"&&(S=r.src,E=r.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],S&&!E&&(E=findMimetype(this,S)),this.cache_.source=merge$1({},r,{src:S,type:E});const x=this.cache_.sources.filter(Ue=>Ue.src&&Ue.src===S),C=[],R=this.$$("source"),Ce=[];for(let Ue=0;Ue<R.length;Ue++){const je=getAttributes(R[Ue]);C.push(je),je.src&&je.src===S&&Ce.push(je.src)}Ce.length&&!x.length?this.cache_.sources=C:x.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=S}handleTechSourceset_(r){if(!this.changingSrc_){let S=C=>this.updateSourceCaches_(C);const E=this.currentSource().src,x=r.src;E&&!/^blob:/.test(E)&&/^blob:/.test(x)&&(!this.lastSource_||this.lastSource_.tech!==x&&this.lastSource_.player!==E)&&(S=()=>{}),S(x),r.src||this.tech_.any(["sourceset","loadstart"],C=>{if(C.type==="sourceset")return;const R=this.techGet_("currentSrc");this.lastSource_.tech=R,this.updateSourceCaches_(R)})}this.lastSource_={player:this.currentSource().src,tech:r.src},this.trigger({src:r.src,type:"sourceset"})}hasStarted(r){if(r===void 0)return this.hasStarted_;r!==this.hasStarted_&&(this.hasStarted_=r,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(r=>r.callback(r.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const r=this.currentTime(),S=()=>{r!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",S))};this.on("timeupdate",S)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(r){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,r):this.paused()?silencePromise(this.play()):this.pause())}handleTechDoubleClick_(r){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),E=>E.contains(r.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,r):this.isInPictureInPicture()&&!document$1$1.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(r){r.cancelable&&r.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(r){const S=r.target.player;if(S&&S!==this)return;const E=this.el();let x=document$1$1[this.fsApi_.fullscreenElement]===E;!x&&E.matches&&(x=E.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(x)}handleTechFullscreenChange_(r,S){S&&(S.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(S.isFullscreen))}handleTechFullscreenError_(r,S){this.trigger("fullscreenerror",S)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(r){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(r){this.isInPictureInPicture(!1)}handleTechError_(){const r=this.tech_.error();r&&this.error(r)}handleTechTextData_(){let r=null;arguments.length>1&&(r=arguments[1]),this.trigger("textdata",r)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(r,S){this.ready(function(){if(r in allowedSetters)return set(this.middleware_,this.tech_,r,S);if(r in allowedMediators)return mediate(this.middleware_,this.tech_,r,S);try{this.tech_&&this.tech_[r](S)}catch(E){throw log$1(E),E}},!0)}techGet_(r){if(!(!this.tech_||!this.tech_.isReady_)){if(r in allowedGetters)return get(this.middleware_,this.tech_,r);if(r in allowedMediators)return mediate(this.middleware_,this.tech_,r);try{return this.tech_[r]()}catch(S){throw this.tech_[r]===void 0?(log$1(`Video.js: ${r} method not defined for ${this.techName_} playback technology.`,S),S):S.name==="TypeError"?(log$1(`Video.js: ${r} unavailable on ${this.techName_} playback technology element.`,S),this.tech_.isReady_=!1,S):(log$1(S),S)}}}play(){return new Promise(r=>{this.play_(r)})}play_(r=silencePromise){this.playCallbacks_.push(r);const S=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),E=!!(IS_ANY_SAFARI||IS_IOS);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!S){this.waitToPlay_=R=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!S&&E&&this.load();return}const x=this.techGet_("play");E&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),x===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(x)}runPlayTerminatedQueue_(){const r=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],r.forEach(function(S){S()})}runPlayCallbacks_(r){const S=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],S.forEach(function(E){E(r)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||createTimeRanges$1(0,0)}scrubbing(r){if(typeof r>"u")return this.scrubbing_;this.scrubbing_=!!r,this.techCall_("setScrubbing",this.scrubbing_),r?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(r){if(r===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(r<0&&(r=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=r,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",r),this.cache_.initTime=0,isFinite(r)&&(this.cache_.currentTime=Number(r))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(r){if(r===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;r=parseFloat(r),r<0&&(r=1/0),r!==this.cache_.duration&&(this.cache_.duration=r,r===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(r)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let r=this.techGet_("buffered");return(!r||!r.length)&&(r=createTimeRanges$1(0,0)),r}seekable(){let r=this.techGet_("seekable");return(!r||!r.length)&&(r=createTimeRanges$1(0,0)),r}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration())}bufferedEnd(){const r=this.buffered(),S=this.duration();let E=r.end(r.length-1);return E>S&&(E=S),E}volume(r){let S;if(r!==void 0){S=Math.max(0,Math.min(1,r)),this.cache_.volume=S,this.techCall_("setVolume",S),S>0&&this.lastVolume_(S);return}return S=parseFloat(this.techGet_("volume")),isNaN(S)?1:S}muted(r){if(r!==void 0){this.techCall_("setMuted",r);return}return this.techGet_("muted")||!1}defaultMuted(r){return r!==void 0&&this.techCall_("setDefaultMuted",r),this.techGet_("defaultMuted")||!1}lastVolume_(r){if(r!==void 0&&r!==0){this.cache_.lastVolume=r;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(r){if(r!==void 0){const S=this.isFullscreen_;this.isFullscreen_=!!r,this.isFullscreen_!==S&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(r){this.isInPictureInPicture()&&this.exitPictureInPicture();const S=this;return new Promise((E,x)=>{function C(){S.off("fullscreenerror",Ce),S.off("fullscreenchange",R)}function R(){C(),E()}function Ce(je,Xe){C(),x(Xe)}S.one("fullscreenchange",R),S.one("fullscreenerror",Ce);const Ue=S.requestFullscreenHelper_(r);Ue&&(Ue.then(C,C),Ue.then(E,x))})}requestFullscreenHelper_(r){let S;if(this.fsApi_.prefixed||(S=this.options_.fullscreen&&this.options_.fullscreen.options||{},r!==void 0&&(S=r)),this.fsApi_.requestFullscreen){const E=this.el_[this.fsApi_.requestFullscreen](S);return E&&E.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),E}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const r=this;return new Promise((S,E)=>{function x(){r.off("fullscreenerror",R),r.off("fullscreenchange",C)}function C(){x(),S()}function R(Ue,je){x(),E(je)}r.one("fullscreenchange",C),r.one("fullscreenerror",R);const Ce=r.exitFullscreenHelper_();Ce&&(Ce.then(x,x),Ce.then(S,E))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const r=document$1$1[this.fsApi_.exitFullscreen]();return r&&silencePromise(r.then(()=>this.isFullscreen(!1))),r}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document$1$1.documentElement.style.overflow,on$1(document$1$1,"keydown",this.boundFullWindowOnEscKey_),document$1$1.documentElement.style.overflow="hidden",addClass(document$1$1.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(r){r.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off$1(document$1$1,"keydown",this.boundFullWindowOnEscKey_),document$1$1.documentElement.style.overflow=this.docOrigOverflow,removeClass(document$1$1.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(r){if(r===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",r),this.options_.disablePictureInPicture=r,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(r){if(r!==void 0){this.isInPictureInPicture_=!!r,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&window$1$1.documentPictureInPicture){const r=document$1$1.createElement(this.el().tagName);return r.classList=this.el().classList,r.classList.add("vjs-pip-container"),this.posterImage&&r.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&r.appendChild(this.titleBar.el().cloneNode(!0)),r.appendChild(createEl("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window$1$1.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(S=>(copyStyleSheetsToWindow(S),this.el_.parentNode.insertBefore(r,this.el_),S.document.body.appendChild(this.el_),S.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:S}),S.addEventListener("pagehide",E=>{const x=E.target.querySelector(".video-js");r.parentNode.replaceChild(x,r),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),S))}return"pictureInPictureEnabled"in document$1$1&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(window$1$1.documentPictureInPicture&&window$1$1.documentPictureInPicture.window)return window$1$1.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in document$1$1)return document$1$1.exitPictureInPicture()}handleKeyDown(r){const{userActions:S}=this.options_;!S||!S.hotkeys||(x=>{const C=x.tagName.toLowerCase();if(x.isContentEditable)return!0;const R=["button","checkbox","hidden","radio","reset","submit"];return C==="input"?R.indexOf(x.type)===-1:["textarea"].indexOf(C)!==-1})(this.el_.ownerDocument.activeElement)||(typeof S.hotkeys=="function"?S.hotkeys.call(this,r):this.handleHotkeys(r))}handleHotkeys(r){const S=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:E=R=>r.key.toLowerCase()==="f",muteKey:x=R=>r.key.toLowerCase()==="m",playPauseKey:C=R=>r.key.toLowerCase()==="k"||r.key.toLowerCase()===" "}=S;if(E.call(this,r)){r.preventDefault(),r.stopPropagation();const R=Component$1.getComponent("FullscreenToggle");document$1$1[this.fsApi_.fullscreenEnabled]!==!1&&R.prototype.handleClick.call(this,r)}else x.call(this,r)?(r.preventDefault(),r.stopPropagation(),Component$1.getComponent("MuteToggle").prototype.handleClick.call(this,r)):C.call(this,r)&&(r.preventDefault(),r.stopPropagation(),Component$1.getComponent("PlayToggle").prototype.handleClick.call(this,r))}canPlayType(r){let S;for(let E=0,x=this.options_.techOrder;E<x.length;E++){const C=x[E];let R=Tech.getTech(C);if(R||(R=Component$1.getComponent(C)),!R){log$1.error(`The "${C}" tech is undefined. Skipped browser support check for that tech.`);continue}if(R.isSupported()&&(S=R.canPlayType(r),S))return S}return""}selectSource(r){const S=this.options_.techOrder.map(Ce=>[Ce,Tech.getTech(Ce)]).filter(([Ce,Ue])=>Ue?Ue.isSupported():(log$1.error(`The "${Ce}" tech is undefined. Skipped browser support check for that tech.`),!1)),E=function(Ce,Ue,je){let Xe;return Ce.some(Ye=>Ue.some(St=>{if(Xe=je(Ye,St),Xe)return!0})),Xe};let x;const C=Ce=>(Ue,je)=>Ce(je,Ue),R=([Ce,Ue],je)=>{if(Ue.canPlaySource(je,this.options_[Ce.toLowerCase()]))return{source:je,tech:Ce}};return this.options_.sourceOrder?x=E(r,S,C(R)):x=E(S,r,R),x||!1}handleSrc_(r,S){if(typeof r>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const E=filterSource(r);if(!E.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,S||(this.cache_.sources=E),this.updateSourceCaches_(E[0]),setSource(this,E[0],(x,C)=>{if(this.middleware_=C,S||(this.cache_.sources=E),this.updateSourceCaches_(x),this.src_(x)){if(E.length>1)return this.handleSrc_(E.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}setTech(C,this.tech_)}),E.length>1){const x=()=>{this.error(null),this.handleSrc_(E.slice(1),!0)},C=()=>{this.off("error",x)};this.one("error",x),this.one("playing",C),this.resetRetryOnError_=()=>{this.off("error",x),this.off("playing",C)}}}src(r){return this.handleSrc_(r,!1)}src_(r){const S=this.selectSource([r]);return S?titleCaseEquals(S.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",r):this.techCall_("src",r.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(S.tech,S.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(r,S){return this.tech_?this.tech_.addSourceElement(r,S):!1}removeSourceElement(r){return this.tech_?this.tech_.removeSourceElement(r):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const r=this.play();silencePromise(r.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),isEvented(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:r,durationDisplay:S,progressControl:E,remainingTimeDisplay:x}=this.controlBar||{},{seekBar:C}=E||{};r&&r.updateContent(),S&&S.updateContent(),x&&x.updateContent(),C&&(C.update(),C.loadProgressBar&&C.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const r=this.currentSource(),S=[];return Object.keys(r).length!==0&&S.push(r),this.cache_.sources||S}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(r){if(r!==void 0){this.techCall_("setPreload",r),this.options_.preload=r;return}return this.techGet_("preload")}autoplay(r){if(r===void 0)return this.options_.autoplay||!1;let S;typeof r=="string"&&/(any|play|muted)/.test(r)||r===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=r,this.manualAutoplay_(typeof r=="string"?r:"play"),S=!1):r?this.options_.autoplay=!0:this.options_.autoplay=!1,S=typeof S>"u"?this.options_.autoplay:S,this.tech_&&this.techCall_("setAutoplay",S)}playsinline(r){return r!==void 0&&(this.techCall_("setPlaysinline",r),this.options_.playsinline=r),this.techGet_("playsinline")}loop(r){if(r!==void 0){this.techCall_("setLoop",r),this.options_.loop=r;return}return this.techGet_("loop")}poster(r){if(r===void 0)return this.poster_;r||(r=""),r!==this.poster_&&(this.poster_=r,this.techCall_("setPoster",r),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const r=this.tech_.poster()||"";r!==this.poster_&&(this.poster_=r,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(r){if(r===void 0)return!!this.controls_;r=!!r,this.controls_!==r&&(this.controls_=r,this.usingNativeControls()&&this.techCall_("setControls",r),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(r){if(r===void 0)return!!this.usingNativeControls_;r=!!r,this.usingNativeControls_!==r&&(this.usingNativeControls_=r,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(r){if(r===void 0)return this.error_||null;if(hooks("beforeerror").forEach(S=>{const E=S(this,r);if(!(isObject(E)&&!Array.isArray(E)||typeof E=="string"||typeof E=="number"||E===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}r=E}),this.options_.suppressNotSupportedError&&r&&r.code===4){const S=function(){this.error(r)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],S),this.one("loadstart",function(){this.off(["click","touchstart"],S)});return}if(r===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new MediaError(r),this.addClass("vjs-error"),log$1.error(`(CODE:${this.error_.code} ${MediaError.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),hooks("error").forEach(S=>S(this,this.error_))}reportUserActivity(r){this.userActivity_=!0}userActive(r){if(r===void 0)return this.userActive_;if(r=!!r,r!==this.userActive_){if(this.userActive_=r,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(S){S.stopPropagation(),S.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let r,S,E;const x=bind_(this,this.reportUserActivity),C=function(Ye){(Ye.screenX!==S||Ye.screenY!==E)&&(S=Ye.screenX,E=Ye.screenY,x())},R=function(){x(),this.clearInterval(r),r=this.setInterval(x,250)},Ce=function(Ye){x(),this.clearInterval(r)};this.on("mousedown",R),this.on("mousemove",C),this.on("mouseup",Ce),this.on("mouseleave",Ce);const Ue=this.getChild("controlBar");Ue&&!IS_IOS&&!IS_ANDROID&&(Ue.on("mouseenter",function(Ye){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),Ue.on("mouseleave",function(Ye){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",x),this.on("keyup",x);let je;const Xe=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(je);const Ye=this.options_.inactivityTimeout;Ye<=0||(je=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},Ye))};this.setInterval(Xe,250)}playbackRate(r){if(r!==void 0){this.techCall_("setPlaybackRate",r);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(r){return r!==void 0?this.techCall_("setDefaultPlaybackRate",r):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(r){if(r!==void 0){this.isAudio_=!!r;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const r=this.getChild("ControlBar");!r||this.audioOnlyCache_.controlBarHeight===r.currentHeight()||(this.audioOnlyCache_.controlBarHeight=r.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const r=this.children(),S=this.getChild("ControlBar"),E=S&&S.currentHeight();r.forEach(x=>{x!==S&&x.el_&&!x.hasClass("vjs-hidden")&&(x.hide(),this.audioOnlyCache_.hiddenChildren.push(x))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=E,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(E),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(r=>r.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(r){if(typeof r!="boolean"||r===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=r,r){const S=[];return this.isInPictureInPicture()&&S.push(this.exitPictureInPicture()),this.isFullscreen()&&S.push(this.exitFullscreen()),this.audioPosterMode()&&S.push(this.audioPosterMode(!1)),Promise.all(S).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(r){return typeof r!="boolean"||r===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=r,r?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(r,S,E){if(this.tech_)return this.tech_.addTextTrack(r,S,E)}addRemoteTextTrack(r,S){if(this.tech_)return this.tech_.addRemoteTextTrack(r,S)}removeRemoteTextTrack(r={}){let{track:S}=r;if(S||(S=r),this.tech_)return this.tech_.removeRemoteTextTrack(S)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(r){if(r===void 0)return this.language_;this.language_!==String(r).toLowerCase()&&(this.language_=String(r).toLowerCase(),isEvented(this)&&this.trigger("languagechange"))}languages(){return merge$1(Player.prototype.options_.languages,this.languages_)}toJSON(){const r=merge$1(this.options_),S=r.tracks;r.tracks=[];for(let E=0;E<S.length;E++){let x=S[E];x=merge$1(x),x.player=void 0,r.tracks[E]=x}return r}createModal(r,S){S=S||{},S.content=r||"";const E=new ModalDialog(this,S);return this.addChild(E),E.on("dispose",()=>{this.removeChild(E)}),E.open(),E}updateCurrentBreakpoint_(){if(!this.responsive())return;const r=this.currentBreakpoint(),S=this.currentWidth();for(let E=0;E<BREAKPOINT_ORDER.length;E++){const x=BREAKPOINT_ORDER[E],C=this.breakpoints_[x];if(S<=C){if(r===x)return;r&&this.removeClass(BREAKPOINT_CLASSES[r]),this.addClass(BREAKPOINT_CLASSES[x]),this.breakpoint_=x;break}}}removeCurrentBreakpoint_(){const r=this.currentBreakpointClass();this.breakpoint_="",r&&this.removeClass(r)}breakpoints(r){return r===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},DEFAULT_BREAKPOINTS,r),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(r){if(r===void 0)return this.responsive_;r=!!r;const S=this.responsive_;if(r!==S)return this.responsive_=r,r?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),r}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||""}loadMedia(r,S){if(!r||typeof r!="object")return;const E=this.crossOrigin();this.reset(),this.cache_.media=merge$1(r);const{artist:x,artwork:C,description:R,poster:Ce,src:Ue,textTracks:je,title:Xe}=this.cache_.media;!C&&Ce&&(this.cache_.media.artwork=[{src:Ce,type:getMimetype(Ce)}]),E&&this.crossOrigin(E),Ue&&this.src(Ue),Ce&&this.poster(Ce),Array.isArray(je)&&je.forEach(Ye=>this.addRemoteTextTrack(Ye,!1)),this.titleBar&&this.titleBar.update({title:Xe,description:R||x||""}),this.ready(S)}getMedia(){if(!this.cache_.media){const r=this.poster(),S=this.currentSources(),E=Array.prototype.map.call(this.remoteTextTracks(),C=>({kind:C.kind,label:C.label,language:C.language,src:C.src})),x={src:S,textTracks:E};return r&&(x.poster=r,x.artwork=[{src:x.poster,type:getMimetype(x.poster)}]),x}return merge$1(this.cache_.media)}static getTagSettings(r){const S={sources:[],tracks:[]},E=getAttributes(r),x=E["data-setup"];if(hasClass(r,"vjs-fill")&&(E.fill=!0),hasClass(r,"vjs-fluid")&&(E.fluid=!0),x!==null)try{Object.assign(E,JSON.parse(x||"{}"))}catch(C){log$1.error("data-setup",C)}if(Object.assign(S,E),r.hasChildNodes()){const C=r.childNodes;for(let R=0,Ce=C.length;R<Ce;R++){const Ue=C[R],je=Ue.nodeName.toLowerCase();je==="source"?S.sources.push(getAttributes(Ue)):je==="track"&&S.tracks.push(getAttributes(Ue))}}return S}debug(r){if(r===void 0)return this.debugEnabled_;r?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(r){if(r===void 0)return this.cache_.playbackRates;Array.isArray(r)&&r.every(S=>typeof S=="number")&&(this.cache_.playbackRates=r,this.trigger("playbackrateschange"))}}ALL.names.forEach(function(o){const r=ALL[o];Player.prototype[r.getterName]=function(){return this.tech_?this.tech_[r.getterName]():(this[r.privateName]=this[r.privateName]||new r.ListClass,this[r.privateName])}});Player.prototype.crossorigin=Player.prototype.crossOrigin;Player.players={};const navigator$1=window$1$1.navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator$1&&(navigator$1.languages&&navigator$1.languages[0]||navigator$1.userLanguage||navigator$1.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};TECH_EVENTS_RETRIGGER.forEach(function(o){Player.prototype[`handleTech${toTitleCase$1(o)}_`]=function(){return this.trigger(o)}});Component$1.registerComponent("Player",Player);const BASE_PLUGIN_NAME="plugin",PLUGIN_CACHE_KEY="activePlugins_",pluginStorage={},pluginExists=o=>pluginStorage.hasOwnProperty(o),getPlugin=o=>pluginExists(o)?pluginStorage[o]:void 0,markPluginAsActive=(o,r)=>{o[PLUGIN_CACHE_KEY]=o[PLUGIN_CACHE_KEY]||{},o[PLUGIN_CACHE_KEY][r]=!0},triggerSetupEvent=(o,r,S)=>{const E=(S?"before":"")+"pluginsetup";o.trigger(E,r),o.trigger(E+":"+r.name,r)},createBasicPlugin=function(o,r){const S=function(){triggerSetupEvent(this,{name:o,plugin:r,instance:null},!0);const E=r.apply(this,arguments);return markPluginAsActive(this,o),triggerSetupEvent(this,{name:o,plugin:r,instance:E}),E};return Object.keys(r).forEach(function(E){S[E]=r[E]}),S},createPluginFactory=(o,r)=>(r.prototype.name=o,function(...S){triggerSetupEvent(this,{name:o,plugin:r,instance:null},!0);const E=new r(this,...S);return this[o]=()=>E,triggerSetupEvent(this,E.getEventHash()),E});class Plugin{constructor(r){if(this.constructor===Plugin)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=r,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),markPluginAsActive(r,this.name),this.dispose=this.dispose.bind(this),r.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(r={}){return r.name=this.name,r.plugin=this.constructor,r.instance=this,r}trigger(r,S={}){return trigger(this.eventBusEl_,r,this.getEventHash(S))}handleStateChanged(r){}dispose(){const{name:r,player:S}=this;this.trigger("dispose"),this.off(),S.off("dispose",this.dispose),S[PLUGIN_CACHE_KEY][r]=!1,this.player=this.state=null,S[r]=createPluginFactory(r,pluginStorage[r])}static isBasic(r){const S=typeof r=="string"?getPlugin(r):r;return typeof S=="function"&&!Plugin.prototype.isPrototypeOf(S.prototype)}static registerPlugin(r,S){if(typeof r!="string")throw new Error(`Illegal plugin name, "${r}", must be a string, was ${typeof r}.`);if(pluginExists(r))log$1.warn(`A plugin named "${r}" already exists. You may want to avoid re-registering plugins!`);else if(Player.prototype.hasOwnProperty(r))throw new Error(`Illegal plugin name, "${r}", cannot share a name with an existing player method!`);if(typeof S!="function")throw new Error(`Illegal plugin for "${r}", must be a function, was ${typeof S}.`);return pluginStorage[r]=S,r!==BASE_PLUGIN_NAME&&(Plugin.isBasic(S)?Player.prototype[r]=createBasicPlugin(r,S):Player.prototype[r]=createPluginFactory(r,S)),S}static deregisterPlugin(r){if(r===BASE_PLUGIN_NAME)throw new Error("Cannot de-register base plugin.");pluginExists(r)&&(delete pluginStorage[r],delete Player.prototype[r])}static getPlugins(r=Object.keys(pluginStorage)){let S;return r.forEach(E=>{const x=getPlugin(E);x&&(S=S||{},S[E]=x)}),S}static getPluginVersion(r){const S=getPlugin(r);return S&&S.VERSION||""}}Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(o){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][o]===!0};Player.prototype.hasPlugin=function(o){return!!pluginExists(o)};function deprecate(o,r){let S=!1;return function(...E){return S||log$1.warn(o),S=!0,r.apply(this,E)}}function deprecateForMajor(o,r,S,E){return deprecate(`${r} is deprecated and will be removed in ${o}.0; please use ${S} instead.`,E)}var VjsErrors={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const normalizeId=o=>o.indexOf("#")===0?o.slice(1):o;function videojs(o,r,S){let E=videojs.getPlayer(o);if(E)return r&&log$1.warn(`Player "${o}" is already initialised. Options will not be applied.`),S&&E.ready(S),E;const x=typeof o=="string"?$("#"+normalizeId(o)):o;if(!isEl(x))throw new TypeError("The element or ID supplied is not valid. (videojs)");const R=("getRootNode"in x?x.getRootNode()instanceof window$1$1.ShadowRoot:!1)?x.getRootNode():x.ownerDocument.body;(!x.ownerDocument.defaultView||!R.contains(x))&&log$1.warn("The element supplied is not included in the DOM"),r=r||{},r.restoreEl===!0&&(r.restoreEl=(x.parentNode&&x.parentNode.hasAttribute&&x.parentNode.hasAttribute("data-vjs-player")?x.parentNode:x).cloneNode(!0)),hooks("beforesetup").forEach(Ue=>{const je=Ue(x,merge$1(r));if(!isObject(je)||Array.isArray(je)){log$1.error("please return an object in beforesetup hooks");return}r=merge$1(r,je)});const Ce=Component$1.getComponent("Player");return E=new Ce(x,r,S),hooks("setup").forEach(Ue=>Ue(E)),E}videojs.hooks_=hooks_;videojs.hooks=hooks;videojs.hook=hook;videojs.hookOnce=hookOnce;videojs.removeHook=removeHook;if(window$1$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&isReal()){let o=$(".vjs-styles-defaults");if(!o){o=createStyleElement("vjs-styles-defaults");const r=$("head");r&&r.insertBefore(o,r.firstChild),setTextContent(o,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}autoSetupTimeout(1,videojs);videojs.VERSION=version$6;videojs.options=Player.prototype.options_;videojs.getPlayers=()=>Player.players;videojs.getPlayer=o=>{const r=Player.players;let S;if(typeof o=="string"){const E=normalizeId(o),x=r[E];if(x)return x;S=$("#"+E)}else S=o;if(isEl(S)){const{player:E,playerId:x}=S;if(E||r[x])return E||r[x]}};videojs.getAllPlayers=()=>Object.keys(Player.players).map(o=>Player.players[o]).filter(Boolean);videojs.players=Player.players;videojs.getComponent=Component$1.getComponent;videojs.registerComponent=(o,r)=>(Tech.isTech(r)&&log$1.warn(`The ${o} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Component$1.registerComponent.call(Component$1,o,r));videojs.getTech=Tech.getTech;videojs.registerTech=Tech.registerTech;videojs.use=use;Object.defineProperty(videojs,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(videojs.middleware,"TERMINATOR",{value:TERMINATOR,writeable:!1,enumerable:!0});videojs.browser=browser;videojs.obj=Obj;videojs.mergeOptions=deprecateForMajor(9,"videojs.mergeOptions","videojs.obj.merge",merge$1);videojs.defineLazyProperty=deprecateForMajor(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",defineLazyProperty);videojs.bind=deprecateForMajor(9,"videojs.bind","native Function.prototype.bind",bind_);videojs.registerPlugin=Plugin.registerPlugin;videojs.deregisterPlugin=Plugin.deregisterPlugin;videojs.plugin=(o,r)=>(log$1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Plugin.registerPlugin(o,r));videojs.getPlugins=Plugin.getPlugins;videojs.getPlugin=Plugin.getPlugin;videojs.getPluginVersion=Plugin.getPluginVersion;videojs.addLanguage=function(o,r){return o=(""+o).toLowerCase(),videojs.options.languages=merge$1(videojs.options.languages,{[o]:r}),videojs.options.languages[o]};videojs.log=log$1;videojs.createLogger=createLogger;videojs.time=Time;videojs.createTimeRange=deprecateForMajor(9,"videojs.createTimeRange","videojs.time.createTimeRanges",createTimeRanges$1);videojs.createTimeRanges=deprecateForMajor(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",createTimeRanges$1);videojs.formatTime=deprecateForMajor(9,"videojs.formatTime","videojs.time.formatTime",formatTime);videojs.setFormatTime=deprecateForMajor(9,"videojs.setFormatTime","videojs.time.setFormatTime",setFormatTime);videojs.resetFormatTime=deprecateForMajor(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",resetFormatTime);videojs.parseUrl=deprecateForMajor(9,"videojs.parseUrl","videojs.url.parseUrl",parseUrl);videojs.isCrossOrigin=deprecateForMajor(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",isCrossOrigin);videojs.EventTarget=EventTarget$2;videojs.any=any;videojs.on=on$1;videojs.one=one;videojs.off=off$1;videojs.trigger=trigger;videojs.xhr=XHR;videojs.TextTrack=TextTrack;videojs.AudioTrack=AudioTrack;videojs.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(o=>{videojs[o]=function(){return log$1.warn(`videojs.${o}() is deprecated; use videojs.dom.${o}() instead`),Dom[o].apply(null,arguments)}});videojs.computedStyle=deprecateForMajor(9,"videojs.computedStyle","videojs.dom.computedStyle",computedStyle);videojs.dom=Dom;videojs.fn=Fn;videojs.num=Num;videojs.str=Str;videojs.url=Url;videojs.Error=VjsErrors;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class QualityLevel{constructor(r){let S=this;return S.id=r.id,S.label=S.id,S.width=r.width,S.height=r.height,S.bitrate=r.bandwidth,S.frameRate=r.frameRate,S.enabled_=r.enabled,Object.defineProperty(S,"enabled",{get(){return S.enabled_()},set(E){S.enabled_(E)}}),S}}class QualityLevelList extends videojs.EventTarget{constructor(){super();let r=this;return r.levels_=[],r.selectedIndex_=-1,Object.defineProperty(r,"selectedIndex",{get(){return r.selectedIndex_}}),Object.defineProperty(r,"length",{get(){return r.levels_.length}}),r[Symbol.iterator]=()=>r.levels_.values(),r}addQualityLevel(r){let S=this.getQualityLevelById(r.id);if(S)return S;const E=this.levels_.length;return S=new QualityLevel(r),""+E in this||Object.defineProperty(this,E,{get(){return this.levels_[E]}}),this.levels_.push(S),this.trigger({qualityLevel:S,type:"addqualitylevel"}),S}removeQualityLevel(r){let S=null;for(let E=0,x=this.length;E<x;E++)if(this[E]===r){S=this.levels_.splice(E,1)[0],this.selectedIndex_===E?this.selectedIndex_=-1:this.selectedIndex_>E&&this.selectedIndex_--;break}return S&&this.trigger({qualityLevel:r,type:"removequalitylevel"}),S}getQualityLevelById(r){for(let S=0,E=this.length;S<E;S++){const x=this[S];if(x.id===r)return x}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}QualityLevelList.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const o in QualityLevelList.prototype.allowedEvents_)QualityLevelList.prototype["on"+o]=null;var version$5="4.1.0";const initPlugin$1=function(o,r){const S=o.qualityLevels,E=new QualityLevelList,x=function(){E.dispose(),o.qualityLevels=S,o.off("dispose",x)};return o.on("dispose",x),o.qualityLevels=()=>E,o.qualityLevels.VERSION=version$5,E},qualityLevels=function(o){return initPlugin$1(this,videojs.obj.merge({},o))};videojs.registerPlugin("qualityLevels",qualityLevels);qualityLevels.VERSION=version$5;/*! @name @videojs/http-streaming @version 3.15.0 @license Apache-2.0 */const resolveUrl=resolveUrl$1,resolveManifestRedirect=(o,r)=>r&&r.responseURL&&o!==r.responseURL?r.responseURL:o,logger=o=>videojs.log.debug?videojs.log.debug.bind(videojs,"VHS:",`${o} >`):function(){};function merge(...o){const r=videojs.obj||videojs;return(r.merge||r.mergeOptions).apply(r,o)}function createTimeRanges(...o){const r=videojs.time||videojs;return(r.createTimeRanges||r.createTimeRanges).apply(r,o)}function bufferedRangesToString(o){if(o.length===0)return"Buffered Ranges are empty";let r=`Buffered Ranges: 
`;for(let S=0;S<o.length;S++){const E=o.start(S),x=o.end(S);r+=`${E} --> ${x}. Duration (${x-E})
`}return r}const TIME_FUDGE_FACTOR=1/30,SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3,filterRanges=function(o,r){const S=[];let E;if(o&&o.length)for(E=0;E<o.length;E++)r(o.start(E),o.end(E))&&S.push([o.start(E),o.end(E)]);return createTimeRanges(S)},findRange=function(o,r){return filterRanges(o,function(S,E){return S-SAFE_TIME_DELTA<=r&&E+SAFE_TIME_DELTA>=r})},findNextRange=function(o,r){return filterRanges(o,function(S){return S-TIME_FUDGE_FACTOR>=r})},findGaps=function(o){if(o.length<2)return createTimeRanges();const r=[];for(let S=1;S<o.length;S++){const E=o.end(S-1),x=o.start(S);r.push([E,x])}return createTimeRanges(r)},bufferIntersection=function(o,r){let S=null,E=null,x=0;const C=[],R=[];if(!o||!o.length||!r||!r.length)return createTimeRanges();let Ce=o.length;for(;Ce--;)C.push({time:o.start(Ce),type:"start"}),C.push({time:o.end(Ce),type:"end"});for(Ce=r.length;Ce--;)C.push({time:r.start(Ce),type:"start"}),C.push({time:r.end(Ce),type:"end"});for(C.sort(function(Ue,je){return Ue.time-je.time}),Ce=0;Ce<C.length;Ce++)C[Ce].type==="start"?(x++,x===2&&(S=C[Ce].time)):C[Ce].type==="end"&&(x--,x===1&&(E=C[Ce].time)),S!==null&&E!==null&&(R.push([S,E]),S=null,E=null);return createTimeRanges(R)},printableRange=o=>{const r=[];if(!o||!o.length)return"";for(let S=0;S<o.length;S++)r.push(o.start(S)+" => "+o.end(S));return r.join(", ")},timeUntilRebuffer=function(o,r,S=1){return((o.length?o.end(o.length-1):0)-r)/S},timeRangesToArray=o=>{const r=[];for(let S=0;S<o.length;S++)r.push({start:o.start(S),end:o.end(S)});return r},isRangeDifferent=function(o,r){if(o===r)return!1;if(!o&&r||!r&&o||o.length!==r.length)return!0;for(let S=0;S<o.length;S++)if(o.start(S)!==r.start(S)||o.end(S)!==r.end(S))return!0;return!1},lastBufferedEnd=function(o){if(!(!o||!o.length||!o.end))return o.end(o.length-1)},timeAheadOf=function(o,r){let S=0;if(!o||!o.length)return S;for(let E=0;E<o.length;E++){const x=o.start(E),C=o.end(E);if(!(r>C)){if(r>x&&r<=C){S+=C-r;continue}S+=C-x}}return S},segmentDurationWithParts=(o,r)=>{if(!r.preload)return r.duration;let S=0;return(r.parts||[]).forEach(function(E){S+=E.duration}),(r.preloadHints||[]).forEach(function(E){E.type==="PART"&&(S+=o.partTargetDuration)}),S},getPartsAndSegments=o=>(o.segments||[]).reduce((r,S,E)=>(S.parts?S.parts.forEach(function(x,C){r.push({duration:x.duration,segmentIndex:E,partIndex:C,part:x,segment:S})}):r.push({duration:S.duration,segmentIndex:E,partIndex:null,segment:S,part:null}),r),[]),getLastParts=o=>{const r=o.segments&&o.segments.length&&o.segments[o.segments.length-1];return r&&r.parts||[]},getKnownPartCount=({preloadSegment:o})=>{if(!o)return;const{parts:r,preloadHints:S}=o;let E=(S||[]).reduce((x,C)=>x+(C.type==="PART"?1:0),0);return E+=r&&r.length?r.length:0,E},liveEdgeDelay=(o,r)=>{if(r.endList)return 0;if(o&&o.suggestedPresentationDelay)return o.suggestedPresentationDelay;const S=getLastParts(r).length>0;return S&&r.serverControl&&r.serverControl.partHoldBack?r.serverControl.partHoldBack:S&&r.partTargetDuration?r.partTargetDuration*3:r.serverControl&&r.serverControl.holdBack?r.serverControl.holdBack:r.targetDuration?r.targetDuration*3:0},backwardDuration=function(o,r){let S=0,E=r-o.mediaSequence,x=o.segments[E];if(x){if(typeof x.start<"u")return{result:x.start,precise:!0};if(typeof x.end<"u")return{result:x.end-x.duration,precise:!0}}for(;E--;){if(x=o.segments[E],typeof x.end<"u")return{result:S+x.end,precise:!0};if(S+=segmentDurationWithParts(o,x),typeof x.start<"u")return{result:S+x.start,precise:!0}}return{result:S,precise:!1}},forwardDuration=function(o,r){let S=0,E,x=r-o.mediaSequence;for(;x<o.segments.length;x++){if(E=o.segments[x],typeof E.start<"u")return{result:E.start-S,precise:!0};if(S+=segmentDurationWithParts(o,E),typeof E.end<"u")return{result:E.end-S,precise:!0}}return{result:-1,precise:!1}},intervalDuration=function(o,r,S){if(typeof r>"u"&&(r=o.mediaSequence+o.segments.length),r<o.mediaSequence)return 0;const E=backwardDuration(o,r);if(E.precise)return E.result;const x=forwardDuration(o,r);return x.precise?x.result:E.result+S},duration=function(o,r,S){if(!o)return 0;if(typeof S!="number"&&(S=0),typeof r>"u"){if(o.totalDuration)return o.totalDuration;if(!o.endList)return window$1$1.Infinity}return intervalDuration(o,r,S)},sumDurations=function({defaultDuration:o,durationList:r,startIndex:S,endIndex:E}){let x=0;if(S>E&&([S,E]=[E,S]),S<0){for(let C=S;C<Math.min(0,E);C++)x+=o;S=0}for(let C=S;C<E;C++)x+=r[C].duration;return x},playlistEnd=function(o,r,S,E){if(!o||!o.segments)return null;if(o.endList)return duration(o);if(r===null)return null;r=r||0;let x=intervalDuration(o,o.mediaSequence+o.segments.length,r);return S&&(E=typeof E=="number"?E:liveEdgeDelay(null,o),x-=E),Math.max(0,x)},seekable=function(o,r,S){const x=r||0;let C=playlistEnd(o,r,!0,S);return C===null?createTimeRanges():(C<x&&(C=x),createTimeRanges(x,C))},getMediaInfoForTime=function({playlist:o,currentTime:r,startingSegmentIndex:S,startingPartIndex:E,startTime:x,exactManifestTimings:C}){let R=r-x;const Ce=getPartsAndSegments(o);let Ue=0;for(let je=0;je<Ce.length;je++){const Xe=Ce[je];if(S===Xe.segmentIndex&&!(typeof E=="number"&&typeof Xe.partIndex=="number"&&E!==Xe.partIndex)){Ue=je;break}}if(R<0){if(Ue>0)for(let je=Ue-1;je>=0;je--){const Xe=Ce[je];if(R+=Xe.duration,C){if(R<0)continue}else if(R+TIME_FUDGE_FACTOR<=0)continue;return{partIndex:Xe.partIndex,segmentIndex:Xe.segmentIndex,startTime:x-sumDurations({defaultDuration:o.targetDuration,durationList:Ce,startIndex:Ue,endIndex:je})}}return{partIndex:Ce[0]&&Ce[0].partIndex||null,segmentIndex:Ce[0]&&Ce[0].segmentIndex||0,startTime:r}}if(Ue<0){for(let je=Ue;je<0;je++)if(R-=o.targetDuration,R<0)return{partIndex:Ce[0]&&Ce[0].partIndex||null,segmentIndex:Ce[0]&&Ce[0].segmentIndex||0,startTime:r};Ue=0}for(let je=Ue;je<Ce.length;je++){const Xe=Ce[je];R-=Xe.duration;const Ye=Xe.duration>TIME_FUDGE_FACTOR,St=R===0,Dt=Ye&&R+TIME_FUDGE_FACTOR>=0;if(!((St||Dt)&&je!==Ce.length-1)){if(C){if(R>0)continue}else if(R-TIME_FUDGE_FACTOR>=0)continue;return{partIndex:Xe.partIndex,segmentIndex:Xe.segmentIndex,startTime:x+sumDurations({defaultDuration:o.targetDuration,durationList:Ce,startIndex:Ue,endIndex:je})}}}return{segmentIndex:Ce[Ce.length-1].segmentIndex,partIndex:Ce[Ce.length-1].partIndex,startTime:r}},isExcluded=function(o){return o.excludeUntil&&o.excludeUntil>Date.now()},isIncompatible=function(o){return o.excludeUntil&&o.excludeUntil===1/0},isEnabled=function(o){const r=isExcluded(o);return!o.disabled&&!r},isDisabled=function(o){return o.disabled},isAes=function(o){for(let r=0;r<o.segments.length;r++)if(o.segments[r].key)return!0;return!1},hasAttribute=function(o,r){return r.attributes&&r.attributes[o]},estimateSegmentRequestTime=function(o,r,S,E=0){return hasAttribute("BANDWIDTH",S)?(o*S.attributes.BANDWIDTH-E*8)/r:NaN},isLowestEnabledRendition=(o,r)=>{if(o.playlists.length===1)return!0;const S=r.attributes.BANDWIDTH||Number.MAX_VALUE;return o.playlists.filter(E=>isEnabled(E)?(E.attributes.BANDWIDTH||0)<S:!1).length===0},playlistMatch=(o,r)=>!o&&!r||!o&&r||o&&!r?!1:!!(o===r||o.id&&r.id&&o.id===r.id||o.resolvedUri&&r.resolvedUri&&o.resolvedUri===r.resolvedUri||o.uri&&r.uri&&o.uri===r.uri),someAudioVariant=function(o,r){const S=o&&o.mediaGroups&&o.mediaGroups.AUDIO||{};let E=!1;for(const x in S){for(const C in S[x])if(E=r(S[x][C]),E)break;if(E)break}return!!E},isAudioOnly=o=>{if(!o||!o.playlists||!o.playlists.length)return someAudioVariant(o,S=>S.playlists&&S.playlists.length||S.uri);for(let r=0;r<o.playlists.length;r++){const S=o.playlists[r],E=S.attributes&&S.attributes.CODECS;if(!(E&&E.split(",").every(C=>isAudioCodec(C))||someAudioVariant(o,C=>playlistMatch(S,C))))return!1}return!0};var Playlist={liveEdgeDelay,duration,seekable,getMediaInfoForTime,isEnabled,isDisabled,isExcluded,isIncompatible,playlistEnd,isAes,hasAttribute,estimateSegmentRequestTime,isLowestEnabledRendition,isAudioOnly,playlistMatch,segmentDurationWithParts};const{log}=videojs,createPlaylistID=(o,r)=>`${o}-${r}`,groupID=(o,r,S)=>`placeholder-uri-${o}-${r}-${S}`,parseManifest=({onwarn:o,oninfo:r,manifestString:S,customTagParsers:E=[],customTagMappers:x=[],llhls:C})=>{const R=new Parser;o&&R.on("warn",o),r&&R.on("info",r),E.forEach(je=>R.addParser(je)),x.forEach(je=>R.addTagMapper(je)),R.push(S),R.end();const Ce=R.manifest;if(C||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(je){Ce.hasOwnProperty(je)&&delete Ce[je]}),Ce.segments&&Ce.segments.forEach(function(je){["parts","preloadHints"].forEach(function(Xe){je.hasOwnProperty(Xe)&&delete je[Xe]})})),!Ce.targetDuration){let je=10;Ce.segments&&Ce.segments.length&&(je=Ce.segments.reduce((Xe,Ye)=>Math.max(Xe,Ye.duration),0)),o&&o({message:`manifest has no targetDuration defaulting to ${je}`}),Ce.targetDuration=je}const Ue=getLastParts(Ce);if(Ue.length&&!Ce.partTargetDuration){const je=Ue.reduce((Xe,Ye)=>Math.max(Xe,Ye.duration),0);o&&(o({message:`manifest has no partTargetDuration defaulting to ${je}`}),log.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),Ce.partTargetDuration=je}return Ce},forEachMediaGroup=(o,r)=>{o.mediaGroups&&["AUDIO","SUBTITLES"].forEach(S=>{if(o.mediaGroups[S])for(const E in o.mediaGroups[S])for(const x in o.mediaGroups[S][E]){const C=o.mediaGroups[S][E][x];r(C,S,E,x)}})},setupMediaPlaylist=({playlist:o,uri:r,id:S})=>{o.id=S,o.playlistErrors_=0,r&&(o.uri=r),o.attributes=o.attributes||{}},setupMediaPlaylists=o=>{let r=o.playlists.length;for(;r--;){const S=o.playlists[r];setupMediaPlaylist({playlist:S,id:createPlaylistID(r,S.uri)}),S.resolvedUri=resolveUrl(o.uri,S.uri),o.playlists[S.id]=S,o.playlists[S.uri]=S,S.attributes.BANDWIDTH||log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},resolveMediaGroupUris=o=>{forEachMediaGroup(o,r=>{r.uri&&(r.resolvedUri=resolveUrl(o.uri,r.uri))})},mainForMedia=(o,r)=>{const S=createPlaylistID(0,r),E={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window$1$1.location.href,resolvedUri:window$1$1.location.href,playlists:[{uri:r,id:S,resolvedUri:r,attributes:{}}]};return E.playlists[S]=E.playlists[0],E.playlists[r]=E.playlists[0],E},addPropertiesToMain=(o,r,S=groupID)=>{o.uri=r;for(let x=0;x<o.playlists.length;x++)if(!o.playlists[x].uri){const C=`placeholder-uri-${x}`;o.playlists[x].uri=C}const E=isAudioOnly(o);forEachMediaGroup(o,(x,C,R,Ce)=>{if(!x.playlists||!x.playlists.length){if(E&&C==="AUDIO"&&!x.uri)for(let Ue=0;Ue<o.playlists.length;Ue++){const je=o.playlists[Ue];if(je.attributes&&je.attributes.AUDIO&&je.attributes.AUDIO===R)return}x.playlists=[_extends$3({},x)]}x.playlists.forEach(function(Ue,je){const Xe=S(C,R,Ce,Ue),Ye=createPlaylistID(je,Xe);Ue.uri?Ue.resolvedUri=Ue.resolvedUri||resolveUrl(o.uri,Ue.uri):(Ue.uri=je===0?Xe:Ye,Ue.resolvedUri=Ue.uri),Ue.id=Ue.id||Ye,Ue.attributes=Ue.attributes||{},o.playlists[Ue.id]=Ue,o.playlists[Ue.uri]=Ue})}),setupMediaPlaylists(o),resolveMediaGroupUris(o)};class DateRangesStorage{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(r=[]){if(this.offset_!==null||!r.length)return;const[S]=r;S.programDateTime!==void 0&&(this.offset_=S.programDateTime/1e3)}setPendingDateRanges(r=[]){if(!r.length)return;const[S]=r,E=S.startDate.getTime();this.trimProcessedDateRanges_(E),this.pendingDateRanges_=r.reduce((x,C)=>(x.set(C.id,C),x),new Map)}processDateRange(r){this.pendingDateRanges_.delete(r.id),this.processedDateRanges_.set(r.id,r)}getDateRangesToProcess(){if(this.offset_===null)return[];const r={},S=[];this.pendingDateRanges_.forEach((E,x)=>{if(!this.processedDateRanges_.has(x)&&(E.startTime=E.startDate.getTime()/1e3-this.offset_,E.processDateRange=()=>this.processDateRange(E),S.push(E),!!E.class))if(r[E.class]){const C=r[E.class].push(E);E.classListIndex=C-1}else r[E.class]=[E],E.classListIndex=0});for(const E of S){const x=r[E.class]||[];E.endDate?E.endTime=E.endDate.getTime()/1e3-this.offset_:E.endOnNext&&x[E.classListIndex+1]?E.endTime=x[E.classListIndex+1].startTime:E.duration?E.endTime=E.startTime+E.duration:E.plannedDuration?E.endTime=E.startTime+E.plannedDuration:E.endTime=E.startTime}return S}trimProcessedDateRanges_(r){new Map(this.processedDateRanges_).forEach((E,x)=>{E.startDate.getTime()<r&&this.processedDateRanges_.delete(x)})}}const QUOTA_EXCEEDED_ERR=22,getStreamingNetworkErrorMetadata=({requestType:o,request:r,error:S,parseFailure:E})=>{const x=r.status<200||r.status>299,C=r.status>=400&&r.status<=499,R={uri:r.uri,requestType:o},Ce=x&&!C||E;if(S&&C)R.error=_extends$3({},S),R.errorType=videojs.Error.NetworkRequestFailed;else if(r.aborted)R.errorType=videojs.Error.NetworkRequestAborted;else if(r.timedout)R.erroType=videojs.Error.NetworkRequestTimeout;else if(Ce){const Ue=E?videojs.Error.NetworkBodyParserFailed:videojs.Error.NetworkBadStatus;R.errorType=Ue,R.status=r.status,R.headers=r.headers}return R},{EventTarget:EventTarget$1}=videojs,addLLHLSQueryDirectives=(o,r)=>{if(r.endList||!r.serverControl)return o;const S={};if(r.serverControl.canBlockReload){const{preloadSegment:E}=r;let x=r.mediaSequence+r.segments.length;if(E){const C=E.parts||[],R=getKnownPartCount(r)-1;R>-1&&R!==C.length-1&&(S._HLS_part=R),(R>-1||C.length)&&x--}S._HLS_msn=x}if(r.serverControl&&r.serverControl.canSkipUntil&&(S._HLS_skip=r.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(S).length){const E=new window$1$1.URL(o);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(x){S.hasOwnProperty(x)&&E.searchParams.set(x,S[x])}),o=E.toString()}return o},updateSegment=(o,r)=>{if(!o)return r;const S=merge(o,r);if(o.preloadHints&&!r.preloadHints&&delete S.preloadHints,o.parts&&!r.parts)delete S.parts;else if(o.parts&&r.parts)for(let E=0;E<r.parts.length;E++)o.parts&&o.parts[E]&&(S.parts[E]=merge(o.parts[E],r.parts[E]));return!o.skipped&&r.skipped&&(S.skipped=!1),o.preload&&!r.preload&&(S.preload=!1),S},updateSegments=(o,r,S)=>{const E=o.slice(),x=r.slice();S=S||0;const C=[];let R;for(let Ce=0;Ce<x.length;Ce++){const Ue=E[Ce+S],je=x[Ce];Ue?(R=Ue.map||R,C.push(updateSegment(Ue,je))):(R&&!je.map&&(je.map=R),C.push(je))}return C},resolveSegmentUris=(o,r)=>{!o.resolvedUri&&o.uri&&(o.resolvedUri=resolveUrl(r,o.uri)),o.key&&!o.key.resolvedUri&&(o.key.resolvedUri=resolveUrl(r,o.key.uri)),o.map&&!o.map.resolvedUri&&(o.map.resolvedUri=resolveUrl(r,o.map.uri)),o.map&&o.map.key&&!o.map.key.resolvedUri&&(o.map.key.resolvedUri=resolveUrl(r,o.map.key.uri)),o.parts&&o.parts.length&&o.parts.forEach(S=>{S.resolvedUri||(S.resolvedUri=resolveUrl(r,S.uri))}),o.preloadHints&&o.preloadHints.length&&o.preloadHints.forEach(S=>{S.resolvedUri||(S.resolvedUri=resolveUrl(r,S.uri))})},getAllSegments=function(o){const r=o.segments||[],S=o.preloadSegment;if(S&&S.parts&&S.parts.length){if(S.preloadHints){for(let E=0;E<S.preloadHints.length;E++)if(S.preloadHints[E].type==="MAP")return r}S.duration=o.targetDuration,S.preload=!0,r.push(S)}return r},isPlaylistUnchanged=(o,r)=>o===r||o.segments&&r.segments&&o.segments.length===r.segments.length&&o.endList===r.endList&&o.mediaSequence===r.mediaSequence&&o.preloadSegment===r.preloadSegment,updateMain$1=(o,r,S=isPlaylistUnchanged)=>{const E=merge(o,{}),x=E.playlists[r.id];if(!x||S(x,r))return null;r.segments=getAllSegments(r);const C=merge(x,r);if(C.preloadSegment&&!r.preloadSegment&&delete C.preloadSegment,x.segments){if(r.skip){r.segments=r.segments||[];for(let R=0;R<r.skip.skippedSegments;R++)r.segments.unshift({skipped:!0})}C.segments=updateSegments(x.segments,r.segments,r.mediaSequence-x.mediaSequence)}C.segments.forEach(R=>{resolveSegmentUris(R,C.resolvedUri)});for(let R=0;R<E.playlists.length;R++)E.playlists[R].id===r.id&&(E.playlists[R]=C);return E.playlists[r.id]=C,E.playlists[r.uri]=C,forEachMediaGroup(o,(R,Ce,Ue,je)=>{if(R.playlists)for(let Xe=0;Xe<R.playlists.length;Xe++)r.id===R.playlists[Xe].id&&(R.playlists[Xe]=C)}),E},refreshDelay=(o,r)=>{const S=o.segments||[],E=S[S.length-1],x=E&&E.parts&&E.parts[E.parts.length-1],C=x&&x.duration||E&&E.duration;return r&&C?C*1e3:(o.partTargetDuration||o.targetDuration||10)*500},playlistMetadataPayload=(o,r,S)=>{if(!o)return;const E=[];return o.forEach(x=>{if(!x.attributes)return;const{BANDWIDTH:C,RESOLUTION:R,CODECS:Ce}=x.attributes;E.push({id:x.id,bandwidth:C,resolution:R,codecs:Ce})}),{type:r,isLive:S,renditions:E}};class PlaylistLoader extends EventTarget$1{constructor(r,S,E={}){if(super(),!r)throw new Error("A non-empty playlist URL or object is required");this.logger_=logger("PlaylistLoader");const{withCredentials:x=!1}=E;this.src=r,this.vhs_=S,this.withCredentials=x,this.addDateRangesToTextTrack_=E.addDateRangesToTextTrack;const C=S.options_;this.customTagParsers=C&&C.customTagParsers||[],this.customTagMappers=C&&C.customTagMappers||[],this.llhls=C&&C.llhls,this.dateRangesStorage_=new DateRangesStorage,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const r=this.media();if(!r)return;this.dateRangesStorage_.setOffset(r.segments),this.dateRangesStorage_.setPendingDateRanges(r.dateRanges);const S=this.dateRangesStorage_.getDateRangesToProcess();!S.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(S)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const r=this.media();let S=resolveUrl(this.main.uri,r.uri);this.llhls&&(S=addLLHLSQueryDirectives(S,r)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:S,withCredentials:this.withCredentials,requestType:"hls-playlist"},(E,x)=>{if(this.request){if(E)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(r,S,E){const{uri:x,id:C}=S;this.request=null,E&&(this.state=E),this.error={playlist:this.main.playlists[C],status:r.status,message:`HLS playlist request error at URL: ${x}.`,responseText:r.responseText,code:r.status>=500?4:2,metadata:getStreamingNetworkErrorMetadata({requestType:r.requestType,request:r,error:r.error})},this.trigger("error")}parseManifest_({url:r,manifestString:S}){try{return parseManifest({onwarn:({message:E})=>this.logger_(`m3u8-parser warn for ${r}: ${E}`),oninfo:({message:E})=>this.logger_(`m3u8-parser info for ${r}: ${E}`),manifestString:S,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(E){this.error=E,this.error.metadata={errorType:videojs.Error.StreamingHlsPlaylistParserError,error:E}}}haveMetadata({playlistString:r,playlistObject:S,url:E,id:x}){this.request=null,this.state="HAVE_METADATA";const C={playlistInfo:{type:"media",uri:E}};this.trigger({type:"playlistparsestart",metadata:C});const R=S||this.parseManifest_({url:E,manifestString:r});R.lastRequest=Date.now(),setupMediaPlaylist({playlist:R,uri:E,id:x});const Ce=updateMain$1(this.main,R);this.targetDuration=R.partTargetDuration||R.targetDuration,this.pendingMedia_=null,Ce?(this.main=Ce,this.media_=this.main.playlists[x]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(refreshDelay(this.media(),!!Ce)),C.parsedPlaylist=playlistMetadataPayload(this.main.playlists,C.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:C}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),window$1$1.clearTimeout(this.mediaUpdateTimeout),window$1$1.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new DateRangesStorage,this.off()}stopRequest(){if(this.request){const r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}}media(r,S){if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof r=="string"){if(!this.main.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.main.playlists[r]}if(window$1$1.clearTimeout(this.finalRenditionTimeout),S){const Ce=(r.partTargetDuration||r.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window$1$1.setTimeout(this.media.bind(this,r,!1),Ce);return}const E=this.state,x=!this.media_||r.id!==this.media_.id,C=this.main.playlists[r.id];if(C&&C.endList||r.endList&&r.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=r,x&&(this.trigger("mediachanging"),E==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(refreshDelay(r,!0)),!x)return;if(this.state="SWITCHING_MEDIA",this.request){if(r.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=r;const R={playlistInfo:{type:"media",uri:r.uri}};this.trigger({type:"playlistrequeststart",metadata:R}),this.request=this.vhs_.xhr({uri:r.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(Ce,Ue)=>{if(this.request){if(r.lastRequest=Date.now(),r.resolvedUri=resolveManifestRedirect(r.resolvedUri,Ue),Ce)return this.playlistRequestError(this.request,r,E);this.trigger({type:"playlistrequestcomplete",metadata:R}),this.haveMetadata({playlistString:Ue.responseText,url:r.uri,id:r.id}),E==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(r){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const S=this.media();if(r){const E=S?(S.partTargetDuration||S.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},E);return}if(!this.started){this.start();return}S&&!S.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(r){this.mediaUpdateTimeout&&(window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(r)},r))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=window$1$1.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const r={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:r}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(S,E)=>{if(!this.request)return;if(this.request=null,S)return this.error={status:E.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:E.responseText,code:2,metadata:getStreamingNetworkErrorMetadata({requestType:E.requestType,request:E,error:S})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:r}),this.src=resolveManifestRedirect(this.src,E),this.trigger({type:"playlistparsestart",metadata:r});const x=this.parseManifest_({manifestString:E.responseText,url:this.src});r.parsedPlaylist=playlistMetadataPayload(x.playlists,r.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:r}),this.setupInitialPlaylist(x)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(r){if(this.state="HAVE_MAIN_MANIFEST",r.playlists){this.main=r,addPropertiesToMain(this.main,this.srcUri()),r.playlists.forEach(E=>{E.segments=getAllSegments(E),E.segments.forEach(x=>{resolveSegmentUris(x,E.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const S=this.srcUri()||window$1$1.location.href;this.main=mainForMedia(r,S),this.haveMetadata({playlistObject:r,url:S,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(r,S){const E=this.main,x=r.ID;let C=E.playlists.length;for(;C--;){const R=E.playlists[C];if(R.attributes["PATHWAY-ID"]===x){const Ce=R.resolvedUri,Ue=R.id;if(S){const je=this.createCloneURI_(R.resolvedUri,r),Xe=createPlaylistID(x,je),Ye=this.createCloneAttributes_(x,R.attributes),St=this.createClonePlaylist_(R,Xe,r,Ye);E.playlists[C]=St,E.playlists[Xe]=St,E.playlists[je]=St}else E.playlists.splice(C,1);delete E.playlists[Ue],delete E.playlists[Ce]}}this.updateOrDeleteCloneMedia(r,S)}updateOrDeleteCloneMedia(r,S){const E=this.main,x=r.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(C=>{if(!(!E.mediaGroups[C]||!E.mediaGroups[C][x])){for(const R in E.mediaGroups[C])if(R===x){for(const Ce in E.mediaGroups[C][R])E.mediaGroups[C][R][Ce].playlists.forEach((je,Xe)=>{const Ye=E.playlists[je.id],St=Ye.id,Dt=Ye.resolvedUri;delete E.playlists[St],delete E.playlists[Dt]});delete E.mediaGroups[C][R]}}}),S&&this.createClonedMediaGroups_(r)}addClonePathway(r,S={}){const E=this.main,x=E.playlists.length,C=this.createCloneURI_(S.resolvedUri,r),R=createPlaylistID(r.ID,C),Ce=this.createCloneAttributes_(r.ID,S.attributes),Ue=this.createClonePlaylist_(S,R,r,Ce);E.playlists[x]=Ue,E.playlists[R]=Ue,E.playlists[C]=Ue,this.createClonedMediaGroups_(r)}createClonedMediaGroups_(r){const S=r.ID,E=r["BASE-ID"],x=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(C=>{if(!(!x.mediaGroups[C]||x.mediaGroups[C][S]))for(const R in x.mediaGroups[C]){if(R===E)x.mediaGroups[C][S]={};else continue;for(const Ce in x.mediaGroups[C][R]){const Ue=x.mediaGroups[C][R][Ce];x.mediaGroups[C][S][Ce]=_extends$3({},Ue);const je=x.mediaGroups[C][S][Ce],Xe=this.createCloneURI_(Ue.resolvedUri,r);je.resolvedUri=Xe,je.uri=Xe,je.playlists=[],Ue.playlists.forEach((Ye,St)=>{const Dt=x.playlists[Ye.id],kt=groupID(C,S,Ce),et=createPlaylistID(S,kt);if(Dt&&!x.playlists[et]){const Ft=this.createClonePlaylist_(Dt,et,r),xt=Ft.resolvedUri;x.playlists[et]=Ft,x.playlists[xt]=Ft}je.playlists[St]=this.createClonePlaylist_(Ye,et,r)})}}})}createClonePlaylist_(r,S,E,x){const C=this.createCloneURI_(r.resolvedUri,E),R={resolvedUri:C,uri:C,id:S};return r.segments&&(R.segments=[]),x&&(R.attributes=x),merge(r,R)}createCloneURI_(r,S){const E=new URL(r);E.hostname=S["URI-REPLACEMENT"].HOST;const x=S["URI-REPLACEMENT"].PARAMS;for(const C of Object.keys(x))E.searchParams.set(C,x[C]);return E.href}createCloneAttributes_(r,S){const E={"PATHWAY-ID":r};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(x=>{S[x]&&(E[x]=r)}),E}getKeyIdSet(r){if(r.contentProtection){const S=new Set;for(const E in r.contentProtection){const x=r.contentProtection[E].attributes.keyId;x&&S.add(x.toLowerCase())}return S}}}const callbackWrapper=function(o,r,S,E){const x=o.responseType==="arraybuffer"?o.response:o.responseText;!r&&x&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=x.byteLength||x.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),S.headers&&(o.responseHeaders=S.headers),r&&r.code==="ETIMEDOUT"&&(o.timedout=!0),!r&&!o.aborted&&S.statusCode!==200&&S.statusCode!==206&&S.statusCode!==0&&(r=new Error("XHR Failed with a response of: "+(o&&(x||o.responseText)))),E(r,o)},callAllRequestHooks=(o,r)=>{if(!o||!o.size)return;let S=r;return o.forEach(E=>{S=E(S)}),S},callAllResponseHooks=(o,r,S,E)=>{!o||!o.size||o.forEach(x=>{x(r,S,E)})},xhrFactory=function(){const o=function r(S,E){S=merge({timeout:45e3},S);const x=r.beforeRequest||videojs.Vhs.xhr.beforeRequest,C=r._requestCallbackSet||videojs.Vhs.xhr._requestCallbackSet||new Set,R=r._responseCallbackSet||videojs.Vhs.xhr._responseCallbackSet;x&&typeof x=="function"&&(videojs.log.warn("beforeRequest is deprecated, use onRequest instead."),C.add(x));const Ce=videojs.Vhs.xhr.original===!0?videojs.xhr:videojs.Vhs.xhr,Ue=callAllRequestHooks(C,S);C.delete(x);const je=Ce(Ue||S,function(Ye,St){return callAllResponseHooks(R,je,Ye,St),callbackWrapper(je,Ye,St,E)}),Xe=je.abort;return je.abort=function(){return je.aborted=!0,Xe.apply(je,arguments)},je.uri=S.uri,je.requestType=S.requestType,je.requestTime=Date.now(),je};return o.original=!0,o},byterangeStr=function(o){let r;const S=o.offset;return typeof o.offset=="bigint"||typeof o.length=="bigint"?r=window$1$1.BigInt(o.offset)+window$1$1.BigInt(o.length)-window$1$1.BigInt(1):r=o.offset+o.length-1,"bytes="+S+"-"+r},segmentXhrHeaders=function(o){const r={};return o.byterange&&(r.Range=byterangeStr(o.byterange)),r},textRange=function(o,r){return o.start(r)+"-"+o.end(r)},formatHexString=function(o,r){const S=o.toString(16);return"00".substring(0,2-S.length)+S+(r%2?" ":"")},formatAsciiString=function(o){return o>=32&&o<126?String.fromCharCode(o):"."},createTransferableMessage=function(o){const r={};return Object.keys(o).forEach(S=>{const E=o[S];isArrayBufferView(E)?r[S]={bytes:E.buffer,byteOffset:E.byteOffset,byteLength:E.byteLength}:r[S]=E}),r},initSegmentId=function(o){const r=o.byterange||{length:1/0,offset:0};return[r.length,r.offset,o.resolvedUri].join(",")},segmentKeyId=function(o){return o.resolvedUri},hexDump=o=>{const r=Array.prototype.slice.call(o),S=16;let E="",x,C;for(let R=0;R<r.length/S;R++)x=r.slice(R*S,R*S+S).map(formatHexString).join(""),C=r.slice(R*S,R*S+S).map(formatAsciiString).join(""),E+=x+" "+C+`
`;return E},tagDump=({bytes:o})=>hexDump(o),textRanges=o=>{let r="",S;for(S=0;S<o.length;S++)r+=textRange(o,S)+" ";return r};var utils=Object.freeze({__proto__:null,createTransferableMessage,initSegmentId,segmentKeyId,hexDump,tagDump,textRanges});const SEGMENT_END_FUDGE_PERCENT=.25,playerTimeToProgramTime=(o,r)=>{if(!r.dateTimeObject)return null;const S=r.videoTimingInfo.transmuxerPrependedSeconds,x=r.videoTimingInfo.transmuxedPresentationStart+S,C=o-x;return new Date(r.dateTimeObject.getTime()+C*1e3)},originalSegmentVideoDuration=o=>o.transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds,findSegmentForProgramTime=(o,r)=>{let S;try{S=new Date(o)}catch{return null}if(!r||!r.segments||r.segments.length===0)return null;let E=r.segments[0];if(S<new Date(E.dateTimeObject))return null;for(let Ue=0;Ue<r.segments.length-1;Ue++){E=r.segments[Ue];const je=new Date(r.segments[Ue+1].dateTimeObject);if(S<je)break}const x=r.segments[r.segments.length-1],C=x.dateTimeObject,R=x.videoTimingInfo?originalSegmentVideoDuration(x.videoTimingInfo):x.duration+x.duration*SEGMENT_END_FUDGE_PERCENT,Ce=new Date(C.getTime()+R*1e3);return S>Ce?null:(S>new Date(C)&&(E=x),{segment:E,estimatedStart:E.videoTimingInfo?E.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(r,r.mediaSequence+r.segments.indexOf(E)),type:E.videoTimingInfo?"accurate":"estimate"})},findSegmentForPlayerTime=(o,r)=>{if(!r||!r.segments||r.segments.length===0)return null;let S=0,E;for(let C=0;C<r.segments.length&&(E=r.segments[C],S=E.videoTimingInfo?E.videoTimingInfo.transmuxedPresentationEnd:S+E.duration,!(o<=S));C++);const x=r.segments[r.segments.length-1];if(x.videoTimingInfo&&x.videoTimingInfo.transmuxedPresentationEnd<o)return null;if(o>S){if(o>S+x.duration*SEGMENT_END_FUDGE_PERCENT)return null;E=x}return{segment:E,estimatedStart:E.videoTimingInfo?E.videoTimingInfo.transmuxedPresentationStart:S-E.duration,type:E.videoTimingInfo?"accurate":"estimate"}},getOffsetFromTimestamp=(o,r)=>{let S,E;try{S=new Date(o),E=new Date(r)}catch{}const x=S.getTime();return(E.getTime()-x)/1e3},verifyProgramDateTimeTags=o=>{if(!o.segments||o.segments.length===0)return!1;for(let r=0;r<o.segments.length;r++)if(!o.segments[r].dateTimeObject)return!1;return!0},getProgramTime=({playlist:o,time:r=void 0,callback:S})=>{if(!S)throw new Error("getProgramTime: callback must be provided");if(!o||r===void 0)return S({message:"getProgramTime: playlist and time must be provided"});const E=findSegmentForPlayerTime(r,o);if(!E)return S({message:"valid programTime was not found"});if(E.type==="estimate")return S({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:E.estimatedStart});const x={mediaSeconds:r},C=playerTimeToProgramTime(r,E.segment);return C&&(x.programDateTime=C.toISOString()),S(null,x)},seekToProgramTime=({programTime:o,playlist:r,retryCount:S=2,seekTo:E,pauseAfterSeek:x=!0,tech:C,callback:R})=>{if(!R)throw new Error("seekToProgramTime: callback must be provided");if(typeof o>"u"||!r||!E)return R({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!C.hasStarted_)return R({message:"player must be playing a live stream to start buffering"});if(!verifyProgramDateTimeTags(r))return R({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});const Ce=findSegmentForProgramTime(o,r);if(!Ce)return R({message:`${o} was not found in the stream`});const Ue=Ce.segment,je=getOffsetFromTimestamp(Ue.dateTimeObject,o);if(Ce.type==="estimate"){if(S===0)return R({message:`${o} is not buffered yet. Try again`});E(Ce.estimatedStart+je),C.one("seeked",()=>{seekToProgramTime({programTime:o,playlist:r,retryCount:S-1,seekTo:E,pauseAfterSeek:x,tech:C,callback:R})});return}const Xe=Ue.start+je,Ye=()=>R(null,C.currentTime());C.one("seeked",Ye),x&&C.pause(),E(Xe)},callbackOnCompleted=(o,r)=>{if(o.readyState===4)return r()},containerRequest=(o,r,S,E)=>{let x=[],C,R=!1;const Ce=function(Ye,St,Dt,kt){return St.abort(),R=!0,S(Ye,St,Dt,kt)},Ue=function(Ye,St){if(R)return;if(Ye)return Ye.metadata=getStreamingNetworkErrorMetadata({requestType:E,request:St,error:Ye}),Ce(Ye,St,"",x);const Dt=St.responseText.substring(x&&x.byteLength||0,St.responseText.length);if(x=concatTypedArrays(x,stringToBytes(Dt,!0)),C=C||getId3Offset(x),x.length<10||C&&x.length<C+2)return callbackOnCompleted(St,()=>Ce(Ye,St,"",x));const kt=detectContainerForBytes(x);return kt==="ts"&&x.length<188?callbackOnCompleted(St,()=>Ce(Ye,St,"",x)):!kt&&x.length<376?callbackOnCompleted(St,()=>Ce(Ye,St,"",x)):Ce(null,St,kt,x)},Xe=r({uri:o,beforeSend(Ye){Ye.overrideMimeType("text/plain; charset=x-user-defined"),Ye.addEventListener("progress",function({total:St,loaded:Dt}){return callbackWrapper(Ye,null,{statusCode:Ye.status},Ue)})}},function(Ye,St){return callbackWrapper(Xe,Ye,St,Ue)});return Xe},{EventTarget}=videojs,dashPlaylistUnchanged=function(o,r){if(!isPlaylistUnchanged(o,r)||o.sidx&&r.sidx&&(o.sidx.offset!==r.sidx.offset||o.sidx.length!==r.sidx.length))return!1;if(!o.sidx&&r.sidx||o.sidx&&!r.sidx||o.segments&&!r.segments||!o.segments&&r.segments)return!1;if(!o.segments&&!r.segments)return!0;for(let S=0;S<o.segments.length;S++){const E=o.segments[S],x=r.segments[S];if(E.uri!==x.uri)return!1;if(!E.byterange&&!x.byterange)continue;const C=E.byterange,R=x.byterange;if(C&&!R||!C&&R||C.offset!==R.offset||C.length!==R.length)return!1}return!0},dashGroupId=(o,r,S,E)=>{const x=E.attributes.NAME||S;return`placeholder-uri-${o}-${r}-${x}`},parseMainXml=({mainXml:o,srcUrl:r,clientOffset:S,sidxMapping:E,previousManifest:x})=>{const C=parse(o,{manifestUri:r,clientOffset:S,sidxMapping:E,previousManifest:x});return addPropertiesToMain(C,r,dashGroupId),C},removeOldMediaGroupLabels=(o,r)=>{forEachMediaGroup(o,(S,E,x,C)=>{(!r.mediaGroups[E][x]||!(C in r.mediaGroups[E][x]))&&delete o.mediaGroups[E][x][C]})},updateMain=(o,r,S)=>{let E=!0,x=merge(o,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod,timelineStarts:r.timelineStarts});for(let C=0;C<r.playlists.length;C++){const R=r.playlists[C];if(R.sidx){const Ue=generateSidxKey(R.sidx);S&&S[Ue]&&S[Ue].sidx&&addSidxSegmentsToPlaylist$1(R,S[Ue].sidx,R.sidx.resolvedUri)}const Ce=updateMain$1(x,R,dashPlaylistUnchanged);Ce&&(x=Ce,E=!1)}return forEachMediaGroup(r,(C,R,Ce,Ue)=>{if(C.playlists&&C.playlists.length){const je=C.playlists[0].id,Xe=updateMain$1(x,C.playlists[0],dashPlaylistUnchanged);Xe&&(x=Xe,Ue in x.mediaGroups[R][Ce]||(x.mediaGroups[R][Ce][Ue]=C),x.mediaGroups[R][Ce][Ue].playlists[0]=x.playlists[je],E=!1)}}),removeOldMediaGroupLabels(x,r),r.minimumUpdatePeriod!==o.minimumUpdatePeriod&&(E=!1),E?null:x},equivalentSidx=(o,r)=>(!o.map&&!r.map||!!(o.map&&r.map&&o.map.byterange.offset===r.map.byterange.offset&&o.map.byterange.length===r.map.byterange.length))&&o.uri===r.uri&&o.byterange.offset===r.byterange.offset&&o.byterange.length===r.byterange.length,compareSidxEntry=(o,r)=>{const S={};for(const E in o){const C=o[E].sidx;if(C){const R=generateSidxKey(C);if(!r[R])break;const Ce=r[R].sidxInfo;equivalentSidx(Ce,C)&&(S[R]=r[R])}}return S},filterChangedSidxMappings=(o,r)=>{let E=compareSidxEntry(o.playlists,r);return forEachMediaGroup(o,(x,C,R,Ce)=>{if(x.playlists&&x.playlists.length){const Ue=x.playlists;E=merge(E,compareSidxEntry(Ue,r))}}),E};class DashPlaylistLoader extends EventTarget{constructor(r,S,E={},x){super(),this.mainPlaylistLoader_=x||this,x||(this.isMain_=!0);const{withCredentials:C=!1}=E;if(this.vhs_=S,this.withCredentials=C,this.addMetadataToTextTrack=E.addMetadataToTextTrack,!r)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=logger("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=r,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=r}requestErrored_(r,S,E){if(!this.request)return!0;if(this.request=null,r)return this.error=typeof r=="object"&&!(r instanceof Error)?r:{status:S.status,message:"DASH request error at URL: "+S.uri,response:S.response,code:2,metadata:r.metadata},E&&(this.state=E),this.trigger("error"),!0}addSidxSegments_(r,S,E){const x=r.sidx&&generateSidxKey(r.sidx);if(!r.sidx||!x||this.mainPlaylistLoader_.sidxMapping_[x]){this.mediaRequest_=window$1$1.setTimeout(()=>E(!1),0);return}const C=resolveManifestRedirect(r.sidx.resolvedUri),R=(Ue,je)=>{if(this.requestErrored_(Ue,je,S))return;const Xe=this.mainPlaylistLoader_.sidxMapping_,{requestType:Ye}=je;let St;try{St=parseSidx$1(toUint8(je.response).subarray(8))}catch(Dt){Dt.metadata=getStreamingNetworkErrorMetadata({requestType:Ye,request:je,parseFailure:!0}),this.requestErrored_(Dt,je,S);return}return Xe[x]={sidxInfo:r.sidx,sidx:St},addSidxSegmentsToPlaylist$1(r,St,r.sidx.resolvedUri),E(!0)},Ce="dash-sidx";this.request=containerRequest(C,this.vhs_.xhr,(Ue,je,Xe,Ye)=>{if(Ue)return R(Ue,je);if(!Xe||Xe!=="mp4"){const kt=Xe||"unknown";return R({status:je.status,message:`Unsupported ${kt} container type for sidx segment at URL: ${C}`,response:"",playlist:r,internal:!0,playlistExclusionDuration:1/0,code:2},je)}const{offset:St,length:Dt}=r.sidx.byterange;if(Ye.length>=Dt+St)return R(Ue,{response:Ye.subarray(St,St+Dt),status:je.status,uri:je.uri});this.request=this.vhs_.xhr({uri:C,responseType:"arraybuffer",requestType:"dash-sidx",headers:segmentXhrHeaders({byterange:r.sidx.byterange})},R)},Ce)}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window$1$1.clearTimeout(this.minimumUpdatePeriodTimeout_),window$1$1.clearTimeout(this.mediaRequest_),window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}}media(r){if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const S=this.state;if(typeof r=="string"){if(!this.mainPlaylistLoader_.main.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.mainPlaylistLoader_.main.playlists[r]}const E=!this.media_||r.id!==this.media_.id;if(E&&this.loadedPlaylists_[r.id]&&this.loadedPlaylists_[r.id].endList){this.state="HAVE_METADATA",this.media_=r,E&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}E&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(r,S,x=>{this.haveMetadata({startingState:S,playlist:r})}))}haveMetadata({startingState:r,playlist:S}){this.state="HAVE_METADATA",this.loadedPlaylists_[S.id]=S,this.mediaRequest_=null,this.refreshMedia_(S.id),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(window$1$1.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(r){window$1$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const S=this.media();if(r){const E=S?S.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=window$1$1.setTimeout(()=>this.load(),E);return}if(!this.started){this.start();return}S&&!S.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=window$1$1.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((r,S)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(r){const S={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:S}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(E,x)=>{if(E){const{requestType:R}=x;E.metadata=getStreamingNetworkErrorMetadata({requestType:R,request:x,error:E})}if(this.requestErrored_(E,x)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:S});const C=x.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=x.responseText,x.responseHeaders&&x.responseHeaders.date?this.mainLoaded_=Date.parse(x.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=resolveManifestRedirect(this.mainPlaylistLoader_.srcUrl,x),C){this.handleMain_(),this.syncClientServerClock_(()=>r(x,C));return}return r(x,C)})}syncClientServerClock_(r){const S=parseUTCTiming(this.mainPlaylistLoader_.mainXml_);if(S===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),r();if(S.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=S.value-Date.now(),r();this.request=this.vhs_.xhr({uri:resolveUrl(this.mainPlaylistLoader_.srcUrl,S.value),method:S.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(E,x)=>{if(!this.request)return;if(E){const{requestType:R}=x;return this.error.metadata=getStreamingNetworkErrorMetadata({requestType:R,request:x,error:E}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),r()}let C;S.method==="HEAD"?!x.responseHeaders||!x.responseHeaders.date?C=this.mainLoaded_:C=Date.parse(x.responseHeaders.date):C=Date.parse(x.responseText),this.mainPlaylistLoader_.clientOffset_=C-Date.now(),r()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const r=this.mainPlaylistLoader_.main,S={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:S});let E;try{E=parseMainXml({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:r})}catch(C){this.error=C,this.error.metadata={errorType:videojs.Error.StreamingDashManifestParserError,error:C},this.trigger("error")}r&&(E=updateMain(r,E,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=E||r;const x=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(x&&x!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=x),(!r||E&&E.minimumUpdatePeriod!==r.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(E),E){const{duration:C,endList:R}=E,Ce=[];E.playlists.forEach(je=>{Ce.push({id:je.id,bandwidth:je.attributes.BANDWIDTH,resolution:je.attributes.RESOLUTION,codecs:je.attributes.CODECS})});const Ue={duration:C,isLive:!R,renditions:Ce};S.parsedManifest=Ue,this.trigger({type:"manifestparsecomplete",metadata:S})}return!!E}updateMinimumUpdatePeriodTimeout_(){const r=this.mainPlaylistLoader_;r.createMupOnMedia_&&(r.off("loadedmetadata",r.createMupOnMedia_),r.createMupOnMedia_=null),r.minimumUpdatePeriodTimeout_&&(window$1$1.clearTimeout(r.minimumUpdatePeriodTimeout_),r.minimumUpdatePeriodTimeout_=null);let S=r.main&&r.main.minimumUpdatePeriod;if(S===0&&(r.media()?S=r.media().targetDuration*1e3:(r.createMupOnMedia_=r.updateMinimumUpdatePeriodTimeout_,r.one("loadedmetadata",r.createMupOnMedia_))),typeof S!="number"||S<=0){S<0&&this.logger_(`found invalid minimumUpdatePeriod of ${S}, not setting a timeout`);return}this.createMUPTimeout_(S)}createMUPTimeout_(r){const S=this.mainPlaylistLoader_;S.minimumUpdatePeriodTimeout_=window$1$1.setTimeout(()=>{S.minimumUpdatePeriodTimeout_=null,S.trigger("minimumUpdatePeriod"),S.createMUPTimeout_(r)},r)}refreshXml_(){this.requestMain_((r,S)=>{S&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=filterChangedSidxMappings(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,E=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(r){if(!r)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const S=this.mainPlaylistLoader_.main.playlists,E=!this.media_||this.media_!==S[r];if(E?this.media_=S[r]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const x=()=>{this.media().endList||(this.mediaUpdateTimeout=window$1$1.setTimeout(()=>{this.trigger("mediaupdatetimeout"),x()},refreshDelay(this.media(),!!E)))};x()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(r){if(r&&this.mainPlaylistLoader_.main.eventStream){const S=this.mainPlaylistLoader_.main.eventStream.map(E=>({cueTime:E.start,frames:[{data:E.messageData}]}));this.addMetadataToTextTrack("EventStream",S,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(r){if(r.contentProtection){const S=new Set;for(const E in r.contentProtection){const x=r.contentProtection[E].attributes["cenc:default_KID"];x&&S.add(x.replace(/-/g,"").toLowerCase())}return S}}}var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const stringToArrayBuffer=o=>{const r=new Uint8Array(new ArrayBuffer(o.length));for(let S=0;S<o.length;S++)r[S]=o.charCodeAt(S);return r.buffer},browserWorkerPolyFill=function(o){return o.on=o.addEventListener,o.off=o.removeEventListener,o},createObjectURL=function(o){try{return URL.createObjectURL(new Blob([o],{type:"application/javascript"}))}catch{const S=new BlobBuilder;return S.append(o),URL.createObjectURL(S.getBlob())}},factory=function(o){return function(){const r=createObjectURL(o),S=browserWorkerPolyFill(new Worker(r));S.objURL=r;const E=S.terminate;return S.on=S.addEventListener,S.off=S.removeEventListener,S.terminate=function(){return URL.revokeObjectURL(r),E.call(this)},S}},transform=function(o){return`var browserWorkerPolyFill = ${browserWorkerPolyFill.toString()};
browserWorkerPolyFill(self);
`+o},getWorkerString=function(o){return o.toString().replace(/^function.+?{/,"").slice(0,-1)},workerCode$1=transform(getWorkerString(function(){var o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=function(){this.init=function(){var ht={};this.on=function(Nt,Gt){ht[Nt]||(ht[Nt]=[]),ht[Nt]=ht[Nt].concat(Gt)},this.off=function(Nt,Gt){var $t;return ht[Nt]?($t=ht[Nt].indexOf(Gt),ht[Nt]=ht[Nt].slice(),ht[Nt].splice($t,1),$t>-1):!1},this.trigger=function(Nt){var Gt,$t,Yt,Zt;if(Gt=ht[Nt],!!Gt)if(arguments.length===2)for(Yt=Gt.length,$t=0;$t<Yt;++$t)Gt[$t].call(this,arguments[1]);else{for(Zt=[],$t=arguments.length,$t=1;$t<arguments.length;++$t)Zt.push(arguments[$t]);for(Yt=Gt.length,$t=0;$t<Yt;++$t)Gt[$t].apply(this,Zt)}},this.dispose=function(){ht={}}}};r.prototype.pipe=function(ht){return this.on("data",function(Nt){ht.push(Nt)}),this.on("done",function(Nt){ht.flush(Nt)}),this.on("partialdone",function(Nt){ht.partialFlush(Nt)}),this.on("endedtimeline",function(Nt){ht.endTimeline(Nt)}),this.on("reset",function(Nt){ht.reset(Nt)}),ht},r.prototype.push=function(ht){this.trigger("data",ht)},r.prototype.flush=function(ht){this.trigger("done",ht)},r.prototype.partialFlush=function(ht){this.trigger("partialdone",ht)},r.prototype.endTimeline=function(ht){this.trigger("endedtimeline",ht)},r.prototype.reset=function(ht){this.trigger("reset",ht)};var S=r,E=Math.pow(2,32),x=function(ht){var Nt=new DataView(ht.buffer,ht.byteOffset,ht.byteLength),Gt;return Nt.getBigUint64?(Gt=Nt.getBigUint64(0),Gt<Number.MAX_SAFE_INTEGER?Number(Gt):Gt):Nt.getUint32(0)*E+Nt.getUint32(4)},C={getUint64:x,MAX_UINT32:E},R=C.MAX_UINT32,Ce,Ue,je,Xe,Ye,St,Dt,kt,et,Ft,xt,Mt,Ot,Ut,Xt,ei,si,li,bi,wi,Pi,Ci,Di,Bi,Ri,oi,mi,ri,ni,Ei,Si,qi,sr,ur,fr,lr;(function(){var ht;if(Di={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(ht in Di)Di.hasOwnProperty(ht)&&(Di[ht]=[ht.charCodeAt(0),ht.charCodeAt(1),ht.charCodeAt(2),ht.charCodeAt(3)]);Bi=new Uint8Array([105,115,111,109]),oi=new Uint8Array([97,118,99,49]),Ri=new Uint8Array([0,0,0,1]),mi=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ri=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ni={video:mi,audio:ri},qi=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Si=new Uint8Array([0,0,0,0,0,0,0,0]),sr=new Uint8Array([0,0,0,0,0,0,0,0]),ur=sr,fr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),lr=sr,Ei=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),Ce=function(ht){var Nt=[],Gt=0,$t,Yt,Zt;for($t=1;$t<arguments.length;$t++)Nt.push(arguments[$t]);for($t=Nt.length;$t--;)Gt+=Nt[$t].byteLength;for(Yt=new Uint8Array(Gt+8),Zt=new DataView(Yt.buffer,Yt.byteOffset,Yt.byteLength),Zt.setUint32(0,Yt.byteLength),Yt.set(ht,4),$t=0,Gt=8;$t<Nt.length;$t++)Yt.set(Nt[$t],Gt),Gt+=Nt[$t].byteLength;return Yt},Ue=function(){return Ce(Di.dinf,Ce(Di.dref,qi))},je=function(ht){return Ce(Di.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,ht.audioobjecttype<<3|ht.samplingfrequencyindex>>>1,ht.samplingfrequencyindex<<7|ht.channelcount<<3,6,1,2]))},Xe=function(){return Ce(Di.ftyp,Bi,Ri,Bi,oi)},ei=function(ht){return Ce(Di.hdlr,ni[ht])},Ye=function(ht){return Ce(Di.mdat,ht)},Xt=function(ht){var Nt=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,ht.duration>>>24&255,ht.duration>>>16&255,ht.duration>>>8&255,ht.duration&255,85,196,0,0]);return ht.samplerate&&(Nt[12]=ht.samplerate>>>24&255,Nt[13]=ht.samplerate>>>16&255,Nt[14]=ht.samplerate>>>8&255,Nt[15]=ht.samplerate&255),Ce(Di.mdhd,Nt)},Ut=function(ht){return Ce(Di.mdia,Xt(ht),ei(ht.type),Dt(ht))},St=function(ht){return Ce(Di.mfhd,new Uint8Array([0,0,0,0,(ht&4278190080)>>24,(ht&16711680)>>16,(ht&65280)>>8,ht&255]))},Dt=function(ht){return Ce(Di.minf,ht.type==="video"?Ce(Di.vmhd,Ei):Ce(Di.smhd,Si),Ue(),li(ht))},kt=function(ht,Nt){for(var Gt=[],$t=Nt.length;$t--;)Gt[$t]=wi(Nt[$t]);return Ce.apply(null,[Di.moof,St(ht)].concat(Gt))},et=function(ht){for(var Nt=ht.length,Gt=[];Nt--;)Gt[Nt]=Mt(ht[Nt]);return Ce.apply(null,[Di.moov,xt(4294967295)].concat(Gt).concat(Ft(ht)))},Ft=function(ht){for(var Nt=ht.length,Gt=[];Nt--;)Gt[Nt]=Pi(ht[Nt]);return Ce.apply(null,[Di.mvex].concat(Gt))},xt=function(ht){var Nt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(ht&4278190080)>>24,(ht&16711680)>>16,(ht&65280)>>8,ht&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ce(Di.mvhd,Nt)},si=function(ht){var Nt=ht.samples||[],Gt=new Uint8Array(4+Nt.length),$t,Yt;for(Yt=0;Yt<Nt.length;Yt++)$t=Nt[Yt].flags,Gt[Yt+4]=$t.dependsOn<<4|$t.isDependedOn<<2|$t.hasRedundancy;return Ce(Di.sdtp,Gt)},li=function(ht){return Ce(Di.stbl,bi(ht),Ce(Di.stts,lr),Ce(Di.stsc,ur),Ce(Di.stsz,fr),Ce(Di.stco,sr))},function(){var ht,Nt;bi=function(Gt){return Ce(Di.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),Gt.type==="video"?ht(Gt):Nt(Gt))},ht=function(Gt){var $t=Gt.sps||[],Yt=Gt.pps||[],Zt=[],hi=[],gi,yi;for(gi=0;gi<$t.length;gi++)Zt.push(($t[gi].byteLength&65280)>>>8),Zt.push($t[gi].byteLength&255),Zt=Zt.concat(Array.prototype.slice.call($t[gi]));for(gi=0;gi<Yt.length;gi++)hi.push((Yt[gi].byteLength&65280)>>>8),hi.push(Yt[gi].byteLength&255),hi=hi.concat(Array.prototype.slice.call(Yt[gi]));if(yi=[Di.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(Gt.width&65280)>>8,Gt.width&255,(Gt.height&65280)>>8,Gt.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Ce(Di.avcC,new Uint8Array([1,Gt.profileIdc,Gt.profileCompatibility,Gt.levelIdc,255].concat([$t.length],Zt,[Yt.length],hi))),Ce(Di.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],Gt.sarRatio){var _i=Gt.sarRatio[0],xi=Gt.sarRatio[1];yi.push(Ce(Di.pasp,new Uint8Array([(_i&4278190080)>>24,(_i&16711680)>>16,(_i&65280)>>8,_i&255,(xi&4278190080)>>24,(xi&16711680)>>16,(xi&65280)>>8,xi&255])))}return Ce.apply(null,yi)},Nt=function(Gt){return Ce(Di.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(Gt.channelcount&65280)>>8,Gt.channelcount&255,(Gt.samplesize&65280)>>8,Gt.samplesize&255,0,0,0,0,(Gt.samplerate&65280)>>8,Gt.samplerate&255,0,0]),je(Gt))}}(),Ot=function(ht){var Nt=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(ht.id&4278190080)>>24,(ht.id&16711680)>>16,(ht.id&65280)>>8,ht.id&255,0,0,0,0,(ht.duration&4278190080)>>24,(ht.duration&16711680)>>16,(ht.duration&65280)>>8,ht.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(ht.width&65280)>>8,ht.width&255,0,0,(ht.height&65280)>>8,ht.height&255,0,0]);return Ce(Di.tkhd,Nt)},wi=function(ht){var Nt,Gt,$t,Yt,Zt,hi,gi;return Nt=Ce(Di.tfhd,new Uint8Array([0,0,0,58,(ht.id&4278190080)>>24,(ht.id&16711680)>>16,(ht.id&65280)>>8,ht.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),hi=Math.floor(ht.baseMediaDecodeTime/R),gi=Math.floor(ht.baseMediaDecodeTime%R),Gt=Ce(Di.tfdt,new Uint8Array([1,0,0,0,hi>>>24&255,hi>>>16&255,hi>>>8&255,hi&255,gi>>>24&255,gi>>>16&255,gi>>>8&255,gi&255])),Zt=92,ht.type==="audio"?($t=Ci(ht,Zt),Ce(Di.traf,Nt,Gt,$t)):(Yt=si(ht),$t=Ci(ht,Yt.length+Zt),Ce(Di.traf,Nt,Gt,$t,Yt))},Mt=function(ht){return ht.duration=ht.duration||4294967295,Ce(Di.trak,Ot(ht),Ut(ht))},Pi=function(ht){var Nt=new Uint8Array([0,0,0,0,(ht.id&4278190080)>>24,(ht.id&16711680)>>16,(ht.id&65280)>>8,ht.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return ht.type!=="video"&&(Nt[Nt.length-1]=0),Ce(Di.trex,Nt)},function(){var ht,Nt,Gt;Gt=function($t,Yt){var Zt=0,hi=0,gi=0,yi=0;return $t.length&&($t[0].duration!==void 0&&(Zt=1),$t[0].size!==void 0&&(hi=2),$t[0].flags!==void 0&&(gi=4),$t[0].compositionTimeOffset!==void 0&&(yi=8)),[0,0,Zt|hi|gi|yi,1,($t.length&4278190080)>>>24,($t.length&16711680)>>>16,($t.length&65280)>>>8,$t.length&255,(Yt&4278190080)>>>24,(Yt&16711680)>>>16,(Yt&65280)>>>8,Yt&255]},Nt=function($t,Yt){var Zt,hi,gi,yi,_i,xi;for(yi=$t.samples||[],Yt+=20+16*yi.length,gi=Gt(yi,Yt),hi=new Uint8Array(gi.length+yi.length*16),hi.set(gi),Zt=gi.length,xi=0;xi<yi.length;xi++)_i=yi[xi],hi[Zt++]=(_i.duration&4278190080)>>>24,hi[Zt++]=(_i.duration&16711680)>>>16,hi[Zt++]=(_i.duration&65280)>>>8,hi[Zt++]=_i.duration&255,hi[Zt++]=(_i.size&4278190080)>>>24,hi[Zt++]=(_i.size&16711680)>>>16,hi[Zt++]=(_i.size&65280)>>>8,hi[Zt++]=_i.size&255,hi[Zt++]=_i.flags.isLeading<<2|_i.flags.dependsOn,hi[Zt++]=_i.flags.isDependedOn<<6|_i.flags.hasRedundancy<<4|_i.flags.paddingValue<<1|_i.flags.isNonSyncSample,hi[Zt++]=_i.flags.degradationPriority&61440,hi[Zt++]=_i.flags.degradationPriority&15,hi[Zt++]=(_i.compositionTimeOffset&4278190080)>>>24,hi[Zt++]=(_i.compositionTimeOffset&16711680)>>>16,hi[Zt++]=(_i.compositionTimeOffset&65280)>>>8,hi[Zt++]=_i.compositionTimeOffset&255;return Ce(Di.trun,hi)},ht=function($t,Yt){var Zt,hi,gi,yi,_i,xi;for(yi=$t.samples||[],Yt+=20+8*yi.length,gi=Gt(yi,Yt),Zt=new Uint8Array(gi.length+yi.length*8),Zt.set(gi),hi=gi.length,xi=0;xi<yi.length;xi++)_i=yi[xi],Zt[hi++]=(_i.duration&4278190080)>>>24,Zt[hi++]=(_i.duration&16711680)>>>16,Zt[hi++]=(_i.duration&65280)>>>8,Zt[hi++]=_i.duration&255,Zt[hi++]=(_i.size&4278190080)>>>24,Zt[hi++]=(_i.size&16711680)>>>16,Zt[hi++]=(_i.size&65280)>>>8,Zt[hi++]=_i.size&255;return Ce(Di.trun,Zt)},Ci=function($t,Yt){return $t.type==="audio"?ht($t,Yt):Nt($t,Yt)}}();var Mi={ftyp:Xe,mdat:Ye,moof:kt,moov:et,initSegment:function(ht){var Nt=Xe(),Gt=et(ht),$t;return $t=new Uint8Array(Nt.byteLength+Gt.byteLength),$t.set(Nt),$t.set(Gt,Nt.byteLength),$t}},Yi=function(ht){var Nt,Gt,$t=[],Yt=[];for(Yt.byteLength=0,Yt.nalCount=0,Yt.duration=0,$t.byteLength=0,Nt=0;Nt<ht.length;Nt++)Gt=ht[Nt],Gt.nalUnitType==="access_unit_delimiter_rbsp"?($t.length&&($t.duration=Gt.dts-$t.dts,Yt.byteLength+=$t.byteLength,Yt.nalCount+=$t.length,Yt.duration+=$t.duration,Yt.push($t)),$t=[Gt],$t.byteLength=Gt.data.byteLength,$t.pts=Gt.pts,$t.dts=Gt.dts):(Gt.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&($t.keyFrame=!0),$t.duration=Gt.dts-$t.dts,$t.byteLength+=Gt.data.byteLength,$t.push(Gt));return Yt.length&&(!$t.duration||$t.duration<=0)&&($t.duration=Yt[Yt.length-1].duration),Yt.byteLength+=$t.byteLength,Yt.nalCount+=$t.length,Yt.duration+=$t.duration,Yt.push($t),Yt},Wi=function(ht){var Nt,Gt,$t=[],Yt=[];for($t.byteLength=0,$t.nalCount=0,$t.duration=0,$t.pts=ht[0].pts,$t.dts=ht[0].dts,Yt.byteLength=0,Yt.nalCount=0,Yt.duration=0,Yt.pts=ht[0].pts,Yt.dts=ht[0].dts,Nt=0;Nt<ht.length;Nt++)Gt=ht[Nt],Gt.keyFrame?($t.length&&(Yt.push($t),Yt.byteLength+=$t.byteLength,Yt.nalCount+=$t.nalCount,Yt.duration+=$t.duration),$t=[Gt],$t.nalCount=Gt.length,$t.byteLength=Gt.byteLength,$t.pts=Gt.pts,$t.dts=Gt.dts,$t.duration=Gt.duration):($t.duration+=Gt.duration,$t.nalCount+=Gt.length,$t.byteLength+=Gt.byteLength,$t.push(Gt));return Yt.length&&$t.duration<=0&&($t.duration=Yt[Yt.length-1].duration),Yt.byteLength+=$t.byteLength,Yt.nalCount+=$t.nalCount,Yt.duration+=$t.duration,Yt.push($t),Yt},ir=function(ht){var Nt;return!ht[0][0].keyFrame&&ht.length>1&&(Nt=ht.shift(),ht.byteLength-=Nt.byteLength,ht.nalCount-=Nt.nalCount,ht[0][0].dts=Nt.dts,ht[0][0].pts=Nt.pts,ht[0][0].duration+=Nt.duration),ht},mr=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},yr=function(ht,Nt){var Gt=mr();return Gt.dataOffset=Nt,Gt.compositionTimeOffset=ht.pts-ht.dts,Gt.duration=ht.duration,Gt.size=4*ht.length,Gt.size+=ht.byteLength,ht.keyFrame&&(Gt.flags.dependsOn=2,Gt.flags.isNonSyncSample=0),Gt},pi=function(ht,Nt){var Gt,$t,Yt,Zt,hi,gi=Nt||0,yi=[];for(Gt=0;Gt<ht.length;Gt++)for(Zt=ht[Gt],$t=0;$t<Zt.length;$t++)hi=Zt[$t],Yt=yr(hi,gi),gi+=Yt.size,yi.push(Yt);return yi},fi=function(ht){var Nt,Gt,$t,Yt,Zt,hi,gi=0,yi=ht.byteLength,_i=ht.nalCount,xi=yi+4*_i,Oi=new Uint8Array(xi),rr=new DataView(Oi.buffer);for(Nt=0;Nt<ht.length;Nt++)for(Yt=ht[Nt],Gt=0;Gt<Yt.length;Gt++)for(Zt=Yt[Gt],$t=0;$t<Zt.length;$t++)hi=Zt[$t],rr.setUint32(gi,hi.data.byteLength),gi+=4,Oi.set(hi.data,gi),gi+=hi.data.byteLength;return Oi},Ai=function(ht,Nt){var Gt,$t=Nt||0,Yt=[];return Gt=yr(ht,$t),Yt.push(Gt),Yt},Vi=function(ht){var Nt,Gt,$t=0,Yt=ht.byteLength,Zt=ht.length,hi=Yt+4*Zt,gi=new Uint8Array(hi),yi=new DataView(gi.buffer);for(Nt=0;Nt<ht.length;Nt++)Gt=ht[Nt],yi.setUint32($t,Gt.data.byteLength),$t+=4,gi.set(Gt.data,$t),$t+=Gt.data.byteLength;return gi},Li={groupNalsIntoFrames:Yi,groupFramesIntoGops:Wi,extendFirstKeyFrame:ir,generateSampleTable:pi,concatenateNalData:fi,generateSampleTableForFrame:Ai,concatenateNalDataForFrame:Vi},Ni=[33,16,5,32,164,27],Qi=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Fi=function(ht){for(var Nt=[];ht--;)Nt.push(0);return Nt},Gi=function(ht){return Object.keys(ht).reduce(function(Nt,Gt){return Nt[Gt]=new Uint8Array(ht[Gt].reduce(function($t,Yt){return $t.concat(Yt)},[])),Nt},{})},ji,ar=function(){if(!ji){var ht={96e3:[Ni,[227,64],Fi(154),[56]],88200:[Ni,[231],Fi(170),[56]],64e3:[Ni,[248,192],Fi(240),[56]],48e3:[Ni,[255,192],Fi(268),[55,148,128],Fi(54),[112]],44100:[Ni,[255,192],Fi(268),[55,163,128],Fi(84),[112]],32e3:[Ni,[255,192],Fi(268),[55,234],Fi(226),[112]],24e3:[Ni,[255,192],Fi(268),[55,255,128],Fi(268),[111,112],Fi(126),[224]],16e3:[Ni,[255,192],Fi(268),[55,255,128],Fi(268),[111,255],Fi(269),[223,108],Fi(195),[1,192]],12e3:[Qi,Fi(268),[3,127,248],Fi(268),[6,255,240],Fi(268),[13,255,224],Fi(268),[27,253,128],Fi(259),[56]],11025:[Qi,Fi(268),[3,127,248],Fi(268),[6,255,240],Fi(268),[13,255,224],Fi(268),[27,255,192],Fi(268),[55,175,128],Fi(108),[112]],8e3:[Qi,Fi(268),[3,121,16],Fi(47),[7]]};ji=Gi(ht)}return ji},Ji=9e4,Xi,or,vr,Er,xr,Mr,Nr;Xi=function(ht){return ht*Ji},or=function(ht,Nt){return ht*Nt},vr=function(ht){return ht/Ji},Er=function(ht,Nt){return ht/Nt},xr=function(ht,Nt){return Xi(Er(ht,Nt))},Mr=function(ht,Nt){return or(vr(ht),Nt)},Nr=function(ht,Nt,Gt){return vr(Gt?ht:ht-Nt)};var Sr={ONE_SECOND_IN_TS:Ji,secondsToVideoTs:Xi,secondsToAudioTs:or,videoTsToSeconds:vr,audioTsToSeconds:Er,audioTsToVideoTs:xr,videoTsToAudioTs:Mr,metadataTsToSeconds:Nr},$r=ar,Gr=Sr,qn=function(ht){var Nt,Gt,$t=0;for(Nt=0;Nt<ht.length;Nt++)Gt=ht[Nt],$t+=Gt.data.byteLength;return $t},jr=function(ht,Nt,Gt,$t){var Yt,Zt=0,hi=0,gi=0,yi=0,_i,xi,Oi;if(Nt.length&&(Yt=Gr.audioTsToVideoTs(ht.baseMediaDecodeTime,ht.samplerate),Zt=Math.ceil(Gr.ONE_SECOND_IN_TS/(ht.samplerate/1024)),Gt&&$t&&(hi=Yt-Math.max(Gt,$t),gi=Math.floor(hi/Zt),yi=gi*Zt),!(gi<1||yi>Gr.ONE_SECOND_IN_TS/2))){for(_i=$r()[ht.samplerate],_i||(_i=Nt[0].data),xi=0;xi<gi;xi++)Oi=Nt[0],Nt.splice(0,0,{data:_i,dts:Oi.dts-Zt,pts:Oi.pts-Zt});return ht.baseMediaDecodeTime-=Math.floor(Gr.videoTsToAudioTs(yi,ht.samplerate)),yi}},Xr=function(ht,Nt,Gt){return Nt.minSegmentDts>=Gt?ht:(Nt.minSegmentDts=1/0,ht.filter(function($t){return $t.dts>=Gt?(Nt.minSegmentDts=Math.min(Nt.minSegmentDts,$t.dts),Nt.minSegmentPts=Nt.minSegmentDts,!0):!1}))},Rn=function(ht){var Nt,Gt,$t=[];for(Nt=0;Nt<ht.length;Nt++)Gt=ht[Nt],$t.push({size:Gt.data.byteLength,duration:1024});return $t},is=function(ht){var Nt,Gt,$t=0,Yt=new Uint8Array(qn(ht));for(Nt=0;Nt<ht.length;Nt++)Gt=ht[Nt],Yt.set(Gt.data,$t),$t+=Gt.data.byteLength;return Yt},Wr={prefixWithSilence:jr,trimAdtsFramesByEarliestDts:Xr,generateSampleTable:Rn,concatenateFrameData:is},rs=Sr.ONE_SECOND_IN_TS,sn=function(ht,Nt){typeof Nt.pts=="number"&&(ht.timelineStartInfo.pts===void 0&&(ht.timelineStartInfo.pts=Nt.pts),ht.minSegmentPts===void 0?ht.minSegmentPts=Nt.pts:ht.minSegmentPts=Math.min(ht.minSegmentPts,Nt.pts),ht.maxSegmentPts===void 0?ht.maxSegmentPts=Nt.pts:ht.maxSegmentPts=Math.max(ht.maxSegmentPts,Nt.pts)),typeof Nt.dts=="number"&&(ht.timelineStartInfo.dts===void 0&&(ht.timelineStartInfo.dts=Nt.dts),ht.minSegmentDts===void 0?ht.minSegmentDts=Nt.dts:ht.minSegmentDts=Math.min(ht.minSegmentDts,Nt.dts),ht.maxSegmentDts===void 0?ht.maxSegmentDts=Nt.dts:ht.maxSegmentDts=Math.max(ht.maxSegmentDts,Nt.dts))},Cs=function(ht){delete ht.minSegmentDts,delete ht.maxSegmentDts,delete ht.minSegmentPts,delete ht.maxSegmentPts},ns=function(ht,Nt){var Gt,$t,Yt=ht.minSegmentDts;return Nt||(Yt-=ht.timelineStartInfo.dts),Gt=ht.timelineStartInfo.baseMediaDecodeTime,Gt+=Yt,Gt=Math.max(0,Gt),ht.type==="audio"&&($t=ht.samplerate/rs,Gt*=$t,Gt=Math.floor(Gt)),Gt},ws={clearDtsInfo:Cs,calculateTrackBaseMediaDecodeTime:ns,collectDtsInfo:sn},Mn=4,ss=128,Fs=function(ht){for(var Nt=0,Gt={payloadType:-1,payloadSize:0},$t=0,Yt=0;Nt<ht.byteLength&&ht[Nt]!==ss;){for(;ht[Nt]===255;)$t+=255,Nt++;for($t+=ht[Nt++];ht[Nt]===255;)Yt+=255,Nt++;if(Yt+=ht[Nt++],!Gt.payload&&$t===Mn){var Zt=String.fromCharCode(ht[Nt+3],ht[Nt+4],ht[Nt+5],ht[Nt+6]);if(Zt==="GA94"){Gt.payloadType=$t,Gt.payloadSize=Yt,Gt.payload=ht.subarray(Nt,Nt+Yt);break}else Gt.payload=void 0}Nt+=Yt,$t=0,Yt=0}return Gt},as=function(ht){return ht.payload[0]!==181||(ht.payload[1]<<8|ht.payload[2])!==49||String.fromCharCode(ht.payload[3],ht.payload[4],ht.payload[5],ht.payload[6])!=="GA94"||ht.payload[7]!==3?null:ht.payload.subarray(8,ht.payload.length-1)},$s=function(ht,Nt){var Gt=[],$t,Yt,Zt,hi;if(!(Nt[0]&64))return Gt;for(Yt=Nt[0]&31,$t=0;$t<Yt;$t++)Zt=$t*3,hi={type:Nt[Zt+2]&3,pts:ht},Nt[Zt+2]&4&&(hi.ccData=Nt[Zt+3]<<8|Nt[Zt+4],Gt.push(hi));return Gt},zn=function(ht){for(var Nt=ht.byteLength,Gt=[],$t=1,Yt,Zt;$t<Nt-2;)ht[$t]===0&&ht[$t+1]===0&&ht[$t+2]===3?(Gt.push($t+2),$t+=2):$t++;if(Gt.length===0)return ht;Yt=Nt-Gt.length,Zt=new Uint8Array(Yt);var hi=0;for($t=0;$t<Yt;hi++,$t++)hi===Gt[0]&&(hi++,Gt.shift()),Zt[$t]=ht[hi];return Zt},Gn={parseSei:Fs,parseUserData:as,parseCaptionPackets:$s,discardEmulationPreventionBytes:zn,USER_DATA_REGISTERED_ITU_T_T35:Mn},Yr=S,Wn=Gn,zr=function(ht){ht=ht||{},zr.prototype.init.call(this),this.parse708captions_=typeof ht.parse708captions=="boolean"?ht.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Rr(0,0),new Rr(0,1),new Rr(1,0),new Rr(1,1)],this.parse708captions_&&(this.cc708Stream_=new Cr({captionServices:ht.captionServices})),this.reset(),this.ccStreams_.forEach(function(Nt){Nt.on("data",this.trigger.bind(this,"data")),Nt.on("partialdone",this.trigger.bind(this,"partialdone")),Nt.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};zr.prototype=new Yr,zr.prototype.push=function(ht){var Nt,Gt,$t;if(ht.nalUnitType==="sei_rbsp"&&(Nt=Wn.parseSei(ht.escapedRBSP),!!Nt.payload&&Nt.payloadType===Wn.USER_DATA_REGISTERED_ITU_T_T35&&(Gt=Wn.parseUserData(Nt),!!Gt))){if(ht.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(ht.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}$t=Wn.parseCaptionPackets(ht.pts,Gt),this.captionPackets_=this.captionPackets_.concat($t),this.latestDts_!==ht.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=ht.dts}},zr.prototype.flushCCStreams=function(ht){this.ccStreams_.forEach(function(Nt){return ht==="flush"?Nt.flush():Nt.partialFlush()},this)},zr.prototype.flushStream=function(ht){if(!this.captionPackets_.length){this.flushCCStreams(ht);return}this.captionPackets_.forEach(function(Nt,Gt){Nt.presortIndex=Gt}),this.captionPackets_.sort(function(Nt,Gt){return Nt.pts===Gt.pts?Nt.presortIndex-Gt.presortIndex:Nt.pts-Gt.pts}),this.captionPackets_.forEach(function(Nt){Nt.type<2?this.dispatchCea608Packet(Nt):this.dispatchCea708Packet(Nt)},this),this.captionPackets_.length=0,this.flushCCStreams(ht)},zr.prototype.flush=function(){return this.flushStream("flush")},zr.prototype.partialFlush=function(){return this.flushStream("partialFlush")},zr.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(ht){ht.reset()})},zr.prototype.dispatchCea608Packet=function(ht){this.setsTextOrXDSActive(ht)?this.activeCea608Channel_[ht.type]=null:this.setsChannel1Active(ht)?this.activeCea608Channel_[ht.type]=0:this.setsChannel2Active(ht)&&(this.activeCea608Channel_[ht.type]=1),this.activeCea608Channel_[ht.type]!==null&&this.ccStreams_[(ht.type<<1)+this.activeCea608Channel_[ht.type]].push(ht)},zr.prototype.setsChannel1Active=function(ht){return(ht.ccData&30720)===4096},zr.prototype.setsChannel2Active=function(ht){return(ht.ccData&30720)===6144},zr.prototype.setsTextOrXDSActive=function(ht){return(ht.ccData&28928)===256||(ht.ccData&30974)===4138||(ht.ccData&30974)===6186},zr.prototype.dispatchCea708Packet=function(ht){this.parse708captions_&&this.cc708Stream_.push(ht)};var Bs={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},os=function(ht){var Nt=Bs[ht]||ht;return ht&4096&&ht===Nt?"":String.fromCharCode(Nt)},an=function(ht){return 32<=ht&&ht<=127||160<=ht&&ht<=255},tn=function(ht){this.windowNum=ht,this.reset()};tn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},tn.prototype.getText=function(){return this.rows.join(`
`)},tn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},tn.prototype.newLine=function(ht){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(ht),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},tn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},tn.prototype.addText=function(ht){this.rows[this.rowIdx]+=ht},tn.prototype.backspace=function(){if(!this.isEmpty()){var ht=this.rows[this.rowIdx];this.rows[this.rowIdx]=ht.substr(0,ht.length-1)}};var bn=function(ht,Nt,Gt){this.serviceNum=ht,this.text="",this.currentWindow=new tn(-1),this.windows=[],this.stream=Gt,typeof Nt=="string"&&this.createTextDecoder(Nt)};bn.prototype.init=function(ht,Nt){this.startPts=ht;for(var Gt=0;Gt<8;Gt++)this.windows[Gt]=new tn(Gt),typeof Nt=="function"&&(this.windows[Gt].beforeRowOverflow=Nt)},bn.prototype.setCurrentWindow=function(ht){this.currentWindow=this.windows[ht]},bn.prototype.createTextDecoder=function(ht){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(ht)}catch(Nt){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+ht+" encoding. "+Nt})}};var Cr=function(ht){ht=ht||{},Cr.prototype.init.call(this);var Nt=this,Gt=ht.captionServices||{},$t={},Yt;Object.keys(Gt).forEach(Zt=>{Yt=Gt[Zt],/^SERVICE/.test(Zt)&&($t[Zt]=Yt.encoding)}),this.serviceEncodings=$t,this.current708Packet=null,this.services={},this.push=function(Zt){Zt.type===3?(Nt.new708Packet(),Nt.add708Bytes(Zt)):(Nt.current708Packet===null&&Nt.new708Packet(),Nt.add708Bytes(Zt))}};Cr.prototype=new Yr,Cr.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Cr.prototype.add708Bytes=function(ht){var Nt=ht.ccData,Gt=Nt>>>8,$t=Nt&255;this.current708Packet.ptsVals.push(ht.pts),this.current708Packet.data.push(Gt),this.current708Packet.data.push($t)},Cr.prototype.push708Packet=function(){var ht=this.current708Packet,Nt=ht.data,Gt=null,$t=null,Yt=0,Zt=Nt[Yt++];for(ht.seq=Zt>>6,ht.sizeCode=Zt&63;Yt<Nt.length;Yt++)Zt=Nt[Yt++],Gt=Zt>>5,$t=Zt&31,Gt===7&&$t>0&&(Zt=Nt[Yt++],Gt=Zt),this.pushServiceBlock(Gt,Yt,$t),$t>0&&(Yt+=$t-1)},Cr.prototype.pushServiceBlock=function(ht,Nt,Gt){var $t,Yt=Nt,Zt=this.current708Packet.data,hi=this.services[ht];for(hi||(hi=this.initService(ht,Yt));Yt<Nt+Gt&&Yt<Zt.length;Yt++)$t=Zt[Yt],an($t)?Yt=this.handleText(Yt,hi):$t===24?Yt=this.multiByteCharacter(Yt,hi):$t===16?Yt=this.extendedCommands(Yt,hi):128<=$t&&$t<=135?Yt=this.setCurrentWindow(Yt,hi):152<=$t&&$t<=159?Yt=this.defineWindow(Yt,hi):$t===136?Yt=this.clearWindows(Yt,hi):$t===140?Yt=this.deleteWindows(Yt,hi):$t===137?Yt=this.displayWindows(Yt,hi):$t===138?Yt=this.hideWindows(Yt,hi):$t===139?Yt=this.toggleWindows(Yt,hi):$t===151?Yt=this.setWindowAttributes(Yt,hi):$t===144?Yt=this.setPenAttributes(Yt,hi):$t===145?Yt=this.setPenColor(Yt,hi):$t===146?Yt=this.setPenLocation(Yt,hi):$t===143?hi=this.reset(Yt,hi):$t===8?hi.currentWindow.backspace():$t===12?hi.currentWindow.clearText():$t===13?hi.currentWindow.pendingNewLine=!0:$t===14?hi.currentWindow.clearText():$t===141&&Yt++},Cr.prototype.extendedCommands=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[++ht];return an($t)&&(ht=this.handleText(ht,Nt,{isExtended:!0})),ht},Cr.prototype.getPts=function(ht){return this.current708Packet.ptsVals[Math.floor(ht/2)]},Cr.prototype.initService=function(ht,Nt){var $t="SERVICE"+ht,Gt=this,$t,Yt;return $t in this.serviceEncodings&&(Yt=this.serviceEncodings[$t]),this.services[ht]=new bn(ht,Yt,Gt),this.services[ht].init(this.getPts(Nt),function(Zt){Gt.flushDisplayed(Zt,Gt.services[ht])}),this.services[ht]},Cr.prototype.handleText=function(ht,Nt,Gt){var $t=Gt&&Gt.isExtended,Yt=Gt&&Gt.isMultiByte,Zt=this.current708Packet.data,hi=$t?4096:0,gi=Zt[ht],yi=Zt[ht+1],_i=Nt.currentWindow,xi,Oi;function rr(Hi){return Hi.map(gr=>("0"+(gr&255).toString(16)).slice(-2)).join("")}if(Yt?(Oi=[gi,yi],ht++):Oi=[gi],Nt.textDecoder_&&!$t)xi=Nt.textDecoder_.decode(new Uint8Array(Oi));else if(Yt){const Hi=rr(Oi);xi=String.fromCharCode(parseInt(Hi,16))}else xi=os(hi|gi);return _i.pendingNewLine&&!_i.isEmpty()&&_i.newLine(this.getPts(ht)),_i.pendingNewLine=!1,_i.addText(xi),ht},Cr.prototype.multiByteCharacter=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[ht+1],Yt=Gt[ht+2];return an($t)&&an(Yt)&&(ht=this.handleText(++ht,Nt,{isMultiByte:!0})),ht},Cr.prototype.setCurrentWindow=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[ht],Yt=$t&7;return Nt.setCurrentWindow(Yt),ht},Cr.prototype.defineWindow=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[ht],Yt=$t&7;Nt.setCurrentWindow(Yt);var Zt=Nt.currentWindow;return $t=Gt[++ht],Zt.visible=($t&32)>>5,Zt.rowLock=($t&16)>>4,Zt.columnLock=($t&8)>>3,Zt.priority=$t&7,$t=Gt[++ht],Zt.relativePositioning=($t&128)>>7,Zt.anchorVertical=$t&127,$t=Gt[++ht],Zt.anchorHorizontal=$t,$t=Gt[++ht],Zt.anchorPoint=($t&240)>>4,Zt.rowCount=$t&15,$t=Gt[++ht],Zt.columnCount=$t&63,$t=Gt[++ht],Zt.windowStyle=($t&56)>>3,Zt.penStyle=$t&7,Zt.virtualRowCount=Zt.rowCount+1,ht},Cr.prototype.setWindowAttributes=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[ht],Yt=Nt.currentWindow.winAttr;return $t=Gt[++ht],Yt.fillOpacity=($t&192)>>6,Yt.fillRed=($t&48)>>4,Yt.fillGreen=($t&12)>>2,Yt.fillBlue=$t&3,$t=Gt[++ht],Yt.borderType=($t&192)>>6,Yt.borderRed=($t&48)>>4,Yt.borderGreen=($t&12)>>2,Yt.borderBlue=$t&3,$t=Gt[++ht],Yt.borderType+=($t&128)>>5,Yt.wordWrap=($t&64)>>6,Yt.printDirection=($t&48)>>4,Yt.scrollDirection=($t&12)>>2,Yt.justify=$t&3,$t=Gt[++ht],Yt.effectSpeed=($t&240)>>4,Yt.effectDirection=($t&12)>>2,Yt.displayEffect=$t&3,ht},Cr.prototype.flushDisplayed=function(ht,Nt){for(var Gt=[],$t=0;$t<8;$t++)Nt.windows[$t].visible&&!Nt.windows[$t].isEmpty()&&Gt.push(Nt.windows[$t].getText());Nt.endPts=ht,Nt.text=Gt.join(`

`),this.pushCaption(Nt),Nt.startPts=ht},Cr.prototype.pushCaption=function(ht){ht.text!==""&&(this.trigger("data",{startPts:ht.startPts,endPts:ht.endPts,text:ht.text,stream:"cc708_"+ht.serviceNum}),ht.text="",ht.startPts=ht.endPts)},Cr.prototype.displayWindows=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[++ht],Yt=this.getPts(ht);this.flushDisplayed(Yt,Nt);for(var Zt=0;Zt<8;Zt++)$t&1<<Zt&&(Nt.windows[Zt].visible=1);return ht},Cr.prototype.hideWindows=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[++ht],Yt=this.getPts(ht);this.flushDisplayed(Yt,Nt);for(var Zt=0;Zt<8;Zt++)$t&1<<Zt&&(Nt.windows[Zt].visible=0);return ht},Cr.prototype.toggleWindows=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[++ht],Yt=this.getPts(ht);this.flushDisplayed(Yt,Nt);for(var Zt=0;Zt<8;Zt++)$t&1<<Zt&&(Nt.windows[Zt].visible^=1);return ht},Cr.prototype.clearWindows=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[++ht],Yt=this.getPts(ht);this.flushDisplayed(Yt,Nt);for(var Zt=0;Zt<8;Zt++)$t&1<<Zt&&Nt.windows[Zt].clearText();return ht},Cr.prototype.deleteWindows=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[++ht],Yt=this.getPts(ht);this.flushDisplayed(Yt,Nt);for(var Zt=0;Zt<8;Zt++)$t&1<<Zt&&Nt.windows[Zt].reset();return ht},Cr.prototype.setPenAttributes=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[ht],Yt=Nt.currentWindow.penAttr;return $t=Gt[++ht],Yt.textTag=($t&240)>>4,Yt.offset=($t&12)>>2,Yt.penSize=$t&3,$t=Gt[++ht],Yt.italics=($t&128)>>7,Yt.underline=($t&64)>>6,Yt.edgeType=($t&56)>>3,Yt.fontStyle=$t&7,ht},Cr.prototype.setPenColor=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[ht],Yt=Nt.currentWindow.penColor;return $t=Gt[++ht],Yt.fgOpacity=($t&192)>>6,Yt.fgRed=($t&48)>>4,Yt.fgGreen=($t&12)>>2,Yt.fgBlue=$t&3,$t=Gt[++ht],Yt.bgOpacity=($t&192)>>6,Yt.bgRed=($t&48)>>4,Yt.bgGreen=($t&12)>>2,Yt.bgBlue=$t&3,$t=Gt[++ht],Yt.edgeRed=($t&48)>>4,Yt.edgeGreen=($t&12)>>2,Yt.edgeBlue=$t&3,ht},Cr.prototype.setPenLocation=function(ht,Nt){var Gt=this.current708Packet.data,$t=Gt[ht],Yt=Nt.currentWindow.penLoc;return Nt.currentWindow.pendingNewLine=!0,$t=Gt[++ht],Yt.row=$t&15,$t=Gt[++ht],Yt.column=$t&63,ht},Cr.prototype.reset=function(ht,Nt){var Gt=this.getPts(ht);return this.flushDisplayed(Gt,Nt),this.initService(Nt.serviceNum,ht)};var Us={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Kn=function(ht){return ht===null?"":(ht=Us[ht]||ht,String.fromCharCode(ht))},Ln=14,ls=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],cn=function(){for(var ht=[],Nt=Ln+1;Nt--;)ht.push({text:"",indent:0,offset:0});return ht},Rr=function(ht,Nt){Rr.prototype.init.call(this),this.field_=ht||0,this.dataChannel_=Nt||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(Gt){var $t,Yt,Zt,hi,gi;if($t=Gt.ccData&32639,$t===this.lastControlCode_){this.lastControlCode_=null;return}if(($t&61440)===4096?this.lastControlCode_=$t:$t!==this.PADDING_&&(this.lastControlCode_=null),Zt=$t>>>8,hi=$t&255,$t!==this.PADDING_)if($t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if($t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(Gt.pts),this.flushDisplayed(Gt.pts),Yt=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=Yt,this.startPts_=Gt.pts;else if($t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(Gt.pts);else if($t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(Gt.pts);else if($t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(Gt.pts);else if($t===this.CARRIAGE_RETURN_)this.clearFormatting(Gt.pts),this.flushDisplayed(Gt.pts),this.shiftRowsUp_(),this.startPts_=Gt.pts;else if($t===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if($t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(Gt.pts),this.displayed_=cn();else if($t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=cn();else if($t===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(Gt.pts),this.displayed_=cn()),this.mode_="paintOn",this.startPts_=Gt.pts;else if(this.isSpecialCharacter(Zt,hi))Zt=(Zt&3)<<8,gi=Kn(Zt|hi),this[this.mode_](Gt.pts,gi),this.column_++;else if(this.isExtCharacter(Zt,hi))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),Zt=(Zt&3)<<8,gi=Kn(Zt|hi),this[this.mode_](Gt.pts,gi),this.column_++;else if(this.isMidRowCode(Zt,hi))this.clearFormatting(Gt.pts),this[this.mode_](Gt.pts," "),this.column_++,(hi&14)===14&&this.addFormatting(Gt.pts,["i"]),(hi&1)===1&&this.addFormatting(Gt.pts,["u"]);else if(this.isOffsetControlCode(Zt,hi)){const _i=hi&3;this.nonDisplayed_[this.row_].offset=_i,this.column_+=_i}else if(this.isPAC(Zt,hi)){var yi=ls.indexOf($t&7968);if(this.mode_==="rollUp"&&(yi-this.rollUpRows_+1<0&&(yi=this.rollUpRows_-1),this.setRollUp(Gt.pts,yi)),yi!==this.row_&&yi>=0&&yi<=14&&(this.clearFormatting(Gt.pts),this.row_=yi),hi&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(Gt.pts,["u"]),($t&16)===16){const _i=($t&14)>>1;this.column_=_i*4,this.nonDisplayed_[this.row_].indent+=_i}this.isColorPAC(hi)&&(hi&14)===14&&this.addFormatting(Gt.pts,["i"])}else this.isNormalChar(Zt)&&(hi===0&&(hi=null),gi=Kn(Zt),gi+=Kn(hi),this[this.mode_](Gt.pts,gi),this.column_+=gi.length)}};Rr.prototype=new Yr,Rr.prototype.flushDisplayed=function(ht){const Nt=$t=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+$t+"."})},Gt=[];this.displayed_.forEach(($t,Yt)=>{if($t&&$t.text&&$t.text.length){try{$t.text=$t.text.trim()}catch{Nt(Yt)}$t.text.length&&Gt.push({text:$t.text,line:Yt+1,position:10+Math.min(70,$t.indent*10)+$t.offset*2.5})}else $t==null&&Nt(Yt)}),Gt.length&&this.trigger("data",{startPts:this.startPts_,endPts:ht,content:Gt,stream:this.name_})},Rr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=cn(),this.nonDisplayed_=cn(),this.lastControlCode_=null,this.column_=0,this.row_=Ln,this.rollUpRows_=2,this.formatting_=[]},Rr.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Rr.prototype.isSpecialCharacter=function(ht,Nt){return ht===this.EXT_&&Nt>=48&&Nt<=63},Rr.prototype.isExtCharacter=function(ht,Nt){return(ht===this.EXT_+1||ht===this.EXT_+2)&&Nt>=32&&Nt<=63},Rr.prototype.isMidRowCode=function(ht,Nt){return ht===this.EXT_&&Nt>=32&&Nt<=47},Rr.prototype.isOffsetControlCode=function(ht,Nt){return ht===this.OFFSET_&&Nt>=33&&Nt<=35},Rr.prototype.isPAC=function(ht,Nt){return ht>=this.BASE_&&ht<this.BASE_+8&&Nt>=64&&Nt<=127},Rr.prototype.isColorPAC=function(ht){return ht>=64&&ht<=79||ht>=96&&ht<=127},Rr.prototype.isNormalChar=function(ht){return ht>=32&&ht<=127},Rr.prototype.setRollUp=function(ht,Nt){if(this.mode_!=="rollUp"&&(this.row_=Ln,this.mode_="rollUp",this.flushDisplayed(ht),this.nonDisplayed_=cn(),this.displayed_=cn()),Nt!==void 0&&Nt!==this.row_)for(var Gt=0;Gt<this.rollUpRows_;Gt++)this.displayed_[Nt-Gt]=this.displayed_[this.row_-Gt],this.displayed_[this.row_-Gt]={text:"",indent:0,offset:0};Nt===void 0&&(Nt=this.row_),this.topRow_=Nt-this.rollUpRows_+1},Rr.prototype.addFormatting=function(ht,Nt){this.formatting_=this.formatting_.concat(Nt);var Gt=Nt.reduce(function($t,Yt){return $t+"<"+Yt+">"},"");this[this.mode_](ht,Gt)},Rr.prototype.clearFormatting=function(ht){if(this.formatting_.length){var Nt=this.formatting_.reverse().reduce(function(Gt,$t){return Gt+"</"+$t+">"},"");this.formatting_=[],this[this.mode_](ht,Nt)}},Rr.prototype.popOn=function(ht,Nt){var Gt=this.nonDisplayed_[this.row_].text;Gt+=Nt,this.nonDisplayed_[this.row_].text=Gt},Rr.prototype.rollUp=function(ht,Nt){var Gt=this.displayed_[this.row_].text;Gt+=Nt,this.displayed_[this.row_].text=Gt},Rr.prototype.shiftRowsUp_=function(){var ht;for(ht=0;ht<this.topRow_;ht++)this.displayed_[ht]={text:"",indent:0,offset:0};for(ht=this.row_+1;ht<Ln+1;ht++)this.displayed_[ht]={text:"",indent:0,offset:0};for(ht=this.topRow_;ht<this.row_;ht++)this.displayed_[ht]=this.displayed_[ht+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Rr.prototype.paintOn=function(ht,Nt){var Gt=this.displayed_[this.row_].text;Gt+=Nt,this.displayed_[this.row_].text=Gt};var us={CaptionStream:zr,Cea608Stream:Rr,Cea708Stream:Cr},Xn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Vs=S,Yn=8589934592,Hs=4294967296,As="shared",cs=function(ht,Nt){var Gt=1;for(ht>Nt&&(Gt=-1);Math.abs(Nt-ht)>Hs;)ht+=Gt*Yn;return ht},hs=function(ht){var Nt,Gt;hs.prototype.init.call(this),this.type_=ht||As,this.push=function($t){if($t.type==="metadata"){this.trigger("data",$t);return}this.type_!==As&&$t.type!==this.type_||(Gt===void 0&&(Gt=$t.dts),$t.dts=cs($t.dts,Gt),$t.pts=cs($t.pts,Gt),Nt=$t.dts,this.trigger("data",$t))},this.flush=function(){Gt=Nt,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){Gt=void 0,Nt=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};hs.prototype=new Vs;var ds={TimestampRolloverStream:hs,handleRollover:cs},mn=(ht,Nt,Gt)=>{if(!ht)return-1;for(var $t=Gt;$t<ht.length;$t++)if(ht[$t]===Nt)return $t;return-1},fs={typedArrayIndexOf:mn},Qr=fs.typedArrayIndexOf,Cn={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},Qn=function(ht,Nt,Gt){var $t,Yt="";for($t=Nt;$t<Gt;$t++)Yt+="%"+("00"+ht[$t].toString(16)).slice(-2);return Yt},An=function(ht,Nt,Gt){return decodeURIComponent(Qn(ht,Nt,Gt))},$n=function(ht,Nt,Gt){return unescape(Qn(ht,Nt,Gt))},Bn=function(ht){return ht[0]<<21|ht[1]<<14|ht[2]<<7|ht[3]},Tn={APIC:function(ht){var Nt=1,Gt,$t,Yt="-->";ht.data[0]===Cn.Utf8&&(Gt=Qr(ht.data,0,Nt),!(Gt<0)&&(ht.mimeType=$n(ht.data,Nt,Gt),Nt=Gt+1,ht.pictureType=ht.data[Nt],Nt++,$t=Qr(ht.data,0,Nt),!($t<0)&&(ht.description=An(ht.data,Nt,$t),Nt=$t+1,ht.mimeType===Yt?ht.url=$n(ht.data,Nt,ht.data.length):ht.pictureData=ht.data.subarray(Nt,ht.data.length))))},"T*":function(ht){ht.data[0]===Cn.Utf8&&(ht.value=An(ht.data,1,ht.data.length).replace(/\0*$/,""),ht.values=ht.value.split("\0"))},TXXX:function(ht){var Nt;ht.data[0]===Cn.Utf8&&(Nt=Qr(ht.data,0,1),Nt!==-1&&(ht.description=An(ht.data,1,Nt),ht.value=An(ht.data,Nt+1,ht.data.length).replace(/\0*$/,""),ht.data=ht.value))},"W*":function(ht){ht.url=$n(ht.data,0,ht.data.length).replace(/\0.*$/,"")},WXXX:function(ht){var Nt;ht.data[0]===Cn.Utf8&&(Nt=Qr(ht.data,0,1),Nt!==-1&&(ht.description=An(ht.data,1,Nt),ht.url=$n(ht.data,Nt+1,ht.data.length).replace(/\0.*$/,"")))},PRIV:function(ht){var Nt;for(Nt=0;Nt<ht.data.length;Nt++)if(ht.data[Nt]===0){ht.owner=$n(ht.data,0,Nt);break}ht.privateData=ht.data.subarray(Nt+1),ht.data=ht.privateData}},Ps=function(ht){var Nt,Gt,$t=10,Yt=0,Zt=[];if(!(ht.length<10||ht[0]!==73||ht[1]!==68||ht[2]!==51)){Yt=Bn(ht.subarray(6,10)),Yt+=10;var hi=ht[5]&64;hi&&($t+=4,$t+=Bn(ht.subarray(10,14)),Yt-=Bn(ht.subarray(16,20)));do{if(Nt=Bn(ht.subarray($t+4,$t+8)),Nt<1)break;Gt=String.fromCharCode(ht[$t],ht[$t+1],ht[$t+2],ht[$t+3]);var gi={id:Gt,data:ht.subarray($t+10,$t+Nt+10)};gi.key=gi.id,Tn[gi.id]?Tn[gi.id](gi):gi.id[0]==="T"?Tn["T*"](gi):gi.id[0]==="W"&&Tn["W*"](gi),Zt.push(gi),$t+=10,$t+=Nt}while($t<Yt);return Zt}},ps={parseId3Frames:Ps,parseSyncSafeInteger:Bn,frameParsers:Tn},Un=S,Jn=Xn,Kr=ps,Vn;Vn=function(ht){var Nt={descriptor:ht&&ht.descriptor},Gt=0,$t=[],Yt=0,Zt;if(Vn.prototype.init.call(this),this.dispatchType=Jn.METADATA_STREAM_TYPE.toString(16),Nt.descriptor)for(Zt=0;Zt<Nt.descriptor.length;Zt++)this.dispatchType+=("00"+Nt.descriptor[Zt].toString(16)).slice(-2);this.push=function(hi){var gi,yi,_i,xi,Oi,rr;if(hi.type==="timed-metadata"){if(hi.dataAlignmentIndicator&&(Yt=0,$t.length=0),$t.length===0&&(hi.data.length<10||hi.data[0]!==73||hi.data[1]!==68||hi.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if($t.push(hi),Yt+=hi.data.byteLength,$t.length===1&&(Gt=Kr.parseSyncSafeInteger(hi.data.subarray(6,10)),Gt+=10),!(Yt<Gt)){for(gi={data:new Uint8Array(Gt),frames:[],pts:$t[0].pts,dts:$t[0].dts},Oi=0;Oi<Gt;)gi.data.set($t[0].data.subarray(0,Gt-Oi),Oi),Oi+=$t[0].data.byteLength,Yt-=$t[0].data.byteLength,$t.shift();yi=10,gi.data[5]&64&&(yi+=4,yi+=Kr.parseSyncSafeInteger(gi.data.subarray(10,14)),Gt-=Kr.parseSyncSafeInteger(gi.data.subarray(16,20)));do{if(_i=Kr.parseSyncSafeInteger(gi.data.subarray(yi+4,yi+8)),_i<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(rr=String.fromCharCode(gi.data[yi],gi.data[yi+1],gi.data[yi+2],gi.data[yi+3]),xi={id:rr,data:gi.data.subarray(yi+10,yi+_i+10)},xi.key=xi.id,Kr.frameParsers[xi.id]?Kr.frameParsers[xi.id](xi):xi.id[0]==="T"?Kr.frameParsers["T*"](xi):xi.id[0]==="W"&&Kr.frameParsers["W*"](xi),xi.owner==="com.apple.streaming.transportStreamTimestamp"){var Hi=xi.data,gr=(Hi[3]&1)<<30|Hi[4]<<22|Hi[5]<<14|Hi[6]<<6|Hi[7]>>>2;gr*=4,gr+=Hi[7]&3,xi.timeStamp=gr,gi.pts===void 0&&gi.dts===void 0&&(gi.pts=xi.timeStamp,gi.dts=xi.timeStamp),this.trigger("timestamp",xi)}gi.frames.push(xi),yi+=10,yi+=_i}while(yi<Gt);this.trigger("data",gi)}}}},Vn.prototype=new Un;var rn=Vn,ms=S,Pn=us,Jr=Xn,gs=ds.TimestampRolloverStream,Zn,Hn,jn,nn=188,gn=71;Zn=function(){var ht=new Uint8Array(nn),Nt=0;Zn.prototype.init.call(this),this.push=function(Gt){var $t=0,Yt=nn,Zt;for(Nt?(Zt=new Uint8Array(Gt.byteLength+Nt),Zt.set(ht.subarray(0,Nt)),Zt.set(Gt,Nt),Nt=0):Zt=Gt;Yt<Zt.byteLength;){if(Zt[$t]===gn&&Zt[Yt]===gn){this.trigger("data",Zt.subarray($t,Yt)),$t+=nn,Yt+=nn;continue}$t++,Yt++}$t<Zt.byteLength&&(ht.set(Zt.subarray($t),0),Nt=Zt.byteLength-$t)},this.flush=function(){Nt===nn&&ht[0]===gn&&(this.trigger("data",ht),Nt=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){Nt=0,this.trigger("reset")}},Zn.prototype=new ms,Hn=function(){var ht,Nt,Gt,$t;Hn.prototype.init.call(this),$t=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,ht=function(Yt,Zt){var hi=0;Zt.payloadUnitStartIndicator&&(hi+=Yt[hi]+1),Zt.type==="pat"?Nt(Yt.subarray(hi),Zt):Gt(Yt.subarray(hi),Zt)},Nt=function(Yt,Zt){Zt.section_number=Yt[7],Zt.last_section_number=Yt[8],$t.pmtPid=(Yt[10]&31)<<8|Yt[11],Zt.pmtPid=$t.pmtPid},Gt=function(Yt,Zt){var hi,gi,yi,_i;if(Yt[5]&1){for($t.programMapTable={video:null,audio:null,"timed-metadata":{}},hi=(Yt[1]&15)<<8|Yt[2],gi=3+hi-4,yi=(Yt[10]&15)<<8|Yt[11],_i=12+yi;_i<gi;){var xi=Yt[_i],Oi=(Yt[_i+1]&31)<<8|Yt[_i+2];xi===Jr.H264_STREAM_TYPE&&$t.programMapTable.video===null?$t.programMapTable.video=Oi:xi===Jr.ADTS_STREAM_TYPE&&$t.programMapTable.audio===null?$t.programMapTable.audio=Oi:xi===Jr.METADATA_STREAM_TYPE&&($t.programMapTable["timed-metadata"][Oi]=xi),_i+=((Yt[_i+3]&15)<<8|Yt[_i+4])+5}Zt.programMapTable=$t.programMapTable}},this.push=function(Yt){var Zt={},hi=4;if(Zt.payloadUnitStartIndicator=!!(Yt[1]&64),Zt.pid=Yt[1]&31,Zt.pid<<=8,Zt.pid|=Yt[2],(Yt[3]&48)>>>4>1&&(hi+=Yt[hi]+1),Zt.pid===0)Zt.type="pat",ht(Yt.subarray(hi),Zt),this.trigger("data",Zt);else if(Zt.pid===this.pmtPid)for(Zt.type="pmt",ht(Yt.subarray(hi),Zt),this.trigger("data",Zt);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([Yt,hi,Zt]):this.processPes_(Yt,hi,Zt)},this.processPes_=function(Yt,Zt,hi){hi.pid===this.programMapTable.video?hi.streamType=Jr.H264_STREAM_TYPE:hi.pid===this.programMapTable.audio?hi.streamType=Jr.ADTS_STREAM_TYPE:hi.streamType=this.programMapTable["timed-metadata"][hi.pid],hi.type="pes",hi.data=Yt.subarray(Zt),this.trigger("data",hi)}},Hn.prototype=new ms,Hn.STREAM_TYPES={h264:27,adts:15},jn=function(){var ht=this,Nt=!1,Gt={data:[],size:0},$t={data:[],size:0},Yt={data:[],size:0},Zt,hi=function(yi,_i){var xi;const Oi=yi[0]<<16|yi[1]<<8|yi[2];_i.data=new Uint8Array,Oi===1&&(_i.packetLength=6+(yi[4]<<8|yi[5]),_i.dataAlignmentIndicator=(yi[6]&4)!==0,xi=yi[7],xi&192&&(_i.pts=(yi[9]&14)<<27|(yi[10]&255)<<20|(yi[11]&254)<<12|(yi[12]&255)<<5|(yi[13]&254)>>>3,_i.pts*=4,_i.pts+=(yi[13]&6)>>>1,_i.dts=_i.pts,xi&64&&(_i.dts=(yi[14]&14)<<27|(yi[15]&255)<<20|(yi[16]&254)<<12|(yi[17]&255)<<5|(yi[18]&254)>>>3,_i.dts*=4,_i.dts+=(yi[18]&6)>>>1)),_i.data=yi.subarray(9+yi[8]))},gi=function(yi,_i,xi){var Oi=new Uint8Array(yi.size),rr={type:_i},Hi=0,gr=0,br=!1,qr;if(!(!yi.data.length||yi.size<9)){for(rr.trackId=yi.data[0].pid,Hi=0;Hi<yi.data.length;Hi++)qr=yi.data[Hi],Oi.set(qr.data,gr),gr+=qr.data.byteLength;hi(Oi,rr),br=_i==="video"||rr.packetLength<=yi.size,(xi||br)&&(yi.size=0,yi.data.length=0),br&&ht.trigger("data",rr)}};jn.prototype.init.call(this),this.push=function(yi){({pat:function(){},pes:function(){var _i,xi;switch(yi.streamType){case Jr.H264_STREAM_TYPE:_i=Gt,xi="video";break;case Jr.ADTS_STREAM_TYPE:_i=$t,xi="audio";break;case Jr.METADATA_STREAM_TYPE:_i=Yt,xi="timed-metadata";break;default:return}yi.payloadUnitStartIndicator&&gi(_i,xi,!0),_i.data.push(yi),_i.size+=yi.data.byteLength},pmt:function(){var _i={type:"metadata",tracks:[]};Zt=yi.programMapTable,Zt.video!==null&&_i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Zt.video,codec:"avc",type:"video"}),Zt.audio!==null&&_i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Zt.audio,codec:"adts",type:"audio"}),Nt=!0,ht.trigger("data",_i)}})[yi.type]()},this.reset=function(){Gt.size=0,Gt.data.length=0,$t.size=0,$t.data.length=0,this.trigger("reset")},this.flushStreams_=function(){gi(Gt,"video"),gi($t,"audio"),gi(Yt,"timed-metadata")},this.flush=function(){if(!Nt&&Zt){var yi={type:"metadata",tracks:[]};Zt.video!==null&&yi.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Zt.video,codec:"avc",type:"video"}),Zt.audio!==null&&yi.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Zt.audio,codec:"adts",type:"audio"}),ht.trigger("data",yi)}Nt=!1,this.flushStreams_(),this.trigger("done")}},jn.prototype=new ms;var Is={PAT_PID:0,MP2T_PACKET_LENGTH:nn,TransportPacketStream:Zn,TransportParseStream:Hn,ElementaryStream:jn,TimestampRolloverStream:gs,CaptionStream:Pn.CaptionStream,Cea608Stream:Pn.Cea608Stream,Cea708Stream:Pn.Cea708Stream,MetadataStream:rn};for(var yn in Jr)Jr.hasOwnProperty(yn)&&(Is[yn]=Jr[yn]);var js=Is,qs=S,Ds=Sr.ONE_SECOND_IN_TS,es,Ur=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];es=function(ht){var Nt,Gt=0;es.prototype.init.call(this),this.skipWarn_=function($t,Yt){this.trigger("log",{level:"warn",message:`adts skiping bytes ${$t} to ${Yt} in frame ${Gt} outside syncword`})},this.push=function($t){var Yt=0,Zt,hi,gi,yi,_i;if(ht||(Gt=0),$t.type==="audio"){Nt&&Nt.length?(gi=Nt,Nt=new Uint8Array(gi.byteLength+$t.data.byteLength),Nt.set(gi),Nt.set($t.data,gi.byteLength)):Nt=$t.data;for(var xi;Yt+7<Nt.length;){if(Nt[Yt]!==255||(Nt[Yt+1]&246)!==240){typeof xi!="number"&&(xi=Yt),Yt++;continue}if(typeof xi=="number"&&(this.skipWarn_(xi,Yt),xi=null),hi=(~Nt[Yt+1]&1)*2,Zt=(Nt[Yt+3]&3)<<11|Nt[Yt+4]<<3|(Nt[Yt+5]&224)>>5,yi=((Nt[Yt+6]&3)+1)*1024,_i=yi*Ds/Ur[(Nt[Yt+2]&60)>>>2],Nt.byteLength-Yt<Zt)break;this.trigger("data",{pts:$t.pts+Gt*_i,dts:$t.dts+Gt*_i,sampleCount:yi,audioobjecttype:(Nt[Yt+2]>>>6&3)+1,channelcount:(Nt[Yt+2]&1)<<2|(Nt[Yt+3]&192)>>>6,samplerate:Ur[(Nt[Yt+2]&60)>>>2],samplingfrequencyindex:(Nt[Yt+2]&60)>>>2,samplesize:16,data:Nt.subarray(Yt+7+hi,Yt+Zt)}),Gt++,Yt+=Zt}typeof xi=="number"&&(this.skipWarn_(xi,Yt),xi=null),Nt=Nt.subarray(Yt)}},this.flush=function(){Gt=0,this.trigger("done")},this.reset=function(){Nt=void 0,this.trigger("reset")},this.endTimeline=function(){Nt=void 0,this.trigger("endedtimeline")}},es.prototype=new qs;var ti=es,ai;ai=function(ht){var Nt=ht.byteLength,Gt=0,$t=0;this.length=function(){return 8*Nt},this.bitsAvailable=function(){return 8*Nt+$t},this.loadWord=function(){var Yt=ht.byteLength-Nt,Zt=new Uint8Array(4),hi=Math.min(4,Nt);if(hi===0)throw new Error("no bytes available");Zt.set(ht.subarray(Yt,Yt+hi)),Gt=new DataView(Zt.buffer).getUint32(0),$t=hi*8,Nt-=hi},this.skipBits=function(Yt){var Zt;$t>Yt?(Gt<<=Yt,$t-=Yt):(Yt-=$t,Zt=Math.floor(Yt/8),Yt-=Zt*8,Nt-=Zt,this.loadWord(),Gt<<=Yt,$t-=Yt)},this.readBits=function(Yt){var Zt=Math.min($t,Yt),hi=Gt>>>32-Zt;return $t-=Zt,$t>0?Gt<<=Zt:Nt>0&&this.loadWord(),Zt=Yt-Zt,Zt>0?hi<<Zt|this.readBits(Zt):hi},this.skipLeadingZeros=function(){var Yt;for(Yt=0;Yt<$t;++Yt)if(Gt&2147483648>>>Yt)return Gt<<=Yt,$t-=Yt,Yt;return this.loadWord(),Yt+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var Yt=this.skipLeadingZeros();return this.readBits(Yt+1)-1},this.readExpGolomb=function(){var Yt=this.readUnsignedExpGolomb();return 1&Yt?1+Yt>>>1:-1*(Yt>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ci=ai,ui=S,Ti=ci,ki,Ii,Ki;Ii=function(){var ht=0,Nt,Gt;Ii.prototype.init.call(this),this.push=function($t){var Yt;Gt?(Yt=new Uint8Array(Gt.byteLength+$t.data.byteLength),Yt.set(Gt),Yt.set($t.data,Gt.byteLength),Gt=Yt):Gt=$t.data;for(var Zt=Gt.byteLength;ht<Zt-3;ht++)if(Gt[ht+2]===1){Nt=ht+5;break}for(;Nt<Zt;)switch(Gt[Nt]){case 0:if(Gt[Nt-1]!==0){Nt+=2;break}else if(Gt[Nt-2]!==0){Nt++;break}ht+3!==Nt-2&&this.trigger("data",Gt.subarray(ht+3,Nt-2));do Nt++;while(Gt[Nt]!==1&&Nt<Zt);ht=Nt-2,Nt+=3;break;case 1:if(Gt[Nt-1]!==0||Gt[Nt-2]!==0){Nt+=3;break}this.trigger("data",Gt.subarray(ht+3,Nt-2)),ht=Nt-2,Nt+=3;break;default:Nt+=3;break}Gt=Gt.subarray(ht),Nt-=ht,ht=0},this.reset=function(){Gt=null,ht=0,this.trigger("reset")},this.flush=function(){Gt&&Gt.byteLength>3&&this.trigger("data",Gt.subarray(ht+3)),Gt=null,ht=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ii.prototype=new ui,Ki={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ki=function(){var ht=new Ii,Nt,Gt,$t,Yt,Zt,hi,gi;ki.prototype.init.call(this),Nt=this,this.push=function(yi){yi.type==="video"&&(Gt=yi.trackId,$t=yi.pts,Yt=yi.dts,ht.push(yi))},ht.on("data",function(yi){var _i={trackId:Gt,pts:$t,dts:Yt,data:yi,nalUnitTypeCode:yi[0]&31};switch(_i.nalUnitTypeCode){case 5:_i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:_i.nalUnitType="sei_rbsp",_i.escapedRBSP=Zt(yi.subarray(1));break;case 7:_i.nalUnitType="seq_parameter_set_rbsp",_i.escapedRBSP=Zt(yi.subarray(1)),_i.config=hi(_i.escapedRBSP);break;case 8:_i.nalUnitType="pic_parameter_set_rbsp";break;case 9:_i.nalUnitType="access_unit_delimiter_rbsp";break}Nt.trigger("data",_i)}),ht.on("done",function(){Nt.trigger("done")}),ht.on("partialdone",function(){Nt.trigger("partialdone")}),ht.on("reset",function(){Nt.trigger("reset")}),ht.on("endedtimeline",function(){Nt.trigger("endedtimeline")}),this.flush=function(){ht.flush()},this.partialFlush=function(){ht.partialFlush()},this.reset=function(){ht.reset()},this.endTimeline=function(){ht.endTimeline()},gi=function(yi,_i){var xi=8,Oi=8,rr,Hi;for(rr=0;rr<yi;rr++)Oi!==0&&(Hi=_i.readExpGolomb(),Oi=(xi+Hi+256)%256),xi=Oi===0?xi:Oi},Zt=function(yi){for(var _i=yi.byteLength,xi=[],Oi=1,rr,Hi;Oi<_i-2;)yi[Oi]===0&&yi[Oi+1]===0&&yi[Oi+2]===3?(xi.push(Oi+2),Oi+=2):Oi++;if(xi.length===0)return yi;rr=_i-xi.length,Hi=new Uint8Array(rr);var gr=0;for(Oi=0;Oi<rr;gr++,Oi++)gr===xi[0]&&(gr++,xi.shift()),Hi[Oi]=yi[gr];return Hi},hi=function(yi){var _i=0,xi=0,Oi=0,rr=0,Hi,gr,br,qr,_n,Es,ja,qa,za,Ia,Ga,Hr=[1,1],Wa,xs;if(Hi=new Ti(yi),gr=Hi.readUnsignedByte(),qr=Hi.readUnsignedByte(),br=Hi.readUnsignedByte(),Hi.skipUnsignedExpGolomb(),Ki[gr]&&(_n=Hi.readUnsignedExpGolomb(),_n===3&&Hi.skipBits(1),Hi.skipUnsignedExpGolomb(),Hi.skipUnsignedExpGolomb(),Hi.skipBits(1),Hi.readBoolean()))for(Ga=_n!==3?8:12,xs=0;xs<Ga;xs++)Hi.readBoolean()&&(xs<6?gi(16,Hi):gi(64,Hi));if(Hi.skipUnsignedExpGolomb(),Es=Hi.readUnsignedExpGolomb(),Es===0)Hi.readUnsignedExpGolomb();else if(Es===1)for(Hi.skipBits(1),Hi.skipExpGolomb(),Hi.skipExpGolomb(),ja=Hi.readUnsignedExpGolomb(),xs=0;xs<ja;xs++)Hi.skipExpGolomb();if(Hi.skipUnsignedExpGolomb(),Hi.skipBits(1),qa=Hi.readUnsignedExpGolomb(),za=Hi.readUnsignedExpGolomb(),Ia=Hi.readBits(1),Ia===0&&Hi.skipBits(1),Hi.skipBits(1),Hi.readBoolean()&&(_i=Hi.readUnsignedExpGolomb(),xi=Hi.readUnsignedExpGolomb(),Oi=Hi.readUnsignedExpGolomb(),rr=Hi.readUnsignedExpGolomb()),Hi.readBoolean()&&Hi.readBoolean()){switch(Wa=Hi.readUnsignedByte(),Wa){case 1:Hr=[1,1];break;case 2:Hr=[12,11];break;case 3:Hr=[10,11];break;case 4:Hr=[16,11];break;case 5:Hr=[40,33];break;case 6:Hr=[24,11];break;case 7:Hr=[20,11];break;case 8:Hr=[32,11];break;case 9:Hr=[80,33];break;case 10:Hr=[18,11];break;case 11:Hr=[15,11];break;case 12:Hr=[64,33];break;case 13:Hr=[160,99];break;case 14:Hr=[4,3];break;case 15:Hr=[3,2];break;case 16:Hr=[2,1];break;case 255:{Hr=[Hi.readUnsignedByte()<<8|Hi.readUnsignedByte(),Hi.readUnsignedByte()<<8|Hi.readUnsignedByte()];break}}Hr&&Hr[0]/Hr[1]}return{profileIdc:gr,levelIdc:br,profileCompatibility:qr,width:(qa+1)*16-_i*2-xi*2,height:(2-Ia)*(za+1)*16-Oi*2-rr*2,sarRatio:Hr}}},ki.prototype=new ui;var Ui={H264Stream:ki,NalByteStream:Ii},Zi=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],tr=function(ht,Nt){var Gt=ht[Nt+6]<<21|ht[Nt+7]<<14|ht[Nt+8]<<7|ht[Nt+9],$t=ht[Nt+5],Yt=($t&16)>>4;return Gt=Gt>=0?Gt:0,Yt?Gt+20:Gt+10},cr=function(ht,Nt){return ht.length-Nt<10||ht[Nt]!==73||ht[Nt+1]!==68||ht[Nt+2]!==51?Nt:(Nt+=tr(ht,Nt),cr(ht,Nt))},zi=function(ht){var Nt=cr(ht,0);return ht.length>=Nt+2&&(ht[Nt]&255)===255&&(ht[Nt+1]&240)===240&&(ht[Nt+1]&22)===16},nr=function(ht){return ht[0]<<21|ht[1]<<14|ht[2]<<7|ht[3]},pr=function(ht,Nt,Gt){var $t,Yt="";for($t=Nt;$t<Gt;$t++)Yt+="%"+("00"+ht[$t].toString(16)).slice(-2);return Yt},wr=function(ht,Nt,Gt){return unescape(pr(ht,Nt,Gt))},dr=function(ht,Nt){var Gt=(ht[Nt+5]&224)>>5,$t=ht[Nt+4]<<3,Yt=ht[Nt+3]&6144;return Yt|$t|Gt},Tr=function(ht,Nt){return ht[Nt]===73&&ht[Nt+1]===68&&ht[Nt+2]===51?"timed-metadata":ht[Nt]&!0&&(ht[Nt+1]&240)===240?"audio":null},Or=function(ht){for(var Nt=0;Nt+5<ht.length;){if(ht[Nt]!==255||(ht[Nt+1]&246)!==240){Nt++;continue}return Zi[(ht[Nt+2]&60)>>>2]}return null},Ir=function(ht){var Nt,Gt,$t,Yt;Nt=10,ht[5]&64&&(Nt+=4,Nt+=nr(ht.subarray(10,14)));do{if(Gt=nr(ht.subarray(Nt+4,Nt+8)),Gt<1)return null;if(Yt=String.fromCharCode(ht[Nt],ht[Nt+1],ht[Nt+2],ht[Nt+3]),Yt==="PRIV"){$t=ht.subarray(Nt+10,Nt+Gt+10);for(var Zt=0;Zt<$t.byteLength;Zt++)if($t[Zt]===0){var hi=wr($t,0,Zt);if(hi==="com.apple.streaming.transportStreamTimestamp"){var gi=$t.subarray(Zt+1),yi=(gi[3]&1)<<30|gi[4]<<22|gi[5]<<14|gi[6]<<6|gi[7]>>>2;return yi*=4,yi+=gi[7]&3,yi}break}}Nt+=10,Nt+=Gt}while(Nt<ht.byteLength);return null},Lr={isLikelyAacData:zi,parseId3TagSize:tr,parseAdtsSize:dr,parseType:Tr,parseSampleRate:Or,parseAacTimestamp:Ir},Dr=S,Zr=Lr,Sn;Sn=function(){var ht=new Uint8Array,Nt=0;Sn.prototype.init.call(this),this.setTimestamp=function(Gt){Nt=Gt},this.push=function(Gt){var $t=0,Yt=0,Zt,hi,gi,yi;for(ht.length?(yi=ht.length,ht=new Uint8Array(Gt.byteLength+yi),ht.set(ht.subarray(0,yi)),ht.set(Gt,yi)):ht=Gt;ht.length-Yt>=3;){if(ht[Yt]===73&&ht[Yt+1]===68&&ht[Yt+2]===51){if(ht.length-Yt<10||($t=Zr.parseId3TagSize(ht,Yt),Yt+$t>ht.length))break;hi={type:"timed-metadata",data:ht.subarray(Yt,Yt+$t)},this.trigger("data",hi),Yt+=$t;continue}else if((ht[Yt]&255)===255&&(ht[Yt+1]&240)===240){if(ht.length-Yt<7||($t=Zr.parseAdtsSize(ht,Yt),Yt+$t>ht.length))break;gi={type:"audio",data:ht.subarray(Yt,Yt+$t),pts:Nt,dts:Nt},this.trigger("data",gi),Yt+=$t;continue}Yt++}Zt=ht.length-Yt,Zt>0?ht=ht.subarray(Yt):ht=new Uint8Array},this.reset=function(){ht=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){ht=new Uint8Array,this.trigger("endedtimeline")}},Sn.prototype=new Dr;var zs=Sn,ca=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Da=ca,ha=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],da=ha,ys=S,vs=Mi,_s=Li,ks=Wr,vn=ws,xn=js,bs=Sr,ea=ti,fa=Ui.H264Stream,pa=zs,ma=Lr.isLikelyAacData,ga=Sr.ONE_SECOND_IN_TS,Gs=Da,Ws=da,Fr,In,Rs,ii,Vt=function(ht,Nt){Nt.stream=ht,this.trigger("log",Nt)},Qt=function(ht,Nt){for(var Gt=Object.keys(Nt),$t=0;$t<Gt.length;$t++){var Yt=Gt[$t];Yt==="headOfPipeline"||!Nt[Yt].on||Nt[Yt].on("log",Vt.bind(ht,Yt))}},di=function(ht,Nt){var Gt;if(ht.length!==Nt.length)return!1;for(Gt=0;Gt<ht.length;Gt++)if(ht[Gt]!==Nt[Gt])return!1;return!0},vi=function(ht,Nt,Gt,$t,Yt,Zt){var hi=Gt-Nt,gi=$t-Nt,yi=Yt-Gt;return{start:{dts:ht,pts:ht+hi},end:{dts:ht+gi,pts:ht+yi},prependedContentDuration:Zt,baseMediaDecodeTime:ht}};In=function(ht,Nt){var Gt=[],$t,Yt=0,Zt=0,hi=1/0;Nt=Nt||{},$t=Nt.firstSequenceNumber||0,In.prototype.init.call(this),this.push=function(gi){vn.collectDtsInfo(ht,gi),ht&&Gs.forEach(function(yi){ht[yi]=gi[yi]}),Gt.push(gi)},this.setEarliestDts=function(gi){Yt=gi},this.setVideoBaseMediaDecodeTime=function(gi){hi=gi},this.setAudioAppendStart=function(gi){Zt=gi},this.flush=function(){var gi,yi,_i,xi,Oi,rr,Hi;if(Gt.length===0){this.trigger("done","AudioSegmentStream");return}gi=ks.trimAdtsFramesByEarliestDts(Gt,ht,Yt),ht.baseMediaDecodeTime=vn.calculateTrackBaseMediaDecodeTime(ht,Nt.keepOriginalTimestamps),Hi=ks.prefixWithSilence(ht,gi,Zt,hi),ht.samples=ks.generateSampleTable(gi),_i=vs.mdat(ks.concatenateFrameData(gi)),Gt=[],yi=vs.moof($t,[ht]),xi=new Uint8Array(yi.byteLength+_i.byteLength),$t++,xi.set(yi),xi.set(_i,yi.byteLength),vn.clearDtsInfo(ht),Oi=Math.ceil(ga*1024/ht.samplerate),gi.length&&(rr=gi.length*Oi,this.trigger("segmentTimingInfo",vi(bs.audioTsToVideoTs(ht.baseMediaDecodeTime,ht.samplerate),gi[0].dts,gi[0].pts,gi[0].dts+rr,gi[0].pts+rr,Hi||0)),this.trigger("timingInfo",{start:gi[0].pts,end:gi[0].pts+rr})),this.trigger("data",{track:ht,boxes:xi}),this.trigger("done","AudioSegmentStream")},this.reset=function(){vn.clearDtsInfo(ht),Gt=[],this.trigger("reset")}},In.prototype=new ys,Fr=function(ht,Nt){var Gt,$t=[],Yt=[],Zt,hi;Nt=Nt||{},Gt=Nt.firstSequenceNumber||0,Fr.prototype.init.call(this),delete ht.minPTS,this.gopCache_=[],this.push=function(gi){vn.collectDtsInfo(ht,gi),gi.nalUnitType==="seq_parameter_set_rbsp"&&!Zt&&(Zt=gi.config,ht.sps=[gi.data],Ws.forEach(function(yi){ht[yi]=Zt[yi]},this)),gi.nalUnitType==="pic_parameter_set_rbsp"&&!hi&&(hi=gi.data,ht.pps=[gi.data]),$t.push(gi)},this.flush=function(){for(var gi,yi,_i,xi,Oi,rr,Hi=0,gr,br;$t.length&&$t[0].nalUnitType!=="access_unit_delimiter_rbsp";)$t.shift();if($t.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(gi=_s.groupNalsIntoFrames($t),_i=_s.groupFramesIntoGops(gi),_i[0][0].keyFrame||(yi=this.getGopForFusion_($t[0],ht),yi?(Hi=yi.duration,_i.unshift(yi),_i.byteLength+=yi.byteLength,_i.nalCount+=yi.nalCount,_i.pts=yi.pts,_i.dts=yi.dts,_i.duration+=yi.duration):_i=_s.extendFirstKeyFrame(_i)),Yt.length){var qr;if(Nt.alignGopsAtEnd?qr=this.alignGopsAtEnd_(_i):qr=this.alignGopsAtStart_(_i),!qr){this.gopCache_.unshift({gop:_i.pop(),pps:ht.pps,sps:ht.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),$t=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}vn.clearDtsInfo(ht),_i=qr}vn.collectDtsInfo(ht,_i),ht.samples=_s.generateSampleTable(_i),Oi=vs.mdat(_s.concatenateNalData(_i)),ht.baseMediaDecodeTime=vn.calculateTrackBaseMediaDecodeTime(ht,Nt.keepOriginalTimestamps),this.trigger("processedGopsInfo",_i.map(function(_n){return{pts:_n.pts,dts:_n.dts,byteLength:_n.byteLength}})),gr=_i[0],br=_i[_i.length-1],this.trigger("segmentTimingInfo",vi(ht.baseMediaDecodeTime,gr.dts,gr.pts,br.dts+br.duration,br.pts+br.duration,Hi)),this.trigger("timingInfo",{start:_i[0].pts,end:_i[_i.length-1].pts+_i[_i.length-1].duration}),this.gopCache_.unshift({gop:_i.pop(),pps:ht.pps,sps:ht.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),$t=[],this.trigger("baseMediaDecodeTime",ht.baseMediaDecodeTime),this.trigger("timelineStartInfo",ht.timelineStartInfo),xi=vs.moof(Gt,[ht]),rr=new Uint8Array(xi.byteLength+Oi.byteLength),Gt++,rr.set(xi),rr.set(Oi,xi.byteLength),this.trigger("data",{track:ht,boxes:rr}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),$t=[],this.gopCache_.length=0,Yt.length=0,this.trigger("reset")},this.resetStream_=function(){vn.clearDtsInfo(ht),Zt=void 0,hi=void 0},this.getGopForFusion_=function(gi){var yi=45e3,_i=1e4,xi=1/0,Oi,rr,Hi,gr,br;for(br=0;br<this.gopCache_.length;br++)gr=this.gopCache_[br],Hi=gr.gop,!(!(ht.pps&&di(ht.pps[0],gr.pps[0]))||!(ht.sps&&di(ht.sps[0],gr.sps[0])))&&(Hi.dts<ht.timelineStartInfo.dts||(Oi=gi.dts-Hi.dts-Hi.duration,Oi>=-_i&&Oi<=yi&&(!rr||xi>Oi)&&(rr=gr,xi=Oi)));return rr?rr.gop:null},this.alignGopsAtStart_=function(gi){var yi,_i,xi,Oi,rr,Hi,gr,br;for(rr=gi.byteLength,Hi=gi.nalCount,gr=gi.duration,yi=_i=0;yi<Yt.length&&_i<gi.length&&(xi=Yt[yi],Oi=gi[_i],xi.pts!==Oi.pts);){if(Oi.pts>xi.pts){yi++;continue}_i++,rr-=Oi.byteLength,Hi-=Oi.nalCount,gr-=Oi.duration}return _i===0?gi:_i===gi.length?null:(br=gi.slice(_i),br.byteLength=rr,br.duration=gr,br.nalCount=Hi,br.pts=br[0].pts,br.dts=br[0].dts,br)},this.alignGopsAtEnd_=function(gi){var yi,_i,xi,Oi,rr,Hi;for(yi=Yt.length-1,_i=gi.length-1,rr=null,Hi=!1;yi>=0&&_i>=0;){if(xi=Yt[yi],Oi=gi[_i],xi.pts===Oi.pts){Hi=!0;break}if(xi.pts>Oi.pts){yi--;continue}yi===Yt.length-1&&(rr=_i),_i--}if(!Hi&&rr===null)return null;var gr;if(Hi?gr=_i:gr=rr,gr===0)return gi;var br=gi.slice(gr),qr=br.reduce(function(_n,Es){return _n.byteLength+=Es.byteLength,_n.duration+=Es.duration,_n.nalCount+=Es.nalCount,_n},{byteLength:0,duration:0,nalCount:0});return br.byteLength=qr.byteLength,br.duration=qr.duration,br.nalCount=qr.nalCount,br.pts=br[0].pts,br.dts=br[0].dts,br},this.alignGopsWith=function(gi){Yt=gi}},Fr.prototype=new ys,ii=function(ht,Nt){this.numberOfTracks=0,this.metadataStream=Nt,ht=ht||{},typeof ht.remux<"u"?this.remuxTracks=!!ht.remux:this.remuxTracks=!0,typeof ht.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=ht.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ii.prototype.init.call(this),this.push=function(Gt){if(Gt.content||Gt.text)return this.pendingCaptions.push(Gt);if(Gt.frames)return this.pendingMetadata.push(Gt);this.pendingTracks.push(Gt.track),this.pendingBytes+=Gt.boxes.byteLength,Gt.track.type==="video"&&(this.videoTrack=Gt.track,this.pendingBoxes.push(Gt.boxes)),Gt.track.type==="audio"&&(this.audioTrack=Gt.track,this.pendingBoxes.unshift(Gt.boxes))}},ii.prototype=new ys,ii.prototype.flush=function(ht){var Nt=0,Gt={captions:[],captionStreams:{},metadata:[],info:{}},$t,Yt,Zt,hi=0,gi;if(this.pendingTracks.length<this.numberOfTracks){if(ht!=="VideoSegmentStream"&&ht!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(hi=this.videoTrack.timelineStartInfo.pts,Ws.forEach(function(yi){Gt.info[yi]=this.videoTrack[yi]},this)):this.audioTrack&&(hi=this.audioTrack.timelineStartInfo.pts,Gs.forEach(function(yi){Gt.info[yi]=this.audioTrack[yi]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?Gt.type=this.pendingTracks[0].type:Gt.type="combined",this.emittedTracks+=this.pendingTracks.length,Zt=vs.initSegment(this.pendingTracks),Gt.initSegment=new Uint8Array(Zt.byteLength),Gt.initSegment.set(Zt),Gt.data=new Uint8Array(this.pendingBytes),gi=0;gi<this.pendingBoxes.length;gi++)Gt.data.set(this.pendingBoxes[gi],Nt),Nt+=this.pendingBoxes[gi].byteLength;for(gi=0;gi<this.pendingCaptions.length;gi++)$t=this.pendingCaptions[gi],$t.startTime=bs.metadataTsToSeconds($t.startPts,hi,this.keepOriginalTimestamps),$t.endTime=bs.metadataTsToSeconds($t.endPts,hi,this.keepOriginalTimestamps),Gt.captionStreams[$t.stream]=!0,Gt.captions.push($t);for(gi=0;gi<this.pendingMetadata.length;gi++)Yt=this.pendingMetadata[gi],Yt.cueTime=bs.metadataTsToSeconds(Yt.pts,hi,this.keepOriginalTimestamps),Gt.metadata.push(Yt);for(Gt.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",Gt),gi=0;gi<Gt.captions.length;gi++)$t=Gt.captions[gi],this.trigger("caption",$t);for(gi=0;gi<Gt.metadata.length;gi++)Yt=Gt.metadata[gi],this.trigger("id3Frame",Yt)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ii.prototype.setRemux=function(ht){this.remuxTracks=ht},Rs=function(ht){var Nt=this,Gt=!0,$t,Yt;Rs.prototype.init.call(this),ht=ht||{},this.baseMediaDecodeTime=ht.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var Zt={};this.transmuxPipeline_=Zt,Zt.type="aac",Zt.metadataStream=new xn.MetadataStream,Zt.aacStream=new pa,Zt.audioTimestampRolloverStream=new xn.TimestampRolloverStream("audio"),Zt.timedMetadataTimestampRolloverStream=new xn.TimestampRolloverStream("timed-metadata"),Zt.adtsStream=new ea,Zt.coalesceStream=new ii(ht,Zt.metadataStream),Zt.headOfPipeline=Zt.aacStream,Zt.aacStream.pipe(Zt.audioTimestampRolloverStream).pipe(Zt.adtsStream),Zt.aacStream.pipe(Zt.timedMetadataTimestampRolloverStream).pipe(Zt.metadataStream).pipe(Zt.coalesceStream),Zt.metadataStream.on("timestamp",function(hi){Zt.aacStream.setTimestamp(hi.timeStamp)}),Zt.aacStream.on("data",function(hi){hi.type!=="timed-metadata"&&hi.type!=="audio"||Zt.audioSegmentStream||(Yt=Yt||{timelineStartInfo:{baseMediaDecodeTime:Nt.baseMediaDecodeTime},codec:"adts",type:"audio"},Zt.coalesceStream.numberOfTracks++,Zt.audioSegmentStream=new In(Yt,ht),Zt.audioSegmentStream.on("log",Nt.getLogTrigger_("audioSegmentStream")),Zt.audioSegmentStream.on("timingInfo",Nt.trigger.bind(Nt,"audioTimingInfo")),Zt.adtsStream.pipe(Zt.audioSegmentStream).pipe(Zt.coalesceStream),Nt.trigger("trackinfo",{hasAudio:!!Yt,hasVideo:!!$t}))}),Zt.coalesceStream.on("data",this.trigger.bind(this,"data")),Zt.coalesceStream.on("done",this.trigger.bind(this,"done")),Qt(this,Zt)},this.setupTsPipeline=function(){var Zt={};this.transmuxPipeline_=Zt,Zt.type="ts",Zt.metadataStream=new xn.MetadataStream,Zt.packetStream=new xn.TransportPacketStream,Zt.parseStream=new xn.TransportParseStream,Zt.elementaryStream=new xn.ElementaryStream,Zt.timestampRolloverStream=new xn.TimestampRolloverStream,Zt.adtsStream=new ea,Zt.h264Stream=new fa,Zt.captionStream=new xn.CaptionStream(ht),Zt.coalesceStream=new ii(ht,Zt.metadataStream),Zt.headOfPipeline=Zt.packetStream,Zt.packetStream.pipe(Zt.parseStream).pipe(Zt.elementaryStream).pipe(Zt.timestampRolloverStream),Zt.timestampRolloverStream.pipe(Zt.h264Stream),Zt.timestampRolloverStream.pipe(Zt.adtsStream),Zt.timestampRolloverStream.pipe(Zt.metadataStream).pipe(Zt.coalesceStream),Zt.h264Stream.pipe(Zt.captionStream).pipe(Zt.coalesceStream),Zt.elementaryStream.on("data",function(hi){var gi;if(hi.type==="metadata"){for(gi=hi.tracks.length;gi--;)!$t&&hi.tracks[gi].type==="video"?($t=hi.tracks[gi],$t.timelineStartInfo.baseMediaDecodeTime=Nt.baseMediaDecodeTime):!Yt&&hi.tracks[gi].type==="audio"&&(Yt=hi.tracks[gi],Yt.timelineStartInfo.baseMediaDecodeTime=Nt.baseMediaDecodeTime);$t&&!Zt.videoSegmentStream&&(Zt.coalesceStream.numberOfTracks++,Zt.videoSegmentStream=new Fr($t,ht),Zt.videoSegmentStream.on("log",Nt.getLogTrigger_("videoSegmentStream")),Zt.videoSegmentStream.on("timelineStartInfo",function(yi){Yt&&!ht.keepOriginalTimestamps&&(Yt.timelineStartInfo=yi,Zt.audioSegmentStream.setEarliestDts(yi.dts-Nt.baseMediaDecodeTime))}),Zt.videoSegmentStream.on("processedGopsInfo",Nt.trigger.bind(Nt,"gopInfo")),Zt.videoSegmentStream.on("segmentTimingInfo",Nt.trigger.bind(Nt,"videoSegmentTimingInfo")),Zt.videoSegmentStream.on("baseMediaDecodeTime",function(yi){Yt&&Zt.audioSegmentStream.setVideoBaseMediaDecodeTime(yi)}),Zt.videoSegmentStream.on("timingInfo",Nt.trigger.bind(Nt,"videoTimingInfo")),Zt.h264Stream.pipe(Zt.videoSegmentStream).pipe(Zt.coalesceStream)),Yt&&!Zt.audioSegmentStream&&(Zt.coalesceStream.numberOfTracks++,Zt.audioSegmentStream=new In(Yt,ht),Zt.audioSegmentStream.on("log",Nt.getLogTrigger_("audioSegmentStream")),Zt.audioSegmentStream.on("timingInfo",Nt.trigger.bind(Nt,"audioTimingInfo")),Zt.audioSegmentStream.on("segmentTimingInfo",Nt.trigger.bind(Nt,"audioSegmentTimingInfo")),Zt.adtsStream.pipe(Zt.audioSegmentStream).pipe(Zt.coalesceStream)),Nt.trigger("trackinfo",{hasAudio:!!Yt,hasVideo:!!$t})}}),Zt.coalesceStream.on("data",this.trigger.bind(this,"data")),Zt.coalesceStream.on("id3Frame",function(hi){hi.dispatchType=Zt.metadataStream.dispatchType,Nt.trigger("id3Frame",hi)}),Zt.coalesceStream.on("caption",this.trigger.bind(this,"caption")),Zt.coalesceStream.on("done",this.trigger.bind(this,"done")),Qt(this,Zt)},this.setBaseMediaDecodeTime=function(Zt){var hi=this.transmuxPipeline_;ht.keepOriginalTimestamps||(this.baseMediaDecodeTime=Zt),Yt&&(Yt.timelineStartInfo.dts=void 0,Yt.timelineStartInfo.pts=void 0,vn.clearDtsInfo(Yt),hi.audioTimestampRolloverStream&&hi.audioTimestampRolloverStream.discontinuity()),$t&&(hi.videoSegmentStream&&(hi.videoSegmentStream.gopCache_=[]),$t.timelineStartInfo.dts=void 0,$t.timelineStartInfo.pts=void 0,vn.clearDtsInfo($t),hi.captionStream.reset()),hi.timestampRolloverStream&&hi.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(Zt){Yt&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(Zt)},this.setRemux=function(Zt){var hi=this.transmuxPipeline_;ht.remux=Zt,hi&&hi.coalesceStream&&hi.coalesceStream.setRemux(Zt)},this.alignGopsWith=function(Zt){$t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(Zt)},this.getLogTrigger_=function(Zt){var hi=this;return function(gi){gi.stream=Zt,hi.trigger("log",gi)}},this.push=function(Zt){if(Gt){var hi=ma(Zt);hi&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!hi&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),Gt=!1}this.transmuxPipeline_.headOfPipeline.push(Zt)},this.flush=function(){Gt=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Rs.prototype=new ys;var $i={Transmuxer:Rs,VideoSegmentStream:Fr,AudioSegmentStream:In,AUDIO_PROPERTIES:Gs,VIDEO_PROPERTIES:Ws,generateSegmentTimingInfo:vi},er=function(ht){return ht>>>0},hr=function(ht){return("00"+ht.toString(16)).slice(-2)},_r={toUnsigned:er,toHexString:hr},Ar=function(ht){var Nt="";return Nt+=String.fromCharCode(ht[0]),Nt+=String.fromCharCode(ht[1]),Nt+=String.fromCharCode(ht[2]),Nt+=String.fromCharCode(ht[3]),Nt},Pr=Ar,Br=_r.toUnsigned,Os=Pr,ta=function(ht,Nt){var Gt=[],$t,Yt,Zt,hi,gi;if(!Nt.length)return null;for($t=0;$t<ht.byteLength;)Yt=Br(ht[$t]<<24|ht[$t+1]<<16|ht[$t+2]<<8|ht[$t+3]),Zt=Os(ht.subarray($t+4,$t+8)),hi=Yt>1?$t+Yt:ht.byteLength,Zt===Nt[0]&&(Nt.length===1?Gt.push(ht.subarray($t+8,hi)):(gi=ta(ht.subarray($t+8,hi),Nt.slice(1)),gi.length&&(Gt=Gt.concat(gi)))),$t=hi;return Gt},Ks=ta,ya=_r.toUnsigned,ia=C.getUint64,va=function(ht){var Nt={version:ht[0],flags:new Uint8Array(ht.subarray(1,4))};return Nt.version===1?Nt.baseMediaDecodeTime=ia(ht.subarray(4)):Nt.baseMediaDecodeTime=ya(ht[4]<<24|ht[5]<<16|ht[6]<<8|ht[7]),Nt},Xs=va,_a=function(ht){return{isLeading:(ht[0]&12)>>>2,dependsOn:ht[0]&3,isDependedOn:(ht[1]&192)>>>6,hasRedundancy:(ht[1]&48)>>>4,paddingValue:(ht[1]&14)>>>1,isNonSyncSample:ht[1]&1,degradationPriority:ht[2]<<8|ht[3]}},ba=_a,Ys=ba,ra=function(ht){var Nt={version:ht[0],flags:new Uint8Array(ht.subarray(1,4)),samples:[]},Gt=new DataView(ht.buffer,ht.byteOffset,ht.byteLength),$t=Nt.flags[2]&1,Yt=Nt.flags[2]&4,Zt=Nt.flags[1]&1,hi=Nt.flags[1]&2,gi=Nt.flags[1]&4,yi=Nt.flags[1]&8,_i=Gt.getUint32(4),xi=8,Oi;for($t&&(Nt.dataOffset=Gt.getInt32(xi),xi+=4),Yt&&_i&&(Oi={flags:Ys(ht.subarray(xi,xi+4))},xi+=4,Zt&&(Oi.duration=Gt.getUint32(xi),xi+=4),hi&&(Oi.size=Gt.getUint32(xi),xi+=4),yi&&(Nt.version===1?Oi.compositionTimeOffset=Gt.getInt32(xi):Oi.compositionTimeOffset=Gt.getUint32(xi),xi+=4),Nt.samples.push(Oi),_i--);_i--;)Oi={},Zt&&(Oi.duration=Gt.getUint32(xi),xi+=4),hi&&(Oi.size=Gt.getUint32(xi),xi+=4),gi&&(Oi.flags=Ys(ht.subarray(xi,xi+4)),xi+=4),yi&&(Nt.version===1?Oi.compositionTimeOffset=Gt.getInt32(xi):Oi.compositionTimeOffset=Gt.getUint32(xi),xi+=4),Nt.samples.push(Oi);return Nt},Qs=ra,Js=function(ht){var Nt=new DataView(ht.buffer,ht.byteOffset,ht.byteLength),Gt={version:ht[0],flags:new Uint8Array(ht.subarray(1,4)),trackId:Nt.getUint32(4)},$t=Gt.flags[2]&1,Yt=Gt.flags[2]&2,Zt=Gt.flags[2]&8,hi=Gt.flags[2]&16,gi=Gt.flags[2]&32,yi=Gt.flags[0]&65536,_i=Gt.flags[0]&131072,xi;return xi=8,$t&&(xi+=4,Gt.baseDataOffset=Nt.getUint32(12),xi+=4),Yt&&(Gt.sampleDescriptionIndex=Nt.getUint32(xi),xi+=4),Zt&&(Gt.defaultSampleDuration=Nt.getUint32(xi),xi+=4),hi&&(Gt.defaultSampleSize=Nt.getUint32(xi),xi+=4),gi&&(Gt.defaultSampleFlags=Nt.getUint32(xi)),yi&&(Gt.durationIsEmpty=!0),!$t&&_i&&(Gt.baseDataOffsetIsMoof=!0),Gt},Ms=Js,ts;typeof window<"u"?ts=window:typeof o<"u"?ts=o:typeof self<"u"?ts=self:ts={};var na=ts,Ta=Gn.discardEmulationPreventionBytes,Sa=us.CaptionStream,Ts=Ks,sa=Xs,Ka=Qs,Xa=Ms,ka=na,Ya=function(ht,Nt){for(var Gt=ht,$t=0;$t<Nt.length;$t++){var Yt=Nt[$t];if(Gt<Yt.size)return Yt;Gt-=Yt.size}return null},Qa=function(ht,Nt,Gt){var $t=new DataView(ht.buffer,ht.byteOffset,ht.byteLength),Yt={logs:[],seiNals:[]},Zt,hi,gi,yi;for(hi=0;hi+4<ht.length;hi+=gi)if(gi=$t.getUint32(hi),hi+=4,!(gi<=0))switch(ht[hi]&31){case 6:var _i=ht.subarray(hi+1,hi+1+gi),xi=Ya(hi,Nt);if(Zt={nalUnitType:"sei_rbsp",size:gi,data:_i,escapedRBSP:Ta(_i),trackId:Gt},xi)Zt.pts=xi.pts,Zt.dts=xi.dts,yi=xi;else if(yi)Zt.pts=yi.pts,Zt.dts=yi.dts;else{Yt.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+hi+" for trackId "+Gt+". See mux.js#223."});break}Yt.seiNals.push(Zt);break}return Yt},Ja=function(ht,Nt,Gt){var $t=Nt,Yt=Gt.defaultSampleDuration||0,Zt=Gt.defaultSampleSize||0,hi=Gt.trackId,gi=[];return ht.forEach(function(yi){var _i=Ka(yi),xi=_i.samples;xi.forEach(function(Oi){Oi.duration===void 0&&(Oi.duration=Yt),Oi.size===void 0&&(Oi.size=Zt),Oi.trackId=hi,Oi.dts=$t,Oi.compositionTimeOffset===void 0&&(Oi.compositionTimeOffset=0),typeof $t=="bigint"?(Oi.pts=$t+ka.BigInt(Oi.compositionTimeOffset),$t+=ka.BigInt(Oi.duration)):(Oi.pts=$t+Oi.compositionTimeOffset,$t+=Oi.duration)}),gi=gi.concat(xi)}),gi},Za=function(ht,Nt){var Gt=Ts(ht,["moof","traf"]),$t=Ts(ht,["mdat"]),Yt={},Zt=[];return $t.forEach(function(hi,gi){var yi=Gt[gi];Zt.push({mdat:hi,traf:yi})}),Zt.forEach(function(hi){var gi=hi.mdat,yi=hi.traf,_i=Ts(yi,["tfhd"]),xi=Xa(_i[0]),Oi=xi.trackId,rr=Ts(yi,["tfdt"]),Hi=rr.length>0?sa(rr[0]).baseMediaDecodeTime:0,gr=Ts(yi,["trun"]),br,qr;Nt===Oi&&gr.length>0&&(br=Ja(gr,Hi,xi),qr=Qa(gi,br,Oi),Yt[Oi]||(Yt[Oi]={seiNals:[],logs:[]}),Yt[Oi].seiNals=Yt[Oi].seiNals.concat(qr.seiNals),Yt[Oi].logs=Yt[Oi].logs.concat(qr.logs))}),Yt},eo=function(ht,Nt,Gt){var $t;if(Nt===null)return null;$t=Za(ht,Nt);var Yt=$t[Nt]||{};return{seiNals:Yt.seiNals,logs:Yt.logs,timescale:Gt}},to=function(){var ht=!1,Nt,Gt,$t,Yt,Zt,hi;this.isInitialized=function(){return ht},this.init=function(gi){Nt=new Sa,ht=!0,hi=gi?gi.isPartial:!1,Nt.on("data",function(yi){yi.startTime=yi.startPts/Yt,yi.endTime=yi.endPts/Yt,Zt.captions.push(yi),Zt.captionStreams[yi.stream]=!0}),Nt.on("log",function(yi){Zt.logs.push(yi)})},this.isNewInit=function(gi,yi){return gi&&gi.length===0||yi&&typeof yi=="object"&&Object.keys(yi).length===0?!1:$t!==gi[0]||Yt!==yi[$t]},this.parse=function(gi,yi,_i){var xi;if(this.isInitialized()){if(!yi||!_i)return null;if(this.isNewInit(yi,_i))$t=yi[0],Yt=_i[$t];else if($t===null||!Yt)return Gt.push(gi),null}else return null;for(;Gt.length>0;){var Oi=Gt.shift();this.parse(Oi,yi,_i)}return xi=eo(gi,$t,Yt),xi&&xi.logs&&(Zt.logs=Zt.logs.concat(xi.logs)),xi===null||!xi.seiNals?Zt.logs.length?{logs:Zt.logs,captions:[],captionStreams:[]}:null:(this.pushNals(xi.seiNals),this.flushStream(),Zt)},this.pushNals=function(gi){if(!this.isInitialized()||!gi||gi.length===0)return null;gi.forEach(function(yi){Nt.push(yi)})},this.flushStream=function(){if(!this.isInitialized())return null;hi?Nt.partialFlush():Nt.flush()},this.clearParsedCaptions=function(){Zt.captions=[],Zt.captionStreams={},Zt.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;Nt.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){Gt=[],$t=null,Yt=null,Zt?this.clearParsedCaptions():Zt={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},io=to,ro=function(ht){for(var Nt=0,Gt=String.fromCharCode(ht[Nt]),$t="";Gt!=="\0";)$t+=Gt,Nt++,Gt=String.fromCharCode(ht[Nt]);return $t+=Gt,$t},no={uint8ToCString:ro},aa=no.uint8ToCString,so=C.getUint64,ao=function(ht){var Nt=4,Gt=ht[0],$t,Yt,Zt,hi,gi,yi,_i,xi;if(Gt===0){$t=aa(ht.subarray(Nt)),Nt+=$t.length,Yt=aa(ht.subarray(Nt)),Nt+=Yt.length;var Oi=new DataView(ht.buffer);Zt=Oi.getUint32(Nt),Nt+=4,gi=Oi.getUint32(Nt),Nt+=4,yi=Oi.getUint32(Nt),Nt+=4,_i=Oi.getUint32(Nt),Nt+=4}else if(Gt===1){var Oi=new DataView(ht.buffer);Zt=Oi.getUint32(Nt),Nt+=4,hi=so(ht.subarray(Nt)),Nt+=8,yi=Oi.getUint32(Nt),Nt+=4,_i=Oi.getUint32(Nt),Nt+=4,$t=aa(ht.subarray(Nt)),Nt+=$t.length,Yt=aa(ht.subarray(Nt)),Nt+=Yt.length}xi=new Uint8Array(ht.subarray(Nt,ht.byteLength));var rr={scheme_id_uri:$t,value:Yt,timescale:Zt||1,presentation_time:hi,presentation_time_delta:gi,event_duration:yi,id:_i,message_data:xi};return lo(Gt,rr)?rr:void 0},oo=function(ht,Nt,Gt,$t){return ht||ht===0?ht/Nt:$t+Gt/Nt},lo=function(ht,Nt){var Gt=Nt.scheme_id_uri!=="\0",$t=ht===0&&Ra(Nt.presentation_time_delta)&&Gt,Yt=ht===1&&Ra(Nt.presentation_time)&&Gt;return!(ht>1)&&$t||Yt},Ra=function(ht){return ht!==void 0||ht!==null},uo={parseEmsgBox:ao,scaleTime:oo},oa=_r.toUnsigned,Zs=_r.toHexString,Vr=Ks,Ls=Pr,Ea=uo,co=Ms,ho=Qs,fo=Xs,po=C.getUint64,Oa,Ma,La,Na,Fa,xa,$a,Ca=na,mo=ps.parseId3Frames;Oa=function(ht){var Nt={},Gt=Vr(ht,["moov","trak"]);return Gt.reduce(function($t,Yt){var Zt,hi,gi,yi,_i;return Zt=Vr(Yt,["tkhd"])[0],!Zt||(hi=Zt[0],gi=hi===0?12:20,yi=oa(Zt[gi]<<24|Zt[gi+1]<<16|Zt[gi+2]<<8|Zt[gi+3]),_i=Vr(Yt,["mdia","mdhd"])[0],!_i)?null:(hi=_i[0],gi=hi===0?12:20,$t[yi]=oa(_i[gi]<<24|_i[gi+1]<<16|_i[gi+2]<<8|_i[gi+3]),$t)},Nt)},Ma=function(ht,Nt){var Gt;Gt=Vr(Nt,["moof","traf"]);var $t=Gt.reduce(function(Yt,Zt){var hi=Vr(Zt,["tfhd"])[0],gi=oa(hi[4]<<24|hi[5]<<16|hi[6]<<8|hi[7]),yi=ht[gi]||9e4,_i=Vr(Zt,["tfdt"])[0],xi=new DataView(_i.buffer,_i.byteOffset,_i.byteLength),Oi;_i[0]===1?Oi=po(_i.subarray(4,12)):Oi=xi.getUint32(4);let rr;return typeof Oi=="bigint"?rr=Oi/Ca.BigInt(yi):typeof Oi=="number"&&!isNaN(Oi)&&(rr=Oi/yi),rr<Number.MAX_SAFE_INTEGER&&(rr=Number(rr)),rr<Yt&&(Yt=rr),Yt},1/0);return typeof $t=="bigint"||isFinite($t)?$t:0},La=function(ht,Nt){var Gt=Vr(Nt,["moof","traf"]),$t=0,Yt=0,Zt;if(Gt&&Gt.length){var hi=Vr(Gt[0],["tfhd"])[0],gi=Vr(Gt[0],["trun"])[0],yi=Vr(Gt[0],["tfdt"])[0];if(hi){var _i=co(hi);Zt=_i.trackId}if(yi){var xi=fo(yi);$t=xi.baseMediaDecodeTime}if(gi){var Oi=ho(gi);Oi.samples&&Oi.samples.length&&(Yt=Oi.samples[0].compositionTimeOffset||0)}}var rr=ht[Zt]||9e4;typeof $t=="bigint"&&(Yt=Ca.BigInt(Yt),rr=Ca.BigInt(rr));var Hi=($t+Yt)/rr;return typeof Hi=="bigint"&&Hi<Number.MAX_SAFE_INTEGER&&(Hi=Number(Hi)),Hi},Na=function(ht){var Nt=Vr(ht,["moov","trak"]),Gt=[];return Nt.forEach(function($t){var Yt=Vr($t,["mdia","hdlr"]),Zt=Vr($t,["tkhd"]);Yt.forEach(function(hi,gi){var yi=Ls(hi.subarray(8,12)),_i=Zt[gi],xi,Oi,rr;yi==="vide"&&(xi=new DataView(_i.buffer,_i.byteOffset,_i.byteLength),Oi=xi.getUint8(0),rr=Oi===0?xi.getUint32(12):xi.getUint32(20),Gt.push(rr))})}),Gt},xa=function(ht){var Nt=ht[0],Gt=Nt===0?12:20;return oa(ht[Gt]<<24|ht[Gt+1]<<16|ht[Gt+2]<<8|ht[Gt+3])},Fa=function(ht){var Nt=Vr(ht,["moov","trak"]),Gt=[];return Nt.forEach(function($t){var Yt={},Zt=Vr($t,["tkhd"])[0],hi,gi;Zt&&(hi=new DataView(Zt.buffer,Zt.byteOffset,Zt.byteLength),gi=hi.getUint8(0),Yt.id=gi===0?hi.getUint32(12):hi.getUint32(20));var yi=Vr($t,["mdia","hdlr"])[0];if(yi){var _i=Ls(yi.subarray(8,12));_i==="vide"?Yt.type="video":_i==="soun"?Yt.type="audio":Yt.type=_i}var xi=Vr($t,["mdia","minf","stbl","stsd"])[0];if(xi){var Oi=xi.subarray(8);Yt.codec=Ls(Oi.subarray(4,8));var rr=Vr(Oi,[Yt.codec])[0],Hi,gr;rr&&(/^[asm]vc[1-9]$/i.test(Yt.codec)?(Hi=rr.subarray(78),gr=Ls(Hi.subarray(4,8)),gr==="avcC"&&Hi.length>11?(Yt.codec+=".",Yt.codec+=Zs(Hi[9]),Yt.codec+=Zs(Hi[10]),Yt.codec+=Zs(Hi[11])):Yt.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(Yt.codec)?(Hi=rr.subarray(28),gr=Ls(Hi.subarray(4,8)),gr==="esds"&&Hi.length>20&&Hi[19]!==0?(Yt.codec+="."+Zs(Hi[19]),Yt.codec+="."+Zs(Hi[20]>>>2&63).replace(/^0/,"")):Yt.codec="mp4a.40.2"):Yt.codec=Yt.codec.toLowerCase())}var br=Vr($t,["mdia","mdhd"])[0];br&&(Yt.timescale=xa(br)),Gt.push(Yt)}),Gt},$a=function(ht,Nt=0){var Gt=Vr(ht,["emsg"]);return Gt.map($t=>{var Yt=Ea.parseEmsgBox(new Uint8Array($t)),Zt=mo(Yt.message_data);return{cueTime:Ea.scaleTime(Yt.presentation_time,Yt.timescale,Yt.presentation_time_delta,Nt),duration:Ea.scaleTime(Yt.event_duration,Yt.timescale),frames:Zt}})};var wa={findBox:Vr,parseType:Ls,timescale:Oa,startTime:Ma,compositionStartTime:La,videoTrackIds:Na,tracks:Fa,getTimescaleFromMediaHeader:xa,getEmsgID3:$a},Aa=Xn,Ba=function(ht){var Nt=ht[1]&31;return Nt<<=8,Nt|=ht[2],Nt},la=function(ht){return!!(ht[1]&64)},ua=function(ht){var Nt=0;return(ht[3]&48)>>>4>1&&(Nt+=ht[4]+1),Nt},go=function(ht,Nt){var Gt=Ba(ht);return Gt===0?"pat":Gt===Nt?"pmt":Nt?"pes":null},yo=function(ht){var Nt=la(ht),Gt=4+ua(ht);return Nt&&(Gt+=ht[Gt]+1),(ht[Gt+10]&31)<<8|ht[Gt+11]},vo=function(ht){var Nt={},Gt=la(ht),$t=4+ua(ht);if(Gt&&($t+=ht[$t]+1),!!(ht[$t+5]&1)){var Yt,Zt,hi;Yt=(ht[$t+1]&15)<<8|ht[$t+2],Zt=3+Yt-4,hi=(ht[$t+10]&15)<<8|ht[$t+11];for(var gi=12+hi;gi<Zt;){var yi=$t+gi;Nt[(ht[yi+1]&31)<<8|ht[yi+2]]=ht[yi],gi+=((ht[yi+3]&15)<<8|ht[yi+4])+5}return Nt}},_o=function(ht,Nt){var Gt=Ba(ht),$t=Nt[Gt];switch($t){case Aa.H264_STREAM_TYPE:return"video";case Aa.ADTS_STREAM_TYPE:return"audio";case Aa.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},bo=function(ht){var Nt=la(ht);if(!Nt)return null;var Gt=4+ua(ht);if(Gt>=ht.byteLength)return null;var $t=null,Yt;return Yt=ht[Gt+7],Yt&192&&($t={},$t.pts=(ht[Gt+9]&14)<<27|(ht[Gt+10]&255)<<20|(ht[Gt+11]&254)<<12|(ht[Gt+12]&255)<<5|(ht[Gt+13]&254)>>>3,$t.pts*=4,$t.pts+=(ht[Gt+13]&6)>>>1,$t.dts=$t.pts,Yt&64&&($t.dts=(ht[Gt+14]&14)<<27|(ht[Gt+15]&255)<<20|(ht[Gt+16]&254)<<12|(ht[Gt+17]&255)<<5|(ht[Gt+18]&254)>>>3,$t.dts*=4,$t.dts+=(ht[Gt+18]&6)>>>1)),$t},Pa=function(ht){switch(ht){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},To=function(ht){for(var Nt=4+ua(ht),Gt=ht.subarray(Nt),$t=0,Yt=0,Zt=!1,hi;Yt<Gt.byteLength-3;Yt++)if(Gt[Yt+2]===1){$t=Yt+5;break}for(;$t<Gt.byteLength;)switch(Gt[$t]){case 0:if(Gt[$t-1]!==0){$t+=2;break}else if(Gt[$t-2]!==0){$t++;break}Yt+3!==$t-2&&(hi=Pa(Gt[Yt+3]&31),hi==="slice_layer_without_partitioning_rbsp_idr"&&(Zt=!0));do $t++;while(Gt[$t]!==1&&$t<Gt.length);Yt=$t-2,$t+=3;break;case 1:if(Gt[$t-1]!==0||Gt[$t-2]!==0){$t+=3;break}hi=Pa(Gt[Yt+3]&31),hi==="slice_layer_without_partitioning_rbsp_idr"&&(Zt=!0),Yt=$t-2,$t+=3;break;default:$t+=3;break}return Gt=Gt.subarray(Yt),$t-=Yt,Yt=0,Gt&&Gt.byteLength>3&&(hi=Pa(Gt[Yt+3]&31),hi==="slice_layer_without_partitioning_rbsp_idr"&&(Zt=!0)),Zt},So={parseType:go,parsePat:yo,parsePmt:vo,parsePayloadUnitStartIndicator:la,parsePesType:_o,parsePesTime:bo,videoPacketContainsKeyFrame:To},Ua=Xn,Ns=ds.handleRollover,kr={};kr.ts=So,kr.aac=Lr;var Ss=Sr.ONE_SECOND_IN_TS,en=188,Dn=71,Eo=function(ht,Nt){for(var Gt=0,$t=en,Yt,Zt;$t<ht.byteLength;){if(ht[Gt]===Dn&&ht[$t]===Dn){switch(Yt=ht.subarray(Gt,$t),Zt=kr.ts.parseType(Yt,Nt.pid),Zt){case"pat":Nt.pid=kr.ts.parsePat(Yt);break;case"pmt":var hi=kr.ts.parsePmt(Yt);Nt.table=Nt.table||{},Object.keys(hi).forEach(function(gi){Nt.table[gi]=hi[gi]});break}Gt+=en,$t+=en;continue}Gt++,$t++}},Va=function(ht,Nt,Gt){for(var $t=0,Yt=en,Zt,hi,gi,yi,_i,xi=!1;Yt<=ht.byteLength;){if(ht[$t]===Dn&&(ht[Yt]===Dn||Yt===ht.byteLength)){switch(Zt=ht.subarray($t,Yt),hi=kr.ts.parseType(Zt,Nt.pid),hi){case"pes":gi=kr.ts.parsePesType(Zt,Nt.table),yi=kr.ts.parsePayloadUnitStartIndicator(Zt),gi==="audio"&&yi&&(_i=kr.ts.parsePesTime(Zt),_i&&(_i.type="audio",Gt.audio.push(_i),xi=!0));break}if(xi)break;$t+=en,Yt+=en;continue}$t++,Yt++}for(Yt=ht.byteLength,$t=Yt-en,xi=!1;$t>=0;){if(ht[$t]===Dn&&(ht[Yt]===Dn||Yt===ht.byteLength)){switch(Zt=ht.subarray($t,Yt),hi=kr.ts.parseType(Zt,Nt.pid),hi){case"pes":gi=kr.ts.parsePesType(Zt,Nt.table),yi=kr.ts.parsePayloadUnitStartIndicator(Zt),gi==="audio"&&yi&&(_i=kr.ts.parsePesTime(Zt),_i&&(_i.type="audio",Gt.audio.push(_i),xi=!0));break}if(xi)break;$t-=en,Yt-=en;continue}$t--,Yt--}},xo=function(ht,Nt,Gt){for(var $t=0,Yt=en,Zt,hi,gi,yi,_i,xi,Oi,rr,Hi=!1,gr={data:[],size:0};Yt<ht.byteLength;){if(ht[$t]===Dn&&ht[Yt]===Dn){switch(Zt=ht.subarray($t,Yt),hi=kr.ts.parseType(Zt,Nt.pid),hi){case"pes":if(gi=kr.ts.parsePesType(Zt,Nt.table),yi=kr.ts.parsePayloadUnitStartIndicator(Zt),gi==="video"&&(yi&&!Hi&&(_i=kr.ts.parsePesTime(Zt),_i&&(_i.type="video",Gt.video.push(_i),Hi=!0)),!Gt.firstKeyFrame)){if(yi&&gr.size!==0){for(xi=new Uint8Array(gr.size),Oi=0;gr.data.length;)rr=gr.data.shift(),xi.set(rr,Oi),Oi+=rr.byteLength;if(kr.ts.videoPacketContainsKeyFrame(xi)){var br=kr.ts.parsePesTime(xi);br?(Gt.firstKeyFrame=br,Gt.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}gr.size=0}gr.data.push(Zt),gr.size+=Zt.byteLength}break}if(Hi&&Gt.firstKeyFrame)break;$t+=en,Yt+=en;continue}$t++,Yt++}for(Yt=ht.byteLength,$t=Yt-en,Hi=!1;$t>=0;){if(ht[$t]===Dn&&ht[Yt]===Dn){switch(Zt=ht.subarray($t,Yt),hi=kr.ts.parseType(Zt,Nt.pid),hi){case"pes":gi=kr.ts.parsePesType(Zt,Nt.table),yi=kr.ts.parsePayloadUnitStartIndicator(Zt),gi==="video"&&yi&&(_i=kr.ts.parsePesTime(Zt),_i&&(_i.type="video",Gt.video.push(_i),Hi=!0));break}if(Hi)break;$t-=en,Yt-=en;continue}$t--,Yt--}},Co=function(ht,Nt){if(ht.audio&&ht.audio.length){var Gt=Nt;(typeof Gt>"u"||isNaN(Gt))&&(Gt=ht.audio[0].dts),ht.audio.forEach(function(Zt){Zt.dts=Ns(Zt.dts,Gt),Zt.pts=Ns(Zt.pts,Gt),Zt.dtsTime=Zt.dts/Ss,Zt.ptsTime=Zt.pts/Ss})}if(ht.video&&ht.video.length){var $t=Nt;if((typeof $t>"u"||isNaN($t))&&($t=ht.video[0].dts),ht.video.forEach(function(Zt){Zt.dts=Ns(Zt.dts,$t),Zt.pts=Ns(Zt.pts,$t),Zt.dtsTime=Zt.dts/Ss,Zt.ptsTime=Zt.pts/Ss}),ht.firstKeyFrame){var Yt=ht.firstKeyFrame;Yt.dts=Ns(Yt.dts,$t),Yt.pts=Ns(Yt.pts,$t),Yt.dtsTime=Yt.dts/Ss,Yt.ptsTime=Yt.pts/Ss}}},wo=function(ht){for(var Nt=!1,Gt=0,$t=null,Yt=null,Zt=0,hi=0,gi;ht.length-hi>=3;){var yi=kr.aac.parseType(ht,hi);switch(yi){case"timed-metadata":if(ht.length-hi<10){Nt=!0;break}if(Zt=kr.aac.parseId3TagSize(ht,hi),Zt>ht.length){Nt=!0;break}Yt===null&&(gi=ht.subarray(hi,hi+Zt),Yt=kr.aac.parseAacTimestamp(gi)),hi+=Zt;break;case"audio":if(ht.length-hi<7){Nt=!0;break}if(Zt=kr.aac.parseAdtsSize(ht,hi),Zt>ht.length){Nt=!0;break}$t===null&&(gi=ht.subarray(hi,hi+Zt),$t=kr.aac.parseSampleRate(gi)),Gt++,hi+=Zt;break;default:hi++;break}if(Nt)return null}if($t===null||Yt===null)return null;var _i=Ss/$t,xi={audio:[{type:"audio",dts:Yt,pts:Yt},{type:"audio",dts:Yt+Gt*1024*_i,pts:Yt+Gt*1024*_i}]};return xi},Ao=function(ht){var Nt={pid:null,table:null},Gt={};Eo(ht,Nt);for(var $t in Nt.table)if(Nt.table.hasOwnProperty($t)){var Yt=Nt.table[$t];switch(Yt){case Ua.H264_STREAM_TYPE:Gt.video=[],xo(ht,Nt,Gt),Gt.video.length===0&&delete Gt.video;break;case Ua.ADTS_STREAM_TYPE:Gt.audio=[],Va(ht,Nt,Gt),Gt.audio.length===0&&delete Gt.audio;break}}return Gt},Po=function(ht,Nt){var Gt=kr.aac.isLikelyAacData(ht),$t;return Gt?$t=wo(ht):$t=Ao(ht),!$t||!$t.audio&&!$t.video?null:(Co($t,Nt),$t)},Io={inspect:Po,parseAudioPes_:Va};const Do=function(ht,Nt){Nt.on("data",function(Gt){const $t=Gt.initSegment;Gt.initSegment={data:$t.buffer,byteOffset:$t.byteOffset,byteLength:$t.byteLength};const Yt=Gt.data;Gt.data=Yt.buffer,ht.postMessage({action:"data",segment:Gt,byteOffset:Yt.byteOffset,byteLength:Yt.byteLength},[Gt.data])}),Nt.on("done",function(Gt){ht.postMessage({action:"done"})}),Nt.on("gopInfo",function(Gt){ht.postMessage({action:"gopInfo",gopInfo:Gt})}),Nt.on("videoSegmentTimingInfo",function(Gt){const $t={start:{decode:Sr.videoTsToSeconds(Gt.start.dts),presentation:Sr.videoTsToSeconds(Gt.start.pts)},end:{decode:Sr.videoTsToSeconds(Gt.end.dts),presentation:Sr.videoTsToSeconds(Gt.end.pts)},baseMediaDecodeTime:Sr.videoTsToSeconds(Gt.baseMediaDecodeTime)};Gt.prependedContentDuration&&($t.prependedContentDuration=Sr.videoTsToSeconds(Gt.prependedContentDuration)),ht.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:$t})}),Nt.on("audioSegmentTimingInfo",function(Gt){const $t={start:{decode:Sr.videoTsToSeconds(Gt.start.dts),presentation:Sr.videoTsToSeconds(Gt.start.pts)},end:{decode:Sr.videoTsToSeconds(Gt.end.dts),presentation:Sr.videoTsToSeconds(Gt.end.pts)},baseMediaDecodeTime:Sr.videoTsToSeconds(Gt.baseMediaDecodeTime)};Gt.prependedContentDuration&&($t.prependedContentDuration=Sr.videoTsToSeconds(Gt.prependedContentDuration)),ht.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:$t})}),Nt.on("id3Frame",function(Gt){ht.postMessage({action:"id3Frame",id3Frame:Gt})}),Nt.on("caption",function(Gt){ht.postMessage({action:"caption",caption:Gt})}),Nt.on("trackinfo",function(Gt){ht.postMessage({action:"trackinfo",trackInfo:Gt})}),Nt.on("audioTimingInfo",function(Gt){ht.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Sr.videoTsToSeconds(Gt.start),end:Sr.videoTsToSeconds(Gt.end)}})}),Nt.on("videoTimingInfo",function(Gt){ht.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Sr.videoTsToSeconds(Gt.start),end:Sr.videoTsToSeconds(Gt.end)}})}),Nt.on("log",function(Gt){ht.postMessage({action:"log",log:Gt})})};class Ha{constructor(Nt,Gt){this.options=Gt||{},this.self=Nt,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new $i.Transmuxer(this.options),Do(this.self,this.transmuxer)}pushMp4Captions(Nt){this.captionParser||(this.captionParser=new io,this.captionParser.init());const Gt=new Uint8Array(Nt.data,Nt.byteOffset,Nt.byteLength),$t=this.captionParser.parse(Gt,Nt.trackIds,Nt.timescales);this.self.postMessage({action:"mp4Captions",captions:$t&&$t.captions||[],logs:$t&&$t.logs||[],data:Gt.buffer},[Gt.buffer])}probeMp4StartTime({timescales:Nt,data:Gt}){const $t=wa.startTime(Nt,Gt);this.self.postMessage({action:"probeMp4StartTime",startTime:$t,data:Gt},[Gt.buffer])}probeMp4Tracks({data:Nt}){const Gt=wa.tracks(Nt);this.self.postMessage({action:"probeMp4Tracks",tracks:Gt,data:Nt},[Nt.buffer])}probeEmsgID3({data:Nt,offset:Gt}){const $t=wa.getEmsgID3(Nt,Gt);this.self.postMessage({action:"probeEmsgID3",id3Frames:$t,emsgData:Nt},[Nt.buffer])}probeTs({data:Nt,baseStartTime:Gt}){const $t=typeof Gt=="number"&&!isNaN(Gt)?Gt*Sr.ONE_SECOND_IN_TS:void 0,Yt=Io.inspect(Nt,$t);let Zt=null;Yt&&(Zt={hasVideo:Yt.video&&Yt.video.length===2||!1,hasAudio:Yt.audio&&Yt.audio.length===2||!1},Zt.hasVideo&&(Zt.videoStart=Yt.video[0].ptsTime),Zt.hasAudio&&(Zt.audioStart=Yt.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:Zt,data:Nt},[Nt.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(Nt){const Gt=new Uint8Array(Nt.data,Nt.byteOffset,Nt.byteLength);this.transmuxer.push(Gt)}reset(){this.transmuxer.reset()}setTimestampOffset(Nt){const Gt=Nt.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Sr.secondsToVideoTs(Gt)))}setAudioAppendStart(Nt){this.transmuxer.setAudioAppendStart(Math.ceil(Sr.secondsToVideoTs(Nt.appendStart)))}setRemux(Nt){this.transmuxer.setRemux(Nt.remux)}flush(Nt){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(Nt){this.transmuxer.alignGopsWith(Nt.gopsToAlignWith.slice())}}self.onmessage=function(ht){if(ht.data.action==="init"&&ht.data.options){this.messageHandlers=new Ha(self,ht.data.options);return}this.messageHandlers||(this.messageHandlers=new Ha(self)),ht.data&&ht.data.action&&ht.data.action!=="init"&&this.messageHandlers[ht.data.action]&&this.messageHandlers[ht.data.action](ht.data)}}));var TransmuxWorker=factory(workerCode$1);const handleData_=(o,r,S)=>{const{type:E,initSegment:x,captions:C,captionStreams:R,metadata:Ce,videoFrameDtsTime:Ue,videoFramePtsTime:je}=o.data.segment;r.buffer.push({captions:C,captionStreams:R,metadata:Ce});const Xe=o.data.segment.boxes||{data:o.data.segment.data},Ye={type:E,data:new Uint8Array(Xe.data,Xe.data.byteOffset,Xe.data.byteLength),initSegment:new Uint8Array(x.data,x.byteOffset,x.byteLength)};typeof Ue<"u"&&(Ye.videoFrameDtsTime=Ue),typeof je<"u"&&(Ye.videoFramePtsTime=je),S(Ye)},handleDone_=({transmuxedData:o,callback:r})=>{o.buffer=[],r(o)},handleGopInfo_=(o,r)=>{r.gopInfo=o.data.gopInfo},processTransmux=o=>{const{transmuxer:r,bytes:S,audioAppendStart:E,gopsToAlignWith:x,remux:C,onData:R,onTrackInfo:Ce,onAudioTimingInfo:Ue,onVideoTimingInfo:je,onVideoSegmentTimingInfo:Xe,onAudioSegmentTimingInfo:Ye,onId3:St,onCaptions:Dt,onDone:kt,onEndedTimeline:et,onTransmuxerLog:Ft,isEndOfTimeline:xt,segment:Mt,triggerSegmentEventFn:Ot}=o,Ut={buffer:[]};let Xt=xt;const ei=li=>{r.currentTransmux===o&&(li.data.action==="data"&&handleData_(li,Ut,R),li.data.action==="trackinfo"&&Ce(li.data.trackInfo),li.data.action==="gopInfo"&&handleGopInfo_(li,Ut),li.data.action==="audioTimingInfo"&&Ue(li.data.audioTimingInfo),li.data.action==="videoTimingInfo"&&je(li.data.videoTimingInfo),li.data.action==="videoSegmentTimingInfo"&&Xe(li.data.videoSegmentTimingInfo),li.data.action==="audioSegmentTimingInfo"&&Ye(li.data.audioSegmentTimingInfo),li.data.action==="id3Frame"&&St([li.data.id3Frame],li.data.id3Frame.dispatchType),li.data.action==="caption"&&Dt(li.data.caption),li.data.action==="endedtimeline"&&(Xt=!1,et()),li.data.action==="log"&&Ft(li.data.log),li.data.type==="transmuxed"&&(Xt||(r.onmessage=null,handleDone_({transmuxedData:Ut,callback:kt}),dequeue(r))))},si=()=>{const li={message:"Received an error message from the transmuxer worker",metadata:{errorType:videojs.Error.StreamingFailedToTransmuxSegment,segmentInfo:segmentInfoPayload({segment:Mt})}};kt(null,li)};if(r.onmessage=ei,r.onerror=si,E&&r.postMessage({action:"setAudioAppendStart",appendStart:E}),Array.isArray(x)&&r.postMessage({action:"alignGopsWith",gopsToAlignWith:x}),typeof C<"u"&&r.postMessage({action:"setRemux",remux:C}),S.byteLength){const li=S instanceof ArrayBuffer?S:S.buffer,bi=S instanceof ArrayBuffer?0:S.byteOffset;Ot({type:"segmenttransmuxingstart",segment:Mt}),r.postMessage({action:"push",data:li,byteOffset:bi,byteLength:S.byteLength},[li])}xt&&r.postMessage({action:"endTimeline"}),r.postMessage({action:"flush"})},dequeue=o=>{o.currentTransmux=null,o.transmuxQueue.length&&(o.currentTransmux=o.transmuxQueue.shift(),typeof o.currentTransmux=="function"?o.currentTransmux():processTransmux(o.currentTransmux))},processAction=(o,r)=>{o.postMessage({action:r}),dequeue(o)},enqueueAction=(o,r)=>{if(!r.currentTransmux){r.currentTransmux=o,processAction(r,o);return}r.transmuxQueue.push(processAction.bind(null,r,o))},reset=o=>{enqueueAction("reset",o)},endTimeline=o=>{enqueueAction("endTimeline",o)},transmux=o=>{if(!o.transmuxer.currentTransmux){o.transmuxer.currentTransmux=o,processTransmux(o);return}o.transmuxer.transmuxQueue.push(o)},createTransmuxer=o=>{const r=new TransmuxWorker;r.currentTransmux=null,r.transmuxQueue=[];const S=r.terminate;return r.terminate=()=>(r.currentTransmux=null,r.transmuxQueue.length=0,S.call(r)),r.postMessage({action:"init",options:o}),r};var segmentTransmuxer={reset,endTimeline,transmux,createTransmuxer};const workerCallback=function(o){const r=o.transmuxer,S=o.endAction||o.action,E=o.callback,x=_extends$3({},o,{endAction:null,transmuxer:null,callback:null}),C=R=>{R.data.action===S&&(r.removeEventListener("message",C),R.data.data&&(R.data.data=new Uint8Array(R.data.data,o.byteOffset||0,o.byteLength||R.data.data.byteLength),o.data&&(o.data=R.data.data)),E(R.data))};if(r.addEventListener("message",C),o.data){const R=o.data instanceof ArrayBuffer;x.byteOffset=R?0:o.data.byteOffset,x.byteLength=o.data.byteLength;const Ce=[R?o.data:o.data.buffer];r.postMessage(x,Ce)}else r.postMessage(x)},REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102},abortAll=o=>{o.forEach(r=>{r.abort()})},getRequestStats=o=>({bandwidth:o.bandwidth,bytesReceived:o.bytesReceived||0,roundTripTime:o.roundTripTime||0}),getProgressStats=o=>{const r=o.target,E={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0};return E.bytesReceived=o.loaded,E.bandwidth=Math.floor(E.bytesReceived/E.roundTripTime*8*1e3),E},handleErrors=(o,r)=>{const{requestType:S}=r,E=getStreamingNetworkErrorMetadata({requestType:S,request:r,error:o});return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:r,metadata:E}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:REQUEST_ERRORS.ABORTED,xhr:r,metadata:E}:o?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:REQUEST_ERRORS.FAILURE,xhr:r,metadata:E}:r.responseType==="arraybuffer"&&r.response.byteLength===0?{status:r.status,message:"Empty HLS response at URL: "+r.uri,code:REQUEST_ERRORS.FAILURE,xhr:r,metadata:E}:null},handleKeyResponse=(o,r,S,E)=>(x,C)=>{const R=C.response,Ce=handleErrors(x,C);if(Ce)return S(Ce,o);if(R.byteLength!==16)return S({status:C.status,message:"Invalid HLS key at URL: "+C.uri,code:REQUEST_ERRORS.FAILURE,xhr:C},o);const Ue=new DataView(R),je=new Uint32Array([Ue.getUint32(0),Ue.getUint32(4),Ue.getUint32(8),Ue.getUint32(12)]);for(let Ye=0;Ye<r.length;Ye++)r[Ye].bytes=je;const Xe={uri:C.uri};return E({type:"segmentkeyloadcomplete",segment:o,keyInfo:Xe}),S(null,o)},parseInitSegment=(o,r)=>{const S=detectContainerForBytes(o.map.bytes);if(S!=="mp4"){const E=o.map.resolvedUri||o.map.uri,x=S||"unknown";return r({internal:!0,message:`Found unsupported ${x} container for initialization segment at URL: ${E}`,code:REQUEST_ERRORS.FAILURE,metadata:{mediaType:x}})}workerCallback({action:"probeMp4Tracks",data:o.map.bytes,transmuxer:o.transmuxer,callback:({tracks:E,data:x})=>(o.map.bytes=x,E.forEach(function(C){o.map.tracks=o.map.tracks||{},!o.map.tracks[C.type]&&(o.map.tracks[C.type]=C,typeof C.id=="number"&&C.timescale&&(o.map.timescales=o.map.timescales||{},o.map.timescales[C.id]=C.timescale))}),r(null))})},handleInitSegmentResponse=({segment:o,finishProcessingFn:r,triggerSegmentEventFn:S})=>(E,x)=>{const C=handleErrors(E,x);if(C)return r(C,o);const R=new Uint8Array(x.response);if(S({type:"segmentloaded",segment:o}),o.map.key)return o.map.encryptedBytes=R,r(null,o);o.map.bytes=R,parseInitSegment(o,function(Ce){if(Ce)return Ce.xhr=x,Ce.status=x.status,r(Ce,o);r(null,o)})},handleSegmentResponse=({segment:o,finishProcessingFn:r,responseType:S,triggerSegmentEventFn:E})=>(x,C)=>{const R=handleErrors(x,C);if(R)return r(R,o);E({type:"segmentloaded",segment:o});const Ce=S==="arraybuffer"||!C.responseText?C.response:stringToArrayBuffer(C.responseText.substring(o.lastReachedChar||0));return o.stats=getRequestStats(C),o.key?o.encryptedBytes=new Uint8Array(Ce):o.bytes=new Uint8Array(Ce),r(null,o)},transmuxAndNotify=({segment:o,bytes:r,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt})=>{const kt=o.map&&o.map.tracks||{},et=!!(kt.audio&&kt.video);let Ft=E.bind(null,o,"audio","start");const xt=E.bind(null,o,"audio","end");let Mt=E.bind(null,o,"video","start");const Ot=E.bind(null,o,"video","end"),Ut=()=>transmux({bytes:r,transmuxer:o.transmuxer,audioAppendStart:o.audioAppendStart,gopsToAlignWith:o.gopsToAlignWith,remux:et,onData:Xt=>{Xt.type=Xt.type==="combined"?"video":Xt.type,Xe(o,Xt)},onTrackInfo:Xt=>{S&&(et&&(Xt.isMuxed=!0),S(o,Xt))},onAudioTimingInfo:Xt=>{Ft&&typeof Xt.start<"u"&&(Ft(Xt.start),Ft=null),xt&&typeof Xt.end<"u"&&xt(Xt.end)},onVideoTimingInfo:Xt=>{Mt&&typeof Xt.start<"u"&&(Mt(Xt.start),Mt=null),Ot&&typeof Xt.end<"u"&&Ot(Xt.end)},onVideoSegmentTimingInfo:Xt=>{const ei={pts:{start:Xt.start.presentation,end:Xt.end.presentation},dts:{start:Xt.start.decode,end:Xt.end.decode}};Dt({type:"segmenttransmuxingtiminginfoavailable",segment:o,timingInfo:ei}),x(Xt)},onAudioSegmentTimingInfo:Xt=>{const ei={pts:{start:Xt.start.pts,end:Xt.end.pts},dts:{start:Xt.start.dts,end:Xt.end.dts}};Dt({type:"segmenttransmuxingtiminginfoavailable",segment:o,timingInfo:ei}),C(Xt)},onId3:(Xt,ei)=>{R(o,Xt,ei)},onCaptions:Xt=>{Ce(o,[Xt])},isEndOfTimeline:Ue,onEndedTimeline:()=>{je()},onTransmuxerLog:St,onDone:(Xt,ei)=>{Ye&&(Xt.type=Xt.type==="combined"?"video":Xt.type,Dt({type:"segmenttransmuxingcomplete",segment:o}),Ye(ei,o,Xt))},segment:o,triggerSegmentEventFn:Dt});workerCallback({action:"probeTs",transmuxer:o.transmuxer,data:r,baseStartTime:o.baseStartTime,callback:Xt=>{o.bytes=r=Xt.data;const ei=Xt.result;ei&&(S(o,{hasAudio:ei.hasAudio,hasVideo:ei.hasVideo,isMuxed:et}),S=null),Ut()}})},handleSegmentBytes=({segment:o,bytes:r,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt})=>{let kt=new Uint8Array(r);if(isLikelyFmp4MediaSegment(kt)){o.isFmp4=!0;const{tracks:et}=o.map,Ft={isFmp4:!0,hasVideo:!!et.video,hasAudio:!!et.audio};et.audio&&et.audio.codec&&et.audio.codec!=="enca"&&(Ft.audioCodec=et.audio.codec),et.video&&et.video.codec&&et.video.codec!=="encv"&&(Ft.videoCodec=et.video.codec),et.video&&et.audio&&(Ft.isMuxed=!0),S(o,Ft);const xt=(Mt,Ot)=>{Xe(o,{data:kt,type:Ft.hasAudio&&!Ft.isMuxed?"audio":"video"}),Ot&&Ot.length&&R(o,Ot),Mt&&Mt.length&&Ce(o,Mt),Ye(null,o,{})};workerCallback({action:"probeMp4StartTime",timescales:o.map.timescales,data:kt,transmuxer:o.transmuxer,callback:({data:Mt,startTime:Ot})=>{r=Mt.buffer,o.bytes=kt=Mt,Ft.hasAudio&&!Ft.isMuxed&&E(o,"audio","start",Ot),Ft.hasVideo&&E(o,"video","start",Ot),workerCallback({action:"probeEmsgID3",data:kt,transmuxer:o.transmuxer,offset:Ot,callback:({emsgData:Ut,id3Frames:Xt})=>{if(r=Ut.buffer,o.bytes=kt=Ut,!et.video||!Ut.byteLength||!o.transmuxer){xt(void 0,Xt);return}workerCallback({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:o.transmuxer,data:kt,timescales:o.map.timescales,trackIds:[et.video.id],callback:ei=>{r=ei.data.buffer,o.bytes=kt=ei.data,ei.logs.forEach(function(si){St(merge(si,{stream:"mp4CaptionParser"}))}),xt(ei.captions,Xt)}})}})}});return}if(!o.transmuxer){Ye(null,o,{});return}if(typeof o.container>"u"&&(o.container=detectContainerForBytes(kt)),o.container!=="ts"&&o.container!=="aac"){S(o,{hasAudio:!1,hasVideo:!1}),Ye(null,o,{});return}transmuxAndNotify({segment:o,bytes:r,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt})},decrypt=function({id:o,key:r,encryptedBytes:S,decryptionWorker:E,segment:x,doneFn:C},R){const Ce=je=>{if(je.data.source===o){E.removeEventListener("message",Ce);const Xe=je.data.decrypted;R(new Uint8Array(Xe.bytes,Xe.byteOffset,Xe.byteLength))}};E.onerror=()=>{const je="An error occurred in the decryption worker",Xe=segmentInfoPayload({segment:x}),Ye={message:je,metadata:{error:new Error(je),errorType:videojs.Error.StreamingFailedToDecryptSegment,segmentInfo:Xe,keyInfo:{uri:x.key.resolvedUri||x.map.key.resolvedUri}}};C(Ye,x)},E.addEventListener("message",Ce);let Ue;r.bytes.slice?Ue=r.bytes.slice():Ue=new Uint32Array(Array.prototype.slice.call(r.bytes)),E.postMessage(createTransferableMessage({source:o,encrypted:S,key:Ue,iv:r.iv}),[S.buffer,Ue.buffer])},decryptSegment=({decryptionWorker:o,segment:r,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt})=>{Dt({type:"segmentdecryptionstart"}),decrypt({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:o,segment:r,doneFn:Ye},kt=>{r.bytes=kt,Dt({type:"segmentdecryptioncomplete",segment:r}),handleSegmentBytes({segment:r,bytes:r.bytes,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt})})},waitForCompletion=({activeXhrs:o,decryptionWorker:r,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt})=>{let kt=0,et=!1;return(Ft,xt)=>{if(!et){if(Ft)return et=!0,abortAll(o),Ye(Ft,xt);if(kt+=1,kt===o.length){const Mt=function(){if(xt.encryptedBytes)return decryptSegment({decryptionWorker:r,segment:xt,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt});handleSegmentBytes({segment:xt,bytes:xt.bytes,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe,doneFn:Ye,onTransmuxerLog:St,triggerSegmentEventFn:Dt})};if(xt.endOfAllRequests=Date.now(),xt.map&&xt.map.encryptedBytes&&!xt.map.bytes)return Dt({type:"segmentdecryptionstart",segment:xt}),decrypt({decryptionWorker:r,id:xt.requestId+"-init",encryptedBytes:xt.map.encryptedBytes,key:xt.map.key,segment:xt,doneFn:Ye},Ot=>{xt.map.bytes=Ot,Dt({type:"segmentdecryptioncomplete",segment:xt}),parseInitSegment(xt,Ut=>{if(Ut)return abortAll(o),Ye(Ut,xt);Mt()})});Mt()}}}},handleLoadEnd=({loadendState:o,abortFn:r})=>S=>{S.target.aborted&&r&&!o.calledAbortFn&&(r(),o.calledAbortFn=!0)},handleProgress=({segment:o,progressFn:r,trackInfoFn:S,timingInfoFn:E,videoSegmentTimingInfoFn:x,audioSegmentTimingInfoFn:C,id3Fn:R,captionsFn:Ce,isEndOfTimeline:Ue,endedTimelineFn:je,dataFn:Xe})=>Ye=>{if(!Ye.target.aborted)return o.stats=merge(o.stats,getProgressStats(Ye)),!o.stats.firstBytesReceivedAt&&o.stats.bytesReceived&&(o.stats.firstBytesReceivedAt=Date.now()),r(Ye,o)},mediaSegmentRequest=({xhr:o,xhrOptions:r,decryptionWorker:S,segment:E,abortFn:x,progressFn:C,trackInfoFn:R,timingInfoFn:Ce,videoSegmentTimingInfoFn:Ue,audioSegmentTimingInfoFn:je,id3Fn:Xe,captionsFn:Ye,isEndOfTimeline:St,endedTimelineFn:Dt,dataFn:kt,doneFn:et,onTransmuxerLog:Ft,triggerSegmentEventFn:xt})=>{const Mt=[],Ot=waitForCompletion({activeXhrs:Mt,decryptionWorker:S,trackInfoFn:R,timingInfoFn:Ce,videoSegmentTimingInfoFn:Ue,audioSegmentTimingInfoFn:je,id3Fn:Xe,captionsFn:Ye,isEndOfTimeline:St,endedTimelineFn:Dt,dataFn:kt,doneFn:et,onTransmuxerLog:Ft,triggerSegmentEventFn:xt});if(E.key&&!E.key.bytes){const li=[E.key];E.map&&!E.map.bytes&&E.map.key&&E.map.key.resolvedUri===E.key.resolvedUri&&li.push(E.map.key);const bi=merge(r,{uri:E.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),wi=handleKeyResponse(E,li,Ot,xt),Pi={uri:E.key.resolvedUri};xt({type:"segmentkeyloadstart",segment:E,keyInfo:Pi});const Ci=o(bi,wi);Mt.push(Ci)}if(E.map&&!E.map.bytes){if(E.map.key&&(!E.key||E.key.resolvedUri!==E.map.key.resolvedUri)){const Ci=merge(r,{uri:E.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),Di=handleKeyResponse(E,[E.map.key],Ot,xt),Bi={uri:E.map.key.resolvedUri};xt({type:"segmentkeyloadstart",segment:E,keyInfo:Bi});const Ri=o(Ci,Di);Mt.push(Ri)}const bi=merge(r,{uri:E.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(E.map),requestType:"segment-media-initialization"}),wi=handleInitSegmentResponse({segment:E,finishProcessingFn:Ot,triggerSegmentEventFn:xt});xt({type:"segmentloadstart",segment:E});const Pi=o(bi,wi);Mt.push(Pi)}const Ut=merge(r,{uri:E.part&&E.part.resolvedUri||E.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(E),requestType:"segment"}),Xt=handleSegmentResponse({segment:E,finishProcessingFn:Ot,responseType:Ut.responseType,triggerSegmentEventFn:xt});xt({type:"segmentloadstart",segment:E});const ei=o(Ut,Xt);ei.addEventListener("progress",handleProgress({segment:E,progressFn:C,trackInfoFn:R,timingInfoFn:Ce,videoSegmentTimingInfoFn:Ue,audioSegmentTimingInfoFn:je,id3Fn:Xe,captionsFn:Ye,isEndOfTimeline:St,endedTimelineFn:Dt,dataFn:kt})),Mt.push(ei);const si={};return Mt.forEach(li=>{li.addEventListener("loadend",handleLoadEnd({loadendState:si,abortFn:x}))}),()=>abortAll(Mt)},logFn$1=logger("CodecUtils"),getCodecs=function(o){const r=o.attributes||{};if(r.CODECS)return parseCodecs(r.CODECS)},isMaat=(o,r)=>{const S=r.attributes||{};return o&&o.mediaGroups&&o.mediaGroups.AUDIO&&S.AUDIO&&o.mediaGroups.AUDIO[S.AUDIO]},isMuxed=(o,r)=>{if(!isMaat(o,r))return!0;const S=r.attributes||{},E=o.mediaGroups.AUDIO[S.AUDIO];for(const x in E)if(!E[x].uri&&!E[x].playlists)return!0;return!1},unwrapCodecList=function(o){const r={};return o.forEach(({mediaType:S,type:E,details:x})=>{r[S]=r[S]||[],r[S].push(translateLegacyCodec(`${E}${x}`))}),Object.keys(r).forEach(function(S){if(r[S].length>1){logFn$1(`multiple ${S} codecs found as attributes: ${r[S].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),r[S]=null;return}r[S]=r[S][0]}),r},codecCount=function(o){let r=0;return o.audio&&r++,o.video&&r++,r},codecsForPlaylist=function(o,r){const S=r.attributes||{},E=unwrapCodecList(getCodecs(r)||[]);if(isMaat(o,r)&&!E.audio&&!isMuxed(o,r)){const x=unwrapCodecList(codecsFromDefault(o,S.AUDIO)||[]);x.audio&&(E.audio=x.audio)}return E},logFn=logger("PlaylistSelector"),representationToString=function(o){if(!o||!o.playlist)return;const r=o.playlist;return JSON.stringify({id:r.id,bandwidth:o.bandwidth,width:o.width,height:o.height,codecs:r.attributes&&r.attributes.CODECS||""})},safeGetComputedStyle=function(o,r){if(!o)return"";const S=window$1$1.getComputedStyle(o);return S?S[r]:""},stableSort=function(o,r){const S=o.slice();o.sort(function(E,x){const C=r(E,x);return C===0?S.indexOf(E)-S.indexOf(x):C})},comparePlaylistBandwidth=function(o,r){let S,E;return o.attributes.BANDWIDTH&&(S=o.attributes.BANDWIDTH),S=S||window$1$1.Number.MAX_VALUE,r.attributes.BANDWIDTH&&(E=r.attributes.BANDWIDTH),E=E||window$1$1.Number.MAX_VALUE,S-E},comparePlaylistResolution=function(o,r){let S,E;return o.attributes.RESOLUTION&&o.attributes.RESOLUTION.width&&(S=o.attributes.RESOLUTION.width),S=S||window$1$1.Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(E=r.attributes.RESOLUTION.width),E=E||window$1$1.Number.MAX_VALUE,S===E&&o.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?o.attributes.BANDWIDTH-r.attributes.BANDWIDTH:S-E};let simpleSelector=function(o,r,S,E,x,C){if(!o)return;const R={bandwidth:r,width:S,height:E,limitRenditionByPlayerDimensions:x};let Ce=o.playlists;Playlist.isAudioOnly(o)&&(Ce=C.getAudioTrackPlaylists_(),R.audioOnly=!0);let Ue=Ce.map(Xt=>{let ei;const si=Xt.attributes&&Xt.attributes.RESOLUTION&&Xt.attributes.RESOLUTION.width,li=Xt.attributes&&Xt.attributes.RESOLUTION&&Xt.attributes.RESOLUTION.height;return ei=Xt.attributes&&Xt.attributes.BANDWIDTH,ei=ei||window$1$1.Number.MAX_VALUE,{bandwidth:ei,width:si,height:li,playlist:Xt}});stableSort(Ue,(Xt,ei)=>Xt.bandwidth-ei.bandwidth),Ue=Ue.filter(Xt=>!Playlist.isIncompatible(Xt.playlist));let je=Ue.filter(Xt=>Playlist.isEnabled(Xt.playlist));je.length||(je=Ue.filter(Xt=>!Playlist.isDisabled(Xt.playlist)));const Xe=je.filter(Xt=>Xt.bandwidth*Config.BANDWIDTH_VARIANCE<r);let Ye=Xe[Xe.length-1];const St=Xe.filter(Xt=>Xt.bandwidth===Ye.bandwidth)[0];if(x===!1){const Xt=St||je[0]||Ue[0];if(Xt&&Xt.playlist){let ei="sortedPlaylistReps";return St&&(ei="bandwidthBestRep"),je[0]&&(ei="enabledPlaylistReps"),logFn(`choosing ${representationToString(Xt)} using ${ei} with options`,R),Xt.playlist}return logFn("could not choose a playlist with options",R),null}const Dt=Xe.filter(Xt=>Xt.width&&Xt.height);stableSort(Dt,(Xt,ei)=>Xt.width-ei.width);const kt=Dt.filter(Xt=>Xt.width===S&&Xt.height===E);Ye=kt[kt.length-1];const et=kt.filter(Xt=>Xt.bandwidth===Ye.bandwidth)[0];let Ft,xt,Mt;et||(Ft=Dt.filter(Xt=>Xt.width>S||Xt.height>E),xt=Ft.filter(Xt=>Xt.width===Ft[0].width&&Xt.height===Ft[0].height),Ye=xt[xt.length-1],Mt=xt.filter(Xt=>Xt.bandwidth===Ye.bandwidth)[0]);let Ot;if(C.leastPixelDiffSelector){const Xt=Dt.map(ei=>(ei.pixelDiff=Math.abs(ei.width-S)+Math.abs(ei.height-E),ei));stableSort(Xt,(ei,si)=>ei.pixelDiff===si.pixelDiff?si.bandwidth-ei.bandwidth:ei.pixelDiff-si.pixelDiff),Ot=Xt[0]}const Ut=Ot||Mt||et||St||je[0]||Ue[0];if(Ut&&Ut.playlist){let Xt="sortedPlaylistReps";return Ot?Xt="leastPixelDiffRep":Mt?Xt="resolutionPlusOneRep":et?Xt="resolutionBestRep":St?Xt="bandwidthBestRep":je[0]&&(Xt="enabledPlaylistReps"),logFn(`choosing ${representationToString(Ut)} using ${Xt} with options`,R),Ut.playlist}return logFn("could not choose a playlist with options",R),null};const lastBandwidthSelector=function(){let o=this.useDevicePixelRatio&&window$1$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(o=this.customPixelRatio),simpleSelector(this.playlists.main,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*o,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*o,this.limitRenditionByPlayerDimensions,this.playlistController_)},movingAverageBandwidthSelector=function(o){let r=-1,S=-1;if(o<0||o>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let E=this.useDevicePixelRatio&&window$1$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(E=this.customPixelRatio),r<0&&(r=this.systemBandwidth,S=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==S&&(r=o*this.systemBandwidth+(1-o)*r,S=this.systemBandwidth),simpleSelector(this.playlists.main,r,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*E,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*E,this.limitRenditionByPlayerDimensions,this.playlistController_)}},minRebufferMaxBandwidthSelector=function(o){const{main:r,currentTime:S,bandwidth:E,duration:x,segmentDuration:C,timeUntilRebuffer:R,currentTimeline:Ce,syncController:Ue}=o,je=r.playlists.filter(kt=>!Playlist.isIncompatible(kt));let Xe=je.filter(Playlist.isEnabled);Xe.length||(Xe=je.filter(kt=>!Playlist.isDisabled(kt)));const St=Xe.filter(Playlist.hasAttribute.bind(null,"BANDWIDTH")).map(kt=>{const Ft=Ue.getSyncPoint(kt,x,Ce,S)?1:2,Mt=Playlist.estimateSegmentRequestTime(C,E,kt)*Ft-R;return{playlist:kt,rebufferingImpact:Mt}}),Dt=St.filter(kt=>kt.rebufferingImpact<=0);return stableSort(Dt,(kt,et)=>comparePlaylistBandwidth(et.playlist,kt.playlist)),Dt.length?Dt[0]:(stableSort(St,(kt,et)=>kt.rebufferingImpact-et.rebufferingImpact),St[0]||null)},lowestBitrateCompatibleVariantSelector=function(){const o=this.playlists.main.playlists.filter(Playlist.isEnabled);return stableSort(o,(S,E)=>comparePlaylistBandwidth(S,E)),o.filter(S=>!!codecsForPlaylist(this.playlists.main,S).video)[0]||null},concatSegments=o=>{let r=0,S;return o.bytes&&(S=new Uint8Array(o.bytes),o.segments.forEach(E=>{S.set(E,r),r+=E.byteLength})),S};function compactSegmentUrlDescription(o){try{return new URL(o).pathname.split("/").slice(-2).join("/")}catch{return""}}const createCaptionsTrackIfNotExists=function(o,r,S){if(!o[S]){r.trigger({type:"usage",name:"vhs-608"});let E=S;/^cc708_/.test(S)&&(E="SERVICE"+S.split("_")[1]);const x=r.textTracks().getTrackById(E);if(x)o[S]=x;else{const C=r.options_.vhs&&r.options_.vhs.captionServices||{};let R=S,Ce=S,Ue=!1;const je=C[E];je&&(R=je.label,Ce=je.language,Ue=je.default),o[S]=r.addRemoteTextTrack({kind:"captions",id:E,default:Ue,label:R,language:Ce},!1).track}}},addCaptionData=function({inbandTextTracks:o,captionArray:r,timestampOffset:S}){if(!r)return;const E=window$1$1.WebKitDataCue||window$1$1.VTTCue;r.forEach(x=>{const C=x.stream;x.content?x.content.forEach(R=>{const Ce=new E(x.startTime+S,x.endTime+S,R.text);Ce.line=R.line,Ce.align="left",Ce.position=R.position,Ce.positionAlign="line-left",o[C].addCue(Ce)}):o[C].addCue(new E(x.startTime+S,x.endTime+S,x.text))})},deprecateOldCue=function(o){Object.defineProperties(o.frame,{id:{get(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),o.value.key}},value:{get(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),o.value.data}},privateData:{get(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),o.value.data}}})},addMetadata=({inbandTextTracks:o,metadataArray:r,timestampOffset:S,videoDuration:E})=>{if(!r)return;const x=window$1$1.WebKitDataCue||window$1$1.VTTCue,C=o.metadataTrack_;if(!C||(r.forEach(Xe=>{const Ye=Xe.cueTime+S;typeof Ye!="number"||window$1$1.isNaN(Ye)||Ye<0||!(Ye<1/0)||!Xe.frames||!Xe.frames.length||Xe.frames.forEach(St=>{const Dt=new x(Ye,Ye,St.value||St.url||St.data||"");Dt.frame=St,Dt.value=St,deprecateOldCue(Dt),C.addCue(Dt)})}),!C.cues||!C.cues.length))return;const R=C.cues,Ce=[];for(let Xe=0;Xe<R.length;Xe++)R[Xe]&&Ce.push(R[Xe]);const Ue=Ce.reduce((Xe,Ye)=>{const St=Xe[Ye.startTime]||[];return St.push(Ye),Xe[Ye.startTime]=St,Xe},{}),je=Object.keys(Ue).sort((Xe,Ye)=>Number(Xe)-Number(Ye));je.forEach((Xe,Ye)=>{const St=Ue[Xe],Dt=isFinite(E)?E:Xe,kt=Number(je[Ye+1])||Dt;St.forEach(et=>{et.endTime=kt})})},dateRangeAttr={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},dateRangeKeysToOmit=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),addDateRangeMetadata=({inbandTextTracks:o,dateRanges:r})=>{const S=o.metadataTrack_;if(!S)return;const E=window$1$1.WebKitDataCue||window$1$1.VTTCue;r.forEach(x=>{for(const C of Object.keys(x)){if(dateRangeKeysToOmit.has(C))continue;const R=new E(x.startTime,x.endTime,"");R.id=x.id,R.type="com.apple.quicktime.HLS",R.value={key:dateRangeAttr[C],data:x[C]},(C==="scte35Out"||C==="scte35In")&&(R.value.data=new Uint8Array(R.value.data.match(/[\da-f]{2}/gi)).buffer),S.addCue(R)}x.processDateRange()})},createMetadataTrackIfNotExists=(o,r,S)=>{o.metadataTrack_||(o.metadataTrack_=S.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,videojs.browser.IS_ANY_SAFARI||(o.metadataTrack_.inBandMetadataTrackDispatchType=r))},removeCuesFromTrack=function(o,r,S){let E,x;if(S&&S.cues)for(E=S.cues.length;E--;)x=S.cues[E],x.startTime>=o&&x.endTime<=r&&S.removeCue(x)},removeDuplicateCuesFromTrack=function(o){const r=o.cues;if(!r)return;const S={};for(let E=r.length-1;E>=0;E--){const x=r[E],C=`${x.startTime}-${x.endTime}-${x.text}`;S[C]?o.removeCue(x):S[C]=x}},gopsSafeToAlignWith=(o,r,S)=>{if(typeof r>"u"||r===null||!o.length)return[];const E=Math.ceil((r-S+3)*clock.ONE_SECOND_IN_TS);let x;for(x=0;x<o.length&&!(o[x].pts>E);x++);return o.slice(x)},updateGopBuffer=(o,r,S)=>{if(!r.length)return o;if(S)return r.slice();const E=r[0].pts;let x=0;for(x;x<o.length&&!(o[x].pts>=E);x++);return o.slice(0,x).concat(r)},removeGopBuffer=(o,r,S,E)=>{const x=Math.ceil((r-E)*clock.ONE_SECOND_IN_TS),C=Math.ceil((S-E)*clock.ONE_SECOND_IN_TS),R=o.slice();let Ce=o.length;for(;Ce--&&!(o[Ce].pts<=C););if(Ce===-1)return R;let Ue=Ce+1;for(;Ue--&&!(o[Ue].pts<=x););return Ue=Math.max(Ue,0),R.splice(Ue,Ce-Ue+1),R},shallowEqual=function(o,r){if(!o&&!r||!o&&r||o&&!r)return!1;if(o===r)return!0;const S=Object.keys(o).sort(),E=Object.keys(r).sort();if(S.length!==E.length)return!1;for(let x=0;x<S.length;x++){const C=S[x];if(C!==E[x]||o[C]!==r[C])return!1}return!0},getSyncSegmentCandidate=function(o,r,S){r=r||[];const E=[];let x=0;for(let C=0;C<r.length;C++){const R=r[C];if(o===R.timeline&&(E.push(C),x+=R.duration,x>S))return C}return E.length===0?0:E[E.length-1]},MIN_BACK_BUFFER=1,CHECK_BUFFER_DELAY=500,finite=o=>typeof o=="number"&&isFinite(o),MIN_SEGMENT_DURATION_TO_SAVE_STATS=1/60,illegalMediaSwitch=(o,r,S)=>o!=="main"||!r||!S?null:!S.hasAudio&&!S.hasVideo?"Neither audio nor video found in segment.":r.hasVideo&&!S.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&S.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,safeBackBufferTrimTime=(o,r,S)=>{let E=r-Config.BACK_BUFFER_LENGTH;o.length&&(E=Math.max(E,o.start(0)));const x=r-S;return Math.min(x,E)},segmentInfoString=o=>{const{startOfSegment:r,duration:S,segment:E,part:x,playlist:{mediaSequence:C,id:R,segments:Ce=[]},mediaIndex:Ue,partIndex:je,timeline:Xe}=o,Ye=Ce.length-1;let St="mediaIndex/partIndex increment";o.getMediaInfoForTime?St=`getMediaInfoForTime (${o.getMediaInfoForTime})`:o.isSyncRequest&&(St="getSyncSegmentCandidate (isSyncRequest)"),o.independent&&(St+=` with independent ${o.independent}`);const Dt=typeof je=="number",kt=o.segment.uri?"segment":"pre-segment",et=Dt?getKnownPartCount({preloadSegment:E})-1:0;return`${kt} [${C+Ue}/${C+Ye}]`+(Dt?` part [${je}/${et}]`:"")+` segment start/end [${E.start} => ${E.end}]`+(Dt?` part start/end [${x.start} => ${x.end}]`:"")+` startOfSegment [${r}] duration [${S}] timeline [${Xe}] selected by [${St}] playlist [${R}]`},timingInfoPropertyForMedia=o=>`${o}TimingInfo`,timestampOffsetForSegment=({segmentTimeline:o,currentTimeline:r,startOfSegment:S,buffered:E,overrideCheck:x})=>!x&&o===r?null:o<r?S:E.length?E.end(E.length-1):S,shouldWaitForTimelineChange=({timelineChangeController:o,currentTimeline:r,segmentTimeline:S,loaderType:E,audioDisabled:x})=>{if(r===S)return!1;if(E==="audio"){const C=o.lastTimelineChange({type:"main"});return!C||C.to!==S}if(E==="main"&&x){const C=o.pendingTimelineChange({type:"audio"});return!(C&&C.to===S)}return!1},shouldFixBadTimelineChanges=o=>{if(!o)return!1;const r=o.pendingTimelineChange({type:"audio"}),S=o.pendingTimelineChange({type:"main"}),E=r&&S,x=E&&r.to!==S.to;return!!(E&&r.from!==-1&&S.from!==-1&&x)},fixBadTimelineChange=o=>{o&&(o.pause(),o.resetEverything(),o.load())},isAudioTimelineBehind=o=>{const r=o.timelineChangeController_.pendingTimelineChange({type:"audio"}),S=o.timelineChangeController_.pendingTimelineChange({type:"main"});return r&&S&&r.to<S.to},checkAndFixTimelines=o=>{const r=o.pendingSegment_;if(!r)return;if(shouldWaitForTimelineChange({timelineChangeController:o.timelineChangeController_,currentTimeline:o.currentTimeline_,segmentTimeline:r.timeline,loaderType:o.loaderType_,audioDisabled:o.audioDisabled_})&&shouldFixBadTimelineChanges(o.timelineChangeController_)){if(isAudioTimelineBehind(o)){o.timelineChangeController_.trigger("audioTimelineBehind");return}fixBadTimelineChange(o)}},mediaDuration=o=>{let r=0;return["video","audio"].forEach(function(S){const E=o[`${S}TimingInfo`];if(!E)return;const{start:x,end:C}=E;let R;typeof x=="bigint"||typeof C=="bigint"?R=window$1$1.BigInt(C)-window$1$1.BigInt(x):typeof x=="number"&&typeof C=="number"&&(R=C-x),typeof R<"u"&&R>r&&(r=R)}),typeof r=="bigint"&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r},segmentTooLong=({segmentDuration:o,maxDuration:r})=>o?Math.round(o)>r+TIME_FUDGE_FACTOR:!1,getTroublesomeSegmentDurationMessage=(o,r)=>{if(r!=="hls")return null;const S=mediaDuration({audioTimingInfo:o.audioTimingInfo,videoTimingInfo:o.videoTimingInfo});if(!S)return null;const E=o.playlist.targetDuration,x=segmentTooLong({segmentDuration:S,maxDuration:E*2}),C=segmentTooLong({segmentDuration:S,maxDuration:E}),R=`Segment with index ${o.mediaIndex} from playlist ${o.playlist.id} has a duration of ${S} when the reported duration is ${o.duration} and the target duration is ${E}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return x||C?{severity:x?"warn":"info",message:R}:null},segmentInfoPayload=({type:o,segment:r})=>{if(!r)return;const S=!!(r.key||r.map&&r.map.ke),E=!!(r.map&&!r.map.bytes),x=r.startOfSegment===void 0?r.start:r.startOfSegment;return{type:o||r.type,uri:r.resolvedUri||r.uri,start:x,duration:r.duration,isEncrypted:S,isMediaInitialization:E}};class SegmentLoader extends videojs.EventTarget{constructor(r,S={}){if(super(),!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=r.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=r.hasPlayed,this.currentTime_=r.currentTime,this.seekable_=r.seekable,this.seeking_=r.seeking,this.duration_=r.duration,this.mediaSource_=r.mediaSource,this.vhs_=r.vhs,this.loaderType_=r.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=r.segmentMetadataTrack,this.goalBufferLength_=r.goalBufferLength,this.sourceType_=r.sourceType,this.sourceUpdater_=r.sourceUpdater,this.inbandTextTracks_=r.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=r.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=r.parse708captions,this.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,this.captionServices_=r.captionServices,this.exactManifestTimings=r.exactManifestTimings,this.addMetadataToTextTrack=r.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=r.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=r.decrypter,this.syncController_=r.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=logger(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(E){E!==this.state_&&(this.logger_(`${this.state_} -> ${E}`),this.state_=E,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.sourceUpdater_.on("codecschange",E=>{this.trigger(_extends$3({type:"codecschange"},E))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",E=>{this.trigger(_extends$3({type:"timelinechange"},E)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():checkAndFixTimelines(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return segmentTransmuxer.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(r){this.audioDisabled_=!r,r?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window$1$1.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(r){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==r}error(r){return typeof r<"u"&&(this.logger_("error occurred:",r),this.error_=r),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const r=this.getMediaInfo_();if(!this.sourceUpdater_||!r)return createTimeRanges();if(this.loaderType_==="main"){const{hasAudio:S,hasVideo:E,isMuxed:x}=r;if(E&&S&&!this.audioDisabled_&&!x)return this.sourceUpdater_.buffered();if(E)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(r,S=!1){if(!r)return null;const E=initSegmentId(r);let x=this.initSegments_[E];return S&&!x&&r.bytes&&(this.initSegments_[E]=x={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:r.bytes,tracks:r.tracks,timescales:r.timescales}),x||r}segmentKey(r,S=!1){if(!r)return null;const E=segmentKeyId(r);let x=this.keyCache_[E];this.cacheEncryptionKeys_&&S&&!x&&r.bytes&&(this.keyCache_[E]=x={resolvedUri:r.resolvedUri,bytes:r.bytes});const C={resolvedUri:(x||r).resolvedUri};return x&&(C.bytes=x.bytes),C}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(r,S={}){if(!r)return;const E=this.playlist_,x=this.pendingSegment_;this.playlist_=r,this.xhrOptions_=S,this.state==="INIT"&&(r.syncInfo={mediaSequence:r.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(r));let C=null;if(E&&(E.id?C=E.id:E.uri&&(C=E.uri)),this.logger_(`playlist update [${C} => ${r.id||r.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(r,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${lastBufferedEnd(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!E||E.uri!==r.uri){this.mediaIndex!==null&&(!r.endList&&typeof r.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const R=r.mediaSequence-E.mediaSequence;if(this.logger_(`live window shift [${R}]`),this.mediaIndex!==null)if(this.mediaIndex-=R,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const Ce=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!Ce.parts||!Ce.parts.length||!Ce.parts[this.partIndex])){const Ue=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=Ue}}x&&(x.mediaIndex-=R,x.mediaIndex<0?(x.mediaIndex=null,x.partIndex=null):(x.mediaIndex>=0&&(x.segment=r.segments[x.mediaIndex]),x.partIndex>=0&&x.segment.parts&&(x.part=x.segment.parts[x.partIndex]))),this.syncController_.saveExpiredSegmentInfo(E,r)}pause(){this.checkBufferTimeout_&&(window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(r){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,r),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const r=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!r&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(r,S,E=()=>{},x=!1){if(S===1/0&&(S=this.duration_()),S<=r){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let C=1;const R=()=>{C--,C===0&&E()};(x||!this.audioDisabled_)&&(C++,this.sourceUpdater_.removeAudio(r,S,R)),(x||this.loaderType_==="main")&&(this.gopBuffer_=removeGopBuffer(this.gopBuffer_,r,S,this.timeMapping_),C++,this.sourceUpdater_.removeVideo(r,S,R));for(const Ce in this.inbandTextTracks_)removeCuesFromTrack(r,S,this.inbandTextTracks_[Ce]);removeCuesFromTrack(r,S,this.segmentMetadataTrack_),R()}monitorBuffer_(){this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1$1.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&window$1$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1$1.setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const r=this.chooseNextRequest_();if(!r)return;const S={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:r})};this.trigger({type:"segmentselected",metadata:S}),typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline})),this.loadSegment_(r)}isEndOfStream_(r=this.mediaIndex,S=this.playlist_,E=this.partIndex){if(!S||!this.mediaSource_)return!1;const x=typeof r=="number"&&S.segments[r],C=r+1===S.segments.length,R=!x||!x.parts||E+1===x.parts.length;return S.endList&&this.mediaSource_.readyState==="open"&&C&&R}chooseNextRequest_(){const r=this.buffered_(),S=lastBufferedEnd(r)||0,E=timeAheadOf(r,this.currentTime_()),x=!this.hasPlayed_()&&E>=1,C=E>=this.goalBufferLength_(),R=this.playlist_.segments;if(!R.length||x||C)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const Ce={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(Ce.isSyncRequest)Ce.mediaIndex=getSyncSegmentCandidate(this.currentTimeline_,R,S),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${Ce.mediaIndex}`);else if(this.mediaIndex!==null){const St=R[this.mediaIndex],Dt=typeof this.partIndex=="number"?this.partIndex:-1;Ce.startOfSegment=St.end?St.end:S,St.parts&&St.parts[Dt+1]?(Ce.mediaIndex=this.mediaIndex,Ce.partIndex=Dt+1):Ce.mediaIndex=this.mediaIndex+1}else{let St,Dt,kt;const et=this.fetchAtBuffer_?S:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${et}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${S}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const Ft=this.getSyncInfoFromMediaSequenceSync_(et);if(!Ft){const xt="No sync info found while using media sequence sync";return this.error({message:xt,metadata:{errorType:videojs.Error.StreamingFailedToSelectNextSegment,error:new Error(xt)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${Ft.start} --> ${Ft.end})`),St=Ft.segmentIndex,Dt=Ft.partIndex,kt=Ft.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const Ft=Playlist.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:et,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});St=Ft.segmentIndex,Dt=Ft.partIndex,kt=Ft.startTime}Ce.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${et}`:`currentTime ${et}`,Ce.mediaIndex=St,Ce.startOfSegment=kt,Ce.partIndex=Dt,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${Ce.mediaIndex} `)}const Ue=R[Ce.mediaIndex];let je=Ue&&typeof Ce.partIndex=="number"&&Ue.parts&&Ue.parts[Ce.partIndex];if(!Ue||typeof Ce.partIndex=="number"&&!je)return null;typeof Ce.partIndex!="number"&&Ue.parts&&(Ce.partIndex=0,je=Ue.parts[0]);const Xe=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!E&&je&&!Xe&&!je.independent)if(Ce.partIndex===0){const St=R[Ce.mediaIndex-1],Dt=St.parts&&St.parts.length&&St.parts[St.parts.length-1];Dt&&Dt.independent&&(Ce.mediaIndex-=1,Ce.partIndex=St.parts.length-1,Ce.independent="previous segment")}else Ue.parts[Ce.partIndex-1].independent&&(Ce.partIndex-=1,Ce.independent="previous part");const Ye=this.mediaSource_&&this.mediaSource_.readyState==="ended";return Ce.mediaIndex>=R.length-1&&Ye&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,Ce.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(Ce))}getSyncInfoFromMediaSequenceSync_(r){if(!this.mediaSequenceSync_)return null;const S=Math.max(r,this.mediaSequenceSync_.start);r!==S&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${r} to ${S}`);const E=this.mediaSequenceSync_.getSyncInfoForTime(S);if(!E)return null;if(!E.isAppended)return E;const x=this.mediaSequenceSync_.getSyncInfoForTime(E.end);return x?(x.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),x):null}generateSegmentInfo_(r){const{independent:S,playlist:E,mediaIndex:x,startOfSegment:C,isSyncRequest:R,partIndex:Ce,forceTimestampOffset:Ue,getMediaInfoForTime:je}=r,Xe=E.segments[x],Ye=typeof Ce=="number"&&Xe.parts[Ce],St={requestId:"segment-loader-"+Math.random(),uri:Ye&&Ye.resolvedUri||Xe.resolvedUri,mediaIndex:x,partIndex:Ye?Ce:null,isSyncRequest:R,startOfSegment:C,playlist:E,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:Xe.timeline,duration:Ye&&Ye.duration||Xe.duration,segment:Xe,part:Ye,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:je,independent:S},Dt=typeof Ue<"u"?Ue:this.isPendingTimestampOffset_;St.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:Xe.timeline,currentTimeline:this.currentTimeline_,startOfSegment:C,buffered:this.buffered_(),overrideCheck:Dt});const kt=lastBufferedEnd(this.sourceUpdater_.audioBuffered());return typeof kt=="number"&&(St.audioAppendStart=kt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(St.gopsToAlignWith=gopsSafeToAlignWith(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),St}timestampOffsetForSegment_(r){return timestampOffsetForSegment(r)}earlyAbortWhenNeeded_(r){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(r.firstBytesReceivedAt||Date.now())<1e3)return;const S=this.currentTime_(),E=r.bandwidth,x=this.pendingSegment_.duration,C=Playlist.estimateSegmentRequestTime(x,E,this.playlist_,r.bytesReceived),R=timeUntilRebuffer(this.buffered_(),S,this.vhs_.tech_.playbackRate())-1;if(C<=R)return;const Ce=minRebufferMaxBandwidthSelector({main:this.vhs_.playlists.main,currentTime:S,bandwidth:E,duration:this.duration_(),segmentDuration:x,timeUntilRebuffer:R,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!Ce)return;const je=C-R-Ce.rebufferingImpact;let Xe=.5;R<=TIME_FUDGE_FACTOR&&(Xe=1),!(!Ce.playlist||Ce.playlist.uri===this.playlist_.uri||je<Xe)&&(this.bandwidth=Ce.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(r){this.logger_(`Aborting ${segmentInfoString(r)}`),this.mediaRequestsAborted+=1}handleProgress_(r,S){this.earlyAbortWhenNeeded_(S.stats),!this.checkForAbort_(S.requestId)&&this.trigger("progress")}handleTrackInfo_(r,S){const{hasAudio:E,hasVideo:x}=S,C={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:r}),trackInfo:{hasAudio:E,hasVideo:x}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:C}),this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)&&(this.checkForIllegalMediaSwitch(S)||(S=S||{},shallowEqual(this.currentMediaInfo_,S)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=S,this.currentMediaInfo_=S,this.logger_("trackinfo update",S),this.trigger("trackinfo")),!this.checkForAbort_(r.requestId)&&(this.pendingSegment_.trackInfo=S,this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this))))}handleTimingInfo_(r,S,E,x){if(this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId))return;const C=this.pendingSegment_,R=timingInfoPropertyForMedia(S);C[R]=C[R]||{},C[R][E]=x,this.logger_(`timinginfo: ${S} - ${E} - ${x}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}handleCaptions_(r,S){if(this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId))return;if(S.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,r,S));return}const x=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),C={};S.forEach(R=>{C[R.stream]=C[R.stream]||{startTime:1/0,captions:[],endTime:0};const Ce=C[R.stream];Ce.startTime=Math.min(Ce.startTime,R.startTime+x),Ce.endTime=Math.max(Ce.endTime,R.endTime+x),Ce.captions.push(R)}),Object.keys(C).forEach(R=>{const{startTime:Ce,endTime:Ue,captions:je}=C[R],Xe=this.inbandTextTracks_;this.logger_(`adding cues from ${Ce} -> ${Ue} for ${R}`),createCaptionsTrackIfNotExists(Xe,this.vhs_.tech_,R),removeCuesFromTrack(Ce,Ue,Xe[R]),addCaptionData({captionArray:je,inbandTextTracks:Xe,timestampOffset:x})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(r,S,E){if(this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,r,S,E));return}this.addMetadataToTextTrack(E,S,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(r=>r()),this.metadataQueue_.caption.forEach(r=>r()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const r=this.callQueue_;this.callQueue_=[],r.forEach(S=>S())}processLoadQueue_(){const r=this.loadQueue_;this.loadQueue_=[],r.forEach(S=>S())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const r=this.pendingSegment_;return r?this.getCurrentMediaInfo_()?!shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(r=this.pendingSegment_){return r&&r.trackInfo||this.currentMediaInfo_}getMediaInfo_(r=this.pendingSegment_){return this.getCurrentMediaInfo_(r)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const r=this.pendingSegment_,S=this.getCurrentMediaInfo_();if(!r||!S)return!1;const{hasAudio:E,hasVideo:x,isMuxed:C}=S;return!(x&&!r.videoTimingInfo||E&&!this.audioDisabled_&&!C&&!r.audioTimingInfo||shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(r,S){if(this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){checkAndFixTimelines(this),this.callQueue_.push(this.handleData_.bind(this,r,S));return}const E=this.pendingSegment_;if(this.setTimeMapping_(E.timeline),this.updateMediaSecondsLoaded_(E.part||E.segment),this.mediaSource_.readyState!=="closed"){if(r.map&&(r.map=this.initSegmentForMap(r.map,!0),E.segment.map=r.map),r.key&&this.segmentKey(r.key,!0),E.isFmp4=r.isFmp4,E.timingInfo=E.timingInfo||{},E.isFmp4)this.trigger("fmp4"),E.timingInfo.start=E[timingInfoPropertyForMedia(S.type)].start;else{const x=this.getCurrentMediaInfo_(),C=this.loaderType_==="main"&&x&&x.hasVideo;let R;C&&(R=E.videoTimingInfo.start),E.timingInfo.start=this.trueSegmentStart_({currentStart:E.timingInfo.start,playlist:E.playlist,mediaIndex:E.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:C,firstVideoFrameTimeForData:R,videoTimingInfo:E.videoTimingInfo,audioTimingInfo:E.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(E,S.type),this.updateSourceBufferTimestampOffset_(E),E.isSyncRequest){this.updateTimingInfoEnd_(E),this.syncController_.saveSegmentTimingInfo({segmentInfo:E,shouldSaveTimelineMapping:this.loaderType_==="main"});const x=this.chooseNextRequest_();if(x.mediaIndex!==E.mediaIndex||x.partIndex!==E.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}E.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(E,S)}}updateAppendInitSegmentStatus(r,S){this.loaderType_==="main"&&typeof r.timestampOffset=="number"&&!r.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[S]!==r.playlist&&(this.appendInitSegment_[S]=!0)}getInitSegmentAndUpdateState_({type:r,initSegment:S,map:E,playlist:x}){if(E){const C=initSegmentId(E);if(this.activeInitSegmentId_===C)return null;S=this.initSegmentForMap(E,!0).bytes,this.activeInitSegmentId_=C}return S&&this.appendInitSegment_[r]?(this.playlistOfLastInitSegment_[r]=x,this.appendInitSegment_[r]=!1,this.activeInitSegmentId_=null,S):null}handleQuotaExceededError_({segmentInfo:r,type:S,bytes:E},x){const C=this.sourceUpdater_.audioBuffered(),R=this.sourceUpdater_.videoBuffered();C.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+timeRangesToArray(C).join(", ")),R.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+timeRangesToArray(R).join(", "));const Ce=C.length?C.start(0):0,Ue=C.length?C.end(C.length-1):0,je=R.length?R.start(0):0,Xe=R.length?R.end(R.length-1):0;if(Ue-Ce<=MIN_BACK_BUFFER&&Xe-je<=MIN_BACK_BUFFER){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${E.byteLength}, audio buffer: ${timeRangesToArray(C).join(", ")}, video buffer: ${timeRangesToArray(R).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:r,type:S,bytes:E}));const St=this.currentTime_()-MIN_BACK_BUFFER;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${St}`),this.remove(0,St,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${MIN_BACK_BUFFER}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=window$1$1.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},MIN_BACK_BUFFER*1e3)},!0)}handleAppendError_({segmentInfo:r,type:S,bytes:E},x){if(x){if(x.code===QUOTA_EXCEEDED_ERR){this.handleQuotaExceededError_({segmentInfo:r,type:S,bytes:E});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",x),this.error({message:`${S} append of ${E.length}b failed for segment #${r.mediaIndex} in playlist ${r.playlist.id}`,metadata:{errorType:videojs.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:r,type:S,initSegment:E,data:x,bytes:C}){if(!C){const Ce=[x];let Ue=x.byteLength;E&&(Ce.unshift(E),Ue+=E.byteLength),C=concatSegments({bytes:Ue,segments:Ce})}const R={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:r})};this.trigger({type:"segmentappendstart",metadata:R}),this.sourceUpdater_.appendBuffer({segmentInfo:r,type:S,bytes:C},this.handleAppendError_.bind(this,{segmentInfo:r,type:S,bytes:C}))}handleSegmentTimingInfo_(r,S,E){if(!this.pendingSegment_||S!==this.pendingSegment_.requestId)return;const x=this.pendingSegment_.segment,C=`${r}TimingInfo`;x[C]||(x[C]={}),x[C].transmuxerPrependedSeconds=E.prependedContentDuration||0,x[C].transmuxedPresentationStart=E.start.presentation,x[C].transmuxedDecodeStart=E.start.decode,x[C].transmuxedPresentationEnd=E.end.presentation,x[C].transmuxedDecodeEnd=E.end.decode,x[C].baseMediaDecodeTime=E.baseMediaDecodeTime}appendData_(r,S){const{type:E,data:x}=S;if(!x||!x.byteLength||E==="audio"&&this.audioDisabled_)return;const C=this.getInitSegmentAndUpdateState_({type:E,initSegment:S.initSegment,playlist:r.playlist,map:r.isFmp4?r.segment.map:null});this.appendToSourceBuffer_({segmentInfo:r,type:E,initSegment:C,data:x})}loadSegment_(r){if(this.state="WAITING",this.pendingSegment_=r,this.trimBackBuffer_(r),typeof r.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){checkAndFixTimelines(this),this.loadQueue_.push(()=>{const S=_extends$3({},r,{forceTimestampOffset:!0});_extends$3(r,this.generateSegmentInfo_(S)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(r)});return}this.updateTransmuxerAndRequestSegment_(r)}updateTransmuxerAndRequestSegment_(r){this.shouldUpdateTransmuxerTimestampOffset_(r.timestampOffset)&&(this.gopBuffer_.length=0,r.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:r.timestampOffset}));const S=this.createSimplifiedSegmentObj_(r),E=this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex),x=this.mediaIndex!==null,C=r.timeline!==this.currentTimeline_&&r.timeline>0,R=E||x&&C;this.logger_(`Requesting
${compactSegmentUrlDescription(r.uri)}
${segmentInfoString(r)}`),S.map&&!S.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),r.abortRequests=mediaSegmentRequest({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:S,abortFn:this.handleAbort_.bind(this,r),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",r.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",r.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:R,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:Ce,level:Ue,stream:je})=>{this.logger_(`${segmentInfoString(r)} logged from transmuxer stream ${je} as a ${Ue}: ${Ce}`)},triggerSegmentEventFn:({type:Ce,segment:Ue,keyInfo:je,trackInfo:Xe,timingInfo:Ye})=>{const Dt={segmentInfo:segmentInfoPayload({segment:Ue})};je&&(Dt.keyInfo=je),Xe&&(Dt.trackInfo=Xe),Ye&&(Dt.timingInfo=Ye),this.trigger({type:Ce,metadata:Dt})}})}trimBackBuffer_(r){const S=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);S>0&&this.remove(0,S)}createSimplifiedSegmentObj_(r){const S=r.segment,E=r.part,x=r.segment.key||r.segment.map&&r.segment.map.key,C=r.segment.map&&!r.segment.map.bytes,R={resolvedUri:E?E.resolvedUri:S.resolvedUri,byterange:E?E.byterange:S.byterange,requestId:r.requestId,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,part:r.part,type:this.loaderType_,start:r.startOfSegment,duration:r.duration,isEncrypted:x,isMediaInitialization:C},Ce=r.playlist.segments[r.mediaIndex-1];if(Ce&&Ce.timeline===S.timeline&&(Ce.videoTimingInfo?R.baseStartTime=Ce.videoTimingInfo.transmuxedDecodeEnd:Ce.audioTimingInfo&&(R.baseStartTime=Ce.audioTimingInfo.transmuxedDecodeEnd)),S.key){const Ue=S.key.iv||new Uint32Array([0,0,0,r.mediaIndex+r.playlist.mediaSequence]);R.key=this.segmentKey(S.key),R.key.iv=Ue}return S.map&&(R.map=this.initSegmentForMap(S.map)),R}saveTransferStats_(r){this.mediaRequests+=1,r&&(this.mediaBytesTransferred+=r.bytesReceived,this.mediaTransferDuration+=r.roundTripTime)}saveBandwidthRelatedStats_(r,S){if(this.pendingSegment_.byteLength=S.bytesReceived,r<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's bandwidth because its duration of ${r} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const E={bandwidthInfo:{from:this.bandwidth,to:S.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:E}),this.bandwidth=S.bandwidth,this.roundTrip=S.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(r,S,E){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,r,S,E));return}if(this.saveTransferStats_(S.stats),!this.pendingSegment_||S.requestId!==this.pendingSegment_.requestId)return;if(r){if(this.pendingSegment_=null,this.state="READY",r.code===REQUEST_ERRORS.ABORTED)return;if(this.pause(),r.code===REQUEST_ERRORS.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(r),this.trigger("error");return}const x=this.pendingSegment_;this.saveBandwidthRelatedStats_(x.duration,S.stats),x.endOfAllRequests=S.endOfAllRequests,E.gopInfo&&(this.gopBuffer_=updateGopBuffer(this.gopBuffer_,E.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(x)}setTimeMapping_(r){const S=this.syncController_.mappingForTimeline(r);S!==null&&(this.timeMapping_=S)}updateMediaSecondsLoaded_(r){typeof r.start=="number"&&typeof r.end=="number"?this.mediaSecondsLoaded+=r.end-r.start:this.mediaSecondsLoaded+=r.duration}shouldUpdateTransmuxerTimestampOffset_(r){return r===null?!1:this.loaderType_==="main"&&r!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&r!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:r,playlist:S,mediaIndex:E,firstVideoFrameTimeForData:x,currentVideoTimestampOffset:C,useVideoTimingInfo:R,videoTimingInfo:Ce,audioTimingInfo:Ue}){if(typeof r<"u")return r;if(!R)return Ue.start;const je=S.segments[E-1];return E===0||!je||typeof je.start>"u"||je.end!==x+C?x:Ce.start}waitForAppendsToComplete_(r){const S=this.getCurrentMediaInfo_(r);if(!S){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:E,hasVideo:x,isMuxed:C}=S,R=this.loaderType_==="main"&&x,Ce=!this.audioDisabled_&&E&&!C;if(r.waitingOnAppends=0,!r.hasAppendedData_){!r.timingInfo&&typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),r.timingInfo={start:0},r.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(r),this.processMetadataQueue_()),this.checkAppendsDone_(r);return}R&&r.waitingOnAppends++,Ce&&r.waitingOnAppends++,R&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,r)),Ce&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,r))}checkAppendsDone_(r){this.checkForAbort_(r.requestId)||(r.waitingOnAppends--,r.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(r){const S=illegalMediaSwitch(this.loaderType_,this.getCurrentMediaInfo_(),r);return S?(this.error({message:S,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(r){if(r.timestampOffset===null||typeof r.timingInfo.start!="number"||r.changedTimestampOffset||this.loaderType_!=="main")return;let S=!1;r.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:r.segment.videoTimingInfo,audioTimingInfo:r.segment.audioTimingInfo,timingInfo:r.timingInfo}),r.changedTimestampOffset=!0,r.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(r.timestampOffset),S=!0),r.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(r.timestampOffset),S=!0),S&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:r,audioTimingInfo:S,timingInfo:E}){return this.useDtsForTimestampOffset_?r&&typeof r.transmuxedDecodeStart=="number"?r.transmuxedDecodeStart:S&&typeof S.transmuxedDecodeStart=="number"?S.transmuxedDecodeStart:E.start:E.start}updateTimingInfoEnd_(r){r.timingInfo=r.timingInfo||{};const S=this.getMediaInfo_(),x=this.loaderType_==="main"&&S&&S.hasVideo&&r.videoTimingInfo?r.videoTimingInfo:r.audioTimingInfo;x&&(r.timingInfo.end=typeof x.end=="number"?x.end:x.start+r.duration)}handleAppendsDone_(){if(this.pendingSegment_){const Ue={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:Ue})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const r=this.pendingSegment_;r.part&&r.part.syncInfo?r.part.syncInfo.markAppended():r.segment.syncInfo&&r.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(r),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});const S=getTroublesomeSegmentDurationMessage(r,this.sourceType_);if(S&&(S.severity==="warn"?videojs.log.warn(S.message):this.logger_(S.message)),this.recordThroughput_(r),this.pendingSegment_=null,this.state="READY",r.isSyncRequest&&(this.trigger("syncinfoupdate"),!r.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${segmentInfoString(r)}`);return}this.logger_(`Appended ${segmentInfoString(r)}`),this.addSegmentMetadataCue_(r),this.fetchAtBuffer_=!0,this.currentTimeline_!==r.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:r.timeline})),this.currentTimeline_=r.timeline,this.trigger("syncinfoupdate");const E=r.segment,x=r.part,C=E.end&&this.currentTime_()-E.end>r.playlist.targetDuration*3,R=x&&x.end&&this.currentTime_()-x.end>r.playlist.partTargetDuration*3;if(C||R){this.logger_(`bad ${C?"segment":"part"} ${segmentInfoString(r)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=r.mediaIndex,this.partIndex=r.partIndex,this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex)&&this.endOfStream(),this.trigger("appended"),r.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(r){if(r.duration<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's throughput because its duration of ${r.duration} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const S=this.throughput.rate,E=Date.now()-r.endOfAllRequests+1,x=Math.floor(r.byteLength/E*8*1e3);this.throughput.rate+=(x-S)/++this.throughput.count}addSegmentMetadataCue_(r){if(!this.segmentMetadataTrack_)return;const S=r.segment,E=S.start,x=S.end;if(!finite(E)||!finite(x))return;removeCuesFromTrack(E,x,this.segmentMetadataTrack_);const C=window$1$1.WebKitDataCue||window$1$1.VTTCue,R={custom:S.custom,dateTimeObject:S.dateTimeObject,dateTimeString:S.dateTimeString,programDateTime:S.programDateTime,bandwidth:r.playlist.attributes.BANDWIDTH,resolution:r.playlist.attributes.RESOLUTION,codecs:r.playlist.attributes.CODECS,byteLength:r.byteLength,uri:r.uri,timeline:r.timeline,playlist:r.playlist.id,start:E,end:x},Ce=JSON.stringify(R),Ue=new C(E,x,Ce);Ue.value=R,this.segmentMetadataTrack_.addCue(Ue)}}function noop(){}const toTitleCase=function(o){return typeof o!="string"?o:o.replace(/./,r=>r.toUpperCase())},bufferTypes=["video","audio"],updating=(o,r)=>{const S=r[`${o}Buffer`];return S&&S.updating||r.queuePending[o]},nextQueueIndexOfType=(o,r)=>{for(let S=0;S<r.length;S++){const E=r[S];if(E.type==="mediaSource")return null;if(E.type===o)return S}return null},shiftQueue=(o,r)=>{if(r.queue.length===0)return;let S=0,E=r.queue[S];if(E.type==="mediaSource"){!r.updating()&&r.mediaSource.readyState!=="closed"&&(r.queue.shift(),E.action(r),E.doneFn&&E.doneFn(),shiftQueue("audio",r),shiftQueue("video",r));return}if(o!=="mediaSource"&&!(!r.ready()||r.mediaSource.readyState==="closed"||updating(o,r))){if(E.type!==o){if(S=nextQueueIndexOfType(o,r.queue),S===null)return;E=r.queue[S]}if(r.queue.splice(S,1),r.queuePending[o]=E,E.action(o,r),!E.doneFn){r.queuePending[o]=null,shiftQueue(o,r);return}}},cleanupBuffer=(o,r)=>{const S=r[`${o}Buffer`],E=toTitleCase(o);S&&(S.removeEventListener("updateend",r[`on${E}UpdateEnd_`]),S.removeEventListener("error",r[`on${E}Error_`]),r.codecs[o]=null,r[`${o}Buffer`]=null)},inSourceBuffers=(o,r)=>o&&r&&Array.prototype.indexOf.call(o.sourceBuffers,r)!==-1,actions={appendBuffer:(o,r,S)=>(E,x)=>{const C=x[`${E}Buffer`];if(inSourceBuffers(x.mediaSource,C)){x.logger_(`Appending segment ${r.mediaIndex}'s ${o.length} bytes to ${E}Buffer`);try{C.appendBuffer(o)}catch(R){x.logger_(`Error with code ${R.code} `+(R.code===QUOTA_EXCEEDED_ERR?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${r.mediaIndex} to ${E}Buffer`),x.queuePending[E]=null,S(R)}}},remove:(o,r)=>(S,E)=>{const x=E[`${S}Buffer`];if(inSourceBuffers(E.mediaSource,x)){E.logger_(`Removing ${o} to ${r} from ${S}Buffer`);try{x.remove(o,r)}catch{E.logger_(`Remove ${o} to ${r} from ${S}Buffer failed`)}}},timestampOffset:o=>(r,S)=>{const E=S[`${r}Buffer`];inSourceBuffers(S.mediaSource,E)&&(S.logger_(`Setting ${r}timestampOffset to ${o}`),E.timestampOffset=o)},callback:o=>(r,S)=>{o()},endOfStream:o=>r=>{if(r.mediaSource.readyState==="open"){r.logger_(`Calling mediaSource endOfStream(${o||""})`);try{r.mediaSource.endOfStream(o)}catch(S){videojs.log.warn("Failed to call media source endOfStream",S)}}},duration:o=>r=>{r.logger_(`Setting mediaSource duration to ${o}`);try{r.mediaSource.duration=o}catch(S){videojs.log.warn("Failed to set media source duration",S)}},abort:()=>(o,r)=>{if(r.mediaSource.readyState!=="open")return;const S=r[`${o}Buffer`];if(inSourceBuffers(r.mediaSource,S)){r.logger_(`calling abort on ${o}Buffer`);try{S.abort()}catch(E){videojs.log.warn(`Failed to abort on ${o}Buffer`,E)}}},addSourceBuffer:(o,r)=>S=>{const E=toTitleCase(o),x=getMimeForCodec(r);S.logger_(`Adding ${o}Buffer with codec ${r} to mediaSource`);const C=S.mediaSource.addSourceBuffer(x);C.addEventListener("updateend",S[`on${E}UpdateEnd_`]),C.addEventListener("error",S[`on${E}Error_`]),S.codecs[o]=r,S[`${o}Buffer`]=C},removeSourceBuffer:o=>r=>{const S=r[`${o}Buffer`];if(cleanupBuffer(o,r),!!inSourceBuffers(r.mediaSource,S)){r.logger_(`Removing ${o}Buffer with codec ${r.codecs[o]} from mediaSource`);try{r.mediaSource.removeSourceBuffer(S)}catch(E){videojs.log.warn(`Failed to removeSourceBuffer ${o}Buffer`,E)}}},changeType:o=>(r,S)=>{const E=S[`${r}Buffer`],x=getMimeForCodec(o);if(!inSourceBuffers(S.mediaSource,E))return;const C=o.substring(0,o.indexOf(".")),R=S.codecs[r];if(R.substring(0,R.indexOf("."))===C)return;const Ue={codecsChangeInfo:{from:R,to:o}};S.trigger({type:"codecschange",metadata:Ue}),S.logger_(`changing ${r}Buffer codec from ${R} to ${o}`);try{E.changeType(x),S.codecs[r]=o}catch(je){Ue.errorType=videojs.Error.StreamingCodecsChangeError,Ue.error=je,je.metadata=Ue,S.error_=je,S.trigger("error"),videojs.log.warn(`Failed to changeType on ${r}Buffer`,je)}}},pushQueue=({type:o,sourceUpdater:r,action:S,doneFn:E,name:x})=>{r.queue.push({type:o,action:S,doneFn:E,name:x}),shiftQueue(o,r)},onUpdateend=(o,r)=>S=>{const E=r[`${o}Buffered`](),x=bufferedRangesToString(E);if(r.logger_(`received "updateend" event for ${o} Source Buffer: `,x),r.queuePending[o]){const C=r.queuePending[o].doneFn;r.queuePending[o]=null,C&&C(r[`${o}Error_`])}shiftQueue(o,r)};class SourceUpdater extends videojs.EventTarget{constructor(r){super(),this.mediaSource=r,this.sourceopenListener_=()=>shiftQueue("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=logger("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=onUpdateend("video",this),this.onAudioUpdateEnd_=onUpdateend("audio",this),this.onVideoError_=S=>{this.videoError_=S},this.onAudioError_=S=>{this.audioError_=S},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(r){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(r),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(r,S){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.addSourceBuffer(r,S),name:"addSourceBuffer"})}abort(r){pushQueue({type:r,sourceUpdater:this,action:actions.abort(r),name:"abort"})}removeSourceBuffer(r){if(!this.canRemoveSourceBuffer()){videojs.log.error("removeSourceBuffer is not supported!");return}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.removeSourceBuffer(r),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!videojs.browser.IS_FIREFOX&&window$1$1.MediaSource&&window$1$1.MediaSource.prototype&&typeof window$1$1.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return window$1$1.SourceBuffer&&window$1$1.SourceBuffer.prototype&&typeof window$1$1.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(r,S){if(!this.canChangeType()){videojs.log.error("changeType is not supported!");return}pushQueue({type:r,sourceUpdater:this,action:actions.changeType(S),name:"changeType"})}addOrChangeSourceBuffers(r){if(!r||typeof r!="object"||Object.keys(r).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(r).forEach(S=>{const E=r[S];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(S,E);this.canChangeType()&&this.changeType(S,E)})}appendBuffer(r,S){const{segmentInfo:E,type:x,bytes:C}=r;if(this.processedAppend_=!0,x==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([r,S]),this.logger_(`delayed audio append of ${C.length} until video append`);return}const R=S;if(pushQueue({type:x,sourceUpdater:this,action:actions.appendBuffer(C,E||{mediaIndex:-1},R),doneFn:S,name:"appendBuffer"}),x==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const Ce=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${Ce.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,Ce.forEach(Ue=>{this.appendBuffer.apply(this,Ue)})}}audioBuffered(){return inSourceBuffers(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:createTimeRanges()}videoBuffered(){return inSourceBuffers(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:createTimeRanges()}buffered(){const r=inSourceBuffers(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,S=inSourceBuffers(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return S&&!r?this.audioBuffered():r&&!S?this.videoBuffered():bufferIntersection(this.audioBuffered(),this.videoBuffered())}setDuration(r,S=noop){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.duration(r),name:"duration",doneFn:S})}endOfStream(r=null,S=noop){typeof r!="string"&&(r=void 0),pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.endOfStream(r),name:"endOfStream",doneFn:S})}removeAudio(r,S,E=noop){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){E();return}pushQueue({type:"audio",sourceUpdater:this,action:actions.remove(r,S),doneFn:E,name:"remove"})}removeVideo(r,S,E=noop){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){E();return}pushQueue({type:"video",sourceUpdater:this,action:actions.remove(r,S),doneFn:E,name:"remove"})}updating(){return!!(updating("audio",this)||updating("video",this))}audioTimestampOffset(r){return typeof r<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==r&&(pushQueue({type:"audio",sourceUpdater:this,action:actions.timestampOffset(r),name:"timestampOffset"}),this.audioTimestampOffset_=r),this.audioTimestampOffset_}videoTimestampOffset(r){return typeof r<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==r&&(pushQueue({type:"video",sourceUpdater:this,action:actions.timestampOffset(r),name:"timestampOffset"}),this.videoTimestampOffset_=r),this.videoTimestampOffset_}audioQueueCallback(r){this.audioBuffer&&pushQueue({type:"audio",sourceUpdater:this,action:actions.callback(r),name:"callback"})}videoQueueCallback(r){this.videoBuffer&&pushQueue({type:"video",sourceUpdater:this,action:actions.callback(r),name:"callback"})}dispose(){this.trigger("dispose"),bufferTypes.forEach(r=>{this.abort(r),this.canRemoveSourceBuffer()?this.removeSourceBuffer(r):this[`${r}QueueCallback`](()=>cleanupBuffer(r,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const uint8ToUtf8=o=>decodeURIComponent(escape(String.fromCharCode.apply(null,o))),bufferToHexString=o=>{const r=new Uint8Array(o);return Array.from(r).map(S=>S.toString(16).padStart(2,"0")).join("")},VTT_LINE_TERMINATORS=new Uint8Array(`

`.split("").map(o=>o.charCodeAt(0)));class NoVttJsError extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class VTTSegmentLoader extends SegmentLoader{constructor(r,S={}){super(r,S),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=r.featuresNativeTextTracks,this.loadVttJs=r.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return createTimeRanges();const r=this.subtitlesTrack_.cues,S=r[0].startTime,E=r[r.length-1].startTime;return createTimeRanges([[S,E]])}initSegmentForMap(r,S=!1){if(!r)return null;const E=initSegmentId(r);let x=this.initSegments_[E];if(S&&!x&&r.bytes){const C=VTT_LINE_TERMINATORS.byteLength+r.bytes.byteLength,R=new Uint8Array(C);R.set(r.bytes),R.set(VTT_LINE_TERMINATORS,r.bytes.byteLength),this.initSegments_[E]=x={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:R}}return x||r}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(r){return typeof r>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=r,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(r,S){removeCuesFromTrack(r,S,this.subtitlesTrack_)}fillBuffer_(){const r=this.chooseNextRequest_();if(r){if(this.syncController_.timestampOffsetForTimeline(r.timeline)===null){const S=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",S),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(r)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(r){for(;r&&r.segment.empty;){if(r.mediaIndex+1>=r.playlist.segments.length){r=null;break}r=this.generateSegmentInfo_({playlist:r.playlist,mediaIndex:r.mediaIndex+1,startOfSegment:r.startOfSegment+r.duration,isSyncRequest:r.isSyncRequest})}return r}stopForError(r){this.error(r),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(r,S,E){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(S.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(r){r.code===REQUEST_ERRORS.TIMEOUT&&this.handleTimeout_(),r.code===REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(r);return}const x=this.pendingSegment_;this.saveBandwidthRelatedStats_(x.duration,S.stats),S.key&&this.segmentKey(S.key,!0),this.state="APPENDING",this.trigger("appending");const C=x.segment;if(C.map&&(C.map.bytes=S.map.bytes),x.bytes=S.bytes,typeof window$1$1.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(r,S,E),()=>this.stopForError({message:"Error loading vtt.js"}));return}C.requested=!0;try{this.parseVTTCues_(x)}catch(R){this.stopForError({message:R.message,metadata:{errorType:videojs.Error.StreamingVttParserError,error:R}});return}if(this.updateTimeMapping_(x,this.syncController_.timelines[x.timeline],this.playlist_),x.cues.length?x.timingInfo={start:x.cues[0].startTime,end:x.cues[x.cues.length-1].endTime}:x.timingInfo={start:x.startOfSegment,end:x.startOfSegment+x.duration},x.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}x.byteLength=x.bytes.byteLength,this.mediaSecondsLoaded+=C.duration,x.cues.forEach(R=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new window$1$1.VTTCue(R.startTime,R.endTime,R.text):R)}),removeDuplicateCuesFromTrack(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(r){let S,E=!1;if(typeof window$1$1.WebVTT!="function")throw new NoVttJsError;typeof window$1$1.TextDecoder=="function"?S=new window$1$1.TextDecoder("utf8"):(S=window$1$1.WebVTT.StringDecoder(),E=!0);const x=new window$1$1.WebVTT.Parser(window$1$1,window$1$1.vttjs,S);if(r.cues=[],r.timestampmap={MPEGTS:0,LOCAL:0},x.oncue=r.cues.push.bind(r.cues),x.ontimestampmap=R=>{r.timestampmap=R},x.onparsingerror=R=>{videojs.log.warn("Error encountered when parsing cues: "+R.message)},r.segment.map){let R=r.segment.map.bytes;E&&(R=uint8ToUtf8(R)),x.parse(R)}let C=r.bytes;E&&(C=uint8ToUtf8(C)),x.parse(C),x.flush()}updateTimeMapping_(r,S,E){const x=r.segment;if(!S)return;if(!r.cues.length){x.empty=!0;return}const{MPEGTS:C,LOCAL:R}=r.timestampmap,Ue=C/clock.ONE_SECOND_IN_TS-R+S.mapping;if(r.cues.forEach(je=>{const Xe=je.endTime-je.startTime,Ye=this.handleRollover_(je.startTime+Ue,S.time);je.startTime=Math.max(Ye,0),je.endTime=Math.max(Ye+Xe,0)}),!E.syncInfo){const je=r.cues[0].startTime,Xe=r.cues[r.cues.length-1].startTime;E.syncInfo={mediaSequence:E.mediaSequence+r.mediaIndex,time:Math.min(je,Xe-x.duration)}}}handleRollover_(r,S){if(S===null)return r;let E=r*clock.ONE_SECOND_IN_TS;const x=S*clock.ONE_SECOND_IN_TS;let C;for(x<E?C=-8589934592:C=8589934592;Math.abs(E-x)>4294967296;)E+=C;return E/clock.ONE_SECOND_IN_TS}}const findAdCue=function(o,r){const S=o.cues;for(let E=0;E<S.length;E++){const x=S[E];if(r>=x.adStartTime&&r<=x.adEndTime)return x}return null},updateAdCues=function(o,r,S=0){if(!o.segments)return;let E=S,x;for(let C=0;C<o.segments.length;C++){const R=o.segments[C];if(x||(x=findAdCue(r,E+R.duration/2)),x){if("cueIn"in R){x.endTime=E,x.adEndTime=E,E+=R.duration,x=null;continue}if(E<x.endTime){E+=R.duration;continue}x.endTime+=R.duration}else if("cueOut"in R&&(x=new window$1$1.VTTCue(E,E+R.duration,R.cueOut),x.adStartTime=E,x.adEndTime=E+parseFloat(R.cueOut),r.addCue(x)),"cueOutCont"in R){const[Ce,Ue]=R.cueOutCont.split("/").map(parseFloat);x=new window$1$1.VTTCue(E,E+R.duration,""),x.adStartTime=E-Ce,x.adEndTime=x.adStartTime+Ue,r.addCue(x)}E+=R.duration}};class SyncInfo{constructor({start:r,end:S,segmentIndex:E,partIndex:x=null,appended:C=!1}){this.start_=r,this.end_=S,this.segmentIndex_=E,this.partIndex_=x,this.appended_=C}isInRange(r){return r>=this.start&&r<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class SyncInfoData{constructor(r,S=[]){this.segmentSyncInfo_=r,this.partsSyncInfo_=S}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(r=>r.resetAppendedStatus())}}class MediaSequenceSync{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(r=>r.resetAppendStatus())}update(r,S){const{mediaSequence:E,segments:x}=r;if(this.isReliable_=this.isReliablePlaylist_(E,x),!!this.isReliable_)return this.updateStorage_(x,E,this.calculateBaseTime_(E,S))}getSyncInfoForTime(r){for(const{segmentSyncInfo:S,partsSyncInfo:E}of this.storage_.values())if(E.length){for(const x of E)if(x.isInRange(r))return x}else if(S.isInRange(r))return S;return null}getSyncInfoForMediaSequence(r){return this.storage_.get(r)}updateStorage_(r,S,E){const x=new Map;let C=`
`,R=E,Ce=S;this.start_=R,r.forEach((Ue,je)=>{const Xe=this.storage_.get(Ce),Ye=R,St=Ye+Ue.duration,Dt=!!(Xe&&Xe.segmentSyncInfo&&Xe.segmentSyncInfo.isAppended),kt=new SyncInfo({start:Ye,end:St,appended:Dt,segmentIndex:je});Ue.syncInfo=kt;let et=R;const Ft=(Ue.parts||[]).map((xt,Mt)=>{const Ot=et,Ut=et+xt.duration,Xt=!!(Xe&&Xe.partsSyncInfo&&Xe.partsSyncInfo[Mt]&&Xe.partsSyncInfo[Mt].isAppended),ei=new SyncInfo({start:Ot,end:Ut,appended:Xt,segmentIndex:je,partIndex:Mt});return et=Ut,C+=`Media Sequence: ${Ce}.${Mt} | Range: ${Ot} --> ${Ut} | Appended: ${Xt}
`,xt.syncInfo=ei,ei});x.set(Ce,new SyncInfoData(kt,Ft)),C+=`${compactSegmentUrlDescription(Ue.resolvedUri)} | Media Sequence: ${Ce} | Range: ${Ye} --> ${St} | Appended: ${Dt}
`,Ce++,R=St}),this.end_=R,this.storage_=x,this.diagnostics_=C}calculateBaseTime_(r,S){return this.storage_.size?this.storage_.has(r)?this.storage_.get(r).segmentSyncInfo.start:S:0}isReliablePlaylist_(r,S){return r!=null&&Array.isArray(S)&&S.length}}class DependantMediaSequenceSync extends MediaSequenceSync{constructor(r){super(),this.parent_=r}calculateBaseTime_(r,S){if(!this.storage_.size){const E=this.parent_.getSyncInfoForMediaSequence(r);return E?E.segmentSyncInfo.start:0}return super.calculateBaseTime_(r,S)}}const MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC=86400,syncPointStrategies=[{name:"VOD",run:(o,r,S,E,x)=>S!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(o,r,S,E,x,C)=>{const R=o.getMediaSequenceSync(C);if(!R||!R.isReliable)return null;const Ce=R.getSyncInfoForTime(x);return Ce?{time:Ce.start,partIndex:Ce.partIndex,segmentIndex:Ce.segmentIndex}:null}},{name:"ProgramDateTime",run:(o,r,S,E,x)=>{if(!Object.keys(o.timelineToDatetimeMappings).length)return null;let C=null,R=null;const Ce=getPartsAndSegments(r);x=x||0;for(let Ue=0;Ue<Ce.length;Ue++){const je=r.endList||x===0?Ue:Ce.length-(Ue+1),Xe=Ce[je],Ye=Xe.segment,St=o.timelineToDatetimeMappings[Ye.timeline];if(!St||!Ye.dateTimeObject)continue;let kt=Ye.dateTimeObject.getTime()/1e3+St;if(Ye.parts&&typeof Xe.partIndex=="number")for(let Ft=0;Ft<Xe.partIndex;Ft++)kt+=Ye.parts[Ft].duration;const et=Math.abs(x-kt);if(R!==null&&(et===0||R<et))break;R=et,C={time:kt,segmentIndex:Xe.segmentIndex,partIndex:Xe.partIndex}}return C}},{name:"Segment",run:(o,r,S,E,x)=>{let C=null,R=null;x=x||0;const Ce=getPartsAndSegments(r);for(let Ue=0;Ue<Ce.length;Ue++){const je=r.endList||x===0?Ue:Ce.length-(Ue+1),Xe=Ce[je],Ye=Xe.segment,St=Xe.part&&Xe.part.start||Ye&&Ye.start;if(Ye.timeline===E&&typeof St<"u"){const Dt=Math.abs(x-St);if(R!==null&&R<Dt)break;(!C||R===null||R>=Dt)&&(R=Dt,C={time:St,segmentIndex:Xe.segmentIndex,partIndex:Xe.partIndex})}}return C}},{name:"Discontinuity",run:(o,r,S,E,x)=>{let C=null;if(x=x||0,r.discontinuityStarts&&r.discontinuityStarts.length){let R=null;for(let Ce=0;Ce<r.discontinuityStarts.length;Ce++){const Ue=r.discontinuityStarts[Ce],je=r.discontinuitySequence+Ce+1,Xe=o.discontinuities[je];if(Xe){const Ye=Math.abs(x-Xe.time);if(R!==null&&R<Ye)break;(!C||R===null||R>=Ye)&&(R=Ye,C={time:Xe.time,segmentIndex:Ue,partIndex:null})}}}return C}},{name:"Playlist",run:(o,r,S,E,x)=>r.syncInfo?{time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence,partIndex:null}:null}];class SyncController extends videojs.EventTarget{constructor(r={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const S=new MediaSequenceSync,E=new DependantMediaSequenceSync(S),x=new DependantMediaSequenceSync(S);this.mediaSequenceStorage_={main:S,audio:E,vtt:x},this.logger_=logger("SyncController")}getMediaSequenceSync(r){return this.mediaSequenceStorage_[r]||null}getSyncPoint(r,S,E,x,C){if(S!==1/0)return syncPointStrategies.find(({name:Ue})=>Ue==="VOD").run(this,r,S);const R=this.runStrategies_(r,S,E,x,C);if(!R.length)return null;for(const Ce of R){const{syncPoint:Ue,strategy:je}=Ce,{segmentIndex:Xe,time:Ye}=Ue;if(Xe<0)continue;const St=r.segments[Xe],Dt=Ye,kt=Dt+St.duration;if(this.logger_(`Strategy: ${je}. Current time: ${x}. selected segment: ${Xe}. Time: [${Dt} -> ${kt}]}`),x>=Dt&&x<kt)return this.logger_("Found sync point with exact match: ",Ue),Ue}return this.selectSyncPoint_(R,{key:"time",value:x})}getExpiredTime(r,S){if(!r||!r.segments)return null;const E=this.runStrategies_(r,S,r.discontinuitySequence,0);if(!E.length)return null;const x=this.selectSyncPoint_(E,{key:"segmentIndex",value:0});return x.segmentIndex>0&&(x.time*=-1),Math.abs(x.time+sumDurations({defaultDuration:r.targetDuration,durationList:r.segments,startIndex:x.segmentIndex,endIndex:0}))}runStrategies_(r,S,E,x,C){const R=[];for(let Ce=0;Ce<syncPointStrategies.length;Ce++){const Ue=syncPointStrategies[Ce],je=Ue.run(this,r,S,E,x,C);je&&(je.strategy=Ue.name,R.push({strategy:Ue.name,syncPoint:je}))}return R}selectSyncPoint_(r,S){let E=r[0].syncPoint,x=Math.abs(r[0].syncPoint[S.key]-S.value),C=r[0].strategy;for(let R=1;R<r.length;R++){const Ce=Math.abs(r[R].syncPoint[S.key]-S.value);Ce<x&&(x=Ce,E=r[R].syncPoint,C=r[R].strategy)}return this.logger_(`syncPoint for [${S.key}: ${S.value}] chosen with strategy [${C}]: [time:${E.time}, segmentIndex:${E.segmentIndex}`+(typeof E.partIndex=="number"?`,partIndex:${E.partIndex}`:"")+"]"),E}saveExpiredSegmentInfo(r,S){const E=S.mediaSequence-r.mediaSequence;if(E>MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC){videojs.log.warn(`Not saving expired segment info. Media sequence gap ${E} is too large.`);return}for(let x=E-1;x>=0;x--){const C=r.segments[x];if(C&&typeof C.start<"u"){S.syncInfo={mediaSequence:r.mediaSequence+x,time:C.start},this.logger_(`playlist refresh sync: [time:${S.syncInfo.time}, mediaSequence: ${S.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(r){if(this.timelineToDatetimeMappings={},r.segments&&r.segments.length&&r.segments[0].dateTimeObject){const S=r.segments[0],E=S.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[S.timeline]=-E}}saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:S}){const E=this.calculateSegmentTimeMapping_(r,r.timingInfo,S),x=r.segment;E&&(this.saveDiscontinuitySyncInfo_(r),r.playlist.syncInfo||(r.playlist.syncInfo={mediaSequence:r.playlist.mediaSequence+r.mediaIndex,time:x.start}));const C=x.dateTimeObject;x.discontinuity&&S&&C&&(this.timelineToDatetimeMappings[x.timeline]=-(C.getTime()/1e3))}timestampOffsetForTimeline(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].time}mappingForTimeline(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].mapping}calculateSegmentTimeMapping_(r,S,E){const x=r.segment,C=r.part;let R=this.timelines[r.timeline],Ce,Ue;if(typeof r.timestampOffset=="number")R={time:r.startOfSegment,mapping:r.startOfSegment-S.start},E&&(this.timelines[r.timeline]=R,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${r.timeline}: [time: ${R.time}] [mapping: ${R.mapping}]`)),Ce=r.startOfSegment,Ue=S.end+R.mapping;else if(R)Ce=S.start+R.mapping,Ue=S.end+R.mapping;else return!1;return C&&(C.start=Ce,C.end=Ue),(!x.start||Ce<x.start)&&(x.start=Ce),x.end=Ue,!0}saveDiscontinuitySyncInfo_(r){const S=r.playlist,E=r.segment;if(E.discontinuity)this.discontinuities[E.timeline]={time:E.start,accuracy:0};else if(S.discontinuityStarts&&S.discontinuityStarts.length)for(let x=0;x<S.discontinuityStarts.length;x++){const C=S.discontinuityStarts[x],R=S.discontinuitySequence+x+1,Ce=C-r.mediaIndex,Ue=Math.abs(Ce);if(!this.discontinuities[R]||this.discontinuities[R].accuracy>Ue){let je;Ce<0?je=E.start-sumDurations({defaultDuration:S.targetDuration,durationList:S.segments,startIndex:r.mediaIndex,endIndex:C}):je=E.end+sumDurations({defaultDuration:S.targetDuration,durationList:S.segments,startIndex:r.mediaIndex+1,endIndex:C}),this.discontinuities[R]={time:je,accuracy:Ue}}}}dispose(){this.trigger("dispose"),this.off()}}class TimelineChangeController extends videojs.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(r){this.pendingTimelineChanges_[r]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:r,from:S,to:E}){return typeof S=="number"&&typeof E=="number"&&(this.pendingTimelineChanges_[r]={type:r,from:S,to:E},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[r]}lastTimelineChange({type:r,from:S,to:E}){if(typeof S=="number"&&typeof E=="number"){this.lastTimelineChanges_[r]={type:r,from:S,to:E},delete this.pendingTimelineChanges_[r];const x={timelineChangeInfo:{from:S,to:E}};this.trigger({type:"timelinechange",metadata:x})}return this.lastTimelineChanges_[r]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const workerCode=transform(getWorkerString(function(){var o=function(){function et(){this.listeners={}}var Ft=et.prototype;return Ft.on=function(Mt,Ot){this.listeners[Mt]||(this.listeners[Mt]=[]),this.listeners[Mt].push(Ot)},Ft.off=function(Mt,Ot){if(!this.listeners[Mt])return!1;var Ut=this.listeners[Mt].indexOf(Ot);return this.listeners[Mt]=this.listeners[Mt].slice(0),this.listeners[Mt].splice(Ut,1),Ut>-1},Ft.trigger=function(Mt){var Ot=this.listeners[Mt];if(Ot)if(arguments.length===2)for(var Ut=Ot.length,Xt=0;Xt<Ut;++Xt)Ot[Xt].call(this,arguments[1]);else for(var ei=Array.prototype.slice.call(arguments,1),si=Ot.length,li=0;li<si;++li)Ot[li].apply(this,ei)},Ft.dispose=function(){this.listeners={}},Ft.pipe=function(Mt){this.on("data",function(Ot){Mt.push(Ot)})},et}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function r(et){return et.subarray(0,et.byteLength-et[et.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const S=function(){const et=[[[],[],[],[],[]],[[],[],[],[],[]]],Ft=et[0],xt=et[1],Mt=Ft[4],Ot=xt[4];let Ut,Xt,ei;const si=[],li=[];let bi,wi,Pi,Ci,Di,Bi;for(Ut=0;Ut<256;Ut++)li[(si[Ut]=Ut<<1^(Ut>>7)*283)^Ut]=Ut;for(Xt=ei=0;!Mt[Xt];Xt^=bi||1,ei=li[ei]||1)for(Ci=ei^ei<<1^ei<<2^ei<<3^ei<<4,Ci=Ci>>8^Ci&255^99,Mt[Xt]=Ci,Ot[Ci]=Xt,Pi=si[wi=si[bi=si[Xt]]],Bi=Pi*16843009^wi*65537^bi*257^Xt*16843008,Di=si[Ci]*257^Ci*16843008,Ut=0;Ut<4;Ut++)Ft[Ut][Xt]=Di=Di<<24^Di>>>8,xt[Ut][Ci]=Bi=Bi<<24^Bi>>>8;for(Ut=0;Ut<5;Ut++)Ft[Ut]=Ft[Ut].slice(0),xt[Ut]=xt[Ut].slice(0);return et};let E=null;class x{constructor(Ft){E||(E=S()),this._tables=[[E[0][0].slice(),E[0][1].slice(),E[0][2].slice(),E[0][3].slice(),E[0][4].slice()],[E[1][0].slice(),E[1][1].slice(),E[1][2].slice(),E[1][3].slice(),E[1][4].slice()]];let xt,Mt,Ot;const Ut=this._tables[0][4],Xt=this._tables[1],ei=Ft.length;let si=1;if(ei!==4&&ei!==6&&ei!==8)throw new Error("Invalid aes key size");const li=Ft.slice(0),bi=[];for(this._key=[li,bi],xt=ei;xt<4*ei+28;xt++)Ot=li[xt-1],(xt%ei===0||ei===8&&xt%ei===4)&&(Ot=Ut[Ot>>>24]<<24^Ut[Ot>>16&255]<<16^Ut[Ot>>8&255]<<8^Ut[Ot&255],xt%ei===0&&(Ot=Ot<<8^Ot>>>24^si<<24,si=si<<1^(si>>7)*283)),li[xt]=li[xt-ei]^Ot;for(Mt=0;xt;Mt++,xt--)Ot=li[Mt&3?xt:xt-4],xt<=4||Mt<4?bi[Mt]=Ot:bi[Mt]=Xt[0][Ut[Ot>>>24]]^Xt[1][Ut[Ot>>16&255]]^Xt[2][Ut[Ot>>8&255]]^Xt[3][Ut[Ot&255]]}decrypt(Ft,xt,Mt,Ot,Ut,Xt){const ei=this._key[1];let si=Ft^ei[0],li=Ot^ei[1],bi=Mt^ei[2],wi=xt^ei[3],Pi,Ci,Di;const Bi=ei.length/4-2;let Ri,oi=4;const mi=this._tables[1],ri=mi[0],ni=mi[1],Ei=mi[2],Si=mi[3],qi=mi[4];for(Ri=0;Ri<Bi;Ri++)Pi=ri[si>>>24]^ni[li>>16&255]^Ei[bi>>8&255]^Si[wi&255]^ei[oi],Ci=ri[li>>>24]^ni[bi>>16&255]^Ei[wi>>8&255]^Si[si&255]^ei[oi+1],Di=ri[bi>>>24]^ni[wi>>16&255]^Ei[si>>8&255]^Si[li&255]^ei[oi+2],wi=ri[wi>>>24]^ni[si>>16&255]^Ei[li>>8&255]^Si[bi&255]^ei[oi+3],oi+=4,si=Pi,li=Ci,bi=Di;for(Ri=0;Ri<4;Ri++)Ut[(3&-Ri)+Xt]=qi[si>>>24]<<24^qi[li>>16&255]<<16^qi[bi>>8&255]<<8^qi[wi&255]^ei[oi++],Pi=si,si=li,li=bi,bi=wi,wi=Pi}}class C extends o{constructor(){super(o),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(Ft){this.jobs.push(Ft),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const R=function(et){return et<<24|(et&65280)<<8|(et&16711680)>>8|et>>>24},Ce=function(et,Ft,xt){const Mt=new Int32Array(et.buffer,et.byteOffset,et.byteLength>>2),Ot=new x(Array.prototype.slice.call(Ft)),Ut=new Uint8Array(et.byteLength),Xt=new Int32Array(Ut.buffer);let ei,si,li,bi,wi,Pi,Ci,Di,Bi;for(ei=xt[0],si=xt[1],li=xt[2],bi=xt[3],Bi=0;Bi<Mt.length;Bi+=4)wi=R(Mt[Bi]),Pi=R(Mt[Bi+1]),Ci=R(Mt[Bi+2]),Di=R(Mt[Bi+3]),Ot.decrypt(wi,Pi,Ci,Di,Xt,Bi),Xt[Bi]=R(Xt[Bi]^ei),Xt[Bi+1]=R(Xt[Bi+1]^si),Xt[Bi+2]=R(Xt[Bi+2]^li),Xt[Bi+3]=R(Xt[Bi+3]^bi),ei=wi,si=Pi,li=Ci,bi=Di;return Ut};class Ue{constructor(Ft,xt,Mt,Ot){const Ut=Ue.STEP,Xt=new Int32Array(Ft.buffer),ei=new Uint8Array(Ft.byteLength);let si=0;for(this.asyncStream_=new C,this.asyncStream_.push(this.decryptChunk_(Xt.subarray(si,si+Ut),xt,Mt,ei)),si=Ut;si<Xt.length;si+=Ut)Mt=new Uint32Array([R(Xt[si-4]),R(Xt[si-3]),R(Xt[si-2]),R(Xt[si-1])]),this.asyncStream_.push(this.decryptChunk_(Xt.subarray(si,si+Ut),xt,Mt,ei));this.asyncStream_.push(function(){Ot(null,r(ei))})}static get STEP(){return 32e3}decryptChunk_(Ft,xt,Mt,Ot){return function(){const Ut=Ce(Ft,xt,Mt);Ot.set(Ut,Ft.byteOffset)}}}var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xe;typeof window<"u"?Xe=window:typeof je<"u"?Xe=je:typeof self<"u"?Xe=self:Xe={};var Ye=Xe,St=function(Ft){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(Ft):Ft&&Ft.buffer instanceof ArrayBuffer},Dt=Ye.BigInt||Number;Dt("0x1"),Dt("0x100"),Dt("0x10000"),Dt("0x1000000"),Dt("0x100000000"),Dt("0x10000000000"),Dt("0x1000000000000"),Dt("0x100000000000000"),Dt("0x10000000000000000"),function(){var et=new Uint16Array([65484]),Ft=new Uint8Array(et.buffer,et.byteOffset,et.byteLength);return Ft[0]===255?"big":Ft[0]===204?"little":"unknown"}();const kt=function(et){const Ft={};return Object.keys(et).forEach(xt=>{const Mt=et[xt];St(Mt)?Ft[xt]={bytes:Mt.buffer,byteOffset:Mt.byteOffset,byteLength:Mt.byteLength}:Ft[xt]=Mt}),Ft};self.onmessage=function(et){const Ft=et.data,xt=new Uint8Array(Ft.encrypted.bytes,Ft.encrypted.byteOffset,Ft.encrypted.byteLength),Mt=new Uint32Array(Ft.key.bytes,Ft.key.byteOffset,Ft.key.byteLength/4),Ot=new Uint32Array(Ft.iv.bytes,Ft.iv.byteOffset,Ft.iv.byteLength/4);new Ue(xt,Mt,Ot,function(Ut,Xt){self.postMessage(kt({source:Ft.source,decrypted:Xt}),[Xt.buffer])})}}));var Decrypter=factory(workerCode);const audioTrackKind_=o=>{let r=o.default?"main":"alternative";return o.characteristics&&o.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},stopLoaders=(o,r)=>{o.abort(),o.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},startLoaders=(o,r)=>{r.activePlaylistLoader=o,o.load()},onGroupChanged=(o,r)=>()=>{const{segmentLoaders:{[o]:S,main:E},mediaTypes:{[o]:x}}=r,C=x.activeTrack(),R=x.getActiveGroup(),Ce=x.activePlaylistLoader,Ue=x.lastGroup_;if(!(R&&Ue&&R.id===Ue.id)&&(x.lastGroup_=R,x.lastTrack_=C,stopLoaders(S,x),!(!R||R.isMainPlaylist))){if(!R.playlistLoader){Ce&&E.resetEverything();return}S.resyncLoader(),startLoaders(R.playlistLoader,x)}},onGroupChanging=(o,r)=>()=>{const{segmentLoaders:{[o]:S},mediaTypes:{[o]:E}}=r;E.lastGroup_=null,S.abort(),S.pause()},onTrackChanged=(o,r)=>()=>{const{mainPlaylistLoader:S,segmentLoaders:{[o]:E,main:x},mediaTypes:{[o]:C}}=r,R=C.activeTrack(),Ce=C.getActiveGroup(),Ue=C.activePlaylistLoader,je=C.lastTrack_;if(!(je&&R&&je.id===R.id)&&(C.lastGroup_=Ce,C.lastTrack_=R,stopLoaders(E,C),!!Ce)){if(Ce.isMainPlaylist){if(!R||!je||R.id===je.id)return;const Xe=r.vhs.playlistController_,Ye=Xe.selectPlaylist();if(Xe.media()===Ye)return;C.logger_(`track change. Switching main audio from ${je.id} to ${R.id}`),S.pause(),x.resetEverything(),Xe.fastQualityChange_(Ye);return}if(o==="AUDIO"){if(!Ce.playlistLoader){x.setAudio(!0),x.resetEverything();return}E.setAudio(!0),x.setAudio(!1)}if(Ue===Ce.playlistLoader){startLoaders(Ce.playlistLoader,C);return}E.track&&E.track(R),E.resetEverything(),startLoaders(Ce.playlistLoader,C)}},onError={AUDIO:(o,r)=>()=>{const{mediaTypes:{[o]:S},excludePlaylist:E}=r,x=S.activeTrack(),C=S.activeGroup(),R=(C.filter(Ue=>Ue.default)[0]||C[0]).id,Ce=S.tracks[R];if(x===Ce){E({error:{message:"Problem encountered loading the default audio track."}});return}videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const Ue in S.tracks)S.tracks[Ue].enabled=S.tracks[Ue]===Ce;S.onTrackChanged()},SUBTITLES:(o,r)=>()=>{const{mediaTypes:{[o]:S}}=r;videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const E=S.activeTrack();E&&(E.mode="disabled"),S.onTrackChanged()}},setupListeners={AUDIO:(o,r,S)=>{if(!r)return;const{tech:E,requestOptions:x,segmentLoaders:{[o]:C}}=S;r.on("loadedmetadata",()=>{const R=r.media();C.playlist(R,x),(!E.paused()||R.endList&&E.preload()!=="none")&&C.load()}),r.on("loadedplaylist",()=>{C.playlist(r.media(),x),E.paused()||C.load()}),r.on("error",onError[o](o,S))},SUBTITLES:(o,r,S)=>{const{tech:E,requestOptions:x,segmentLoaders:{[o]:C},mediaTypes:{[o]:R}}=S;r.on("loadedmetadata",()=>{const Ce=r.media();C.playlist(Ce,x),C.track(R.activeTrack()),(!E.paused()||Ce.endList&&E.preload()!=="none")&&C.load()}),r.on("loadedplaylist",()=>{C.playlist(r.media(),x),E.paused()||C.load()}),r.on("error",onError[o](o,S))}},initialize={AUDIO:(o,r)=>{const{vhs:S,sourceType:E,segmentLoaders:{[o]:x},requestOptions:C,main:{mediaGroups:R},mediaTypes:{[o]:{groups:Ce,tracks:Ue,logger_:je}},mainPlaylistLoader:Xe}=r,Ye=isAudioOnly(Xe.main);(!R[o]||Object.keys(R[o]).length===0)&&(R[o]={main:{default:{default:!0}}},Ye&&(R[o].main.default.playlists=Xe.main.playlists));for(const St in R[o]){Ce[St]||(Ce[St]=[]);for(const Dt in R[o][St]){let kt=R[o][St][Dt],et;if(Ye?(je(`AUDIO group '${St}' label '${Dt}' is a main playlist`),kt.isMainPlaylist=!0,et=null):E==="vhs-json"&&kt.playlists?et=new PlaylistLoader(kt.playlists[0],S,C):kt.resolvedUri?et=new PlaylistLoader(kt.resolvedUri,S,C):kt.playlists&&E==="dash"?et=new DashPlaylistLoader(kt.playlists[0],S,C,Xe):et=null,kt=merge({id:Dt,playlistLoader:et},kt),setupListeners[o](o,kt.playlistLoader,r),Ce[St].push(kt),typeof Ue[Dt]>"u"){const Ft=new videojs.AudioTrack({id:Dt,kind:audioTrackKind_(kt),enabled:!1,language:kt.language,default:kt.default,label:Dt});Ue[Dt]=Ft}}}x.on("error",onError[o](o,r))},SUBTITLES:(o,r)=>{const{tech:S,vhs:E,sourceType:x,segmentLoaders:{[o]:C},requestOptions:R,main:{mediaGroups:Ce},mediaTypes:{[o]:{groups:Ue,tracks:je}},mainPlaylistLoader:Xe}=r;for(const Ye in Ce[o]){Ue[Ye]||(Ue[Ye]=[]);for(const St in Ce[o][Ye]){if(!E.options_.useForcedSubtitles&&Ce[o][Ye][St].forced)continue;let Dt=Ce[o][Ye][St],kt;if(x==="hls")kt=new PlaylistLoader(Dt.resolvedUri,E,R);else if(x==="dash"){if(!Dt.playlists.filter(Ft=>Ft.excludeUntil!==1/0).length)return;kt=new DashPlaylistLoader(Dt.playlists[0],E,R,Xe)}else x==="vhs-json"&&(kt=new PlaylistLoader(Dt.playlists?Dt.playlists[0]:Dt.resolvedUri,E,R));if(Dt=merge({id:St,playlistLoader:kt},Dt),setupListeners[o](o,Dt.playlistLoader,r),Ue[Ye].push(Dt),typeof je[St]>"u"){const et=S.addRemoteTextTrack({id:St,kind:"subtitles",default:Dt.default&&Dt.autoselect,language:Dt.language,label:St},!1).track;je[St]=et}}}C.on("error",onError[o](o,r))},"CLOSED-CAPTIONS":(o,r)=>{const{tech:S,main:{mediaGroups:E},mediaTypes:{[o]:{groups:x,tracks:C}}}=r;for(const R in E[o]){x[R]||(x[R]=[]);for(const Ce in E[o][R]){const Ue=E[o][R][Ce];if(!/^(?:CC|SERVICE)/.test(Ue.instreamId))continue;const je=S.options_.vhs&&S.options_.vhs.captionServices||{};let Xe={label:Ce,language:Ue.language,instreamId:Ue.instreamId,default:Ue.default&&Ue.autoselect};if(je[Xe.instreamId]&&(Xe=merge(Xe,je[Xe.instreamId])),Xe.default===void 0&&delete Xe.default,x[R].push(merge({id:Ce},Ue)),typeof C[Ce]>"u"){const Ye=S.addRemoteTextTrack({id:Xe.instreamId,kind:"captions",default:Xe.default,language:Xe.language,label:Xe.label},!1).track;C[Ce]=Ye}}}}},groupMatch=(o,r)=>{for(let S=0;S<o.length;S++)if(playlistMatch(r,o[S])||o[S].playlists&&groupMatch(o[S].playlists,r))return!0;return!1},activeGroup$1=(o,r)=>S=>{const{mainPlaylistLoader:E,mediaTypes:{[o]:{groups:x}}}=r,C=E.media();if(!C)return null;let R=null;C.attributes[o]&&(R=x[C.attributes[o]]);const Ce=Object.keys(x);if(!R)if(o==="AUDIO"&&Ce.length>1&&isAudioOnly(r.main))for(let Ue=0;Ue<Ce.length;Ue++){const je=x[Ce[Ue]];if(groupMatch(je,C)){R=je;break}}else x.main?R=x.main:Ce.length===1&&(R=x[Ce[0]]);return typeof S>"u"?R:S===null||!R?null:R.filter(Ue=>Ue.id===S.id)[0]||null},activeTrack={AUDIO:(o,r)=>()=>{const{mediaTypes:{[o]:{tracks:S}}}=r;for(const E in S)if(S[E].enabled)return S[E];return null},SUBTITLES:(o,r)=>()=>{const{mediaTypes:{[o]:{tracks:S}}}=r;for(const E in S)if(S[E].mode==="showing"||S[E].mode==="hidden")return S[E];return null}},getActiveGroup=(o,{mediaTypes:r})=>()=>{const S=r[o].activeTrack();return S?r[o].activeGroup(S):null},setupMediaGroups=o=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(je=>{initialize[je](je,o)});const{mediaTypes:r,mainPlaylistLoader:S,tech:E,vhs:x,segmentLoaders:{["AUDIO"]:C,main:R}}=o;["AUDIO","SUBTITLES"].forEach(je=>{r[je].activeGroup=activeGroup$1(je,o),r[je].activeTrack=activeTrack[je](je,o),r[je].onGroupChanged=onGroupChanged(je,o),r[je].onGroupChanging=onGroupChanging(je,o),r[je].onTrackChanged=onTrackChanged(je,o),r[je].getActiveGroup=getActiveGroup(je,o)});const Ce=r.AUDIO.activeGroup();if(Ce){const je=(Ce.filter(Ye=>Ye.default)[0]||Ce[0]).id;r.AUDIO.tracks[je].enabled=!0,r.AUDIO.onGroupChanged(),r.AUDIO.onTrackChanged(),r.AUDIO.getActiveGroup().playlistLoader?(R.setAudio(!1),C.setAudio(!0)):R.setAudio(!0)}S.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(je=>r[je].onGroupChanged())}),S.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(je=>r[je].onGroupChanging())});const Ue=()=>{r.AUDIO.onTrackChanged(),E.trigger({type:"usage",name:"vhs-audio-change"})};E.audioTracks().addEventListener("change",Ue),E.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),x.on("dispose",()=>{E.audioTracks().removeEventListener("change",Ue),E.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),E.clearTracks("audio");for(const je in r.AUDIO.tracks)E.audioTracks().addTrack(r.AUDIO.tracks[je])},createMediaTypes=()=>{const o={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{o[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,getActiveGroup:noop,onGroupChanged:noop,onTrackChanged:noop,lastTrack_:null,logger_:logger(`MediaGroups[${r}]`)}}),o};class SteeringManifest{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(r){r===1&&(this.version_=r)}set ttl(r){this.ttl_=r||300}set reloadUri(r){r&&(this.reloadUri_=resolveUrl(this.reloadUri_,r))}set priority(r){r&&r.length&&(this.priority_=r)}set pathwayClones(r){r&&r.length&&(this.pathwayClones_=new Map(r.map(S=>[S.ID,S])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class ContentSteeringController extends videojs.EventTarget{constructor(r,S){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=logger("Content Steering"),this.xhr_=r,this.getBandwidth_=S}assignTagProperties(r,S){this.manifestType_=S.serverUri?"HLS":"DASH";const E=S.serverUri||S.serverURL;if(!E){this.logger_(`steering manifest URL is ${E}, cannot request steering manifest.`),this.trigger("error");return}if(E.startsWith("data:")){this.decodeDataUriManifest_(E.substring(E.indexOf(",")+1));return}this.steeringManifest.reloadUri=resolveUrl(r,E),this.defaultPathway=S.pathwayId||S.defaultServiceLocation,this.queryBeforeStart=S.queryBeforeStart,this.proxyServerUrl_=S.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(r){const S=this.steeringManifest.reloadUri;if(!S)return;const E=r?S:this.getRequestURI(S);if(!E){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const x={contentSteeringInfo:{uri:E}};this.trigger({type:"contentsteeringloadstart",metadata:x}),this.request_=this.xhr_({uri:E,requestType:"content-steering-manifest"},(C,R)=>{if(C){if(R.status===410){this.logger_(`manifest request 410 ${C}.`),this.logger_(`There will be no more content steering requests to ${E} this session.`),this.excludedSteeringManifestURLs.add(E);return}if(R.status===429){const je=R.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${C}.`),this.logger_(`content steering will retry in ${je} seconds.`),this.startTTLTimeout_(parseInt(je,10));return}this.logger_(`manifest failed to load ${C}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:x});let Ce;try{Ce=JSON.parse(this.request_.responseText)}catch(je){const Xe={errorType:videojs.Error.StreamingContentSteeringParserError,error:je};this.trigger({type:"error",metadata:Xe})}this.assignSteeringProperties_(Ce);const Ue={contentSteeringInfo:x.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:Ue}),this.startTTLTimeout_()})}setProxyServerUrl_(r){const S=new window$1$1.URL(r),E=new window$1$1.URL(this.proxyServerUrl_);return E.searchParams.set("url",encodeURI(S.toString())),this.setSteeringParams_(E.toString())}decodeDataUriManifest_(r){const S=JSON.parse(window$1$1.atob(r));this.assignSteeringProperties_(S)}setSteeringParams_(r){const S=new window$1$1.URL(r),E=this.getPathway(),x=this.getBandwidth_();if(E){const C=`_${this.manifestType_}_pathway`;S.searchParams.set(C,E)}if(x){const C=`_${this.manifestType_}_throughput`;S.searchParams.set(C,x)}return S.toString()}assignSteeringProperties_(r){if(this.steeringManifest.version=r.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${r.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=r.TTL,this.steeringManifest.reloadUri=r["RELOAD-URI"],this.steeringManifest.priority=r["PATHWAY-PRIORITY"]||r["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=r["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const E=(x=>{for(const C of x)if(this.availablePathways_.has(C))return C;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==E&&(this.currentPathway=E,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(r){if(!r)return null;const S=x=>this.excludedSteeringManifestURLs.has(x);if(this.proxyServerUrl_){const x=this.setProxyServerUrl_(r);if(!S(x))return x}const E=this.setSteeringParams_(r);return S(E)?null:E}startTTLTimeout_(r=this.steeringManifest.ttl){const S=r*1e3;this.ttlTimeout_=window$1$1.setTimeout(()=>{this.requestSteeringManifest()},S)}clearTTLTimeout_(){window$1$1.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest}addAvailablePathway(r){r&&this.availablePathways_.add(r)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(r){return this.availablePathways_.delete(r)}didDASHTagChange(r,S){return!S&&this.steeringManifest.reloadUri||S&&(resolveUrl(r,S.serverURL)!==this.steeringManifest.reloadUri||S.defaultServiceLocation!==this.defaultPathway||S.queryBeforeStart!==this.queryBeforeStart||S.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const ABORT_EARLY_EXCLUSION_SECONDS=10;let Vhs$1;const loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],sumLoaderStat=function(o){return this.audioSegmentLoader_[o]+this.mainSegmentLoader_[o]},shouldSwitchToMedia=function({currentPlaylist:o,buffered:r,currentTime:S,nextPlaylist:E,bufferLowWaterLine:x,bufferHighWaterLine:C,duration:R,bufferBasedABR:Ce,log:Ue}){if(!E)return videojs.log.warn("We received no playlist to switch to. Please check your stream."),!1;const je=`allowing switch ${o&&o.id||"null"} -> ${E.id}`;if(!o)return Ue(`${je} as current playlist is not set`),!0;if(E.id===o.id)return!1;const Xe=!!findRange(r,S).length;if(!o.endList)return!Xe&&typeof o.partTargetDuration=="number"?(Ue(`not ${je} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(Ue(`${je} as current playlist is live`),!0);const Ye=timeAheadOf(r,S),St=Ce?Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Config.MAX_BUFFER_LOW_WATER_LINE;if(R<St)return Ue(`${je} as duration < max low water line (${R} < ${St})`),!0;const Dt=E.attributes.BANDWIDTH,kt=o.attributes.BANDWIDTH;if(Dt<kt&&(!Ce||Ye<C)){let et=`${je} as next bandwidth < current bandwidth (${Dt} < ${kt})`;return Ce&&(et+=` and forwardBuffer < bufferHighWaterLine (${Ye} < ${C})`),Ue(et),!0}if((!Ce||Dt>kt)&&Ye>=x){let et=`${je} as forwardBuffer >= bufferLowWaterLine (${Ye} >= ${x})`;return Ce&&(et+=` and next bandwidth > current bandwidth (${Dt} > ${kt})`),Ue(et),!0}return Ue(`not ${je} as no switching criteria met`),!1};class PlaylistController extends videojs.EventTarget{constructor(r){super();const{src:S,withCredentials:E,tech:x,bandwidth:C,externVhs:R,useCueTags:Ce,playlistExclusionDuration:Ue,enableLowInitialPlaylist:je,sourceType:Xe,cacheEncryptionKeys:Ye,bufferBasedABR:St,leastPixelDiffSelector:Dt,captionServices:kt,experimentalUseMMS:et}=r;if(!S)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:Ft}=r;(Ft===null||typeof Ft>"u")&&(Ft=1/0),Vhs$1=R,this.bufferBasedABR=!!St,this.leastPixelDiffSelector=!!Dt,this.withCredentials=E,this.tech_=x,this.vhs_=x.vhs,this.player_=r.player_,this.sourceType_=Xe,this.useCueTags_=Ce,this.playlistExclusionDuration=Ue,this.maxPlaylistRetries=Ft,this.enableLowInitialPlaylist=je,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:E,maxPlaylistRetries:Ft,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=createMediaTypes(),et&&window$1$1.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new window$1$1.ManagedMediaSource,videojs.log("Using ManagedMediaSource")):window$1$1.MediaSource&&(this.mediaSource=new window$1$1.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=createTimeRanges(),this.hasPlayed_=!1,this.syncController_=new SyncController(r),this.segmentMetadataTrack_=x.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Decrypter,this.sourceUpdater_=new SourceUpdater(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new TimelineChangeController,this.keyStatusMap_=new Map;const xt={vhs:this.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:kt,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:C,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:Ye,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:r.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new DashPlaylistLoader(S,this.vhs_,merge(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new PlaylistLoader(S,this.vhs_,merge(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new SegmentLoader(merge(xt,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),r),this.audioSegmentLoader_=new SegmentLoader(merge(xt,{loaderType:"audio"}),r),this.subtitleSegmentLoader_=new VTTSegmentLoader(merge(xt,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((Ut,Xt)=>{function ei(){x.off("vttjserror",si),Ut()}function si(){x.off("vttjsloaded",ei),Xt()}x.one("vttjsloaded",ei),x.one("vttjserror",si),x.addWebVttScript_()})}),r);const Mt=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new ContentSteeringController(this.vhs_.xhr,Mt),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),loaderStats.forEach(Ut=>{this[Ut+"_"]=sumLoaderStat.bind(this,Ut)}),this.logger_=logger("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const Ot=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(Ot,()=>{const Ut=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-Ut,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const r=this.mainAppendsToLoadedData_(),S=this.audioAppendsToLoadedData_();return r===-1||S===-1?-1:r+S}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(r="abr"){const S=this.selectPlaylist();S&&this.shouldSwitchToMedia_(S)&&this.switchMedia_(S,r)}switchMedia_(r,S,E){const x=this.media(),C=x&&(x.id||x.uri),R=r&&(r.id||r.uri);if(C&&C!==R){this.logger_(`switch media ${C} -> ${R} from ${S}`);const Ce={renditionInfo:{id:R,bandwidth:r.attributes.BANDWIDTH,resolution:r.attributes.RESOLUTION,codecs:r.attributes.CODECS},cause:S};this.trigger({type:"renditionselected",metadata:Ce}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${S}`})}this.mainPlaylistLoader_.media(r,E)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{const S=this.mediaTypes_[r],E=S?S.activeGroup():null,x=this.contentSteeringController_.getPathway();if(E&&x){const R=(E.length?E[0].playlists:E.playlists).filter(Ce=>Ce.attributes.serviceLocation===x);R.length&&this.mediaTypes_[r].activePlaylistLoader.media(R[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=window$1$1.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window$1$1.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const r=this.main(),S=r&&r.playlists||[];if(!r||!r.mediaGroups||!r.mediaGroups.AUDIO)return S;const E=r.mediaGroups.AUDIO,x=Object.keys(E);let C;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)C=this.mediaTypes_.AUDIO.activeTrack();else{const Ce=E.main||x.length&&E[x[0]];for(const Ue in Ce)if(Ce[Ue].default){C={label:Ue};break}}if(!C)return S;const R=[];for(const Ce in E)if(E[Ce][C.label]){const Ue=E[Ce][C.label];if(Ue.playlists&&Ue.playlists.length)R.push.apply(R,Ue.playlists);else if(Ue.uri)R.push(Ue);else if(r.playlists.length)for(let je=0;je<r.playlists.length;je++){const Xe=r.playlists[je];Xe.attributes&&Xe.attributes.AUDIO&&Xe.attributes.AUDIO===Ce&&R.push(Xe)}}return R.length?R:S}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const S=this.mainPlaylistLoader_.media(),E=S.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=E,S.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(S,this.requestOptions_),this.mainSegmentLoader_.load()),setupMediaGroups({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),S),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let S=this.mainPlaylistLoader_.media();if(!S){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let E;if(this.enableLowInitialPlaylist&&(E=this.selectInitialPlaylist()),E||(E=this.selectPlaylist()),!E||!this.shouldSwitchToMedia_(E)||(this.initialMedia_=E,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;S=this.initialMedia_}this.handleUpdatedMediaPlaylist(S)}),this.mainPlaylistLoader_.on("error",()=>{const S=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:S.playlist,error:S})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const S=this.mainPlaylistLoader_.media(),E=S.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=E,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(S,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const S=this.mainPlaylistLoader_.media();if(S.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(S)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(S=>{this.mainPlaylistLoader_.on(S,E=>{this.player_.trigger(_extends$3({},E))})})}handleUpdatedMediaPlaylist(r){this.useCueTags_&&this.updateAdCues_(r),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(r,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!r.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(r,S){const E=r.mediaGroups||{};let x=!0;const C=Object.keys(E.AUDIO);for(const R in E.AUDIO)for(const Ce in E.AUDIO[R])E.AUDIO[R][Ce].uri||(x=!1);x&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(E.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Vhs$1.Playlist.isAes(S)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),C.length&&Object.keys(E.AUDIO[C[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(r){const S=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,E=this.tech_.currentTime(),x=this.bufferLowWaterLine(),C=this.bufferHighWaterLine(),R=this.tech_.buffered();return shouldSwitchToMedia({buffered:R,currentTime:E,currentPlaylist:S,nextPlaylist:r,bufferLowWaterLine:x,bufferHighWaterLine:C,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const E=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:E.playlist,error:E})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const E=this.audioSegmentLoader_.pendingSegment_;if(!E||!E.segment||!E.segment.syncInfo)return;const x=E.segment.syncInfo.end+.01;this.tech_.setCurrentTime(x)}),this.mainSegmentLoader_.on("earlyabort",E=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:ABORT_EARLY_EXCLUSION_SECONDS}))});const r=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const E=this.getCodecsOrExclude_();E&&this.sourceUpdater_.addOrChangeSourceBuffers(E)};this.mainSegmentLoader_.on("trackinfo",r),this.audioSegmentLoader_.on("trackinfo",r),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(E=>{this.mainSegmentLoader_.on(E,x=>{this.player_.trigger(_extends$3({},x))}),this.audioSegmentLoader_.on(E,x=>{this.player_.trigger(_extends$3({},x))}),this.subtitleSegmentLoader_.on(E,x=>{this.player_.trigger(_extends$3({},x))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(r=this.selectPlaylist()){if(r&&r===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(r,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const r=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<r.start(0))return this.tech_.setCurrentTime(r.end(r.length-1))}setupFirstPlay(){const r=this.mainPlaylistLoader_.media();if(!r||this.tech_.paused()||this.hasPlayed_)return!1;if(!r.endList||r.start){const S=this.seekable();if(!S.length)return!1;const E=S.end(0);let x=E;if(r.start){const C=r.start.timeOffset;C<0?x=Math.max(E+C,S.start(0)):x=Math.min(E,C)}this.trigger("firstplay"),this.tech_.setCurrentTime(x)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const r=this.tech_.play();typeof r<"u"&&typeof r.then=="function"&&r.then(null,S=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const r=this.inbandTextTracks_.metadataTrack_.cues;if(!r||!r.length)return;const S=this.duration();r[r.length-1].endTime=isNaN(S)||Math.abs(S)===1/0?Number.MAX_VALUE:S}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let r=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const S=this.mainSegmentLoader_.getCurrentMediaInfo_();!S||S.hasVideo?r=r&&this.audioSegmentLoader_.ended_:r=this.audioSegmentLoader_.ended_}r&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(r){if(!this.seekable().length)return!1;const E=this.syncController_.getExpiredTime(r,this.duration());if(E===null)return!1;const x=Vhs$1.Playlist.playlistEnd(r,E),C=this.tech_.currentTime(),R=this.tech_.buffered();if(!R.length)return x-C<=SAFE_TIME_DELTA;const Ce=R.end(R.length-1);return Ce-C<=SAFE_TIME_DELTA&&x-Ce<=SAFE_TIME_DELTA}excludePlaylist({playlistToExclude:r=this.mainPlaylistLoader_.media(),error:S={},playlistExclusionDuration:E}){if(r=r||this.mainPlaylistLoader_.media(),E=E||S.playlistExclusionDuration||this.playlistExclusionDuration,!r){this.error=S,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}r.playlistErrors_++;const x=this.mainPlaylistLoader_.main.playlists,C=x.filter(isEnabled),R=C.length===1&&C[0]===r;if(x.length===1&&E!==1/0)return videojs.log.warn(`Problem encountered with playlist ${r.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(R);if(R){if(this.main().contentSteering){const kt=this.pathwayAttribute_(r),et=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(kt),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(kt)},et);return}let Dt=!1;x.forEach(kt=>{if(kt===r)return;const et=kt.excludeUntil;typeof et<"u"&&et!==1/0&&(Dt=!0,delete kt.excludeUntil)}),Dt&&(videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let Ce;r.playlistErrors_>this.maxPlaylistRetries?Ce=1/0:Ce=Date.now()+E*1e3,r.excludeUntil=Ce,S.reason&&(r.lastExcludeReason_=S.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const Ue=this.selectPlaylist();if(!Ue){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const je=S.internal?this.logger_:videojs.log.warn,Xe=S.message?" "+S.message:"";je(`${S.internal?"Internal problem":"Problem"} encountered with playlist ${r.id}.${Xe} Switching to playlist ${Ue.id}.`),Ue.attributes.AUDIO!==r.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),Ue.attributes.SUBTITLES!==r.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const Ye=Ue.targetDuration/2*1e3||5*1e3,St=typeof Ue.lastRequest=="number"&&Date.now()-Ue.lastRequest<=Ye;return this.switchMedia_(Ue,"exclude",R||St)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(r,S){const E=[],x=r==="all";(x||r==="main")&&E.push(this.mainPlaylistLoader_);const C=[];(x||r==="audio")&&C.push("AUDIO"),(x||r==="subtitle")&&(C.push("CLOSED-CAPTIONS"),C.push("SUBTITLES")),C.forEach(R=>{const Ce=this.mediaTypes_[R]&&this.mediaTypes_[R].activePlaylistLoader;Ce&&E.push(Ce)}),["main","audio","subtitle"].forEach(R=>{const Ce=this[`${R}SegmentLoader_`];Ce&&(r===R||r==="all")&&E.push(Ce)}),E.forEach(R=>S.forEach(Ce=>{typeof R[Ce]=="function"&&R[Ce]()}))}setCurrentTime(r){const S=findRange(this.tech_.buffered(),r);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(S&&S.length)return r;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const r=this.mainPlaylistLoader_.media();return r?r.endList?this.mediaSource?this.mediaSource.duration:Vhs$1.Playlist.duration(r):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let r;if(!this.mainPlaylistLoader_)return;let S=this.mainPlaylistLoader_.media();if(!S)return;let E=this.syncController_.getExpiredTime(S,this.duration());if(E===null)return;const x=this.mainPlaylistLoader_.main,C=Vhs$1.Playlist.seekable(S,E,Vhs$1.Playlist.liveEdgeDelay(x,S));if(C.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(S=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),E=this.syncController_.getExpiredTime(S,this.duration()),E===null||(r=Vhs$1.Playlist.seekable(S,E,Vhs$1.Playlist.liveEdgeDelay(x,S)),r.length===0)))return;let R,Ce;if(this.seekable_&&this.seekable_.length&&(R=this.seekable_.end(0),Ce=this.seekable_.start(0)),r?r.start(0)>C.end(0)||C.start(0)>r.end(0)?this.seekable_=C:this.seekable_=createTimeRanges([[r.start(0)>C.start(0)?r.start(0):C.start(0),r.end(0)<C.end(0)?r.end(0):C.end(0)]]):this.seekable_=C,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===R&&this.seekable_.start(0)===Ce)return;this.logger_(`seekable updated [${printableRange(this.seekable_)}]`);const Ue={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:Ue}),this.tech_.trigger("seekablechanged")}updateDuration(r){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,r),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(r){const x=this.seekable();if(!x.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<x.end(x.length-1))&&this.sourceUpdater_.setDuration(x.end(x.length-1));return}const S=this.tech_.buffered();let E=Vhs$1.Playlist.duration(this.mainPlaylistLoader_.media());S.length>0&&(E=Math.max(E,S.end(S.length-1))),this.mediaSource.duration!==E&&this.sourceUpdater_.setDuration(E)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(r=>{const S=this.mediaTypes_[r].groups;for(const E in S)S[E].forEach(x=>{x.playlistLoader&&x.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const r=!!this.mediaTypes_.AUDIO.activePlaylistLoader,S=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),E=r?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!S||!E)}getCodecsOrExclude_(){const r={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},S=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();r.video=r.main;const E=codecsForPlaylist(this.main(),S),x={},C=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(r.main.hasVideo&&(x.video=E.video||r.main.videoCodec||DEFAULT_VIDEO_CODEC),r.main.isMuxed&&(x.video+=`,${E.audio||r.main.audioCodec||DEFAULT_AUDIO_CODEC}`),(r.main.hasAudio&&!r.main.isMuxed||r.audio.hasAudio||C)&&(x.audio=E.audio||r.main.audioCodec||r.audio.audioCodec||DEFAULT_AUDIO_CODEC,r.audio.isFmp4=r.main.hasAudio&&!r.main.isMuxed?r.main.isFmp4:r.audio.isFmp4),!x.audio&&!x.video){this.excludePlaylist({playlistToExclude:S,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const R=(je,Xe)=>je?browserSupportsCodec(Xe):muxerSupportsCodec(Xe),Ce={};let Ue;if(["video","audio"].forEach(function(je){if(x.hasOwnProperty(je)&&!R(r[je].isFmp4,x[je])){const Xe=r[je].isFmp4?"browser":"muxer";Ce[Xe]=Ce[Xe]||[],Ce[Xe].push(x[je]),je==="audio"&&(Ue=Xe)}}),C&&Ue&&S.attributes.AUDIO){const je=S.attributes.AUDIO;this.main().playlists.forEach(Xe=>{(Xe.attributes&&Xe.attributes.AUDIO)===je&&Xe!==S&&(Xe.excludeUntil=1/0)}),this.logger_(`excluding audio group ${je} as ${Ue} does not support codec(s): "${x.audio}"`)}if(Object.keys(Ce).length){const je=Object.keys(Ce).reduce((Xe,Ye)=>(Xe&&(Xe+=", "),Xe+=`${Ye} does not support codec(s): "${Ce[Ye].join(",")}"`,Xe),"")+".";this.excludePlaylist({playlistToExclude:S,error:{internal:!0,message:je},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const je=[];if(["video","audio"].forEach(Xe=>{const Ye=(parseCodecs(this.sourceUpdater_.codecs[Xe]||"")[0]||{}).type,St=(parseCodecs(x[Xe]||"")[0]||{}).type;Ye&&St&&Ye.toLowerCase()!==St.toLowerCase()&&je.push(`"${this.sourceUpdater_.codecs[Xe]}" -> "${x[Xe]}"`)}),je.length){this.excludePlaylist({playlistToExclude:S,error:{message:`Codec switching not supported: ${je.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return x}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const r=this.getCodecsOrExclude_();if(!r)return;this.sourceUpdater_.createSourceBuffers(r);const S=[r.video,r.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(S)}excludeUnsupportedVariants_(){const r=this.main().playlists,S=[];Object.keys(r).forEach(E=>{const x=r[E];if(S.indexOf(x.id)!==-1)return;S.push(x.id);const C=codecsForPlaylist(this.main,x),R=[];C.audio&&!muxerSupportsCodec(C.audio)&&!browserSupportsCodec(C.audio)&&R.push(`audio codec ${C.audio}`),C.video&&!muxerSupportsCodec(C.video)&&!browserSupportsCodec(C.video)&&R.push(`video codec ${C.video}`),C.text&&C.text==="stpp.ttml.im1t"&&R.push(`text codec ${C.text}`),R.length&&(x.excludeUntil=1/0,this.logger_(`excluding ${x.id} for unsupported: ${R.join(", ")}`))})}excludeIncompatibleVariants_(r){const S=[],E=this.main().playlists,x=unwrapCodecList(parseCodecs(r)),C=codecCount(x),R=x.video&&parseCodecs(x.video)[0]||null,Ce=x.audio&&parseCodecs(x.audio)[0]||null;Object.keys(E).forEach(Ue=>{const je=E[Ue];if(S.indexOf(je.id)!==-1||je.excludeUntil===1/0)return;S.push(je.id);const Xe=[],Ye=codecsForPlaylist(this.mainPlaylistLoader_.main,je),St=codecCount(Ye);if(!(!Ye.audio&&!Ye.video)){if(St!==C&&Xe.push(`codec count "${St}" !== "${C}"`),!this.sourceUpdater_.canChangeType()){const Dt=Ye.video&&parseCodecs(Ye.video)[0]||null,kt=Ye.audio&&parseCodecs(Ye.audio)[0]||null;Dt&&R&&Dt.type.toLowerCase()!==R.type.toLowerCase()&&Xe.push(`video codec "${Dt.type}" !== "${R.type}"`),kt&&Ce&&kt.type.toLowerCase()!==Ce.type.toLowerCase()&&Xe.push(`audio codec "${kt.type}" !== "${Ce.type}"`)}Xe.length&&(je.excludeUntil=1/0,this.logger_(`excluding ${je.id}: ${Xe.join(" && ")}`))}})}updateAdCues_(r){let S=0;const E=this.seekable();E.length&&(S=E.start(0)),updateAdCues(r,this.cueTagsTrack_,S)}goalBufferLength(){const r=this.tech_.currentTime(),S=Config.GOAL_BUFFER_LENGTH,E=Config.GOAL_BUFFER_LENGTH_RATE,x=Math.max(S,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(S+r*E,x)}bufferLowWaterLine(){const r=this.tech_.currentTime(),S=Config.BUFFER_LOW_WATER_LINE,E=Config.BUFFER_LOW_WATER_LINE_RATE,x=Math.max(S,Config.MAX_BUFFER_LOW_WATER_LINE),C=Math.max(S,Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(S+r*E,this.bufferBasedABR?C:x)}bufferHighWaterLine(){return Config.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(r){createMetadataTrackIfNotExists(this.inbandTextTracks_,"com.apple.streaming",this.tech_),addDateRangeMetadata({inbandTextTracks:this.inbandTextTracks_,dateRanges:r})}addMetadataToTextTrack(r,S,E){const x=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();createMetadataTrackIfNotExists(this.inbandTextTracks_,r,this.tech_),addMetadata({inbandTextTracks:this.inbandTextTracks_,metadataArray:S,timestampOffset:x,videoDuration:E})}pathwayAttribute_(r){return r.attributes["PATHWAY-ID"]||r.attributes.serviceLocation}initContentSteeringController_(){const r=this.main();if(r.contentSteering){for(const S of r.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(S));if(this.contentSteeringController_.assignTagProperties(r.uri,r.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(S=>{this.contentSteeringController_.on(S,E=>{this.trigger(_extends$3({},E))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const S=this.main();(this.contentSteeringController_.didDASHTagChange(S.uri,S.contentSteering)||(()=>{const C=this.contentSteeringController_.getAvailablePathways(),R=[];for(const Ce of S.playlists){const Ue=Ce.attributes.serviceLocation;if(Ue&&(R.push(Ue),!C.has(Ue)))return!0}return!!(!R.length&&C.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const r=this.contentSteeringController_.getPathway();if(!r)return;this.handlePathwayClones_();const E=this.main().playlists,x=new Set;let C=!1;Object.keys(E).forEach(R=>{const Ce=E[R],Ue=this.pathwayAttribute_(Ce),je=Ue&&r!==Ue;Ce.excludeUntil===1/0&&Ce.lastExcludeReason_==="content-steering"&&!je&&(delete Ce.excludeUntil,delete Ce.lastExcludeReason_,C=!0);const Ye=!Ce.excludeUntil&&Ce.excludeUntil!==1/0;!x.has(Ce.id)&&je&&Ye&&(x.add(Ce.id),Ce.excludeUntil=1/0,Ce.lastExcludeReason_="content-steering",this.logger_(`excluding ${Ce.id} for ${Ce.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(R=>{const Ce=this.mediaTypes_[R];if(Ce.activePlaylistLoader){const Ue=Ce.activePlaylistLoader.media_;Ue&&Ue.attributes.serviceLocation!==r&&(C=!0)}}),C&&this.changeSegmentPathway_()}handlePathwayClones_(){const S=this.main().playlists,E=this.contentSteeringController_.currentPathwayClones,x=this.contentSteeringController_.nextPathwayClones;if(E&&E.size||x&&x.size){for(const[R,Ce]of E.entries())x.get(R)||(this.mainPlaylistLoader_.updateOrDeleteClone(Ce),this.contentSteeringController_.excludePathway(R));for(const[R,Ce]of x.entries()){const Ue=E.get(R);if(!Ue){S.filter(Xe=>Xe.attributes["PATHWAY-ID"]===Ce["BASE-ID"]).forEach(Xe=>{this.mainPlaylistLoader_.addClonePathway(Ce,Xe)}),this.contentSteeringController_.addAvailablePathway(R);continue}this.equalPathwayClones_(Ue,Ce)||(this.mainPlaylistLoader_.updateOrDeleteClone(Ce,!0),this.contentSteeringController_.addAvailablePathway(R))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...x])))}}equalPathwayClones_(r,S){if(r["BASE-ID"]!==S["BASE-ID"]||r.ID!==S.ID||r["URI-REPLACEMENT"].HOST!==S["URI-REPLACEMENT"].HOST)return!1;const E=r["URI-REPLACEMENT"].PARAMS,x=S["URI-REPLACEMENT"].PARAMS;for(const C in E)if(E[C]!==x[C])return!1;for(const C in x)if(E[C]!==x[C])return!1;return!0}changeSegmentPathway_(){const r=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(r,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let r=0;const S="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(E=>{const x=this.mainPlaylistLoader_.getKeyIdSet(E);!x||!x.size||x.forEach(C=>{const R="usable",Ce=this.keyStatusMap_.has(C)&&this.keyStatusMap_.get(C)===R,Ue=E.lastExcludeReason_===S&&E.excludeUntil===1/0;Ce?Ce&&Ue&&(delete E.excludeUntil,delete E.lastExcludeReason_,this.logger_(`enabling playlist ${E.id} because key ID ${C} is ${R}`)):(E.excludeUntil!==1/0&&E.lastExcludeReason_!==S&&(E.excludeUntil=1/0,E.lastExcludeReason_=S,this.logger_(`excluding playlist ${E.id} because the key ID ${C} doesn't exist in the keyStatusMap or is not ${R}`)),r++)})}),r>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(E=>{const x=E&&E.attributes&&E.attributes.RESOLUTION&&E.attributes.RESOLUTION.height<720,C=E.excludeUntil===1/0&&E.lastExcludeReason_===S;x&&C&&(delete E.excludeUntil,videojs.log.warn(`enabling non-HD playlist ${E.id} because all playlists were excluded due to ${S} key IDs`))})}addKeyStatus_(r,S){const C=(typeof r=="string"?r:bufferToHexString(r)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${S}' with key ID ${C} added to the keyStatusMap`),this.keyStatusMap_.set(C,S)}updatePlaylistByKeyStatus(r,S){this.addKeyStatus_(r,S),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const enableFunction=(o,r,S)=>E=>{const x=o.main.playlists[r],C=isIncompatible(x),R=isEnabled(x);if(typeof E>"u")return R;E?delete x.disabled:x.disabled=!0;const Ce={renditionInfo:{id:r,bandwidth:x.attributes.BANDWIDTH,resolution:x.attributes.RESOLUTION,codecs:x.attributes.CODECS},cause:"fast-quality"};return E!==R&&!C&&(S(x),E?o.trigger({type:"renditionenabled",metadata:Ce}):o.trigger({type:"renditiondisabled",metadata:Ce})),E};class Representation{constructor(r,S,E){const{playlistController_:x}=r,C=x.fastQualityChange_.bind(x);if(S.attributes){const R=S.attributes.RESOLUTION;this.width=R&&R.width,this.height=R&&R.height,this.bandwidth=S.attributes.BANDWIDTH,this.frameRate=S.attributes["FRAME-RATE"]}this.codecs=codecsForPlaylist(x.main(),S),this.playlist=S,this.id=E,this.enabled=enableFunction(r.playlists,S.id,C)}}const renditionSelectionMixin=function(o){o.representations=()=>{const r=o.playlistController_.main(),S=isAudioOnly(r)?o.playlistController_.getAudioTrackPlaylists_():r.playlists;return S?S.filter(E=>!isIncompatible(E)).map((E,x)=>new Representation(o,E,E.id)):[]}},timerCancelEvents=["seeking","seeked","pause","playing","error"];class PlaybackWatcher extends videojs.EventTarget{constructor(r){super(),this.playlistController_=r.playlistController,this.tech_=r.tech,this.seekable=r.seekable,this.allowSeeksWithinUnsafeLiveWindow=r.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=r.liveRangeSafeTimeDelta,this.media=r.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=logger("PlaybackWatcher"),this.logger_("initialize");const S=()=>this.monitorCurrentTime_(),E=()=>this.monitorCurrentTime_(),x=()=>this.techWaiting_(),C=()=>this.resetTimeUpdate_(),R=this.playlistController_,Ce=["main","subtitle","audio"],Ue={};Ce.forEach(Xe=>{Ue[Xe]={reset:()=>this.resetSegmentDownloads_(Xe),updateend:()=>this.checkSegmentDownloads_(Xe)},R[`${Xe}SegmentLoader_`].on("appendsdone",Ue[Xe].updateend),R[`${Xe}SegmentLoader_`].on("playlistupdate",Ue[Xe].reset),this.tech_.on(["seeked","seeking"],Ue[Xe].reset)});const je=Xe=>{["main","audio"].forEach(Ye=>{R[`${Ye}SegmentLoader_`][Xe]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),je("off"))},this.clearSeekingAppendCheck_=()=>je("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),je("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",x),this.tech_.on(timerCancelEvents,C),this.tech_.on("canplay",E),this.tech_.one("play",S),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",x),this.tech_.off(timerCancelEvents,C),this.tech_.off("canplay",E),this.tech_.off("play",S),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),Ce.forEach(Xe=>{R[`${Xe}SegmentLoader_`].off("appendsdone",Ue[Xe].updateend),R[`${Xe}SegmentLoader_`].off("playlistupdate",Ue[Xe].reset),this.tech_.off(["seeked","seeking"],Ue[Xe].reset)}),this.checkCurrentTimeTimeout_&&window$1$1.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window$1$1.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window$1$1.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(r){const S=this.playlistController_[`${r}SegmentLoader_`];this[`${r}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${r} loader`),this[`${r}StalledDownloads_`]=0,this[`${r}Buffered_`]=S.buffered_()}checkSegmentDownloads_(r){const S=this.playlistController_,E=S[`${r}SegmentLoader_`],x=E.buffered_(),C=isRangeDifferent(this[`${r}Buffered_`],x);if(this[`${r}Buffered_`]=x,C){const R={bufferedRanges:x};S.trigger({type:"bufferedrangeschanged",metadata:R}),this.resetSegmentDownloads_(r);return}this[`${r}StalledDownloads_`]++,this.logger_(`found #${this[`${r}StalledDownloads_`]} ${r} appends that did not increase buffer (possible stalled download)`,{playlistId:E.playlist_&&E.playlist_.id,buffered:timeRangesToArray(x)}),!(this[`${r}StalledDownloads_`]<10)&&(this.logger_(`${r} loader stalled download exclusion`),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:`vhs-${r}-download-exclusion`}),r!=="subtitle"&&S.excludePlaylist({error:{message:`Excessive ${r} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const r=this.tech_.currentTime(),S=this.tech_.buffered();if(this.lastRecordedTime===r&&(!S.length||r+SAFE_TIME_DELTA>=S.end(S.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&r===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(r===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(createTimeRanges([this.lastRecordedTime,r]));const E={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:E}),this.consecutiveUpdates=0,this.lastRecordedTime=r}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const S=this.seekable(),E=this.tech_.currentTime(),x=this.afterSeekableWindow_(S,E,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let C;if(x&&(C=S.end(S.length-1)),this.beforeSeekableWindow_(S,E)){const kt=S.start(0);C=kt+(kt===S.end(0)?0:SAFE_TIME_DELTA)}if(typeof C<"u")return this.logger_(`Trying to seek outside of seekable at time ${E} with seekable range ${printableRange(S)}. Seeking to ${C}.`),this.tech_.setCurrentTime(C),!0;const R=this.playlistController_.sourceUpdater_,Ce=this.tech_.buffered(),Ue=R.audioBuffer?R.audioBuffered():null,je=R.videoBuffer?R.videoBuffered():null,Xe=this.media(),Ye=Xe.partTargetDuration?Xe.partTargetDuration:(Xe.targetDuration-TIME_FUDGE_FACTOR)*2,St=[Ue,je];for(let kt=0;kt<St.length;kt++){if(!St[kt])continue;if(timeAheadOf(St[kt],E)<Ye)return!1}const Dt=findNextRange(Ce,E);return Dt.length===0?!1:(C=Dt.start(0)+SAFE_TIME_DELTA,this.logger_(`Buffered region starts (${Dt.start(0)})  just beyond seek point (${E}). Seeking to ${C}.`),this.tech_.setCurrentTime(C),!0)}waiting_(){if(this.techWaiting_())return;const r=this.tech_.currentTime(),S=this.tech_.buffered(),E=findRange(S,r);if(E.length&&r+3<=E.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(r),this.logger_(`Stopped at ${r} while inside a buffered region [${E.start(0)} -> ${E.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const r=this.seekable(),S=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(r,S)){const Ce=r.end(r.length-1);return this.logger_(`Fell out of live window at time ${S}. Seeking to live point (seekable end) ${Ce}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(Ce),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const E=this.tech_.vhs.playlistController_.sourceUpdater_,x=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:E.audioBuffered(),videoBuffered:E.videoBuffered(),currentTime:S}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(S),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const R=findNextRange(x,S);return R.length>0?(this.logger_(`Stopped at ${S} and seeking to ${R.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(S),!0):!1}afterSeekableWindow_(r,S,E,x=!1){if(!r.length)return!1;let C=r.end(r.length-1)+SAFE_TIME_DELTA;const R=!E.endList,Ce=typeof E.partTargetDuration=="number";return R&&(Ce||x)&&(C=r.end(r.length-1)+E.targetDuration*3),S>C}beforeSeekableWindow_(r,S){return!!(r.length&&r.start(0)>0&&S<r.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:r,audioBuffered:S,currentTime:E}){if(!r)return;let x;if(r.length&&S.length){const C=findRange(r,E-3),R=findRange(r,E),Ce=findRange(S,E);Ce.length&&!R.length&&C.length&&(x={start:C.end(0),end:Ce.end(0)})}else findNextRange(r,E).length||(x=this.gapFromVideoUnderflow_(r,E));return x?(this.logger_(`Encountered a gap in video from ${x.start} to ${x.end}. Seeking to current time ${E}`),!0):!1}skipTheGap_(r){const S=this.tech_.buffered(),E=this.tech_.currentTime(),x=findNextRange(S,E);if(this.resetTimeUpdate_(),x.length===0||E!==r)return;this.logger_("skipTheGap_:","currentTime:",E,"scheduled currentTime:",r,"nextRange start:",x.start(0)),this.tech_.setCurrentTime(x.start(0)+TIME_FUDGE_FACTOR);const C={gapInfo:{from:E,to:x.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:C}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(r,S){const E=findGaps(r);for(let x=0;x<E.length;x++){const C=E.start(x),R=E.end(x);if(S-C<4&&S-C>2)return{start:C,end:R}}return null}}const defaultOptions={errorInterval:30,getSource(o){const S=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return o(S)}},initPlugin=function(o,r){let S=0,E=0;const x=merge(defaultOptions,r);o.ready(()=>{o.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const C=function(){E&&o.currentTime(E)},R=function(Xe){Xe!=null&&(E=o.duration()!==1/0&&o.currentTime()||0,o.one("loadedmetadata",C),o.src(Xe),o.trigger({type:"usage",name:"vhs-error-reload"}),o.play())},Ce=function(){if(Date.now()-S<x.errorInterval*1e3){o.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!x.getSource||typeof x.getSource!="function"){videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return S=Date.now(),x.getSource.call(o,R)},Ue=function(){o.off("loadedmetadata",C),o.off("error",Ce),o.off("dispose",Ue)},je=function(Xe){Ue(),initPlugin(o,Xe)};o.on("error",Ce),o.on("dispose",Ue),o.reloadSourceOnError=je},reloadSourceOnError=function(o){initPlugin(this,o)};var version$4="3.15.0",version$3="7.0.3",version$2="1.3.1",version$1="7.2.0",version$7="4.0.2";const Vhs={PlaylistLoader,Playlist,utils,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,lastBandwidthSelector,movingAverageBandwidthSelector,comparePlaylistBandwidth,comparePlaylistResolution,xhr:xhrFactory()};Object.keys(Config).forEach(o=>{Object.defineProperty(Vhs,o,{get(){return videojs.log.warn(`using Vhs.${o} is UNSAFE be sure you know what you are doing`),Config[o]},set(r){if(videojs.log.warn(`using Vhs.${o} is UNSAFE be sure you know what you are doing`),typeof r!="number"||r<0){videojs.log.warn(`value of Vhs.${o} must be greater than or equal to 0`);return}Config[o]=r}})});const LOCAL_STORAGE_KEY="videojs-vhs",handleVhsMediaChange=function(o,r){const S=r.media();let E=-1;for(let x=0;x<o.length;x++)if(o[x].id===S.id){E=x;break}o.selectedIndex_=E,o.trigger({selectedIndex:E,type:"change"})},handleVhsLoadedMetadata=function(o,r){r.representations().forEach(S=>{o.addQualityLevel(S)}),handleVhsMediaChange(o,r.playlists)};Vhs.canPlaySource=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const emeKeySystems=(o,r,S)=>{if(!o)return o;let E={};r&&r.attributes&&r.attributes.CODECS&&(E=unwrapCodecList(parseCodecs(r.attributes.CODECS))),S&&S.attributes&&S.attributes.CODECS&&(E.audio=S.attributes.CODECS);const x=getMimeForCodec(E.video),C=getMimeForCodec(E.audio),R={};for(const Ce in o)R[Ce]={},C&&(R[Ce].audioContentType=C),x&&(R[Ce].videoContentType=x),r.contentProtection&&r.contentProtection[Ce]&&r.contentProtection[Ce].pssh&&(R[Ce].pssh=r.contentProtection[Ce].pssh),typeof o[Ce]=="string"&&(R[Ce].url=o[Ce]);return merge(o,R)},getAllPsshKeySystemsOptions=(o,r)=>o.reduce((S,E)=>{if(!E.contentProtection)return S;const x=r.reduce((C,R)=>{const Ce=E.contentProtection[R];return Ce&&Ce.pssh&&(C[R]={pssh:Ce.pssh}),C},{});return Object.keys(x).length&&S.push(x),S},[]),waitForKeySessionCreation=({player:o,sourceKeySystems:r,audioMedia:S,mainPlaylists:E})=>{if(!o.eme.initializeMediaKeys)return Promise.resolve();const x=S?E.concat([S]):E,C=getAllPsshKeySystemsOptions(x,Object.keys(r)),R=[],Ce=[];return C.forEach(Ue=>{Ce.push(new Promise((je,Xe)=>{o.tech_.one("keysessioncreated",je)})),R.push(new Promise((je,Xe)=>{o.eme.initializeMediaKeys({keySystems:Ue},Ye=>{if(Ye){Xe(Ye);return}je()})}))}),Promise.race([Promise.all(R),Promise.race(Ce)])},setupEmeOptions=({player:o,sourceKeySystems:r,media:S,audioMedia:E})=>{const x=emeKeySystems(r,S,E);return x?(o.currentSource().keySystems=x,x&&!o.eme?(videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},getVhsLocalStorage=()=>{if(!window$1$1.localStorage)return null;const o=window$1$1.localStorage.getItem(LOCAL_STORAGE_KEY);if(!o)return null;try{return JSON.parse(o)}catch{return null}},updateVhsLocalStorage=o=>{if(!window$1$1.localStorage)return!1;let r=getVhsLocalStorage();r=r?merge(r,o):o;try{window$1$1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(r))}catch{return!1}return r},expandDataUri=o=>o.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(o.substring(o.indexOf(",")+1)):o,addOnRequestHook=(o,r)=>{o._requestCallbackSet||(o._requestCallbackSet=new Set),o._requestCallbackSet.add(r)},addOnResponseHook=(o,r)=>{o._responseCallbackSet||(o._responseCallbackSet=new Set),o._responseCallbackSet.add(r)},removeOnRequestHook=(o,r)=>{o._requestCallbackSet&&(o._requestCallbackSet.delete(r),o._requestCallbackSet.size||delete o._requestCallbackSet)},removeOnResponseHook=(o,r)=>{o._responseCallbackSet&&(o._responseCallbackSet.delete(r),o._responseCallbackSet.size||delete o._responseCallbackSet)};Vhs.supportsNativeHls=function(){if(!document$1$1||!document$1$1.createElement)return!1;const o=document$1$1.createElement("video");return videojs.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(S){return/maybe|probably/i.test(o.canPlayType(S))}):!1}();Vhs.supportsNativeDash=function(){return!document$1$1||!document$1$1.createElement||!videojs.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(document$1$1.createElement("video").canPlayType("application/dash+xml"))}();Vhs.supportsTypeNatively=o=>o==="hls"?Vhs.supportsNativeHls:o==="dash"?Vhs.supportsNativeDash:!1;Vhs.isSupported=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Vhs.xhr.onRequest=function(o){addOnRequestHook(Vhs.xhr,o)};Vhs.xhr.onResponse=function(o){addOnResponseHook(Vhs.xhr,o)};Vhs.xhr.offRequest=function(o){removeOnRequestHook(Vhs.xhr,o)};Vhs.xhr.offResponse=function(o){removeOnResponseHook(Vhs.xhr,o)};const Component=videojs.getComponent("Component");class VhsHandler extends Component{constructor(r,S,E){if(super(S,E.vhs),typeof E.initialBandwidth=="number"&&(this.options_.bandwidth=E.initialBandwidth),this.logger_=logger("VhsHandler"),S.options_&&S.options_.playerId){const x=videojs.getPlayer(S.options_.playerId);this.player_=x}if(this.tech_=S,this.source_=r,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&S.overrideNativeAudioTracks&&S.overrideNativeVideoTracks)S.overrideNativeAudioTracks(!0),S.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(S.featuresNativeVideoTracks||S.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(document$1$1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],x=>{const C=document$1$1.fullscreenElement||document$1$1.webkitFullscreenElement||document$1$1.mozFullScreenElement||document$1$1.msFullscreenElement;C&&C.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(r={}){if(this.options_=merge(this.options_,r),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const E=getVhsLocalStorage();E&&E.bandwidth&&(this.options_.bandwidth=E.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),E&&E.throughput&&(this.options_.throughput=E.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Config.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(E=>{typeof this.source_[E]<"u"&&(this.options_[E]=this.source_[E])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const S=this.options_.customPixelRatio;typeof S=="number"&&S>=0&&(this.customPixelRatio=S)}setOptions(r={}){this.setOptions_(r)}src(r,S){if(!r)return;this.setOptions_(),this.options_.src=expandDataUri(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Vhs,this.options_.sourceType=simpleTypeFromSourceType(S),this.options_.seekTo=C=>{this.tech_.setCurrentTime(C)},this.options_.player_=this.player_,this.playlistController_=new PlaylistController(this.options_);const E=merge({liveRangeSafeTimeDelta:SAFE_TIME_DELTA},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new PlaybackWatcher(E),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const C=videojs.players[this.tech_.options_.playerId];let R=this.playlistController_.error;typeof R=="object"&&!R.code?R.code=3:typeof R=="string"&&(R={message:R,code:3}),C.error(R)});const x=this.options_.bufferBasedABR?Vhs.movingAverageBandwidthSelector(.55):Vhs.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):x.bind(this),this.playlistController_.selectInitialPlaylist=Vhs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(C){this.playlistController_.selectPlaylist=C.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(C){this.playlistController_.mainSegmentLoader_.throughput.rate=C,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let C=this.playlistController_.mainSegmentLoader_.bandwidth;const R=window$1$1.navigator.connection||window$1$1.navigator.mozConnection||window$1$1.navigator.webkitConnection,Ce=1e7;if(this.options_.useNetworkInformationApi&&R){const Ue=R.downlink*1e3*1e3;Ue>=Ce&&C>=Ce?C=Math.max(C,Ue):C=Ue}return C},set(C){this.playlistController_.mainSegmentLoader_.bandwidth=C,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const C=1/(this.bandwidth||1);let R;return this.throughput>0?R=1/this.throughput:R=0,Math.floor(1/(C+R))},set(){videojs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>timeRangesToArray(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>timeRangesToArray(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&updateVhsLocalStorage({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{renditionSelectionMixin(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window$1$1.URL.createObjectURL(this.playlistController_.mediaSource),(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const r=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),waitForKeySessionCreation({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:r&&r.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(S=>{this.logger_("error while creating EME key session",S),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const r=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,S=setupEmeOptions({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:r&&r.media()});if(this.player_.tech_.on("keystatuschange",E=>{this.playlistController_.updatePlaylistByKeyStatus(E.keyId,E.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!S){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const r=videojs.players[this.tech_.options_.playerId];!r||!r.qualityLevels||this.qualityLevels_||(this.qualityLevels_=r.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{handleVhsLoadedMetadata(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{handleVhsMediaChange(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":version$4,"mux.js":version$3,"mpd-parser":version$2,"m3u8-parser":version$1,"aes-decrypter":version$7}}version(){return this.constructor.version()}canChangeType(){return SourceUpdater.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(r){this.playlistController_.setCurrentTime(r)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&window$1$1.URL.revokeObjectURL&&(window$1$1.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(r,S){return getProgramTime({playlist:this.playlistController_.media(),time:r,callback:S})}seekToProgramTime(r,S,E=!0,x=2){return seekToProgramTime({programTime:r,playlist:this.playlistController_.media(),retryCount:x,pauseAfterSeek:E,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:S})}setupXhrHooks_(){this.xhr.onRequest=r=>{addOnRequestHook(this.xhr,r)},this.xhr.onResponse=r=>{addOnResponseHook(this.xhr,r)},this.xhr.offRequest=r=>{removeOnRequestHook(this.xhr,r)},this.xhr.offResponse=r=>{removeOnResponseHook(this.xhr,r)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const r=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],S=["gapjumped","playedrangeschanged"];r.forEach(E=>{this.playlistController_.on(E,x=>{this.player_.trigger(_extends$3({},x))})}),S.forEach(E=>{this.playbackWatcher_.on(E,x=>{this.player_.trigger(_extends$3({},x))})})}}const VhsSourceHandler={name:"videojs-http-streaming",VERSION:version$4,canHandleSource(o,r={}){const S=merge(videojs.options,r);return!S.vhs.experimentalUseMMS&&!browserSupportsCodec("avc1.4d400d,mp4a.40.2",!1)?!1:VhsSourceHandler.canPlayType(o.type,S)},handleSource(o,r,S={}){const E=merge(videojs.options,S);return r.vhs=new VhsHandler(o,r,E),r.vhs.xhr=xhrFactory(),r.vhs.setupXhrHooks_(),r.vhs.src(o.src,o.type),r.vhs},canPlayType(o,r){const S=simpleTypeFromSourceType(o);if(!S)return"";const E=VhsSourceHandler.getOverrideNative(r);return!Vhs.supportsTypeNatively(S)||E?"maybe":""},getOverrideNative(o={}){const{vhs:r={}}=o,S=!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS),{overrideNative:E=S}=r;return E}},supportsNativeMediaSources=()=>browserSupportsCodec("avc1.4d400d,mp4a.40.2",!0);supportsNativeMediaSources()&&videojs.getTech("Html5").registerSourceHandler(VhsSourceHandler,0);videojs.VhsHandler=VhsHandler;videojs.VhsSourceHandler=VhsSourceHandler;videojs.Vhs=Vhs;videojs.use||videojs.registerComponent("Vhs",Vhs);videojs.options.vhs=videojs.options.vhs||{};(!videojs.getPlugin||!videojs.getPlugin("reloadSourceOnError"))&&videojs.registerPlugin("reloadSourceOnError",reloadSourceOnError);(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".mapdiv[data-v-d05fc6bc]{width:100%;height:100%}.custom-control-wrapper[data-v-d099a3a6]{display:none}.mapdiv .custom-control-wrapper[data-v-d099a3a6]{display:inline-block}.info-window-wrapper[data-v-cbe1707b]{display:none}.mapdiv .info-window-wrapper[data-v-cbe1707b]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(o)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();var Be$1=Object.defineProperty,Ze=(o,r,S)=>r in o?Be$1(o,r,{enumerable:!0,configurable:!0,writable:!0,value:S}):o[r]=S,se$1=(o,r,S)=>(Ze(o,typeof r!="symbol"?r+"":r,S),S);const B$1=Symbol("map"),Z$1=Symbol("api"),le$1=Symbol("marker"),ce$1=Symbol("markerCluster"),ee$1=Symbol("CustomMarker"),Ae$1=Symbol("mapTilesLoaded"),F$1=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function De$1(o,r,S,E){function x(C){return C instanceof S?C:new S(function(R){R(C)})}return new(S||(S=Promise))(function(C,R){function Ce(Xe){try{je(E.next(Xe))}catch(Ye){R(Ye)}}function Ue(Xe){try{je(E.throw(Xe))}catch(Ye){R(Ye)}}function je(Xe){Xe.done?C(Xe.value):x(Xe.value).then(Ce,Ue)}je((E=E.apply(o,[])).next())})}var Fe$1=function o(r,S){if(r===S)return!0;if(r&&S&&typeof r=="object"&&typeof S=="object"){if(r.constructor!==S.constructor)return!1;var E,x,C;if(Array.isArray(r)){if(E=r.length,E!=S.length)return!1;for(x=E;x--!==0;)if(!o(r[x],S[x]))return!1;return!0}if(r.constructor===RegExp)return r.source===S.source&&r.flags===S.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===S.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===S.toString();if(C=Object.keys(r),E=C.length,E!==Object.keys(S).length)return!1;for(x=E;x--!==0;)if(!Object.prototype.hasOwnProperty.call(S,C[x]))return!1;for(x=E;x--!==0;){var R=C[x];if(!o(r[R],S[R]))return!1}return!0}return r!==r&&S!==S};const pe="__googleMapsScriptId";var N$1;(function(o){o[o.INITIALIZED=0]="INITIALIZED",o[o.LOADING=1]="LOADING",o[o.SUCCESS=2]="SUCCESS",o[o.FAILURE=3]="FAILURE"})(N$1||(N$1={}));class j{constructor({apiKey:r,authReferrerPolicy:S,channel:E,client:x,id:C=pe,language:R,libraries:Ce=[],mapIds:Ue,nonce:je,region:Xe,retries:Ye=3,url:St="https://maps.googleapis.com/maps/api/js",version:Dt}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=r,this.authReferrerPolicy=S,this.channel=E,this.client=x,this.id=C||pe,this.language=R,this.libraries=Ce,this.mapIds=Ue,this.nonce=je,this.region=Xe,this.retries=Ye,this.url=St,this.version=Dt,j.instance){if(!Fe$1(this.options,j.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(j.instance.options)}`);return j.instance}j.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?N$1.FAILURE:this.done?N$1.SUCCESS:this.loading?N$1.LOADING:N$1.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let r=this.url;return r+="?callback=__googleMapsCallback",this.apiKey&&(r+=`&key=${this.apiKey}`),this.channel&&(r+=`&channel=${this.channel}`),this.client&&(r+=`&client=${this.client}`),this.libraries.length>0&&(r+=`&libraries=${this.libraries.join(",")}`),this.language&&(r+=`&language=${this.language}`),this.region&&(r+=`&region=${this.region}`),this.version&&(r+=`&v=${this.version}`),this.mapIds&&(r+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(r+=`&auth_referrer_policy=${this.authReferrerPolicy}`),r}deleteScript(){const r=document.getElementById(this.id);r&&r.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((r,S)=>{this.loadCallback(E=>{E?S(E.error):r(window.google)})})}importLibrary(r){return this.execute(),google.maps.importLibrary(r)}loadCallback(r){this.callbacks.push(r),this.execute()}setScript(){var r,S;if(document.getElementById(this.id)){this.callback();return}const E={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(E).forEach(C=>!E[C]&&delete E[C]),!((S=(r=window==null?void 0:window.google)===null||r===void 0?void 0:r.maps)===null||S===void 0)&&S.importLibrary||(C=>{let R,Ce,Ue,je="The Google Maps JavaScript API",Xe="google",Ye="importLibrary",St="__ib__",Dt=document,kt=window;kt=kt[Xe]||(kt[Xe]={});const et=kt.maps||(kt.maps={}),Ft=new Set,xt=new URLSearchParams,Mt=()=>R||(R=new Promise((Ot,Ut)=>De$1(this,void 0,void 0,function*(){var Xt;yield Ce=Dt.createElement("script"),Ce.id=this.id,xt.set("libraries",[...Ft]+"");for(Ue in C)xt.set(Ue.replace(/[A-Z]/g,ei=>"_"+ei[0].toLowerCase()),C[Ue]);xt.set("callback",Xe+".maps."+St),Ce.src=this.url+"?"+xt,et[St]=Ot,Ce.onerror=()=>R=Ut(Error(je+" could not load.")),Ce.nonce=this.nonce||((Xt=Dt.querySelector("script[nonce]"))===null||Xt===void 0?void 0:Xt.nonce)||"",Dt.head.append(Ce)})));et[Ye]?console.warn(je+" only loads once. Ignoring:",C):et[Ye]=(Ot,...Ut)=>Ft.add(Ot)&&Mt().then(()=>et[Ye](Ot,...Ut))})(E);const x=this.libraries.map(C=>this.importLibrary(C));x.length||x.push(this.importLibrary("core")),Promise.all(x).then(()=>this.callback(),C=>{const R=new ErrorEvent("error",{error:C});this.loadErrorCallback(R)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(r){if(this.errors.push(r),this.errors.length<=this.retries){const S=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${S} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},S)}else this.onerrorEvent=r,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(r=>{r(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function Ve$1(o){return class extends o.OverlayView{constructor(r){super(),se$1(this,"element"),se$1(this,"opts");const{element:S,...E}=r;this.element=S,this.opts=E,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof o.LatLng?this.opts.position:new o.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const r=this.element;return r.style.display!=="none"&&r.style.visibility!=="hidden"&&(r.style.opacity===""||Number(r.style.opacity)>.01)}onAdd(){if(!this.element)return;const r=this.getPanes();r&&r.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const r=this.getProjection(),S=r==null?void 0:r.fromLatLngToDivPixel(this.getPosition());if(S){this.element.style.position="absolute";const E=this.element.offsetHeight,x=this.element.offsetWidth;let C,R;switch(this.opts.anchorPoint){case"TOP_CENTER":C=S.x-x/2,R=S.y;break;case"BOTTOM_CENTER":C=S.x-x/2,R=S.y-E;break;case"LEFT_CENTER":C=S.x,R=S.y-E/2;break;case"RIGHT_CENTER":C=S.x-x,R=S.y-E/2;break;case"TOP_LEFT":C=S.x,R=S.y;break;case"TOP_RIGHT":C=S.x-x,R=S.y;break;case"BOTTOM_LEFT":C=S.x,R=S.y-E;break;case"BOTTOM_RIGHT":C=S.x-x,R=S.y-E;break;default:C=S.x-x/2,R=S.y-E/2}this.element.style.left=C+"px",this.element.style.top=R+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(r){const{element:S,...E}=r;this.element=S,this.opts=E,this.draw()}}}let fe$1;const me$1=["bounds_changed","center_changed","click","contextmenu","dblclick","drag","dragend","dragstart","heading_changed","idle","isfractionalzoomenabled_changed","mapcapabilities_changed","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","renderingtype_changed","rightclick","tilesloaded","tilt_changed","zoom_changed"],ze$1=defineComponent({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places","marker"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},isFractionalZoomEnabled:{type:Boolean,required:!1,default:void 0},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1},nonce:{type:String,default:""}},emits:me$1,setup(o,{emit:r}){const S=ref(),E=ref(!1),x=ref(),C=ref(),R=ref(!1);provide(B$1,x),provide(Z$1,C),provide(Ae$1,R);const Ce=()=>{const Ye={...o};Object.keys(Ye).forEach(kt=>{Ye[kt]===void 0&&delete Ye[kt]});const St=kt=>{var et;return kt?{position:(et=C.value)==null?void 0:et.ControlPosition[kt]}:{}},Dt={scaleControlOptions:o.scaleControlStyle?{style:o.scaleControlStyle}:{},panControlOptions:St(o.panControlPosition),zoomControlOptions:St(o.zoomControlPosition),rotateControlOptions:St(o.rotateControlPosition),streetViewControlOptions:St(o.streetViewControlPosition),fullscreenControlOptions:St(o.fullscreenControlPosition),disableDefaultUI:o.disableDefaultUi};return{...Ye,...Dt}},Ue=watch([C,x],([Ye,St])=>{const Dt=Ye,kt=St;Dt&&kt&&(Dt.event.addListenerOnce(kt,"tilesloaded",()=>{R.value=!0}),setTimeout(Ue,0))},{immediate:!0}),je=()=>{try{const{apiKey:Ye,region:St,version:Dt,language:kt,libraries:et,nonce:Ft}=o;fe$1=new j({apiKey:Ye,region:St,version:Dt,language:kt,libraries:et,nonce:Ft})}catch(Ye){console.error(Ye)}},Xe=Ye=>{C.value=markRaw(Ye.maps),x.value=markRaw(new Ye.maps.Map(S.value,Ce()));const St=Ve$1(C.value);C.value[ee$1]=St,me$1.forEach(kt=>{var et;(et=x.value)==null||et.addListener(kt,Ft=>r(kt,Ft))}),E.value=!0;const Dt=Object.keys(o).filter(kt=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom","nonce"].includes(kt)).map(kt=>toRef(o,kt));watch([()=>o.center,()=>o.zoom,...Dt],([kt,et],[Ft,xt])=>{var Mt,Ot,Ut;const{center:Xt,zoom:ei,...si}=Ce();(Mt=x.value)==null||Mt.setOptions(si),et!==void 0&&et!==xt&&((Ot=x.value)==null||Ot.setZoom(et));const li=!Ft||kt.lng!==Ft.lng||kt.lat!==Ft.lat;kt&&li&&((Ut=x.value)==null||Ut.panTo(kt))})};return onMounted$1(()=>{o.apiPromise&&o.apiPromise instanceof Promise?o.apiPromise.then(Xe):(je(),fe$1.load().then(Xe))}),onBeforeUnmount(()=>{var Ye;R.value=!1,x.value&&((Ye=C.value)==null||Ye.event.clearInstanceListeners(x.value))}),{mapRef:S,ready:E,map:x,api:C,mapTilesLoaded:R}}}),te$1=(o,r)=>{const S=o.__vccOpts||o;for(const[E,x]of r)S[E]=x;return S},Ge$1={ref:"mapRef",class:"mapdiv"};function He$1(o,r,S,E,x,C){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",Ge$1,null,512),renderSlot(o.$slots,"default",normalizeProps(guardReactiveProps({ready:o.ready,map:o.map,api:o.api,mapTilesLoaded:o.mapTilesLoaded})),void 0)])}const Et=te$1(ze$1,[["render",He$1],["__scopeId","data-v-d05fc6bc"]]);function We$1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ke=function o(r,S){if(r===S)return!0;if(r&&S&&typeof r=="object"&&typeof S=="object"){if(r.constructor!==S.constructor)return!1;var E,x,C;if(Array.isArray(r)){if(E=r.length,E!=S.length)return!1;for(x=E;x--!==0;)if(!o(r[x],S[x]))return!1;return!0}if(r.constructor===RegExp)return r.source===S.source&&r.flags===S.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===S.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===S.toString();if(C=Object.keys(r),E=C.length,E!==Object.keys(S).length)return!1;for(x=E;x--!==0;)if(!Object.prototype.hasOwnProperty.call(S,C[x]))return!1;for(x=E;x--!==0;){var R=C[x];if(!o(r[R],S[R]))return!1}return!0}return r!==r&&S!==S};const A$1=We$1(Ke),ge$1=["click","drag","dragend","dragstart","gmp-click"],Pt$1=defineComponent({name:"AdvancedMarker",props:{options:{type:Object,required:!0},pinOptions:{type:Object,required:!1}},emits:ge$1,setup(o,{emit:r,expose:S,slots:E}){const x=toRef(o,"options"),C=toRef(o,"pinOptions"),R=ref(),Ce=inject(B$1,ref()),Ue=inject(Z$1,ref()),je=inject(ce$1,ref()),Xe=computed(()=>!!(je.value&&Ue.value&&R.value instanceof google.maps.marker.AdvancedMarkerElement));return watch([Ce,x,C],async(Ye,[St,Dt,kt])=>{var et,Ft,xt;const Mt=!A$1(x.value,Dt)||!A$1(C.value,kt)||Ce.value!==St;if(!Ce.value||!Ue.value||!Mt)return;const{AdvancedMarkerElement:Ot,PinElement:Ut}=Ue.value.marker;if(R.value){const{map:Xt,content:ei,...si}=x.value;Object.assign(R.value,{content:C.value?new Ut(C.value).element:ei,...si}),Xe.value&&((et=je.value)==null||et.removeMarker(R.value),(Ft=je.value)==null||Ft.addMarker(R.value))}else C.value&&(x.value.content=new Ut(C.value).element),R.value=markRaw(new Ot(x.value)),Xe.value?(xt=je.value)==null||xt.addMarker(R.value):R.value.map=Ce.value,ge$1.forEach(Xt=>{var ei;(ei=R.value)==null||ei.addListener(Xt,si=>r(Xt,si))})},{immediate:!0}),onBeforeUnmount(()=>{var Ye,St;R.value&&((Ye=Ue.value)==null||Ye.event.clearInstanceListeners(R.value),Xe.value?(St=je.value)==null||St.removeMarker(R.value):R.value.map=null)}),provide(le$1,R),S({marker:R}),()=>{var Ye;return(Ye=E.default)==null?void 0:Ye.call(E)}}});F$1.concat(["bounds_changed"]);F$1.concat(["center_changed","radius_changed"]);var D;(function(o){o.CLUSTERING_BEGIN="clusteringbegin",o.CLUSTERING_END="clusteringend",o.CLUSTER_CLICK="click"})(D||(D={}));Object.values(D);var lottie={exports:{}};(function(module,exports){typeof navigator<"u"&&function(o,r){module.exports=r()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(r){_useWebWorker=!!r},getWebWorker=function(){return _useWebWorker},setLocationHref=function(r){locationHref=r},getLocationHref=function(){return locationHref};function createTag(o){return document.createElement(o)}function extendPrototype(o,r){var S,E=o.length,x;for(S=0;S<E;S+=1){x=o[S].prototype;for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(r.prototype[C]=x[C])}}function getDescriptor(o,r){return Object.getOwnPropertyDescriptor(o,r)}function createProxyFunction(o){function r(){}return r.prototype=o,r}var audioControllerFactory=function(){function o(r){this.audios=[],this.audioFactory=r,this._volume=1,this._isMuted=!1}return o.prototype={addAudio:function(S){this.audios.push(S)},pause:function(){var S,E=this.audios.length;for(S=0;S<E;S+=1)this.audios[S].pause()},resume:function(){var S,E=this.audios.length;for(S=0;S<E;S+=1)this.audios[S].resume()},setRate:function(S){var E,x=this.audios.length;for(E=0;E<x;E+=1)this.audios[E].setRate(S)},createAudio:function(S){return this.audioFactory?this.audioFactory(S):window.Howl?new window.Howl({src:[S]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(S){this.audioFactory=S},setVolume:function(S){this._volume=S,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var S,E=this.audios.length;for(S=0;S<E;S+=1)this.audios[S].volume(this._volume*(this._isMuted?0:1))}},function(){return new o}}(),createTypedArray=function(){function o(S,E){var x=0,C=[],R;switch(S){case"int16":case"uint8c":R=1;break;default:R=1.1;break}for(x=0;x<E;x+=1)C.push(R);return C}function r(S,E){return S==="float32"?new Float32Array(E):S==="int16"?new Int16Array(E):S==="uint8c"?new Uint8ClampedArray(E):o(S,E)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?r:o}();function createSizedArray(o){return Array.apply(null,{length:o})}function _typeof$6(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(S){return typeof S}:_typeof$6=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$6(o)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var o=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],r,S=o.length;for(r=0;r<S;r+=1)BMMath[o[r]]=Math[o[r]]})(),BMMath.random=Math.random,BMMath.abs=function(o){var r=_typeof$6(o);if(r==="object"&&o.length){var S=createSizedArray(o.length),E,x=o.length;for(E=0;E<x;E+=1)S[E]=Math.abs(o[E]);return S}return Math.abs(o)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(o){o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.display="block",o.style.transformOrigin="0 0",o.style.webkitTransformOrigin="0 0",o.style.backfaceVisibility="visible",o.style.webkitBackfaceVisibility="visible",o.style.transformStyle="preserve-3d",o.style.webkitTransformStyle="preserve-3d",o.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(o,r,S,E){this.type=o,this.currentTime=r,this.totalTime=S,this.direction=E<0?-1:1}function BMCompleteEvent(o,r){this.type=o,this.direction=r<0?-1:1}function BMCompleteLoopEvent(o,r,S,E){this.type=o,this.currentLoop=S,this.totalLoops=r,this.direction=E<0?-1:1}function BMSegmentStartEvent(o,r,S){this.type=o,this.firstFrame=r,this.totalFrames=S}function BMDestroyEvent(o,r){this.type=o,this.target=r}function BMRenderFrameErrorEvent(o,r){this.type="renderFrameError",this.nativeError=o,this.currentTime=r}function BMConfigErrorEvent(o){this.type="configError",this.nativeError=o}var createElementID=function(){var o=0;return function(){return o+=1,idPrefix$1+"__lottie_element_"+o}}();function HSVtoRGB(o,r,S){var E,x,C,R,Ce,Ue,je,Xe;switch(R=Math.floor(o*6),Ce=o*6-R,Ue=S*(1-r),je=S*(1-Ce*r),Xe=S*(1-(1-Ce)*r),R%6){case 0:E=S,x=Xe,C=Ue;break;case 1:E=je,x=S,C=Ue;break;case 2:E=Ue,x=S,C=Xe;break;case 3:E=Ue,x=je,C=S;break;case 4:E=Xe,x=Ue,C=S;break;case 5:E=S,x=Ue,C=je;break}return[E,x,C]}function RGBtoHSV(o,r,S){var E=Math.max(o,r,S),x=Math.min(o,r,S),C=E-x,R,Ce=E===0?0:C/E,Ue=E/255;switch(E){case x:R=0;break;case o:R=r-S+C*(r<S?6:0),R/=6*C;break;case r:R=S-o+C*2,R/=6*C;break;case S:R=o-r+C*4,R/=6*C;break}return[R,Ce,Ue]}function addSaturationToRGB(o,r){var S=RGBtoHSV(o[0]*255,o[1]*255,o[2]*255);return S[1]+=r,S[1]>1?S[1]=1:S[1]<=0&&(S[1]=0),HSVtoRGB(S[0],S[1],S[2])}function addBrightnessToRGB(o,r){var S=RGBtoHSV(o[0]*255,o[1]*255,o[2]*255);return S[2]+=r,S[2]>1?S[2]=1:S[2]<0&&(S[2]=0),HSVtoRGB(S[0],S[1],S[2])}function addHueToRGB(o,r){var S=RGBtoHSV(o[0]*255,o[1]*255,o[2]*255);return S[0]+=r/360,S[0]>1?S[0]-=1:S[0]<0&&(S[0]+=1),HSVtoRGB(S[0],S[1],S[2])}var rgbToHex=function(){var o=[],r,S;for(r=0;r<256;r+=1)S=r.toString(16),o[r]=S.length===1?"0"+S:S;return function(E,x,C){return E<0&&(E=0),x<0&&(x=0),C<0&&(C=0),"#"+o[E]+o[x]+o[C]}}(),setSubframeEnabled=function(r){subframeEnabled=!!r},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(r){expressionsPlugin=r},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(r){expressionsInterfaces=r},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(r){defaultCurveSegments=r},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(r){idPrefix$1=r};function createNS(o){return document.createElementNS(svgNS,o)}function _typeof$5(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(S){return typeof S}:_typeof$5=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$5(o)}var dataManager=function(){var o=1,r=[],S,E,x={onmessage:function(){},postMessage:function(Dt){S({data:Dt})}},C={postMessage:function(Dt){x.onmessage({data:Dt})}};function R(St){if(window.Worker&&window.Blob&&getWebWorker()){var Dt=new Blob(["var _workerSelf = self; self.onmessage = ",St.toString()],{type:"text/javascript"}),kt=URL.createObjectURL(Dt);return new Worker(kt)}return S=St,x}function Ce(){E||(E=R(function(Dt){function kt(){function Ft(Ri,oi){var mi,ri,ni=Ri.length,Ei,Si,qi,sr;for(ri=0;ri<ni;ri+=1)if(mi=Ri[ri],"ks"in mi&&!mi.completed){if(mi.completed=!0,mi.hasMask){var ur=mi.masksProperties;for(Si=ur.length,Ei=0;Ei<Si;Ei+=1)if(ur[Ei].pt.k.i)Xt(ur[Ei].pt.k);else for(sr=ur[Ei].pt.k.length,qi=0;qi<sr;qi+=1)ur[Ei].pt.k[qi].s&&Xt(ur[Ei].pt.k[qi].s[0]),ur[Ei].pt.k[qi].e&&Xt(ur[Ei].pt.k[qi].e[0])}mi.ty===0?(mi.layers=Ot(mi.refId,oi),Ft(mi.layers,oi)):mi.ty===4?Ut(mi.shapes):mi.ty===5&&Di(mi)}}function xt(Ri,oi){if(Ri){var mi=0,ri=Ri.length;for(mi=0;mi<ri;mi+=1)Ri[mi].t===1&&(Ri[mi].data.layers=Ot(Ri[mi].data.refId,oi),Ft(Ri[mi].data.layers,oi))}}function Mt(Ri,oi){for(var mi=0,ri=oi.length;mi<ri;){if(oi[mi].id===Ri)return oi[mi];mi+=1}return null}function Ot(Ri,oi){var mi=Mt(Ri,oi);return mi?mi.layers.__used?JSON.parse(JSON.stringify(mi.layers)):(mi.layers.__used=!0,mi.layers):null}function Ut(Ri){var oi,mi=Ri.length,ri,ni;for(oi=mi-1;oi>=0;oi-=1)if(Ri[oi].ty==="sh")if(Ri[oi].ks.k.i)Xt(Ri[oi].ks.k);else for(ni=Ri[oi].ks.k.length,ri=0;ri<ni;ri+=1)Ri[oi].ks.k[ri].s&&Xt(Ri[oi].ks.k[ri].s[0]),Ri[oi].ks.k[ri].e&&Xt(Ri[oi].ks.k[ri].e[0]);else Ri[oi].ty==="gr"&&Ut(Ri[oi].it)}function Xt(Ri){var oi,mi=Ri.i.length;for(oi=0;oi<mi;oi+=1)Ri.i[oi][0]+=Ri.v[oi][0],Ri.i[oi][1]+=Ri.v[oi][1],Ri.o[oi][0]+=Ri.v[oi][0],Ri.o[oi][1]+=Ri.v[oi][1]}function ei(Ri,oi){var mi=oi?oi.split("."):[100,100,100];return Ri[0]>mi[0]?!0:mi[0]>Ri[0]?!1:Ri[1]>mi[1]?!0:mi[1]>Ri[1]?!1:Ri[2]>mi[2]?!0:mi[2]>Ri[2]?!1:null}var si=function(){var Ri=[4,4,14];function oi(ri){var ni=ri.t.d;ri.t.d={k:[{s:ni,t:0}]}}function mi(ri){var ni,Ei=ri.length;for(ni=0;ni<Ei;ni+=1)ri[ni].ty===5&&oi(ri[ni])}return function(ri){if(ei(Ri,ri.v)&&(mi(ri.layers),ri.assets)){var ni,Ei=ri.assets.length;for(ni=0;ni<Ei;ni+=1)ri.assets[ni].layers&&mi(ri.assets[ni].layers)}}}(),li=function(){var Ri=[4,7,99];return function(oi){if(oi.chars&&!ei(Ri,oi.v)){var mi,ri=oi.chars.length;for(mi=0;mi<ri;mi+=1){var ni=oi.chars[mi];ni.data&&ni.data.shapes&&(Ut(ni.data.shapes),ni.data.ip=0,ni.data.op=99999,ni.data.st=0,ni.data.sr=1,ni.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},oi.chars[mi].t||(ni.data.shapes.push({ty:"no"}),ni.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),bi=function(){var Ri=[5,7,15];function oi(ri){var ni=ri.t.p;typeof ni.a=="number"&&(ni.a={a:0,k:ni.a}),typeof ni.p=="number"&&(ni.p={a:0,k:ni.p}),typeof ni.r=="number"&&(ni.r={a:0,k:ni.r})}function mi(ri){var ni,Ei=ri.length;for(ni=0;ni<Ei;ni+=1)ri[ni].ty===5&&oi(ri[ni])}return function(ri){if(ei(Ri,ri.v)&&(mi(ri.layers),ri.assets)){var ni,Ei=ri.assets.length;for(ni=0;ni<Ei;ni+=1)ri.assets[ni].layers&&mi(ri.assets[ni].layers)}}}(),wi=function(){var Ri=[4,1,9];function oi(ri){var ni,Ei=ri.length,Si,qi;for(ni=0;ni<Ei;ni+=1)if(ri[ni].ty==="gr")oi(ri[ni].it);else if(ri[ni].ty==="fl"||ri[ni].ty==="st")if(ri[ni].c.k&&ri[ni].c.k[0].i)for(qi=ri[ni].c.k.length,Si=0;Si<qi;Si+=1)ri[ni].c.k[Si].s&&(ri[ni].c.k[Si].s[0]/=255,ri[ni].c.k[Si].s[1]/=255,ri[ni].c.k[Si].s[2]/=255,ri[ni].c.k[Si].s[3]/=255),ri[ni].c.k[Si].e&&(ri[ni].c.k[Si].e[0]/=255,ri[ni].c.k[Si].e[1]/=255,ri[ni].c.k[Si].e[2]/=255,ri[ni].c.k[Si].e[3]/=255);else ri[ni].c.k[0]/=255,ri[ni].c.k[1]/=255,ri[ni].c.k[2]/=255,ri[ni].c.k[3]/=255}function mi(ri){var ni,Ei=ri.length;for(ni=0;ni<Ei;ni+=1)ri[ni].ty===4&&oi(ri[ni].shapes)}return function(ri){if(ei(Ri,ri.v)&&(mi(ri.layers),ri.assets)){var ni,Ei=ri.assets.length;for(ni=0;ni<Ei;ni+=1)ri.assets[ni].layers&&mi(ri.assets[ni].layers)}}}(),Pi=function(){var Ri=[4,4,18];function oi(ri){var ni,Ei=ri.length,Si,qi;for(ni=Ei-1;ni>=0;ni-=1)if(ri[ni].ty==="sh")if(ri[ni].ks.k.i)ri[ni].ks.k.c=ri[ni].closed;else for(qi=ri[ni].ks.k.length,Si=0;Si<qi;Si+=1)ri[ni].ks.k[Si].s&&(ri[ni].ks.k[Si].s[0].c=ri[ni].closed),ri[ni].ks.k[Si].e&&(ri[ni].ks.k[Si].e[0].c=ri[ni].closed);else ri[ni].ty==="gr"&&oi(ri[ni].it)}function mi(ri){var ni,Ei,Si=ri.length,qi,sr,ur,fr;for(Ei=0;Ei<Si;Ei+=1){if(ni=ri[Ei],ni.hasMask){var lr=ni.masksProperties;for(sr=lr.length,qi=0;qi<sr;qi+=1)if(lr[qi].pt.k.i)lr[qi].pt.k.c=lr[qi].cl;else for(fr=lr[qi].pt.k.length,ur=0;ur<fr;ur+=1)lr[qi].pt.k[ur].s&&(lr[qi].pt.k[ur].s[0].c=lr[qi].cl),lr[qi].pt.k[ur].e&&(lr[qi].pt.k[ur].e[0].c=lr[qi].cl)}ni.ty===4&&oi(ni.shapes)}}return function(ri){if(ei(Ri,ri.v)&&(mi(ri.layers),ri.assets)){var ni,Ei=ri.assets.length;for(ni=0;ni<Ei;ni+=1)ri.assets[ni].layers&&mi(ri.assets[ni].layers)}}}();function Ci(Ri){Ri.__complete||(wi(Ri),si(Ri),li(Ri),bi(Ri),Pi(Ri),Ft(Ri.layers,Ri.assets),xt(Ri.chars,Ri.assets),Ri.__complete=!0)}function Di(Ri){Ri.t.a.length===0&&"m"in Ri.t.p}var Bi={};return Bi.completeData=Ci,Bi.checkColors=wi,Bi.checkChars=li,Bi.checkPathProperties=bi,Bi.checkShapes=Pi,Bi.completeLayers=Ft,Bi}if(C.dataManager||(C.dataManager=kt()),C.assetLoader||(C.assetLoader=function(){function Ft(Mt){var Ot=Mt.getResponseHeader("content-type");return Ot&&Mt.responseType==="json"&&Ot.indexOf("json")!==-1||Mt.response&&_typeof$5(Mt.response)==="object"?Mt.response:Mt.response&&typeof Mt.response=="string"?JSON.parse(Mt.response):Mt.responseText?JSON.parse(Mt.responseText):null}function xt(Mt,Ot,Ut,Xt){var ei,si=new XMLHttpRequest;try{si.responseType="json"}catch{}si.onreadystatechange=function(){if(si.readyState===4)if(si.status===200)ei=Ft(si),Ut(ei);else try{ei=Ft(si),Ut(ei)}catch(li){Xt&&Xt(li)}};try{si.open(["G","E","T"].join(""),Mt,!0)}catch{si.open(["G","E","T"].join(""),Ot+"/"+Mt,!0)}si.send()}return{load:xt}}()),Dt.data.type==="loadAnimation")C.assetLoader.load(Dt.data.path,Dt.data.fullPath,function(Ft){C.dataManager.completeData(Ft),C.postMessage({id:Dt.data.id,payload:Ft,status:"success"})},function(){C.postMessage({id:Dt.data.id,status:"error"})});else if(Dt.data.type==="complete"){var et=Dt.data.animation;C.dataManager.completeData(et),C.postMessage({id:Dt.data.id,payload:et,status:"success"})}else Dt.data.type==="loadData"&&C.assetLoader.load(Dt.data.path,Dt.data.fullPath,function(Ft){C.postMessage({id:Dt.data.id,payload:Ft,status:"success"})},function(){C.postMessage({id:Dt.data.id,status:"error"})})}),E.onmessage=function(St){var Dt=St.data,kt=Dt.id,et=r[kt];r[kt]=null,Dt.status==="success"?et.onComplete(Dt.payload):et.onError&&et.onError()})}function Ue(St,Dt){o+=1;var kt="processId_"+o;return r[kt]={onComplete:St,onError:Dt},kt}function je(St,Dt,kt){Ce();var et=Ue(Dt,kt);E.postMessage({type:"loadAnimation",path:St,fullPath:window.location.origin+window.location.pathname,id:et})}function Xe(St,Dt,kt){Ce();var et=Ue(Dt,kt);E.postMessage({type:"loadData",path:St,fullPath:window.location.origin+window.location.pathname,id:et})}function Ye(St,Dt,kt){Ce();var et=Ue(Dt,kt);E.postMessage({type:"complete",animation:St,id:et})}return{loadAnimation:je,loadData:Xe,completeAnimation:Ye}}(),ImagePreloader=function(){var o=function(){var xt=createTag("canvas");xt.width=1,xt.height=1;var Mt=xt.getContext("2d");return Mt.fillStyle="rgba(0,0,0,0)",Mt.fillRect(0,0,1,1),xt}();function r(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function S(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function E(xt,Mt,Ot){var Ut="";if(xt.e)Ut=xt.p;else if(Mt){var Xt=xt.p;Xt.indexOf("images/")!==-1&&(Xt=Xt.split("/")[1]),Ut=Mt+Xt}else Ut=Ot,Ut+=xt.u?xt.u:"",Ut+=xt.p;return Ut}function x(xt){var Mt=0,Ot=setInterval((function(){var Ut=xt.getBBox();(Ut.width||Mt>500)&&(this._imageLoaded(),clearInterval(Ot)),Mt+=1}).bind(this),50)}function C(xt){var Mt=E(xt,this.assetsPath,this.path),Ot=createNS("image");isSafari?this.testImageLoaded(Ot):Ot.addEventListener("load",this._imageLoaded,!1),Ot.addEventListener("error",(function(){Ut.img=o,this._imageLoaded()}).bind(this),!1),Ot.setAttributeNS("http://www.w3.org/1999/xlink","href",Mt),this._elementHelper.append?this._elementHelper.append(Ot):this._elementHelper.appendChild(Ot);var Ut={img:Ot,assetData:xt};return Ut}function R(xt){var Mt=E(xt,this.assetsPath,this.path),Ot=createTag("img");Ot.crossOrigin="anonymous",Ot.addEventListener("load",this._imageLoaded,!1),Ot.addEventListener("error",(function(){Ut.img=o,this._imageLoaded()}).bind(this),!1),Ot.src=Mt;var Ut={img:Ot,assetData:xt};return Ut}function Ce(xt){var Mt={assetData:xt},Ot=E(xt,this.assetsPath,this.path);return dataManager.loadData(Ot,(function(Ut){Mt.img=Ut,this._footageLoaded()}).bind(this),(function(){Mt.img={},this._footageLoaded()}).bind(this)),Mt}function Ue(xt,Mt){this.imagesLoadedCb=Mt;var Ot,Ut=xt.length;for(Ot=0;Ot<Ut;Ot+=1)xt[Ot].layers||(!xt[Ot].t||xt[Ot].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(xt[Ot]))):xt[Ot].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(xt[Ot]))))}function je(xt){this.path=xt||""}function Xe(xt){this.assetsPath=xt||""}function Ye(xt){for(var Mt=0,Ot=this.images.length;Mt<Ot;){if(this.images[Mt].assetData===xt)return this.images[Mt].img;Mt+=1}return null}function St(){this.imagesLoadedCb=null,this.images.length=0}function Dt(){return this.totalImages===this.loadedAssets}function kt(){return this.totalFootages===this.loadedFootagesCount}function et(xt,Mt){xt==="svg"?(this._elementHelper=Mt,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ft(){this._imageLoaded=r.bind(this),this._footageLoaded=S.bind(this),this.testImageLoaded=x.bind(this),this.createFootageData=Ce.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ft.prototype={loadAssets:Ue,setAssetsPath:Xe,setPath:je,loadedImages:Dt,loadedFootages:kt,destroy:St,getAsset:Ye,createImgData:R,createImageData:C,imageLoaded:r,footageLoaded:S,setCacheType:et},Ft}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(r,S){if(this._cbs[r])for(var E=this._cbs[r],x=0;x<E.length;x+=1)E[x](S)},addEventListener:function(r,S){return this._cbs[r]||(this._cbs[r]=[]),this._cbs[r].push(S),(function(){this.removeEventListener(r,S)}).bind(this)},removeEventListener:function(r,S){if(!S)this._cbs[r]=null;else if(this._cbs[r]){for(var E=0,x=this._cbs[r].length;E<x;)this._cbs[r][E]===S&&(this._cbs[r].splice(E,1),E-=1,x-=1),E+=1;this._cbs[r].length||(this._cbs[r]=null)}}};var markerParser=function(){function o(r){for(var S=r.split(`\r
`),E={},x,C=0,R=0;R<S.length;R+=1)x=S[R].split(":"),x.length===2&&(E[x[0]]=x[1].trim(),C+=1);if(C===0)throw new Error;return E}return function(r){for(var S=[],E=0;E<r.length;E+=1){var x=r[E],C={time:x.tm,duration:x.dr};try{C.payload=JSON.parse(r[E].cm)}catch{try{C.payload=o(r[E].cm)}catch{C.payload={name:r[E].cm}}}S.push(C)}return S}}(),ProjectInterface=function(){function o(r){this.compositions.push(r)}return function(){function r(S){for(var E=0,x=this.compositions.length;E<x;){if(this.compositions[E].data&&this.compositions[E].data.nm===S)return this.compositions[E].prepareFrame&&this.compositions[E].data.xt&&this.compositions[E].prepareFrame(this.currentFrame),this.compositions[E].compInterface;E+=1}return null}return r.compositions=[],r.currentFrame=0,r.registerComposition=o,r}}(),renderers={},registerRenderer=function(r,S){renderers[r]=S};function getRenderer(o){return renderers[o]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var o in renderers)if(renderers[o])return o;return""}function _typeof$4(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(S){return typeof S}:_typeof$4=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$4(o)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(o){(o.wrapper||o.container)&&(this.wrapper=o.wrapper||o.container);var r="svg";o.animType?r=o.animType:o.renderer&&(r=o.renderer);var S=getRenderer(r);this.renderer=new S(this,o.rendererSettings),this.imagePreloader.setCacheType(r,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=r,o.loop===""||o.loop===null||o.loop===void 0||o.loop===!0?this.loop=!0:o.loop===!1?this.loop=!1:this.loop=parseInt(o.loop,10),this.autoplay="autoplay"in o?o.autoplay:!0,this.name=o.name?o.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(o,"autoloadSegments")?o.autoloadSegments:!0,this.assetsPath=o.assetsPath,this.initialSegment=o.initialSegment,o.audioFactory&&this.audioController.setAudioFactory(o.audioFactory),o.animationData?this.setupAnimation(o.animationData):o.path&&(o.path.lastIndexOf("\\")!==-1?this.path=o.path.substr(0,o.path.lastIndexOf("\\")+1):this.path=o.path.substr(0,o.path.lastIndexOf("/")+1),this.fileName=o.path.substr(o.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(o.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(o){dataManager.completeAnimation(o,this.configAnimation)},AnimationItem.prototype.setData=function(o,r){r&&_typeof$4(r)!=="object"&&(r=JSON.parse(r));var S={wrapper:o,animationData:r},E=o.attributes;S.path=E.getNamedItem("data-animation-path")?E.getNamedItem("data-animation-path").value:E.getNamedItem("data-bm-path")?E.getNamedItem("data-bm-path").value:E.getNamedItem("bm-path")?E.getNamedItem("bm-path").value:"",S.animType=E.getNamedItem("data-anim-type")?E.getNamedItem("data-anim-type").value:E.getNamedItem("data-bm-type")?E.getNamedItem("data-bm-type").value:E.getNamedItem("bm-type")?E.getNamedItem("bm-type").value:E.getNamedItem("data-bm-renderer")?E.getNamedItem("data-bm-renderer").value:E.getNamedItem("bm-renderer")?E.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var x=E.getNamedItem("data-anim-loop")?E.getNamedItem("data-anim-loop").value:E.getNamedItem("data-bm-loop")?E.getNamedItem("data-bm-loop").value:E.getNamedItem("bm-loop")?E.getNamedItem("bm-loop").value:"";x==="false"?S.loop=!1:x==="true"?S.loop=!0:x!==""&&(S.loop=parseInt(x,10));var C=E.getNamedItem("data-anim-autoplay")?E.getNamedItem("data-anim-autoplay").value:E.getNamedItem("data-bm-autoplay")?E.getNamedItem("data-bm-autoplay").value:E.getNamedItem("bm-autoplay")?E.getNamedItem("bm-autoplay").value:!0;S.autoplay=C!=="false",S.name=E.getNamedItem("data-name")?E.getNamedItem("data-name").value:E.getNamedItem("data-bm-name")?E.getNamedItem("data-bm-name").value:E.getNamedItem("bm-name")?E.getNamedItem("bm-name").value:"";var R=E.getNamedItem("data-anim-prerender")?E.getNamedItem("data-anim-prerender").value:E.getNamedItem("data-bm-prerender")?E.getNamedItem("data-bm-prerender").value:E.getNamedItem("bm-prerender")?E.getNamedItem("bm-prerender").value:"";R==="false"&&(S.prerender=!1),S.path?this.setParams(S):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(o){o.op>this.animationData.op&&(this.animationData.op=o.op,this.totalFrames=Math.floor(o.op-this.animationData.ip));var r=this.animationData.layers,S,E=r.length,x=o.layers,C,R=x.length;for(C=0;C<R;C+=1)for(S=0;S<E;){if(r[S].id===x[C].id){r[S]=x[C];break}S+=1}if((o.chars||o.fonts)&&(this.renderer.globalData.fontManager.addChars(o.chars),this.renderer.globalData.fontManager.addFonts(o.fonts,this.renderer.globalData.defs)),o.assets)for(E=o.assets.length,S=0;S<E;S+=1)this.animationData.assets.push(o.assets[S]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(o){this.animationData=o;var r=getExpressionsPlugin();r&&r.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var o=this.animationData.segments;if(!o||o.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var r=o.shift();this.timeCompleted=r.time*this.frameRate;var S=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(S,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var o=this.animationData.segments;o||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(o){if(this.renderer)try{this.animationData=o,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(o),o.assets||(o.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(o.assets),this.markers=markerParser(o.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(r){this.triggerConfigError(r)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var o=getExpressionsPlugin();o&&o.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(o,r){var S=typeof o=="number"?o:void 0,E=typeof r=="number"?r:void 0;this.renderer.updateContainerSize(S,E)},AnimationItem.prototype.setSubframe=function(o){this.isSubframeEnabled=!!o},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(o){this.triggerRenderFrameError(o)}},AnimationItem.prototype.play=function(o){o&&this.name!==o||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(o){o&&this.name!==o||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(o){o&&this.name!==o||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(o){o&&this.name!==o||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(o){for(var r,S=0;S<this.markers.length;S+=1)if(r=this.markers[S],r.payload&&r.payload.name===o)return r;return null},AnimationItem.prototype.goToAndStop=function(o,r,S){if(!(S&&this.name!==S)){var E=Number(o);if(isNaN(E)){var x=this.getMarkerData(o);x&&this.goToAndStop(x.time,!0)}else r?this.setCurrentRawFrameValue(o):this.setCurrentRawFrameValue(o*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(o,r,S){if(!(S&&this.name!==S)){var E=Number(o);if(isNaN(E)){var x=this.getMarkerData(o);x&&(x.duration?this.playSegments([x.time,x.time+x.duration],!0):this.goToAndStop(x.time,!0))}else this.goToAndStop(E,r,S);this.play()}},AnimationItem.prototype.advanceTime=function(o){if(!(this.isPaused===!0||this.isLoaded===!1)){var r=this.currentRawFrame+o*this.frameModifier,S=!1;r>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(r>this.totalFrames?r%this.totalFrames:0)||(S=!0,r=this.totalFrames-1):r>=this.totalFrames?(this.playCount+=1,this.checkSegments(r%this.totalFrames)||(this.setCurrentRawFrameValue(r%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(r):r<0?this.checkSegments(r%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+r%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(S=!0,r=0)):this.setCurrentRawFrameValue(r),S&&(this.setCurrentRawFrameValue(r),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(o,r){this.playCount=0,o[1]<o[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=o[0]-o[1],this.timeCompleted=this.totalFrames,this.firstFrame=o[1],this.setCurrentRawFrameValue(this.totalFrames-.001-r)):o[1]>o[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=o[1]-o[0],this.timeCompleted=this.totalFrames,this.firstFrame=o[0],this.setCurrentRawFrameValue(.001+r)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(o,r){var S=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<o?S=o:this.currentRawFrame+this.firstFrame>r&&(S=r-o)),this.firstFrame=o,this.totalFrames=r-o,this.timeCompleted=this.totalFrames,S!==-1&&this.goToAndStop(S,!0)},AnimationItem.prototype.playSegments=function(o,r){if(r&&(this.segments.length=0),_typeof$4(o[0])==="object"){var S,E=o.length;for(S=0;S<E;S+=1)this.segments.push(o[S])}else this.segments.push(o);this.segments.length&&r&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(o){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),o&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(o){return this.segments.length?(this.adjustSegment(this.segments.shift(),o),!0):!1},AnimationItem.prototype.destroy=function(o){o&&this.name!==o||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(o){this.currentRawFrame=o,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(o){this.playSpeed=o,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(o){this.playDirection=o<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(o){this.loop=o},AnimationItem.prototype.setVolume=function(o,r){r&&this.name!==r||this.audioController.setVolume(o)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(o){o&&this.name!==o||this.audioController.mute()},AnimationItem.prototype.unmute=function(o){o&&this.name!==o||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(o){var r="";if(o.e)r=o.p;else if(this.assetsPath){var S=o.p;S.indexOf("images/")!==-1&&(S=S.split("/")[1]),r=this.assetsPath+S}else r=this.path,r+=o.u?o.u:"",r+=o.p;return r},AnimationItem.prototype.getAssetData=function(o){for(var r=0,S=this.assets.length;r<S;){if(o===this.assets[r].id)return this.assets[r];r+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(o){return o?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(o,r,S){try{var E=this.renderer.getElementByPath(o);E.updateDocumentData(r,S)}catch{}},AnimationItem.prototype.trigger=function(o){if(this._cbs&&this._cbs[o])switch(o){case"enterFrame":this.triggerEvent(o,new BMEnterFrameEvent(o,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(o,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(o,new BMCompleteLoopEvent(o,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(o,new BMCompleteEvent(o,this.frameMult));break;case"segmentStart":this.triggerEvent(o,new BMSegmentStartEvent(o,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(o,new BMDestroyEvent(o,this));break;default:this.triggerEvent(o)}o==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(o,this.currentFrame,this.totalFrames,this.frameMult)),o==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(o,this.loop,this.playCount,this.frameMult)),o==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(o,this.frameMult)),o==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(o,this.firstFrame,this.totalFrames)),o==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(o,this))},AnimationItem.prototype.triggerRenderFrameError=function(o){var r=new BMRenderFrameErrorEvent(o,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)},AnimationItem.prototype.triggerConfigError=function(o){var r=new BMConfigErrorEvent(o,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)};var animationManager=function(){var o={},r=[],S=0,E=0,x=0,C=!0,R=!1;function Ce(oi){for(var mi=0,ri=oi.target;mi<E;)r[mi].animation===ri&&(r.splice(mi,1),mi-=1,E-=1,ri.isPaused||Ye()),mi+=1}function Ue(oi,mi){if(!oi)return null;for(var ri=0;ri<E;){if(r[ri].elem===oi&&r[ri].elem!==null)return r[ri].animation;ri+=1}var ni=new AnimationItem;return St(ni,oi),ni.setData(oi,mi),ni}function je(){var oi,mi=r.length,ri=[];for(oi=0;oi<mi;oi+=1)ri.push(r[oi].animation);return ri}function Xe(){x+=1,wi()}function Ye(){x-=1}function St(oi,mi){oi.addEventListener("destroy",Ce),oi.addEventListener("_active",Xe),oi.addEventListener("_idle",Ye),r.push({elem:mi,animation:oi}),E+=1}function Dt(oi){var mi=new AnimationItem;return St(mi,null),mi.setParams(oi),mi}function kt(oi,mi){var ri;for(ri=0;ri<E;ri+=1)r[ri].animation.setSpeed(oi,mi)}function et(oi,mi){var ri;for(ri=0;ri<E;ri+=1)r[ri].animation.setDirection(oi,mi)}function Ft(oi){var mi;for(mi=0;mi<E;mi+=1)r[mi].animation.play(oi)}function xt(oi){var mi=oi-S,ri;for(ri=0;ri<E;ri+=1)r[ri].animation.advanceTime(mi);S=oi,x&&!R?window.requestAnimationFrame(xt):C=!0}function Mt(oi){S=oi,window.requestAnimationFrame(xt)}function Ot(oi){var mi;for(mi=0;mi<E;mi+=1)r[mi].animation.pause(oi)}function Ut(oi,mi,ri){var ni;for(ni=0;ni<E;ni+=1)r[ni].animation.goToAndStop(oi,mi,ri)}function Xt(oi){var mi;for(mi=0;mi<E;mi+=1)r[mi].animation.stop(oi)}function ei(oi){var mi;for(mi=0;mi<E;mi+=1)r[mi].animation.togglePause(oi)}function si(oi){var mi;for(mi=E-1;mi>=0;mi-=1)r[mi].animation.destroy(oi)}function li(oi,mi,ri){var ni=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Ei,Si=ni.length;for(Ei=0;Ei<Si;Ei+=1)ri&&ni[Ei].setAttribute("data-bm-type",ri),Ue(ni[Ei],oi);if(mi&&Si===0){ri||(ri="svg");var qi=document.getElementsByTagName("body")[0];qi.innerText="";var sr=createTag("div");sr.style.width="100%",sr.style.height="100%",sr.setAttribute("data-bm-type",ri),qi.appendChild(sr),Ue(sr,oi)}}function bi(){var oi;for(oi=0;oi<E;oi+=1)r[oi].animation.resize()}function wi(){!R&&x&&C&&(window.requestAnimationFrame(Mt),C=!1)}function Pi(){R=!0}function Ci(){R=!1,wi()}function Di(oi,mi){var ri;for(ri=0;ri<E;ri+=1)r[ri].animation.setVolume(oi,mi)}function Bi(oi){var mi;for(mi=0;mi<E;mi+=1)r[mi].animation.mute(oi)}function Ri(oi){var mi;for(mi=0;mi<E;mi+=1)r[mi].animation.unmute(oi)}return o.registerAnimation=Ue,o.loadAnimation=Dt,o.setSpeed=kt,o.setDirection=et,o.play=Ft,o.pause=Ot,o.stop=Xt,o.togglePause=ei,o.searchAnimations=li,o.resize=bi,o.goToAndStop=Ut,o.destroy=si,o.freeze=Pi,o.unfreeze=Ci,o.setVolume=Di,o.mute=Bi,o.unmute=Ri,o.getRegisteredAnimations=je,o}(),BezierFactory=function(){var o={};o.getBezierEasing=S;var r={};function S(Mt,Ot,Ut,Xt,ei){var si=ei||("bez_"+Mt+"_"+Ot+"_"+Ut+"_"+Xt).replace(/\./g,"p");if(r[si])return r[si];var li=new xt([Mt,Ot,Ut,Xt]);return r[si]=li,li}var E=4,x=.001,C=1e-7,R=10,Ce=11,Ue=1/(Ce-1),je=typeof Float32Array=="function";function Xe(Mt,Ot){return 1-3*Ot+3*Mt}function Ye(Mt,Ot){return 3*Ot-6*Mt}function St(Mt){return 3*Mt}function Dt(Mt,Ot,Ut){return((Xe(Ot,Ut)*Mt+Ye(Ot,Ut))*Mt+St(Ot))*Mt}function kt(Mt,Ot,Ut){return 3*Xe(Ot,Ut)*Mt*Mt+2*Ye(Ot,Ut)*Mt+St(Ot)}function et(Mt,Ot,Ut,Xt,ei){var si,li,bi=0;do li=Ot+(Ut-Ot)/2,si=Dt(li,Xt,ei)-Mt,si>0?Ut=li:Ot=li;while(Math.abs(si)>C&&++bi<R);return li}function Ft(Mt,Ot,Ut,Xt){for(var ei=0;ei<E;++ei){var si=kt(Ot,Ut,Xt);if(si===0)return Ot;var li=Dt(Ot,Ut,Xt)-Mt;Ot-=li/si}return Ot}function xt(Mt){this._p=Mt,this._mSampleValues=je?new Float32Array(Ce):new Array(Ce),this._precomputed=!1,this.get=this.get.bind(this)}return xt.prototype={get:function(Ot){var Ut=this._p[0],Xt=this._p[1],ei=this._p[2],si=this._p[3];return this._precomputed||this._precompute(),Ut===Xt&&ei===si?Ot:Ot===0?0:Ot===1?1:Dt(this._getTForX(Ot),Xt,si)},_precompute:function(){var Ot=this._p[0],Ut=this._p[1],Xt=this._p[2],ei=this._p[3];this._precomputed=!0,(Ot!==Ut||Xt!==ei)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Ot=this._p[0],Ut=this._p[2],Xt=0;Xt<Ce;++Xt)this._mSampleValues[Xt]=Dt(Xt*Ue,Ot,Ut)},_getTForX:function(Ot){for(var Ut=this._p[0],Xt=this._p[2],ei=this._mSampleValues,si=0,li=1,bi=Ce-1;li!==bi&&ei[li]<=Ot;++li)si+=Ue;--li;var wi=(Ot-ei[li])/(ei[li+1]-ei[li]),Pi=si+wi*Ue,Ci=kt(Pi,Ut,Xt);return Ci>=x?Ft(Ot,Pi,Ut,Xt):Ci===0?Pi:et(Ot,si,si+Ue,Ut,Xt)}},o}(),pooling=function(){function o(r){return r.concat(createSizedArray(r.length))}return{double:o}}(),poolFactory=function(){return function(o,r,S){var E=0,x=o,C=createSizedArray(x),R={newElement:Ce,release:Ue};function Ce(){var je;return E?(E-=1,je=C[E]):je=r(),je}function Ue(je){E===x&&(C=pooling.double(C),x*=2),S&&S(je),C[E]=je,E+=1}return R}}(),bezierLengthPool=function(){function o(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,o)}(),segmentsLengthPool=function(){function o(){return{lengths:[],totalLength:0}}function r(S){var E,x=S.lengths.length;for(E=0;E<x;E+=1)bezierLengthPool.release(S.lengths[E]);S.lengths.length=0}return poolFactory(8,o,r)}();function bezFunction(){var o=Math;function r(St,Dt,kt,et,Ft,xt){var Mt=St*et+Dt*Ft+kt*xt-Ft*et-xt*St-kt*Dt;return Mt>-.001&&Mt<.001}function S(St,Dt,kt,et,Ft,xt,Mt,Ot,Ut){if(kt===0&&xt===0&&Ut===0)return r(St,Dt,et,Ft,Mt,Ot);var Xt=o.sqrt(o.pow(et-St,2)+o.pow(Ft-Dt,2)+o.pow(xt-kt,2)),ei=o.sqrt(o.pow(Mt-St,2)+o.pow(Ot-Dt,2)+o.pow(Ut-kt,2)),si=o.sqrt(o.pow(Mt-et,2)+o.pow(Ot-Ft,2)+o.pow(Ut-xt,2)),li;return Xt>ei?Xt>si?li=Xt-ei-si:li=si-ei-Xt:si>ei?li=si-ei-Xt:li=ei-Xt-si,li>-1e-4&&li<1e-4}var E=function(){return function(St,Dt,kt,et){var Ft=getDefaultCurveSegments(),xt,Mt,Ot,Ut,Xt,ei=0,si,li=[],bi=[],wi=bezierLengthPool.newElement();for(Ot=kt.length,xt=0;xt<Ft;xt+=1){for(Xt=xt/(Ft-1),si=0,Mt=0;Mt<Ot;Mt+=1)Ut=bmPow(1-Xt,3)*St[Mt]+3*bmPow(1-Xt,2)*Xt*kt[Mt]+3*(1-Xt)*bmPow(Xt,2)*et[Mt]+bmPow(Xt,3)*Dt[Mt],li[Mt]=Ut,bi[Mt]!==null&&(si+=bmPow(li[Mt]-bi[Mt],2)),bi[Mt]=li[Mt];si&&(si=bmSqrt(si),ei+=si),wi.percents[xt]=Xt,wi.lengths[xt]=ei}return wi.addedLength=ei,wi}}();function x(St){var Dt=segmentsLengthPool.newElement(),kt=St.c,et=St.v,Ft=St.o,xt=St.i,Mt,Ot=St._length,Ut=Dt.lengths,Xt=0;for(Mt=0;Mt<Ot-1;Mt+=1)Ut[Mt]=E(et[Mt],et[Mt+1],Ft[Mt],xt[Mt+1]),Xt+=Ut[Mt].addedLength;return kt&&Ot&&(Ut[Mt]=E(et[Mt],et[0],Ft[Mt],xt[0]),Xt+=Ut[Mt].addedLength),Dt.totalLength=Xt,Dt}function C(St){this.segmentLength=0,this.points=new Array(St)}function R(St,Dt){this.partialLength=St,this.point=Dt}var Ce=function(){var St={};return function(Dt,kt,et,Ft){var xt=(Dt[0]+"_"+Dt[1]+"_"+kt[0]+"_"+kt[1]+"_"+et[0]+"_"+et[1]+"_"+Ft[0]+"_"+Ft[1]).replace(/\./g,"p");if(!St[xt]){var Mt=getDefaultCurveSegments(),Ot,Ut,Xt,ei,si,li=0,bi,wi,Pi=null;Dt.length===2&&(Dt[0]!==kt[0]||Dt[1]!==kt[1])&&r(Dt[0],Dt[1],kt[0],kt[1],Dt[0]+et[0],Dt[1]+et[1])&&r(Dt[0],Dt[1],kt[0],kt[1],kt[0]+Ft[0],kt[1]+Ft[1])&&(Mt=2);var Ci=new C(Mt);for(Xt=et.length,Ot=0;Ot<Mt;Ot+=1){for(wi=createSizedArray(Xt),si=Ot/(Mt-1),bi=0,Ut=0;Ut<Xt;Ut+=1)ei=bmPow(1-si,3)*Dt[Ut]+3*bmPow(1-si,2)*si*(Dt[Ut]+et[Ut])+3*(1-si)*bmPow(si,2)*(kt[Ut]+Ft[Ut])+bmPow(si,3)*kt[Ut],wi[Ut]=ei,Pi!==null&&(bi+=bmPow(wi[Ut]-Pi[Ut],2));bi=bmSqrt(bi),li+=bi,Ci.points[Ot]=new R(bi,wi),Pi=wi}Ci.segmentLength=li,St[xt]=Ci}return St[xt]}}();function Ue(St,Dt){var kt=Dt.percents,et=Dt.lengths,Ft=kt.length,xt=bmFloor((Ft-1)*St),Mt=St*Dt.addedLength,Ot=0;if(xt===Ft-1||xt===0||Mt===et[xt])return kt[xt];for(var Ut=et[xt]>Mt?-1:1,Xt=!0;Xt;)if(et[xt]<=Mt&&et[xt+1]>Mt?(Ot=(Mt-et[xt])/(et[xt+1]-et[xt]),Xt=!1):xt+=Ut,xt<0||xt>=Ft-1){if(xt===Ft-1)return kt[xt];Xt=!1}return kt[xt]+(kt[xt+1]-kt[xt])*Ot}function je(St,Dt,kt,et,Ft,xt){var Mt=Ue(Ft,xt),Ot=1-Mt,Ut=o.round((Ot*Ot*Ot*St[0]+(Mt*Ot*Ot+Ot*Mt*Ot+Ot*Ot*Mt)*kt[0]+(Mt*Mt*Ot+Ot*Mt*Mt+Mt*Ot*Mt)*et[0]+Mt*Mt*Mt*Dt[0])*1e3)/1e3,Xt=o.round((Ot*Ot*Ot*St[1]+(Mt*Ot*Ot+Ot*Mt*Ot+Ot*Ot*Mt)*kt[1]+(Mt*Mt*Ot+Ot*Mt*Mt+Mt*Ot*Mt)*et[1]+Mt*Mt*Mt*Dt[1])*1e3)/1e3;return[Ut,Xt]}var Xe=createTypedArray("float32",8);function Ye(St,Dt,kt,et,Ft,xt,Mt){Ft<0?Ft=0:Ft>1&&(Ft=1);var Ot=Ue(Ft,Mt);xt=xt>1?1:xt;var Ut=Ue(xt,Mt),Xt,ei=St.length,si=1-Ot,li=1-Ut,bi=si*si*si,wi=Ot*si*si*3,Pi=Ot*Ot*si*3,Ci=Ot*Ot*Ot,Di=si*si*li,Bi=Ot*si*li+si*Ot*li+si*si*Ut,Ri=Ot*Ot*li+si*Ot*Ut+Ot*si*Ut,oi=Ot*Ot*Ut,mi=si*li*li,ri=Ot*li*li+si*Ut*li+si*li*Ut,ni=Ot*Ut*li+si*Ut*Ut+Ot*li*Ut,Ei=Ot*Ut*Ut,Si=li*li*li,qi=Ut*li*li+li*Ut*li+li*li*Ut,sr=Ut*Ut*li+li*Ut*Ut+Ut*li*Ut,ur=Ut*Ut*Ut;for(Xt=0;Xt<ei;Xt+=1)Xe[Xt*4]=o.round((bi*St[Xt]+wi*kt[Xt]+Pi*et[Xt]+Ci*Dt[Xt])*1e3)/1e3,Xe[Xt*4+1]=o.round((Di*St[Xt]+Bi*kt[Xt]+Ri*et[Xt]+oi*Dt[Xt])*1e3)/1e3,Xe[Xt*4+2]=o.round((mi*St[Xt]+ri*kt[Xt]+ni*et[Xt]+Ei*Dt[Xt])*1e3)/1e3,Xe[Xt*4+3]=o.round((Si*St[Xt]+qi*kt[Xt]+sr*et[Xt]+ur*Dt[Xt])*1e3)/1e3;return Xe}return{getSegmentsLength:x,getNewSegment:Ye,getPointInSegment:je,buildBezierData:Ce,pointOnLine2D:r,pointOnLine3D:S}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(o,r){var S=this.offsetTime,E;this.propType==="multidimensional"&&(E=createTypedArray("float32",this.pv.length));for(var x=r.lastIndex,C=x,R=this.keyframes.length-1,Ce=!0,Ue,je,Xe;Ce;){if(Ue=this.keyframes[C],je=this.keyframes[C+1],C===R-1&&o>=je.t-S){Ue.h&&(Ue=je),x=0;break}if(je.t-S>o){x=C;break}C<R-1?C+=1:(x=0,Ce=!1)}Xe=this.keyframesMetadata[C]||{};var Ye,St,Dt,kt,et,Ft,xt=je.t-S,Mt=Ue.t-S,Ot;if(Ue.to){Xe.bezierData||(Xe.bezierData=bez.buildBezierData(Ue.s,je.s||Ue.e,Ue.to,Ue.ti));var Ut=Xe.bezierData;if(o>=xt||o<Mt){var Xt=o>=xt?Ut.points.length-1:0;for(St=Ut.points[Xt].point.length,Ye=0;Ye<St;Ye+=1)E[Ye]=Ut.points[Xt].point[Ye]}else{Xe.__fnct?Ft=Xe.__fnct:(Ft=BezierFactory.getBezierEasing(Ue.o.x,Ue.o.y,Ue.i.x,Ue.i.y,Ue.n).get,Xe.__fnct=Ft),Dt=Ft((o-Mt)/(xt-Mt));var ei=Ut.segmentLength*Dt,si,li=r.lastFrame<o&&r._lastKeyframeIndex===C?r._lastAddedLength:0;for(et=r.lastFrame<o&&r._lastKeyframeIndex===C?r._lastPoint:0,Ce=!0,kt=Ut.points.length;Ce;){if(li+=Ut.points[et].partialLength,ei===0||Dt===0||et===Ut.points.length-1){for(St=Ut.points[et].point.length,Ye=0;Ye<St;Ye+=1)E[Ye]=Ut.points[et].point[Ye];break}else if(ei>=li&&ei<li+Ut.points[et+1].partialLength){for(si=(ei-li)/Ut.points[et+1].partialLength,St=Ut.points[et].point.length,Ye=0;Ye<St;Ye+=1)E[Ye]=Ut.points[et].point[Ye]+(Ut.points[et+1].point[Ye]-Ut.points[et].point[Ye])*si;break}et<kt-1?et+=1:Ce=!1}r._lastPoint=et,r._lastAddedLength=li-Ut.points[et].partialLength,r._lastKeyframeIndex=C}}else{var bi,wi,Pi,Ci,Di;if(R=Ue.s.length,Ot=je.s||Ue.e,this.sh&&Ue.h!==1)if(o>=xt)E[0]=Ot[0],E[1]=Ot[1],E[2]=Ot[2];else if(o<=Mt)E[0]=Ue.s[0],E[1]=Ue.s[1],E[2]=Ue.s[2];else{var Bi=createQuaternion(Ue.s),Ri=createQuaternion(Ot),oi=(o-Mt)/(xt-Mt);quaternionToEuler(E,slerp(Bi,Ri,oi))}else for(C=0;C<R;C+=1)Ue.h!==1&&(o>=xt?Dt=1:o<Mt?Dt=0:(Ue.o.x.constructor===Array?(Xe.__fnct||(Xe.__fnct=[]),Xe.__fnct[C]?Ft=Xe.__fnct[C]:(bi=Ue.o.x[C]===void 0?Ue.o.x[0]:Ue.o.x[C],wi=Ue.o.y[C]===void 0?Ue.o.y[0]:Ue.o.y[C],Pi=Ue.i.x[C]===void 0?Ue.i.x[0]:Ue.i.x[C],Ci=Ue.i.y[C]===void 0?Ue.i.y[0]:Ue.i.y[C],Ft=BezierFactory.getBezierEasing(bi,wi,Pi,Ci).get,Xe.__fnct[C]=Ft)):Xe.__fnct?Ft=Xe.__fnct:(bi=Ue.o.x,wi=Ue.o.y,Pi=Ue.i.x,Ci=Ue.i.y,Ft=BezierFactory.getBezierEasing(bi,wi,Pi,Ci).get,Ue.keyframeMetadata=Ft),Dt=Ft((o-Mt)/(xt-Mt)))),Ot=je.s||Ue.e,Di=Ue.h===1?Ue.s[C]:Ue.s[C]+(Ot[C]-Ue.s[C])*Dt,this.propType==="multidimensional"?E[C]=Di:E=Di}return r.lastIndex=x,E}function slerp(o,r,S){var E=[],x=o[0],C=o[1],R=o[2],Ce=o[3],Ue=r[0],je=r[1],Xe=r[2],Ye=r[3],St,Dt,kt,et,Ft;return Dt=x*Ue+C*je+R*Xe+Ce*Ye,Dt<0&&(Dt=-Dt,Ue=-Ue,je=-je,Xe=-Xe,Ye=-Ye),1-Dt>1e-6?(St=Math.acos(Dt),kt=Math.sin(St),et=Math.sin((1-S)*St)/kt,Ft=Math.sin(S*St)/kt):(et=1-S,Ft=S),E[0]=et*x+Ft*Ue,E[1]=et*C+Ft*je,E[2]=et*R+Ft*Xe,E[3]=et*Ce+Ft*Ye,E}function quaternionToEuler(o,r){var S=r[0],E=r[1],x=r[2],C=r[3],R=Math.atan2(2*E*C-2*S*x,1-2*E*E-2*x*x),Ce=Math.asin(2*S*E+2*x*C),Ue=Math.atan2(2*S*C-2*E*x,1-2*S*S-2*x*x);o[0]=R/degToRads,o[1]=Ce/degToRads,o[2]=Ue/degToRads}function createQuaternion(o){var r=o[0]*degToRads,S=o[1]*degToRads,E=o[2]*degToRads,x=Math.cos(r/2),C=Math.cos(S/2),R=Math.cos(E/2),Ce=Math.sin(r/2),Ue=Math.sin(S/2),je=Math.sin(E/2),Xe=x*C*R-Ce*Ue*je,Ye=Ce*Ue*R+x*C*je,St=Ce*C*R+x*Ue*je,Dt=x*Ue*R-Ce*C*je;return[Ye,St,Dt,Xe]}function getValueAtCurrentTime(){var o=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,S=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(o===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=S&&o>=S||this._caching.lastFrame<r&&o<r))){this._caching.lastFrame>=o&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var E=this.interpolateValue(o,this._caching);this.pv=E}return this._caching.lastFrame=o,this.pv}function setVValue(o){var r;if(this.propType==="unidimensional")r=o*this.mult,mathAbs(this.v-r)>1e-5&&(this.v=r,this._mdf=!0);else for(var S=0,E=this.v.length;S<E;)r=o[S]*this.mult,mathAbs(this.v[S]-r)>1e-5&&(this.v[S]=r,this._mdf=!0),S+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var o,r=this.effectsSequence.length,S=this.kf?this.pv:this.data.k;for(o=0;o<r;o+=1)S=this.effectsSequence[o](S);this.setVValue(S),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(o){this.effectsSequence.push(o),this.container.addDynamicProperty(this)}function ValueProperty(o,r,S,E){this.propType="unidimensional",this.mult=S||1,this.data=r,this.v=S?r.k*S:r.k,this.pv=r.k,this._mdf=!1,this.elem=o,this.container=E,this.comp=o.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(o,r,S,E){this.propType="multidimensional",this.mult=S||1,this.data=r,this._mdf=!1,this.elem=o,this.container=E,this.comp=o.comp,this.k=!1,this.kf=!1,this.frameId=-1;var x,C=r.k.length;for(this.v=createTypedArray("float32",C),this.pv=createTypedArray("float32",C),this.vel=createTypedArray("float32",C),x=0;x<C;x+=1)this.v[x]=r.k[x]*this.mult,this.pv[x]=r.k[x];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(o,r,S,E){this.propType="unidimensional",this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=o.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=S||1,this.elem=o,this.container=E,this.comp=o.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(o,r,S,E){this.propType="multidimensional";var x,C=r.k.length,R,Ce,Ue,je;for(x=0;x<C-1;x+=1)r.k[x].to&&r.k[x].s&&r.k[x+1]&&r.k[x+1].s&&(R=r.k[x].s,Ce=r.k[x+1].s,Ue=r.k[x].to,je=r.k[x].ti,(R.length===2&&!(R[0]===Ce[0]&&R[1]===Ce[1])&&bez.pointOnLine2D(R[0],R[1],Ce[0],Ce[1],R[0]+Ue[0],R[1]+Ue[1])&&bez.pointOnLine2D(R[0],R[1],Ce[0],Ce[1],Ce[0]+je[0],Ce[1]+je[1])||R.length===3&&!(R[0]===Ce[0]&&R[1]===Ce[1]&&R[2]===Ce[2])&&bez.pointOnLine3D(R[0],R[1],R[2],Ce[0],Ce[1],Ce[2],R[0]+Ue[0],R[1]+Ue[1],R[2]+Ue[2])&&bez.pointOnLine3D(R[0],R[1],R[2],Ce[0],Ce[1],Ce[2],Ce[0]+je[0],Ce[1]+je[1],Ce[2]+je[2]))&&(r.k[x].to=null,r.k[x].ti=null),R[0]===Ce[0]&&R[1]===Ce[1]&&Ue[0]===0&&Ue[1]===0&&je[0]===0&&je[1]===0&&(R.length===2||R[2]===Ce[2]&&Ue[2]===0&&je[2]===0)&&(r.k[x].to=null,r.k[x].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=r,this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=o.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=S||1,this.elem=o,this.container=E,this.comp=o.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Xe=r.k[0].s.length;for(this.v=createTypedArray("float32",Xe),this.pv=createTypedArray("float32",Xe),x=0;x<Xe;x+=1)this.v[x]=initFrame,this.pv[x]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Xe)},this.addEffect=addEffect}var PropertyFactory=function(){function o(S,E,x,C,R){E.sid&&(E=S.globalData.slotManager.getProp(E));var Ce;if(!E.k.length)Ce=new ValueProperty(S,E,C,R);else if(typeof E.k[0]=="number")Ce=new MultiDimensionalProperty(S,E,C,R);else switch(x){case 0:Ce=new KeyframedValueProperty(S,E,C,R);break;case 1:Ce=new KeyframedMultidimensionalProperty(S,E,C,R);break}return Ce.effectsSequence.length&&R.addDynamicProperty(Ce),Ce}var r={getProp:o};return r}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&(this.dynamicProperties.push(r),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var r,S=this.dynamicProperties.length;for(r=0;r<S;r+=1)this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(r){this.container=r,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function o(){return createTypedArray("float32",2)}return poolFactory(8,o)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(o,r){this.c=o,this.setLength(r);for(var S=0;S<r;)this.v[S]=pointPool.newElement(),this.o[S]=pointPool.newElement(),this.i[S]=pointPool.newElement(),S+=1},ShapePath.prototype.setLength=function(o){for(;this._maxLength<o;)this.doubleArrayLength();this._length=o},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(o,r,S,E,x){var C;switch(this._length=Math.max(this._length,E+1),this._length>=this._maxLength&&this.doubleArrayLength(),S){case"v":C=this.v;break;case"i":C=this.i;break;case"o":C=this.o;break;default:C=[];break}(!C[E]||C[E]&&!x)&&(C[E]=pointPool.newElement()),C[E][0]=o,C[E][1]=r},ShapePath.prototype.setTripleAt=function(o,r,S,E,x,C,R,Ce){this.setXYAt(o,r,"v",R,Ce),this.setXYAt(S,E,"o",R,Ce),this.setXYAt(x,C,"i",R,Ce)},ShapePath.prototype.reverse=function(){var o=new ShapePath;o.setPathData(this.c,this._length);var r=this.v,S=this.o,E=this.i,x=0;this.c&&(o.setTripleAt(r[0][0],r[0][1],E[0][0],E[0][1],S[0][0],S[0][1],0,!1),x=1);var C=this._length-1,R=this._length,Ce;for(Ce=x;Ce<R;Ce+=1)o.setTripleAt(r[C][0],r[C][1],E[C][0],E[C][1],S[C][0],S[C][1],Ce,!1),C-=1;return o},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function o(){return new ShapePath}function r(x){var C=x._length,R;for(R=0;R<C;R+=1)pointPool.release(x.v[R]),pointPool.release(x.i[R]),pointPool.release(x.o[R]),x.v[R]=null,x.i[R]=null,x.o[R]=null;x._length=0,x.c=!1}function S(x){var C=E.newElement(),R,Ce=x._length===void 0?x.v.length:x._length;for(C.setLength(Ce),C.c=x.c,R=0;R<Ce;R+=1)C.setTripleAt(x.v[R][0],x.v[R][1],x.o[R][0],x.o[R][1],x.i[R][0],x.i[R][1],R);return C}var E=poolFactory(4,o,r);return E.clone=S,E}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(o){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=o,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var o;for(o=0;o<this._length;o+=1)shapePool.release(this.shapes[o]);this._length=0};var shapeCollectionPool=function(){var o={newShapeCollection:x,release:C},r=0,S=4,E=createSizedArray(S);function x(){var R;return r?(r-=1,R=E[r]):R=new ShapeCollection,R}function C(R){var Ce,Ue=R._length;for(Ce=0;Ce<Ue;Ce+=1)shapePool.release(R.shapes[Ce]);R._length=0,r===S&&(E=pooling.double(E),S*=2),E[r]=R,r+=1}return o}(),ShapePropertyFactory=function(){var o=-999999;function r(xt,Mt,Ot){var Ut=Ot.lastIndex,Xt,ei,si,li,bi,wi,Pi,Ci,Di,Bi=this.keyframes;if(xt<Bi[0].t-this.offsetTime)Xt=Bi[0].s[0],si=!0,Ut=0;else if(xt>=Bi[Bi.length-1].t-this.offsetTime)Xt=Bi[Bi.length-1].s?Bi[Bi.length-1].s[0]:Bi[Bi.length-2].e[0],si=!0;else{for(var Ri=Ut,oi=Bi.length-1,mi=!0,ri,ni,Ei;mi&&(ri=Bi[Ri],ni=Bi[Ri+1],!(ni.t-this.offsetTime>xt));)Ri<oi-1?Ri+=1:mi=!1;if(Ei=this.keyframesMetadata[Ri]||{},si=ri.h===1,Ut=Ri,!si){if(xt>=ni.t-this.offsetTime)Ci=1;else if(xt<ri.t-this.offsetTime)Ci=0;else{var Si;Ei.__fnct?Si=Ei.__fnct:(Si=BezierFactory.getBezierEasing(ri.o.x,ri.o.y,ri.i.x,ri.i.y).get,Ei.__fnct=Si),Ci=Si((xt-(ri.t-this.offsetTime))/(ni.t-this.offsetTime-(ri.t-this.offsetTime)))}ei=ni.s?ni.s[0]:ri.e[0]}Xt=ri.s[0]}for(wi=Mt._length,Pi=Xt.i[0].length,Ot.lastIndex=Ut,li=0;li<wi;li+=1)for(bi=0;bi<Pi;bi+=1)Di=si?Xt.i[li][bi]:Xt.i[li][bi]+(ei.i[li][bi]-Xt.i[li][bi])*Ci,Mt.i[li][bi]=Di,Di=si?Xt.o[li][bi]:Xt.o[li][bi]+(ei.o[li][bi]-Xt.o[li][bi])*Ci,Mt.o[li][bi]=Di,Di=si?Xt.v[li][bi]:Xt.v[li][bi]+(ei.v[li][bi]-Xt.v[li][bi])*Ci,Mt.v[li][bi]=Di}function S(){var xt=this.comp.renderedFrame-this.offsetTime,Mt=this.keyframes[0].t-this.offsetTime,Ot=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Ut=this._caching.lastFrame;return Ut!==o&&(Ut<Mt&&xt<Mt||Ut>Ot&&xt>Ot)||(this._caching.lastIndex=Ut<xt?this._caching.lastIndex:0,this.interpolateShape(xt,this.pv,this._caching)),this._caching.lastFrame=xt,this.pv}function E(){this.paths=this.localShapeCollection}function x(xt,Mt){if(xt._length!==Mt._length||xt.c!==Mt.c)return!1;var Ot,Ut=xt._length;for(Ot=0;Ot<Ut;Ot+=1)if(xt.v[Ot][0]!==Mt.v[Ot][0]||xt.v[Ot][1]!==Mt.v[Ot][1]||xt.o[Ot][0]!==Mt.o[Ot][0]||xt.o[Ot][1]!==Mt.o[Ot][1]||xt.i[Ot][0]!==Mt.i[Ot][0]||xt.i[Ot][1]!==Mt.i[Ot][1])return!1;return!0}function C(xt){x(this.v,xt)||(this.v=shapePool.clone(xt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function R(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var xt;this.kf?xt=this.pv:this.data.ks?xt=this.data.ks.k:xt=this.data.pt.k;var Mt,Ot=this.effectsSequence.length;for(Mt=0;Mt<Ot;Mt+=1)xt=this.effectsSequence[Mt](xt);this.setVValue(xt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function Ce(xt,Mt,Ot){this.propType="shape",this.comp=xt.comp,this.container=xt,this.elem=xt,this.data=Mt,this.k=!1,this.kf=!1,this._mdf=!1;var Ut=Ot===3?Mt.pt.k:Mt.ks.k;this.v=shapePool.clone(Ut),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=E,this.effectsSequence=[]}function Ue(xt){this.effectsSequence.push(xt),this.container.addDynamicProperty(this)}Ce.prototype.interpolateShape=r,Ce.prototype.getValue=R,Ce.prototype.setVValue=C,Ce.prototype.addEffect=Ue;function je(xt,Mt,Ot){this.propType="shape",this.comp=xt.comp,this.elem=xt,this.container=xt,this.offsetTime=xt.data.st,this.keyframes=Ot===3?Mt.pt.k:Mt.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Ut=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Ut),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=o,this.reset=E,this._caching={lastFrame:o,lastIndex:0},this.effectsSequence=[S.bind(this)]}je.prototype.getValue=R,je.prototype.interpolateShape=r,je.prototype.setVValue=C,je.prototype.addEffect=Ue;var Xe=function(){var xt=roundCorner;function Mt(Ot,Ut){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Ut.d,this.elem=Ot,this.comp=Ot.comp,this.frameId=-1,this.initDynamicPropertyContainer(Ot),this.p=PropertyFactory.getProp(Ot,Ut.p,1,0,this),this.s=PropertyFactory.getProp(Ot,Ut.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Mt.prototype={reset:E,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Ut=this.p.v[0],Xt=this.p.v[1],ei=this.s.v[0]/2,si=this.s.v[1]/2,li=this.d!==3,bi=this.v;bi.v[0][0]=Ut,bi.v[0][1]=Xt-si,bi.v[1][0]=li?Ut+ei:Ut-ei,bi.v[1][1]=Xt,bi.v[2][0]=Ut,bi.v[2][1]=Xt+si,bi.v[3][0]=li?Ut-ei:Ut+ei,bi.v[3][1]=Xt,bi.i[0][0]=li?Ut-ei*xt:Ut+ei*xt,bi.i[0][1]=Xt-si,bi.i[1][0]=li?Ut+ei:Ut-ei,bi.i[1][1]=Xt-si*xt,bi.i[2][0]=li?Ut+ei*xt:Ut-ei*xt,bi.i[2][1]=Xt+si,bi.i[3][0]=li?Ut-ei:Ut+ei,bi.i[3][1]=Xt+si*xt,bi.o[0][0]=li?Ut+ei*xt:Ut-ei*xt,bi.o[0][1]=Xt-si,bi.o[1][0]=li?Ut+ei:Ut-ei,bi.o[1][1]=Xt+si*xt,bi.o[2][0]=li?Ut-ei*xt:Ut+ei*xt,bi.o[2][1]=Xt+si,bi.o[3][0]=li?Ut-ei:Ut+ei,bi.o[3][1]=Xt-si*xt}},extendPrototype([DynamicPropertyContainer],Mt),Mt}(),Ye=function(){function xt(Mt,Ot){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Mt,this.comp=Mt.comp,this.data=Ot,this.frameId=-1,this.d=Ot.d,this.initDynamicPropertyContainer(Mt),Ot.sy===1?(this.ir=PropertyFactory.getProp(Mt,Ot.ir,0,0,this),this.is=PropertyFactory.getProp(Mt,Ot.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Mt,Ot.pt,0,0,this),this.p=PropertyFactory.getProp(Mt,Ot.p,1,0,this),this.r=PropertyFactory.getProp(Mt,Ot.r,0,degToRads,this),this.or=PropertyFactory.getProp(Mt,Ot.or,0,0,this),this.os=PropertyFactory.getProp(Mt,Ot.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return xt.prototype={reset:E,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Ot=Math.floor(this.pt.v)*2,Ut=Math.PI*2/Ot,Xt=!0,ei=this.or.v,si=this.ir.v,li=this.os.v,bi=this.is.v,wi=2*Math.PI*ei/(Ot*2),Pi=2*Math.PI*si/(Ot*2),Ci,Di,Bi,Ri,oi=-Math.PI/2;oi+=this.r.v;var mi=this.data.d===3?-1:1;for(this.v._length=0,Ci=0;Ci<Ot;Ci+=1){Di=Xt?ei:si,Bi=Xt?li:bi,Ri=Xt?wi:Pi;var ri=Di*Math.cos(oi),ni=Di*Math.sin(oi),Ei=ri===0&&ni===0?0:ni/Math.sqrt(ri*ri+ni*ni),Si=ri===0&&ni===0?0:-ri/Math.sqrt(ri*ri+ni*ni);ri+=+this.p.v[0],ni+=+this.p.v[1],this.v.setTripleAt(ri,ni,ri-Ei*Ri*Bi*mi,ni-Si*Ri*Bi*mi,ri+Ei*Ri*Bi*mi,ni+Si*Ri*Bi*mi,Ci,!0),Xt=!Xt,oi+=Ut*mi}},convertPolygonToPath:function(){var Ot=Math.floor(this.pt.v),Ut=Math.PI*2/Ot,Xt=this.or.v,ei=this.os.v,si=2*Math.PI*Xt/(Ot*4),li,bi=-Math.PI*.5,wi=this.data.d===3?-1:1;for(bi+=this.r.v,this.v._length=0,li=0;li<Ot;li+=1){var Pi=Xt*Math.cos(bi),Ci=Xt*Math.sin(bi),Di=Pi===0&&Ci===0?0:Ci/Math.sqrt(Pi*Pi+Ci*Ci),Bi=Pi===0&&Ci===0?0:-Pi/Math.sqrt(Pi*Pi+Ci*Ci);Pi+=+this.p.v[0],Ci+=+this.p.v[1],this.v.setTripleAt(Pi,Ci,Pi-Di*si*ei*wi,Ci-Bi*si*ei*wi,Pi+Di*si*ei*wi,Ci+Bi*si*ei*wi,li,!0),bi+=Ut*wi}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],xt),xt}(),St=function(){function xt(Mt,Ot){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Mt,this.comp=Mt.comp,this.frameId=-1,this.d=Ot.d,this.initDynamicPropertyContainer(Mt),this.p=PropertyFactory.getProp(Mt,Ot.p,1,0,this),this.s=PropertyFactory.getProp(Mt,Ot.s,1,0,this),this.r=PropertyFactory.getProp(Mt,Ot.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return xt.prototype={convertRectToPath:function(){var Ot=this.p.v[0],Ut=this.p.v[1],Xt=this.s.v[0]/2,ei=this.s.v[1]/2,si=bmMin(Xt,ei,this.r.v),li=si*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Ot+Xt,Ut-ei+si,Ot+Xt,Ut-ei+si,Ot+Xt,Ut-ei+li,0,!0),this.v.setTripleAt(Ot+Xt,Ut+ei-si,Ot+Xt,Ut+ei-li,Ot+Xt,Ut+ei-si,1,!0),si!==0?(this.v.setTripleAt(Ot+Xt-si,Ut+ei,Ot+Xt-si,Ut+ei,Ot+Xt-li,Ut+ei,2,!0),this.v.setTripleAt(Ot-Xt+si,Ut+ei,Ot-Xt+li,Ut+ei,Ot-Xt+si,Ut+ei,3,!0),this.v.setTripleAt(Ot-Xt,Ut+ei-si,Ot-Xt,Ut+ei-si,Ot-Xt,Ut+ei-li,4,!0),this.v.setTripleAt(Ot-Xt,Ut-ei+si,Ot-Xt,Ut-ei+li,Ot-Xt,Ut-ei+si,5,!0),this.v.setTripleAt(Ot-Xt+si,Ut-ei,Ot-Xt+si,Ut-ei,Ot-Xt+li,Ut-ei,6,!0),this.v.setTripleAt(Ot+Xt-si,Ut-ei,Ot+Xt-li,Ut-ei,Ot+Xt-si,Ut-ei,7,!0)):(this.v.setTripleAt(Ot-Xt,Ut+ei,Ot-Xt+li,Ut+ei,Ot-Xt,Ut+ei,2),this.v.setTripleAt(Ot-Xt,Ut-ei,Ot-Xt,Ut-ei+li,Ot-Xt,Ut-ei,3))):(this.v.setTripleAt(Ot+Xt,Ut-ei+si,Ot+Xt,Ut-ei+li,Ot+Xt,Ut-ei+si,0,!0),si!==0?(this.v.setTripleAt(Ot+Xt-si,Ut-ei,Ot+Xt-si,Ut-ei,Ot+Xt-li,Ut-ei,1,!0),this.v.setTripleAt(Ot-Xt+si,Ut-ei,Ot-Xt+li,Ut-ei,Ot-Xt+si,Ut-ei,2,!0),this.v.setTripleAt(Ot-Xt,Ut-ei+si,Ot-Xt,Ut-ei+si,Ot-Xt,Ut-ei+li,3,!0),this.v.setTripleAt(Ot-Xt,Ut+ei-si,Ot-Xt,Ut+ei-li,Ot-Xt,Ut+ei-si,4,!0),this.v.setTripleAt(Ot-Xt+si,Ut+ei,Ot-Xt+si,Ut+ei,Ot-Xt+li,Ut+ei,5,!0),this.v.setTripleAt(Ot+Xt-si,Ut+ei,Ot+Xt-li,Ut+ei,Ot+Xt-si,Ut+ei,6,!0),this.v.setTripleAt(Ot+Xt,Ut+ei-si,Ot+Xt,Ut+ei-si,Ot+Xt,Ut+ei-li,7,!0)):(this.v.setTripleAt(Ot-Xt,Ut-ei,Ot-Xt+li,Ut-ei,Ot-Xt,Ut-ei,1,!0),this.v.setTripleAt(Ot-Xt,Ut+ei,Ot-Xt,Ut+ei-li,Ot-Xt,Ut+ei,2,!0),this.v.setTripleAt(Ot+Xt,Ut+ei,Ot+Xt-li,Ut+ei,Ot+Xt,Ut+ei,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:E},extendPrototype([DynamicPropertyContainer],xt),xt}();function Dt(xt,Mt,Ot){var Ut;if(Ot===3||Ot===4){var Xt=Ot===3?Mt.pt:Mt.ks,ei=Xt.k;ei.length?Ut=new je(xt,Mt,Ot):Ut=new Ce(xt,Mt,Ot)}else Ot===5?Ut=new St(xt,Mt):Ot===6?Ut=new Xe(xt,Mt):Ot===7&&(Ut=new Ye(xt,Mt));return Ut.k&&xt.addDynamicProperty(Ut),Ut}function kt(){return Ce}function et(){return je}var Ft={};return Ft.getShapeProp=Dt,Ft.getConstructorFunction=kt,Ft.getKeyframedConstructorFunction=et,Ft}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var o=Math.cos,r=Math.sin,S=Math.tan,E=Math.round;function x(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function C(ri){if(ri===0)return this;var ni=o(ri),Ei=r(ri);return this._t(ni,-Ei,0,0,Ei,ni,0,0,0,0,1,0,0,0,0,1)}function R(ri){if(ri===0)return this;var ni=o(ri),Ei=r(ri);return this._t(1,0,0,0,0,ni,-Ei,0,0,Ei,ni,0,0,0,0,1)}function Ce(ri){if(ri===0)return this;var ni=o(ri),Ei=r(ri);return this._t(ni,0,Ei,0,0,1,0,0,-Ei,0,ni,0,0,0,0,1)}function Ue(ri){if(ri===0)return this;var ni=o(ri),Ei=r(ri);return this._t(ni,-Ei,0,0,Ei,ni,0,0,0,0,1,0,0,0,0,1)}function je(ri,ni){return this._t(1,ni,ri,1,0,0)}function Xe(ri,ni){return this.shear(S(ri),S(ni))}function Ye(ri,ni){var Ei=o(ni),Si=r(ni);return this._t(Ei,Si,0,0,-Si,Ei,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,S(ri),1,0,0,0,0,1,0,0,0,0,1)._t(Ei,-Si,0,0,Si,Ei,0,0,0,0,1,0,0,0,0,1)}function St(ri,ni,Ei){return!Ei&&Ei!==0&&(Ei=1),ri===1&&ni===1&&Ei===1?this:this._t(ri,0,0,0,0,ni,0,0,0,0,Ei,0,0,0,0,1)}function Dt(ri,ni,Ei,Si,qi,sr,ur,fr,lr,Mi,Yi,Wi,ir,mr,yr,pi){return this.props[0]=ri,this.props[1]=ni,this.props[2]=Ei,this.props[3]=Si,this.props[4]=qi,this.props[5]=sr,this.props[6]=ur,this.props[7]=fr,this.props[8]=lr,this.props[9]=Mi,this.props[10]=Yi,this.props[11]=Wi,this.props[12]=ir,this.props[13]=mr,this.props[14]=yr,this.props[15]=pi,this}function kt(ri,ni,Ei){return Ei=Ei||0,ri!==0||ni!==0||Ei!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,ri,ni,Ei,1):this}function et(ri,ni,Ei,Si,qi,sr,ur,fr,lr,Mi,Yi,Wi,ir,mr,yr,pi){var fi=this.props;if(ri===1&&ni===0&&Ei===0&&Si===0&&qi===0&&sr===1&&ur===0&&fr===0&&lr===0&&Mi===0&&Yi===1&&Wi===0)return fi[12]=fi[12]*ri+fi[15]*ir,fi[13]=fi[13]*sr+fi[15]*mr,fi[14]=fi[14]*Yi+fi[15]*yr,fi[15]*=pi,this._identityCalculated=!1,this;var Ai=fi[0],Vi=fi[1],Li=fi[2],Ni=fi[3],Qi=fi[4],Fi=fi[5],Gi=fi[6],ji=fi[7],ar=fi[8],Ji=fi[9],Xi=fi[10],or=fi[11],vr=fi[12],Er=fi[13],xr=fi[14],Mr=fi[15];return fi[0]=Ai*ri+Vi*qi+Li*lr+Ni*ir,fi[1]=Ai*ni+Vi*sr+Li*Mi+Ni*mr,fi[2]=Ai*Ei+Vi*ur+Li*Yi+Ni*yr,fi[3]=Ai*Si+Vi*fr+Li*Wi+Ni*pi,fi[4]=Qi*ri+Fi*qi+Gi*lr+ji*ir,fi[5]=Qi*ni+Fi*sr+Gi*Mi+ji*mr,fi[6]=Qi*Ei+Fi*ur+Gi*Yi+ji*yr,fi[7]=Qi*Si+Fi*fr+Gi*Wi+ji*pi,fi[8]=ar*ri+Ji*qi+Xi*lr+or*ir,fi[9]=ar*ni+Ji*sr+Xi*Mi+or*mr,fi[10]=ar*Ei+Ji*ur+Xi*Yi+or*yr,fi[11]=ar*Si+Ji*fr+Xi*Wi+or*pi,fi[12]=vr*ri+Er*qi+xr*lr+Mr*ir,fi[13]=vr*ni+Er*sr+xr*Mi+Mr*mr,fi[14]=vr*Ei+Er*ur+xr*Yi+Mr*yr,fi[15]=vr*Si+Er*fr+xr*Wi+Mr*pi,this._identityCalculated=!1,this}function Ft(ri){var ni=ri.props;return this.transform(ni[0],ni[1],ni[2],ni[3],ni[4],ni[5],ni[6],ni[7],ni[8],ni[9],ni[10],ni[11],ni[12],ni[13],ni[14],ni[15])}function xt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Mt(ri){for(var ni=0;ni<16;){if(ri.props[ni]!==this.props[ni])return!1;ni+=1}return!0}function Ot(ri){var ni;for(ni=0;ni<16;ni+=1)ri.props[ni]=this.props[ni];return ri}function Ut(ri){var ni;for(ni=0;ni<16;ni+=1)this.props[ni]=ri[ni]}function Xt(ri,ni,Ei){return{x:ri*this.props[0]+ni*this.props[4]+Ei*this.props[8]+this.props[12],y:ri*this.props[1]+ni*this.props[5]+Ei*this.props[9]+this.props[13],z:ri*this.props[2]+ni*this.props[6]+Ei*this.props[10]+this.props[14]}}function ei(ri,ni,Ei){return ri*this.props[0]+ni*this.props[4]+Ei*this.props[8]+this.props[12]}function si(ri,ni,Ei){return ri*this.props[1]+ni*this.props[5]+Ei*this.props[9]+this.props[13]}function li(ri,ni,Ei){return ri*this.props[2]+ni*this.props[6]+Ei*this.props[10]+this.props[14]}function bi(){var ri=this.props[0]*this.props[5]-this.props[1]*this.props[4],ni=this.props[5]/ri,Ei=-this.props[1]/ri,Si=-this.props[4]/ri,qi=this.props[0]/ri,sr=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/ri,ur=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/ri,fr=new Matrix;return fr.props[0]=ni,fr.props[1]=Ei,fr.props[4]=Si,fr.props[5]=qi,fr.props[12]=sr,fr.props[13]=ur,fr}function wi(ri){var ni=this.getInverseMatrix();return ni.applyToPointArray(ri[0],ri[1],ri[2]||0)}function Pi(ri){var ni,Ei=ri.length,Si=[];for(ni=0;ni<Ei;ni+=1)Si[ni]=wi(ri[ni]);return Si}function Ci(ri,ni,Ei){var Si=createTypedArray("float32",6);if(this.isIdentity())Si[0]=ri[0],Si[1]=ri[1],Si[2]=ni[0],Si[3]=ni[1],Si[4]=Ei[0],Si[5]=Ei[1];else{var qi=this.props[0],sr=this.props[1],ur=this.props[4],fr=this.props[5],lr=this.props[12],Mi=this.props[13];Si[0]=ri[0]*qi+ri[1]*ur+lr,Si[1]=ri[0]*sr+ri[1]*fr+Mi,Si[2]=ni[0]*qi+ni[1]*ur+lr,Si[3]=ni[0]*sr+ni[1]*fr+Mi,Si[4]=Ei[0]*qi+Ei[1]*ur+lr,Si[5]=Ei[0]*sr+Ei[1]*fr+Mi}return Si}function Di(ri,ni,Ei){var Si;return this.isIdentity()?Si=[ri,ni,Ei]:Si=[ri*this.props[0]+ni*this.props[4]+Ei*this.props[8]+this.props[12],ri*this.props[1]+ni*this.props[5]+Ei*this.props[9]+this.props[13],ri*this.props[2]+ni*this.props[6]+Ei*this.props[10]+this.props[14]],Si}function Bi(ri,ni){if(this.isIdentity())return ri+","+ni;var Ei=this.props;return Math.round((ri*Ei[0]+ni*Ei[4]+Ei[12])*100)/100+","+Math.round((ri*Ei[1]+ni*Ei[5]+Ei[13])*100)/100}function Ri(){for(var ri=0,ni=this.props,Ei="matrix3d(",Si=1e4;ri<16;)Ei+=E(ni[ri]*Si)/Si,Ei+=ri===15?")":",",ri+=1;return Ei}function oi(ri){var ni=1e4;return ri<1e-6&&ri>0||ri>-1e-6&&ri<0?E(ri*ni)/ni:ri}function mi(){var ri=this.props,ni=oi(ri[0]),Ei=oi(ri[1]),Si=oi(ri[4]),qi=oi(ri[5]),sr=oi(ri[12]),ur=oi(ri[13]);return"matrix("+ni+","+Ei+","+Si+","+qi+","+sr+","+ur+")"}return function(){this.reset=x,this.rotate=C,this.rotateX=R,this.rotateY=Ce,this.rotateZ=Ue,this.skew=Xe,this.skewFromAxis=Ye,this.shear=je,this.scale=St,this.setTransform=Dt,this.translate=kt,this.transform=et,this.multiply=Ft,this.applyToPoint=Xt,this.applyToX=ei,this.applyToY=si,this.applyToZ=li,this.applyToPointArray=Di,this.applyToTriplePoints=Ci,this.applyToPointStringified=Bi,this.toCSS=Ri,this.to2dCSS=mi,this.clone=Ot,this.cloneFromProps=Ut,this.equals=Mt,this.inversePoints=Pi,this.inversePoint=wi,this.getInverseMatrix=bi,this._t=this.transform,this.isIdentity=xt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(S){return typeof S}:_typeof$3=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$3(o)}var lottie={};function setLocation(o){setLocationHref(o)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(o){setSubframeEnabled(o)}function setPrefix(o){setIdPrefix(o)}function loadAnimation(o){return animationManager.loadAnimation(o)}function setQuality(o){if(typeof o=="string")switch(o){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(o)&&o>1&&setDefaultCurveSegments(o)}function inBrowser(){return typeof navigator<"u"}function installPlugin(o,r){o==="expressions"&&setExpressionsPlugin(r)}function getFactory(o){switch(o){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(o){for(var r=queryString.split("&"),S=0;S<r.length;S+=1){var E=r[S].split("=");if(decodeURIComponent(E[0])==o)return decodeURIComponent(E[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(o){}var ShapeModifiers=function(){var o={},r={};o.registerModifier=S,o.getModifier=E;function S(x,C){r[x]||(r[x]=C)}function E(x,C,R){return new r[x](C,R)}return o}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(o){if(!this.closed){o.sh.container.addDynamicProperty(o.sh);var r={shape:o.sh,data:o,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(r),this.addShapeToModifier(r),this._isAnimated&&o.setAsAnimated()}},ShapeModifier.prototype.init=function(o,r){this.shapes=[],this.elem=o,this.initDynamicPropertyContainer(o),this.initModifierProperties(o,r),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(o,r){this.s=PropertyFactory.getProp(o,r.s,0,.01,this),this.e=PropertyFactory.getProp(o,r.e,0,.01,this),this.o=PropertyFactory.getProp(o,r.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=r.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(o){o.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(o,r,S,E,x){var C=[];r<=1?C.push({s:o,e:r}):o>=1?C.push({s:o-1,e:r-1}):(C.push({s:o,e:1}),C.push({s:0,e:r-1}));var R=[],Ce,Ue=C.length,je;for(Ce=0;Ce<Ue;Ce+=1)if(je=C[Ce],!(je.e*x<E||je.s*x>E+S)){var Xe,Ye;je.s*x<=E?Xe=0:Xe=(je.s*x-E)/S,je.e*x>=E+S?Ye=1:Ye=(je.e*x-E)/S,R.push([Xe,Ye])}return R.length||R.push([0,0]),R},TrimModifier.prototype.releasePathsData=function(o){var r,S=o.length;for(r=0;r<S;r+=1)segmentsLengthPool.release(o[r]);return o.length=0,o},TrimModifier.prototype.processShapes=function(o){var r,S;if(this._mdf||o){var E=this.o.v%360/360;if(E<0&&(E+=1),this.s.v>1?r=1+E:this.s.v<0?r=0+E:r=this.s.v+E,this.e.v>1?S=1+E:this.e.v<0?S=0+E:S=this.e.v+E,r>S){var x=r;r=S,S=x}r=Math.round(r*1e4)*1e-4,S=Math.round(S*1e4)*1e-4,this.sValue=r,this.eValue=S}else r=this.sValue,S=this.eValue;var C,R,Ce=this.shapes.length,Ue,je,Xe,Ye,St,Dt=0;if(S===r)for(R=0;R<Ce;R+=1)this.shapes[R].localShapeCollection.releaseShapes(),this.shapes[R].shape._mdf=!0,this.shapes[R].shape.paths=this.shapes[R].localShapeCollection,this._mdf&&(this.shapes[R].pathsData.length=0);else if(S===1&&r===0||S===0&&r===1){if(this._mdf)for(R=0;R<Ce;R+=1)this.shapes[R].pathsData.length=0,this.shapes[R].shape._mdf=!0}else{var kt=[],et,Ft;for(R=0;R<Ce;R+=1)if(et=this.shapes[R],!et.shape._mdf&&!this._mdf&&!o&&this.m!==2)et.shape.paths=et.localShapeCollection;else{if(C=et.shape.paths,je=C._length,St=0,!et.shape._mdf&&et.pathsData.length)St=et.totalShapeLength;else{for(Xe=this.releasePathsData(et.pathsData),Ue=0;Ue<je;Ue+=1)Ye=bez.getSegmentsLength(C.shapes[Ue]),Xe.push(Ye),St+=Ye.totalLength;et.totalShapeLength=St,et.pathsData=Xe}Dt+=St,et.shape._mdf=!0}var xt=r,Mt=S,Ot=0,Ut;for(R=Ce-1;R>=0;R-=1)if(et=this.shapes[R],et.shape._mdf){for(Ft=et.localShapeCollection,Ft.releaseShapes(),this.m===2&&Ce>1?(Ut=this.calculateShapeEdges(r,S,et.totalShapeLength,Ot,Dt),Ot+=et.totalShapeLength):Ut=[[xt,Mt]],je=Ut.length,Ue=0;Ue<je;Ue+=1){xt=Ut[Ue][0],Mt=Ut[Ue][1],kt.length=0,Mt<=1?kt.push({s:et.totalShapeLength*xt,e:et.totalShapeLength*Mt}):xt>=1?kt.push({s:et.totalShapeLength*(xt-1),e:et.totalShapeLength*(Mt-1)}):(kt.push({s:et.totalShapeLength*xt,e:et.totalShapeLength}),kt.push({s:0,e:et.totalShapeLength*(Mt-1)}));var Xt=this.addShapes(et,kt[0]);if(kt[0].s!==kt[0].e){if(kt.length>1){var ei=et.shape.paths.shapes[et.shape.paths._length-1];if(ei.c){var si=Xt.pop();this.addPaths(Xt,Ft),Xt=this.addShapes(et,kt[1],si)}else this.addPaths(Xt,Ft),Xt=this.addShapes(et,kt[1])}this.addPaths(Xt,Ft)}}et.shape.paths=Ft}}},TrimModifier.prototype.addPaths=function(o,r){var S,E=o.length;for(S=0;S<E;S+=1)r.addShape(o[S])},TrimModifier.prototype.addSegment=function(o,r,S,E,x,C,R){x.setXYAt(r[0],r[1],"o",C),x.setXYAt(S[0],S[1],"i",C+1),R&&x.setXYAt(o[0],o[1],"v",C),x.setXYAt(E[0],E[1],"v",C+1)},TrimModifier.prototype.addSegmentFromArray=function(o,r,S,E){r.setXYAt(o[1],o[5],"o",S),r.setXYAt(o[2],o[6],"i",S+1),E&&r.setXYAt(o[0],o[4],"v",S),r.setXYAt(o[3],o[7],"v",S+1)},TrimModifier.prototype.addShapes=function(o,r,S){var E=o.pathsData,x=o.shape.paths.shapes,C,R=o.shape.paths._length,Ce,Ue,je=0,Xe,Ye,St,Dt,kt=[],et,Ft=!0;for(S?(Ye=S._length,et=S._length):(S=shapePool.newElement(),Ye=0,et=0),kt.push(S),C=0;C<R;C+=1){for(St=E[C].lengths,S.c=x[C].c,Ue=x[C].c?St.length:St.length+1,Ce=1;Ce<Ue;Ce+=1)if(Xe=St[Ce-1],je+Xe.addedLength<r.s)je+=Xe.addedLength,S.c=!1;else if(je>r.e){S.c=!1;break}else r.s<=je&&r.e>=je+Xe.addedLength?(this.addSegment(x[C].v[Ce-1],x[C].o[Ce-1],x[C].i[Ce],x[C].v[Ce],S,Ye,Ft),Ft=!1):(Dt=bez.getNewSegment(x[C].v[Ce-1],x[C].v[Ce],x[C].o[Ce-1],x[C].i[Ce],(r.s-je)/Xe.addedLength,(r.e-je)/Xe.addedLength,St[Ce-1]),this.addSegmentFromArray(Dt,S,Ye,Ft),Ft=!1,S.c=!1),je+=Xe.addedLength,Ye+=1;if(x[C].c&&St.length){if(Xe=St[Ce-1],je<=r.e){var xt=St[Ce-1].addedLength;r.s<=je&&r.e>=je+xt?(this.addSegment(x[C].v[Ce-1],x[C].o[Ce-1],x[C].i[0],x[C].v[0],S,Ye,Ft),Ft=!1):(Dt=bez.getNewSegment(x[C].v[Ce-1],x[C].v[0],x[C].o[Ce-1],x[C].i[0],(r.s-je)/xt,(r.e-je)/xt,St[Ce-1]),this.addSegmentFromArray(Dt,S,Ye,Ft),Ft=!1,S.c=!1)}else S.c=!1;je+=Xe.addedLength,Ye+=1}if(S._length&&(S.setXYAt(S.v[et][0],S.v[et][1],"i",et),S.setXYAt(S.v[S._length-1][0],S.v[S._length-1][1],"o",S._length-1)),je>r.e)break;C<R-1&&(S=shapePool.newElement(),Ft=!0,kt.push(S),Ye=0)}return kt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(o,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(o,r.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(o,r){var S=r/100,E=[0,0],x=o._length,C=0;for(C=0;C<x;C+=1)E[0]+=o.v[C][0],E[1]+=o.v[C][1];E[0]/=x,E[1]/=x;var R=shapePool.newElement();R.c=o.c;var Ce,Ue,je,Xe,Ye,St;for(C=0;C<x;C+=1)Ce=o.v[C][0]+(E[0]-o.v[C][0])*S,Ue=o.v[C][1]+(E[1]-o.v[C][1])*S,je=o.o[C][0]+(E[0]-o.o[C][0])*-S,Xe=o.o[C][1]+(E[1]-o.o[C][1])*-S,Ye=o.i[C][0]+(E[0]-o.i[C][0])*-S,St=o.i[C][1]+(E[1]-o.i[C][1])*-S,R.setTripleAt(Ce,Ue,je,Xe,Ye,St,C);return R},PuckerAndBloatModifier.prototype.processShapes=function(o){var r,S,E=this.shapes.length,x,C,R=this.amount.v;if(R!==0){var Ce,Ue;for(S=0;S<E;S+=1){if(Ce=this.shapes[S],Ue=Ce.localShapeCollection,!(!Ce.shape._mdf&&!this._mdf&&!o))for(Ue.releaseShapes(),Ce.shape._mdf=!0,r=Ce.shape.paths.shapes,C=Ce.shape.paths._length,x=0;x<C;x+=1)Ue.addShape(this.processPath(r[x],R));Ce.shape.paths=Ce.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var o=[0,0];function r(Ue){var je=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||je,this.a&&Ue.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&Ue.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&Ue.skewFromAxis(-this.sk.v,this.sa.v),this.r?Ue.rotate(-this.r.v):Ue.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?Ue.translate(this.px.v,this.py.v,-this.pz.v):Ue.translate(this.px.v,this.py.v,0):Ue.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function S(Ue){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||Ue){var je;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Xe,Ye;if(je=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Xe=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/je,0),Ye=this.p.getValueAtTime(this.p.keyframes[0].t/je,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Xe=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/je,0),Ye=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/je,0)):(Xe=this.p.pv,Ye=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/je,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Xe=[],Ye=[];var St=this.px,Dt=this.py;St._caching.lastFrame+St.offsetTime<=St.keyframes[0].t?(Xe[0]=St.getValueAtTime((St.keyframes[0].t+.01)/je,0),Xe[1]=Dt.getValueAtTime((Dt.keyframes[0].t+.01)/je,0),Ye[0]=St.getValueAtTime(St.keyframes[0].t/je,0),Ye[1]=Dt.getValueAtTime(Dt.keyframes[0].t/je,0)):St._caching.lastFrame+St.offsetTime>=St.keyframes[St.keyframes.length-1].t?(Xe[0]=St.getValueAtTime(St.keyframes[St.keyframes.length-1].t/je,0),Xe[1]=Dt.getValueAtTime(Dt.keyframes[Dt.keyframes.length-1].t/je,0),Ye[0]=St.getValueAtTime((St.keyframes[St.keyframes.length-1].t-.01)/je,0),Ye[1]=Dt.getValueAtTime((Dt.keyframes[Dt.keyframes.length-1].t-.01)/je,0)):(Xe=[St.pv,Dt.pv],Ye[0]=St.getValueAtTime((St._caching.lastFrame+St.offsetTime-.01)/je,St.offsetTime),Ye[1]=Dt.getValueAtTime((Dt._caching.lastFrame+Dt.offsetTime-.01)/je,Dt.offsetTime))}else Ye=o,Xe=Ye;this.v.rotate(-Math.atan2(Xe[1]-Ye[1],Xe[0]-Ye[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function E(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function x(){}function C(Ue){this._addDynamicProperty(Ue),this.elem.addDynamicProperty(Ue),this._isDirty=!0}function R(Ue,je,Xe){if(this.elem=Ue,this.frameId=-1,this.propType="transform",this.data=je,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Xe||Ue),je.p&&je.p.s?(this.px=PropertyFactory.getProp(Ue,je.p.x,0,0,this),this.py=PropertyFactory.getProp(Ue,je.p.y,0,0,this),je.p.z&&(this.pz=PropertyFactory.getProp(Ue,je.p.z,0,0,this))):this.p=PropertyFactory.getProp(Ue,je.p||{k:[0,0,0]},1,0,this),je.rx){if(this.rx=PropertyFactory.getProp(Ue,je.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(Ue,je.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(Ue,je.rz,0,degToRads,this),je.or.k[0].ti){var Ye,St=je.or.k.length;for(Ye=0;Ye<St;Ye+=1)je.or.k[Ye].to=null,je.or.k[Ye].ti=null}this.or=PropertyFactory.getProp(Ue,je.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(Ue,je.r||{k:0},0,degToRads,this);je.sk&&(this.sk=PropertyFactory.getProp(Ue,je.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(Ue,je.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(Ue,je.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(Ue,je.s||{k:[100,100,100]},1,.01,this),je.o?this.o=PropertyFactory.getProp(Ue,je.o,0,.01,Ue):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}R.prototype={applyToMatrix:r,getValue:S,precalculateMatrix:E,autoOrient:x},extendPrototype([DynamicPropertyContainer],R),R.prototype.addDynamicProperty=C,R.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function Ce(Ue,je,Xe){return new R(Ue,je,Xe)}return{getTransformProperty:Ce}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(o,r){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(o,r.c,0,null,this),this.o=PropertyFactory.getProp(o,r.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(o,r.tr,this),this.so=PropertyFactory.getProp(o,r.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(o,r.tr.eo,0,.01,this),this.data=r,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(o,r,S,E,x,C){var R=C?-1:1,Ce=E.s.v[0]+(1-E.s.v[0])*(1-x),Ue=E.s.v[1]+(1-E.s.v[1])*(1-x);o.translate(E.p.v[0]*R*x,E.p.v[1]*R*x,E.p.v[2]),r.translate(-E.a.v[0],-E.a.v[1],E.a.v[2]),r.rotate(-E.r.v*R*x),r.translate(E.a.v[0],E.a.v[1],E.a.v[2]),S.translate(-E.a.v[0],-E.a.v[1],E.a.v[2]),S.scale(C?1/Ce:Ce,C?1/Ue:Ue),S.translate(E.a.v[0],E.a.v[1],E.a.v[2])},RepeaterModifier.prototype.init=function(o,r,S,E){for(this.elem=o,this.arr=r,this.pos=S,this.elemsData=E,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(o),this.initModifierProperties(o,r[S]);S>0;)S-=1,this._elements.unshift(r[S]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(o){var r,S=o.length;for(r=0;r<S;r+=1)o[r]._processed=!1,o[r].ty==="gr"&&this.resetElements(o[r].it)},RepeaterModifier.prototype.cloneElements=function(o){var r=JSON.parse(JSON.stringify(o));return this.resetElements(r),r},RepeaterModifier.prototype.changeGroupRender=function(o,r){var S,E=o.length;for(S=0;S<E;S+=1)o[S]._render=r,o[S].ty==="gr"&&this.changeGroupRender(o[S].it,r)},RepeaterModifier.prototype.processShapes=function(o){var r,S,E,x,C,R=!1;if(this._mdf||o){var Ce=Math.ceil(this.c.v);if(this._groups.length<Ce){for(;this._groups.length<Ce;){var Ue={it:this.cloneElements(this._elements),ty:"gr"};Ue.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Ue),this._groups.splice(0,0,Ue),this._currentCopies+=1}this.elem.reloadShapes(),R=!0}C=0;var je;for(E=0;E<=this._groups.length-1;E+=1){if(je=C<Ce,this._groups[E]._render=je,this.changeGroupRender(this._groups[E].it,je),!je){var Xe=this.elemsData[E].it,Ye=Xe[Xe.length-1];Ye.transform.op.v!==0?(Ye.transform.op._mdf=!0,Ye.transform.op.v=0):Ye.transform.op._mdf=!1}C+=1}this._currentCopies=Ce;var St=this.o.v,Dt=St%1,kt=St>0?Math.floor(St):Math.ceil(St),et=this.pMatrix.props,Ft=this.rMatrix.props,xt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Mt=0;if(St>0){for(;Mt<kt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Mt+=1;Dt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Dt,!1),Mt+=Dt)}else if(St<0){for(;Mt>kt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Mt-=1;Dt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Dt,!0),Mt-=Dt)}E=this.data.m===1?0:this._currentCopies-1,x=this.data.m===1?1:-1,C=this._currentCopies;for(var Ot,Ut;C;){if(r=this.elemsData[E].it,S=r[r.length-1].transform.mProps.v.props,Ut=S.length,r[r.length-1].transform.mProps._mdf=!0,r[r.length-1].transform.op._mdf=!0,r[r.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(E/(this._currentCopies-1)),Mt!==0){for((E!==0&&x===1||E!==this._currentCopies-1&&x===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5],Ft[6],Ft[7],Ft[8],Ft[9],Ft[10],Ft[11],Ft[12],Ft[13],Ft[14],Ft[15]),this.matrix.transform(xt[0],xt[1],xt[2],xt[3],xt[4],xt[5],xt[6],xt[7],xt[8],xt[9],xt[10],xt[11],xt[12],xt[13],xt[14],xt[15]),this.matrix.transform(et[0],et[1],et[2],et[3],et[4],et[5],et[6],et[7],et[8],et[9],et[10],et[11],et[12],et[13],et[14],et[15]),Ot=0;Ot<Ut;Ot+=1)S[Ot]=this.matrix.props[Ot];this.matrix.reset()}else for(this.matrix.reset(),Ot=0;Ot<Ut;Ot+=1)S[Ot]=this.matrix.props[Ot];Mt+=1,C-=1,E+=x}}else for(C=this._currentCopies,E=0,x=1;C;)r=this.elemsData[E].it,S=r[r.length-1].transform.mProps.v.props,r[r.length-1].transform.mProps._mdf=!1,r[r.length-1].transform.op._mdf=!1,C-=1,E+=x;return R},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(o,r){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(o,r.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(o,r){var S=shapePool.newElement();S.c=o.c;var E,x=o._length,C,R,Ce,Ue,je,Xe,Ye=0,St,Dt,kt,et,Ft,xt;for(E=0;E<x;E+=1)C=o.v[E],Ce=o.o[E],R=o.i[E],C[0]===Ce[0]&&C[1]===Ce[1]&&C[0]===R[0]&&C[1]===R[1]?(E===0||E===x-1)&&!o.c?(S.setTripleAt(C[0],C[1],Ce[0],Ce[1],R[0],R[1],Ye),Ye+=1):(E===0?Ue=o.v[x-1]:Ue=o.v[E-1],je=Math.sqrt(Math.pow(C[0]-Ue[0],2)+Math.pow(C[1]-Ue[1],2)),Xe=je?Math.min(je/2,r)/je:0,Ft=C[0]+(Ue[0]-C[0])*Xe,St=Ft,xt=C[1]-(C[1]-Ue[1])*Xe,Dt=xt,kt=St-(St-C[0])*roundCorner,et=Dt-(Dt-C[1])*roundCorner,S.setTripleAt(St,Dt,kt,et,Ft,xt,Ye),Ye+=1,E===x-1?Ue=o.v[0]:Ue=o.v[E+1],je=Math.sqrt(Math.pow(C[0]-Ue[0],2)+Math.pow(C[1]-Ue[1],2)),Xe=je?Math.min(je/2,r)/je:0,kt=C[0]+(Ue[0]-C[0])*Xe,St=kt,et=C[1]+(Ue[1]-C[1])*Xe,Dt=et,Ft=St-(St-C[0])*roundCorner,xt=Dt-(Dt-C[1])*roundCorner,S.setTripleAt(St,Dt,kt,et,Ft,xt,Ye),Ye+=1):(S.setTripleAt(o.v[E][0],o.v[E][1],o.o[E][0],o.o[E][1],o.i[E][0],o.i[E][1],Ye),Ye+=1);return S},RoundCornersModifier.prototype.processShapes=function(o){var r,S,E=this.shapes.length,x,C,R=this.rd.v;if(R!==0){var Ce,Ue;for(S=0;S<E;S+=1){if(Ce=this.shapes[S],Ue=Ce.localShapeCollection,!(!Ce.shape._mdf&&!this._mdf&&!o))for(Ue.releaseShapes(),Ce.shape._mdf=!0,r=Ce.shape.paths.shapes,C=Ce.shape.paths._length,x=0;x<C;x+=1)Ue.addShape(this.processPath(r[x],R));Ce.shape.paths=Ce.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(o,r){return Math.abs(o-r)*1e5<=Math.min(Math.abs(o),Math.abs(r))}function floatZero(o){return Math.abs(o)<=1e-5}function lerp(o,r,S){return o*(1-S)+r*S}function lerpPoint(o,r,S){return[lerp(o[0],r[0],S),lerp(o[1],r[1],S)]}function quadRoots(o,r,S){if(o===0)return[];var E=r*r-4*o*S;if(E<0)return[];var x=-r/(2*o);if(E===0)return[x];var C=Math.sqrt(E)/(2*o);return[x-C,x+C]}function polynomialCoefficients(o,r,S,E){return[-o+3*r-3*S+E,3*o-6*r+3*S,-3*o+3*r,o]}function singlePoint(o){return new PolynomialBezier(o,o,o,o,!1)}function PolynomialBezier(o,r,S,E,x){x&&pointEqual(o,r)&&(r=lerpPoint(o,E,1/3)),x&&pointEqual(S,E)&&(S=lerpPoint(o,E,2/3));var C=polynomialCoefficients(o[0],r[0],S[0],E[0]),R=polynomialCoefficients(o[1],r[1],S[1],E[1]);this.a=[C[0],R[0]],this.b=[C[1],R[1]],this.c=[C[2],R[2]],this.d=[C[3],R[3]],this.points=[o,r,S,E]}PolynomialBezier.prototype.point=function(o){return[((this.a[0]*o+this.b[0])*o+this.c[0])*o+this.d[0],((this.a[1]*o+this.b[1])*o+this.c[1])*o+this.d[1]]},PolynomialBezier.prototype.derivative=function(o){return[(3*o*this.a[0]+2*this.b[0])*o+this.c[0],(3*o*this.a[1]+2*this.b[1])*o+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(o){var r=this.derivative(o);return Math.atan2(r[1],r[0])},PolynomialBezier.prototype.normalAngle=function(o){var r=this.derivative(o);return Math.atan2(r[0],r[1])},PolynomialBezier.prototype.inflectionPoints=function(){var o=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(o))return[];var r=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/o,S=r*r-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/o;if(S<0)return[];var E=Math.sqrt(S);return floatZero(E)?E>0&&E<1?[r]:[]:[r-E,r+E].filter(function(x){return x>0&&x<1})},PolynomialBezier.prototype.split=function(o){if(o<=0)return[singlePoint(this.points[0]),this];if(o>=1)return[this,singlePoint(this.points[this.points.length-1])];var r=lerpPoint(this.points[0],this.points[1],o),S=lerpPoint(this.points[1],this.points[2],o),E=lerpPoint(this.points[2],this.points[3],o),x=lerpPoint(r,S,o),C=lerpPoint(S,E,o),R=lerpPoint(x,C,o);return[new PolynomialBezier(this.points[0],r,x,R,!0),new PolynomialBezier(R,C,E,this.points[3],!0)]};function extrema(o,r){var S=o.points[0][r],E=o.points[o.points.length-1][r];if(S>E){var x=E;E=S,S=x}for(var C=quadRoots(3*o.a[r],2*o.b[r],o.c[r]),R=0;R<C.length;R+=1)if(C[R]>0&&C[R]<1){var Ce=o.point(C[R])[r];Ce<S?S=Ce:Ce>E&&(E=Ce)}return{min:S,max:E}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var o=this.bounds();return{left:o.x.min,right:o.x.max,top:o.y.min,bottom:o.y.max,width:o.x.max-o.x.min,height:o.y.max-o.y.min,cx:(o.x.max+o.x.min)/2,cy:(o.y.max+o.y.min)/2}};function intersectData(o,r,S){var E=o.boundingBox();return{cx:E.cx,cy:E.cy,width:E.width,height:E.height,bez:o,t:(r+S)/2,t1:r,t2:S}}function splitData(o){var r=o.bez.split(.5);return[intersectData(r[0],o.t1,o.t),intersectData(r[1],o.t,o.t2)]}function boxIntersect(o,r){return Math.abs(o.cx-r.cx)*2<o.width+r.width&&Math.abs(o.cy-r.cy)*2<o.height+r.height}function intersectsImpl(o,r,S,E,x,C){if(boxIntersect(o,r)){if(S>=C||o.width<=E&&o.height<=E&&r.width<=E&&r.height<=E){x.push([o.t,r.t]);return}var R=splitData(o),Ce=splitData(r);intersectsImpl(R[0],Ce[0],S+1,E,x,C),intersectsImpl(R[0],Ce[1],S+1,E,x,C),intersectsImpl(R[1],Ce[0],S+1,E,x,C),intersectsImpl(R[1],Ce[1],S+1,E,x,C)}}PolynomialBezier.prototype.intersections=function(o,r,S){r===void 0&&(r=2),S===void 0&&(S=7);var E=[];return intersectsImpl(intersectData(this,0,1),intersectData(o,0,1),0,r,E,S),E},PolynomialBezier.shapeSegment=function(o,r){var S=(r+1)%o.length();return new PolynomialBezier(o.v[r],o.o[r],o.i[S],o.v[S],!0)},PolynomialBezier.shapeSegmentInverted=function(o,r){var S=(r+1)%o.length();return new PolynomialBezier(o.v[S],o.i[S],o.o[r],o.v[r],!0)};function crossProduct(o,r){return[o[1]*r[2]-o[2]*r[1],o[2]*r[0]-o[0]*r[2],o[0]*r[1]-o[1]*r[0]]}function lineIntersection(o,r,S,E){var x=[o[0],o[1],1],C=[r[0],r[1],1],R=[S[0],S[1],1],Ce=[E[0],E[1],1],Ue=crossProduct(crossProduct(x,C),crossProduct(R,Ce));return floatZero(Ue[2])?null:[Ue[0]/Ue[2],Ue[1]/Ue[2]]}function polarOffset(o,r,S){return[o[0]+Math.cos(r)*S,o[1]-Math.sin(r)*S]}function pointDistance(o,r){return Math.hypot(o[0]-r[0],o[1]-r[1])}function pointEqual(o,r){return floatEqual(o[0],r[0])&&floatEqual(o[1],r[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(o,r){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(o,r.s,0,null,this),this.frequency=PropertyFactory.getProp(o,r.r,0,null,this),this.pointsType=PropertyFactory.getProp(o,r.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(o,r,S,E,x,C,R){var Ce=S-Math.PI/2,Ue=S+Math.PI/2,je=r[0]+Math.cos(S)*E*x,Xe=r[1]-Math.sin(S)*E*x;o.setTripleAt(je,Xe,je+Math.cos(Ce)*C,Xe-Math.sin(Ce)*C,je+Math.cos(Ue)*R,Xe-Math.sin(Ue)*R,o.length())}function getPerpendicularVector(o,r){var S=[r[0]-o[0],r[1]-o[1]],E=-Math.PI*.5,x=[Math.cos(E)*S[0]-Math.sin(E)*S[1],Math.sin(E)*S[0]+Math.cos(E)*S[1]];return x}function getProjectingAngle(o,r){var S=r===0?o.length()-1:r-1,E=(r+1)%o.length(),x=o.v[S],C=o.v[E],R=getPerpendicularVector(x,C);return Math.atan2(0,1)-Math.atan2(R[1],R[0])}function zigZagCorner(o,r,S,E,x,C,R){var Ce=getProjectingAngle(r,S),Ue=r.v[S%r._length],je=r.v[S===0?r._length-1:S-1],Xe=r.v[(S+1)%r._length],Ye=C===2?Math.sqrt(Math.pow(Ue[0]-je[0],2)+Math.pow(Ue[1]-je[1],2)):0,St=C===2?Math.sqrt(Math.pow(Ue[0]-Xe[0],2)+Math.pow(Ue[1]-Xe[1],2)):0;setPoint(o,r.v[S%r._length],Ce,R,E,St/((x+1)*2),Ye/((x+1)*2))}function zigZagSegment(o,r,S,E,x,C){for(var R=0;R<E;R+=1){var Ce=(R+1)/(E+1),Ue=x===2?Math.sqrt(Math.pow(r.points[3][0]-r.points[0][0],2)+Math.pow(r.points[3][1]-r.points[0][1],2)):0,je=r.normalAngle(Ce),Xe=r.point(Ce);setPoint(o,Xe,je,C,S,Ue/((E+1)*2),Ue/((E+1)*2)),C=-C}return C}ZigZagModifier.prototype.processPath=function(o,r,S,E){var x=o._length,C=shapePool.newElement();if(C.c=o.c,o.c||(x-=1),x===0)return C;var R=-1,Ce=PolynomialBezier.shapeSegment(o,0);zigZagCorner(C,o,0,r,S,E,R);for(var Ue=0;Ue<x;Ue+=1)R=zigZagSegment(C,Ce,r,S,E,-R),Ue===x-1&&!o.c?Ce=null:Ce=PolynomialBezier.shapeSegment(o,(Ue+1)%x),zigZagCorner(C,o,Ue+1,r,S,E,R);return C},ZigZagModifier.prototype.processShapes=function(o){var r,S,E=this.shapes.length,x,C,R=this.amplitude.v,Ce=Math.max(0,Math.round(this.frequency.v)),Ue=this.pointsType.v;if(R!==0){var je,Xe;for(S=0;S<E;S+=1){if(je=this.shapes[S],Xe=je.localShapeCollection,!(!je.shape._mdf&&!this._mdf&&!o))for(Xe.releaseShapes(),je.shape._mdf=!0,r=je.shape.paths.shapes,C=je.shape.paths._length,x=0;x<C;x+=1)Xe.addShape(this.processPath(r[x],R,Ce,Ue));je.shape.paths=je.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(o,r,S){var E=Math.atan2(r[0]-o[0],r[1]-o[1]);return[polarOffset(o,E,S),polarOffset(r,E,S)]}function offsetSegment(o,r){var S,E,x,C,R,Ce,Ue;Ue=linearOffset(o.points[0],o.points[1],r),S=Ue[0],E=Ue[1],Ue=linearOffset(o.points[1],o.points[2],r),x=Ue[0],C=Ue[1],Ue=linearOffset(o.points[2],o.points[3],r),R=Ue[0],Ce=Ue[1];var je=lineIntersection(S,E,x,C);je===null&&(je=E);var Xe=lineIntersection(R,Ce,x,C);return Xe===null&&(Xe=R),new PolynomialBezier(S,je,Xe,Ce)}function joinLines(o,r,S,E,x){var C=r.points[3],R=S.points[0];if(E===3||pointEqual(C,R))return C;if(E===2){var Ce=-r.tangentAngle(1),Ue=-S.tangentAngle(0)+Math.PI,je=lineIntersection(C,polarOffset(C,Ce+Math.PI/2,100),R,polarOffset(R,Ce+Math.PI/2,100)),Xe=je?pointDistance(je,C):pointDistance(C,R)/2,Ye=polarOffset(C,Ce,2*Xe*roundCorner);return o.setXYAt(Ye[0],Ye[1],"o",o.length()-1),Ye=polarOffset(R,Ue,2*Xe*roundCorner),o.setTripleAt(R[0],R[1],R[0],R[1],Ye[0],Ye[1],o.length()),R}var St=pointEqual(C,r.points[2])?r.points[0]:r.points[2],Dt=pointEqual(R,S.points[1])?S.points[3]:S.points[1],kt=lineIntersection(St,C,R,Dt);return kt&&pointDistance(kt,C)<x?(o.setTripleAt(kt[0],kt[1],kt[0],kt[1],kt[0],kt[1],o.length()),kt):C}function getIntersection(o,r){var S=o.intersections(r);return S.length&&floatEqual(S[0][0],1)&&S.shift(),S.length?S[0]:null}function pruneSegmentIntersection(o,r){var S=o.slice(),E=r.slice(),x=getIntersection(o[o.length-1],r[0]);return x&&(S[o.length-1]=o[o.length-1].split(x[0])[0],E[0]=r[0].split(x[1])[1]),o.length>1&&r.length>1&&(x=getIntersection(o[0],r[r.length-1]),x)?[[o[0].split(x[0])[0]],[r[r.length-1].split(x[1])[1]]]:[S,E]}function pruneIntersections(o){for(var r,S=1;S<o.length;S+=1)r=pruneSegmentIntersection(o[S-1],o[S]),o[S-1]=r[0],o[S]=r[1];return o.length>1&&(r=pruneSegmentIntersection(o[o.length-1],o[0]),o[o.length-1]=r[0],o[0]=r[1]),o}function offsetSegmentSplit(o,r){var S=o.inflectionPoints(),E,x,C,R;if(S.length===0)return[offsetSegment(o,r)];if(S.length===1||floatEqual(S[1],1))return C=o.split(S[0]),E=C[0],x=C[1],[offsetSegment(E,r),offsetSegment(x,r)];C=o.split(S[0]),E=C[0];var Ce=(S[1]-S[0])/(1-S[0]);return C=C[1].split(Ce),R=C[0],x=C[1],[offsetSegment(E,r),offsetSegment(R,r),offsetSegment(x,r)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(o,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(o,r.a,0,null,this),this.miterLimit=PropertyFactory.getProp(o,r.ml,0,null,this),this.lineJoin=r.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(o,r,S,E){var x=shapePool.newElement();x.c=o.c;var C=o.length();o.c||(C-=1);var R,Ce,Ue,je=[];for(R=0;R<C;R+=1)Ue=PolynomialBezier.shapeSegment(o,R),je.push(offsetSegmentSplit(Ue,r));if(!o.c)for(R=C-1;R>=0;R-=1)Ue=PolynomialBezier.shapeSegmentInverted(o,R),je.push(offsetSegmentSplit(Ue,r));je=pruneIntersections(je);var Xe=null,Ye=null;for(R=0;R<je.length;R+=1){var St=je[R];for(Ye&&(Xe=joinLines(x,Ye,St[0],S,E)),Ye=St[St.length-1],Ce=0;Ce<St.length;Ce+=1)Ue=St[Ce],Xe&&pointEqual(Ue.points[0],Xe)?x.setXYAt(Ue.points[1][0],Ue.points[1][1],"o",x.length()-1):x.setTripleAt(Ue.points[0][0],Ue.points[0][1],Ue.points[1][0],Ue.points[1][1],Ue.points[0][0],Ue.points[0][1],x.length()),x.setTripleAt(Ue.points[3][0],Ue.points[3][1],Ue.points[3][0],Ue.points[3][1],Ue.points[2][0],Ue.points[2][1],x.length()),Xe=Ue.points[3]}return je.length&&joinLines(x,Ye,je[0][0],S,E),x},OffsetPathModifier.prototype.processShapes=function(o){var r,S,E=this.shapes.length,x,C,R=this.amount.v,Ce=this.miterLimit.v,Ue=this.lineJoin;if(R!==0){var je,Xe;for(S=0;S<E;S+=1){if(je=this.shapes[S],Xe=je.localShapeCollection,!(!je.shape._mdf&&!this._mdf&&!o))for(Xe.releaseShapes(),je.shape._mdf=!0,r=je.shape.paths.shapes,C=je.shape.paths._length,x=0;x<C;x+=1)Xe.addShape(this.processPath(r[x],R,Ue,Ce));je.shape.paths=je.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(o){for(var r=o.fStyle?o.fStyle.split(" "):[],S="normal",E="normal",x=r.length,C,R=0;R<x;R+=1)switch(C=r[R].toLowerCase(),C){case"italic":E="italic";break;case"bold":S="700";break;case"black":S="900";break;case"medium":S="500";break;case"regular":case"normal":S="400";break;case"light":case"thin":S="200";break}return{style:E,weight:o.fWeight||S}}var FontManager=function(){var o=5e3,r={w:0,size:0,shapes:[],data:{shapes:[]}},S=[];S=S.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var E=127988,x=917631,C=917601,R=917626,Ce=65039,Ue=8205,je=127462,Xe=127487,Ye=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function St(oi){var mi=oi.split(","),ri,ni=mi.length,Ei=[];for(ri=0;ri<ni;ri+=1)mi[ri]!=="sans-serif"&&mi[ri]!=="monospace"&&Ei.push(mi[ri]);return Ei.join(",")}function Dt(oi,mi){var ri=createTag("span");ri.setAttribute("aria-hidden",!0),ri.style.fontFamily=mi;var ni=createTag("span");ni.innerText="giItT1WQy@!-/#",ri.style.position="absolute",ri.style.left="-10000px",ri.style.top="-10000px",ri.style.fontSize="300px",ri.style.fontVariant="normal",ri.style.fontStyle="normal",ri.style.fontWeight="normal",ri.style.letterSpacing="0",ri.appendChild(ni),document.body.appendChild(ri);var Ei=ni.offsetWidth;return ni.style.fontFamily=St(oi)+", "+mi,{node:ni,w:Ei,parent:ri}}function kt(){var oi,mi=this.fonts.length,ri,ni,Ei=mi;for(oi=0;oi<mi;oi+=1)this.fonts[oi].loaded?Ei-=1:this.fonts[oi].fOrigin==="n"||this.fonts[oi].origin===0?this.fonts[oi].loaded=!0:(ri=this.fonts[oi].monoCase.node,ni=this.fonts[oi].monoCase.w,ri.offsetWidth!==ni?(Ei-=1,this.fonts[oi].loaded=!0):(ri=this.fonts[oi].sansCase.node,ni=this.fonts[oi].sansCase.w,ri.offsetWidth!==ni&&(Ei-=1,this.fonts[oi].loaded=!0)),this.fonts[oi].loaded&&(this.fonts[oi].sansCase.parent.parentNode.removeChild(this.fonts[oi].sansCase.parent),this.fonts[oi].monoCase.parent.parentNode.removeChild(this.fonts[oi].monoCase.parent)));Ei!==0&&Date.now()-this.initTime<o?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function et(oi,mi){var ri=document.body&&mi?"svg":"canvas",ni,Ei=getFontProperties(oi);if(ri==="svg"){var Si=createNS("text");Si.style.fontSize="100px",Si.setAttribute("font-family",oi.fFamily),Si.setAttribute("font-style",Ei.style),Si.setAttribute("font-weight",Ei.weight),Si.textContent="1",oi.fClass?(Si.style.fontFamily="inherit",Si.setAttribute("class",oi.fClass)):Si.style.fontFamily=oi.fFamily,mi.appendChild(Si),ni=Si}else{var qi=new OffscreenCanvas(500,500).getContext("2d");qi.font=Ei.style+" "+Ei.weight+" 100px "+oi.fFamily,ni=qi}function sr(ur){return ri==="svg"?(ni.textContent=ur,ni.getComputedTextLength()):ni.measureText(ur).width}return{measureText:sr}}function Ft(oi,mi){if(!oi){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=oi.list;return}if(!document.body){this.isLoaded=!0,oi.list.forEach(function(Yi){Yi.helper=et(Yi),Yi.cache={}}),this.fonts=oi.list;return}var ri=oi.list,ni,Ei=ri.length,Si=Ei;for(ni=0;ni<Ei;ni+=1){var qi=!0,sr,ur;if(ri[ni].loaded=!1,ri[ni].monoCase=Dt(ri[ni].fFamily,"monospace"),ri[ni].sansCase=Dt(ri[ni].fFamily,"sans-serif"),!ri[ni].fPath)ri[ni].loaded=!0,Si-=1;else if(ri[ni].fOrigin==="p"||ri[ni].origin===3){if(sr=document.querySelectorAll('style[f-forigin="p"][f-family="'+ri[ni].fFamily+'"], style[f-origin="3"][f-family="'+ri[ni].fFamily+'"]'),sr.length>0&&(qi=!1),qi){var fr=createTag("style");fr.setAttribute("f-forigin",ri[ni].fOrigin),fr.setAttribute("f-origin",ri[ni].origin),fr.setAttribute("f-family",ri[ni].fFamily),fr.type="text/css",fr.innerText="@font-face {font-family: "+ri[ni].fFamily+"; font-style: normal; src: url('"+ri[ni].fPath+"');}",mi.appendChild(fr)}}else if(ri[ni].fOrigin==="g"||ri[ni].origin===1){for(sr=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ur=0;ur<sr.length;ur+=1)sr[ur].href.indexOf(ri[ni].fPath)!==-1&&(qi=!1);if(qi){var lr=createTag("link");lr.setAttribute("f-forigin",ri[ni].fOrigin),lr.setAttribute("f-origin",ri[ni].origin),lr.type="text/css",lr.rel="stylesheet",lr.href=ri[ni].fPath,document.body.appendChild(lr)}}else if(ri[ni].fOrigin==="t"||ri[ni].origin===2){for(sr=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ur=0;ur<sr.length;ur+=1)ri[ni].fPath===sr[ur].src&&(qi=!1);if(qi){var Mi=createTag("link");Mi.setAttribute("f-forigin",ri[ni].fOrigin),Mi.setAttribute("f-origin",ri[ni].origin),Mi.setAttribute("rel","stylesheet"),Mi.setAttribute("href",ri[ni].fPath),mi.appendChild(Mi)}}ri[ni].helper=et(ri[ni],mi),ri[ni].cache={},this.fonts.push(ri[ni])}Si===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function xt(oi){if(oi){this.chars||(this.chars=[]);var mi,ri=oi.length,ni,Ei=this.chars.length,Si;for(mi=0;mi<ri;mi+=1){for(ni=0,Si=!1;ni<Ei;)this.chars[ni].style===oi[mi].style&&this.chars[ni].fFamily===oi[mi].fFamily&&this.chars[ni].ch===oi[mi].ch&&(Si=!0),ni+=1;Si||(this.chars.push(oi[mi]),Ei+=1)}}}function Mt(oi,mi,ri){for(var ni=0,Ei=this.chars.length;ni<Ei;){if(this.chars[ni].ch===oi&&this.chars[ni].style===mi&&this.chars[ni].fFamily===ri)return this.chars[ni];ni+=1}return(typeof oi=="string"&&oi.charCodeAt(0)!==13||!oi)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",oi,mi,ri)),r}function Ot(oi,mi,ri){var ni=this.getFontByName(mi),Ei=oi;if(!ni.cache[Ei]){var Si=ni.helper;if(oi===" "){var qi=Si.measureText("|"+oi+"|"),sr=Si.measureText("||");ni.cache[Ei]=(qi-sr)/100}else ni.cache[Ei]=Si.measureText(oi)/100}return ni.cache[Ei]*ri}function Ut(oi){for(var mi=0,ri=this.fonts.length;mi<ri;){if(this.fonts[mi].fName===oi)return this.fonts[mi];mi+=1}return this.fonts[0]}function Xt(oi){var mi=0,ri=oi.charCodeAt(0);if(ri>=55296&&ri<=56319){var ni=oi.charCodeAt(1);ni>=56320&&ni<=57343&&(mi=(ri-55296)*1024+ni-56320+65536)}return mi}function ei(oi,mi){var ri=oi.toString(16)+mi.toString(16);return Ye.indexOf(ri)!==-1}function si(oi){return oi===Ue}function li(oi){return oi===Ce}function bi(oi){var mi=Xt(oi);return mi>=je&&mi<=Xe}function wi(oi){return bi(oi.substr(0,2))&&bi(oi.substr(2,2))}function Pi(oi){return S.indexOf(oi)!==-1}function Ci(oi,mi){var ri=Xt(oi.substr(mi,2));if(ri!==E)return!1;var ni=0;for(mi+=2;ni<5;){if(ri=Xt(oi.substr(mi,2)),ri<C||ri>R)return!1;ni+=1,mi+=2}return Xt(oi.substr(mi,2))===x}function Di(){this.isLoaded=!0}var Bi=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Bi.isModifier=ei,Bi.isZeroWidthJoiner=si,Bi.isFlagEmoji=wi,Bi.isRegionalCode=bi,Bi.isCombinedCharacter=Pi,Bi.isRegionalFlag=Ci,Bi.isVariationSelector=li,Bi.BLACK_FLAG_CODE_POINT=E;var Ri={addChars:xt,addFonts:Ft,getCharData:Mt,getFontByName:Ut,measureText:Ot,checkLoadedFonts:kt,setIsLoaded:Di};return Bi.prototype=Ri,Bi}();function SlotManager(o){this.animationData=o}SlotManager.prototype.getProp=function(o){return this.animationData.slots&&this.animationData.slots[o.sid]?Object.assign(o,this.animationData.slots[o.sid].p):o};function slotFactory(o){return new SlotManager(o)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(r){this.renderableComponents.indexOf(r)===-1&&this.renderableComponents.push(r)},removeRenderableComponent:function(r){this.renderableComponents.indexOf(r)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(r),1)},prepareRenderableFrame:function(r){this.checkLayerLimits(r)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(r){this.data.ip-this.data.st<=r&&this.data.op-this.data.st>r?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var r,S=this.renderableComponents.length;for(r=0;r<S;r+=1)this.renderableComponents[r].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var o={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(r){return o[r]||""}}();function SliderEffect(o,r,S){this.p=PropertyFactory.getProp(r,o.v,0,0,S)}function AngleEffect(o,r,S){this.p=PropertyFactory.getProp(r,o.v,0,0,S)}function ColorEffect(o,r,S){this.p=PropertyFactory.getProp(r,o.v,1,0,S)}function PointEffect(o,r,S){this.p=PropertyFactory.getProp(r,o.v,1,0,S)}function LayerIndexEffect(o,r,S){this.p=PropertyFactory.getProp(r,o.v,0,0,S)}function MaskIndexEffect(o,r,S){this.p=PropertyFactory.getProp(r,o.v,0,0,S)}function CheckboxEffect(o,r,S){this.p=PropertyFactory.getProp(r,o.v,0,0,S)}function NoValueEffect(){this.p={}}function EffectsManager(o,r){var S=o.ef||[];this.effectElements=[];var E,x=S.length,C;for(E=0;E<x;E+=1)C=new GroupEffect(S[E],r),this.effectElements.push(C)}function GroupEffect(o,r){this.init(o,r)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(o,r){this.data=o,this.effectElements=[],this.initDynamicPropertyContainer(r);var S,E=this.data.ef.length,x,C=this.data.ef;for(S=0;S<E;S+=1){switch(x=null,C[S].ty){case 0:x=new SliderEffect(C[S],r,this);break;case 1:x=new AngleEffect(C[S],r,this);break;case 2:x=new ColorEffect(C[S],r,this);break;case 3:x=new PointEffect(C[S],r,this);break;case 4:case 7:x=new CheckboxEffect(C[S],r,this);break;case 10:x=new LayerIndexEffect(C[S],r,this);break;case 11:x=new MaskIndexEffect(C[S],r,this);break;case 5:x=new EffectsManager(C[S],r);break;default:x=new NoValueEffect(C[S]);break}x&&this.effectElements.push(x)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var r=0,S=this.data.masksProperties.length;r<S;){if(this.data.masksProperties[r].mode!=="n"&&this.data.masksProperties[r].cl!==!1)return!0;r+=1}return!1},initExpressions:function(){var r=getExpressionInterfaces();if(r){var S=r("layer"),E=r("effects"),x=r("shape"),C=r("text"),R=r("comp");this.layerInterface=S(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var Ce=E.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(Ce),this.data.ty===0||this.data.xt?this.compInterface=R(this):this.data.ty===4?(this.layerInterface.shapeInterface=x(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=C(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var r=getBlendMode(this.data.bm),S=this.baseElement||this.layerElement;S.style["mix-blend-mode"]=r},initBaseData:function(r,S,E){this.globalData=S,this.comp=E,this.data=r,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(r,S){var E,x=this.dynamicProperties.length;for(E=0;E<x;E+=1)(S||this._isParent&&this.dynamicProperties[E].propType==="transform")&&(this.dynamicProperties[E].getValue(),this.dynamicProperties[E]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&this.dynamicProperties.push(r)}};function FootageElement(o,r,S){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(o.refId),this.footageData=r.imageLoader.getAsset(this.assetData),this.initBaseData(o,r,S)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var o=getExpressionInterfaces();if(o){var r=o("footage");this.layerInterface=r(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(o,r,S){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(o.refId),this.initBaseData(o,r,S),this._isPlaying=!1,this._canPlay=!1;var E=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(E),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,r.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,o.au&&o.au.lv?o.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(o){if(this.prepareRenderableFrame(o,!0),this.prepareProperties(o,!0),this.tm._placeholder)this._currentTime=o/this.data.sr;else{var r=this.tm.v;this._currentTime=r}this._volume=this.lv.v[0];var S=this._volume*this._volumeMultiplier;this._previousVolume!==S&&(this._previousVolume=S,this.audio.volume(S))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(o){this.audio.rate(o)},AudioElement.prototype.volume=function(o){this._volumeMultiplier=o,this._previousVolume=o*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(o){var r,S=this.layers.length,E;for(this.completeLayers=!0,r=S-1;r>=0;r-=1)this.elements[r]||(E=this.layers[r],E.ip-E.st<=o-this.layers[r].st&&E.op-E.st>o-this.layers[r].st&&this.buildItem(r)),this.completeLayers=this.elements[r]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(o){switch(o.ty){case 2:return this.createImage(o);case 0:return this.createComp(o);case 1:return this.createSolid(o);case 3:return this.createNull(o);case 4:return this.createShape(o);case 5:return this.createText(o);case 6:return this.createAudio(o);case 13:return this.createCamera(o);case 15:return this.createFootage(o);default:return this.createNull(o)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(o){return new AudioElement(o,this.globalData,this)},BaseRenderer.prototype.createFootage=function(o){return new FootageElement(o,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var o,r=this.layers.length;for(o=0;o<r;o+=1)this.buildItem(o);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(o){this.completeLayers=!1;var r,S=o.length,E,x=this.layers.length;for(r=0;r<S;r+=1)for(E=0;E<x;){if(this.layers[E].id===o[r].id){this.layers[E]=o[r];break}E+=1}},BaseRenderer.prototype.setProjectInterface=function(o){this.globalData.projectInterface=o},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(o,r,S){for(var E=this.elements,x=this.layers,C=0,R=x.length;C<R;)x[C].ind==r&&(!E[C]||E[C]===!0?(this.buildItem(C),this.addPendingElement(o)):(S.push(E[C]),E[C].setAsParent(),x[C].parent!==void 0?this.buildElementParenting(o,x[C].parent,S):o.setHierarchy(S))),C+=1},BaseRenderer.prototype.addPendingElement=function(o){this.pendingElements.push(o)},BaseRenderer.prototype.searchExtraCompositions=function(o){var r,S=o.length;for(r=0;r<S;r+=1)if(o[r].xt){var E=this.createComp(o[r]);E.initExpressions(),this.globalData.projectInterface.registerComposition(E)}},BaseRenderer.prototype.getElementById=function(o){var r,S=this.elements.length;for(r=0;r<S;r+=1)if(this.elements[r].data.ind===o)return this.elements[r];return null},BaseRenderer.prototype.getElementByPath=function(o){var r=o.shift(),S;if(typeof r=="number")S=this.elements[r];else{var E,x=this.elements.length;for(E=0;E<x;E+=1)if(this.elements[E].data.nm===r){S=this.elements[E];break}}return o.length===0?S:S.getElementByPath(o)},BaseRenderer.prototype.setupGlobalData=function(o,r){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(o),this.globalData.fontManager.addChars(o.chars),this.globalData.fontManager.addFonts(o.fonts,r),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=o.fr,this.globalData.nm=o.nm,this.globalData.compSize={w:o.w,h:o.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var r=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:r,localMat:r,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var r,S=this.finalTransform.mat,E=0,x=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;E<x;){if(this.hierarchy[E].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}E+=1}if(this.finalTransform._matMdf)for(r=this.finalTransform.mProp.v.props,S.cloneFromProps(r),E=0;E<x;E+=1)S.multiply(this.hierarchy[E].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var r=0,S=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;r<S;)this.localTransforms[r]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[r]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),r+=1;if(this.finalTransform._localMatMdf){var E=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(E),r=1;r<S;r+=1){var x=this.localTransforms[r].matrix;E.multiply(x)}E.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var C=this.finalTransform.localOpacity;for(r=0;r<S;r+=1)C*=this.localTransforms[r].opacity*.01;this.finalTransform.localOpacity=C}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var r=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(r.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var S=0,E=r.length;for(S=0;S<E;S+=1)this.localTransforms.push(r[S])}}},globalToLocal:function(r){var S=[];S.push(this.finalTransform);for(var E=!0,x=this.comp;E;)x.finalTransform?(x.data.hasMask&&S.splice(0,0,x.finalTransform),x=x.comp):E=!1;var C,R=S.length,Ce;for(C=0;C<R;C+=1)Ce=S[C].mat.applyToPointArray(0,0,0),r=[r[0]-Ce[0],r[1]-Ce[1],0];return r},mHelper:new Matrix};function MaskElement(o,r,S){this.data=o,this.element=r,this.globalData=S,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var E=this.globalData.defs,x,C=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(C),this.solidPath="";var R,Ce=this.masksProperties,Ue=0,je=[],Xe,Ye,St=createElementID(),Dt,kt,et,Ft,xt="clipPath",Mt="clip-path";for(x=0;x<C;x+=1)if((Ce[x].mode!=="a"&&Ce[x].mode!=="n"||Ce[x].inv||Ce[x].o.k!==100||Ce[x].o.x)&&(xt="mask",Mt="mask"),(Ce[x].mode==="s"||Ce[x].mode==="i")&&Ue===0?(Dt=createNS("rect"),Dt.setAttribute("fill","#ffffff"),Dt.setAttribute("width",this.element.comp.data.w||0),Dt.setAttribute("height",this.element.comp.data.h||0),je.push(Dt)):Dt=null,R=createNS("path"),Ce[x].mode==="n")this.viewData[x]={op:PropertyFactory.getProp(this.element,Ce[x].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Ce[x],3),elem:R,lastPath:""},E.appendChild(R);else{Ue+=1,R.setAttribute("fill",Ce[x].mode==="s"?"#000000":"#ffffff"),R.setAttribute("clip-rule","nonzero");var Ot;if(Ce[x].x.k!==0?(xt="mask",Mt="mask",Ft=PropertyFactory.getProp(this.element,Ce[x].x,0,null,this.element),Ot=createElementID(),kt=createNS("filter"),kt.setAttribute("id",Ot),et=createNS("feMorphology"),et.setAttribute("operator","erode"),et.setAttribute("in","SourceGraphic"),et.setAttribute("radius","0"),kt.appendChild(et),E.appendChild(kt),R.setAttribute("stroke",Ce[x].mode==="s"?"#000000":"#ffffff")):(et=null,Ft=null),this.storedData[x]={elem:R,x:Ft,expan:et,lastPath:"",lastOperator:"",filterId:Ot,lastRadius:0},Ce[x].mode==="i"){Ye=je.length;var Ut=createNS("g");for(Xe=0;Xe<Ye;Xe+=1)Ut.appendChild(je[Xe]);var Xt=createNS("mask");Xt.setAttribute("mask-type","alpha"),Xt.setAttribute("id",St+"_"+Ue),Xt.appendChild(R),E.appendChild(Xt),Ut.setAttribute("mask","url("+getLocationHref()+"#"+St+"_"+Ue+")"),je.length=0,je.push(Ut)}else je.push(R);Ce[x].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[x]={elem:R,lastPath:"",op:PropertyFactory.getProp(this.element,Ce[x].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Ce[x],3),invRect:Dt},this.viewData[x].prop.k||this.drawPath(Ce[x],this.viewData[x].prop.v,this.viewData[x])}for(this.maskElement=createNS(xt),C=je.length,x=0;x<C;x+=1)this.maskElement.appendChild(je[x]);Ue>0&&(this.maskElement.setAttribute("id",St),this.element.maskedElement.setAttribute(Mt,"url("+getLocationHref()+"#"+St+")"),E.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(o){return this.viewData[o].prop},MaskElement.prototype.renderFrame=function(o){var r=this.element.finalTransform.mat,S,E=this.masksProperties.length;for(S=0;S<E;S+=1)if((this.viewData[S].prop._mdf||o)&&this.drawPath(this.masksProperties[S],this.viewData[S].prop.v,this.viewData[S]),(this.viewData[S].op._mdf||o)&&this.viewData[S].elem.setAttribute("fill-opacity",this.viewData[S].op.v),this.masksProperties[S].mode!=="n"&&(this.viewData[S].invRect&&(this.element.finalTransform.mProp._mdf||o)&&this.viewData[S].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[S].x&&(this.storedData[S].x._mdf||o))){var x=this.storedData[S].expan;this.storedData[S].x.v<0?(this.storedData[S].lastOperator!=="erode"&&(this.storedData[S].lastOperator="erode",this.storedData[S].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[S].filterId+")")),x.setAttribute("radius",-this.storedData[S].x.v)):(this.storedData[S].lastOperator!=="dilate"&&(this.storedData[S].lastOperator="dilate",this.storedData[S].elem.setAttribute("filter",null)),this.storedData[S].elem.setAttribute("stroke-width",this.storedData[S].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var o="M0,0 ";return o+=" h"+this.globalData.compSize.w,o+=" v"+this.globalData.compSize.h,o+=" h-"+this.globalData.compSize.w,o+=" v-"+this.globalData.compSize.h+" ",o},MaskElement.prototype.drawPath=function(o,r,S){var E=" M"+r.v[0][0]+","+r.v[0][1],x,C;for(C=r._length,x=1;x<C;x+=1)E+=" C"+r.o[x-1][0]+","+r.o[x-1][1]+" "+r.i[x][0]+","+r.i[x][1]+" "+r.v[x][0]+","+r.v[x][1];if(r.c&&C>1&&(E+=" C"+r.o[x-1][0]+","+r.o[x-1][1]+" "+r.i[0][0]+","+r.i[0][1]+" "+r.v[0][0]+","+r.v[0][1]),S.lastPath!==E){var R="";S.elem&&(r.c&&(R=o.inv?this.solidPath+E:E),S.elem.setAttribute("d",R)),S.lastPath=E}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var o={};o.createFilter=r,o.createAlphaToLuminanceFilter=S;function r(E,x){var C=createNS("filter");return C.setAttribute("id",E),x!==!0&&(C.setAttribute("filterUnits","objectBoundingBox"),C.setAttribute("x","0%"),C.setAttribute("y","0%"),C.setAttribute("width","100%"),C.setAttribute("height","100%")),C}function S(){var E=createNS("feColorMatrix");return E.setAttribute("type","matrix"),E.setAttribute("color-interpolation-filters","sRGB"),E.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),E}return o}(),featureSupport=function(){var o={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(o.maskType=!1),/firefox/i.test(navigator.userAgent)&&(o.svgLumaHidden=!1),o}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(o){var r,S="SourceGraphic",E=o.data.ef?o.data.ef.length:0,x=createElementID(),C=filtersFactory.createFilter(x,!0),R=0;this.filters=[];var Ce;for(r=0;r<E;r+=1){Ce=null;var Ue=o.data.ef[r].ty;if(registeredEffects$1[Ue]){var je=registeredEffects$1[Ue].effect;Ce=new je(C,o.effectsManager.effectElements[r],o,idPrefix+R,S),S=idPrefix+R,registeredEffects$1[Ue].countsAsEffect&&(R+=1)}Ce&&this.filters.push(Ce)}R&&(o.globalData.defs.appendChild(C),o.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+x+")")),this.filters.length&&o.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(o){var r,S=this.filters.length;for(r=0;r<S;r+=1)this.filters[r].renderFrame(o)},SVGEffects.prototype.getEffects=function(o){var r,S=this.filters.length,E=[];for(r=0;r<S;r+=1)this.filters[r].type===o&&E.push(this.filters[r]);return E};function registerEffect$1(o,r,S){registeredEffects$1[o]={effect:r,countsAsEffect:S}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var r=null;if(this.data.td){this.matteMasks={};var S=createNS("g");S.setAttribute("id",this.layerId),S.appendChild(this.layerElement),r=S,this.globalData.defs.appendChild(S)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var E=createNS("clipPath"),x=createNS("path");x.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var C=createElementID();if(E.setAttribute("id",C),E.appendChild(x),this.globalData.defs.appendChild(E),this.checkMasks()){var R=createNS("g");R.setAttribute("clip-path","url("+getLocationHref()+"#"+C+")"),R.appendChild(this.layerElement),this.transformedElement=R,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+C+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(r){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[r]){var S=this.layerId+"_"+r,E,x,C,R;if(r===1||r===3){var Ce=createNS("mask");Ce.setAttribute("id",S),Ce.setAttribute("mask-type",r===3?"luminance":"alpha"),C=createNS("use"),C.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Ce.appendChild(C),this.globalData.defs.appendChild(Ce),!featureSupport.maskType&&r===1&&(Ce.setAttribute("mask-type","luminance"),E=createElementID(),x=filtersFactory.createFilter(E),this.globalData.defs.appendChild(x),x.appendChild(filtersFactory.createAlphaToLuminanceFilter()),R=createNS("g"),R.appendChild(C),Ce.appendChild(R),R.setAttribute("filter","url("+getLocationHref()+"#"+E+")"))}else if(r===2){var Ue=createNS("mask");Ue.setAttribute("id",S),Ue.setAttribute("mask-type","alpha");var je=createNS("g");Ue.appendChild(je),E=createElementID(),x=filtersFactory.createFilter(E);var Xe=createNS("feComponentTransfer");Xe.setAttribute("in","SourceGraphic"),x.appendChild(Xe);var Ye=createNS("feFuncA");Ye.setAttribute("type","table"),Ye.setAttribute("tableValues","1.0 0.0"),Xe.appendChild(Ye),this.globalData.defs.appendChild(x);var St=createNS("rect");St.setAttribute("width",this.comp.data.w),St.setAttribute("height",this.comp.data.h),St.setAttribute("x","0"),St.setAttribute("y","0"),St.setAttribute("fill","#ffffff"),St.setAttribute("opacity","0"),je.setAttribute("filter","url("+getLocationHref()+"#"+E+")"),je.appendChild(St),C=createNS("use"),C.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),je.appendChild(C),featureSupport.maskType||(Ue.setAttribute("mask-type","luminance"),x.appendChild(filtersFactory.createAlphaToLuminanceFilter()),R=createNS("g"),je.appendChild(St),R.appendChild(this.layerElement),je.appendChild(R)),this.globalData.defs.appendChild(Ue)}this.matteMasks[r]=S}return this.matteMasks[r]},setMatte:function(r){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+r+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(r){this.hierarchy=r},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var o={initElement:function(S,E,x){this.initFrame(),this.initBaseData(S,E,x),this.initTransform(S,E,x),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var S=this.baseElement||this.layerElement;S.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var S=this.baseElement||this.layerElement;S.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(S){this._mdf=!1,this.prepareRenderableFrame(S),this.prepareProperties(S,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(o)],RenderableDOMElement)})();function IImageElement(o,r,S){this.assetData=r.getAssetData(o.refId),this.assetData&&this.assetData.sid&&(this.assetData=r.slotManager.getProp(this.assetData)),this.initElement(o,r,S),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var o=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",o),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(o,r){this.elem=o,this.pos=r}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(r){var S,E=this.shapeModifiers.length;for(S=0;S<E;S+=1)this.shapeModifiers[S].addShape(r)},isShapeInAnimatedModifiers:function(r){for(var S=0,E=this.shapeModifiers.length;S<E;)if(this.shapeModifiers[S].isAnimatedWithShape(r))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var r,S=this.shapes.length;for(r=0;r<S;r+=1)this.shapes[r].sh.reset();S=this.shapeModifiers.length;var E;for(r=S-1;r>=0&&(E=this.shapeModifiers[r].processShapes(this._isFirstFrame),!E);r-=1);}},searchProcessedElement:function(r){for(var S=this.processedElements,E=0,x=S.length;E<x;){if(S[E].elem===r)return S[E].pos;E+=1}return 0},addProcessedElement:function(r,S){for(var E=this.processedElements,x=E.length;x;)if(x-=1,E[x].elem===r){E[x].pos=S;return}E.push(new ProcessedElement(r,S))},prepareFrame:function(r){this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(o,r,S){this.caches=[],this.styles=[],this.transformers=o,this.lStr="",this.sh=S,this.lvl=r,this._isAnimated=!!S.k;for(var E=0,x=o.length;E<x;){if(o[E].mProps.dynamicProperties.length){this._isAnimated=!0;break}E+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(o,r){this.data=o,this.type=o.ty,this.d="",this.lvl=r,this._mdf=!1,this.closed=o.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(o,r,S,E){this.elem=o,this.frameId=-1,this.dataProps=createSizedArray(r.length),this.renderer=S,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",r.length?r.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(E);var x,C=r.length||0,R;for(x=0;x<C;x+=1)R=PropertyFactory.getProp(o,r[x].v,0,0,this),this.k=R.k||this.k,this.dataProps[x]={n:r[x].n,p:R};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(o){if(!(this.elem.globalData.frameId===this.frameId&&!o)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||o,this._mdf)){var r=0,S=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),r=0;r<S;r+=1)this.dataProps[r].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[r].p.v:this.dashArray[r]=this.dataProps[r].p.v:this.dashoffset[0]=this.dataProps[r].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(o,r,S){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(o,r.o,0,.01,this),this.w=PropertyFactory.getProp(o,r.w,0,null,this),this.d=new DashProperty(o,r.d||{},"svg",this),this.c=PropertyFactory.getProp(o,r.c,1,255,this),this.style=S,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(o,r,S){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(o,r.o,0,.01,this),this.c=PropertyFactory.getProp(o,r.c,1,255,this),this.style=S}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(o,r,S){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.style=S}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(o,r,S){this.data=r,this.c=createTypedArray("uint8c",r.p*4);var E=r.k.k[0].s?r.k.k[0].s.length-r.p*4:r.k.k.length-r.p*4;this.o=createTypedArray("float32",E),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=E,this.initDynamicPropertyContainer(S),this.prop=PropertyFactory.getProp(o,r.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(o,r){for(var S=0,E=this.o.length/2,x;S<E;){if(x=Math.abs(o[S*4]-o[r*4+S*2]),x>.01)return!1;S+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var o=0,r=this.data.k.k.length;o<r;){if(!this.comparePoints(this.data.k.k[o].s,this.data.p))return!1;o+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(o){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||o){var r,S=this.data.p*4,E,x;for(r=0;r<S;r+=1)E=r%4===0?100:255,x=Math.round(this.prop.v[r]*E),this.c[r]!==x&&(this.c[r]=x,this._cmdf=!o);if(this.o.length)for(S=this.prop.v.length,r=this.data.p*4;r<S;r+=1)E=r%2===0?100:1,x=r%2===0?Math.round(this.prop.v[r]*100):this.prop.v[r],this.o[r-this.data.p*4]!==x&&(this.o[r-this.data.p*4]=x,this._omdf=!o);this._mdf=!o}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(o,r,S){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.initGradientData(o,r,S)}SVGGradientFillStyleData.prototype.initGradientData=function(o,r,S){this.o=PropertyFactory.getProp(o,r.o,0,.01,this),this.s=PropertyFactory.getProp(o,r.s,1,null,this),this.e=PropertyFactory.getProp(o,r.e,1,null,this),this.h=PropertyFactory.getProp(o,r.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(o,r.a||{k:0},0,degToRads,this),this.g=new GradientProperty(o,r.g,this),this.style=S,this.stops=[],this.setGradientData(S.pElem,r),this.setGradientOpacity(r,S),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(o,r){var S=createElementID(),E=createNS(r.t===1?"linearGradient":"radialGradient");E.setAttribute("id",S),E.setAttribute("spreadMethod","pad"),E.setAttribute("gradientUnits","userSpaceOnUse");var x=[],C,R,Ce;for(Ce=r.g.p*4,R=0;R<Ce;R+=4)C=createNS("stop"),E.appendChild(C),x.push(C);o.setAttribute(r.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+S+")"),this.gf=E,this.cst=x},SVGGradientFillStyleData.prototype.setGradientOpacity=function(o,r){if(this.g._hasOpacity&&!this.g._collapsable){var S,E,x,C=createNS("mask"),R=createNS("path");C.appendChild(R);var Ce=createElementID(),Ue=createElementID();C.setAttribute("id",Ue);var je=createNS(o.t===1?"linearGradient":"radialGradient");je.setAttribute("id",Ce),je.setAttribute("spreadMethod","pad"),je.setAttribute("gradientUnits","userSpaceOnUse"),x=o.g.k.k[0].s?o.g.k.k[0].s.length:o.g.k.k.length;var Xe=this.stops;for(E=o.g.p*4;E<x;E+=2)S=createNS("stop"),S.setAttribute("stop-color","rgb(255,255,255)"),je.appendChild(S),Xe.push(S);R.setAttribute(o.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Ce+")"),o.ty==="gs"&&(R.setAttribute("stroke-linecap",lineCapEnum[o.lc||2]),R.setAttribute("stroke-linejoin",lineJoinEnum[o.lj||2]),o.lj===1&&R.setAttribute("stroke-miterlimit",o.ml)),this.of=je,this.ms=C,this.ost=Xe,this.maskId=Ue,r.msElem=R}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(o,r,S){this.initDynamicPropertyContainer(o),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(o,r.w,0,null,this),this.d=new DashProperty(o,r.d||{},"svg",this),this.initGradientData(o,r,S),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(o,r,S){this.transform={mProps:o,op:r,container:S},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(r,S,E,x){if(S===0)return"";var C=r.o,R=r.i,Ce=r.v,Ue,je=" M"+x.applyToPointStringified(Ce[0][0],Ce[0][1]);for(Ue=1;Ue<S;Ue+=1)je+=" C"+x.applyToPointStringified(C[Ue-1][0],C[Ue-1][1])+" "+x.applyToPointStringified(R[Ue][0],R[Ue][1])+" "+x.applyToPointStringified(Ce[Ue][0],Ce[Ue][1]);return E&&S&&(je+=" C"+x.applyToPointStringified(C[Ue-1][0],C[Ue-1][1])+" "+x.applyToPointStringified(R[0][0],R[0][1])+" "+x.applyToPointStringified(Ce[0][0],Ce[0][1]),je+="z"),je},SVGElementsRenderer=function(){var o=new Matrix,r=new Matrix,S={createRenderFunction:E};function E(Ye){switch(Ye.ty){case"fl":return Ce;case"gf":return je;case"gs":return Ue;case"st":return Xe;case"sh":case"el":case"rc":case"sr":return R;case"tr":return x;case"no":return C;default:return null}}function x(Ye,St,Dt){(Dt||St.transform.op._mdf)&&St.transform.container.setAttribute("opacity",St.transform.op.v),(Dt||St.transform.mProps._mdf)&&St.transform.container.setAttribute("transform",St.transform.mProps.v.to2dCSS())}function C(){}function R(Ye,St,Dt){var kt,et,Ft,xt,Mt,Ot,Ut=St.styles.length,Xt=St.lvl,ei,si,li,bi;for(Ot=0;Ot<Ut;Ot+=1){if(xt=St.sh._mdf||Dt,St.styles[Ot].lvl<Xt){for(si=r.reset(),li=Xt-St.styles[Ot].lvl,bi=St.transformers.length-1;!xt&&li>0;)xt=St.transformers[bi].mProps._mdf||xt,li-=1,bi-=1;if(xt)for(li=Xt-St.styles[Ot].lvl,bi=St.transformers.length-1;li>0;)si.multiply(St.transformers[bi].mProps.v),li-=1,bi-=1}else si=o;if(ei=St.sh.paths,et=ei._length,xt){for(Ft="",kt=0;kt<et;kt+=1)Mt=ei.shapes[kt],Mt&&Mt._length&&(Ft+=buildShapeString(Mt,Mt._length,Mt.c,si));St.caches[Ot]=Ft}else Ft=St.caches[Ot];St.styles[Ot].d+=Ye.hd===!0?"":Ft,St.styles[Ot]._mdf=xt||St.styles[Ot]._mdf}}function Ce(Ye,St,Dt){var kt=St.style;(St.c._mdf||Dt)&&kt.pElem.setAttribute("fill","rgb("+bmFloor(St.c.v[0])+","+bmFloor(St.c.v[1])+","+bmFloor(St.c.v[2])+")"),(St.o._mdf||Dt)&&kt.pElem.setAttribute("fill-opacity",St.o.v)}function Ue(Ye,St,Dt){je(Ye,St,Dt),Xe(Ye,St,Dt)}function je(Ye,St,Dt){var kt=St.gf,et=St.g._hasOpacity,Ft=St.s.v,xt=St.e.v;if(St.o._mdf||Dt){var Mt=Ye.ty==="gf"?"fill-opacity":"stroke-opacity";St.style.pElem.setAttribute(Mt,St.o.v)}if(St.s._mdf||Dt){var Ot=Ye.t===1?"x1":"cx",Ut=Ot==="x1"?"y1":"cy";kt.setAttribute(Ot,Ft[0]),kt.setAttribute(Ut,Ft[1]),et&&!St.g._collapsable&&(St.of.setAttribute(Ot,Ft[0]),St.of.setAttribute(Ut,Ft[1]))}var Xt,ei,si,li;if(St.g._cmdf||Dt){Xt=St.cst;var bi=St.g.c;for(si=Xt.length,ei=0;ei<si;ei+=1)li=Xt[ei],li.setAttribute("offset",bi[ei*4]+"%"),li.setAttribute("stop-color","rgb("+bi[ei*4+1]+","+bi[ei*4+2]+","+bi[ei*4+3]+")")}if(et&&(St.g._omdf||Dt)){var wi=St.g.o;for(St.g._collapsable?Xt=St.cst:Xt=St.ost,si=Xt.length,ei=0;ei<si;ei+=1)li=Xt[ei],St.g._collapsable||li.setAttribute("offset",wi[ei*2]+"%"),li.setAttribute("stop-opacity",wi[ei*2+1])}if(Ye.t===1)(St.e._mdf||Dt)&&(kt.setAttribute("x2",xt[0]),kt.setAttribute("y2",xt[1]),et&&!St.g._collapsable&&(St.of.setAttribute("x2",xt[0]),St.of.setAttribute("y2",xt[1])));else{var Pi;if((St.s._mdf||St.e._mdf||Dt)&&(Pi=Math.sqrt(Math.pow(Ft[0]-xt[0],2)+Math.pow(Ft[1]-xt[1],2)),kt.setAttribute("r",Pi),et&&!St.g._collapsable&&St.of.setAttribute("r",Pi)),St.e._mdf||St.h._mdf||St.a._mdf||Dt){Pi||(Pi=Math.sqrt(Math.pow(Ft[0]-xt[0],2)+Math.pow(Ft[1]-xt[1],2)));var Ci=Math.atan2(xt[1]-Ft[1],xt[0]-Ft[0]),Di=St.h.v;Di>=1?Di=.99:Di<=-1&&(Di=-.99);var Bi=Pi*Di,Ri=Math.cos(Ci+St.a.v)*Bi+Ft[0],oi=Math.sin(Ci+St.a.v)*Bi+Ft[1];kt.setAttribute("fx",Ri),kt.setAttribute("fy",oi),et&&!St.g._collapsable&&(St.of.setAttribute("fx",Ri),St.of.setAttribute("fy",oi))}}}function Xe(Ye,St,Dt){var kt=St.style,et=St.d;et&&(et._mdf||Dt)&&et.dashStr&&(kt.pElem.setAttribute("stroke-dasharray",et.dashStr),kt.pElem.setAttribute("stroke-dashoffset",et.dashoffset[0])),St.c&&(St.c._mdf||Dt)&&kt.pElem.setAttribute("stroke","rgb("+bmFloor(St.c.v[0])+","+bmFloor(St.c.v[1])+","+bmFloor(St.c.v[2])+")"),(St.o._mdf||Dt)&&kt.pElem.setAttribute("stroke-opacity",St.o.v),(St.w._mdf||Dt)&&(kt.pElem.setAttribute("stroke-width",St.w.v),kt.msElem&&kt.msElem.setAttribute("stroke-width",St.w.v))}return S}();function SVGShapeElement(o,r,S){this.shapes=[],this.shapesData=o.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(o,r,S),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var o,r=this.shapes.length,S,E,x=this.stylesList.length,C,R=[],Ce=!1;for(E=0;E<x;E+=1){for(C=this.stylesList[E],Ce=!1,R.length=0,o=0;o<r;o+=1)S=this.shapes[o],S.styles.indexOf(C)!==-1&&(R.push(S),Ce=S._isAnimated||Ce);R.length>1&&Ce&&this.setShapesAsAnimated(R)}},SVGShapeElement.prototype.setShapesAsAnimated=function(o){var r,S=o.length;for(r=0;r<S;r+=1)o[r].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(o,r){var S,E=new SVGStyleData(o,r),x=E.pElem;if(o.ty==="st")S=new SVGStrokeStyleData(this,o,E);else if(o.ty==="fl")S=new SVGFillStyleData(this,o,E);else if(o.ty==="gf"||o.ty==="gs"){var C=o.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;S=new C(this,o,E),this.globalData.defs.appendChild(S.gf),S.maskId&&(this.globalData.defs.appendChild(S.ms),this.globalData.defs.appendChild(S.of),x.setAttribute("mask","url("+getLocationHref()+"#"+S.maskId+")"))}else o.ty==="no"&&(S=new SVGNoStyleData(this,o,E));return(o.ty==="st"||o.ty==="gs")&&(x.setAttribute("stroke-linecap",lineCapEnum[o.lc||2]),x.setAttribute("stroke-linejoin",lineJoinEnum[o.lj||2]),x.setAttribute("fill-opacity","0"),o.lj===1&&x.setAttribute("stroke-miterlimit",o.ml)),o.r===2&&x.setAttribute("fill-rule","evenodd"),o.ln&&x.setAttribute("id",o.ln),o.cl&&x.setAttribute("class",o.cl),o.bm&&(x.style["mix-blend-mode"]=getBlendMode(o.bm)),this.stylesList.push(E),this.addToAnimatedContents(o,S),S},SVGShapeElement.prototype.createGroupElement=function(o){var r=new ShapeGroupData;return o.ln&&r.gr.setAttribute("id",o.ln),o.cl&&r.gr.setAttribute("class",o.cl),o.bm&&(r.gr.style["mix-blend-mode"]=getBlendMode(o.bm)),r},SVGShapeElement.prototype.createTransformElement=function(o,r){var S=TransformPropertyFactory.getTransformProperty(this,o,this),E=new SVGTransformData(S,S.o,r);return this.addToAnimatedContents(o,E),E},SVGShapeElement.prototype.createShapeElement=function(o,r,S){var E=4;o.ty==="rc"?E=5:o.ty==="el"?E=6:o.ty==="sr"&&(E=7);var x=ShapePropertyFactory.getShapeProp(this,o,E,this),C=new SVGShapeData(r,S,x);return this.shapes.push(C),this.addShapeToModifiers(C),this.addToAnimatedContents(o,C),C},SVGShapeElement.prototype.addToAnimatedContents=function(o,r){for(var S=0,E=this.animatedContents.length;S<E;){if(this.animatedContents[S].element===r)return;S+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(o),element:r,data:o})},SVGShapeElement.prototype.setElementStyles=function(o){var r=o.styles,S,E=this.stylesList.length;for(S=0;S<E;S+=1)this.stylesList[S].closed||r.push(this.stylesList[S])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var o,r=this.itemsData.length;for(o=0;o<r;o+=1)this.prevViewData[o]=this.itemsData[o];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),r=this.dynamicProperties.length,o=0;o<r;o+=1)this.dynamicProperties[o].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(o,r,S,E,x,C,R){var Ce=[].concat(C),Ue,je=o.length-1,Xe,Ye,St=[],Dt=[],kt,et,Ft;for(Ue=je;Ue>=0;Ue-=1){if(Ft=this.searchProcessedElement(o[Ue]),Ft?r[Ue]=S[Ft-1]:o[Ue]._render=R,o[Ue].ty==="fl"||o[Ue].ty==="st"||o[Ue].ty==="gf"||o[Ue].ty==="gs"||o[Ue].ty==="no")Ft?r[Ue].style.closed=!1:r[Ue]=this.createStyleElement(o[Ue],x),o[Ue]._render&&r[Ue].style.pElem.parentNode!==E&&E.appendChild(r[Ue].style.pElem),St.push(r[Ue].style);else if(o[Ue].ty==="gr"){if(!Ft)r[Ue]=this.createGroupElement(o[Ue]);else for(Ye=r[Ue].it.length,Xe=0;Xe<Ye;Xe+=1)r[Ue].prevViewData[Xe]=r[Ue].it[Xe];this.searchShapes(o[Ue].it,r[Ue].it,r[Ue].prevViewData,r[Ue].gr,x+1,Ce,R),o[Ue]._render&&r[Ue].gr.parentNode!==E&&E.appendChild(r[Ue].gr)}else o[Ue].ty==="tr"?(Ft||(r[Ue]=this.createTransformElement(o[Ue],E)),kt=r[Ue].transform,Ce.push(kt)):o[Ue].ty==="sh"||o[Ue].ty==="rc"||o[Ue].ty==="el"||o[Ue].ty==="sr"?(Ft||(r[Ue]=this.createShapeElement(o[Ue],Ce,x)),this.setElementStyles(r[Ue])):o[Ue].ty==="tm"||o[Ue].ty==="rd"||o[Ue].ty==="ms"||o[Ue].ty==="pb"||o[Ue].ty==="zz"||o[Ue].ty==="op"?(Ft?(et=r[Ue],et.closed=!1):(et=ShapeModifiers.getModifier(o[Ue].ty),et.init(this,o[Ue]),r[Ue]=et,this.shapeModifiers.push(et)),Dt.push(et)):o[Ue].ty==="rp"&&(Ft?(et=r[Ue],et.closed=!0):(et=ShapeModifiers.getModifier(o[Ue].ty),r[Ue]=et,et.init(this,o,Ue,r),this.shapeModifiers.push(et),R=!1),Dt.push(et));this.addProcessedElement(o[Ue],Ue+1)}for(je=St.length,Ue=0;Ue<je;Ue+=1)St[Ue].closed=!0;for(je=Dt.length,Ue=0;Ue<je;Ue+=1)Dt[Ue].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var o,r=this.stylesList.length;for(o=0;o<r;o+=1)this.stylesList[o].reset();for(this.renderShape(),o=0;o<r;o+=1)(this.stylesList[o]._mdf||this._isFirstFrame)&&(this.stylesList[o].msElem&&(this.stylesList[o].msElem.setAttribute("d",this.stylesList[o].d),this.stylesList[o].d="M0 0"+this.stylesList[o].d),this.stylesList[o].pElem.setAttribute("d",this.stylesList[o].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var o,r=this.animatedContents.length,S;for(o=0;o<r;o+=1)S=this.animatedContents[o],(this._isFirstFrame||S.element._isAnimated)&&S.data!==!0&&S.fn(S.data,S.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(o,r,S,E,x,C){this.o=o,this.sw=r,this.sc=S,this.fc=E,this.m=x,this.p=C,this._mdf={o:!0,sw:!!r,sc:!!S,fc:!!E,m:!0,p:!0}}LetterProps.prototype.update=function(o,r,S,E,x,C){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var R=!1;return this.o!==o&&(this.o=o,this._mdf.o=!0,R=!0),this.sw!==r&&(this.sw=r,this._mdf.sw=!0,R=!0),this.sc!==S&&(this.sc=S,this._mdf.sc=!0,R=!0),this.fc!==E&&(this.fc=E,this._mdf.fc=!0,R=!0),this.m!==x&&(this.m=x,this._mdf.m=!0,R=!0),C.length&&(this.p[0]!==C[0]||this.p[1]!==C[1]||this.p[4]!==C[4]||this.p[5]!==C[5]||this.p[12]!==C[12]||this.p[13]!==C[13])&&(this.p=C,this._mdf.p=!0,R=!0),R};function TextProperty(o,r){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,r.d&&r.d.sid&&(r.d=o.globalData.slotManager.getProp(r.d)),this.data=r,this.elem=o,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(o,r){for(var S in r)Object.prototype.hasOwnProperty.call(r,S)&&(o[S]=r[S]);return o},TextProperty.prototype.setCurrentData=function(o){o.__complete||this.completeTextData(o),this.currentData=o,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(o){this.effectsSequence.push(o),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(o){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!o)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var r=this.currentData,S=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var E,x=this.effectsSequence.length,C=o||this.data.d.k[this.keysIndex].s;for(E=0;E<x;E+=1)S!==this.keysIndex?C=this.effectsSequence[E](C,C.t):C=this.effectsSequence[E](this.currentData,C.t);r!==C&&this.setCurrentData(C),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var o=this.data.d.k,r=this.elem.comp.renderedFrame,S=0,E=o.length;S<=E-1&&!(S===E-1||o[S+1].t>r);)S+=1;return this.keysIndex!==S&&(this.keysIndex=S),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(o){for(var r=[],S=0,E=o.length,x,C,R=!1,Ce=!1,Ue="";S<E;)R=Ce,Ce=!1,x=o.charCodeAt(S),Ue=o.charAt(S),FontManager.isCombinedCharacter(x)?R=!0:x>=55296&&x<=56319?FontManager.isRegionalFlag(o,S)?Ue=o.substr(S,14):(C=o.charCodeAt(S+1),C>=56320&&C<=57343&&(FontManager.isModifier(x,C)?(Ue=o.substr(S,2),R=!0):FontManager.isFlagEmoji(o.substr(S,4))?Ue=o.substr(S,4):Ue=o.substr(S,2))):x>56319?(C=o.charCodeAt(S+1),FontManager.isVariationSelector(x)&&(R=!0)):FontManager.isZeroWidthJoiner(x)&&(R=!0,Ce=!0),R?(r[r.length-1]+=Ue,R=!1):r.push(Ue),S+=Ue.length;return r},TextProperty.prototype.completeTextData=function(o){o.__complete=!0;var r=this.elem.globalData.fontManager,S=this.data,E=[],x,C,R,Ce=0,Ue,je=S.m.g,Xe=0,Ye=0,St=0,Dt=[],kt=0,et=0,Ft,xt,Mt=r.getFontByName(o.f),Ot,Ut=0,Xt=getFontProperties(Mt);o.fWeight=Xt.weight,o.fStyle=Xt.style,o.finalSize=o.s,o.finalText=this.buildFinalText(o.t),C=o.finalText.length,o.finalLineHeight=o.lh;var ei=o.tr/1e3*o.finalSize,si;if(o.sz)for(var li=!0,bi=o.sz[0],wi=o.sz[1],Pi,Ci;li;){Ci=this.buildFinalText(o.t),Pi=0,kt=0,C=Ci.length,ei=o.tr/1e3*o.finalSize;var Di=-1;for(x=0;x<C;x+=1)si=Ci[x].charCodeAt(0),R=!1,Ci[x]===" "?Di=x:(si===13||si===3)&&(kt=0,R=!0,Pi+=o.finalLineHeight||o.finalSize*1.2),r.chars?(Ot=r.getCharData(Ci[x],Mt.fStyle,Mt.fFamily),Ut=R?0:Ot.w*o.finalSize/100):Ut=r.measureText(Ci[x],o.f,o.finalSize),kt+Ut>bi&&Ci[x]!==" "?(Di===-1?C+=1:x=Di,Pi+=o.finalLineHeight||o.finalSize*1.2,Ci.splice(x,Di===x?1:0,"\r"),Di=-1,kt=0):(kt+=Ut,kt+=ei);Pi+=Mt.ascent*o.finalSize/100,this.canResize&&o.finalSize>this.minimumFontSize&&wi<Pi?(o.finalSize-=1,o.finalLineHeight=o.finalSize*o.lh/o.s):(o.finalText=Ci,C=o.finalText.length,li=!1)}kt=-ei,Ut=0;var Bi=0,Ri;for(x=0;x<C;x+=1)if(R=!1,Ri=o.finalText[x],si=Ri.charCodeAt(0),si===13||si===3?(Bi=0,Dt.push(kt),et=kt>et?kt:et,kt=-2*ei,Ue="",R=!0,St+=1):Ue=Ri,r.chars?(Ot=r.getCharData(Ri,Mt.fStyle,r.getFontByName(o.f).fFamily),Ut=R?0:Ot.w*o.finalSize/100):Ut=r.measureText(Ue,o.f,o.finalSize),Ri===" "?Bi+=Ut+ei:(kt+=Ut+ei+Bi,Bi=0),E.push({l:Ut,an:Ut,add:Xe,n:R,anIndexes:[],val:Ue,line:St,animatorJustifyOffset:0}),je==2){if(Xe+=Ut,Ue===""||Ue===" "||x===C-1){for((Ue===""||Ue===" ")&&(Xe-=Ut);Ye<=x;)E[Ye].an=Xe,E[Ye].ind=Ce,E[Ye].extra=Ut,Ye+=1;Ce+=1,Xe=0}}else if(je==3){if(Xe+=Ut,Ue===""||x===C-1){for(Ue===""&&(Xe-=Ut);Ye<=x;)E[Ye].an=Xe,E[Ye].ind=Ce,E[Ye].extra=Ut,Ye+=1;Xe=0,Ce+=1}}else E[Ce].ind=Ce,E[Ce].extra=0,Ce+=1;if(o.l=E,et=kt>et?kt:et,Dt.push(kt),o.sz)o.boxWidth=o.sz[0],o.justifyOffset=0;else switch(o.boxWidth=et,o.j){case 1:o.justifyOffset=-o.boxWidth;break;case 2:o.justifyOffset=-o.boxWidth/2;break;default:o.justifyOffset=0}o.lineWidths=Dt;var oi=S.a,mi,ri;xt=oi.length;var ni,Ei,Si=[];for(Ft=0;Ft<xt;Ft+=1){for(mi=oi[Ft],mi.a.sc&&(o.strokeColorAnim=!0),mi.a.sw&&(o.strokeWidthAnim=!0),(mi.a.fc||mi.a.fh||mi.a.fs||mi.a.fb)&&(o.fillColorAnim=!0),Ei=0,ni=mi.s.b,x=0;x<C;x+=1)ri=E[x],ri.anIndexes[Ft]=Ei,(ni==1&&ri.val!==""||ni==2&&ri.val!==""&&ri.val!==" "||ni==3&&(ri.n||ri.val==" "||x==C-1)||ni==4&&(ri.n||x==C-1))&&(mi.s.rn===1&&Si.push(Ei),Ei+=1);S.a[Ft].s.totalChars=Ei;var qi=-1,sr;if(mi.s.rn===1)for(x=0;x<C;x+=1)ri=E[x],qi!=ri.anIndexes[Ft]&&(qi=ri.anIndexes[Ft],sr=Si.splice(Math.floor(Math.random()*Si.length),1)[0]),ri.anIndexes[Ft]=sr}o.yOffset=o.finalLineHeight||o.finalSize*1.2,o.ls=o.ls||0,o.ascent=Mt.ascent*o.finalSize/100},TextProperty.prototype.updateDocumentData=function(o,r){r=r===void 0?this.keysIndex:r;var S=this.copyData({},this.data.d.k[r].s);S=this.copyData(S,o),this.data.d.k[r].s=S,this.recalculate(r),this.setCurrentData(S),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(o){var r=this.data.d.k[o].s;r.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(r)},TextProperty.prototype.canResizeFont=function(o){this.canResize=o,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(o){this.minimumFontSize=Math.floor(o)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var o=Math.max,r=Math.min,S=Math.floor;function E(C,R){this._currentTextLength=-1,this.k=!1,this.data=R,this.elem=C,this.comp=C.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(C),this.s=PropertyFactory.getProp(C,R.s||{k:0},0,0,this),"e"in R?this.e=PropertyFactory.getProp(C,R.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(C,R.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(C,R.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(C,R.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(C,R.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(C,R.a,0,.01,this),this.dynamicProperties.length||this.getValue()}E.prototype={getMult:function(R){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var Ce=0,Ue=0,je=1,Xe=1;this.ne.v>0?Ce=this.ne.v/100:Ue=-this.ne.v/100,this.xe.v>0?je=1-this.xe.v/100:Xe=1+this.xe.v/100;var Ye=BezierFactory.getBezierEasing(Ce,Ue,je,Xe).get,St=0,Dt=this.finalS,kt=this.finalE,et=this.data.sh;if(et===2)kt===Dt?St=R>=kt?1:0:St=o(0,r(.5/(kt-Dt)+(R-Dt)/(kt-Dt),1)),St=Ye(St);else if(et===3)kt===Dt?St=R>=kt?0:1:St=1-o(0,r(.5/(kt-Dt)+(R-Dt)/(kt-Dt),1)),St=Ye(St);else if(et===4)kt===Dt?St=0:(St=o(0,r(.5/(kt-Dt)+(R-Dt)/(kt-Dt),1)),St<.5?St*=2:St=1-2*(St-.5)),St=Ye(St);else if(et===5){if(kt===Dt)St=0;else{var Ft=kt-Dt;R=r(o(0,R+.5-Dt),kt-Dt);var xt=-Ft/2+R,Mt=Ft/2;St=Math.sqrt(1-xt*xt/(Mt*Mt))}St=Ye(St)}else et===6?(kt===Dt?St=0:(R=r(o(0,R+.5-Dt),kt-Dt),St=(1+Math.cos(Math.PI+Math.PI*2*R/(kt-Dt)))/2),St=Ye(St)):(R>=S(Dt)&&(R-Dt<0?St=o(0,r(r(kt,1)-(Dt-R),1)):St=o(0,r(kt-R,1))),St=Ye(St));if(this.sm.v!==100){var Ot=this.sm.v*.01;Ot===0&&(Ot=1e-8);var Ut=.5-Ot*.5;St<Ut?St=0:(St=(St-Ut)/Ot,St>1&&(St=1))}return St*this.a.v},getValue:function(R){this.iterateDynamicProperties(),this._mdf=R||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,R&&this.data.r===2&&(this.e.v=this._currentTextLength);var Ce=this.data.r===2?1:100/this.data.totalChars,Ue=this.o.v/Ce,je=this.s.v/Ce+Ue,Xe=this.e.v/Ce+Ue;if(je>Xe){var Ye=je;je=Xe,Xe=Ye}this.finalS=je,this.finalE=Xe}},extendPrototype([DynamicPropertyContainer],E);function x(C,R,Ce){return new E(C,R)}return{getTextSelectorProp:x}}();function TextAnimatorDataProperty(o,r,S){var E={propType:!1},x=PropertyFactory.getProp,C=r.a;this.a={r:C.r?x(o,C.r,0,degToRads,S):E,rx:C.rx?x(o,C.rx,0,degToRads,S):E,ry:C.ry?x(o,C.ry,0,degToRads,S):E,sk:C.sk?x(o,C.sk,0,degToRads,S):E,sa:C.sa?x(o,C.sa,0,degToRads,S):E,s:C.s?x(o,C.s,1,.01,S):E,a:C.a?x(o,C.a,1,0,S):E,o:C.o?x(o,C.o,0,.01,S):E,p:C.p?x(o,C.p,1,0,S):E,sw:C.sw?x(o,C.sw,0,0,S):E,sc:C.sc?x(o,C.sc,1,0,S):E,fc:C.fc?x(o,C.fc,1,0,S):E,fh:C.fh?x(o,C.fh,0,0,S):E,fs:C.fs?x(o,C.fs,0,.01,S):E,fb:C.fb?x(o,C.fb,0,.01,S):E,t:C.t?x(o,C.t,0,0,S):E},this.s=TextSelectorProp.getTextSelectorProp(o,r.s,S),this.s.t=r.s.t}function TextAnimatorProperty(o,r,S){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=o,this._renderType=r,this._elem=S,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(S)}TextAnimatorProperty.prototype.searchProperties=function(){var o,r=this._textData.a.length,S,E=PropertyFactory.getProp;for(o=0;o<r;o+=1)S=this._textData.a[o],this._animatorsData[o]=new TextAnimatorDataProperty(this._elem,S,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:E(this._elem,this._textData.p.a,0,0,this),f:E(this._elem,this._textData.p.f,0,0,this),l:E(this._elem,this._textData.p.l,0,0,this),r:E(this._elem,this._textData.p.r,0,0,this),p:E(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=E(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(o,r){if(this.lettersChangedFlag=r,!(!this._mdf&&!this._isFirstFrame&&!r&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var S=this._moreOptions.alignment.v,E=this._animatorsData,x=this._textData,C=this.mHelper,R=this._renderType,Ce=this.renderedLetters.length,Ue,je,Xe,Ye,St=o.l,Dt,kt,et,Ft,xt,Mt,Ot,Ut,Xt,ei,si,li,bi,wi,Pi;if(this._hasMaskedPath){if(Pi=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Ci=Pi.v;this._pathData.r.v&&(Ci=Ci.reverse()),Dt={tLength:0,segments:[]},Ye=Ci._length-1;var Di;for(li=0,Xe=0;Xe<Ye;Xe+=1)Di=bez.buildBezierData(Ci.v[Xe],Ci.v[Xe+1],[Ci.o[Xe][0]-Ci.v[Xe][0],Ci.o[Xe][1]-Ci.v[Xe][1]],[Ci.i[Xe+1][0]-Ci.v[Xe+1][0],Ci.i[Xe+1][1]-Ci.v[Xe+1][1]]),Dt.tLength+=Di.segmentLength,Dt.segments.push(Di),li+=Di.segmentLength;Xe=Ye,Pi.v.c&&(Di=bez.buildBezierData(Ci.v[Xe],Ci.v[0],[Ci.o[Xe][0]-Ci.v[Xe][0],Ci.o[Xe][1]-Ci.v[Xe][1]],[Ci.i[0][0]-Ci.v[0][0],Ci.i[0][1]-Ci.v[0][1]]),Dt.tLength+=Di.segmentLength,Dt.segments.push(Di),li+=Di.segmentLength),this._pathData.pi=Dt}if(Dt=this._pathData.pi,kt=this._pathData.f.v,Ot=0,Mt=1,Ft=0,xt=!0,ei=Dt.segments,kt<0&&Pi.v.c)for(Dt.tLength<Math.abs(kt)&&(kt=-Math.abs(kt)%Dt.tLength),Ot=ei.length-1,Xt=ei[Ot].points,Mt=Xt.length-1;kt<0;)kt+=Xt[Mt].partialLength,Mt-=1,Mt<0&&(Ot-=1,Xt=ei[Ot].points,Mt=Xt.length-1);Xt=ei[Ot].points,Ut=Xt[Mt-1],et=Xt[Mt],si=et.partialLength}Ye=St.length,Ue=0,je=0;var Bi=o.finalSize*1.2*.714,Ri=!0,oi,mi,ri,ni,Ei;ni=E.length;var Si,qi=-1,sr,ur,fr,lr=kt,Mi=Ot,Yi=Mt,Wi=-1,ir,mr,yr,pi,fi,Ai,Vi,Li,Ni="",Qi=this.defaultPropsArray,Fi;if(o.j===2||o.j===1){var Gi=0,ji=0,ar=o.j===2?-.5:-1,Ji=0,Xi=!0;for(Xe=0;Xe<Ye;Xe+=1)if(St[Xe].n){for(Gi&&(Gi+=ji);Ji<Xe;)St[Ji].animatorJustifyOffset=Gi,Ji+=1;Gi=0,Xi=!0}else{for(ri=0;ri<ni;ri+=1)oi=E[ri].a,oi.t.propType&&(Xi&&o.j===2&&(ji+=oi.t.v*ar),mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),Si.length?Gi+=oi.t.v*Si[0]*ar:Gi+=oi.t.v*Si*ar);Xi=!1}for(Gi&&(Gi+=ji);Ji<Xe;)St[Ji].animatorJustifyOffset=Gi,Ji+=1}for(Xe=0;Xe<Ye;Xe+=1){if(C.reset(),ir=1,St[Xe].n)Ue=0,je+=o.yOffset,je+=Ri?1:0,kt=lr,Ri=!1,this._hasMaskedPath&&(Ot=Mi,Mt=Yi,Xt=ei[Ot].points,Ut=Xt[Mt-1],et=Xt[Mt],si=et.partialLength,Ft=0),Ni="",Li="",Ai="",Fi="",Qi=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Wi!==St[Xe].line){switch(o.j){case 1:kt+=li-o.lineWidths[St[Xe].line];break;case 2:kt+=(li-o.lineWidths[St[Xe].line])/2;break}Wi=St[Xe].line}qi!==St[Xe].ind&&(St[qi]&&(kt+=St[qi].extra),kt+=St[Xe].an/2,qi=St[Xe].ind),kt+=S[0]*St[Xe].an*.005;var or=0;for(ri=0;ri<ni;ri+=1)oi=E[ri].a,oi.p.propType&&(mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),Si.length?or+=oi.p.v[0]*Si[0]:or+=oi.p.v[0]*Si),oi.a.propType&&(mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),Si.length?or+=oi.a.v[0]*Si[0]:or+=oi.a.v[0]*Si);for(xt=!0,this._pathData.a.v&&(kt=St[0].an*.5+(li-this._pathData.f.v-St[0].an*.5-St[St.length-1].an*.5)*qi/(Ye-1),kt+=this._pathData.f.v);xt;)Ft+si>=kt+or||!Xt?(bi=(kt+or-Ft)/et.partialLength,ur=Ut.point[0]+(et.point[0]-Ut.point[0])*bi,fr=Ut.point[1]+(et.point[1]-Ut.point[1])*bi,C.translate(-S[0]*St[Xe].an*.005,-(S[1]*Bi)*.01),xt=!1):Xt&&(Ft+=et.partialLength,Mt+=1,Mt>=Xt.length&&(Mt=0,Ot+=1,ei[Ot]?Xt=ei[Ot].points:Pi.v.c?(Mt=0,Ot=0,Xt=ei[Ot].points):(Ft-=et.partialLength,Xt=null)),Xt&&(Ut=et,et=Xt[Mt],si=et.partialLength));sr=St[Xe].an/2-St[Xe].add,C.translate(-sr,0,0)}else sr=St[Xe].an/2-St[Xe].add,C.translate(-sr,0,0),C.translate(-S[0]*St[Xe].an*.005,-S[1]*Bi*.01,0);for(ri=0;ri<ni;ri+=1)oi=E[ri].a,oi.t.propType&&(mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),(Ue!==0||o.j!==0)&&(this._hasMaskedPath?Si.length?kt+=oi.t.v*Si[0]:kt+=oi.t.v*Si:Si.length?Ue+=oi.t.v*Si[0]:Ue+=oi.t.v*Si));for(o.strokeWidthAnim&&(yr=o.sw||0),o.strokeColorAnim&&(o.sc?mr=[o.sc[0],o.sc[1],o.sc[2]]:mr=[0,0,0]),o.fillColorAnim&&o.fc&&(pi=[o.fc[0],o.fc[1],o.fc[2]]),ri=0;ri<ni;ri+=1)oi=E[ri].a,oi.a.propType&&(mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),Si.length?C.translate(-oi.a.v[0]*Si[0],-oi.a.v[1]*Si[1],oi.a.v[2]*Si[2]):C.translate(-oi.a.v[0]*Si,-oi.a.v[1]*Si,oi.a.v[2]*Si));for(ri=0;ri<ni;ri+=1)oi=E[ri].a,oi.s.propType&&(mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),Si.length?C.scale(1+(oi.s.v[0]-1)*Si[0],1+(oi.s.v[1]-1)*Si[1],1):C.scale(1+(oi.s.v[0]-1)*Si,1+(oi.s.v[1]-1)*Si,1));for(ri=0;ri<ni;ri+=1){if(oi=E[ri].a,mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),oi.sk.propType&&(Si.length?C.skewFromAxis(-oi.sk.v*Si[0],oi.sa.v*Si[1]):C.skewFromAxis(-oi.sk.v*Si,oi.sa.v*Si)),oi.r.propType&&(Si.length?C.rotateZ(-oi.r.v*Si[2]):C.rotateZ(-oi.r.v*Si)),oi.ry.propType&&(Si.length?C.rotateY(oi.ry.v*Si[1]):C.rotateY(oi.ry.v*Si)),oi.rx.propType&&(Si.length?C.rotateX(oi.rx.v*Si[0]):C.rotateX(oi.rx.v*Si)),oi.o.propType&&(Si.length?ir+=(oi.o.v*Si[0]-ir)*Si[0]:ir+=(oi.o.v*Si-ir)*Si),o.strokeWidthAnim&&oi.sw.propType&&(Si.length?yr+=oi.sw.v*Si[0]:yr+=oi.sw.v*Si),o.strokeColorAnim&&oi.sc.propType)for(fi=0;fi<3;fi+=1)Si.length?mr[fi]+=(oi.sc.v[fi]-mr[fi])*Si[0]:mr[fi]+=(oi.sc.v[fi]-mr[fi])*Si;if(o.fillColorAnim&&o.fc){if(oi.fc.propType)for(fi=0;fi<3;fi+=1)Si.length?pi[fi]+=(oi.fc.v[fi]-pi[fi])*Si[0]:pi[fi]+=(oi.fc.v[fi]-pi[fi])*Si;oi.fh.propType&&(Si.length?pi=addHueToRGB(pi,oi.fh.v*Si[0]):pi=addHueToRGB(pi,oi.fh.v*Si)),oi.fs.propType&&(Si.length?pi=addSaturationToRGB(pi,oi.fs.v*Si[0]):pi=addSaturationToRGB(pi,oi.fs.v*Si)),oi.fb.propType&&(Si.length?pi=addBrightnessToRGB(pi,oi.fb.v*Si[0]):pi=addBrightnessToRGB(pi,oi.fb.v*Si))}}for(ri=0;ri<ni;ri+=1)oi=E[ri].a,oi.p.propType&&(mi=E[ri].s,Si=mi.getMult(St[Xe].anIndexes[ri],x.a[ri].s.totalChars),this._hasMaskedPath?Si.length?C.translate(0,oi.p.v[1]*Si[0],-oi.p.v[2]*Si[1]):C.translate(0,oi.p.v[1]*Si,-oi.p.v[2]*Si):Si.length?C.translate(oi.p.v[0]*Si[0],oi.p.v[1]*Si[1],-oi.p.v[2]*Si[2]):C.translate(oi.p.v[0]*Si,oi.p.v[1]*Si,-oi.p.v[2]*Si));if(o.strokeWidthAnim&&(Ai=yr<0?0:yr),o.strokeColorAnim&&(Vi="rgb("+Math.round(mr[0]*255)+","+Math.round(mr[1]*255)+","+Math.round(mr[2]*255)+")"),o.fillColorAnim&&o.fc&&(Li="rgb("+Math.round(pi[0]*255)+","+Math.round(pi[1]*255)+","+Math.round(pi[2]*255)+")"),this._hasMaskedPath){if(C.translate(0,-o.ls),C.translate(0,S[1]*Bi*.01+je,0),this._pathData.p.v){wi=(et.point[1]-Ut.point[1])/(et.point[0]-Ut.point[0]);var vr=Math.atan(wi)*180/Math.PI;et.point[0]<Ut.point[0]&&(vr+=180),C.rotate(-vr*Math.PI/180)}C.translate(ur,fr,0),kt-=S[0]*St[Xe].an*.005,St[Xe+1]&&qi!==St[Xe+1].ind&&(kt+=St[Xe].an/2,kt+=o.tr*.001*o.finalSize)}else{switch(C.translate(Ue,je,0),o.ps&&C.translate(o.ps[0],o.ps[1]+o.ascent,0),o.j){case 1:C.translate(St[Xe].animatorJustifyOffset+o.justifyOffset+(o.boxWidth-o.lineWidths[St[Xe].line]),0,0);break;case 2:C.translate(St[Xe].animatorJustifyOffset+o.justifyOffset+(o.boxWidth-o.lineWidths[St[Xe].line])/2,0,0);break}C.translate(0,-o.ls),C.translate(sr,0,0),C.translate(S[0]*St[Xe].an*.005,S[1]*Bi*.01,0),Ue+=St[Xe].l+o.tr*.001*o.finalSize}R==="html"?Ni=C.toCSS():R==="svg"?Ni=C.to2dCSS():Qi=[C.props[0],C.props[1],C.props[2],C.props[3],C.props[4],C.props[5],C.props[6],C.props[7],C.props[8],C.props[9],C.props[10],C.props[11],C.props[12],C.props[13],C.props[14],C.props[15]],Fi=ir}Ce<=Xe?(Ei=new LetterProps(Fi,Ai,Vi,Li,Ni,Qi),this.renderedLetters.push(Ei),Ce+=1,this.lettersChangedFlag=!0):(Ei=this.renderedLetters[Xe],this.lettersChangedFlag=Ei.update(Fi,Ai,Vi,Li,Ni,Qi)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(o,r,S){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(o,r,S),this.textProperty=new TextProperty(this,o.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(o.t,this.renderType,this),this.initTransform(o,r,S),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(o){this._mdf=!1,this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange)},ITextElement.prototype.createPathShape=function(o,r){var S,E=r.length,x,C="";for(S=0;S<E;S+=1)r[S].ty==="sh"&&(x=r[S].ks.k,C+=buildShapeString(x,x.i.length,!0,o));return C},ITextElement.prototype.updateDocumentData=function(o,r){this.textProperty.updateDocumentData(o,r)},ITextElement.prototype.canResizeFont=function(o){this.textProperty.canResizeFont(o)},ITextElement.prototype.setMinimumFontSize=function(o){this.textProperty.setMinimumFontSize(o)},ITextElement.prototype.applyTextPropertiesToMatrix=function(o,r,S,E,x){switch(o.ps&&r.translate(o.ps[0],o.ps[1]+o.ascent,0),r.translate(0,-o.ls,0),o.j){case 1:r.translate(o.justifyOffset+(o.boxWidth-o.lineWidths[S]),0,0);break;case 2:r.translate(o.justifyOffset+(o.boxWidth-o.lineWidths[S])/2,0,0);break}r.translate(E,x,0)},ITextElement.prototype.buildColor=function(o){return"rgb("+Math.round(o[0]*255)+","+Math.round(o[1]*255)+","+Math.round(o[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(o,r,S){this.textSpans=[],this.renderType="svg",this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(o){for(var r=0,S=o.length,E=[],x="";r<S;)o[r]==="\r"||o[r]===""?(E.push(x),x=""):x+=o[r],r+=1;return E.push(x),E},SVGTextLottieElement.prototype.buildShapeData=function(o,r){if(o.shapes&&o.shapes.length){var S=o.shapes[0];if(S.it){var E=S.it[S.it.length-1];E.s&&(E.s.k[0]=r,E.s.k[1]=r)}}return o},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var o,r,S=this.textProperty.currentData;this.renderedLetters=createSizedArray(S?S.l.length:0),S.fc?this.layerElement.setAttribute("fill",this.buildColor(S.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),S.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(S.sc)),this.layerElement.setAttribute("stroke-width",S.sw)),this.layerElement.setAttribute("font-size",S.finalSize);var E=this.globalData.fontManager.getFontByName(S.f);if(E.fClass)this.layerElement.setAttribute("class",E.fClass);else{this.layerElement.setAttribute("font-family",E.fFamily);var x=S.fWeight,C=S.fStyle;this.layerElement.setAttribute("font-style",C),this.layerElement.setAttribute("font-weight",x)}this.layerElement.setAttribute("aria-label",S.t);var R=S.l||[],Ce=!!this.globalData.fontManager.chars;r=R.length;var Ue,je=this.mHelper,Xe="",Ye=this.data.singleShape,St=0,Dt=0,kt=!0,et=S.tr*.001*S.finalSize;if(Ye&&!Ce&&!S.sz){var Ft=this.textContainer,xt="start";switch(S.j){case 1:xt="end";break;case 2:xt="middle";break;default:xt="start";break}Ft.setAttribute("text-anchor",xt),Ft.setAttribute("letter-spacing",et);var Mt=this.buildTextContents(S.finalText);for(r=Mt.length,Dt=S.ps?S.ps[1]+S.ascent:0,o=0;o<r;o+=1)Ue=this.textSpans[o].span||createNS("tspan"),Ue.textContent=Mt[o],Ue.setAttribute("x",0),Ue.setAttribute("y",Dt),Ue.style.display="inherit",Ft.appendChild(Ue),this.textSpans[o]||(this.textSpans[o]={span:null,glyph:null}),this.textSpans[o].span=Ue,Dt+=S.finalLineHeight;this.layerElement.appendChild(Ft)}else{var Ot=this.textSpans.length,Ut;for(o=0;o<r;o+=1){if(this.textSpans[o]||(this.textSpans[o]={span:null,childSpan:null,glyph:null}),!Ce||!Ye||o===0){if(Ue=Ot>o?this.textSpans[o].span:createNS(Ce?"g":"text"),Ot<=o){if(Ue.setAttribute("stroke-linecap","butt"),Ue.setAttribute("stroke-linejoin","round"),Ue.setAttribute("stroke-miterlimit","4"),this.textSpans[o].span=Ue,Ce){var Xt=createNS("g");Ue.appendChild(Xt),this.textSpans[o].childSpan=Xt}this.textSpans[o].span=Ue,this.layerElement.appendChild(Ue)}Ue.style.display="inherit"}if(je.reset(),Ye&&(R[o].n&&(St=-et,Dt+=S.yOffset,Dt+=kt?1:0,kt=!1),this.applyTextPropertiesToMatrix(S,je,R[o].line,St,Dt),St+=R[o].l||0,St+=et),Ce){Ut=this.globalData.fontManager.getCharData(S.finalText[o],E.fStyle,this.globalData.fontManager.getFontByName(S.f).fFamily);var ei;if(Ut.t===1)ei=new SVGCompElement(Ut.data,this.globalData,this);else{var si=emptyShapeData;Ut.data&&Ut.data.shapes&&(si=this.buildShapeData(Ut.data,S.finalSize)),ei=new SVGShapeElement(si,this.globalData,this)}if(this.textSpans[o].glyph){var li=this.textSpans[o].glyph;this.textSpans[o].childSpan.removeChild(li.layerElement),li.destroy()}this.textSpans[o].glyph=ei,ei._debug=!0,ei.prepareFrame(0),ei.renderFrame(),this.textSpans[o].childSpan.appendChild(ei.layerElement),Ut.t===1&&this.textSpans[o].childSpan.setAttribute("transform","scale("+S.finalSize/100+","+S.finalSize/100+")")}else Ye&&Ue.setAttribute("transform","translate("+je.props[12]+","+je.props[13]+")"),Ue.textContent=R[o].val,Ue.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Ye&&Ue&&Ue.setAttribute("d",Xe)}for(;o<this.textSpans.length;)this.textSpans[o].span.style.display="none",o+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var o=this.layerElement.getBBox();this.bbox={top:o.y,left:o.x,width:o.width,height:o.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var o,r=this.textSpans.length,S;for(this.renderedFrame=this.comp.renderedFrame,o=0;o<r;o+=1)S=this.textSpans[o].glyph,S&&(S.prepareFrame(this.comp.renderedFrame-this.data.st),S._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var o,r,S=this.textAnimator.renderedLetters,E=this.textProperty.currentData.l;r=E.length;var x,C,R;for(o=0;o<r;o+=1)E[o].n||(x=S[o],C=this.textSpans[o].span,R=this.textSpans[o].glyph,R&&R.renderFrame(),x._mdf.m&&C.setAttribute("transform",x.m),x._mdf.o&&C.setAttribute("opacity",x.o),x._mdf.sw&&C.setAttribute("stroke-width",x.sw),x._mdf.sc&&C.setAttribute("stroke",x.sc),x._mdf.fc&&C.setAttribute("fill",x.fc))}};function ISolidElement(o,r,S){this.initElement(o,r,S)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var o=createNS("rect");o.setAttribute("width",this.data.sw),o.setAttribute("height",this.data.sh),o.setAttribute("fill",this.data.sc),this.layerElement.appendChild(o)};function NullElement(o,r,S){this.initFrame(),this.initBaseData(o,r,S),this.initFrame(),this.initTransform(o,r,S),this.initHierarchy()}NullElement.prototype.prepareFrame=function(o){this.prepareProperties(o,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(o){return new NullElement(o,this.globalData,this)},SVGRendererBase.prototype.createShape=function(o){return new SVGShapeElement(o,this.globalData,this)},SVGRendererBase.prototype.createText=function(o){return new SVGTextLottieElement(o,this.globalData,this)},SVGRendererBase.prototype.createImage=function(o){return new IImageElement(o,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(o){return new ISolidElement(o,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(o){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+o.w+" "+o.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",o.w),this.svgElement.setAttribute("height",o.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var r=this.globalData.defs;this.setupGlobalData(o,r),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=o;var S=createNS("clipPath"),E=createNS("rect");E.setAttribute("width",o.w),E.setAttribute("height",o.h),E.setAttribute("x",0),E.setAttribute("y",0);var x=createElementID();S.setAttribute("id",x),S.appendChild(E),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+x+")"),r.appendChild(S),this.layers=o.layers,this.elements=createSizedArray(o.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var o,r=this.layers?this.layers.length:0;for(o=0;o<r;o+=1)this.elements[o]&&this.elements[o].destroy&&this.elements[o].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(o){var r=0,S=this.layers.length;for(r=0;r<S;r+=1)if(this.layers[r].ind===o)return r;return-1},SVGRendererBase.prototype.buildItem=function(o){var r=this.elements;if(!(r[o]||this.layers[o].ty===99)){r[o]=!0;var S=this.createItem(this.layers[o]);if(r[o]=S,getExpressionsPlugin()&&(this.layers[o].ty===0&&this.globalData.projectInterface.registerComposition(S),S.initExpressions()),this.appendElementInPos(S,o),this.layers[o].tt){var E="tp"in this.layers[o]?this.findIndexByInd(this.layers[o].tp):o-1;if(E===-1)return;if(!this.elements[E]||this.elements[E]===!0)this.buildItem(E),this.addPendingElement(S);else{var x=r[E],C=x.getMatte(this.layers[o].tt);S.setMatte(C)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var o=this.pendingElements.pop();if(o.checkParenting(),o.data.tt)for(var r=0,S=this.elements.length;r<S;){if(this.elements[r]===o){var E="tp"in o.data?this.findIndexByInd(o.data.tp):r-1,x=this.elements[E],C=x.getMatte(this.layers[r].tt);o.setMatte(C);break}r+=1}}},SVGRendererBase.prototype.renderFrame=function(o){if(!(this.renderedFrame===o||this.destroyed)){o===null?o=this.renderedFrame:this.renderedFrame=o,this.globalData.frameNum=o,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=o,this.globalData._mdf=!1;var r,S=this.layers.length;for(this.completeLayers||this.checkLayers(o),r=S-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(o-this.layers[r].st);if(this.globalData._mdf)for(r=0;r<S;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(o,r){var S=o.getBaseElement();if(S){for(var E=0,x;E<r;)this.elements[E]&&this.elements[E]!==!0&&this.elements[E].getBaseElement()&&(x=this.elements[E].getBaseElement()),E+=1;x?this.layerElement.insertBefore(S,x):this.layerElement.appendChild(S)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(o,r,S){this.initFrame(),this.initBaseData(o,r,S),this.initTransform(o,r,S),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!r.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(o){if(this._mdf=!1,this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=o/this.data.sr;else{var r=this.tm.v;r===this.data.op&&(r=this.data.op-1),this.renderedFrame=r}var S,E=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),S=E-1;S>=0;S-=1)(this.completeLayers||this.elements[S])&&(this.elements[S].prepareFrame(this.renderedFrame-this.layers[S].st),this.elements[S]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var o,r=this.layers.length;for(o=0;o<r;o+=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame()},ICompElement.prototype.setElements=function(o){this.elements=o},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var o,r=this.layers.length;for(o=0;o<r;o+=1)this.elements[o]&&this.elements[o].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(o,r,S){this.layers=o.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(o,r,S),this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(o){return new SVGCompElement(o,this.globalData,this)};function SVGRenderer(o,r){this.animationItem=o,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var S="";if(r&&r.title){var E=createNS("title"),x=createElementID();E.setAttribute("id",x),E.textContent=r.title,this.svgElement.appendChild(E),S+=x}if(r&&r.description){var C=createNS("desc"),R=createElementID();C.setAttribute("id",R),C.textContent=r.description,this.svgElement.appendChild(C),S+=" "+R}S&&this.svgElement.setAttribute("aria-labelledby",S);var Ce=createNS("defs");this.svgElement.appendChild(Ce);var Ue=createNS("g");this.svgElement.appendChild(Ue),this.layerElement=Ue,this.renderConfig={preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",progressiveLoad:r&&r.progressiveLoad||!1,hideOnTransparent:!(r&&r.hideOnTransparent===!1),viewBoxOnly:r&&r.viewBoxOnly||!1,viewBoxSize:r&&r.viewBoxSize||!1,className:r&&r.className||"",id:r&&r.id||"",focusable:r&&r.focusable,filterSize:{width:r&&r.filterSize&&r.filterSize.width||"100%",height:r&&r.filterSize&&r.filterSize.height||"100%",x:r&&r.filterSize&&r.filterSize.x||"0%",y:r&&r.filterSize&&r.filterSize.y||"0%"},width:r&&r.width,height:r&&r.height,runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:Ce,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(o){return new SVGCompElement(o,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(r){var S,E=r.length,x="_";for(S=0;S<E;S+=1)x+=r[S].transform.key+"_";var C=this.sequences[x];return C||(C={transforms:[].concat(r),finalTransform:new Matrix,_mdf:!1},this.sequences[x]=C,this.sequenceList.push(C)),C},processSequence:function(r,S){for(var E=0,x=r.transforms.length,C=S;E<x&&!S;){if(r.transforms[E].transform.mProps._mdf){C=!0;break}E+=1}if(C)for(r.finalTransform.reset(),E=x-1;E>=0;E-=1)r.finalTransform.multiply(r.transforms[E].transform.mProps.v);r._mdf=C},processSequences:function(r){var S,E=this.sequenceList.length;for(S=0;S<E;S+=1)this.processSequence(this.sequenceList[S],r)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var r="__lottie_element_luma_buffer",S=null,E=null,x=null;function C(){var Ue=createNS("svg"),je=createNS("filter"),Xe=createNS("feColorMatrix");return je.setAttribute("id",r),Xe.setAttribute("type","matrix"),Xe.setAttribute("color-interpolation-filters","sRGB"),Xe.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),je.appendChild(Xe),Ue.appendChild(je),Ue.setAttribute("id",r+"_svg"),featureSupport.svgLumaHidden&&(Ue.style.display="none"),Ue}function R(){S||(x=C(),document.body.appendChild(x),S=createTag("canvas"),E=S.getContext("2d"),E.filter="url(#"+r+")",E.fillStyle="rgba(0,0,0,0)",E.fillRect(0,0,1,1))}function Ce(Ue){return S||R(),S.width=Ue.width,S.height=Ue.height,E.filter="url(#"+r+")",S}return{load:R,get:Ce}};function createCanvas(o,r){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(o,r);var S=createTag("canvas");return S.width=o,S.height=r,S}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(o){var r,S=o.data.ef?o.data.ef.length:0;this.filters=[];var E;for(r=0;r<S;r+=1){E=null;var x=o.data.ef[r].ty;if(registeredEffects[x]){var C=registeredEffects[x].effect;E=new C(o.effectsManager.effectElements[r],o)}E&&this.filters.push(E)}this.filters.length&&o.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(o){var r,S=this.filters.length;for(r=0;r<S;r+=1)this.filters[r].renderFrame(o)},CVEffects.prototype.getEffects=function(o){var r,S=this.filters.length,E=[];for(r=0;r<S;r+=1)this.filters[r].type===o&&E.push(this.filters[r]);return E};function registerEffect(o,r){registeredEffects[o]={effect:r}}function CVMaskElement(o,r){this.data=o,this.element=r,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var S,E=this.masksProperties.length,x=!1;for(S=0;S<E;S+=1)this.masksProperties[S].mode!=="n"&&(x=!0),this.viewData[S]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[S],3);this.hasMasks=x,x&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var o=this.element.finalTransform.mat,r=this.element.canvasContext,S,E=this.masksProperties.length,x,C,R;for(r.beginPath(),S=0;S<E;S+=1)if(this.masksProperties[S].mode!=="n"){this.masksProperties[S].inv&&(r.moveTo(0,0),r.lineTo(this.element.globalData.compSize.w,0),r.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),r.lineTo(0,this.element.globalData.compSize.h),r.lineTo(0,0)),R=this.viewData[S].v,x=o.applyToPointArray(R.v[0][0],R.v[0][1],0),r.moveTo(x[0],x[1]);var Ce,Ue=R._length;for(Ce=1;Ce<Ue;Ce+=1)C=o.applyToTriplePoints(R.o[Ce-1],R.i[Ce],R.v[Ce]),r.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5]);C=o.applyToTriplePoints(R.o[Ce-1],R.i[0],R.v[0]),r.bezierCurveTo(C[0],C[1],C[2],C[3],C[4],C[5])}this.element.globalData.renderer.save(!0),r.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var r=this.globalData.canvasContext,S=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(S);var E=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(E),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var r=this.globalData;if(r.blendMode!==this.data.bm){r.blendMode=this.data.bm;var S=getBlendMode(this.data.bm);r.canvasContext.globalCompositeOperation=S}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(r){r.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var r=this.buffers[0],S=r.getContext("2d");this.clearCanvas(S),S.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var r=this.buffers[1],S=r.getContext("2d");this.clearCanvas(S),S.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var E=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(E.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var x=assetLoader.getLumaCanvas(this.canvasContext.canvas),C=x.getContext("2d");C.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(x,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(r,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(r){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!r)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var S=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(S),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(S),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(o,r,S,E){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var x=4;r.ty==="rc"?x=5:r.ty==="el"?x=6:r.ty==="sr"&&(x=7),this.sh=ShapePropertyFactory.getShapeProp(o,r,x,o);var C,R=S.length,Ce;for(C=0;C<R;C+=1)S[C].closed||(Ce={transforms:E.addTransformSequence(S[C].transforms),trNodes:[]},this.styledShapes.push(Ce),S[C].elements.push(Ce))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(o,r,S){this.shapes=[],this.shapesData=o.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(o,r){var S={data:o,type:o.ty,preTransforms:this.transformsManager.addTransformSequence(r),transforms:[],elements:[],closed:o.hd===!0},E={};if(o.ty==="fl"||o.ty==="st"?(E.c=PropertyFactory.getProp(this,o.c,1,255,this),E.c.k||(S.co="rgb("+bmFloor(E.c.v[0])+","+bmFloor(E.c.v[1])+","+bmFloor(E.c.v[2])+")")):(o.ty==="gf"||o.ty==="gs")&&(E.s=PropertyFactory.getProp(this,o.s,1,null,this),E.e=PropertyFactory.getProp(this,o.e,1,null,this),E.h=PropertyFactory.getProp(this,o.h||{k:0},0,.01,this),E.a=PropertyFactory.getProp(this,o.a||{k:0},0,degToRads,this),E.g=new GradientProperty(this,o.g,this)),E.o=PropertyFactory.getProp(this,o.o,0,.01,this),o.ty==="st"||o.ty==="gs"){if(S.lc=lineCapEnum[o.lc||2],S.lj=lineJoinEnum[o.lj||2],o.lj==1&&(S.ml=o.ml),E.w=PropertyFactory.getProp(this,o.w,0,null,this),E.w.k||(S.wi=E.w.v),o.d){var x=new DashProperty(this,o.d,"canvas",this);E.d=x,E.d.k||(S.da=E.d.dashArray,S.do=E.d.dashoffset[0])}}else S.r=o.r===2?"evenodd":"nonzero";return this.stylesList.push(S),E.style=S,E},CVShapeElement.prototype.createGroupElement=function(){var o={it:[],prevViewData:[]};return o},CVShapeElement.prototype.createTransformElement=function(o){var r={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,o.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,o,this)}};return r},CVShapeElement.prototype.createShapeElement=function(o){var r=new CVShapeData(this,o,this.stylesList,this.transformsManager);return this.shapes.push(r),this.addShapeToModifiers(r),r},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var o,r=this.itemsData.length;for(o=0;o<r;o+=1)this.prevViewData[o]=this.itemsData[o];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),r=this.dynamicProperties.length,o=0;o<r;o+=1)this.dynamicProperties[o].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(o){var r,S=this.stylesList.length;for(r=0;r<S;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.push(o)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var o,r=this.stylesList.length;for(o=0;o<r;o+=1)this.stylesList[o].closed||this.stylesList[o].transforms.pop()},CVShapeElement.prototype.closeStyles=function(o){var r,S=o.length;for(r=0;r<S;r+=1)o[r].closed=!0},CVShapeElement.prototype.searchShapes=function(o,r,S,E,x){var C,R=o.length-1,Ce,Ue,je=[],Xe=[],Ye,St,Dt,kt=[].concat(x);for(C=R;C>=0;C-=1){if(Ye=this.searchProcessedElement(o[C]),Ye?r[C]=S[Ye-1]:o[C]._shouldRender=E,o[C].ty==="fl"||o[C].ty==="st"||o[C].ty==="gf"||o[C].ty==="gs")Ye?r[C].style.closed=!1:r[C]=this.createStyleElement(o[C],kt),je.push(r[C].style);else if(o[C].ty==="gr"){if(!Ye)r[C]=this.createGroupElement(o[C]);else for(Ue=r[C].it.length,Ce=0;Ce<Ue;Ce+=1)r[C].prevViewData[Ce]=r[C].it[Ce];this.searchShapes(o[C].it,r[C].it,r[C].prevViewData,E,kt)}else o[C].ty==="tr"?(Ye||(Dt=this.createTransformElement(o[C]),r[C]=Dt),kt.push(r[C]),this.addTransformToStyleList(r[C])):o[C].ty==="sh"||o[C].ty==="rc"||o[C].ty==="el"||o[C].ty==="sr"?Ye||(r[C]=this.createShapeElement(o[C])):o[C].ty==="tm"||o[C].ty==="rd"||o[C].ty==="pb"||o[C].ty==="zz"||o[C].ty==="op"?(Ye?(St=r[C],St.closed=!1):(St=ShapeModifiers.getModifier(o[C].ty),St.init(this,o[C]),r[C]=St,this.shapeModifiers.push(St)),Xe.push(St)):o[C].ty==="rp"&&(Ye?(St=r[C],St.closed=!0):(St=ShapeModifiers.getModifier(o[C].ty),r[C]=St,St.init(this,o,C,r),this.shapeModifiers.push(St),E=!1),Xe.push(St));this.addProcessedElement(o[C],C+1)}for(this.removeTransformFromStyleList(),this.closeStyles(je),R=Xe.length,C=0;C<R;C+=1)Xe[C].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(o,r){(o._opMdf||r.op._mdf||this._isFirstFrame)&&(r.opacity=o.opacity,r.opacity*=r.op.v,r._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var o,r=this.stylesList.length,S,E,x,C,R,Ce,Ue=this.globalData.renderer,je=this.globalData.canvasContext,Xe,Ye;for(o=0;o<r;o+=1)if(Ye=this.stylesList[o],Xe=Ye.type,!((Xe==="st"||Xe==="gs")&&Ye.wi===0||!Ye.data._shouldRender||Ye.coOp===0||this.globalData.currentGlobalAlpha===0)){for(Ue.save(),R=Ye.elements,Xe==="st"||Xe==="gs"?(Ue.ctxStrokeStyle(Xe==="st"?Ye.co:Ye.grd),Ue.ctxLineWidth(Ye.wi),Ue.ctxLineCap(Ye.lc),Ue.ctxLineJoin(Ye.lj),Ue.ctxMiterLimit(Ye.ml||0)):Ue.ctxFillStyle(Xe==="fl"?Ye.co:Ye.grd),Ue.ctxOpacity(Ye.coOp),Xe!=="st"&&Xe!=="gs"&&je.beginPath(),Ue.ctxTransform(Ye.preTransforms.finalTransform.props),E=R.length,S=0;S<E;S+=1){for((Xe==="st"||Xe==="gs")&&(je.beginPath(),Ye.da&&(je.setLineDash(Ye.da),je.lineDashOffset=Ye.do)),Ce=R[S].trNodes,C=Ce.length,x=0;x<C;x+=1)Ce[x].t==="m"?je.moveTo(Ce[x].p[0],Ce[x].p[1]):Ce[x].t==="c"?je.bezierCurveTo(Ce[x].pts[0],Ce[x].pts[1],Ce[x].pts[2],Ce[x].pts[3],Ce[x].pts[4],Ce[x].pts[5]):je.closePath();(Xe==="st"||Xe==="gs")&&(Ue.ctxStroke(),Ye.da&&je.setLineDash(this.dashResetter))}Xe!=="st"&&Xe!=="gs"&&this.globalData.renderer.ctxFill(Ye.r),Ue.restore()}},CVShapeElement.prototype.renderShape=function(o,r,S,E){var x,C=r.length-1,R;for(R=o,x=C;x>=0;x-=1)r[x].ty==="tr"?(R=S[x].transform,this.renderShapeTransform(o,R)):r[x].ty==="sh"||r[x].ty==="el"||r[x].ty==="rc"||r[x].ty==="sr"?this.renderPath(r[x],S[x]):r[x].ty==="fl"?this.renderFill(r[x],S[x],R):r[x].ty==="st"?this.renderStroke(r[x],S[x],R):r[x].ty==="gf"||r[x].ty==="gs"?this.renderGradientFill(r[x],S[x],R):r[x].ty==="gr"?this.renderShape(R,r[x].it,S[x].it):r[x].ty;E&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(o,r){if(this._isFirstFrame||r._mdf||o.transforms._mdf){var S=o.trNodes,E=r.paths,x,C,R,Ce=E._length;S.length=0;var Ue=o.transforms.finalTransform;for(R=0;R<Ce;R+=1){var je=E.shapes[R];if(je&&je.v){for(C=je._length,x=1;x<C;x+=1)x===1&&S.push({t:"m",p:Ue.applyToPointArray(je.v[0][0],je.v[0][1],0)}),S.push({t:"c",pts:Ue.applyToTriplePoints(je.o[x-1],je.i[x],je.v[x])});C===1&&S.push({t:"m",p:Ue.applyToPointArray(je.v[0][0],je.v[0][1],0)}),je.c&&C&&(S.push({t:"c",pts:Ue.applyToTriplePoints(je.o[x-1],je.i[0],je.v[0])}),S.push({t:"z"}))}}o.trNodes=S}},CVShapeElement.prototype.renderPath=function(o,r){if(o.hd!==!0&&o._shouldRender){var S,E=r.styledShapes.length;for(S=0;S<E;S+=1)this.renderStyledShape(r.styledShapes[S],r.sh)}},CVShapeElement.prototype.renderFill=function(o,r,S){var E=r.style;(r.c._mdf||this._isFirstFrame)&&(E.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||S._opMdf||this._isFirstFrame)&&(E.coOp=r.o.v*S.opacity)},CVShapeElement.prototype.renderGradientFill=function(o,r,S){var E=r.style,x;if(!E.grd||r.g._mdf||r.s._mdf||r.e._mdf||o.t!==1&&(r.h._mdf||r.a._mdf)){var C=this.globalData.canvasContext,R=r.s.v,Ce=r.e.v;if(o.t===1)x=C.createLinearGradient(R[0],R[1],Ce[0],Ce[1]);else{var Ue=Math.sqrt(Math.pow(R[0]-Ce[0],2)+Math.pow(R[1]-Ce[1],2)),je=Math.atan2(Ce[1]-R[1],Ce[0]-R[0]),Xe=r.h.v;Xe>=1?Xe=.99:Xe<=-1&&(Xe=-.99);var Ye=Ue*Xe,St=Math.cos(je+r.a.v)*Ye+R[0],Dt=Math.sin(je+r.a.v)*Ye+R[1];x=C.createRadialGradient(St,Dt,0,R[0],R[1],Ue)}var kt,et=o.g.p,Ft=r.g.c,xt=1;for(kt=0;kt<et;kt+=1)r.g._hasOpacity&&r.g._collapsable&&(xt=r.g.o[kt*2+1]),x.addColorStop(Ft[kt*4]/100,"rgba("+Ft[kt*4+1]+","+Ft[kt*4+2]+","+Ft[kt*4+3]+","+xt+")");E.grd=x}E.coOp=r.o.v*S.opacity},CVShapeElement.prototype.renderStroke=function(o,r,S){var E=r.style,x=r.d;x&&(x._mdf||this._isFirstFrame)&&(E.da=x.dashArray,E.do=x.dashoffset[0]),(r.c._mdf||this._isFirstFrame)&&(E.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||S._opMdf||this._isFirstFrame)&&(E.coOp=r.o.v*S.opacity),(r.w._mdf||this._isFirstFrame)&&(E.wi=r.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(o,r,S){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var o=this.textProperty.currentData;this.renderedLetters=createSizedArray(o.l?o.l.length:0);var r=!1;o.fc?(r=!0,this.values.fill=this.buildColor(o.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=r;var S=!1;o.sc&&(S=!0,this.values.stroke=this.buildColor(o.sc),this.values.sWidth=o.sw);var E=this.globalData.fontManager.getFontByName(o.f),x,C,R=o.l,Ce=this.mHelper;this.stroke=S,this.values.fValue=o.finalSize+"px "+this.globalData.fontManager.getFontByName(o.f).fFamily,C=o.finalText.length;var Ue,je,Xe,Ye,St,Dt,kt,et,Ft,xt,Mt=this.data.singleShape,Ot=o.tr*.001*o.finalSize,Ut=0,Xt=0,ei=!0,si=0;for(x=0;x<C;x+=1){Ue=this.globalData.fontManager.getCharData(o.finalText[x],E.fStyle,this.globalData.fontManager.getFontByName(o.f).fFamily),je=Ue&&Ue.data||{},Ce.reset(),Mt&&R[x].n&&(Ut=-Ot,Xt+=o.yOffset,Xt+=ei?1:0,ei=!1),St=je.shapes?je.shapes[0].it:[],kt=St.length,Ce.scale(o.finalSize/100,o.finalSize/100),Mt&&this.applyTextPropertiesToMatrix(o,Ce,R[x].line,Ut,Xt),Ft=createSizedArray(kt-1);var li=0;for(Dt=0;Dt<kt;Dt+=1)if(St[Dt].ty==="sh"){for(Ye=St[Dt].ks.k.i.length,et=St[Dt].ks.k,xt=[],Xe=1;Xe<Ye;Xe+=1)Xe===1&&xt.push(Ce.applyToX(et.v[0][0],et.v[0][1],0),Ce.applyToY(et.v[0][0],et.v[0][1],0)),xt.push(Ce.applyToX(et.o[Xe-1][0],et.o[Xe-1][1],0),Ce.applyToY(et.o[Xe-1][0],et.o[Xe-1][1],0),Ce.applyToX(et.i[Xe][0],et.i[Xe][1],0),Ce.applyToY(et.i[Xe][0],et.i[Xe][1],0),Ce.applyToX(et.v[Xe][0],et.v[Xe][1],0),Ce.applyToY(et.v[Xe][0],et.v[Xe][1],0));xt.push(Ce.applyToX(et.o[Xe-1][0],et.o[Xe-1][1],0),Ce.applyToY(et.o[Xe-1][0],et.o[Xe-1][1],0),Ce.applyToX(et.i[0][0],et.i[0][1],0),Ce.applyToY(et.i[0][0],et.i[0][1],0),Ce.applyToX(et.v[0][0],et.v[0][1],0),Ce.applyToY(et.v[0][0],et.v[0][1],0)),Ft[li]=xt,li+=1}Mt&&(Ut+=R[x].l,Ut+=Ot),this.textSpans[si]?this.textSpans[si].elem=Ft:this.textSpans[si]={elem:Ft},si+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var o=this.canvasContext;o.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var r,S,E,x,C,R,Ce=this.textAnimator.renderedLetters,Ue=this.textProperty.currentData.l;S=Ue.length;var je,Xe=null,Ye=null,St=null,Dt,kt,et=this.globalData.renderer;for(r=0;r<S;r+=1)if(!Ue[r].n){if(je=Ce[r],je&&(et.save(),et.ctxTransform(je.p),et.ctxOpacity(je.o)),this.fill){for(je&&je.fc?Xe!==je.fc&&(et.ctxFillStyle(je.fc),Xe=je.fc):Xe!==this.values.fill&&(Xe=this.values.fill,et.ctxFillStyle(this.values.fill)),Dt=this.textSpans[r].elem,x=Dt.length,this.globalData.canvasContext.beginPath(),E=0;E<x;E+=1)for(kt=Dt[E],R=kt.length,this.globalData.canvasContext.moveTo(kt[0],kt[1]),C=2;C<R;C+=6)this.globalData.canvasContext.bezierCurveTo(kt[C],kt[C+1],kt[C+2],kt[C+3],kt[C+4],kt[C+5]);this.globalData.canvasContext.closePath(),et.ctxFill()}if(this.stroke){for(je&&je.sw?St!==je.sw&&(St=je.sw,et.ctxLineWidth(je.sw)):St!==this.values.sWidth&&(St=this.values.sWidth,et.ctxLineWidth(this.values.sWidth)),je&&je.sc?Ye!==je.sc&&(Ye=je.sc,et.ctxStrokeStyle(je.sc)):Ye!==this.values.stroke&&(Ye=this.values.stroke,et.ctxStrokeStyle(this.values.stroke)),Dt=this.textSpans[r].elem,x=Dt.length,this.globalData.canvasContext.beginPath(),E=0;E<x;E+=1)for(kt=Dt[E],R=kt.length,this.globalData.canvasContext.moveTo(kt[0],kt[1]),C=2;C<R;C+=6)this.globalData.canvasContext.bezierCurveTo(kt[C],kt[C+1],kt[C+2],kt[C+3],kt[C+4],kt[C+5]);this.globalData.canvasContext.closePath(),et.ctxStroke()}je&&this.globalData.renderer.restore()}};function CVImageElement(o,r,S){this.assetData=r.getAssetData(o.refId),this.img=r.imageLoader.getAsset(this.assetData),this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var o=createTag("canvas");o.width=this.assetData.w,o.height=this.assetData.h;var r=o.getContext("2d"),S=this.img.width,E=this.img.height,x=S/E,C=this.assetData.w/this.assetData.h,R,Ce,Ue=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;x>C&&Ue==="xMidYMid slice"||x<C&&Ue!=="xMidYMid slice"?(Ce=E,R=Ce*C):(R=S,Ce=R/C),r.drawImage(this.img,(S-R)/2,(E-Ce)/2,R,Ce,0,0,this.assetData.w,this.assetData.h),this.img=o}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(o,r,S){this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(o){return new CVShapeElement(o,this.globalData,this)},CanvasRendererBase.prototype.createText=function(o){return new CVTextElement(o,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(o){return new CVImageElement(o,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(o){return new CVSolidElement(o,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(o){o[0]===1&&o[1]===0&&o[4]===0&&o[5]===1&&o[12]===0&&o[13]===0||this.canvasContext.transform(o[0],o[1],o[4],o[5],o[12],o[13])},CanvasRendererBase.prototype.ctxOpacity=function(o){this.canvasContext.globalAlpha*=o<0?0:o},CanvasRendererBase.prototype.ctxFillStyle=function(o){this.canvasContext.fillStyle=o},CanvasRendererBase.prototype.ctxStrokeStyle=function(o){this.canvasContext.strokeStyle=o},CanvasRendererBase.prototype.ctxLineWidth=function(o){this.canvasContext.lineWidth=o},CanvasRendererBase.prototype.ctxLineCap=function(o){this.canvasContext.lineCap=o},CanvasRendererBase.prototype.ctxLineJoin=function(o){this.canvasContext.lineJoin=o},CanvasRendererBase.prototype.ctxMiterLimit=function(o){this.canvasContext.miterLimit=o},CanvasRendererBase.prototype.ctxFill=function(o){this.canvasContext.fill(o)},CanvasRendererBase.prototype.ctxFillRect=function(o,r,S,E){this.canvasContext.fillRect(o,r,S,E)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(o){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}o&&(this.globalData.blendMode="source-over"),this.contextData.restore(o)},CanvasRendererBase.prototype.configAnimation=function(o){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var r=this.animationItem.container.style;r.width="100%",r.height="100%";var S="0px 0px 0px";r.transformOrigin=S,r.mozTransformOrigin=S,r.webkitTransformOrigin=S,r["-webkit-transform"]=S,r.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=o,this.layers=o.layers,this.transformCanvas={w:o.w,h:o.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(o,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(o.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(o,r){this.reset();var S,E;o?(S=o,E=r,this.canvasContext.canvas.width=S,this.canvasContext.canvas.height=E):(this.animationItem.wrapper&&this.animationItem.container?(S=this.animationItem.wrapper.offsetWidth,E=this.animationItem.wrapper.offsetHeight):(S=this.canvasContext.canvas.width,E=this.canvasContext.canvas.height),this.canvasContext.canvas.width=S*this.renderConfig.dpr,this.canvasContext.canvas.height=E*this.renderConfig.dpr);var x,C;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var R=this.renderConfig.preserveAspectRatio.split(" "),Ce=R[1]||"meet",Ue=R[0]||"xMidYMid",je=Ue.substr(0,4),Xe=Ue.substr(4);x=S/E,C=this.transformCanvas.w/this.transformCanvas.h,C>x&&Ce==="meet"||C<x&&Ce==="slice"?(this.transformCanvas.sx=S/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=S/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=E/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=E/(this.transformCanvas.h/this.renderConfig.dpr)),je==="xMid"&&(C<x&&Ce==="meet"||C>x&&Ce==="slice")?this.transformCanvas.tx=(S-this.transformCanvas.w*(E/this.transformCanvas.h))/2*this.renderConfig.dpr:je==="xMax"&&(C<x&&Ce==="meet"||C>x&&Ce==="slice")?this.transformCanvas.tx=(S-this.transformCanvas.w*(E/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Xe==="YMid"&&(C>x&&Ce==="meet"||C<x&&Ce==="slice")?this.transformCanvas.ty=(E-this.transformCanvas.h*(S/this.transformCanvas.w))/2*this.renderConfig.dpr:Xe==="YMax"&&(C>x&&Ce==="meet"||C<x&&Ce==="slice")?this.transformCanvas.ty=(E-this.transformCanvas.h*(S/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=S/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=E/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var o,r=this.layers?this.layers.length:0;for(o=r-1;o>=0;o-=1)this.elements[o]&&this.elements[o].destroy&&this.elements[o].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(o,r){if(!(this.renderedFrame===o&&this.renderConfig.clearCanvas===!0&&!r||this.destroyed||o===-1)){this.renderedFrame=o,this.globalData.frameNum=o-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||r,this.globalData.projectInterface.currentFrame=o;var S,E=this.layers.length;for(this.completeLayers||this.checkLayers(o),S=E-1;S>=0;S-=1)(this.completeLayers||this.elements[S])&&this.elements[S].prepareFrame(o-this.layers[S].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),S=E-1;S>=0;S-=1)(this.completeLayers||this.elements[S])&&this.elements[S].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(o){var r=this.elements;if(!(r[o]||this.layers[o].ty===99)){var S=this.createItem(this.layers[o],this,this.globalData);r[o]=S,S.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var o=this.pendingElements.pop();o.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var o,r=15;for(o=0;o<r;o+=1){var S=new CanvasContext;this.stack[o]=S}this._length=r,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var o=this._length*2,r=0;for(r=this._length;r<o;r+=1)this.stack[r]=new CanvasContext;this._length=o},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(o){this.cArrPos-=1;var r=this.stack[this.cArrPos],S=r.transform,E,x=this.cTr.props;for(E=0;E<16;E+=1)x[E]=S[E];if(o){this.nativeContext.restore();var C=this.stack[this.cArrPos+1];this.appliedFillStyle=C.fillStyle,this.appliedStrokeStyle=C.strokeStyle,this.appliedLineWidth=C.lineWidth,this.appliedLineCap=C.lineCap,this.appliedLineJoin=C.lineJoin,this.appliedMiterLimit=C.miterLimit}this.nativeContext.setTransform(S[0],S[1],S[4],S[5],S[12],S[13]),(o||r.opacity!==-1&&this.currentOpacity!==r.opacity)&&(this.nativeContext.globalAlpha=r.opacity,this.currentOpacity=r.opacity),this.currentFillStyle=r.fillStyle,this.currentStrokeStyle=r.strokeStyle,this.currentLineWidth=r.lineWidth,this.currentLineCap=r.lineCap,this.currentLineJoin=r.lineJoin,this.currentMiterLimit=r.miterLimit},CVContextData.prototype.save=function(o){o&&this.nativeContext.save();var r=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var S=this.stack[this.cArrPos],E;for(E=0;E<16;E+=1)S.transform[E]=r[E];this.cArrPos+=1;var x=this.stack[this.cArrPos];x.opacity=S.opacity,x.fillStyle=S.fillStyle,x.strokeStyle=S.strokeStyle,x.lineWidth=S.lineWidth,x.lineCap=S.lineCap,x.lineJoin=S.lineJoin,x.miterLimit=S.miterLimit},CVContextData.prototype.setOpacity=function(o){this.stack[this.cArrPos].opacity=o},CVContextData.prototype.setContext=function(o){this.nativeContext=o},CVContextData.prototype.fillStyle=function(o){this.stack[this.cArrPos].fillStyle!==o&&(this.currentFillStyle=o,this.stack[this.cArrPos].fillStyle=o)},CVContextData.prototype.strokeStyle=function(o){this.stack[this.cArrPos].strokeStyle!==o&&(this.currentStrokeStyle=o,this.stack[this.cArrPos].strokeStyle=o)},CVContextData.prototype.lineWidth=function(o){this.stack[this.cArrPos].lineWidth!==o&&(this.currentLineWidth=o,this.stack[this.cArrPos].lineWidth=o)},CVContextData.prototype.lineCap=function(o){this.stack[this.cArrPos].lineCap!==o&&(this.currentLineCap=o,this.stack[this.cArrPos].lineCap=o)},CVContextData.prototype.lineJoin=function(o){this.stack[this.cArrPos].lineJoin!==o&&(this.currentLineJoin=o,this.stack[this.cArrPos].lineJoin=o)},CVContextData.prototype.miterLimit=function(o){this.stack[this.cArrPos].miterLimit!==o&&(this.currentMiterLimit=o,this.stack[this.cArrPos].miterLimit=o)},CVContextData.prototype.transform=function(o){this.transformMat.cloneFromProps(o);var r=this.cTr;this.transformMat.multiply(r),r.cloneFromProps(this.transformMat.props);var S=r.props;this.nativeContext.setTransform(S[0],S[1],S[4],S[5],S[12],S[13])},CVContextData.prototype.opacity=function(o){var r=this.stack[this.cArrPos].opacity;r*=o<0?0:o,this.stack[this.cArrPos].opacity!==r&&(this.currentOpacity!==o&&(this.nativeContext.globalAlpha=o,this.currentOpacity=o),this.stack[this.cArrPos].opacity=r)},CVContextData.prototype.fill=function(o){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(o)},CVContextData.prototype.fillRect=function(o,r,S,E){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(o,r,S,E)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(o,r,S){this.completeLayers=!1,this.layers=o.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(o,r,S),this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var o=this.canvasContext;o.beginPath(),o.moveTo(0,0),o.lineTo(this.data.w,0),o.lineTo(this.data.w,this.data.h),o.lineTo(0,this.data.h),o.lineTo(0,0),o.clip();var r,S=this.layers.length;for(r=S-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},CVCompElement.prototype.destroy=function(){var o,r=this.layers.length;for(o=r-1;o>=0;o-=1)this.elements[o]&&this.elements[o].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(o){return new CVCompElement(o,this.globalData,this)};function CanvasRenderer(o,r){this.animationItem=o,this.renderConfig={clearCanvas:r&&r.clearCanvas!==void 0?r.clearCanvas:!0,context:r&&r.context||null,progressiveLoad:r&&r.progressiveLoad||!1,preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",className:r&&r.className||"",id:r&&r.id||"",runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.renderConfig.dpr=r&&r.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=r&&r.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(o){return new CVCompElement(o,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var r=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var S=this.finalTransform.mat.toCSS();r.transform=S,r.webkitTransform=S}this.finalTransform._opMdf&&(r.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(o,r,S){this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var o;this.data.hasMask?(o=createNS("rect"),o.setAttribute("width",this.data.sw),o.setAttribute("height",this.data.sh),o.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(o=createTag("div"),o.style.width=this.data.sw+"px",o.style.height=this.data.sh+"px",o.style.backgroundColor=this.data.sc),this.layerElement.appendChild(o)};function HShapeElement(o,r,S){this.shapes=[],this.shapesData=o.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(o,r,S),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var o;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),o=this.svgElement;else{o=createNS("svg");var r=this.comp.data?this.comp.data:this.globalData.compSize;o.setAttribute("width",r.w),o.setAttribute("height",r.h),o.appendChild(this.shapesContainer),this.layerElement.appendChild(o)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=o},HShapeElement.prototype.getTransformedPoint=function(o,r){var S,E=o.length;for(S=0;S<E;S+=1)r=o[S].mProps.v.applyToPointArray(r[0],r[1],0);return r},HShapeElement.prototype.calculateShapeBoundingBox=function(o,r){var S=o.sh.v,E=o.transformers,x,C=S._length,R,Ce,Ue,je;if(!(C<=1)){for(x=0;x<C-1;x+=1)R=this.getTransformedPoint(E,S.v[x]),Ce=this.getTransformedPoint(E,S.o[x]),Ue=this.getTransformedPoint(E,S.i[x+1]),je=this.getTransformedPoint(E,S.v[x+1]),this.checkBounds(R,Ce,Ue,je,r);S.c&&(R=this.getTransformedPoint(E,S.v[x]),Ce=this.getTransformedPoint(E,S.o[x]),Ue=this.getTransformedPoint(E,S.i[0]),je=this.getTransformedPoint(E,S.v[0]),this.checkBounds(R,Ce,Ue,je,r))}},HShapeElement.prototype.checkBounds=function(o,r,S,E,x){this.getBoundsOfCurve(o,r,S,E);var C=this.shapeBoundingBox;x.x=bmMin(C.left,x.x),x.xMax=bmMax(C.right,x.xMax),x.y=bmMin(C.top,x.y),x.yMax=bmMax(C.bottom,x.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(o,r,S,E){for(var x=[[o[0],E[0]],[o[1],E[1]]],C,R,Ce,Ue,je,Xe,Ye,St=0;St<2;++St)R=6*o[St]-12*r[St]+6*S[St],C=-3*o[St]+9*r[St]-9*S[St]+3*E[St],Ce=3*r[St]-3*o[St],R|=0,C|=0,Ce|=0,C===0&&R===0||(C===0?(Ue=-Ce/R,Ue>0&&Ue<1&&x[St].push(this.calculateF(Ue,o,r,S,E,St))):(je=R*R-4*Ce*C,je>=0&&(Xe=(-R+bmSqrt(je))/(2*C),Xe>0&&Xe<1&&x[St].push(this.calculateF(Xe,o,r,S,E,St)),Ye=(-R-bmSqrt(je))/(2*C),Ye>0&&Ye<1&&x[St].push(this.calculateF(Ye,o,r,S,E,St)))));this.shapeBoundingBox.left=bmMin.apply(null,x[0]),this.shapeBoundingBox.top=bmMin.apply(null,x[1]),this.shapeBoundingBox.right=bmMax.apply(null,x[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,x[1])},HShapeElement.prototype.calculateF=function(o,r,S,E,x,C){return bmPow(1-o,3)*r[C]+3*bmPow(1-o,2)*o*S[C]+3*(1-o)*bmPow(o,2)*E[C]+bmPow(o,3)*x[C]},HShapeElement.prototype.calculateBoundingBox=function(o,r){var S,E=o.length;for(S=0;S<E;S+=1)o[S]&&o[S].sh?this.calculateShapeBoundingBox(o[S],r):o[S]&&o[S].it?this.calculateBoundingBox(o[S].it,r):o[S]&&o[S].style&&o[S].w&&this.expandStrokeBoundingBox(o[S].w,r)},HShapeElement.prototype.expandStrokeBoundingBox=function(o,r){var S=0;if(o.keyframes){for(var E=0;E<o.keyframes.length;E+=1){var x=o.keyframes[E].s;x>S&&(S=x)}S*=o.mult}else S=o.v*o.mult;r.x-=S,r.xMax+=S,r.y-=S,r.yMax+=S},HShapeElement.prototype.currentBoxContains=function(o){return this.currentBBox.x<=o.x&&this.currentBBox.y<=o.y&&this.currentBBox.width+this.currentBBox.x>=o.x+o.width&&this.currentBBox.height+this.currentBBox.y>=o.y+o.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var o=this.tempBoundingBox,r=999999;if(o.x=r,o.xMax=-r,o.y=r,o.yMax=-r,this.calculateBoundingBox(this.itemsData,o),o.width=o.xMax<o.x?0:o.xMax-o.x,o.height=o.yMax<o.y?0:o.yMax-o.y,this.currentBoxContains(o))return;var S=!1;if(this.currentBBox.w!==o.width&&(this.currentBBox.w=o.width,this.shapeCont.setAttribute("width",o.width),S=!0),this.currentBBox.h!==o.height&&(this.currentBBox.h=o.height,this.shapeCont.setAttribute("height",o.height),S=!0),S||this.currentBBox.x!==o.x||this.currentBBox.y!==o.y){this.currentBBox.w=o.width,this.currentBBox.h=o.height,this.currentBBox.x=o.x,this.currentBBox.y=o.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var E=this.shapeCont.style,x="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";E.transform=x,E.webkitTransform=x}}};function HTextElement(o,r,S){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var o=createNS("g");this.maskedElement.appendChild(o),this.innerElem=o}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var o=this.textProperty.currentData;this.renderedLetters=createSizedArray(o.l?o.l.length:0);var r=this.innerElem.style,S=o.fc?this.buildColor(o.fc):"rgba(0,0,0,0)";r.fill=S,r.color=S,o.sc&&(r.stroke=this.buildColor(o.sc),r.strokeWidth=o.sw+"px");var E=this.globalData.fontManager.getFontByName(o.f);if(!this.globalData.fontManager.chars)if(r.fontSize=o.finalSize+"px",r.lineHeight=o.finalSize+"px",E.fClass)this.innerElem.className=E.fClass;else{r.fontFamily=E.fFamily;var x=o.fWeight,C=o.fStyle;r.fontStyle=C,r.fontWeight=x}var R,Ce,Ue=o.l;Ce=Ue.length;var je,Xe,Ye,St=this.mHelper,Dt,kt="",et=0;for(R=0;R<Ce;R+=1){if(this.globalData.fontManager.chars?(this.textPaths[et]?je=this.textPaths[et]:(je=createNS("path"),je.setAttribute("stroke-linecap",lineCapEnum[1]),je.setAttribute("stroke-linejoin",lineJoinEnum[2]),je.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[et]?(Xe=this.textSpans[et],Ye=Xe.children[0]):(Xe=createTag("div"),Xe.style.lineHeight=0,Ye=createNS("svg"),Ye.appendChild(je),styleDiv(Xe)))):this.isMasked?je=this.textPaths[et]?this.textPaths[et]:createNS("text"):this.textSpans[et]?(Xe=this.textSpans[et],je=this.textPaths[et]):(Xe=createTag("span"),styleDiv(Xe),je=createTag("span"),styleDiv(je),Xe.appendChild(je)),this.globalData.fontManager.chars){var Ft=this.globalData.fontManager.getCharData(o.finalText[R],E.fStyle,this.globalData.fontManager.getFontByName(o.f).fFamily),xt;if(Ft?xt=Ft.data:xt=null,St.reset(),xt&&xt.shapes&&xt.shapes.length&&(Dt=xt.shapes[0].it,St.scale(o.finalSize/100,o.finalSize/100),kt=this.createPathShape(St,Dt),je.setAttribute("d",kt)),this.isMasked)this.innerElem.appendChild(je);else{if(this.innerElem.appendChild(Xe),xt&&xt.shapes){document.body.appendChild(Ye);var Mt=Ye.getBBox();Ye.setAttribute("width",Mt.width+2),Ye.setAttribute("height",Mt.height+2),Ye.setAttribute("viewBox",Mt.x-1+" "+(Mt.y-1)+" "+(Mt.width+2)+" "+(Mt.height+2));var Ot=Ye.style,Ut="translate("+(Mt.x-1)+"px,"+(Mt.y-1)+"px)";Ot.transform=Ut,Ot.webkitTransform=Ut,Ue[R].yOffset=Mt.y-1}else Ye.setAttribute("width",1),Ye.setAttribute("height",1);Xe.appendChild(Ye)}}else if(je.textContent=Ue[R].val,je.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(je);else{this.innerElem.appendChild(Xe);var Xt=je.style,ei="translate3d(0,"+-o.finalSize/1.2+"px,0)";Xt.transform=ei,Xt.webkitTransform=ei}this.isMasked?this.textSpans[et]=je:this.textSpans[et]=Xe,this.textSpans[et].style.display="block",this.textPaths[et]=je,et+=1}for(;et<this.textSpans.length;)this.textSpans[et].style.display="none",et+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var o;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),o=this.svgElement.style;var r="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";o.transform=r,o.webkitTransform=r}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var S,E,x=0,C=this.textAnimator.renderedLetters,R=this.textProperty.currentData.l;E=R.length;var Ce,Ue,je;for(S=0;S<E;S+=1)R[S].n?x+=1:(Ue=this.textSpans[S],je=this.textPaths[S],Ce=C[x],x+=1,Ce._mdf.m&&(this.isMasked?Ue.setAttribute("transform",Ce.m):(Ue.style.webkitTransform=Ce.m,Ue.style.transform=Ce.m)),Ue.style.opacity=Ce.o,Ce.sw&&Ce._mdf.sw&&je.setAttribute("stroke-width",Ce.sw),Ce.sc&&Ce._mdf.sc&&je.setAttribute("stroke",Ce.sc),Ce.fc&&Ce._mdf.fc&&(je.setAttribute("fill",Ce.fc),je.style.color=Ce.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Xe=this.innerElem.getBBox();this.currentBBox.w!==Xe.width&&(this.currentBBox.w=Xe.width,this.svgElement.setAttribute("width",Xe.width)),this.currentBBox.h!==Xe.height&&(this.currentBBox.h=Xe.height,this.svgElement.setAttribute("height",Xe.height));var Ye=1;if(this.currentBBox.w!==Xe.width+Ye*2||this.currentBBox.h!==Xe.height+Ye*2||this.currentBBox.x!==Xe.x-Ye||this.currentBBox.y!==Xe.y-Ye){this.currentBBox.w=Xe.width+Ye*2,this.currentBBox.h=Xe.height+Ye*2,this.currentBBox.x=Xe.x-Ye,this.currentBBox.y=Xe.y-Ye,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),o=this.svgElement.style;var St="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";o.transform=St,o.webkitTransform=St}}}};function HCameraElement(o,r,S){this.initFrame(),this.initBaseData(o,r,S),this.initHierarchy();var E=PropertyFactory.getProp;if(this.pe=E(this,o.pe,0,0,this),o.ks.p.s?(this.px=E(this,o.ks.p.x,1,0,this),this.py=E(this,o.ks.p.y,1,0,this),this.pz=E(this,o.ks.p.z,1,0,this)):this.p=E(this,o.ks.p,1,0,this),o.ks.a&&(this.a=E(this,o.ks.a,1,0,this)),o.ks.or.k.length&&o.ks.or.k[0].to){var x,C=o.ks.or.k.length;for(x=0;x<C;x+=1)o.ks.or.k[x].to=null,o.ks.or.k[x].ti=null}this.or=E(this,o.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=E(this,o.ks.rx,0,degToRads,this),this.ry=E(this,o.ks.ry,0,degToRads,this),this.rz=E(this,o.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var o,r=this.comp.threeDElements.length,S,E,x;for(o=0;o<r;o+=1)if(S=this.comp.threeDElements[o],S.type==="3d"){E=S.perspectiveElem.style,x=S.container.style;var C=this.pe.v+"px",R="0px 0px 0px",Ce="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";E.perspective=C,E.webkitPerspective=C,x.transformOrigin=R,x.mozTransformOrigin=R,x.webkitTransformOrigin=R,E.transform=Ce,E.webkitTransform=Ce}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var o=this._isFirstFrame,r,S;if(this.hierarchy)for(S=this.hierarchy.length,r=0;r<S;r+=1)o=this.hierarchy[r].finalTransform.mProp._mdf||o;if(o||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(S=this.hierarchy.length-1,r=S;r>=0;r-=1){var E=this.hierarchy[r].finalTransform.mProp;this.mat.translate(-E.p.v[0],-E.p.v[1],E.p.v[2]),this.mat.rotateX(-E.or.v[0]).rotateY(-E.or.v[1]).rotateZ(E.or.v[2]),this.mat.rotateX(-E.rx.v).rotateY(-E.ry.v).rotateZ(E.rz.v),this.mat.scale(1/E.s.v[0],1/E.s.v[1],1/E.s.v[2]),this.mat.translate(E.a.v[0],E.a.v[1],E.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var x;this.p?x=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:x=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var C=Math.sqrt(Math.pow(x[0],2)+Math.pow(x[1],2)+Math.pow(x[2],2)),R=[x[0]/C,x[1]/C,x[2]/C],Ce=Math.sqrt(R[2]*R[2]+R[0]*R[0]),Ue=Math.atan2(R[1],Ce),je=Math.atan2(R[0],-R[2]);this.mat.rotateY(je).rotateX(-Ue)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Xe=!this._prevMat.equals(this.mat);if((Xe||this.pe._mdf)&&this.comp.threeDElements){S=this.comp.threeDElements.length;var Ye,St,Dt;for(r=0;r<S;r+=1)if(Ye=this.comp.threeDElements[r],Ye.type==="3d"){if(Xe){var kt=this.mat.toCSS();Dt=Ye.container.style,Dt.transform=kt,Dt.webkitTransform=kt}this.pe._mdf&&(St=Ye.perspectiveElem.style,St.perspective=this.pe.v+"px",St.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(o){this.prepareProperties(o,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(o,r,S){this.assetData=r.getAssetData(o.refId),this.initElement(o,r,S)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var o=this.globalData.getAssetsPath(this.assetData),r=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",o),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(r),r.crossOrigin="anonymous",r.src=o,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(o,r){this.animationItem=o,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var o=this.pendingElements.pop();o.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(o,r){var S=o.getBaseElement();if(S){var E=this.layers[r];if(!E.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(S,r);else{for(var x=0,C,R,Ce;x<r;)this.elements[x]&&this.elements[x]!==!0&&this.elements[x].getBaseElement&&(R=this.elements[x],Ce=this.layers[x].ddd?this.getThreeDContainerByPos(x):R.getBaseElement(),C=Ce||C),x+=1;C?(!E.ddd||!this.supports3d)&&this.layerElement.insertBefore(S,C):(!E.ddd||!this.supports3d)&&this.layerElement.appendChild(S)}else this.addTo3dContainer(S,r)}},HybridRendererBase.prototype.createShape=function(o){return this.supports3d?new HShapeElement(o,this.globalData,this):new SVGShapeElement(o,this.globalData,this)},HybridRendererBase.prototype.createText=function(o){return this.supports3d?new HTextElement(o,this.globalData,this):new SVGTextLottieElement(o,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(o){return this.camera=new HCameraElement(o,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(o){return this.supports3d?new HImageElement(o,this.globalData,this):new IImageElement(o,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(o){return this.supports3d?new HSolidElement(o,this.globalData,this):new ISolidElement(o,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(o){for(var r=0,S=this.threeDElements.length;r<S;){if(this.threeDElements[r].startPos<=o&&this.threeDElements[r].endPos>=o)return this.threeDElements[r].perspectiveElem;r+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(o,r){var S=createTag("div"),E,x;styleDiv(S);var C=createTag("div");if(styleDiv(C),r==="3d"){E=S.style,E.width=this.globalData.compSize.w+"px",E.height=this.globalData.compSize.h+"px";var R="50% 50%";E.webkitTransformOrigin=R,E.mozTransformOrigin=R,E.transformOrigin=R,x=C.style;var Ce="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";x.transform=Ce,x.webkitTransform=Ce}S.appendChild(C);var Ue={container:C,perspectiveElem:S,startPos:o,endPos:o,type:r};return this.threeDElements.push(Ue),Ue},HybridRendererBase.prototype.build3dContainers=function(){var o,r=this.layers.length,S,E="";for(o=0;o<r;o+=1)this.layers[o].ddd&&this.layers[o].ty!==3?(E!=="3d"&&(E="3d",S=this.createThreeDContainer(o,"3d")),S.endPos=Math.max(S.endPos,o)):(E!=="2d"&&(E="2d",S=this.createThreeDContainer(o,"2d")),S.endPos=Math.max(S.endPos,o));for(r=this.threeDElements.length,o=r-1;o>=0;o-=1)this.resizerElem.appendChild(this.threeDElements[o].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(o,r){for(var S=0,E=this.threeDElements.length;S<E;){if(r<=this.threeDElements[S].endPos){for(var x=this.threeDElements[S].startPos,C;x<r;)this.elements[x]&&this.elements[x].getBaseElement&&(C=this.elements[x].getBaseElement()),x+=1;C?this.threeDElements[S].container.insertBefore(o,C):this.threeDElements[S].container.appendChild(o);break}S+=1}},HybridRendererBase.prototype.configAnimation=function(o){var r=createTag("div"),S=this.animationItem.wrapper,E=r.style;E.width=o.w+"px",E.height=o.h+"px",this.resizerElem=r,styleDiv(r),E.transformStyle="flat",E.mozTransformStyle="flat",E.webkitTransformStyle="flat",this.renderConfig.className&&r.setAttribute("class",this.renderConfig.className),S.appendChild(r),E.overflow="hidden";var x=createNS("svg");x.setAttribute("width","1"),x.setAttribute("height","1"),styleDiv(x),this.resizerElem.appendChild(x);var C=createNS("defs");x.appendChild(C),this.data=o,this.setupGlobalData(o,x),this.globalData.defs=C,this.layers=o.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var o,r=this.layers?this.layers.length:0;for(o=0;o<r;o+=1)this.elements[o]&&this.elements[o].destroy&&this.elements[o].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var o=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight,S=o/r,E=this.globalData.compSize.w/this.globalData.compSize.h,x,C,R,Ce;E>S?(x=o/this.globalData.compSize.w,C=o/this.globalData.compSize.w,R=0,Ce=(r-this.globalData.compSize.h*(o/this.globalData.compSize.w))/2):(x=r/this.globalData.compSize.h,C=r/this.globalData.compSize.h,R=(o-this.globalData.compSize.w*(r/this.globalData.compSize.h))/2,Ce=0);var Ue=this.resizerElem.style;Ue.webkitTransform="matrix3d("+x+",0,0,0,0,"+C+",0,0,0,0,1,0,"+R+","+Ce+",0,1)",Ue.transform=Ue.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var o=this.globalData.compSize.w,r=this.globalData.compSize.h,S,E=this.threeDElements.length;for(S=0;S<E;S+=1){var x=this.threeDElements[S].perspectiveElem.style;x.webkitPerspective=Math.sqrt(Math.pow(o,2)+Math.pow(r,2))+"px",x.perspective=x.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(o){var r,S=o.length,E=createTag("div");for(r=0;r<S;r+=1)if(o[r].xt){var x=this.createComp(o[r],E,this.globalData.comp,null);x.initExpressions(),this.globalData.projectInterface.registerComposition(x)}};function HCompElement(o,r,S){this.layers=o.layers,this.supports3d=!o.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(o,r,S),this.tm=o.tm?PropertyFactory.getProp(this,o.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(o,r){for(var S=0,E;S<r;)this.elements[S]&&this.elements[S].getBaseElement&&(E=this.elements[S].getBaseElement()),S+=1;E?this.layerElement.insertBefore(o,E):this.layerElement.appendChild(o)},HCompElement.prototype.createComp=function(o){return this.supports3d?new HCompElement(o,this.globalData,this):new SVGCompElement(o,this.globalData,this)};function HybridRenderer(o,r){this.animationItem=o,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"},runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(o){return this.supports3d?new HCompElement(o,this.globalData,this):new SVGCompElement(o,this.globalData,this)};var CompExpressionInterface=function(){return function(o){function r(S){for(var E=0,x=o.layers.length;E<x;){if(o.layers[E].nm===S||o.layers[E].ind===S)return o.elements[E].layerInterface;E+=1}return null}return Object.defineProperty(r,"_name",{value:o.data.nm}),r.layer=r,r.pixelAspect=1,r.height=o.data.h||o.globalData.compSize.h,r.width=o.data.w||o.globalData.compSize.w,r.pixelAspect=1,r.frameDuration=1/o.globalData.frameRate,r.displayStartTime=0,r.numLayers=o.layers.length,r}}();function _typeof$2(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(S){return typeof S}:_typeof$2=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$2(o)}function seedRandom(o,r){var S=this,E=256,x=6,C=52,R="random",Ce=r.pow(E,x),Ue=r.pow(2,C),je=Ue*2,Xe=E-1,Ye;function St(Ot,Ut,Xt){var ei=[];Ut=Ut===!0?{entropy:!0}:Ut||{};var si=Ft(et(Ut.entropy?[Ot,Mt(o)]:Ot===null?xt():Ot,3),ei),li=new Dt(ei),bi=function(){for(var Pi=li.g(x),Ci=Ce,Di=0;Pi<Ue;)Pi=(Pi+Di)*E,Ci*=E,Di=li.g(1);for(;Pi>=je;)Pi/=2,Ci/=2,Di>>>=1;return(Pi+Di)/Ci};return bi.int32=function(){return li.g(4)|0},bi.quick=function(){return li.g(4)/4294967296},bi.double=bi,Ft(Mt(li.S),o),(Ut.pass||Xt||function(wi,Pi,Ci,Di){return Di&&(Di.S&&kt(Di,li),wi.state=function(){return kt(li,{})}),Ci?(r[R]=wi,Pi):wi})(bi,si,"global"in Ut?Ut.global:this==r,Ut.state)}r["seed"+R]=St;function Dt(Ot){var Ut,Xt=Ot.length,ei=this,si=0,li=ei.i=ei.j=0,bi=ei.S=[];for(Xt||(Ot=[Xt++]);si<E;)bi[si]=si++;for(si=0;si<E;si++)bi[si]=bi[li=Xe&li+Ot[si%Xt]+(Ut=bi[si])],bi[li]=Ut;ei.g=function(wi){for(var Pi,Ci=0,Di=ei.i,Bi=ei.j,Ri=ei.S;wi--;)Pi=Ri[Di=Xe&Di+1],Ci=Ci*E+Ri[Xe&(Ri[Di]=Ri[Bi=Xe&Bi+Pi])+(Ri[Bi]=Pi)];return ei.i=Di,ei.j=Bi,Ci}}function kt(Ot,Ut){return Ut.i=Ot.i,Ut.j=Ot.j,Ut.S=Ot.S.slice(),Ut}function et(Ot,Ut){var Xt=[],ei=_typeof$2(Ot),si;if(Ut&&ei=="object")for(si in Ot)try{Xt.push(et(Ot[si],Ut-1))}catch{}return Xt.length?Xt:ei=="string"?Ot:Ot+"\0"}function Ft(Ot,Ut){for(var Xt=Ot+"",ei,si=0;si<Xt.length;)Ut[Xe&si]=Xe&(ei^=Ut[Xe&si]*19)+Xt.charCodeAt(si++);return Mt(Ut)}function xt(){try{var Ot=new Uint8Array(E);return(S.crypto||S.msCrypto).getRandomValues(Ot),Mt(Ot)}catch{var Ut=S.navigator,Xt=Ut&&Ut.plugins;return[+new Date,S,Xt,S.screen,Mt(o)]}}function Mt(Ot){return String.fromCharCode.apply(0,Ot)}Ft(r.random(),o)}function initialize$2(o){seedRandom([],o)}var propTypes={SHAPE:"shape"};function _typeof$1(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(S){return typeof S}:_typeof$1=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof$1(o)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(o){return o.constructor===Array||o.constructor===Float32Array}function isNumerable(o,r){return o==="number"||r instanceof Number||o==="boolean"||o==="string"}function $bm_neg(o){var r=_typeof$1(o);if(r==="number"||o instanceof Number||r==="boolean")return-o;if($bm_isInstanceOfArray(o)){var S,E=o.length,x=[];for(S=0;S<E;S+=1)x[S]=-o[S];return x}return o.propType?o.v:-o}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(o,r){var S=_typeof$1(o),E=_typeof$1(r);if(isNumerable(S,o)&&isNumerable(E,r)||S==="string"||E==="string")return o+r;if($bm_isInstanceOfArray(o)&&isNumerable(E,r))return o=o.slice(0),o[0]+=r,o;if(isNumerable(S,o)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=o+r[0],r;if($bm_isInstanceOfArray(o)&&$bm_isInstanceOfArray(r)){for(var x=0,C=o.length,R=r.length,Ce=[];x<C||x<R;)(typeof o[x]=="number"||o[x]instanceof Number)&&(typeof r[x]=="number"||r[x]instanceof Number)?Ce[x]=o[x]+r[x]:Ce[x]=r[x]===void 0?o[x]:o[x]||r[x],x+=1;return Ce}return 0}var add=sum;function sub(o,r){var S=_typeof$1(o),E=_typeof$1(r);if(isNumerable(S,o)&&isNumerable(E,r))return S==="string"&&(o=parseInt(o,10)),E==="string"&&(r=parseInt(r,10)),o-r;if($bm_isInstanceOfArray(o)&&isNumerable(E,r))return o=o.slice(0),o[0]-=r,o;if(isNumerable(S,o)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=o-r[0],r;if($bm_isInstanceOfArray(o)&&$bm_isInstanceOfArray(r)){for(var x=0,C=o.length,R=r.length,Ce=[];x<C||x<R;)(typeof o[x]=="number"||o[x]instanceof Number)&&(typeof r[x]=="number"||r[x]instanceof Number)?Ce[x]=o[x]-r[x]:Ce[x]=r[x]===void 0?o[x]:o[x]||r[x],x+=1;return Ce}return 0}function mul(o,r){var S=_typeof$1(o),E=_typeof$1(r),x;if(isNumerable(S,o)&&isNumerable(E,r))return o*r;var C,R;if($bm_isInstanceOfArray(o)&&isNumerable(E,r)){for(R=o.length,x=createTypedArray("float32",R),C=0;C<R;C+=1)x[C]=o[C]*r;return x}if(isNumerable(S,o)&&$bm_isInstanceOfArray(r)){for(R=r.length,x=createTypedArray("float32",R),C=0;C<R;C+=1)x[C]=o*r[C];return x}return 0}function div(o,r){var S=_typeof$1(o),E=_typeof$1(r),x;if(isNumerable(S,o)&&isNumerable(E,r))return o/r;var C,R;if($bm_isInstanceOfArray(o)&&isNumerable(E,r)){for(R=o.length,x=createTypedArray("float32",R),C=0;C<R;C+=1)x[C]=o[C]/r;return x}if(isNumerable(S,o)&&$bm_isInstanceOfArray(r)){for(R=r.length,x=createTypedArray("float32",R),C=0;C<R;C+=1)x[C]=o/r[C];return x}return 0}function mod(o,r){return typeof o=="string"&&(o=parseInt(o,10)),typeof r=="string"&&(r=parseInt(r,10)),o%r}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(o,r,S){if(r>S){var E=S;S=r,r=E}return Math.min(Math.max(o,r),S)}function radiansToDegrees(o){return o/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(o){return o*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(o,r){if(typeof o=="number"||o instanceof Number)return r=r||0,Math.abs(o-r);r||(r=helperLengthArray);var S,E=Math.min(o.length,r.length),x=0;for(S=0;S<E;S+=1)x+=Math.pow(r[S]-o[S],2);return Math.sqrt(x)}function normalize(o){return div(o,length(o))}function rgbToHsl(o){var r=o[0],S=o[1],E=o[2],x=Math.max(r,S,E),C=Math.min(r,S,E),R,Ce,Ue=(x+C)/2;if(x===C)R=0,Ce=0;else{var je=x-C;switch(Ce=Ue>.5?je/(2-x-C):je/(x+C),x){case r:R=(S-E)/je+(S<E?6:0);break;case S:R=(E-r)/je+2;break;case E:R=(r-S)/je+4;break}R/=6}return[R,Ce,Ue,o[3]]}function hue2rgb(o,r,S){return S<0&&(S+=1),S>1&&(S-=1),S<1/6?o+(r-o)*6*S:S<1/2?r:S<2/3?o+(r-o)*(2/3-S)*6:o}function hslToRgb(o){var r=o[0],S=o[1],E=o[2],x,C,R;if(S===0)x=E,R=E,C=E;else{var Ce=E<.5?E*(1+S):E+S-E*S,Ue=2*E-Ce;x=hue2rgb(Ue,Ce,r+1/3),C=hue2rgb(Ue,Ce,r),R=hue2rgb(Ue,Ce,r-1/3)}return[x,C,R,o[3]]}function linear(o,r,S,E,x){if((E===void 0||x===void 0)&&(E=r,x=S,r=0,S=1),S<r){var C=S;S=r,r=C}if(o<=r)return E;if(o>=S)return x;var R=S===r?0:(o-r)/(S-r);if(!E.length)return E+(x-E)*R;var Ce,Ue=E.length,je=createTypedArray("float32",Ue);for(Ce=0;Ce<Ue;Ce+=1)je[Ce]=E[Ce]+(x[Ce]-E[Ce])*R;return je}function random(o,r){if(r===void 0&&(o===void 0?(o=0,r=1):(r=o,o=void 0)),r.length){var S,E=r.length;o||(o=createTypedArray("float32",E));var x=createTypedArray("float32",E),C=BMMath.random();for(S=0;S<E;S+=1)x[S]=o[S]+C*(r[S]-o[S]);return x}o===void 0&&(o=0);var R=BMMath.random();return o+R*(r-o)}function createPath(o,r,S,E){var x,C=o.length,R=shapePool.newElement();R.setPathData(!!E,C);var Ce=[0,0],Ue,je;for(x=0;x<C;x+=1)Ue=r&&r[x]?r[x]:Ce,je=S&&S[x]?S[x]:Ce,R.setTripleAt(o[x][0],o[x][1],je[0]+o[x][0],je[1]+o[x][1],Ue[0]+o[x][0],Ue[1]+o[x][1],x,!0);return R}function initiateExpression(elem,data,property){function noOp(o){return o}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function o(r,S){var E,x,C=this.pv.length?this.pv.length:1,R=createTypedArray("float32",C);r=5;var Ce=Math.floor(time*r);for(E=0,x=0;E<Ce;){for(x=0;x<C;x+=1)R[x]+=-S+S*2*BMMath.random();E+=1}var Ue=time*r,je=Ue-Math.floor(Ue),Xe=createTypedArray("float32",C);if(C>1){for(x=0;x<C;x+=1)Xe[x]=this.pv[x]+R[x]+(-S+S*2*BMMath.random())*je;return Xe}return this.pv+R[0]+(-S+S*2*BMMath.random())*je}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(o,r){return loopIn(o,r,!0)}function loopOutDuration(o,r){return loopOut(o,r,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(o,r){var S=[r[0]-o[0],r[1]-o[1],r[2]-o[2]],E=Math.atan2(S[0],Math.sqrt(S[1]*S[1]+S[2]*S[2]))/degToRads,x=-Math.atan2(S[1],S[2])/degToRads;return[x,E,0]}function easeOut(o,r,S,E,x){return applyEase(easeOutBez,o,r,S,E,x)}function easeIn(o,r,S,E,x){return applyEase(easeInBez,o,r,S,E,x)}function ease(o,r,S,E,x){return applyEase(easeInOutBez,o,r,S,E,x)}function applyEase(o,r,S,E,x,C){x===void 0?(x=S,C=E):r=(r-S)/(E-S),r>1?r=1:r<0&&(r=0);var R=o(r);if($bm_isInstanceOfArray(x)){var Ce,Ue=x.length,je=createTypedArray("float32",Ue);for(Ce=0;Ce<Ue;Ce+=1)je[Ce]=(C[Ce]-x[Ce])*R+x[Ce];return je}return(C-x)*R+x}function nearestKey(o){var r,S=data.k.length,E,x;if(!data.k.length||typeof data.k[0]=="number")E=0,x=0;else if(E=-1,o*=elem.comp.globalData.frameRate,o<data.k[0].t)E=1,x=data.k[0].t;else{for(r=0;r<S-1;r+=1)if(o===data.k[r].t){E=r+1,x=data.k[r].t;break}else if(o>data.k[r].t&&o<data.k[r+1].t){o-data.k[r].t>data.k[r+1].t-o?(E=r+2,x=data.k[r+1].t):(E=r+1,x=data.k[r].t);break}E===-1&&(E=r+1,x=data.k[r].t)}var C={};return C.index=E,C.time=x/elem.comp.globalData.frameRate,C}function key(o){var r,S,E;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+o);o-=1,r={time:data.k[o].t/elem.comp.globalData.frameRate,value:[]};var x=Object.prototype.hasOwnProperty.call(data.k[o],"s")?data.k[o].s:data.k[o-1].e;for(E=x.length,S=0;S<E;S+=1)r[S]=x[S],r.value[S]=x[S];return r}function framesToTime(o,r){return r||(r=elem.comp.globalData.frameRate),o/r}function timeToFrames(o,r){return!o&&o!==0&&(o=time),r||(r=elem.comp.globalData.frameRate),o*r}function seedRandom(o){BMMath.seedrandom(randSeed+o)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(o,r){return typeof value=="string"?r===void 0?value.substring(o):value.substring(o,r):""}function substr(o,r){return typeof value=="string"?r===void 0?value.substr(o):value.substr(o,r):""}function posterizeTime(o){time=o===0?0:Math.floor(time*o)/o,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(o){return value=o,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var o={};o.initExpressions=r,o.resetFrame=ExpressionManager.resetFrame;function r(S){var E=0,x=[];function C(){E+=1}function R(){E-=1,E===0&&Ue()}function Ce(je){x.indexOf(je)===-1&&x.push(je)}function Ue(){var je,Xe=x.length;for(je=0;je<Xe;je+=1)x[je].release();x.length=0}S.renderer.compInterface=CompExpressionInterface(S.renderer),S.renderer.globalData.projectInterface.registerComposition(S.renderer),S.renderer.globalData.pushExpression=C,S.renderer.globalData.popExpression=R,S.renderer.globalData.registerExpressionProperty=Ce}return o}(),MaskManagerInterface=function(){function o(S,E){this._mask=S,this._data=E}Object.defineProperty(o.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(o.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var r=function(E){var x=createSizedArray(E.viewData.length),C,R=E.viewData.length;for(C=0;C<R;C+=1)x[C]=new o(E.viewData[C],E.masksProperties[C]);var Ce=function(je){for(C=0;C<R;){if(E.masksProperties[C].nm===je)return x[C];C+=1}return null};return Ce};return r}(),ExpressionPropertyInterface=function(){var o={pv:0,v:0,mult:1},r={pv:[0,0,0],v:[0,0,0],mult:1};function S(R,Ce,Ue){Object.defineProperty(R,"velocity",{get:function(){return Ce.getVelocityAtTime(Ce.comp.currentFrame)}}),R.numKeys=Ce.keyframes?Ce.keyframes.length:0,R.key=function(je){if(!R.numKeys)return 0;var Xe="";"s"in Ce.keyframes[je-1]?Xe=Ce.keyframes[je-1].s:"e"in Ce.keyframes[je-2]?Xe=Ce.keyframes[je-2].e:Xe=Ce.keyframes[je-2].s;var Ye=Ue==="unidimensional"?new Number(Xe):Object.assign({},Xe);return Ye.time=Ce.keyframes[je-1].t/Ce.elem.comp.globalData.frameRate,Ye.value=Ue==="unidimensional"?Xe[0]:Xe,Ye},R.valueAtTime=Ce.getValueAtTime,R.speedAtTime=Ce.getSpeedAtTime,R.velocityAtTime=Ce.getVelocityAtTime,R.propertyGroup=Ce.propertyGroup}function E(R){(!R||!("pv"in R))&&(R=o);var Ce=1/R.mult,Ue=R.pv*Ce,je=new Number(Ue);return je.value=Ue,S(je,R,"unidimensional"),function(){return R.k&&R.getValue(),Ue=R.v*Ce,je.value!==Ue&&(je=new Number(Ue),je.value=Ue,S(je,R,"unidimensional")),je}}function x(R){(!R||!("pv"in R))&&(R=r);var Ce=1/R.mult,Ue=R.data&&R.data.l||R.pv.length,je=createTypedArray("float32",Ue),Xe=createTypedArray("float32",Ue);return je.value=Xe,S(je,R,"multidimensional"),function(){R.k&&R.getValue();for(var Ye=0;Ye<Ue;Ye+=1)Xe[Ye]=R.v[Ye]*Ce,je[Ye]=Xe[Ye];return je}}function C(){return o}return function(R){return R?R.propType==="unidimensional"?E(R):x(R):C}}(),TransformExpressionInterface=function(){return function(o){function r(R){switch(R){case"scale":case"Scale":case"ADBE Scale":case 6:return r.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return r.rotation;case"ADBE Rotate X":return r.xRotation;case"ADBE Rotate Y":return r.yRotation;case"position":case"Position":case"ADBE Position":case 2:return r.position;case"ADBE Position_0":return r.xPosition;case"ADBE Position_1":return r.yPosition;case"ADBE Position_2":return r.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return r.anchorPoint;case"opacity":case"Opacity":case 11:return r.opacity;default:return null}}Object.defineProperty(r,"rotation",{get:ExpressionPropertyInterface(o.r||o.rz)}),Object.defineProperty(r,"zRotation",{get:ExpressionPropertyInterface(o.rz||o.r)}),Object.defineProperty(r,"xRotation",{get:ExpressionPropertyInterface(o.rx)}),Object.defineProperty(r,"yRotation",{get:ExpressionPropertyInterface(o.ry)}),Object.defineProperty(r,"scale",{get:ExpressionPropertyInterface(o.s)});var S,E,x,C;return o.p?C=ExpressionPropertyInterface(o.p):(S=ExpressionPropertyInterface(o.px),E=ExpressionPropertyInterface(o.py),o.pz&&(x=ExpressionPropertyInterface(o.pz))),Object.defineProperty(r,"position",{get:function(){return o.p?C():[S(),E(),x?x():0]}}),Object.defineProperty(r,"xPosition",{get:ExpressionPropertyInterface(o.px)}),Object.defineProperty(r,"yPosition",{get:ExpressionPropertyInterface(o.py)}),Object.defineProperty(r,"zPosition",{get:ExpressionPropertyInterface(o.pz)}),Object.defineProperty(r,"anchorPoint",{get:ExpressionPropertyInterface(o.a)}),Object.defineProperty(r,"opacity",{get:ExpressionPropertyInterface(o.o)}),Object.defineProperty(r,"skew",{get:ExpressionPropertyInterface(o.sk)}),Object.defineProperty(r,"skewAxis",{get:ExpressionPropertyInterface(o.sa)}),Object.defineProperty(r,"orientation",{get:ExpressionPropertyInterface(o.or)}),r}}(),LayerExpressionInterface=function(){function o(je){var Xe=new Matrix;if(je!==void 0){var Ye=this._elem.finalTransform.mProp.getValueAtTime(je);Ye.clone(Xe)}else{var St=this._elem.finalTransform.mProp;St.applyToMatrix(Xe)}return Xe}function r(je,Xe){var Ye=this.getMatrix(Xe);return Ye.props[12]=0,Ye.props[13]=0,Ye.props[14]=0,this.applyPoint(Ye,je)}function S(je,Xe){var Ye=this.getMatrix(Xe);return this.applyPoint(Ye,je)}function E(je,Xe){var Ye=this.getMatrix(Xe);return Ye.props[12]=0,Ye.props[13]=0,Ye.props[14]=0,this.invertPoint(Ye,je)}function x(je,Xe){var Ye=this.getMatrix(Xe);return this.invertPoint(Ye,je)}function C(je,Xe){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Ye,St=this._elem.hierarchy.length;for(Ye=0;Ye<St;Ye+=1)this._elem.hierarchy[Ye].finalTransform.mProp.applyToMatrix(je)}return je.applyToPointArray(Xe[0],Xe[1],Xe[2]||0)}function R(je,Xe){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Ye,St=this._elem.hierarchy.length;for(Ye=0;Ye<St;Ye+=1)this._elem.hierarchy[Ye].finalTransform.mProp.applyToMatrix(je)}return je.inversePoint(Xe)}function Ce(je){var Xe=new Matrix;if(Xe.reset(),this._elem.finalTransform.mProp.applyToMatrix(Xe),this._elem.hierarchy&&this._elem.hierarchy.length){var Ye,St=this._elem.hierarchy.length;for(Ye=0;Ye<St;Ye+=1)this._elem.hierarchy[Ye].finalTransform.mProp.applyToMatrix(Xe);return Xe.inversePoint(je)}return Xe.inversePoint(je)}function Ue(){return[1,1,1,1]}return function(je){var Xe;function Ye(et){Dt.mask=new MaskManagerInterface(et,je)}function St(et){Dt.effect=et}function Dt(et){switch(et){case"ADBE Root Vectors Group":case"Contents":case 2:return Dt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Xe;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Dt.effect;case"ADBE Text Properties":return Dt.textInterface;default:return null}}Dt.getMatrix=o,Dt.invertPoint=R,Dt.applyPoint=C,Dt.toWorld=S,Dt.toWorldVec=r,Dt.fromWorld=x,Dt.fromWorldVec=E,Dt.toComp=S,Dt.fromComp=Ce,Dt.sampleImage=Ue,Dt.sourceRectAtTime=je.sourceRectAtTime.bind(je),Dt._elem=je,Xe=TransformExpressionInterface(je.finalTransform.mProp);var kt=getDescriptor(Xe,"anchorPoint");return Object.defineProperties(Dt,{hasParent:{get:function(){return je.hierarchy.length}},parent:{get:function(){return je.hierarchy[0].layerInterface}},rotation:getDescriptor(Xe,"rotation"),scale:getDescriptor(Xe,"scale"),position:getDescriptor(Xe,"position"),opacity:getDescriptor(Xe,"opacity"),anchorPoint:kt,anchor_point:kt,transform:{get:function(){return Xe}},active:{get:function(){return je.isInRange}}}),Dt.startTime=je.data.st,Dt.index=je.data.ind,Dt.source=je.data.refId,Dt.height=je.data.ty===0?je.data.h:100,Dt.width=je.data.ty===0?je.data.w:100,Dt.inPoint=je.data.ip/je.comp.globalData.frameRate,Dt.outPoint=je.data.op/je.comp.globalData.frameRate,Dt._name=je.data.nm,Dt.registerMaskInterface=Ye,Dt.registerEffectsInterface=St,Dt}}(),propertyGroupFactory=function(){return function(o,r){return function(S){return S=S===void 0?1:S,S<=0?o:r(S-1)}}}(),PropertyInterface=function(){return function(o,r){var S={_name:o};function E(x){return x=x===void 0?1:x,x<=0?S:r(x-1)}return E}}(),EffectsExpressionInterface=function(){var o={createEffectsInterface:r};function r(x,C){if(x.effectsManager){var R=[],Ce=x.data.ef,Ue,je=x.effectsManager.effectElements.length;for(Ue=0;Ue<je;Ue+=1)R.push(S(Ce[Ue],x.effectsManager.effectElements[Ue],C,x));var Xe=x.data.ef||[],Ye=function(Dt){for(Ue=0,je=Xe.length;Ue<je;){if(Dt===Xe[Ue].nm||Dt===Xe[Ue].mn||Dt===Xe[Ue].ix)return R[Ue];Ue+=1}return null};return Object.defineProperty(Ye,"numProperties",{get:function(){return Xe.length}}),Ye}return null}function S(x,C,R,Ce){function Ue(Dt){for(var kt=x.ef,et=0,Ft=kt.length;et<Ft;){if(Dt===kt[et].nm||Dt===kt[et].mn||Dt===kt[et].ix)return kt[et].ty===5?Xe[et]:Xe[et]();et+=1}throw new Error}var je=propertyGroupFactory(Ue,R),Xe=[],Ye,St=x.ef.length;for(Ye=0;Ye<St;Ye+=1)x.ef[Ye].ty===5?Xe.push(S(x.ef[Ye],C.effectElements[Ye],C.effectElements[Ye].propertyGroup,Ce)):Xe.push(E(C.effectElements[Ye],x.ef[Ye].ty,Ce,je));return x.mn==="ADBE Color Control"&&Object.defineProperty(Ue,"color",{get:function(){return Xe[0]()}}),Object.defineProperties(Ue,{numProperties:{get:function(){return x.np}},_name:{value:x.nm},propertyGroup:{value:je}}),Ue.enabled=x.en!==0,Ue.active=Ue.enabled,Ue}function E(x,C,R,Ce){var Ue=ExpressionPropertyInterface(x.p);function je(){return C===10?R.comp.compInterface(x.p.v):Ue()}return x.p.setGroupProperty&&x.p.setGroupProperty(PropertyInterface("",Ce)),je}return o}(),ShapePathInterface=function(){return function(r,S,E){var x=S.sh;function C(Ce){return Ce==="Shape"||Ce==="shape"||Ce==="Path"||Ce==="path"||Ce==="ADBE Vector Shape"||Ce===2?C.path:null}var R=propertyGroupFactory(C,E);return x.setGroupProperty(PropertyInterface("Path",R)),Object.defineProperties(C,{path:{get:function(){return x.k&&x.getValue(),x}},shape:{get:function(){return x.k&&x.getValue(),x}},_name:{value:r.nm},ix:{value:r.ix},propertyIndex:{value:r.ix},mn:{value:r.mn},propertyGroup:{value:E}}),C}}(),ShapeExpressionInterface=function(){function o(kt,et,Ft){var xt=[],Mt,Ot=kt?kt.length:0;for(Mt=0;Mt<Ot;Mt+=1)kt[Mt].ty==="gr"?xt.push(S(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="fl"?xt.push(E(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="st"?xt.push(R(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="tm"?xt.push(Ce(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="tr"||(kt[Mt].ty==="el"?xt.push(je(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="sr"?xt.push(Xe(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="sh"?xt.push(ShapePathInterface(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="rc"?xt.push(Ye(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="rd"?xt.push(St(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="rp"?xt.push(Dt(kt[Mt],et[Mt],Ft)):kt[Mt].ty==="gf"?xt.push(x(kt[Mt],et[Mt],Ft)):xt.push(C(kt[Mt],et[Mt])));return xt}function r(kt,et,Ft){var xt,Mt=function(Xt){for(var ei=0,si=xt.length;ei<si;){if(xt[ei]._name===Xt||xt[ei].mn===Xt||xt[ei].propertyIndex===Xt||xt[ei].ix===Xt||xt[ei].ind===Xt)return xt[ei];ei+=1}return typeof Xt=="number"?xt[Xt-1]:null};Mt.propertyGroup=propertyGroupFactory(Mt,Ft),xt=o(kt.it,et.it,Mt.propertyGroup),Mt.numProperties=xt.length;var Ot=Ue(kt.it[kt.it.length-1],et.it[et.it.length-1],Mt.propertyGroup);return Mt.transform=Ot,Mt.propertyIndex=kt.cix,Mt._name=kt.nm,Mt}function S(kt,et,Ft){var xt=function(Xt){switch(Xt){case"ADBE Vectors Group":case"Contents":case 2:return xt.content;default:return xt.transform}};xt.propertyGroup=propertyGroupFactory(xt,Ft);var Mt=r(kt,et,xt.propertyGroup),Ot=Ue(kt.it[kt.it.length-1],et.it[et.it.length-1],xt.propertyGroup);return xt.content=Mt,xt.transform=Ot,Object.defineProperty(xt,"_name",{get:function(){return kt.nm}}),xt.numProperties=kt.np,xt.propertyIndex=kt.ix,xt.nm=kt.nm,xt.mn=kt.mn,xt}function E(kt,et,Ft){function xt(Mt){return Mt==="Color"||Mt==="color"?xt.color:Mt==="Opacity"||Mt==="opacity"?xt.opacity:null}return Object.defineProperties(xt,{color:{get:ExpressionPropertyInterface(et.c)},opacity:{get:ExpressionPropertyInterface(et.o)},_name:{value:kt.nm},mn:{value:kt.mn}}),et.c.setGroupProperty(PropertyInterface("Color",Ft)),et.o.setGroupProperty(PropertyInterface("Opacity",Ft)),xt}function x(kt,et,Ft){function xt(Mt){return Mt==="Start Point"||Mt==="start point"?xt.startPoint:Mt==="End Point"||Mt==="end point"?xt.endPoint:Mt==="Opacity"||Mt==="opacity"?xt.opacity:null}return Object.defineProperties(xt,{startPoint:{get:ExpressionPropertyInterface(et.s)},endPoint:{get:ExpressionPropertyInterface(et.e)},opacity:{get:ExpressionPropertyInterface(et.o)},type:{get:function(){return"a"}},_name:{value:kt.nm},mn:{value:kt.mn}}),et.s.setGroupProperty(PropertyInterface("Start Point",Ft)),et.e.setGroupProperty(PropertyInterface("End Point",Ft)),et.o.setGroupProperty(PropertyInterface("Opacity",Ft)),xt}function C(){function kt(){return null}return kt}function R(kt,et,Ft){var xt=propertyGroupFactory(si,Ft),Mt=propertyGroupFactory(ei,xt);function Ot(li){Object.defineProperty(ei,kt.d[li].nm,{get:ExpressionPropertyInterface(et.d.dataProps[li].p)})}var Ut,Xt=kt.d?kt.d.length:0,ei={};for(Ut=0;Ut<Xt;Ut+=1)Ot(Ut),et.d.dataProps[Ut].p.setGroupProperty(Mt);function si(li){return li==="Color"||li==="color"?si.color:li==="Opacity"||li==="opacity"?si.opacity:li==="Stroke Width"||li==="stroke width"?si.strokeWidth:null}return Object.defineProperties(si,{color:{get:ExpressionPropertyInterface(et.c)},opacity:{get:ExpressionPropertyInterface(et.o)},strokeWidth:{get:ExpressionPropertyInterface(et.w)},dash:{get:function(){return ei}},_name:{value:kt.nm},mn:{value:kt.mn}}),et.c.setGroupProperty(PropertyInterface("Color",xt)),et.o.setGroupProperty(PropertyInterface("Opacity",xt)),et.w.setGroupProperty(PropertyInterface("Stroke Width",xt)),si}function Ce(kt,et,Ft){function xt(Ot){return Ot===kt.e.ix||Ot==="End"||Ot==="end"?xt.end:Ot===kt.s.ix?xt.start:Ot===kt.o.ix?xt.offset:null}var Mt=propertyGroupFactory(xt,Ft);return xt.propertyIndex=kt.ix,et.s.setGroupProperty(PropertyInterface("Start",Mt)),et.e.setGroupProperty(PropertyInterface("End",Mt)),et.o.setGroupProperty(PropertyInterface("Offset",Mt)),xt.propertyIndex=kt.ix,xt.propertyGroup=Ft,Object.defineProperties(xt,{start:{get:ExpressionPropertyInterface(et.s)},end:{get:ExpressionPropertyInterface(et.e)},offset:{get:ExpressionPropertyInterface(et.o)},_name:{value:kt.nm}}),xt.mn=kt.mn,xt}function Ue(kt,et,Ft){function xt(Ot){return kt.a.ix===Ot||Ot==="Anchor Point"?xt.anchorPoint:kt.o.ix===Ot||Ot==="Opacity"?xt.opacity:kt.p.ix===Ot||Ot==="Position"?xt.position:kt.r.ix===Ot||Ot==="Rotation"||Ot==="ADBE Vector Rotation"?xt.rotation:kt.s.ix===Ot||Ot==="Scale"?xt.scale:kt.sk&&kt.sk.ix===Ot||Ot==="Skew"?xt.skew:kt.sa&&kt.sa.ix===Ot||Ot==="Skew Axis"?xt.skewAxis:null}var Mt=propertyGroupFactory(xt,Ft);return et.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Mt)),et.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Mt)),et.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Mt)),et.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Mt)),et.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Mt)),et.transform.mProps.sk&&(et.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Mt)),et.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Mt))),et.transform.op.setGroupProperty(PropertyInterface("Opacity",Mt)),Object.defineProperties(xt,{opacity:{get:ExpressionPropertyInterface(et.transform.mProps.o)},position:{get:ExpressionPropertyInterface(et.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(et.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(et.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(et.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(et.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(et.transform.mProps.sa)},_name:{value:kt.nm}}),xt.ty="tr",xt.mn=kt.mn,xt.propertyGroup=Ft,xt}function je(kt,et,Ft){function xt(Ut){return kt.p.ix===Ut?xt.position:kt.s.ix===Ut?xt.size:null}var Mt=propertyGroupFactory(xt,Ft);xt.propertyIndex=kt.ix;var Ot=et.sh.ty==="tm"?et.sh.prop:et.sh;return Ot.s.setGroupProperty(PropertyInterface("Size",Mt)),Ot.p.setGroupProperty(PropertyInterface("Position",Mt)),Object.defineProperties(xt,{size:{get:ExpressionPropertyInterface(Ot.s)},position:{get:ExpressionPropertyInterface(Ot.p)},_name:{value:kt.nm}}),xt.mn=kt.mn,xt}function Xe(kt,et,Ft){function xt(Ut){return kt.p.ix===Ut?xt.position:kt.r.ix===Ut?xt.rotation:kt.pt.ix===Ut?xt.points:kt.or.ix===Ut||Ut==="ADBE Vector Star Outer Radius"?xt.outerRadius:kt.os.ix===Ut?xt.outerRoundness:kt.ir&&(kt.ir.ix===Ut||Ut==="ADBE Vector Star Inner Radius")?xt.innerRadius:kt.is&&kt.is.ix===Ut?xt.innerRoundness:null}var Mt=propertyGroupFactory(xt,Ft),Ot=et.sh.ty==="tm"?et.sh.prop:et.sh;return xt.propertyIndex=kt.ix,Ot.or.setGroupProperty(PropertyInterface("Outer Radius",Mt)),Ot.os.setGroupProperty(PropertyInterface("Outer Roundness",Mt)),Ot.pt.setGroupProperty(PropertyInterface("Points",Mt)),Ot.p.setGroupProperty(PropertyInterface("Position",Mt)),Ot.r.setGroupProperty(PropertyInterface("Rotation",Mt)),kt.ir&&(Ot.ir.setGroupProperty(PropertyInterface("Inner Radius",Mt)),Ot.is.setGroupProperty(PropertyInterface("Inner Roundness",Mt))),Object.defineProperties(xt,{position:{get:ExpressionPropertyInterface(Ot.p)},rotation:{get:ExpressionPropertyInterface(Ot.r)},points:{get:ExpressionPropertyInterface(Ot.pt)},outerRadius:{get:ExpressionPropertyInterface(Ot.or)},outerRoundness:{get:ExpressionPropertyInterface(Ot.os)},innerRadius:{get:ExpressionPropertyInterface(Ot.ir)},innerRoundness:{get:ExpressionPropertyInterface(Ot.is)},_name:{value:kt.nm}}),xt.mn=kt.mn,xt}function Ye(kt,et,Ft){function xt(Ut){return kt.p.ix===Ut?xt.position:kt.r.ix===Ut?xt.roundness:kt.s.ix===Ut||Ut==="Size"||Ut==="ADBE Vector Rect Size"?xt.size:null}var Mt=propertyGroupFactory(xt,Ft),Ot=et.sh.ty==="tm"?et.sh.prop:et.sh;return xt.propertyIndex=kt.ix,Ot.p.setGroupProperty(PropertyInterface("Position",Mt)),Ot.s.setGroupProperty(PropertyInterface("Size",Mt)),Ot.r.setGroupProperty(PropertyInterface("Rotation",Mt)),Object.defineProperties(xt,{position:{get:ExpressionPropertyInterface(Ot.p)},roundness:{get:ExpressionPropertyInterface(Ot.r)},size:{get:ExpressionPropertyInterface(Ot.s)},_name:{value:kt.nm}}),xt.mn=kt.mn,xt}function St(kt,et,Ft){function xt(Ut){return kt.r.ix===Ut||Ut==="Round Corners 1"?xt.radius:null}var Mt=propertyGroupFactory(xt,Ft),Ot=et;return xt.propertyIndex=kt.ix,Ot.rd.setGroupProperty(PropertyInterface("Radius",Mt)),Object.defineProperties(xt,{radius:{get:ExpressionPropertyInterface(Ot.rd)},_name:{value:kt.nm}}),xt.mn=kt.mn,xt}function Dt(kt,et,Ft){function xt(Ut){return kt.c.ix===Ut||Ut==="Copies"?xt.copies:kt.o.ix===Ut||Ut==="Offset"?xt.offset:null}var Mt=propertyGroupFactory(xt,Ft),Ot=et;return xt.propertyIndex=kt.ix,Ot.c.setGroupProperty(PropertyInterface("Copies",Mt)),Ot.o.setGroupProperty(PropertyInterface("Offset",Mt)),Object.defineProperties(xt,{copies:{get:ExpressionPropertyInterface(Ot.c)},offset:{get:ExpressionPropertyInterface(Ot.o)},_name:{value:kt.nm}}),xt.mn=kt.mn,xt}return function(kt,et,Ft){var xt;function Mt(Ut){if(typeof Ut=="number")return Ut=Ut===void 0?1:Ut,Ut===0?Ft:xt[Ut-1];for(var Xt=0,ei=xt.length;Xt<ei;){if(xt[Xt]._name===Ut)return xt[Xt];Xt+=1}return null}function Ot(){return Ft}return Mt.propertyGroup=propertyGroupFactory(Mt,Ot),xt=o(kt,et,Mt.propertyGroup),Mt.numProperties=xt.length,Mt._name="Contents",Mt}}(),TextExpressionInterface=function(){return function(o){var r;function S(E){switch(E){case"ADBE Text Document":return S.sourceText;default:return null}}return Object.defineProperty(S,"sourceText",{get:function(){o.textProperty.getValue();var x=o.textProperty.currentData.t;return(!r||x!==r.value)&&(r=new String(x),r.value=x||new String(x),Object.defineProperty(r,"style",{get:function(){return{fillColor:o.textProperty.currentData.fc}}})),r}}),S}}();function _typeof(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(S){return typeof S}:_typeof=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},_typeof(o)}var FootageInterface=function(){var o=function(E){var x="",C=E.getFootageData();function R(){return x="",C=E.getFootageData(),Ce}function Ce(Ue){if(C[Ue])return x=Ue,C=C[Ue],_typeof(C)==="object"?Ce:C;var je=Ue.indexOf(x);if(je!==-1){var Xe=parseInt(Ue.substr(je+x.length),10);return C=C[Xe],_typeof(C)==="object"?Ce:C}return""}return R},r=function(E){function x(C){return C==="Outline"?x.outlineInterface():null}return x._name="Outline",x.outlineInterface=o(E),x};return function(S){function E(x){return x==="Data"?E.dataInterface:null}return E._name="Data",E.dataInterface=r(S),E}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(o){return interfaces[o]||null}var expressionHelpers=function(){function o(R,Ce,Ue){Ce.x&&(Ue.k=!0,Ue.x=!0,Ue.initiateExpression=ExpressionManager.initiateExpression,Ue.effectsSequence.push(Ue.initiateExpression(R,Ce,Ue).bind(Ue)))}function r(R){return R*=this.elem.globalData.frameRate,R-=this.offsetTime,R!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<R?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(R,this._cachingAtTime),this._cachingAtTime.lastFrame=R),this._cachingAtTime.value}function S(R){var Ce=-.01,Ue=this.getValueAtTime(R),je=this.getValueAtTime(R+Ce),Xe=0;if(Ue.length){var Ye;for(Ye=0;Ye<Ue.length;Ye+=1)Xe+=Math.pow(je[Ye]-Ue[Ye],2);Xe=Math.sqrt(Xe)*100}else Xe=0;return Xe}function E(R){if(this.vel!==void 0)return this.vel;var Ce=-.001,Ue=this.getValueAtTime(R),je=this.getValueAtTime(R+Ce),Xe;if(Ue.length){Xe=createTypedArray("float32",Ue.length);var Ye;for(Ye=0;Ye<Ue.length;Ye+=1)Xe[Ye]=(je[Ye]-Ue[Ye])/Ce}else Xe=(je-Ue)/Ce;return Xe}function x(){return this.pv}function C(R){this.propertyGroup=R}return{searchExpressions:o,getSpeedAtTime:S,getVelocityAtTime:E,getValueAtTime:r,getStaticValueAtTime:x,setGroupProperty:C}}();function addPropertyDecorator(){function o(St,Dt,kt){if(!this.k||!this.keyframes)return this.pv;St=St?St.toLowerCase():"";var et=this.comp.renderedFrame,Ft=this.keyframes,xt=Ft[Ft.length-1].t;if(et<=xt)return this.pv;var Mt,Ot;kt?(Dt?Mt=Math.abs(xt-this.elem.comp.globalData.frameRate*Dt):Mt=Math.max(0,xt-this.elem.data.ip),Ot=xt-Mt):((!Dt||Dt>Ft.length-1)&&(Dt=Ft.length-1),Ot=Ft[Ft.length-1-Dt].t,Mt=xt-Ot);var Ut,Xt,ei;if(St==="pingpong"){var si=Math.floor((et-Ot)/Mt);if(si%2!==0)return this.getValueAtTime((Mt-(et-Ot)%Mt+Ot)/this.comp.globalData.frameRate,0)}else if(St==="offset"){var li=this.getValueAtTime(Ot/this.comp.globalData.frameRate,0),bi=this.getValueAtTime(xt/this.comp.globalData.frameRate,0),wi=this.getValueAtTime(((et-Ot)%Mt+Ot)/this.comp.globalData.frameRate,0),Pi=Math.floor((et-Ot)/Mt);if(this.pv.length){for(ei=new Array(li.length),Xt=ei.length,Ut=0;Ut<Xt;Ut+=1)ei[Ut]=(bi[Ut]-li[Ut])*Pi+wi[Ut];return ei}return(bi-li)*Pi+wi}else if(St==="continue"){var Ci=this.getValueAtTime(xt/this.comp.globalData.frameRate,0),Di=this.getValueAtTime((xt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ei=new Array(Ci.length),Xt=ei.length,Ut=0;Ut<Xt;Ut+=1)ei[Ut]=Ci[Ut]+(Ci[Ut]-Di[Ut])*((et-xt)/this.comp.globalData.frameRate)/5e-4;return ei}return Ci+(Ci-Di)*((et-xt)/.001)}return this.getValueAtTime(((et-Ot)%Mt+Ot)/this.comp.globalData.frameRate,0)}function r(St,Dt,kt){if(!this.k)return this.pv;St=St?St.toLowerCase():"";var et=this.comp.renderedFrame,Ft=this.keyframes,xt=Ft[0].t;if(et>=xt)return this.pv;var Mt,Ot;kt?(Dt?Mt=Math.abs(this.elem.comp.globalData.frameRate*Dt):Mt=Math.max(0,this.elem.data.op-xt),Ot=xt+Mt):((!Dt||Dt>Ft.length-1)&&(Dt=Ft.length-1),Ot=Ft[Dt].t,Mt=Ot-xt);var Ut,Xt,ei;if(St==="pingpong"){var si=Math.floor((xt-et)/Mt);if(si%2===0)return this.getValueAtTime(((xt-et)%Mt+xt)/this.comp.globalData.frameRate,0)}else if(St==="offset"){var li=this.getValueAtTime(xt/this.comp.globalData.frameRate,0),bi=this.getValueAtTime(Ot/this.comp.globalData.frameRate,0),wi=this.getValueAtTime((Mt-(xt-et)%Mt+xt)/this.comp.globalData.frameRate,0),Pi=Math.floor((xt-et)/Mt)+1;if(this.pv.length){for(ei=new Array(li.length),Xt=ei.length,Ut=0;Ut<Xt;Ut+=1)ei[Ut]=wi[Ut]-(bi[Ut]-li[Ut])*Pi;return ei}return wi-(bi-li)*Pi}else if(St==="continue"){var Ci=this.getValueAtTime(xt/this.comp.globalData.frameRate,0),Di=this.getValueAtTime((xt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ei=new Array(Ci.length),Xt=ei.length,Ut=0;Ut<Xt;Ut+=1)ei[Ut]=Ci[Ut]+(Ci[Ut]-Di[Ut])*(xt-et)/.001;return ei}return Ci+(Ci-Di)*(xt-et)/.001}return this.getValueAtTime((Mt-((xt-et)%Mt+xt))/this.comp.globalData.frameRate,0)}function S(St,Dt){if(!this.k)return this.pv;if(St=(St||.4)*.5,Dt=Math.floor(Dt||5),Dt<=1)return this.pv;var kt=this.comp.renderedFrame/this.comp.globalData.frameRate,et=kt-St,Ft=kt+St,xt=Dt>1?(Ft-et)/(Dt-1):1,Mt=0,Ot=0,Ut;this.pv.length?Ut=createTypedArray("float32",this.pv.length):Ut=0;for(var Xt;Mt<Dt;){if(Xt=this.getValueAtTime(et+Mt*xt),this.pv.length)for(Ot=0;Ot<this.pv.length;Ot+=1)Ut[Ot]+=Xt[Ot];else Ut+=Xt;Mt+=1}if(this.pv.length)for(Ot=0;Ot<this.pv.length;Ot+=1)Ut[Ot]/=Dt;else Ut/=Dt;return Ut}function E(St){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Dt=this._transformCachingAtTime.v;if(Dt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var kt=this.a.getValueAtTime(St);Dt.translate(-kt[0]*this.a.mult,-kt[1]*this.a.mult,kt[2]*this.a.mult)}if(this.appliedTransformations<2){var et=this.s.getValueAtTime(St);Dt.scale(et[0]*this.s.mult,et[1]*this.s.mult,et[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ft=this.sk.getValueAtTime(St),xt=this.sa.getValueAtTime(St);Dt.skewFromAxis(-Ft*this.sk.mult,xt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Mt=this.r.getValueAtTime(St);Dt.rotate(-Mt*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Ot=this.rz.getValueAtTime(St),Ut=this.ry.getValueAtTime(St),Xt=this.rx.getValueAtTime(St),ei=this.or.getValueAtTime(St);Dt.rotateZ(-Ot*this.rz.mult).rotateY(Ut*this.ry.mult).rotateX(Xt*this.rx.mult).rotateZ(-ei[2]*this.or.mult).rotateY(ei[1]*this.or.mult).rotateX(ei[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var si=this.px.getValueAtTime(St),li=this.py.getValueAtTime(St);if(this.data.p.z){var bi=this.pz.getValueAtTime(St);Dt.translate(si*this.px.mult,li*this.py.mult,-bi*this.pz.mult)}else Dt.translate(si*this.px.mult,li*this.py.mult,0)}else{var wi=this.p.getValueAtTime(St);Dt.translate(wi[0]*this.p.mult,wi[1]*this.p.mult,-wi[2]*this.p.mult)}return Dt}function x(){return this.v.clone(new Matrix)}var C=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(St,Dt,kt){var et=C(St,Dt,kt);return et.dynamicProperties.length?et.getValueAtTime=E.bind(et):et.getValueAtTime=x.bind(et),et.setGroupProperty=expressionHelpers.setGroupProperty,et};var R=PropertyFactory.getProp;PropertyFactory.getProp=function(St,Dt,kt,et,Ft){var xt=R(St,Dt,kt,et,Ft);xt.kf?xt.getValueAtTime=expressionHelpers.getValueAtTime.bind(xt):xt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(xt),xt.setGroupProperty=expressionHelpers.setGroupProperty,xt.loopOut=o,xt.loopIn=r,xt.smooth=S,xt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(xt),xt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(xt),xt.numKeys=Dt.a===1?Dt.k.length:0,xt.propertyIndex=Dt.ix;var Mt=0;return kt!==0&&(Mt=createTypedArray("float32",Dt.a===1?Dt.k[0].s.length:Dt.k.length)),xt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Mt},expressionHelpers.searchExpressions(St,Dt,xt),xt.k&&Ft.addDynamicProperty(xt),xt};function Ce(St){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),St*=this.elem.globalData.frameRate,St-=this.offsetTime,St!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<St?this._caching.lastIndex:0,this._cachingAtTime.lastTime=St,this.interpolateShape(St,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var Ue=ShapePropertyFactory.getConstructorFunction(),je=ShapePropertyFactory.getKeyframedConstructorFunction();function Xe(){}Xe.prototype={vertices:function(Dt,kt){this.k&&this.getValue();var et=this.v;kt!==void 0&&(et=this.getValueAtTime(kt,0));var Ft,xt=et._length,Mt=et[Dt],Ot=et.v,Ut=createSizedArray(xt);for(Ft=0;Ft<xt;Ft+=1)Dt==="i"||Dt==="o"?Ut[Ft]=[Mt[Ft][0]-Ot[Ft][0],Mt[Ft][1]-Ot[Ft][1]]:Ut[Ft]=[Mt[Ft][0],Mt[Ft][1]];return Ut},points:function(Dt){return this.vertices("v",Dt)},inTangents:function(Dt){return this.vertices("i",Dt)},outTangents:function(Dt){return this.vertices("o",Dt)},isClosed:function(){return this.v.c},pointOnPath:function(Dt,kt){var et=this.v;kt!==void 0&&(et=this.getValueAtTime(kt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(et));for(var Ft=this._segmentsLength,xt=Ft.lengths,Mt=Ft.totalLength*Dt,Ot=0,Ut=xt.length,Xt=0,ei;Ot<Ut;){if(Xt+xt[Ot].addedLength>Mt){var si=Ot,li=et.c&&Ot===Ut-1?0:Ot+1,bi=(Mt-Xt)/xt[Ot].addedLength;ei=bez.getPointInSegment(et.v[si],et.v[li],et.o[si],et.i[li],bi,xt[Ot]);break}else Xt+=xt[Ot].addedLength;Ot+=1}return ei||(ei=et.c?[et.v[0][0],et.v[0][1]]:[et.v[et._length-1][0],et.v[et._length-1][1]]),ei},vectorOnPath:function(Dt,kt,et){Dt==1?Dt=this.v.c:Dt==0&&(Dt=.999);var Ft=this.pointOnPath(Dt,kt),xt=this.pointOnPath(Dt+.001,kt),Mt=xt[0]-Ft[0],Ot=xt[1]-Ft[1],Ut=Math.sqrt(Math.pow(Mt,2)+Math.pow(Ot,2));if(Ut===0)return[0,0];var Xt=et==="tangent"?[Mt/Ut,Ot/Ut]:[-Ot/Ut,Mt/Ut];return Xt},tangentOnPath:function(Dt,kt){return this.vectorOnPath(Dt,kt,"tangent")},normalOnPath:function(Dt,kt){return this.vectorOnPath(Dt,kt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Xe],Ue),extendPrototype([Xe],je),je.prototype.getValueAtTime=Ce,je.prototype.initiateExpression=ExpressionManager.initiateExpression;var Ye=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(St,Dt,kt,et,Ft){var xt=Ye(St,Dt,kt,et,Ft);return xt.propertyIndex=Dt.ix,xt.lock=!1,kt===3?expressionHelpers.searchExpressions(St,Dt.pt,xt):kt===4&&expressionHelpers.searchExpressions(St,Dt.ks,xt),xt.k&&St.addDynamicProperty(xt),xt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function o(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(r,S){var E=this.calculateExpression(S);if(r.t!==E){var x={};return this.copyData(x,r),x.t=E.toString(),x.__complete=!1,x}return r},TextProperty.prototype.searchProperty=function(){var r=this.searchKeyframes(),S=this.searchExpressions();return this.kf=r||S,this.kf},TextProperty.prototype.searchExpressions=o}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function o(r,S){var E=createNS("feMerge");E.setAttribute("result",r);var x,C;for(C=0;C<S.length;C+=1)x=createNS("feMergeNode"),x.setAttribute("in",S[C]),E.appendChild(x),E.appendChild(x);return E}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(o,r,S,E,x){this.filterManager=r;var C=createNS("feColorMatrix");C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","linearRGB"),C.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=C,C.setAttribute("result",E+"_tint_1"),o.appendChild(C),C=createNS("feColorMatrix"),C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","sRGB"),C.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),C.setAttribute("result",E+"_tint_2"),o.appendChild(C),this.matrixFilter=C;var R=this.createMergeNode(E,[x,E+"_tint_1",E+"_tint_2"]);o.appendChild(R)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,S=this.filterManager.effectElements[1].p.v,E=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+E+" 0"),this.matrixFilter.setAttribute("values",S[0]-r[0]+" 0 0 0 "+r[0]+" "+(S[1]-r[1])+" 0 0 0 "+r[1]+" "+(S[2]-r[2])+" 0 0 0 "+r[2]+" 0 0 0 1 0")}};function SVGFillFilter(o,r,S,E){this.filterManager=r;var x=createNS("feColorMatrix");x.setAttribute("type","matrix"),x.setAttribute("color-interpolation-filters","sRGB"),x.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),x.setAttribute("result",E),o.appendChild(x),this.matrixFilter=x}SVGFillFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var r=this.filterManager.effectElements[2].p.v,S=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+r[0]+" 0 0 0 0 "+r[1]+" 0 0 0 0 "+r[2]+" 0 0 0 "+S+" 0")}};function SVGStrokeEffect(o,r,S){this.initialized=!1,this.filterManager=r,this.elem=S,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var o=this.elem.layerElement.children||this.elem.layerElement.childNodes,r,S,E,x;for(this.filterManager.effectElements[1].p.v===1?(x=this.elem.maskManager.masksProperties.length,E=0):(E=this.filterManager.effectElements[0].p.v-1,x=E+1),S=createNS("g"),S.setAttribute("fill","none"),S.setAttribute("stroke-linecap","round"),S.setAttribute("stroke-dashoffset",1),E;E<x;E+=1)r=createNS("path"),S.appendChild(r),this.paths.push({p:r,m:E});if(this.filterManager.effectElements[10].p.v===3){var C=createNS("mask"),R=createElementID();C.setAttribute("id",R),C.setAttribute("mask-type","alpha"),C.appendChild(S),this.elem.globalData.defs.appendChild(C);var Ce=createNS("g");for(Ce.setAttribute("mask","url("+getLocationHref()+"#"+R+")");o[0];)Ce.appendChild(o[0]);this.elem.layerElement.appendChild(Ce),this.masker=C,S.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(o=this.elem.layerElement.children||this.elem.layerElement.childNodes;o.length;)this.elem.layerElement.removeChild(o[0]);this.elem.layerElement.appendChild(S),this.elem.layerElement.removeAttribute("mask"),S.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=S},SVGStrokeEffect.prototype.renderFrame=function(o){this.initialized||this.initialize();var r,S=this.paths.length,E,x;for(r=0;r<S;r+=1)if(this.paths[r].m!==-1&&(E=this.elem.maskManager.viewData[this.paths[r].m],x=this.paths[r].p,(o||this.filterManager._mdf||E.prop._mdf)&&x.setAttribute("d",E.lastPath),o||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||E.prop._mdf)){var C;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var R=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Ce=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Ue=x.getTotalLength();C="0 0 0 "+Ue*R+" ";var je=Ue*(Ce-R),Xe=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Ye=Math.floor(je/Xe),St;for(St=0;St<Ye;St+=1)C+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";C+="0 "+Ue*10+" 0 0"}else C="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;x.setAttribute("stroke-dasharray",C)}if((o||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(o||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(o||this.filterManager.effectElements[3].p._mdf)){var Dt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Dt[0]*255)+","+bmFloor(Dt[1]*255)+","+bmFloor(Dt[2]*255)+")")}};function SVGTritoneFilter(o,r,S,E){this.filterManager=r;var x=createNS("feColorMatrix");x.setAttribute("type","matrix"),x.setAttribute("color-interpolation-filters","linearRGB"),x.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),o.appendChild(x);var C=createNS("feComponentTransfer");C.setAttribute("color-interpolation-filters","sRGB"),C.setAttribute("result",E),this.matrixFilter=C;var R=createNS("feFuncR");R.setAttribute("type","table"),C.appendChild(R),this.feFuncR=R;var Ce=createNS("feFuncG");Ce.setAttribute("type","table"),C.appendChild(Ce),this.feFuncG=Ce;var Ue=createNS("feFuncB");Ue.setAttribute("type","table"),C.appendChild(Ue),this.feFuncB=Ue,o.appendChild(C)}SVGTritoneFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,S=this.filterManager.effectElements[1].p.v,E=this.filterManager.effectElements[2].p.v,x=E[0]+" "+S[0]+" "+r[0],C=E[1]+" "+S[1]+" "+r[1],R=E[2]+" "+S[2]+" "+r[2];this.feFuncR.setAttribute("tableValues",x),this.feFuncG.setAttribute("tableValues",C),this.feFuncB.setAttribute("tableValues",R)}};function SVGProLevelsFilter(o,r,S,E){this.filterManager=r;var x=this.filterManager.effectElements,C=createNS("feComponentTransfer");(x[10].p.k||x[10].p.v!==0||x[11].p.k||x[11].p.v!==1||x[12].p.k||x[12].p.v!==1||x[13].p.k||x[13].p.v!==0||x[14].p.k||x[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",C)),(x[17].p.k||x[17].p.v!==0||x[18].p.k||x[18].p.v!==1||x[19].p.k||x[19].p.v!==1||x[20].p.k||x[20].p.v!==0||x[21].p.k||x[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",C)),(x[24].p.k||x[24].p.v!==0||x[25].p.k||x[25].p.v!==1||x[26].p.k||x[26].p.v!==1||x[27].p.k||x[27].p.v!==0||x[28].p.k||x[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",C)),(x[31].p.k||x[31].p.v!==0||x[32].p.k||x[32].p.v!==1||x[33].p.k||x[33].p.v!==1||x[34].p.k||x[34].p.v!==0||x[35].p.k||x[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",C)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(C.setAttribute("color-interpolation-filters","sRGB"),o.appendChild(C)),(x[3].p.k||x[3].p.v!==0||x[4].p.k||x[4].p.v!==1||x[5].p.k||x[5].p.v!==1||x[6].p.k||x[6].p.v!==0||x[7].p.k||x[7].p.v!==1)&&(C=createNS("feComponentTransfer"),C.setAttribute("color-interpolation-filters","sRGB"),C.setAttribute("result",E),o.appendChild(C),this.feFuncRComposed=this.createFeFunc("feFuncR",C),this.feFuncGComposed=this.createFeFunc("feFuncG",C),this.feFuncBComposed=this.createFeFunc("feFuncB",C))}SVGProLevelsFilter.prototype.createFeFunc=function(o,r){var S=createNS(o);return S.setAttribute("type","table"),r.appendChild(S),S},SVGProLevelsFilter.prototype.getTableValue=function(o,r,S,E,x){for(var C=0,R=256,Ce,Ue=Math.min(o,r),je=Math.max(o,r),Xe=Array.call(null,{length:R}),Ye,St=0,Dt=x-E,kt=r-o;C<=256;)Ce=C/256,Ce<=Ue?Ye=kt<0?x:E:Ce>=je?Ye=kt<0?E:x:Ye=E+Dt*Math.pow((Ce-o)/kt,1/S),Xe[St]=Ye,St+=1,C+=256/(R-1);return Xe.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var r,S=this.filterManager.effectElements;this.feFuncRComposed&&(o||S[3].p._mdf||S[4].p._mdf||S[5].p._mdf||S[6].p._mdf||S[7].p._mdf)&&(r=this.getTableValue(S[3].p.v,S[4].p.v,S[5].p.v,S[6].p.v,S[7].p.v),this.feFuncRComposed.setAttribute("tableValues",r),this.feFuncGComposed.setAttribute("tableValues",r),this.feFuncBComposed.setAttribute("tableValues",r)),this.feFuncR&&(o||S[10].p._mdf||S[11].p._mdf||S[12].p._mdf||S[13].p._mdf||S[14].p._mdf)&&(r=this.getTableValue(S[10].p.v,S[11].p.v,S[12].p.v,S[13].p.v,S[14].p.v),this.feFuncR.setAttribute("tableValues",r)),this.feFuncG&&(o||S[17].p._mdf||S[18].p._mdf||S[19].p._mdf||S[20].p._mdf||S[21].p._mdf)&&(r=this.getTableValue(S[17].p.v,S[18].p.v,S[19].p.v,S[20].p.v,S[21].p.v),this.feFuncG.setAttribute("tableValues",r)),this.feFuncB&&(o||S[24].p._mdf||S[25].p._mdf||S[26].p._mdf||S[27].p._mdf||S[28].p._mdf)&&(r=this.getTableValue(S[24].p.v,S[25].p.v,S[26].p.v,S[27].p.v,S[28].p.v),this.feFuncB.setAttribute("tableValues",r)),this.feFuncA&&(o||S[31].p._mdf||S[32].p._mdf||S[33].p._mdf||S[34].p._mdf||S[35].p._mdf)&&(r=this.getTableValue(S[31].p.v,S[32].p.v,S[33].p.v,S[34].p.v,S[35].p.v),this.feFuncA.setAttribute("tableValues",r))}};function SVGDropShadowEffect(o,r,S,E,x){var C=r.container.globalData.renderConfig.filterSize,R=r.data.fs||C;o.setAttribute("x",R.x||C.x),o.setAttribute("y",R.y||C.y),o.setAttribute("width",R.width||C.width),o.setAttribute("height",R.height||C.height),this.filterManager=r;var Ce=createNS("feGaussianBlur");Ce.setAttribute("in","SourceAlpha"),Ce.setAttribute("result",E+"_drop_shadow_1"),Ce.setAttribute("stdDeviation","0"),this.feGaussianBlur=Ce,o.appendChild(Ce);var Ue=createNS("feOffset");Ue.setAttribute("dx","25"),Ue.setAttribute("dy","0"),Ue.setAttribute("in",E+"_drop_shadow_1"),Ue.setAttribute("result",E+"_drop_shadow_2"),this.feOffset=Ue,o.appendChild(Ue);var je=createNS("feFlood");je.setAttribute("flood-color","#00ff00"),je.setAttribute("flood-opacity","1"),je.setAttribute("result",E+"_drop_shadow_3"),this.feFlood=je,o.appendChild(je);var Xe=createNS("feComposite");Xe.setAttribute("in",E+"_drop_shadow_3"),Xe.setAttribute("in2",E+"_drop_shadow_2"),Xe.setAttribute("operator","in"),Xe.setAttribute("result",E+"_drop_shadow_4"),o.appendChild(Xe);var Ye=this.createMergeNode(E,[E+"_drop_shadow_4",x]);o.appendChild(Ye)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){if((o||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),o||this.filterManager.effectElements[0].p._mdf){var r=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)))}if((o||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),o||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var S=this.filterManager.effectElements[3].p.v,E=(this.filterManager.effectElements[2].p.v-90)*degToRads,x=S*Math.cos(E),C=S*Math.sin(E);this.feOffset.setAttribute("dx",x),this.feOffset.setAttribute("dy",C)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(o,r,S){this.initialized=!1,this.filterManager=r,this.filterElem=o,this.elem=S,S.matteElement=createNS("g"),S.matteElement.appendChild(S.layerElement),S.matteElement.appendChild(S.transformedElement),S.baseElement=S.matteElement}SVGMatte3Effect.prototype.findSymbol=function(o){for(var r=0,S=_svgMatteSymbols.length;r<S;){if(_svgMatteSymbols[r]===o)return _svgMatteSymbols[r];r+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(o,r){var S=o.layerElement.parentNode;if(S){for(var E=S.children,x=0,C=E.length;x<C&&E[x]!==o.layerElement;)x+=1;var R;x<=C-2&&(R=E[x+1]);var Ce=createNS("use");Ce.setAttribute("href","#"+r),R?S.insertBefore(Ce,R):S.appendChild(Ce)}},SVGMatte3Effect.prototype.setElementAsMask=function(o,r){if(!this.findSymbol(r)){var S=createElementID(),E=createNS("mask");E.setAttribute("id",r.layerId),E.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(r);var x=o.globalData.defs;x.appendChild(E);var C=createNS("symbol");C.setAttribute("id",S),this.replaceInParent(r,S),C.appendChild(r.layerElement),x.appendChild(C);var R=createNS("use");R.setAttribute("href","#"+S),E.appendChild(R),r.data.hd=!1,r.show()}o.setMatte(r.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var o=this.filterManager.effectElements[0].p.v,r=this.elem.comp.elements,S=0,E=r.length;S<E;)r[S]&&r[S].data.ind===o&&this.setElementAsMask(this.elem,r[S]),S+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(o,r,S,E){o.setAttribute("x","-100%"),o.setAttribute("y","-100%"),o.setAttribute("width","300%"),o.setAttribute("height","300%"),this.filterManager=r;var x=createNS("feGaussianBlur");x.setAttribute("result",E),o.appendChild(x),this.feGaussianBlur=x}SVGGaussianBlurEffect.prototype.renderFrame=function(o){if(o||this.filterManager._mdf){var r=.3,S=this.filterManager.effectElements[0].p.v*r,E=this.filterManager.effectElements[1].p.v,x=E==3?0:S,C=E==2?0:S;this.feGaussianBlur.setAttribute("stdDeviation",x+" "+C);var R=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",R)}};function TransformEffect(){}TransformEffect.prototype.init=function(o){this.effectsManager=o,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(o){if(this._opMdf=!1,this._mdf=!1,o||this.effectsManager._mdf){var r=this.effectsManager.effectElements,S=r[0].p.v,E=r[1].p.v,x=r[2].p.v===1,C=r[3].p.v,R=x?C:r[4].p.v,Ce=r[5].p.v,Ue=r[6].p.v,je=r[7].p.v;this.matrix.reset(),this.matrix.translate(-S[0],-S[1],S[2]),this.matrix.scale(R*.01,C*.01,1),this.matrix.rotate(-je*degToRads),this.matrix.skewFromAxis(-Ce*degToRads,(Ue+90)*degToRads),this.matrix.translate(E[0],E[1],0),this._mdf=!0,this.opacity!==r[8].p.v&&(this.opacity=r[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(o,r){this.init(r)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(o){this.init(o)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieExports=lottie.exports;const Lottie=getDefaultExportFromCjs(lottieExports);(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".lottie-animation-container{width:var(--lottie-animation-container-width);height:var(--lottie-animation-container-height);background-color:var(--lottie-animation-container-background-color);overflow:hidden;margin:var(--lottie-animation-margin)}.lottie-animation-container svg{transform:scale(var(--lottie-animation-scale))}")),document.head.appendChild(o)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,r,S)=>r in o?__defProp(o,r,{enumerable:!0,configurable:!0,writable:!0,value:S}):o[r]=S,__spreadValues=(o,r)=>{for(var S in r||(r={}))__hasOwnProp.call(r,S)&&__defNormalProp(o,S,r[S]);if(__getOwnPropSymbols)for(var S of __getOwnPropSymbols(r))__propIsEnum.call(r,S)&&__defNormalProp(o,S,r[S]);return o},__spreadProps=(o,r)=>__defProps(o,__getOwnPropDescs(r)),es6=function o(r,S){if(r===S)return!0;if(r&&S&&typeof r=="object"&&typeof S=="object"){if(r.constructor!==S.constructor)return!1;var E,x,C;if(Array.isArray(r)){if(E=r.length,E!=S.length)return!1;for(x=E;x--!==0;)if(!o(r[x],S[x]))return!1;return!0}if(r instanceof Map&&S instanceof Map){if(r.size!==S.size)return!1;for(x of r.entries())if(!S.has(x[0]))return!1;for(x of r.entries())if(!o(x[1],S.get(x[0])))return!1;return!0}if(r instanceof Set&&S instanceof Set){if(r.size!==S.size)return!1;for(x of r.entries())if(!S.has(x[0]))return!1;return!0}if(ArrayBuffer.isView(r)&&ArrayBuffer.isView(S)){if(E=r.length,E!=S.length)return!1;for(x=E;x--!==0;)if(r[x]!==S[x])return!1;return!0}if(r.constructor===RegExp)return r.source===S.source&&r.flags===S.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===S.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===S.toString();if(C=Object.keys(r),E=C.length,E!==Object.keys(S).length)return!1;for(x=E;x--!==0;)if(!Object.prototype.hasOwnProperty.call(S,C[x]))return!1;for(x=E;x--!==0;){var R=C[x];if(!o(r[R],S[R]))return!1}return!0}return r!==r&&S!==S};function klona(o){var r,S,E;if(Array.isArray(o)){for(S=Array(r=o.length);r--;)S[r]=(E=o[r])&&typeof E=="object"?klona(E):E;return S}if(Object.prototype.toString.call(o)==="[object Object]"){S={};for(r in o)r==="__proto__"?Object.defineProperty(S,r,{value:klona(o[r]),configurable:!0,enumerable:!0,writable:!0}):S[r]=(E=o[r])&&typeof E=="object"?klona(E):E;return S}return o}var _export_sfc=(o,r)=>{const S=o.__vccOpts||o;for(const[E,x]of r)S[E]=x;return S};const _sfc_main=defineComponent({props:{animationData:{type:Object,default:()=>({})},animationLink:{type:String,default:""},loop:{type:[Boolean,Number],default:!0},autoPlay:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},speed:{type:Number,default:1},delay:{type:Number,default:0},direction:{type:String,default:"forward"},pauseOnHover:{type:Boolean,default:!1},playOnHover:{type:Boolean,default:!1},backgroundColor:{type:String,default:"transparent"},pauseAnimation:{type:Boolean,default:!1},noMargin:{type:Boolean,default:!1},scale:{type:Number,default:1},renderer:{type:String,default:"svg"},rendererSettings:{type:Object,default:()=>({})},assetsPath:{type:String,default:""}},emits:{onComplete:null,onLoopComplete:null,onEnterFrame:null,onSegmentStart:null,onAnimationLoaded:null},setup(o,{emit:r}){const S=ref();let E,x=null,C=1;watchEffect(async()=>{if(S.value){if(o.animationLink!="")try{E=await(await fetch(o.animationLink)).json()}catch(ei){console.error(ei);return}else if(es6(o.animationData,{})===!1)E=klona(o.animationData);else throw new Error("You must provide either animationLink or animationData");R()}});const R=()=>{if(!S.value||!E)return;x==null||x.destroy(),x=null;let ei=o.autoPlay,si=o.loop;o.playOnHover&&(ei=!1),typeof si=="number"&&si>0&&(si=si-1),o.delay>0&&(ei=!1);const li={container:S.value,renderer:o.renderer,loop:si,autoplay:ei,animationData:E,assetsPath:o.assetsPath};es6(o.rendererSettings,{})===!1&&(li.rendererSettings=o.rendererSettings),o.scale!==1&&(li.rendererSettings=__spreadProps(__spreadValues({},li.rendererSettings),{viewBoxOnly:!0})),x=Lottie.loadAnimation(li),setTimeout(()=>{ei=o.autoPlay,o.playOnHover?x==null||x.pause():ei?x==null||x.play():x==null||x.pause(),r("onAnimationLoaded")},o.delay),x.setSpeed(o.speed),o.direction==="reverse"&&x.setDirection(-1),o.direction==="normal"&&x.setDirection(1),(o.pauseAnimation||o.playOnHover)&&x.pause(),x.addEventListener("loopComplete",()=>{o.direction==="alternate"&&(x==null||x.stop(),C=C===-1?1:-1,x==null||x.setDirection(C),x==null||x.play()),r("onLoopComplete")}),x.addEventListener("complete",()=>{r("onComplete")}),x.addEventListener("enterFrame",()=>{r("onEnterFrame")}),x.addEventListener("segmentStart",()=>{r("onSegmentStart")})},Ce=computed(()=>{let ei=o.width,si=o.height;return typeof o.width=="number"&&(ei=`${o.width}px`),typeof o.height=="number"&&(si=`${o.height}px`),{"--lottie-animation-container-width":ei,"--lottie-animation-container-height":si,"--lottie-animation-container-background-color":o.backgroundColor,"--lottie-animation-margin":o.noMargin?"0":"0 auto","--lottie-animation-scale":o.scale!=1?o.scale:""}}),Ue=()=>{x&&o.pauseOnHover&&x.pause(),x&&o.playOnHover&&x.play()},je=()=>{x&&o.pauseOnHover&&x.play(),x&&o.playOnHover&&x.pause()};return watch(()=>o.pauseAnimation,()=>{if((o.pauseOnHover||o.playOnHover)&&o.pauseAnimation){console.error("If you are using pauseAnimation prop for Vue3-Lottie, please remove the props pauseOnHover and playOnHover");return}x&&(o.pauseAnimation?x.pause():x.play())}),{lottieAnimationContainer:S,hoverEnded:je,hoverStarted:Ue,getCurrentStyle:Ce,play:()=>{x&&x.play()},pause:()=>{x&&x.pause()},stop:()=>{x&&x.stop()},destroy:()=>{x&&x.destroy()},setSpeed:(ei=1)=>{if(ei<=0)throw new Error("Speed must be greater than 0");x&&x.setSpeed(ei)},setDirection:ei=>{x&&(ei==="forward"?x.setDirection(1):ei==="reverse"&&x.setDirection(-1))},goToAndStop:(ei,si=!0)=>{x&&x.goToAndStop(ei,si)},goToAndPlay:(ei,si=!0)=>{x&&x.goToAndPlay(ei,si)},playSegments:(ei,si=!1)=>{x&&x.playSegments(ei,si)},setSubFrame:(ei=!0)=>{x&&x.setSubframe(ei)},getDuration:(ei=!0)=>{if(x)return x.getDuration(ei)},updateDocumentData:(ei,si=0)=>{x&&x.renderer.elements[si].updateDocumentData(ei)}}}});function _sfc_render(o,r,S,E,x,C){return openBlock(),createElementBlock("div",{ref:"lottieAnimationContainer",class:"lottie-animation-container",style:normalizeStyle(o.getCurrentStyle),onMouseenter:r[0]||(r[0]=(...R)=>o.hoverStarted&&o.hoverStarted(...R)),onMouseleave:r[1]||(r[1]=(...R)=>o.hoverEnded&&o.hoverEnded(...R))},null,36)}var Vue3Lottie=_export_sfc(_sfc_main,[["render",_sfc_render]]),index$1={install(o,r){var S;const E=(S=r==null?void 0:r.name)!=null?S:"Vue3Lottie";o.component(E,Vue3Lottie)}};/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(o,r){var S=Object.keys(o);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(o);r&&(E=E.filter(function(x){return Object.getOwnPropertyDescriptor(o,x).enumerable})),S.push.apply(S,E)}return S}function _objectSpread2(o){for(var r=1;r<arguments.length;r++){var S=arguments[r]!=null?arguments[r]:{};r%2?ownKeys(Object(S),!0).forEach(function(E){_defineProperty(o,E,S[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(S)):ownKeys(Object(S)).forEach(function(E){Object.defineProperty(o,E,Object.getOwnPropertyDescriptor(S,E))})}return o}function _typeof(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(r){return typeof r}:_typeof=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(o)}function _defineProperty(o,r,S){return r in o?Object.defineProperty(o,r,{value:S,enumerable:!0,configurable:!0,writable:!0}):o[r]=S,o}function _extends(){return _extends=Object.assign||function(o){for(var r=1;r<arguments.length;r++){var S=arguments[r];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(o[E]=S[E])}return o},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(o,r){if(o==null)return{};var S={},E=Object.keys(o),x,C;for(C=0;C<E.length;C++)x=E[C],!(r.indexOf(x)>=0)&&(S[x]=o[x]);return S}function _objectWithoutProperties(o,r){if(o==null)return{};var S=_objectWithoutPropertiesLoose(o,r),E,x;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(o);for(x=0;x<C.length;x++)E=C[x],!(r.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(o,E)&&(S[E]=o[E])}return S}var version="1.14.0";function userAgent(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(o,r,S){o.addEventListener(r,S,!IE11OrLess&&captureMode)}function off(o,r,S){o.removeEventListener(r,S,!IE11OrLess&&captureMode)}function matches(o,r){if(r){if(r[0]===">"&&(r=r.substring(1)),o)try{if(o.matches)return o.matches(r);if(o.msMatchesSelector)return o.msMatchesSelector(r);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(r)}catch{return!1}return!1}}function getParentOrHost(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function closest(o,r,S,E){if(o){S=S||document;do{if(r!=null&&(r[0]===">"?o.parentNode===S&&matches(o,r):matches(o,r))||E&&o===S)return o;if(o===S)break}while(o=getParentOrHost(o))}return null}var R_SPACE=/\s+/g;function toggleClass(o,r,S){if(o&&r)if(o.classList)o.classList[S?"add":"remove"](r);else{var E=(" "+o.className+" ").replace(R_SPACE," ").replace(" "+r+" "," ");o.className=(E+(S?" "+r:"")).replace(R_SPACE," ")}}function css(o,r,S){var E=o&&o.style;if(E){if(S===void 0)return document.defaultView&&document.defaultView.getComputedStyle?S=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(S=o.currentStyle),r===void 0?S:S[r];!(r in E)&&r.indexOf("webkit")===-1&&(r="-webkit-"+r),E[r]=S+(typeof S=="string"?"":"px")}}function matrix(o,r){var S="";if(typeof o=="string")S=o;else do{var E=css(o,"transform");E&&E!=="none"&&(S=E+" "+S)}while(!r&&(o=o.parentNode));var x=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return x&&new x(S)}function find(o,r,S){if(o){var E=o.getElementsByTagName(r),x=0,C=E.length;if(S)for(;x<C;x++)S(E[x],x);return E}return[]}function getWindowScrollingElement(){var o=document.scrollingElement;return o||document.documentElement}function getRect(o,r,S,E,x){if(!(!o.getBoundingClientRect&&o!==window)){var C,R,Ce,Ue,je,Xe,Ye;if(o!==window&&o.parentNode&&o!==getWindowScrollingElement()?(C=o.getBoundingClientRect(),R=C.top,Ce=C.left,Ue=C.bottom,je=C.right,Xe=C.height,Ye=C.width):(R=0,Ce=0,Ue=window.innerHeight,je=window.innerWidth,Xe=window.innerHeight,Ye=window.innerWidth),(r||S)&&o!==window&&(x=x||o.parentNode,!IE11OrLess))do if(x&&x.getBoundingClientRect&&(css(x,"transform")!=="none"||S&&css(x,"position")!=="static")){var St=x.getBoundingClientRect();R-=St.top+parseInt(css(x,"border-top-width")),Ce-=St.left+parseInt(css(x,"border-left-width")),Ue=R+C.height,je=Ce+C.width;break}while(x=x.parentNode);if(E&&o!==window){var Dt=matrix(x||o),kt=Dt&&Dt.a,et=Dt&&Dt.d;Dt&&(R/=et,Ce/=kt,Ye/=kt,Xe/=et,Ue=R+Xe,je=Ce+Ye)}return{top:R,left:Ce,bottom:Ue,right:je,width:Ye,height:Xe}}}function isScrolledPast(o,r,S){for(var E=getParentAutoScrollElement(o,!0),x=getRect(o)[r];E;){var C=getRect(E)[S],R=void 0;if(R=x>=C,!R)return E;if(E===getWindowScrollingElement())break;E=getParentAutoScrollElement(E,!1)}return!1}function getChild(o,r,S,E){for(var x=0,C=0,R=o.children;C<R.length;){if(R[C].style.display!=="none"&&R[C]!==Sortable.ghost&&(E||R[C]!==Sortable.dragged)&&closest(R[C],S.draggable,o,!1)){if(x===r)return R[C];x++}C++}return null}function lastChild(o,r){for(var S=o.lastElementChild;S&&(S===Sortable.ghost||css(S,"display")==="none"||r&&!matches(S,r));)S=S.previousElementSibling;return S||null}function index(o,r){var S=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==Sortable.clone&&(!r||matches(o,r))&&S++;return S}function getRelativeScrollOffset(o){var r=0,S=0,E=getWindowScrollingElement();if(o)do{var x=matrix(o),C=x.a,R=x.d;r+=o.scrollLeft*C,S+=o.scrollTop*R}while(o!==E&&(o=o.parentNode));return[r,S]}function indexOfObject(o,r){for(var S in o)if(o.hasOwnProperty(S)){for(var E in r)if(r.hasOwnProperty(E)&&r[E]===o[S][E])return Number(S)}return-1}function getParentAutoScrollElement(o,r){if(!o||!o.getBoundingClientRect)return getWindowScrollingElement();var S=o,E=!1;do if(S.clientWidth<S.scrollWidth||S.clientHeight<S.scrollHeight){var x=css(S);if(S.clientWidth<S.scrollWidth&&(x.overflowX=="auto"||x.overflowX=="scroll")||S.clientHeight<S.scrollHeight&&(x.overflowY=="auto"||x.overflowY=="scroll")){if(!S.getBoundingClientRect||S===document.body)return getWindowScrollingElement();if(E||r)return S;E=!0}}while(S=S.parentNode);return getWindowScrollingElement()}function extend(o,r){if(o&&r)for(var S in r)r.hasOwnProperty(S)&&(o[S]=r[S]);return o}function isRectEqual(o,r){return Math.round(o.top)===Math.round(r.top)&&Math.round(o.left)===Math.round(r.left)&&Math.round(o.height)===Math.round(r.height)&&Math.round(o.width)===Math.round(r.width)}var _throttleTimeout;function throttle(o,r){return function(){if(!_throttleTimeout){var S=arguments,E=this;S.length===1?o.call(E,S[0]):o.apply(E,S),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},r)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(o,r,S){o.scrollLeft+=r,o.scrollTop+=S}function clone(o){var r=window.Polymer,S=window.jQuery||window.Zepto;return r&&r.dom?r.dom(o).cloneNode(!0):S?S(o).clone(!0)[0]:o.cloneNode(!0)}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var o=[],r;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var E=[].slice.call(this.el.children);E.forEach(function(x){if(!(css(x,"display")==="none"||x===Sortable.ghost)){o.push({target:x,rect:getRect(x)});var C=_objectSpread2({},o[o.length-1].rect);if(x.thisAnimationDuration){var R=matrix(x,!0);R&&(C.top-=R.f,C.left-=R.e)}x.fromRect=C}})}},addAnimationState:function(E){o.push(E)},removeAnimationState:function(E){o.splice(indexOfObject(o,{target:E}),1)},animateAll:function(E){var x=this;if(!this.options.animation){clearTimeout(r),typeof E=="function"&&E();return}var C=!1,R=0;o.forEach(function(Ce){var Ue=0,je=Ce.target,Xe=je.fromRect,Ye=getRect(je),St=je.prevFromRect,Dt=je.prevToRect,kt=Ce.rect,et=matrix(je,!0);et&&(Ye.top-=et.f,Ye.left-=et.e),je.toRect=Ye,je.thisAnimationDuration&&isRectEqual(St,Ye)&&!isRectEqual(Xe,Ye)&&(kt.top-Ye.top)/(kt.left-Ye.left)===(Xe.top-Ye.top)/(Xe.left-Ye.left)&&(Ue=calculateRealTime(kt,St,Dt,x.options)),isRectEqual(Ye,Xe)||(je.prevFromRect=Xe,je.prevToRect=Ye,Ue||(Ue=x.options.animation),x.animate(je,kt,Ye,Ue)),Ue&&(C=!0,R=Math.max(R,Ue),clearTimeout(je.animationResetTimer),je.animationResetTimer=setTimeout(function(){je.animationTime=0,je.prevFromRect=null,je.fromRect=null,je.prevToRect=null,je.thisAnimationDuration=null},Ue),je.thisAnimationDuration=Ue)}),clearTimeout(r),C?r=setTimeout(function(){typeof E=="function"&&E()},R):typeof E=="function"&&E(),o=[]},animate:function(E,x,C,R){if(R){css(E,"transition",""),css(E,"transform","");var Ce=matrix(this.el),Ue=Ce&&Ce.a,je=Ce&&Ce.d,Xe=(x.left-C.left)/(Ue||1),Ye=(x.top-C.top)/(je||1);E.animatingX=!!Xe,E.animatingY=!!Ye,css(E,"transform","translate3d("+Xe+"px,"+Ye+"px,0)"),this.forRepaintDummy=repaint(E),css(E,"transition","transform "+R+"ms"+(this.options.easing?" "+this.options.easing:"")),css(E,"transform","translate3d(0,0,0)"),typeof E.animated=="number"&&clearTimeout(E.animated),E.animated=setTimeout(function(){css(E,"transition",""),css(E,"transform",""),E.animated=!1,E.animatingX=!1,E.animatingY=!1},R)}}}}function repaint(o){return o.offsetWidth}function calculateRealTime(o,r,S,E){return Math.sqrt(Math.pow(r.top-o.top,2)+Math.pow(r.left-o.left,2))/Math.sqrt(Math.pow(r.top-S.top,2)+Math.pow(r.left-S.left,2))*E.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function o(r){for(var S in defaults)defaults.hasOwnProperty(S)&&!(S in r)&&(r[S]=defaults[S]);plugins.forEach(function(E){if(E.pluginName===r.pluginName)throw"Sortable: Cannot mount plugin ".concat(r.pluginName," more than once")}),plugins.push(r)},pluginEvent:function o(r,S,E){var x=this;this.eventCanceled=!1,E.cancel=function(){x.eventCanceled=!0};var C=r+"Global";plugins.forEach(function(R){S[R.pluginName]&&(S[R.pluginName][C]&&S[R.pluginName][C](_objectSpread2({sortable:S},E)),S.options[R.pluginName]&&S[R.pluginName][r]&&S[R.pluginName][r](_objectSpread2({sortable:S},E)))})},initializePlugins:function o(r,S,E,x){plugins.forEach(function(Ce){var Ue=Ce.pluginName;if(!(!r.options[Ue]&&!Ce.initializeByDefault)){var je=new Ce(r,S,r.options);je.sortable=r,je.options=r.options,r[Ue]=je,_extends(E,je.defaults)}});for(var C in r.options)if(r.options.hasOwnProperty(C)){var R=this.modifyOption(r,C,r.options[C]);typeof R<"u"&&(r.options[C]=R)}},getEventProperties:function o(r,S){var E={};return plugins.forEach(function(x){typeof x.eventProperties=="function"&&_extends(E,x.eventProperties.call(S[x.pluginName],r))}),E},modifyOption:function o(r,S,E){var x;return plugins.forEach(function(C){r[C.pluginName]&&C.optionListeners&&typeof C.optionListeners[S]=="function"&&(x=C.optionListeners[S].call(r[C.pluginName],E))}),x}};function dispatchEvent(o){var r=o.sortable,S=o.rootEl,E=o.name,x=o.targetEl,C=o.cloneEl,R=o.toEl,Ce=o.fromEl,Ue=o.oldIndex,je=o.newIndex,Xe=o.oldDraggableIndex,Ye=o.newDraggableIndex,St=o.originalEvent,Dt=o.putSortable,kt=o.extraEventProperties;if(r=r||S&&S[expando],!!r){var et,Ft=r.options,xt="on"+E.charAt(0).toUpperCase()+E.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?et=new CustomEvent(E,{bubbles:!0,cancelable:!0}):(et=document.createEvent("Event"),et.initEvent(E,!0,!0)),et.to=R||S,et.from=Ce||S,et.item=x||S,et.clone=C,et.oldIndex=Ue,et.newIndex=je,et.oldDraggableIndex=Xe,et.newDraggableIndex=Ye,et.originalEvent=St,et.pullMode=Dt?Dt.lastPutMode:void 0;var Mt=_objectSpread2(_objectSpread2({},kt),PluginManager.getEventProperties(E,r));for(var Ot in Mt)et[Ot]=Mt[Ot];S&&S.dispatchEvent(et),Ft[xt]&&Ft[xt].call(r,et)}}var _excluded=["evt"],pluginEvent=function o(r,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=E.evt,C=_objectWithoutProperties(E,_excluded);PluginManager.pluginEvent.bind(Sortable)(r,S,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:x,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(Ce){_dispatchEvent({sortable:S,name:Ce,originalEvent:x})}},C))};function _dispatchEvent(o){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},o))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),_detectDirection=function o(r,S){var E=css(r),x=parseInt(E.width)-parseInt(E.paddingLeft)-parseInt(E.paddingRight)-parseInt(E.borderLeftWidth)-parseInt(E.borderRightWidth),C=getChild(r,0,S),R=getChild(r,1,S),Ce=C&&css(C),Ue=R&&css(R),je=Ce&&parseInt(Ce.marginLeft)+parseInt(Ce.marginRight)+getRect(C).width,Xe=Ue&&parseInt(Ue.marginLeft)+parseInt(Ue.marginRight)+getRect(R).width;if(E.display==="flex")return E.flexDirection==="column"||E.flexDirection==="column-reverse"?"vertical":"horizontal";if(E.display==="grid")return E.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(C&&Ce.float&&Ce.float!=="none"){var Ye=Ce.float==="left"?"left":"right";return R&&(Ue.clear==="both"||Ue.clear===Ye)?"vertical":"horizontal"}return C&&(Ce.display==="block"||Ce.display==="flex"||Ce.display==="table"||Ce.display==="grid"||je>=x&&E[CSSFloatProperty]==="none"||R&&E[CSSFloatProperty]==="none"&&je+Xe>x)?"vertical":"horizontal"},_dragElInRowColumn=function o(r,S,E){var x=E?r.left:r.top,C=E?r.right:r.bottom,R=E?r.width:r.height,Ce=E?S.left:S.top,Ue=E?S.right:S.bottom,je=E?S.width:S.height;return x===Ce||C===Ue||x+R/2===Ce+je/2},_detectNearestEmptySortable=function o(r,S){var E;return sortables.some(function(x){var C=x[expando].options.emptyInsertThreshold;if(!(!C||lastChild(x))){var R=getRect(x),Ce=r>=R.left-C&&r<=R.right+C,Ue=S>=R.top-C&&S<=R.bottom+C;if(Ce&&Ue)return E=x}}),E},_prepareGroup=function o(r){function S(C,R){return function(Ce,Ue,je,Xe){var Ye=Ce.options.group.name&&Ue.options.group.name&&Ce.options.group.name===Ue.options.group.name;if(C==null&&(R||Ye))return!0;if(C==null||C===!1)return!1;if(R&&C==="clone")return C;if(typeof C=="function")return S(C(Ce,Ue,je,Xe),R)(Ce,Ue,je,Xe);var St=(R?Ce:Ue).options.group.name;return C===!0||typeof C=="string"&&C===St||C.join&&C.indexOf(St)>-1}}var E={},x=r.group;(!x||_typeof(x)!="object")&&(x={name:x}),E.name=x.name,E.checkPull=S(x.pull,!0),E.checkPut=S(x.put),E.revertClone=x.revertClone,r.group=E},_hideGhostForTarget=function o(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function o(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",function(o){if(ignoreNextClick)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function o(r){if(dragEl){r=r.touches?r.touches[0]:r;var S=_detectNearestEmptySortable(r.clientX,r.clientY);if(S){var E={};for(var x in r)r.hasOwnProperty(x)&&(E[x]=r[x]);E.target=E.rootEl=S,E.preventDefault=void 0,E.stopPropagation=void 0,S[expando]._onDragOver(E)}}},_checkOutsideTargetEl=function o(r){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(r.target)};function Sortable(o,r){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=r=_extends({},r),o[expando]=this;var S={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(R,Ce){R.setData("Text",Ce.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,o,S);for(var E in S)!(E in r)&&(r[E]=S[E]);_prepareGroup(r);for(var x in this)x.charAt(0)==="_"&&typeof this[x]=="function"&&(this[x]=this[x].bind(this));this.nativeDraggable=r.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),r.supportPointer?on(o,"pointerdown",this._onTapStart):(on(o,"mousedown",this._onTapStart),on(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(o,"dragover",this),on(o,"dragenter",this)),sortables.push(this.el),r.store&&r.store.get&&this.sort(r.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function o(r){!this.el.contains(r)&&r!==this.el&&(lastTarget=null)},_getDirection:function o(r,S){return typeof this.options.direction=="function"?this.options.direction.call(this,r,S,dragEl):this.options.direction},_onTapStart:function o(r){if(r.cancelable){var S=this,E=this.el,x=this.options,C=x.preventOnFilter,R=r.type,Ce=r.touches&&r.touches[0]||r.pointerType&&r.pointerType==="touch"&&r,Ue=(Ce||r).target,je=r.target.shadowRoot&&(r.path&&r.path[0]||r.composedPath&&r.composedPath()[0])||Ue,Xe=x.filter;if(_saveInputCheckedState(E),!dragEl&&!(/mousedown|pointerdown/.test(R)&&r.button!==0||x.disabled)&&!je.isContentEditable&&!(!this.nativeDraggable&&Safari&&Ue&&Ue.tagName.toUpperCase()==="SELECT")&&(Ue=closest(Ue,x.draggable,E,!1),!(Ue&&Ue.animated)&&lastDownEl!==Ue)){if(oldIndex=index(Ue),oldDraggableIndex=index(Ue,x.draggable),typeof Xe=="function"){if(Xe.call(this,r,Ue,this)){_dispatchEvent({sortable:S,rootEl:je,name:"filter",targetEl:Ue,toEl:E,fromEl:E}),pluginEvent("filter",S,{evt:r}),C&&r.cancelable&&r.preventDefault();return}}else if(Xe&&(Xe=Xe.split(",").some(function(Ye){if(Ye=closest(je,Ye.trim(),E,!1),Ye)return _dispatchEvent({sortable:S,rootEl:Ye,name:"filter",targetEl:Ue,fromEl:E,toEl:E}),pluginEvent("filter",S,{evt:r}),!0}),Xe)){C&&r.cancelable&&r.preventDefault();return}x.handle&&!closest(je,x.handle,E,!1)||this._prepareDragStart(r,Ce,Ue)}}},_prepareDragStart:function o(r,S,E){var x=this,C=x.el,R=x.options,Ce=C.ownerDocument,Ue;if(E&&!dragEl&&E.parentNode===C){var je=getRect(E);if(rootEl=C,dragEl=E,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=E,activeGroup=R.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(S||r).clientX,clientY:(S||r).clientY},tapDistanceLeft=tapEvt.clientX-je.left,tapDistanceTop=tapEvt.clientY-je.top,this._lastX=(S||r).clientX,this._lastY=(S||r).clientY,dragEl.style["will-change"]="all",Ue=function(){if(pluginEvent("delayEnded",x,{evt:r}),Sortable.eventCanceled){x._onDrop();return}x._disableDelayedDragEvents(),!FireFox&&x.nativeDraggable&&(dragEl.draggable=!0),x._triggerDragStart(r,S),_dispatchEvent({sortable:x,name:"choose",originalEvent:r}),toggleClass(dragEl,R.chosenClass,!0)},R.ignore.split(",").forEach(function(Xe){find(dragEl,Xe.trim(),_disableDraggable)}),on(Ce,"dragover",nearestEmptyInsertDetectEvent),on(Ce,"mousemove",nearestEmptyInsertDetectEvent),on(Ce,"touchmove",nearestEmptyInsertDetectEvent),on(Ce,"mouseup",x._onDrop),on(Ce,"touchend",x._onDrop),on(Ce,"touchcancel",x._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:r}),R.delay&&(!R.delayOnTouchOnly||S)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(Ce,"mouseup",x._disableDelayedDrag),on(Ce,"touchend",x._disableDelayedDrag),on(Ce,"touchcancel",x._disableDelayedDrag),on(Ce,"mousemove",x._delayedDragTouchMoveHandler),on(Ce,"touchmove",x._delayedDragTouchMoveHandler),R.supportPointer&&on(Ce,"pointermove",x._delayedDragTouchMoveHandler),x._dragStartTimer=setTimeout(Ue,R.delay)}else Ue()}},_delayedDragTouchMoveHandler:function o(r){var S=r.touches?r.touches[0]:r;Math.max(Math.abs(S.clientX-this._lastX),Math.abs(S.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function o(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function o(){var r=this.el.ownerDocument;off(r,"mouseup",this._disableDelayedDrag),off(r,"touchend",this._disableDelayedDrag),off(r,"touchcancel",this._disableDelayedDrag),off(r,"mousemove",this._delayedDragTouchMoveHandler),off(r,"touchmove",this._delayedDragTouchMoveHandler),off(r,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function o(r,S){S=S||r.pointerType=="touch"&&r,!this.nativeDraggable||S?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):S?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function o(r,S){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:S}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var E=this.options;!r&&toggleClass(dragEl,E.dragClass,!1),toggleClass(dragEl,E.ghostClass,!0),Sortable.active=this,r&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:S})}else this._nulling()},_emulateDragOver:function o(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var r=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),S=r;r&&r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),r!==S);)S=r;if(dragEl.parentNode[expando]._isOutsideThisEl(r),S)do{if(S[expando]){var E=void 0;if(E=S[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:r,rootEl:S}),E&&!this.options.dragoverBubble)break}r=S}while(S=S.parentNode);_unhideGhostForTarget()}},_onTouchMove:function o(r){if(tapEvt){var S=this.options,E=S.fallbackTolerance,x=S.fallbackOffset,C=r.touches?r.touches[0]:r,R=ghostEl&&matrix(ghostEl,!0),Ce=ghostEl&&R&&R.a,Ue=ghostEl&&R&&R.d,je=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),Xe=(C.clientX-tapEvt.clientX+x.x)/(Ce||1)+(je?je[0]-ghostRelativeParentInitialScroll[0]:0)/(Ce||1),Ye=(C.clientY-tapEvt.clientY+x.y)/(Ue||1)+(je?je[1]-ghostRelativeParentInitialScroll[1]:0)/(Ue||1);if(!Sortable.active&&!awaitingDragStarted){if(E&&Math.max(Math.abs(C.clientX-this._lastX),Math.abs(C.clientY-this._lastY))<E)return;this._onDragStart(r,!0)}if(ghostEl){R?(R.e+=Xe-(lastDx||0),R.f+=Ye-(lastDy||0)):R={a:1,b:0,c:0,d:1,e:Xe,f:Ye};var St="matrix(".concat(R.a,",").concat(R.b,",").concat(R.c,",").concat(R.d,",").concat(R.e,",").concat(R.f,")");css(ghostEl,"webkitTransform",St),css(ghostEl,"mozTransform",St),css(ghostEl,"msTransform",St),css(ghostEl,"transform",St),lastDx=Xe,lastDy=Ye,touchEvt=C}r.cancelable&&r.preventDefault()}},_appendGhost:function o(){if(!ghostEl){var r=this.options.fallbackOnBody?document.body:rootEl,S=getRect(dragEl,!0,PositionGhostAbsolutely,!0,r),E=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=r;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),S.top+=ghostRelativeParent.scrollTop,S.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,E.ghostClass,!1),toggleClass(ghostEl,E.fallbackClass,!0),toggleClass(ghostEl,E.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",S.top),css(ghostEl,"left",S.left),css(ghostEl,"width",S.width),css(ghostEl,"height",S.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,r.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function o(r,S){var E=this,x=r.dataTransfer,C=E.options;if(pluginEvent("dragStart",this,{evt:r}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),E.cloneId=_nextTick(function(){pluginEvent("clone",E),!Sortable.eventCanceled&&(E.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),E._hideClone(),_dispatchEvent({sortable:E,name:"clone"}))}),!S&&toggleClass(dragEl,C.dragClass,!0),S?(ignoreNextClick=!0,E._loopId=setInterval(E._emulateDragOver,50)):(off(document,"mouseup",E._onDrop),off(document,"touchend",E._onDrop),off(document,"touchcancel",E._onDrop),x&&(x.effectAllowed="move",C.setData&&C.setData.call(E,x,dragEl)),on(document,"drop",E),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,E._dragStartId=_nextTick(E._dragStarted.bind(E,S,r)),on(document,"selectstart",E),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function o(r){var S=this.el,E=r.target,x,C,R,Ce=this.options,Ue=Ce.group,je=Sortable.active,Xe=activeGroup===Ue,Ye=Ce.sort,St=putSortable||je,Dt,kt=this,et=!1;if(_silent)return;function Ft(ri,ni){pluginEvent(ri,kt,_objectSpread2({evt:r,isOwner:Xe,axis:Dt?"vertical":"horizontal",revert:R,dragRect:x,targetRect:C,canSort:Ye,fromSortable:St,target:E,completed:Mt,onMove:function(Si,qi){return _onMove(rootEl,S,dragEl,x,Si,getRect(Si),r,qi)},changed:Ot},ni))}function xt(){Ft("dragOverAnimationCapture"),kt.captureAnimationState(),kt!==St&&St.captureAnimationState()}function Mt(ri){return Ft("dragOverCompleted",{insertion:ri}),ri&&(Xe?je._hideClone():je._showClone(kt),kt!==St&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:je.options.ghostClass,!1),toggleClass(dragEl,Ce.ghostClass,!0)),putSortable!==kt&&kt!==Sortable.active?putSortable=kt:kt===Sortable.active&&putSortable&&(putSortable=null),St===kt&&(kt._ignoreWhileAnimating=E),kt.animateAll(function(){Ft("dragOverAnimationComplete"),kt._ignoreWhileAnimating=null}),kt!==St&&(St.animateAll(),St._ignoreWhileAnimating=null)),(E===dragEl&&!dragEl.animated||E===S&&!E.animated)&&(lastTarget=null),!Ce.dragoverBubble&&!r.rootEl&&E!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(r.target),!ri&&nearestEmptyInsertDetectEvent(r)),!Ce.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),et=!0}function Ot(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,Ce.draggable),_dispatchEvent({sortable:kt,name:"change",toEl:S,newIndex,newDraggableIndex,originalEvent:r})}if(r.preventDefault!==void 0&&r.cancelable&&r.preventDefault(),E=closest(E,Ce.draggable,S,!0),Ft("dragOver"),Sortable.eventCanceled)return et;if(dragEl.contains(r.target)||E.animated&&E.animatingX&&E.animatingY||kt._ignoreWhileAnimating===E)return Mt(!1);if(ignoreNextClick=!1,je&&!Ce.disabled&&(Xe?Ye||(R=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,je,dragEl,r))&&Ue.checkPut(this,je,dragEl,r))){if(Dt=this._getDirection(r,E)==="vertical",x=getRect(dragEl),Ft("dragOverValid"),Sortable.eventCanceled)return et;if(R)return parentEl=rootEl,xt(),this._hideClone(),Ft("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),Mt(!0);var Ut=lastChild(S,Ce.draggable);if(!Ut||_ghostIsLast(r,Dt,this)&&!Ut.animated){if(Ut===dragEl)return Mt(!1);if(Ut&&S===r.target&&(E=Ut),E&&(C=getRect(E)),_onMove(rootEl,S,dragEl,x,E,C,r,!!E)!==!1)return xt(),S.appendChild(dragEl),parentEl=S,Ot(),Mt(!0)}else if(Ut&&_ghostIsFirst(r,Dt,this)){var Xt=getChild(S,0,Ce,!0);if(Xt===dragEl)return Mt(!1);if(E=Xt,C=getRect(E),_onMove(rootEl,S,dragEl,x,E,C,r,!1)!==!1)return xt(),S.insertBefore(dragEl,Xt),parentEl=S,Ot(),Mt(!0)}else if(E.parentNode===S){C=getRect(E);var ei=0,si,li=dragEl.parentNode!==S,bi=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||x,E.animated&&E.toRect||C,Dt),wi=Dt?"top":"left",Pi=isScrolledPast(E,"top","top")||isScrolledPast(dragEl,"top","top"),Ci=Pi?Pi.scrollTop:void 0;lastTarget!==E&&(si=C[wi],pastFirstInvertThresh=!1,isCircumstantialInvert=!bi&&Ce.invertSwap||li),ei=_getSwapDirection(r,E,C,Dt,bi?1:Ce.swapThreshold,Ce.invertedSwapThreshold==null?Ce.swapThreshold:Ce.invertedSwapThreshold,isCircumstantialInvert,lastTarget===E);var Di;if(ei!==0){var Bi=index(dragEl);do Bi-=ei,Di=parentEl.children[Bi];while(Di&&(css(Di,"display")==="none"||Di===ghostEl))}if(ei===0||Di===E)return Mt(!1);lastTarget=E,lastDirection=ei;var Ri=E.nextElementSibling,oi=!1;oi=ei===1;var mi=_onMove(rootEl,S,dragEl,x,E,C,r,oi);if(mi!==!1)return(mi===1||mi===-1)&&(oi=mi===1),_silent=!0,setTimeout(_unsilent,30),xt(),oi&&!Ri?S.appendChild(dragEl):E.parentNode.insertBefore(dragEl,oi?Ri:E),Pi&&scrollBy(Pi,0,Ci-Pi.scrollTop),parentEl=dragEl.parentNode,si!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(si-getRect(E)[wi])),Ot(),Mt(!0)}if(S.contains(dragEl))return Mt(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function o(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function o(){var r=this.el.ownerDocument;off(r,"mouseup",this._onDrop),off(r,"touchend",this._onDrop),off(r,"pointerup",this._onDrop),off(r,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function o(r){var S=this.el,E=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,E.draggable),pluginEvent("drop",this,{evt:r}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,E.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(S,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),r&&(moved&&(r.cancelable&&r.preventDefault(),!E.dropBubble&&r.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:r}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:r}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:r}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:r}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:r})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:r}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:r})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:r}),this.save()))),this._nulling()},_nulling:function o(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(r){r.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function o(r){switch(r.type){case"drop":case"dragend":this._onDrop(r);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(r),_globalDragOver(r));break;case"selectstart":r.preventDefault();break}},toArray:function o(){for(var r=[],S,E=this.el.children,x=0,C=E.length,R=this.options;x<C;x++)S=E[x],closest(S,R.draggable,this.el,!1)&&r.push(S.getAttribute(R.dataIdAttr)||_generateId(S));return r},sort:function o(r,S){var E={},x=this.el;this.toArray().forEach(function(C,R){var Ce=x.children[R];closest(Ce,this.options.draggable,x,!1)&&(E[C]=Ce)},this),S&&this.captureAnimationState(),r.forEach(function(C){E[C]&&(x.removeChild(E[C]),x.appendChild(E[C]))}),S&&this.animateAll()},save:function o(){var r=this.options.store;r&&r.set&&r.set(this)},closest:function o(r,S){return closest(r,S||this.options.draggable,this.el,!1)},option:function o(r,S){var E=this.options;if(S===void 0)return E[r];var x=PluginManager.modifyOption(this,r,S);typeof x<"u"?E[r]=x:E[r]=S,r==="group"&&_prepareGroup(E)},destroy:function o(){pluginEvent("destroy",this);var r=this.el;r[expando]=null,off(r,"mousedown",this._onTapStart),off(r,"touchstart",this._onTapStart),off(r,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(r,"dragover",this),off(r,"dragenter",this)),Array.prototype.forEach.call(r.querySelectorAll("[draggable]"),function(S){S.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=r=null},_hideClone:function o(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function o(r){if(r.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function _onMove(o,r,S,E,x,C,R,Ce){var Ue,je=o[expando],Xe=je.options.onMove,Ye;return window.CustomEvent&&!IE11OrLess&&!Edge?Ue=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Ue=document.createEvent("Event"),Ue.initEvent("move",!0,!0)),Ue.to=r,Ue.from=o,Ue.dragged=S,Ue.draggedRect=E,Ue.related=x||r,Ue.relatedRect=C||getRect(r),Ue.willInsertAfter=Ce,Ue.originalEvent=R,o.dispatchEvent(Ue),Xe&&(Ye=Xe.call(je,Ue,R)),Ye}function _disableDraggable(o){o.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(o,r,S){var E=getRect(getChild(S.el,0,S.options,!0)),x=10;return r?o.clientX<E.left-x||o.clientY<E.top&&o.clientX<E.right:o.clientY<E.top-x||o.clientY<E.bottom&&o.clientX<E.left}function _ghostIsLast(o,r,S){var E=getRect(lastChild(S.el,S.options.draggable)),x=10;return r?o.clientX>E.right+x||o.clientX<=E.right&&o.clientY>E.bottom&&o.clientX>=E.left:o.clientX>E.right&&o.clientY>E.top||o.clientX<=E.right&&o.clientY>E.bottom+x}function _getSwapDirection(o,r,S,E,x,C,R,Ce){var Ue=E?o.clientY:o.clientX,je=E?S.height:S.width,Xe=E?S.top:S.left,Ye=E?S.bottom:S.right,St=!1;if(!R){if(Ce&&targetMoveDistance<je*x){if(!pastFirstInvertThresh&&(lastDirection===1?Ue>Xe+je*C/2:Ue<Ye-je*C/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)St=!0;else if(lastDirection===1?Ue<Xe+targetMoveDistance:Ue>Ye-targetMoveDistance)return-lastDirection}else if(Ue>Xe+je*(1-x)/2&&Ue<Ye-je*(1-x)/2)return _getInsertDirection(r)}return St=St||R,St&&(Ue<Xe+je*C/2||Ue>Ye-je*C/2)?Ue>Xe+je/2?1:-1:0}function _getInsertDirection(o){return index(dragEl)<index(o)?1:-1}function _generateId(o){for(var r=o.tagName+o.className+o.src+o.href+o.textContent,S=r.length,E=0;S--;)E+=r.charCodeAt(S);return E.toString(36)}function _saveInputCheckedState(o){savedInputChecked.length=0;for(var r=o.getElementsByTagName("input"),S=r.length;S--;){var E=r[S];E.checked&&savedInputChecked.push(E)}}function _nextTick(o){return setTimeout(o,0)}function _cancelNextTick(o){return clearTimeout(o)}documentExists&&on(document,"touchmove",function(o){(Sortable.active||awaitingDragStarted)&&o.cancelable&&o.preventDefault()});Sortable.utils={on,off,css,find,is:function o(r,S){return!!closest(r,S,r,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(o){return o[expando]};Sortable.mount=function(){for(var o=arguments.length,r=new Array(o),S=0;S<o;S++)r[S]=arguments[S];r[0].constructor===Array&&(r=r[0]),r.forEach(function(E){if(!E.prototype||!E.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(E));E.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),E.utils)),PluginManager.mount(E)})};Sortable.create=function(o,r){return new Sortable(o,r)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this))}return o.prototype={dragStarted:function(S){var E=S.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):E.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(S){var E=S.originalEvent;!this.options.dragOverBubble&&!E.rootEl&&this._handleAutoScroll(E)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(S){this._handleAutoScroll(S,!0)},_handleAutoScroll:function(S,E){var x=this,C=(S.touches?S.touches[0]:S).clientX,R=(S.touches?S.touches[0]:S).clientY,Ce=document.elementFromPoint(C,R);if(touchEvt$1=S,E||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(S,this.options,Ce,E);var Ue=getParentAutoScrollElement(Ce,!0);scrolling&&(!pointerElemChangedInterval||C!==lastAutoScrollX||R!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var je=getParentAutoScrollElement(document.elementFromPoint(C,R),!0);je!==Ue&&(Ue=je,clearAutoScrolls()),autoScroll(S,x.options,je,E)},10),lastAutoScrollX=C,lastAutoScrollY=R)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(Ce,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(S,this.options,getParentAutoScrollElement(Ce,!1),!1)}}},_extends(o,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(o){clearInterval(o.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(o,r,S,E){if(r.scroll){var x=(o.touches?o.touches[0]:o).clientX,C=(o.touches?o.touches[0]:o).clientY,R=r.scrollSensitivity,Ce=r.scrollSpeed,Ue=getWindowScrollingElement(),je=!1,Xe;scrollRootEl!==S&&(scrollRootEl=S,clearAutoScrolls(),scrollEl=r.scroll,Xe=r.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(S,!0)));var Ye=0,St=scrollEl;do{var Dt=St,kt=getRect(Dt),et=kt.top,Ft=kt.bottom,xt=kt.left,Mt=kt.right,Ot=kt.width,Ut=kt.height,Xt=void 0,ei=void 0,si=Dt.scrollWidth,li=Dt.scrollHeight,bi=css(Dt),wi=Dt.scrollLeft,Pi=Dt.scrollTop;Dt===Ue?(Xt=Ot<si&&(bi.overflowX==="auto"||bi.overflowX==="scroll"||bi.overflowX==="visible"),ei=Ut<li&&(bi.overflowY==="auto"||bi.overflowY==="scroll"||bi.overflowY==="visible")):(Xt=Ot<si&&(bi.overflowX==="auto"||bi.overflowX==="scroll"),ei=Ut<li&&(bi.overflowY==="auto"||bi.overflowY==="scroll"));var Ci=Xt&&(Math.abs(Mt-x)<=R&&wi+Ot<si)-(Math.abs(xt-x)<=R&&!!wi),Di=ei&&(Math.abs(Ft-C)<=R&&Pi+Ut<li)-(Math.abs(et-C)<=R&&!!Pi);if(!autoScrolls[Ye])for(var Bi=0;Bi<=Ye;Bi++)autoScrolls[Bi]||(autoScrolls[Bi]={});(autoScrolls[Ye].vx!=Ci||autoScrolls[Ye].vy!=Di||autoScrolls[Ye].el!==Dt)&&(autoScrolls[Ye].el=Dt,autoScrolls[Ye].vx=Ci,autoScrolls[Ye].vy=Di,clearInterval(autoScrolls[Ye].pid),(Ci!=0||Di!=0)&&(je=!0,autoScrolls[Ye].pid=setInterval((function(){E&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Ri=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*Ce:0,oi=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*Ce:0;typeof Xe=="function"&&Xe.call(Sortable.dragged.parentNode[expando],oi,Ri,o,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,oi,Ri)}).bind({layer:Ye}),24))),Ye++}while(r.bubbleScroll&&St!==Ue&&(St=getParentAutoScrollElement(St,!1)));scrolling=je}},30),drop=function o(r){var S=r.originalEvent,E=r.putSortable,x=r.dragEl,C=r.activeSortable,R=r.dispatchSortableEvent,Ce=r.hideGhostForTarget,Ue=r.unhideGhostForTarget;if(S){var je=E||C;Ce();var Xe=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:S,Ye=document.elementFromPoint(Xe.clientX,Xe.clientY);Ue(),je&&!je.el.contains(Ye)&&(R("spill"),this.onSpill({dragEl:x,putSortable:E}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function o(r){var S=r.oldDraggableIndex;this.startIndex=S},onSpill:function o(r){var S=r.dragEl,E=r.putSortable;this.sortable.captureAnimationState(),E&&E.captureAnimationState();var x=getChild(this.sortable.el,this.startIndex,this.options);x?this.sortable.el.insertBefore(S,x):this.sortable.el.appendChild(S),this.sortable.animateAll(),E&&E.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function o(r){var S=r.dragEl,E=r.putSortable,x=E||this.sortable;x.captureAnimationState(),S.parentNode&&S.parentNode.removeChild(S),x.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);function getConsole(){return typeof window<"u"?window.console:global.console}const console$1=getConsole();function cached(o){const r=Object.create(null);return function(E){return r[E]||(r[E]=o(E))}}const regex=/-(\w)/g,camelize=cached(o=>o.replace(regex,(r,S)=>S?S.toUpperCase():""));function removeNode(o){o.parentElement!==null&&o.parentElement.removeChild(o)}function insertNodeAt(o,r,S){const E=S===0?o.children[0]:o.children[S-1].nextSibling;o.insertBefore(r,E)}function computeVmIndex(o,r){return Object.values(o).indexOf(r)}function computeIndexes(o,r,S,E){if(!o)return[];const x=Object.values(o),C=r.length-E;return[...r].map((Ce,Ue)=>Ue>=C?x.length:x.indexOf(Ce))}function emit(o,r){this.$nextTick(()=>this.$emit(o.toLowerCase(),r))}function delegateAndEmit(o){return r=>{this.realList!==null&&this["onDrag"+o](r),emit.call(this,o,r)}}function isTransitionName(o){return["transition-group","TransitionGroup"].includes(o)}function isTransition(o){if(!o||o.length!==1)return!1;const[{type:r}]=o;return r?isTransitionName(r.name):!1}function getComponentAttributes(o,r){return r?{...r.props,...r.attrs}:o}const eventsListened=["Start","Add","Remove","Update","End"],eventsToEmit=["Choose","Unchoose","Sort","Filter","Clone"],readonlyProperties=["Move",...eventsListened,...eventsToEmit].map(o=>"on"+o);let draggingElement=null;const props={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:o=>o},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},VueDraggableNext=defineComponent({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...eventsListened.map(o=>o.toLowerCase()),...eventsToEmit.map(o=>o.toLowerCase())],props,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const o=this.$slots.default?this.$slots.default():null,r=getComponentAttributes(this.$attrs,this.componentData);return o?(this.transitionMode=isTransition(o),h$1(this.getTag(),r,o)):h$1(this.getTag(),r,[])},created(){this.list!==null&&this.modelValue!==null&&console$1.error("list props are mutually exclusive! Please set one.")},mounted(){const o={};eventsListened.forEach(x=>{o["on"+x]=delegateAndEmit.call(this,x)}),eventsToEmit.forEach(x=>{o["on"+x]=emit.bind(this,x)});const r=Object.keys(this.$attrs).reduce((x,C)=>(x[camelize(C)]=this.$attrs[C],x),{}),S=Object.assign({},r,o,{onMove:(x,C)=>this.onDragMove(x,C)});!("draggable"in S)&&(S.draggable=">*");const E=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Sortable(E,S),E.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(o){this.updateOptions(o)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?resolveComponent(this.component):this.tag},updateOptions(o){for(var r in o){const S=camelize(r);readonlyProperties.indexOf(S)===-1&&this._sortable.option(S,o[r])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=computeIndexes(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(o){const r=computeVmIndex(this.getChildrenNodes()||[],o);if(r===-1)return null;const S=this.realList[r];return{index:r,element:S}},emitChanges(o){this.$nextTick(()=>{this.$emit("change",o)})},alterList(o){if(this.list){o(this.list);return}const r=[...this.modelValue];o(r),this.$emit("update:modelValue",r)},spliceList(){const o=r=>r.splice(...arguments);this.alterList(o)},updatePosition(o,r){const S=E=>E.splice(r,0,E.splice(o,1)[0]);this.alterList(S)},getVmIndex(o){const r=this.visibleIndexes,S=r.length;return o>S-1?S:r[o]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(o){if(!this.noTransitionOnDrag||!this.transitionMode)return;var r=this.getChildrenNodes();r[o].data=null;const S=this.getComponent();S.children=[],S.kept=void 0},onDragStart(o){this.computeIndexes(),this.context=this.getUnderlyingVm(o.item),this.context&&(o.item._underlying_vm_=this.clone(this.context.element),draggingElement=o.item)},onDragAdd(o){const r=o.item._underlying_vm_;if(r===void 0)return;removeNode(o.item);const S=this.getVmIndex(o.newIndex);this.spliceList(S,0,r),this.computeIndexes();const E={element:r,newIndex:S};this.emitChanges({added:E})},onDragRemove(o){if(insertNodeAt(this.$el,o.item,o.oldIndex),o.pullMode==="clone"){removeNode(o.clone);return}if(!this.context)return;const r=this.context.index;this.spliceList(r,1);const S={element:this.context.element,oldIndex:r};this.resetTransitionData(r),this.emitChanges({removed:S})},onDragUpdate(o){removeNode(o.item),insertNodeAt(o.from,o.item,o.oldIndex);const r=this.context.index,S=this.getVmIndex(o.newIndex);this.updatePosition(r,S);const E={element:this.context.element,oldIndex:r,newIndex:S};this.emitChanges({moved:E})},updateProperty(o,r){o.hasOwnProperty(r)&&(o[r]+=this.headerOffset)},onDragMove(o,r){const S=this.move;if(!S||!this.realList)return!0;const E=this.getRelatedContextFromMoveEvent(o),x=this.context,C=this.computeFutureIndex(E,o);Object.assign(x,{futureIndex:C});const R=Object.assign({},o,{relatedContext:E,draggedContext:x});return S(R,r)},onDragEnd(){this.computeIndexes(),draggingElement=null},getTrargetedComponent(o){return o.__draggable_component__},getRelatedContextFromMoveEvent({to:o,related:r}){const S=this.getTrargetedComponent(o);if(!S)return{component:S};const E=S.realList,x={list:E,component:S};if(o!==r&&E&&S.getUnderlyingVm){const C=S.getUnderlyingVm(r);if(C)return Object.assign(C,x)}return x},computeFutureIndex(o,r){const S=[...r.to.children].filter(R=>R.style.display!=="none");if(S.length===0)return 0;const E=S.indexOf(r.related),x=o.component.getVmIndex(E);return S.indexOf(draggingElement)!==-1||!r.willInsertAfter?x:x+1}}});var bugsnag={exports:{}};(function(o,r){(function(S){o.exports=S()})(function(){var S=["navigation","request","process","log","user","state","error","manual"],E=function(ti,ai,ci){for(var ui=ci,Ti=0,ki=ti.length;Ti<ki;Ti++)ui=ai(ui,ti[Ti],Ti,ti);return ui},x=function(ti,ai){return E(ti,function(ci,ui,Ti,ki){return ai(ui,Ti,ki)?ci.concat(ui):ci},[])},C=function(ti,ai){return E(ti,function(ci,ui,Ti,ki){return ci===!0||ui===ai},!1)},R=function(ti){return Object.prototype.toString.call(ti)==="[object Array]"},Ce=!{toString:null}.propertyIsEnumerable("toString"),Ue=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],je=function(ti){var ai=[],ci;for(ci in ti)Object.prototype.hasOwnProperty.call(ti,ci)&&ai.push(ci);if(!Ce)return ai;for(var ui=0,Ti=Ue.length;ui<Ti;ui++)Object.prototype.hasOwnProperty.call(ti,Ue[ui])&&ai.push(Ue[ui]);return ai},Xe=function(ti,ai){return ti===void 0&&(ti=1),function(ci){return typeof ci=="number"&&parseInt(""+ci,10)===ci&&ci>=ti&&ci<=ai}},Ye=function(ti){return typeof ti=="function"||R(ti)&&x(ti,function(ai){return typeof ai=="function"}).length===ti.length},St=function(ti){return typeof ti=="string"&&!!ti.length},Dt={},kt=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};Dt.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:St},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(ti){return ti===void 0||St(ti)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(ti){return ti===void 0||St(ti)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(ti){return ti===!0||ti===!1}},enabledErrorTypes:{defaultValue:function(){return kt()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(ti){if(typeof ti!="object"||!ti)return!1;var ai=je(ti),ci=je(kt());return!(x(ai,function(ui){return C(ci,ui)}).length<ai.length||x(je(ti),function(ui){return typeof ti[ui]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:Ye},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:Ye},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:Ye},endpoints:{defaultValue:function(ti){return typeof ti>"u"?{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}:{notify:null,sessions:null}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(ti){return ti&&typeof ti=="object"&&St(ti.notify)&&St(ti.sessions)&&x(je(ti),function(ai){return!C(["notify","sessions"],ai)}).length===0}},autoTrackSessions:{defaultValue:function(ti){return!0},message:"should be true|false",validate:function(ti){return ti===!0||ti===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(ti){return ti===null||R(ti)&&x(ti,function(ai){return typeof ai=="string"}).length===ti.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(ti){return typeof ti=="string"&&ti.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number 100",validate:function(ti){return Xe(0,100)(ti)}},enabledBreadcrumbTypes:{defaultValue:function(){return S},message:"should be null or a list of available breadcrumb types ("+S.join(",")+")",validate:function(ti){return ti===null||R(ti)&&E(ti,function(ai,ci){return ai===!1?ai:C(S,ci)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(ti){return ti===void 0||typeof ti=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(ti){return ti===null||ti&&E(je(ti),function(ai,ci){return ai&&C(["id","email","name"],ci)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(ti){return typeof ti=="object"&&ti!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(ti){return!ti||ti&&E(["debug","info","warn","error"],function(ai,ci){return ai&&typeof ti[ci]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(ti){return R(ti)&&ti.length===x(ti,function(ai){return typeof ai=="string"||ai&&typeof ai.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(ti){return R(ti)&&ti.length===x(ti,function(ai){return ai&&typeof ai=="object"&&typeof ai.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(ti){return R(ti)&&ti.length===x(ti,function(ai){return ai&&typeof ai=="object"&&typeof ai.name=="string"}).length}},reportUnhandledPromiseRejectionsAsHandled:{defaultValue:function(){return!1},message:"should be true|false",validate:function(ti){return ti===!0||ti===!1}}};var et=function(ti){for(var ai=1;ai<arguments.length;ai++){var ci=arguments[ai];for(var ui in ci)Object.prototype.hasOwnProperty.call(ci,ui)&&(ti[ui]=ci[ui])}return ti},Ft=function(ti,ai){return E(ti,function(ci,ui,Ti,ki){return ci.concat(ai(ui,Ti,ki))},[])};function xt(){return xt=Object.assign?Object.assign.bind():function(ti){for(var ai=1;ai<arguments.length;ai++){var ci=arguments[ai];for(var ui in ci)Object.prototype.hasOwnProperty.call(ci,ui)&&(ti[ui]=ci[ui])}return ti},xt.apply(this,arguments)}var Mt=Dt.schema,Ot={releaseStage:et({},Mt.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:xt({},Mt.appType,{defaultValue:function(){return"browser"}}),logger:et({},Mt.logger,{defaultValue:function(){return typeof console<"u"&&typeof console.debug=="function"?Ut():void 0}})},Ut=function(){var ti={},ai=console.log;return Ft(["debug","info","warn","error"],function(ci){var ui=console[ci];ti[ci]=typeof ui=="function"?ui.bind(console,"[bugsnag]"):ai.bind(console,"[bugsnag]")}),ti},Xt=function(){function ti(ci,ui,Ti,ki){ki===void 0&&(ki=new Date),this.type=Ti,this.message=ci,this.metadata=ui,this.timestamp=ki}var ai=ti.prototype;return ai.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},ti}(),ei=Xt,si={};(function(ti,ai){typeof si=="object"?si=ai():ti.StackFrame=ai()})(this,function(){function ti(nr){return!isNaN(parseFloat(nr))&&isFinite(nr)}function ai(nr){return nr.charAt(0).toUpperCase()+nr.substring(1)}function ci(nr){return function(){return this[nr]}}var ui=["isConstructor","isEval","isNative","isToplevel"],Ti=["columnNumber","lineNumber"],ki=["fileName","functionName","source"],Ii=["args"],Ki=["evalOrigin"],Ui=ui.concat(Ti,ki,Ii,Ki);function Zi(nr){if(nr)for(var pr=0;pr<Ui.length;pr++)nr[Ui[pr]]!==void 0&&this["set"+ai(Ui[pr])](nr[Ui[pr]])}Zi.prototype={getArgs:function(){return this.args},setArgs:function(nr){if(Object.prototype.toString.call(nr)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=nr},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(nr){if(nr instanceof Zi)this.evalOrigin=nr;else if(nr instanceof Object)this.evalOrigin=new Zi(nr);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var nr=this.getFileName()||"",pr=this.getLineNumber()||"",wr=this.getColumnNumber()||"",dr=this.getFunctionName()||"";return this.getIsEval()?nr?"[eval] ("+nr+":"+pr+":"+wr+")":"[eval]:"+pr+":"+wr:dr?dr+" ("+nr+":"+pr+":"+wr+")":nr+":"+pr+":"+wr}},Zi.fromString=function(pr){var wr=pr.indexOf("("),dr=pr.lastIndexOf(")"),Tr=pr.substring(0,wr),Or=pr.substring(wr+1,dr).split(","),Ir=pr.substring(dr+1);if(Ir.indexOf("@")===0)var Lr=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(Ir,""),Dr=Lr[1],Zr=Lr[2],Sn=Lr[3];return new Zi({functionName:Tr,args:Or||void 0,fileName:Dr,lineNumber:Zr||void 0,columnNumber:Sn||void 0})};for(var tr=0;tr<ui.length;tr++)Zi.prototype["get"+ai(ui[tr])]=ci(ui[tr]),Zi.prototype["set"+ai(ui[tr])]=function(nr){return function(pr){this[nr]=!!pr}}(ui[tr]);for(var cr=0;cr<Ti.length;cr++)Zi.prototype["get"+ai(Ti[cr])]=ci(Ti[cr]),Zi.prototype["set"+ai(Ti[cr])]=function(nr){return function(pr){if(!ti(pr))throw new TypeError(nr+" must be a Number");this[nr]=Number(pr)}}(Ti[cr]);for(var zi=0;zi<ki.length;zi++)Zi.prototype["get"+ai(ki[zi])]=ci(ki[zi]),Zi.prototype["set"+ai(ki[zi])]=function(nr){return function(pr){this[nr]=String(pr)}}(ki[zi]);return Zi});var li={};(function(ti,ai){typeof li=="object"?li=ai(si):ti.StackGenerator=ai(ti.StackFrame)})(this,function(ti){return{backtrace:function(ci){var ui=[],Ti=10;typeof ci=="object"&&typeof ci.maxStackSize=="number"&&(Ti=ci.maxStackSize);for(var ki=arguments.callee;ki&&ui.length<Ti&&ki.arguments;){for(var Ii=new Array(ki.arguments.length),Ki=0;Ki<Ii.length;++Ki)Ii[Ki]=ki.arguments[Ki];/function(?:\s+([\w$]+))+\s*\(/.test(ki.toString())?ui.push(new ti({functionName:RegExp.$1||void 0,args:Ii})):ui.push(new ti({args:Ii}));try{ki=ki.caller}catch{break}}return ui}}});var bi={};(function(ti,ai){typeof bi=="object"?bi=ai(si):ti.ErrorStackParser=ai(ti.StackFrame)})(this,function(ai){var ci=/(^|@)\S+:\d+/,ui=/^\s*at .*(\S+:\d+|\(native\))/m,Ti=/^(eval@)?(\[native code])?$/;return{parse:function(Ii){if(typeof Ii.stacktrace<"u"||typeof Ii["opera#sourceloc"]<"u")return this.parseOpera(Ii);if(Ii.stack&&Ii.stack.match(ui))return this.parseV8OrIE(Ii);if(Ii.stack)return this.parseFFOrSafari(Ii);throw new Error("Cannot parse given Error object")},extractLocation:function(Ii){if(Ii.indexOf(":")===-1)return[Ii];var Ki=/(.+?)(?::(\d+))?(?::(\d+))?$/,Ui=Ki.exec(Ii.replace(/[()]/g,""));return[Ui[1],Ui[2]||void 0,Ui[3]||void 0]},parseV8OrIE:function(Ii){var Ki=Ii.stack.split(`
`).filter(function(Ui){return!!Ui.match(ui)},this);return Ki.map(function(Ui){Ui.indexOf("(eval ")>-1&&(Ui=Ui.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var Zi=Ui.replace(/^\s+/,"").replace(/\(eval code/g,"("),tr=Zi.match(/ (\((.+):(\d+):(\d+)\)$)/);Zi=tr?Zi.replace(tr[0],""):Zi;var cr=Zi.split(/\s+/).slice(1),zi=this.extractLocation(tr?tr[1]:cr.pop()),nr=cr.join(" ")||void 0,pr=["eval","<anonymous>"].indexOf(zi[0])>-1?void 0:zi[0];return new ai({functionName:nr,fileName:pr,lineNumber:zi[1],columnNumber:zi[2],source:Ui})},this)},parseFFOrSafari:function(Ii){var Ki=Ii.stack.split(`
`).filter(function(Ui){return!Ui.match(Ti)},this);return Ki.map(function(Ui){if(Ui.indexOf(" > eval")>-1&&(Ui=Ui.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),Ui.indexOf("@")===-1&&Ui.indexOf(":")===-1)return new ai({functionName:Ui});var Zi=/((.*".+"[^@]*)?[^@]*)(?:@)/,tr=Ui.match(Zi),cr=tr&&tr[1]?tr[1]:void 0,zi=this.extractLocation(Ui.replace(Zi,""));return new ai({functionName:cr,fileName:zi[0],lineNumber:zi[1],columnNumber:zi[2],source:Ui})},this)},parseOpera:function(Ii){return!Ii.stacktrace||Ii.message.indexOf(`
`)>-1&&Ii.message.split(`
`).length>Ii.stacktrace.split(`
`).length?this.parseOpera9(Ii):Ii.stack?this.parseOpera11(Ii):this.parseOpera10(Ii)},parseOpera9:function(Ii){for(var Ki=/Line (\d+).*script (?:in )?(\S+)/i,Ui=Ii.message.split(`
`),Zi=[],tr=2,cr=Ui.length;tr<cr;tr+=2){var zi=Ki.exec(Ui[tr]);zi&&Zi.push(new ai({fileName:zi[2],lineNumber:zi[1],source:Ui[tr]}))}return Zi},parseOpera10:function(Ii){for(var Ki=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,Ui=Ii.stacktrace.split(`
`),Zi=[],tr=0,cr=Ui.length;tr<cr;tr+=2){var zi=Ki.exec(Ui[tr]);zi&&Zi.push(new ai({functionName:zi[3]||void 0,fileName:zi[2],lineNumber:zi[1],source:Ui[tr]}))}return Zi},parseOpera11:function(Ii){var Ki=Ii.stack.split(`
`).filter(function(Ui){return!!Ui.match(ci)&&!Ui.match(/^Error created at/)},this);return Ki.map(function(Ui){var Zi=Ui.split("@"),tr=this.extractLocation(Zi.pop()),cr=Zi.shift()||"",zi=cr.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,nr;cr.match(/\(([^)]*)\)/)&&(nr=cr.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var pr=nr===void 0||nr==="[arguments not available]"?void 0:nr.split(",");return new ai({functionName:zi,args:pr,fileName:tr[0],lineNumber:tr[1],columnNumber:tr[2],source:Ui})},this)}}});var wi=bi,Pi=function(ti,ai,ci,ui){var Ti=ui&&ui.redactedKeys?ui.redactedKeys:[],ki=ui&&ui.redactedPaths?ui.redactedPaths:[];return JSON.stringify(sr(ti,Ti,ki),ai,ci)},Ci=20,Di=25e3,Bi=8,Ri="...";function oi(ti){return ti instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(ti))}function mi(ti){return"[Throws: "+(ti?ti.message:"?")+"]"}function ri(ti,ai){for(var ci=0,ui=ti.length;ci<ui;ci++)if(ti[ci]===ai)return!0;return!1}function ni(ti,ai){for(var ci=0,ui=ti.length;ci<ui;ci++)if(ai.indexOf(ti[ci])===0)return!0;return!1}function Ei(ti,ai){for(var ci=0,ui=ti.length;ci<ui;ci++)if(typeof ti[ci]=="string"&&ti[ci].toLowerCase()===ai.toLowerCase()||ti[ci]&&typeof ti[ci].test=="function"&&ti[ci].test(ai))return!0;return!1}function Si(ti){return Object.prototype.toString.call(ti)==="[object Array]"}function qi(ti,ai){try{return ti[ai]}catch(ci){return mi(ci)}}function sr(ti,ai,ci){var ui=[],Ti=0;function ki(Ii,Ki){function Ui(){return Ki.length>Bi&&Ti>Di}if(Ti++,Ki.length>Ci||Ui())return Ri;if(Ii===null||typeof Ii!="object")return Ii;if(ri(ui,Ii))return"[Circular]";if(ui.push(Ii),typeof Ii.toJSON=="function")try{Ti--;var Zi=ki(Ii.toJSON(),Ki);return ui.pop(),Zi}catch(Tr){return mi(Tr)}var tr=oi(Ii);if(tr){Ti--;var cr=ki({name:Ii.name,message:Ii.message},Ki);return ui.pop(),cr}if(Si(Ii)){for(var zi=[],nr=0,pr=Ii.length;nr<pr;nr++){if(Ui()){zi.push(Ri);break}zi.push(ki(Ii[nr],Ki.concat("[]")))}return ui.pop(),zi}var wr={};try{for(var dr in Ii)if(Object.prototype.hasOwnProperty.call(Ii,dr)){if(ni(ci,Ki.join("."))&&Ei(ai,dr)){wr[dr]="[REDACTED]";continue}if(Ui()){wr[dr]=Ri;break}wr[dr]=ki(qi(Ii,dr),Ki.concat(dr))}}catch{}return ui.pop(),wr}return ki(ti,[])}function ur(ti,ai,ci,ui){if(typeof ci=="string"){ui===void 0?ui=null:ui!==null&&typeof ui!="string"&&(ui=Pi(ui));var Ti=ai[ci];if(typeof Ti=="number"){ti[Ti]={name:ci,variant:ui};return}ti.push({name:ci,variant:ui}),ai[ci]=ti.length-1}}function fr(ti,ai,ci){if(R(ai)){for(var ui=0;ui<ai.length;++ui){var Ti=ai[ui];Ti===null||typeof Ti!="object"||ur(ti,ci,Ti.name,Ti.variant)}return ti}}function lr(ti){return Ft(x(ti,Boolean),function(ai){var ci=ai.name,ui=ai.variant,Ti={featureFlag:ci};return typeof ui=="string"&&(Ti.variant=ui),Ti})}function Mi(ti,ai,ci){var ui=ai[ci];typeof ui=="number"&&(ti[ui]=null,delete ai[ci])}var Yi={add:ur,clear:Mi,merge:fr,toEventApi:lr},Wi=function(ti){return!!ti&&(!!ti.stack||!!ti.stacktrace||!!ti["opera#sourceloc"])&&typeof(ti.stack||ti.stacktrace||ti["opera#sourceloc"])=="string"&&ti.stack!==ti.name+": "+ti.message},ir=mr;function mr(ti){switch(Object.prototype.toString.call(ti)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return ti instanceof Error}}var yr=ir,pi=function(ti,ai,ci,ui){var Ti;if(ai){var ki;if(ci===null)return Ai(ti,ai);typeof ci=="object"&&(ki=ci),typeof ci=="string"&&(ki=(Ti={},Ti[ci]=ui,Ti)),ki&&(ai==="__proto__"||ai==="constructor"||ai==="prototype"||(ti[ai]||(ti[ai]={}),ti[ai]=et({},ti[ai],ki)))}},fi=function(ti,ai,ci){if(typeof ai=="string"){if(!ci)return ti[ai];if(ti[ai])return ti[ai][ci]}},Ai=function(ti,ai,ci){if(typeof ai=="string"){if(!ci){delete ti[ai];return}ai==="__proto__"||ai==="constructor"||ai==="prototype"||ti[ai]&&delete ti[ai][ci]}},Vi={add:pi,get:fi,clear:Ai};function Li(){return Li=Object.assign?Object.assign.bind():function(ti){for(var ai=1;ai<arguments.length;ai++){var ci=arguments[ai];for(var ui in ci)Object.prototype.hasOwnProperty.call(ci,ui)&&(ti[ui]=ci[ui])}return ti},Li.apply(this,arguments)}var Ni=function(){function ti(ci,ui,Ti,ki,Ii){Ti===void 0&&(Ti=[]),ki===void 0&&(ki=Gi()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=Ii,this._handledState=ki,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[ar(ci,ui,ti.__type,Ti)]}var ai=ti.prototype;return ai.addMetadata=function(ui,Ti,ki){return Vi.add(this._metadata,ui,Ti,ki)},ai.setTraceCorrelation=function(ui,Ti){typeof ui=="string"&&(this._correlation=Li({traceId:ui},typeof Ti=="string"?{spanId:Ti}:{}))},ai.getMetadata=function(ui,Ti){return Vi.get(this._metadata,ui,Ti)},ai.clearMetadata=function(ui,Ti){return Vi.clear(this._metadata,ui,Ti)},ai.addFeatureFlag=function(ui,Ti){Ti===void 0&&(Ti=null),Yi.add(this._features,this._featuresIndex,ui,Ti)},ai.addFeatureFlags=function(ui){Yi.merge(this._features,ui,this._featuresIndex)},ai.getFeatureFlags=function(){return Yi.toEventApi(this._features)},ai.clearFeatureFlag=function(ui){Yi.clear(this._features,this._featuresIndex,ui)},ai.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},ai.getUser=function(){return this._user},ai.setUser=function(ui,Ti,ki){this._user={id:ui,email:Ti,name:ki}},ai.toJSON=function(){return{payloadVersion:"4",exceptions:Ft(this.errors,function(ui){return et({},ui,{message:ui.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},ti}(),Qi=function(ti){var ai={file:ti.fileName,method:Fi(ti.functionName),lineNumber:ti.lineNumber,columnNumber:ti.columnNumber,code:void 0,inProject:void 0};return ai.lineNumber>-1&&!ai.file&&!ai.method&&(ai.file="global code"),ai},Fi=function(ti){return/^global code$/i.test(ti)?"global code":ti},Gi=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},ji=function(ti){return typeof ti=="string"?ti:""};function ar(ti,ai,ci,ui){return{errorClass:ji(ti),errorMessage:ji(ai),type:ci,stacktrace:E(ui,function(Ti,ki){var Ii=Qi(ki);try{return JSON.stringify(Ii)==="{}"?Ti:Ti.concat(Ii)}catch{return Ti}},[])}}function Ji(ti){return ti.cause?[ti].concat(Ji(ti.cause)):[ti]}Ni.getStacktrace=function(ti,ai,ci){if(Wi(ti))return wi.parse(ti).slice(ai);try{return x(li.backtrace(),function(ui){return(ui.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+ci)}catch{return[]}},Ni.create=function(ti,ai,ci,ui,Ti,ki){Ti===void 0&&(Ti=0);var Ii=or(ti,ai,ui,ki),Ki=Ii[0],Ui=Ii[1],Zi;try{var tr=Ni.getStacktrace(Ki,Ui>0?1+Ui+Ti:0,1+Ti);Zi=new Ni(Ki.name,Ki.message,tr,ci,ti)}catch{Zi=new Ni(Ki.name,Ki.message,[],ci,ti)}if(Ki.name==="InvalidError"&&Zi.addMetadata(""+ui,"non-error parameter",Xi(ti)),Ki.cause){var cr,zi=Ji(Ki).slice(1),nr=Ft(zi,function(pr){var wr=yr(pr)&&Wi(pr)?wi.parse(pr):[],dr=or(pr,!0,"error cause"),Tr=dr[0];return Tr.name==="InvalidError"&&Zi.addMetadata("error cause",Xi(pr)),ar(Tr.name,Tr.message,Ni.__type,wr)});(cr=Zi.errors).push.apply(cr,nr)}return Zi};var Xi=function(ti){return ti===null?"null":ti===void 0?"undefined":ti},or=function(ti,ai,ci,ui){var Ti,ki=0,Ii=function(Ki){var Ui=ci==="error cause"?"was":"received";ui&&ui.warn(ci+" "+Ui+' a non-error: "'+Ki+'"');var Zi=new Error(ci+" "+Ui+' a non-error. See "'+ci+'" tab for more detail.');return Zi.name="InvalidError",Zi};if(!ai)yr(ti)?Ti=ti:(Ti=Ii(typeof ti),ki+=2);else switch(typeof ti){case"string":case"number":case"boolean":Ti=new Error(String(ti)),ki+=1;break;case"function":Ti=Ii("function"),ki+=2;break;case"object":ti!==null&&yr(ti)?Ti=ti:ti!==null&&vr(ti)?(Ti=new Error(ti.message||ti.errorMessage),Ti.name=ti.name||ti.errorClass,ki+=1):(Ti=Ii(ti===null?"null":"unsupported object"),ki+=2);break;default:Ti=Ii("nothing"),ki+=2}if(!Wi(Ti))try{throw Ti}catch(Ki){Wi(Ki)&&(Ti=Ki,ki=1)}return[Ti,ki]};Ni.__type="browserjs";var vr=function(ti){return(typeof ti.name=="string"||typeof ti.errorClass=="string")&&(typeof ti.message=="string"||typeof ti.errorMessage=="string")},Er=Ni,xr=function(ti,ai,ci){var ui=0,Ti=function(){if(ui>=ti.length)return ci(null,!0);ai(ti[ui],function(ki,Ii){if(ki)return ci(ki);if(Ii===!1)return ci(null,!1);ui++,Ti()})};Ti()},Mr=function(ti,ai,ci,ui){var Ti=function(ki,Ii){if(typeof ki!="function")return Ii(null);try{if(ki.length!==2){var Ki=ki(ai);return Ki&&typeof Ki.then=="function"?Ki.then(function(Ui){return setTimeout(function(){return Ii(null,Ui)})},function(Ui){setTimeout(function(){return ci(Ui),Ii(null,!0)})}):Ii(null,Ki)}ki(ai,function(Ui,Zi){if(Ui)return ci(Ui),Ii(null);Ii(null,Zi)})}catch(Ui){ci(Ui),Ii(null)}};xr(ti,Ti,ui)},Nr=function(ti,ai,ci,ui){for(var Ti=!1,ki=ti.slice();!Ti&&ki.length;)try{Ti=ki.pop()(ai)===!1}catch(Ii){ui.error("Error occurred in "+ci+" callback, continuing anyway"),ui.error(Ii)}return Ti},Sr=function(ai,ci){var ui="000000000"+ai;return ui.substr(ui.length-ci)},$r=typeof window=="object"?window:self,Gr=0;for(var qn in $r)Object.hasOwnProperty.call($r,qn)&&Gr++;var jr=navigator.mimeTypes?navigator.mimeTypes.length:0,Xr=Sr((jr+navigator.userAgent.length).toString(36)+Gr.toString(36),4),Rn=function(){return Xr},is=function(ai){return typeof ai=="string"&&/^c[a-z0-9]{20,32}$/.test(ai)},Wr=0,rs=4,sn=36,Cs=Math.pow(sn,rs);function ns(){return Sr((Math.random()*Cs<<0).toString(sn),rs)}function ws(){return Wr=Wr<Cs?Wr:0,Wr++,Wr-1}function Mn(){var ti="c",ai=new Date().getTime().toString(sn),ci=Sr(ws().toString(sn),rs),ui=Rn(),Ti=ns()+ns();return ti+ai+ci+ui+Ti}Mn.fingerprint=Rn,Mn.isCuid=is;var ss=Mn,Fs=function(){function ti(){this.id=ss(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var ai=ti.prototype;return ai.getUser=function(){return this._user},ai.setUser=function(ui,Ti,ki){this._user={id:ui,email:Ti,name:ki}},ai.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},ai._track=function(ui){this[ui._handledState.unhandled?"_unhandled":"_handled"]+=1},ti}(),as=Fs,$s=Yi.add,zn=Yi.clear,Gn=Yi.merge,Yr=function(){},Wn=function(){function ti(ci,ui,Ti,ki){var Ii=this;ui===void 0&&(ui=Dt.schema),Ti===void 0&&(Ti=[]),this._notifier=ki,this._config={},this._schema=ui,this._delivery={sendSession:Yr,sendEvent:Yr},this._logger={debug:Yr,info:Yr,warn:Yr,error:Yr},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=ti,this.Event=Er,this.Breadcrumb=ei,this.Session=as,this._config=this._configure(ci,Ti),Ft(Ti.concat(this._config.plugins),function(Zi){Zi&&Ii._loadPlugin(Zi)}),this._depth=1;var Ki=this,Ui=this.notify;this.notify=function(){return Ui.apply(Ki,arguments)}}var ai=ti.prototype;return ai.addMetadata=function(ui,Ti,ki){return Vi.add(this._metadata,ui,Ti,ki)},ai.getMetadata=function(ui,Ti){return Vi.get(this._metadata,ui,Ti)},ai.clearMetadata=function(ui,Ti){return Vi.clear(this._metadata,ui,Ti)},ai.addFeatureFlag=function(ui,Ti){Ti===void 0&&(Ti=null),$s(this._features,this._featuresIndex,ui,Ti)},ai.addFeatureFlags=function(ui){Gn(this._features,ui,this._featuresIndex)},ai.clearFeatureFlag=function(ui){zn(this._features,this._featuresIndex,ui)},ai.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},ai.getContext=function(){return this._context},ai.setContext=function(ui){this._context=ui},ai._configure=function(ui,Ti){var ki=E(Ti,function(Zi,tr){return tr&&tr.configSchema?et({},Zi,tr.configSchema):Zi},this._schema),Ii=E(je(ki),function(Zi,tr){var cr=ki[tr].defaultValue(ui[tr]);if(ui[tr]!==void 0){var zi=ki[tr].validate(ui[tr]);zi?ki[tr].allowPartialObject?Zi.config[tr]=et(cr,ui[tr]):Zi.config[tr]=ui[tr]:(Zi.errors[tr]=ki[tr].message,Zi.config[tr]=cr)}else Zi.config[tr]=cr;return Zi},{errors:{},config:{}}),Ki=Ii.errors,Ui=Ii.config;if(ki.apiKey){if(!Ui.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(Ui.apiKey)||(Ki.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=et({},Ui.metadata),Gn(this._features,Ui.featureFlags,this._featuresIndex),this._user=et({},Ui.user),this._context=Ui.context,Ui.logger&&(this._logger=Ui.logger),Ui.onError&&(this._cbs.e=this._cbs.e.concat(Ui.onError)),Ui.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(Ui.onBreadcrumb)),Ui.onSession&&(this._cbs.s=this._cbs.s.concat(Ui.onSession)),je(Ki).length&&this._logger.warn(zr(Ki,ui)),Ui},ai.getUser=function(){return this._user},ai.setUser=function(ui,Ti,ki){this._user={id:ui,email:Ti,name:ki}},ai._loadPlugin=function(ui){var Ti=ui.load(this);ui.name&&(this._plugins["~"+ui.name+"~"]=Ti)},ai.getPlugin=function(ui){return this._plugins["~"+ui+"~"]},ai._setDelivery=function(ui){this._delivery=ui(this)},ai.startSession=function(){var ui=new as;ui.app.releaseStage=this._config.releaseStage,ui.app.version=this._config.appVersion,ui.app.type=this._config.appType,ui._user=et({},this._user);var Ti=Nr(this._cbs.s,ui,"onSession",this._logger);return Ti?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,ui)},ai.addOnError=function(ui,Ti){Ti===void 0&&(Ti=!1),this._cbs.e[Ti?"unshift":"push"](ui)},ai.removeOnError=function(ui){this._cbs.e=x(this._cbs.e,function(Ti){return Ti!==ui})},ai._addOnSessionPayload=function(ui){this._cbs.sp.push(ui)},ai.addOnSession=function(ui){this._cbs.s.push(ui)},ai.removeOnSession=function(ui){this._cbs.s=x(this._cbs.s,function(Ti){return Ti!==ui})},ai.addOnBreadcrumb=function(ui,Ti){Ti===void 0&&(Ti=!1),this._cbs.b[Ti?"unshift":"push"](ui)},ai.removeOnBreadcrumb=function(ui){this._cbs.b=x(this._cbs.b,function(Ti){return Ti!==ui})},ai.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},ai.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},ai.leaveBreadcrumb=function(ui,Ti,ki){if(ui=typeof ui=="string"?ui:"",ki=typeof ki=="string"&&C(S,ki)?ki:"manual",Ti=typeof Ti=="object"&&Ti!==null?Ti:{},!!ui){var Ii=new ei(ui,Ti,ki),Ki=Nr(this._cbs.b,Ii,"onBreadcrumb",this._logger);if(Ki){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(Ii),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},ai._isBreadcrumbTypeEnabled=function(ui){var Ti=this._config.enabledBreadcrumbTypes;return Ti===null||C(Ti,ui)},ai.notify=function(ui,Ti,ki){ki===void 0&&(ki=Yr);var Ii=Er.create(ui,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(Ii,Ti,ki)},ai._notify=function(ui,Ti,ki){var Ii=this;if(ki===void 0&&(ki=Yr),ui.app=et({},ui.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),ui.context=ui.context||this._context,ui._metadata=et({},ui._metadata,this._metadata),ui._user=et({},ui._user,this._user),ui.breadcrumbs=this._breadcrumbs.slice(),Gn(ui._features,this._features,ui._featuresIndex),this._config.enabledReleaseStages!==null&&!C(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),ki(null,ui);var Ki=ui.severity,Ui=function(tr){Ii._logger.error("Error occurred in onError callback, continuing anyway"),Ii._logger.error(tr)},Zi=[].concat(this._cbs.e).concat(Ti);Mr(Zi,ui,Ui,function(tr,cr){if(tr&&Ui(tr),!cr)return Ii._logger.debug("Event not sent due to onError callback"),ki(null,ui);Ii._isBreadcrumbTypeEnabled("error")&&ti.prototype.leaveBreadcrumb.call(Ii,ui.errors[0].errorClass,{errorClass:ui.errors[0].errorClass,errorMessage:ui.errors[0].errorMessage,severity:ui.severity},"error"),Ki!==ui.severity&&(ui._handledState.severityReason={type:"userCallbackSetSeverity"}),ui.unhandled!==ui._handledState.unhandled&&(ui._handledState.severityReason.unhandledOverridden=!0,ui._handledState.unhandled=ui.unhandled),Ii._session&&(Ii._session._track(ui),ui._session=Ii._session),Ii._delivery.sendEvent({apiKey:ui.apiKey||Ii._config.apiKey,notifier:Ii._notifier,events:[ui]},function(zi){return ki(zi,ui)})})},ti}(),zr=function(ti,ai){var ci=new Error(`Invalid configuration
`+Ft(je(ti),function(ui){return"  - "+ui+" "+ti[ui]+", got "+Bs(ai[ui])}).join(`

`));return ci},Bs=function(ti){switch(typeof ti){case"string":case"number":case"object":return JSON.stringify(ti);default:return String(ti)}},os=Wn,an={},tn=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];an.event=function(ti,ai){var ci=Pi(ti,null,null,{redactedPaths:tn,redactedKeys:ai});return ci.length>1e6&&(ti.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+ci.length/1e6+`MB (limit = 1MB)
metadata was removed`},ci=Pi(ti,null,null,{redactedPaths:tn,redactedKeys:ai})),ci},an.session=function(ti,ai){var ci=Pi(ti,null,null);return ci};var bn={};bn=function(ti,ai){return ai===void 0&&(ai=window),{sendEvent:function(ci,ui){if(ui===void 0&&(ui=function(){}),ti._config.endpoints.notify===null){var Ti=new Error("Event not sent due to incomplete endpoint configuration");return ui(Ti)}var ki=Cr(ti._config,"notify","4",ai),Ii=an.event(ci,ti._config.redactedKeys),Ki=new ai.XDomainRequest;Ki.onload=function(){ui(null)},Ki.onerror=function(){var Ui=new Error("Event failed to send");ti._logger.error("Event failed to send",Ui),Ii.length>1e6&&ti._logger.warn("Event oversized ("+(Ii.length/1e6).toFixed(2)+" MB)"),ui(Ui)},Ki.open("POST",ki),setTimeout(function(){try{Ki.send(Ii)}catch(Ui){ti._logger.error(Ui),ui(Ui)}},0)},sendSession:function(ci,ui){if(ui===void 0&&(ui=function(){}),ti._config.endpoints.sessions===null){var Ti=new Error("Session not sent due to incomplete endpoint configuration");return ui(Ti)}var ki=Cr(ti._config,"sessions","1",ai),Ii=new ai.XDomainRequest;Ii.onload=function(){ui(null)},Ii.open("POST",ki),setTimeout(function(){try{Ii.send(an.session(ci,ti._config.redactedKeys))}catch(Ki){ti._logger.error(Ki),ui(Ki)}},0)}}};var Cr=function(ti,ai,ci,ui){var Ti=JSON.parse(JSON.stringify(new Date)),ki=Us(ti.endpoints[ai],ui.location.protocol);return ki+"?apiKey="+encodeURIComponent(ti.apiKey)+"&payloadVersion="+ci+"&sentAt="+encodeURIComponent(Ti)},Us=bn._matchPageProtocol=function(ti,ai){return ai==="http:"?ti.replace(/^https:/,"http:"):ti},Kn=function(ti,ai){return ai===void 0&&(ai=window),{sendEvent:function(ci,ui){ui===void 0&&(ui=function(){});try{var Ti=ti._config.endpoints.notify;if(Ti===null){var ki=new Error("Event not sent due to incomplete endpoint configuration");return ui(ki)}var Ii=new ai.XMLHttpRequest,Ki=an.event(ci,ti._config.redactedKeys);Ii.onreadystatechange=function(){if(Ii.readyState===ai.XMLHttpRequest.DONE){var Ui=Ii.status;if(Ui===0||Ui>=400){var Zi=new Error("Request failed with status "+Ui);ti._logger.error("Event failed to send",Zi),Ki.length>1e6&&ti._logger.warn("Event oversized ("+(Ki.length/1e6).toFixed(2)+" MB)"),ui(Zi)}else ui(null)}},Ii.open("POST",Ti),Ii.setRequestHeader("Content-Type","application/json"),Ii.setRequestHeader("Bugsnag-Api-Key",ci.apiKey||ti._config.apiKey),Ii.setRequestHeader("Bugsnag-Payload-Version","4"),Ii.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Ii.send(Ki)}catch(Ui){ti._logger.error(Ui)}},sendSession:function(ci,ui){ui===void 0&&(ui=function(){});try{var Ti=ti._config.endpoints.sessions;if(Ti===null){var ki=new Error("Session not sent due to incomplete endpoint configuration");return ui(ki)}var Ii=new ai.XMLHttpRequest;Ii.onreadystatechange=function(){if(Ii.readyState===ai.XMLHttpRequest.DONE){var Ki=Ii.status;if(Ki===0||Ki>=400){var Ui=new Error("Request failed with status "+Ki);ti._logger.error("Session failed to send",Ui),ui(Ui)}else ui(null)}},Ii.open("POST",Ti),Ii.setRequestHeader("Content-Type","application/json"),Ii.setRequestHeader("Bugsnag-Api-Key",ti._config.apiKey),Ii.setRequestHeader("Bugsnag-Payload-Version","1"),Ii.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Ii.send(an.session(ci,ti._config.redactedKeys))}catch(Ki){ti._logger.error(Ki)}}}},Ln=new Date,ls=function(){Ln=new Date},cn={name:"appDuration",load:function(ti){return ti.addOnError(function(ai){var ci=new Date;ai.app.duration=ci-Ln},!0),{reset:ls}}},Rr=function(ti){return ti===void 0&&(ti=window),{load:function(ai){ai.addOnError(function(ci){ci.context===void 0&&(ci.context=ti.location.pathname)},!0)}}},us="bugsnag-anonymous-id",Xn=function(ti){try{var ai=ti.localStorage,ci=ai.getItem(us);return ci&&/^c[a-z0-9]{20,32}$/.test(ci)||(ci=ss(),ai.setItem(us,ci)),ci}catch{}},Vs=function(ti,ai){return ti===void 0&&(ti=navigator),ai===void 0&&(ai=window),{load:function(ci){var ui={locale:ti.browserLanguage||ti.systemLanguage||ti.userLanguage||ti.language,userAgent:ti.userAgent};ai&&ai.screen&&ai.screen.orientation&&ai.screen.orientation.type?ui.orientation=ai.screen.orientation.type:ai&&ai.document&&(ui.orientation=ai.document.documentElement.clientWidth>ai.document.documentElement.clientHeight?"landscape":"portrait"),ci._config.generateAnonymousId&&(ui.id=Xn(ai)),ci.addOnSession(function(Ti){Ti.device=et({},Ti.device,ui),ci._config.collectUserIp||Yn(Ti)}),ci.addOnError(function(Ti){Ti.device=et({},Ti.device,ui,{time:new Date}),ci._config.collectUserIp||Yn(Ti)},!0)},configSchema:{generateAnonymousId:{validate:function(ci){return ci===!0||ci===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},Yn=function(ti){var ai=ti.getUser();(!ai||!ai.id)&&ti.setUser(ti.device.id)},Hs=function(ti){return ti===void 0&&(ti=window),{load:function(ai){ai.addOnError(function(ci){ci.request&&ci.request.url||(ci.request=et({},ci.request,{url:ti.location.href}))},!0)}}},As={load:function(ti){ti._sessionDelegate=cs}},cs={startSession:function(ti,ai){var ci=ti;return ci._session=ai,ci._pausedSession=null,ci._config.enabledReleaseStages!==null&&!C(ci._config.enabledReleaseStages,ci._config.releaseStage)?(ci._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),ci):(ci._delivery.sendSession({notifier:ci._notifier,device:ai.device,app:ai.app,sessions:[{id:ai.id,startedAt:ai.startedAt,user:ai._user}]}),ci)},resumeSession:function(ti){return ti._session?ti:ti._pausedSession?(ti._session=ti._pausedSession,ti._pausedSession=null,ti):ti.startSession()},pauseSession:function(ti){ti._pausedSession=ti._session,ti._session=null}},hs={load:function(ti){ti._config.collectUserIp||ti.addOnError(function(ai){ai._user&&typeof ai._user.id>"u"&&delete ai._user.id,ai._user=et({id:"[REDACTED]"},ai._user),ai.request=et({clientIp:"[REDACTED]"},ai.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(ti){return ti===!0||ti===!1}}}},ds={};ds.load=function(ti){var ai=/^(local-)?dev(elopment)?$/.test(ti._config.releaseStage);ai||!ti._isBreadcrumbTypeEnabled("log")||Ft(mn,function(ci){var ui=console[ci];console[ci]=function(){for(var Ti=arguments.length,ki=new Array(Ti),Ii=0;Ii<Ti;Ii++)ki[Ii]=arguments[Ii];ti.leaveBreadcrumb("Console output",E(ki,function(Ki,Ui,Zi){var tr="[Unknown value]";try{tr=String(Ui)}catch{}if(tr==="[object Object]")try{tr=JSON.stringify(Ui)}catch{}return Ki["["+Zi+"]"]=tr,Ki},{severity:ci.indexOf("group")===0?"log":ci}),"log"),ui.apply(console,ki)},console[ci]._restore=function(){console[ci]=ui}})};var mn=x(["log","debug","info","warn","error"],function(ti){return typeof console<"u"&&typeof console[ti]=="function"}),fs=200,Qr=5e5,Cn=function(ti,ai){return ti===void 0&&(ti=document),ai===void 0&&(ai=window),{load:function(ci){if(!ci._config.trackInlineScripts)return;var ui=ai.location.href,Ti="",ki=!!ti.attachEvent,Ii=ki?ti.readyState==="complete":ti.readyState!=="loading",Ki=function(){return ti.documentElement.outerHTML};Ti=Ki();var Ui=ti.onreadystatechange;ti.onreadystatechange=function(){ti.readyState==="interactive"&&(Ti=Ki(),Ii=!0);try{Ui.apply(this,arguments)}catch{}};var Zi=null,tr=function(dr){Zi=dr},cr=function(){var dr=ti.currentScript||Zi;if(!dr&&!Ii){var Tr=ti.scripts||ti.getElementsByTagName("script");dr=Tr[Tr.length-1]}return dr},zi=function(dr){(!Ii||!Ti)&&(Ti=Ki());var Tr=["<!-- DOC START -->"].concat(Ti.split(`
`)),Or=dr-1,Ir=Math.max(Or-3,0),Lr=Math.min(Or+3,Tr.length);return E(Tr.slice(Ir,Lr),function(Dr,Zr,Sn){return Dr[Ir+1+Sn]=Zr.length<=fs?Zr:Zr.substr(0,fs),Dr},{})};ci.addOnError(function(dr){dr.errors[0].stacktrace=x(dr.errors[0].stacktrace,function(Dr){return!/__trace__$/.test(Dr.method)});var Tr=dr.errors[0].stacktrace[0],Or=function(Dr){return Dr.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(Tr&&Tr.file&&Or(Tr.file)!==Or(ui))){var Ir=cr();if(Ir){var Lr=Ir.innerHTML;dr.addMetadata("script","content",Lr.length<=Qr?Lr:Lr.substr(0,Qr)),Tr&&Tr.lineNumber&&(Tr.code=zi(Tr.lineNumber))}}},!0);var nr=Ft(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(dr){return Qn(ai,dr,function(Tr){return wr(Tr,function(Or){return{get:function(){return Or[0]},replace:function(Ir){Or[0]=Ir}}})})}),pr=nr[0];Ft(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(dr){!ai[dr]||!ai[dr].prototype||!Object.prototype.hasOwnProperty.call(ai[dr].prototype,"addEventListener")||(Qn(ai[dr].prototype,"addEventListener",function(Tr){return wr(Tr,An)}),Qn(ai[dr].prototype,"removeEventListener",function(Tr){return wr(Tr,An,!0)}))});function wr(dr,Tr,Or){return Or===void 0&&(Or=!1),function(){var Ir=[].slice.call(arguments);try{var Lr=Tr(Ir),Dr=Lr.get();if(Or&&dr.apply(this,Ir),typeof Dr!="function")return dr.apply(this,Ir);if(Dr.__trace__)Lr.replace(Dr.__trace__);else{var Zr=cr();Dr.__trace__=function(){tr(Zr),pr(function(){tr(null)},0);var zs=Dr.apply(this,arguments);return tr(null),zs},Dr.__trace__.__trace__=Dr.__trace__,Lr.replace(Dr.__trace__)}}catch{}if(dr.apply)return dr.apply(this,Ir);switch(Ir.length){case 1:return dr(Ir[0]);case 2:return dr(Ir[0],Ir[1]);default:return dr()}}}},configSchema:{trackInlineScripts:{validate:function(ci){return ci===!0||ci===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Qn(ti,ai,ci){var ui=ti[ai];if(!ui)return ui;var Ti=ci(ui);return ti[ai]=Ti,ui}function An(ti){var ai=!!ti[1]&&typeof ti[1].handleEvent=="function";return{get:function(){return ai?ti[1].handleEvent:ti[1]},replace:function(ci){ai?ti[1].handleEvent=ci:ti[1]=ci}}}var $n=function(ti){return ti===void 0&&(ti=window),{load:function(ai){"addEventListener"in ti&&ai._isBreadcrumbTypeEnabled("user")&&ti.addEventListener("click",function(ci){var ui,Ti;try{ui=Tn(ci.target),Ti=Ps(ci.target,ti)}catch{ui="[hidden]",Ti="[hidden]",ai._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}ai.leaveBreadcrumb("UI click",{targetText:ui,targetSelector:Ti},"user")},!0)}}},Bn=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function Tn(ti){var ai=ti.textContent||ti.innerText||"";return!ai&&(ti.type==="submit"||ti.type==="button")&&(ai=ti.value),ai=ai.replace(Bn,"$1"),ai.length>140?ai.slice(0,135)+"(...)":ai}function Ps(ti,ai){var ci=[ti.tagName];if(ti.id&&ci.push("#"+ti.id),ti.className&&ti.className.length&&ci.push("."+ti.className.split(" ").join(".")),!ai.document.querySelectorAll||!Array.prototype.indexOf)return ci.join("");try{if(ai.document.querySelectorAll(ci.join("")).length===1)return ci.join("")}catch{return ci.join("")}if(ti.parentNode.childNodes.length>1){var ui=Array.prototype.indexOf.call(ti.parentNode.childNodes,ti)+1;ci.push(":nth-child("+ui+")")}return ai.document.querySelectorAll(ci.join("")).length===1?ci.join(""):ti.parentNode?Ps(ti.parentNode,ai)+" > "+ci.join(""):ci.join("")}var ps={};ps=function(ti){ti===void 0&&(ti=window);var ai={load:function(ci){if("addEventListener"in ti&&ci._isBreadcrumbTypeEnabled("navigation")){var ui=function(Ti){return function(){return ci.leaveBreadcrumb(Ti,{},"navigation")}};ti.addEventListener("pagehide",ui("Page hidden"),!0),ti.addEventListener("pageshow",ui("Page shown"),!0),ti.addEventListener("load",ui("Page loaded"),!0),ti.document.addEventListener("DOMContentLoaded",ui("DOMContentLoaded"),!0),ti.addEventListener("load",function(){return ti.addEventListener("popstate",ui("Navigated back"),!0)}),ti.addEventListener("hashchange",function(Ti){var ki=Ti.oldURL?{from:Un(Ti.oldURL,ti),to:Un(Ti.newURL,ti),state:Vn(ti)}:{to:Un(ti.location.href,ti)};ci.leaveBreadcrumb("Hash changed",ki,"navigation")},!0),ti.history.pushState&&Kr(ci,ti.history,"pushState",ti,!0),ti.history.replaceState&&Kr(ci,ti.history,"replaceState",ti)}}};return ai};var Un=function(ti,ai){var ci=ai.document.createElement("A");return ci.href=ti,""+ci.pathname+ci.search+ci.hash},Jn=function(ti,ai,ci,ui){var Ti=Un(ti.location.href,ti);return{title:ci,state:ai,prevState:Vn(ti),to:ui||Ti,from:Ti}},Kr=function(ti,ai,ci,ui,Ti){Ti===void 0&&(Ti=!1);var ki=ai[ci];ai[ci]=function(Ii,Ki,Ui){ti.leaveBreadcrumb("History "+ci,Jn(ui,Ii,Ki,Ui),"navigation"),Ti&&typeof ti.resetEventCount=="function"&&ti.resetEventCount(),ki.apply(ai,[Ii,Ki].concat(Ui!==void 0?Ui:[]))}},Vn=function(ti){try{return ti.history.state}catch{}},rn="request",ms=function(ti,ai){ti===void 0&&(ti=[]),ai===void 0&&(ai=window);var ci={load:function(ui){if(!ui._isBreadcrumbTypeEnabled("request"))return;var Ti=[ui._config.endpoints.notify,ui._config.endpoints.sessions].concat(ti);ki(),Ui();function ki(){if(!(!("addEventListener"in ai.XMLHttpRequest.prototype)||!("WeakMap"in ai))){var cr=new WeakMap,zi=new WeakMap,nr=ai.XMLHttpRequest.prototype.open;ai.XMLHttpRequest.prototype.open=function(dr,Tr){this&&cr.set(this,{method:dr,url:Tr}),nr.apply(this,arguments)};var pr=ai.XMLHttpRequest.prototype.send;ai.XMLHttpRequest.prototype.send=function(dr){var Tr=this,Or=cr.get(this);if(Or){var Ir=zi.get(this);Ir&&(this.removeEventListener("load",Ir.load),this.removeEventListener("error",Ir.error));var Lr=new Date,Dr=function(){return Ki(Or.method,Or.url,Pn(Lr))},Zr=function(){return Ii(Or.method,Or.url,Tr.status,Pn(Lr))};this.addEventListener("load",Zr),this.addEventListener("error",Dr),this&&zi.set(this,{load:Zr,error:Dr})}pr.apply(this,arguments)}}}function Ii(cr,zi,nr,pr){if(zi===void 0){ui._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof zi=="string"&&C(Ti,zi.replace(/\?.*$/,"")))){var wr={status:nr,method:String(cr),url:String(zi),duration:pr};nr>=400?ui.leaveBreadcrumb("XMLHttpRequest failed",wr,rn):ui.leaveBreadcrumb("XMLHttpRequest succeeded",wr,rn)}}function Ki(cr,zi,nr){if(zi===void 0){ui._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof zi=="string"&&C(Ti,zi.replace(/\?.*$/,""))||ui.leaveBreadcrumb("XMLHttpRequest error",{method:String(cr),url:String(zi),duration:nr},rn)}function Ui(){if(!(!("fetch"in ai)||ai.fetch.polyfill)){var cr=ai.fetch;ai.fetch=function(){var nr=arguments,pr=arguments[0],wr=arguments[1],dr,Tr=null;return pr&&typeof pr=="object"?(Tr=pr.url,wr&&"method"in wr?dr=wr.method:pr&&"method"in pr&&(dr=pr.method)):(Tr=pr,wr&&"method"in wr&&(dr=wr.method)),dr===void 0&&(dr="GET"),new Promise(function(Or,Ir){var Lr=new Date;cr.apply(void 0,nr).then(function(Dr){Zi(Dr,dr,Tr,Pn(Lr)),Or(Dr)}).catch(function(Dr){tr(dr,Tr,Pn(Lr)),Ir(Dr)})})}}}var Zi=function(cr,zi,nr,pr){var wr={method:String(zi),status:cr.status,url:String(nr),duration:pr};cr.status>=400?ui.leaveBreadcrumb("fetch() failed",wr,rn):ui.leaveBreadcrumb("fetch() succeeded",wr,rn)},tr=function(cr,zi,nr){ui.leaveBreadcrumb("fetch() error",{method:String(cr),url:String(zi),duration:nr},rn)}}};return ci},Pn=function(ti){return ti&&new Date-ti},Jr={load:function(ti){var ai=0;ti.addOnError(function(ci){if(ai>=ti._config.maxEvents)return ti._logger.warn("Cancelling event send due to maxEvents per session limit of "+ti._config.maxEvents+" being reached"),!1;ai++}),ti.resetEventCount=function(){ai=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer 100",validate:function(ti){return Xe(1,100)(ti)}}}},gs={};gs={load:function(ti){ti.addOnError(function(ai){var ci=E(ai.errors,function(ui,Ti){return ui.concat(Ti.stacktrace)},[]);Ft(ci,function(ui){ui.file=Zn(ui.file)})})}};var Zn=gs._strip=function(ti){return typeof ti=="string"?ti.replace(/\?.*$/,"").replace(/#.*$/,""):ti},Hn=function(ti,ai){return ti===void 0&&(ti=window),ai===void 0&&(ai="window onerror"),{load:function(ci){if(!ci._config.autoDetectErrors||!ci._config.enabledErrorTypes.unhandledExceptions)return;function ui(ki,Ii,Ki,Ui,Zi){if(Ki===0&&/Script error\.?/.test(ki))ci._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var tr={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},cr;if(Zi)cr=ci.Event.create(Zi,!0,tr,ai,1),jn(cr.errors[0].stacktrace,Ii,Ki,Ui);else if(typeof ki=="object"&&ki!==null&&(!Ii||typeof Ii!="string")&&!Ki&&!Ui&&!Zi){var zi=ki.type?"Event: "+ki.type:"Error",nr=ki.message||ki.detail||"";cr=ci.Event.create({name:zi,message:nr},!0,tr,ai,1),cr.originalError=ki,cr.addMetadata(ai,{event:ki,extraParameters:Ii})}else cr=ci.Event.create(ki,!0,tr,ai,1),jn(cr.errors[0].stacktrace,Ii,Ki,Ui);ci._notify(cr)}typeof Ti=="function"&&Ti.apply(this,arguments)}var Ti=ti.onerror;ti.onerror=ui}}},jn=function(ti,ai,ci,ui){ti[0]||ti.push({});var Ti=ti[0];!Ti.file&&typeof ai=="string"&&(Ti.file=ai),!Ti.lineNumber&&nn(ci)&&(Ti.lineNumber=ci),Ti.columnNumber||(nn(ui)?Ti.columnNumber=ui:window.event&&nn(window.event.errorCharacter)&&(Ti.columnNumber=window.event.errorCharacter))},nn=function(ti){return typeof ti=="number"&&String.call(ti)!=="NaN"},gn=function(ti){ti===void 0&&(ti=window);var ai={load:function(ci){if(!(!ci._config.autoDetectErrors||!ci._config.enabledErrorTypes.unhandledRejections)){var ui=function(Ti){var ki=Ti.reason,Ii=!1;try{Ti.detail&&Ti.detail.reason&&(ki=Ti.detail.reason,Ii=!0)}catch{}var Ki=!ci._config.reportUnhandledPromiseRejectionsAsHandled,Ui=ci.Event.create(ki,!1,{severity:"error",unhandled:Ki,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,ci._logger);Ii&&Ft(Ui.errors[0].stacktrace,Is(ki)),ci._notify(Ui,function(Zi){if(yr(Zi.originalError)&&!Zi.originalError.stack){var tr;Zi.addMetadata("unhandledRejection handler",(tr={},tr[Object.prototype.toString.call(Zi.originalError)]={name:Zi.originalError.name,message:Zi.originalError.message,code:Zi.originalError.code},tr))}})};"addEventListener"in ti?ti.addEventListener("unhandledrejection",ui):ti.onunhandledrejection=function(Ti,ki){ui({detail:{reason:Ti,promise:ki}})}}}};return ai},Is=function(ti){return function(ai){ai.file!==ti.toString()&&ai.method&&(ai.method=ai.method.replace(/^\s+/,""))}},yn={},js="Bugsnag JavaScript",qs="8.1.2",Ds="https://github.com/bugsnag/bugsnag-js",es=et({},Dt.schema,Ot),Ur={_client:null,createClient:function(ti){typeof ti=="string"&&(ti={apiKey:ti}),ti||(ti={});var ai=[cn,Vs(),Rr(),Hs(),Jr,As,hs,gs,Hn(),gn(),ps(),$n(),ms(),ds,Cn()],ci=new os(ti,es,ai,{name:js,version:qs,url:Ds});return ci._setDelivery(window.XDomainRequest?bn:Kn),ci._logger.debug("Loaded!"),ci.leaveBreadcrumb("Bugsnag loaded",{},"state"),ci._config.autoTrackSessions?ci.startSession():ci},start:function(ti){return Ur._client?(Ur._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),Ur._client):(Ur._client=Ur.createClient(ti),Ur._client)},isStarted:function(){return Ur._client!=null}};return Ft(["resetEventCount"].concat(je(os.prototype)),function(ti){/^_/.test(ti)||(Ur[ti]=function(){if(!Ur._client)return console.log("Bugsnag."+ti+"() was called before Bugsnag.start()");Ur._client._depth+=1;var ai=Ur._client[ti].apply(Ur._client,arguments);return Ur._client._depth-=1,ai})}),yn=Ur,yn.Client=os,yn.Event=Er,yn.Session=as,yn.Breadcrumb=ei,yn.default=Ur,yn})})(bugsnag);var bugsnagExports=bugsnag.exports,notifier=bugsnagExports;const Bugsnag=getDefaultExportFromCjs(notifier);var bugsnagVue={exports:{}};(function(o,r){(function(S){o.exports=S()})(function(){var S=this,E,x=function(kt,et){var Ft=kt.config.errorHandler,xt=function(Mt,Ot,Ut){var Xt={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},ei=et.Event.create(Mt,!0,Xt,"vue error handler",1),si=typeof Ut=="string"&&Ut.indexOf("runtime-")>0?Ut.split("runtime-")[1]:Ut,li=Ue[si]||Ut;ei.addMetadata("vue",{errorInfo:li,component:Ot?C(Ot):void 0,props:Ot&&Ot.$options?Ot.$options.propsData:void 0}),et._notify(ei),typeof console<"u"&&typeof console.error=="function"&&console.error(Mt),typeof Ft=="function"&&Ft.call(S,Mt,Ot,Ut)};kt.config.errorHandler=xt};function C(kt){return kt.$parent===null?"App":kt.$options&&kt.$options.name?kt.$options.name:"Anonymous"}var R={BEFORE_CREATE:"bc",CREATED:"c",BEFORE_MOUNT:"bm",MOUNTED:"m",BEFORE_UPDATE:"bu",UPDATED:"u",BEFORE_UNMOUNT:"bum",UNMOUNTED:"um",DEACTIVATED:"da",ACTIVATED:"a",RENDER_TRIGGERED:"rtg",RENDER_TRACKED:"rtc",ERROR_CAPTURED:"ec",SERVER_PREFETCH:"sp"},Ce={SETUP_FUNCTION:0,RENDER_FUNCTION:1,WATCH_GETTER:2,WATCH_CALLBACK:3,WATCH_CLEANUP:4,NATIVE_EVENT_HANDLER:5,COMPONENT_EVENT_HANDLER:6,VNODE_HOOK:7,DIRECTIVE_HOOK:8,TRANSITION_HOOK:9,APP_ERROR_HANDLER:10,APP_WARN_HANDLER:11,FUNCTION_REF:12,ASYNC_COMPONENT_LOADER:13,SCHEDULER:14},Ue=(E={},E[R.SERVER_PREFETCH]="serverPrefetch hook",E[R.BEFORE_CREATE]="beforeCreate hook",E[R.CREATED]="created hook",E[R.BEFORE_MOUNT]="beforeMount hook",E[R.MOUNTED]="mounted hook",E[R.BEFORE_UPDATE]="beforeUpdate hook",E[R.UPDATED]="updated",E[R.BEFORE_UNMOUNT]="beforeUnmount hook",E[R.UNMOUNTED]="unmounted hook",E[R.ACTIVATED]="activated hook",E[R.DEACTIVATED]="deactivated hook",E[R.ERROR_CAPTURED]="errorCaptured hook",E[R.RENDER_TRACKED]="renderTracked hook",E[R.RENDER_TRIGGERED]="renderTriggered hook",E[Ce.SETUP_FUNCTION]="setup function",E[Ce.RENDER_FUNCTION]="render function",E[Ce.WATCH_GETTER]="watcher getter",E[Ce.WATCH_CALLBACK]="watcher callback",E[Ce.WATCH_CLEANUP]="watcher cleanup function",E[Ce.NATIVE_EVENT_HANDLER]="native event handler",E[Ce.COMPONENT_EVENT_HANDLER]="component event handler",E[Ce.VNODE_HOOK]="vnode hook",E[Ce.DIRECTIVE_HOOK]="directive hook",E[Ce.TRANSITION_HOOK]="transition hook",E[Ce.APP_ERROR_HANDLER]="app errorHandler",E[Ce.APP_WARN_HANDLER]="app warnHandler",E[Ce.FUNCTION_REF]="ref function",E[Ce.ASYNC_COMPONENT_LOADER]="async component loader",E[Ce.SCHEDULER]="scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core .",E),je={},Xe=this;je=function(kt,et){var Ft=kt.config.errorHandler,xt=function(Mt,Ot,Ut){var Xt={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},ei=et.Event.create(Mt,!0,Xt,"vue error handler",1);ei.addMetadata("vue",{errorInfo:Ut,component:Ot?Ye(Ot,!0):void 0,props:Ot?Ot.$options.propsData:void 0}),et._notify(ei),typeof console<"u"&&typeof console.error=="function"&&console.error(Mt),typeof Ft=="function"&&Ft.call(Xe,Mt,Ot,Ut)};kt.config.errorHandler=xt};var Ye=function(kt,et){if(kt.$root===kt)return"<Root>";var Ft=typeof kt=="function"&&kt.cid!=null?kt.options:kt._isVue?kt.$options||kt.constructor.options:kt||{},xt=Ft.name||Ft._componentTag,Mt=Ft.__file;if(!xt&&Mt){var Ot=Mt.match(/([^/\\]+)\.vue$/);xt=Ot&&Ot[1]}return(xt?"<"+St(xt)+">":"<Anonymous>")+(Mt&&et!==!1?" at "+Mt:"")},St=je.classify=function(kt){return kt.replace(/(?:^|[-_])(\w)/g,function(et){return et.toUpperCase()}).replace(/[-_]/g,"")},Dt={};return Dt=function(){function kt(){var Ft=typeof window<"u"&&window.Vue;if(this.name="vue",this.lazy=arguments.length===0&&!Ft,!this.lazy&&(this.Vue=(arguments.length<=0?void 0:arguments[0])||Ft,!this.Vue))throw new Error("@bugsnag/plugin-vue reference to `Vue` was undefined")}var et=kt.prototype;return et.load=function(xt){return this.Vue&&this.Vue.config?(je(this.Vue,xt),{installVueErrorHandler:function(){return xt._logger.warn("installVueErrorHandler() was called unnecessarily")}}):{install:function(Mt){Mt||xt._logger.error(new Error("@bugsnag/plugin-vue reference to Vue `app` was undefined")),x(Mt,xt)},installVueErrorHandler:function(Mt){Mt||xt._logger.error(new Error("@bugsnag/plugin-vue reference to `Vue` was undefined")),je(Mt,xt)}}},kt}(),Dt.default=Dt,Dt})})(bugsnagVue);var bugsnagVueExports=bugsnagVue.exports;const BugsnagPluginVue=getDefaultExportFromCjs(bugsnagVueExports);function e(o,r){const S=Object.create(null),E=o.split(",");for(let x=0;x<E.length;x++)S[E[x]]=!0;return x=>!!S[x]}const t={},n=()=>{},s=Object.assign,i=(o,r)=>{const S=o.indexOf(r);S>-1&&o.splice(S,1)},c=Object.prototype.hasOwnProperty,a=(o,r)=>c.call(o,r),l=Array.isArray,u=o=>y(o)==="[object Map]",p=o=>y(o)==="[object Set]",f=o=>typeof o=="function",d=o=>typeof o=="string",h=o=>typeof o=="symbol",v=o=>o!==null&&typeof o=="object",_=o=>(v(o)||f(o))&&f(o.then)&&f(o.catch),g=Object.prototype.toString,y=o=>g.call(o),b=o=>y(o).slice(8,-1),m=o=>y(o)==="[object Object]",w=o=>d(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,N=(o,r)=>!Object.is(o,r),O=(o,r,S)=>{Object.defineProperty(o,r,{configurable:!0,enumerable:!1,value:S})};let k;const V=()=>k||(k=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let P;const I=o=>{const r=new Set(o);return r.w=0,r.n=0,r},T=o=>(o.w&U)>0,M=o=>(o.n&U)>0,F=new WeakMap;let A=0,U=1;const z=30;let H;const W=Symbol(""),J=Symbol("");class K{constructor(r,S=null,E){this.fn=r,this.scheduler=S,this.active=!0,this.deps=[],this.parent=void 0,function(x,C=P){C&&C.active&&C.effects.push(x)}(this,E)}run(){if(!this.active)return this.fn();let r=H,S=B;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=H,H=this,B=!0,U=1<<++A,A<=z?(({deps:E})=>{if(E.length)for(let x=0;x<E.length;x++)E[x].w|=U})(this):q(this),this.fn()}finally{A<=z&&(E=>{const{deps:x}=E;if(x.length){let C=0;for(let R=0;R<x.length;R++){const Ce=x[R];T(Ce)&&!M(Ce)?Ce.delete(E):x[C++]=Ce,Ce.w&=~U,Ce.n&=~U}x.length=C}})(this),U=1<<--A,H=this.parent,B=S,this.parent=void 0,this.deferStop&&this.stop()}}stop(){H===this?this.deferStop=!0:this.active&&(q(this),this.onStop&&this.onStop(),this.active=!1)}}function q(o){const{deps:r}=o;if(r.length){for(let S=0;S<r.length;S++)r[S].delete(o);r.length=0}}let B=!0;const L=[];function G(){L.push(B),B=!1}function Q(){const o=L.pop();B=o===void 0||o}function X(o,r,S){if(B&&H){let E=F.get(o);E||F.set(o,E=new Map);let x=E.get(S);x||E.set(S,x=I()),function(C,R){let Ce=!1;A<=z?M(C)||(C.n|=U,Ce=!T(C)):Ce=!C.has(H),Ce&&(C.add(H),H.deps.push(C))}(x)}}function Y(o,r,S,E,x,C){const R=F.get(o);if(!R)return;let Ce=[];if(r==="clear")Ce=[...R.values()];else if(S==="length"&&l(o)){const Ue=Number(E);R.forEach((je,Xe)=>{(Xe==="length"||!h(Xe)&&Xe>=Ue)&&Ce.push(je)})}else switch(S!==void 0&&Ce.push(R.get(S)),r){case"add":l(o)?w(S)&&Ce.push(R.get("length")):(Ce.push(R.get(W)),u(o)&&Ce.push(R.get(J)));break;case"delete":l(o)||(Ce.push(R.get(W)),u(o)&&Ce.push(R.get(J)));break;case"set":u(o)&&Ce.push(R.get(W))}if(Ce.length===1)Ce[0]&&Z(Ce[0]);else{const Ue=[];for(const je of Ce)je&&Ue.push(...je);Z(I(Ue))}}function Z(o,r){const S=l(o)?o:[...o];for(const E of S)E.computed&&ee(E);for(const E of S)E.computed||ee(E)}function ee(o,r){(o!==H||o.allowRecurse)&&(o.scheduler?o.scheduler():o.run())}const te=e("__proto__,__v_isRef,__isVue"),ne=new Set(Object.getOwnPropertyNames(Symbol).filter(o=>o!=="arguments"&&o!=="caller").map(o=>Symbol[o]).filter(h)),oe=re();function re(){const o={};return["includes","indexOf","lastIndexOf"].forEach(r=>{o[r]=function(...S){const E=qe(this);for(let C=0,R=this.length;C<R;C++)X(E,"get",C+"");const x=E[r](...S);return x===-1||x===!1?E[r](...S.map(qe)):x}}),["push","pop","shift","unshift","splice"].forEach(r=>{o[r]=function(...S){G();const E=qe(this)[r].apply(this,S);return Q(),E}}),o}function se(o){const r=qe(this);return X(r,"has",o),r.hasOwnProperty(o)}class ie{constructor(r=!1,S=!1){this._isReadonly=r,this._shallow=S}get(r,S,E){const x=this._isReadonly,C=this._shallow;if(S==="__v_isReactive")return!x;if(S==="__v_isReadonly")return x;if(S==="__v_isShallow")return C;if(S==="__v_raw"&&E===(x?C?Me:Te:C?Ie:Pe).get(r))return r;const R=l(r);if(!x){if(R&&a(oe,S))return Reflect.get(oe,S,E);if(S==="hasOwnProperty")return se}const Ce=Reflect.get(r,S,E);return(h(S)?ne.has(S):te(S))?Ce:(x||X(r,"get",S),C?Ce:Ge(Ce)?R&&w(S)?Ce:Ce.value:v(Ce)?x?Ae(Ce):Fe(Ce):Ce)}}class ce extends ie{constructor(r=!1){super(!1,r)}set(r,S,E,x){let C=r[S];if(We(C)&&Ge(C)&&!Ge(E))return!1;if(!this._shallow&&(Je(E)||We(E)||(C=qe(C),E=qe(E)),!l(r)&&Ge(C)&&!Ge(E)))return C.value=E,!0;const R=l(r)&&w(S)?Number(S)<r.length:a(r,S),Ce=Reflect.set(r,S,E,x);return r===qe(x)&&(R?N(E,C)&&Y(r,"set",S,E):Y(r,"add",S,E)),Ce}deleteProperty(r,S){const E=a(r,S);r[S];const x=Reflect.deleteProperty(r,S);return x&&E&&Y(r,"delete",S,void 0),x}has(r,S){const E=Reflect.has(r,S);return h(S)&&ne.has(S)||X(r,"has",S),E}ownKeys(r){return X(r,"iterate",l(r)?"length":W),Reflect.ownKeys(r)}}class ae extends ie{constructor(r=!1){super(!0,r)}set(r,S){return!0}deleteProperty(r,S){return!0}}const le=new ce,ue=new ae;new ae(!0);const fe=o=>o,de=o=>Reflect.getPrototypeOf(o);function he(o,r,S=!1,E=!1){const x=qe(o=o.__v_raw),C=qe(r);S||(N(r,C)&&X(x,"get",r),X(x,"get",C));const{has:R}=de(x),Ce=E?fe:S?Le:Be;return R.call(x,r)?Ce(o.get(r)):R.call(x,C)?Ce(o.get(C)):void(o!==x&&o.get(r))}function ve(o,r=!1){const S=this.__v_raw,E=qe(S),x=qe(o);return r||(N(o,x)&&X(E,"has",o),X(E,"has",x)),o===x?S.has(o):S.has(o)||S.has(x)}function _e(o,r=!1){return o=o.__v_raw,!r&&X(qe(o),"iterate",W),Reflect.get(o,"size",o)}function ge(o){o=qe(o);const r=qe(this);return de(r).has.call(r,o)||(r.add(o),Y(r,"add",o,o)),this}function ye(o,r){r=qe(r);const S=qe(this),{has:E,get:x}=de(S);let C=E.call(S,o);C||(o=qe(o),C=E.call(S,o));const R=x.call(S,o);return S.set(o,r),C?N(r,R)&&Y(S,"set",o,r):Y(S,"add",o,r),this}function be(o){const r=qe(this),{has:S,get:E}=de(r);let x=S.call(r,o);x||(o=qe(o),x=S.call(r,o)),E&&E.call(r,o);const C=r.delete(o);return x&&Y(r,"delete",o,void 0),C}function me(){const o=qe(this),r=o.size!==0,S=o.clear();return r&&Y(o,"clear",void 0,void 0),S}function we(o,r){return function(S,E){const x=this,C=x.__v_raw,R=qe(C),Ce=r?fe:o?Le:Be;return!o&&X(R,"iterate",W),C.forEach((Ue,je)=>S.call(E,Ce(Ue),Ce(je),x))}}function Ee(o,r,S){return function(...E){const x=this.__v_raw,C=qe(x),R=u(C),Ce=o==="entries"||o===Symbol.iterator&&R,Ue=o==="keys"&&R,je=x[o](...E),Xe=S?fe:r?Le:Be;return!r&&X(C,"iterate",Ue?J:W),{next(){const{value:Ye,done:St}=je.next();return St?{value:Ye,done:St}:{value:Ce?[Xe(Ye[0]),Xe(Ye[1])]:Xe(Ye),done:St}},[Symbol.iterator](){return this}}}}function Ne(o){return function(...r){return o!=="delete"&&(o==="clear"?void 0:this)}}function Oe(){const o={get(x){return he(this,x)},get size(){return _e(this)},has:ve,add:ge,set:ye,delete:be,clear:me,forEach:we(!1,!1)},r={get(x){return he(this,x,!1,!0)},get size(){return _e(this)},has:ve,add:ge,set:ye,delete:be,clear:me,forEach:we(!1,!0)},S={get(x){return he(this,x,!0)},get size(){return _e(this,!0)},has(x){return ve.call(this,x,!0)},add:Ne("add"),set:Ne("set"),delete:Ne("delete"),clear:Ne("clear"),forEach:we(!0,!1)},E={get(x){return he(this,x,!0,!0)},get size(){return _e(this,!0)},has(x){return ve.call(this,x,!0)},add:Ne("add"),set:Ne("set"),delete:Ne("delete"),clear:Ne("clear"),forEach:we(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(x=>{o[x]=Ee(x,!1,!1),S[x]=Ee(x,!0,!1),r[x]=Ee(x,!1,!0),E[x]=Ee(x,!0,!0)}),[o,S,r,E]}const[ke,Ve,Se,xe]=Oe();function De(o,r){const S=r?o?xe:Se:o?Ve:ke;return(E,x,C)=>x==="__v_isReactive"?!o:x==="__v_isReadonly"?o:x==="__v_raw"?E:Reflect.get(a(S,x)&&x in E?S:E,x,C)}const $e={get:De(!1,!1)},Re={get:De(!0,!1)},Pe=new WeakMap,Ie=new WeakMap,Te=new WeakMap,Me=new WeakMap;function Fe(o){return We(o)?o:ze(o,!1,le,$e,Pe)}function Ae(o){return ze(o,!0,ue,Re,Te)}function ze(o,r,S,E,x){if(!v(o)||o.__v_raw&&(!r||!o.__v_isReactive))return o;const C=x.get(o);if(C)return C;const R=(Ce=o).__v_skip||!Object.isExtensible(Ce)?0:function(je){switch(je){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(b(Ce));var Ce;if(R===0)return o;const Ue=new Proxy(o,R===2?E:S);return x.set(o,Ue),Ue}function He(o){return We(o)?He(o.__v_raw):!(!o||!o.__v_isReactive)}function We(o){return!(!o||!o.__v_isReadonly)}function Je(o){return!(!o||!o.__v_isShallow)}function qe(o){const r=o&&o.__v_raw;return r?qe(r):o}const Be=o=>v(o)?Fe(o):o,Le=o=>v(o)?Ae(o):o;function Ge(o){return!(!o||o.__v_isRef!==!0)}const Qe={get:(o,r,S)=>{return Ge(E=Reflect.get(o,r,S))?E.value:E;var E},set:(o,r,S,E)=>{const x=o[r];return Ge(x)&&!Ge(S)?(x.value=S,!0):Reflect.set(o,r,S,E)}};function nt(o,r,S,E){let x;try{x=E?o(...E):o()}catch(C){rt(C,r,S)}return x}function ot(o,r,S,E){if(f(o)){const C=nt(o,r,S,E);return C&&_(C)&&C.catch(R=>{rt(R,r,S)}),C}const x=[];for(let C=0;C<o.length;C++)x.push(ot(o[C],r,S,E));return x}function rt(o,r,S,E=!0){const x=r?r.vnode:null;if(r){let C=r.parent;const R=r.proxy,Ce=S;for(;C;){const je=C.ec;if(je){for(let Xe=0;Xe<je.length;Xe++)if(je[Xe](o,R,Ce)===!1)return}C=C.parent}const Ue=r.appContext.config.errorHandler;if(Ue)return void nt(Ue,null,10,[o,R,Ce])}(function(C,R,Ce,Ue=!0){console.error(C)})(o,S,x,E)}let st=!1,it=!1;const ct=[];let at=0;const lt=[];let ut=null,pt=0;const ft=Promise.resolve();let dt=null;function vt(o){const r=dt||ft;return o?r.then(this?o.bind(this):o):r}function _t(o){ct.length&&ct.includes(o,st&&o.allowRecurse?at+1:at)||(o.id==null?ct.push(o):ct.splice(function(r){let S=at+1,E=ct.length;for(;S<E;){const x=S+E>>>1,C=ct[x],R=bt(C);R<r||R===r&&C.pre?S=x+1:E=x}return S}(o.id),0,o),gt())}function gt(){st||it||(it=!0,dt=ft.then(wt))}function yt(o){l(o)?lt.push(...o):ut&&ut.includes(o,o.allowRecurse?pt+1:pt)||lt.push(o),gt()}const bt=o=>o.id==null?1/0:o.id,mt=(o,r)=>{const S=bt(o)-bt(r);if(S===0){if(o.pre&&!r.pre)return-1;if(r.pre&&!o.pre)return 1}return S};function wt(o){it=!1,st=!0,ct.sort(mt);try{for(at=0;at<ct.length;at++){const r=ct[at];r&&r.active!==!1&&nt(r,null,14)}}finally{at=0,ct.length=0,function(r){if(lt.length){const S=[...new Set(lt)];if(lt.length=0,ut)return void ut.push(...S);for(ut=S,ut.sort((E,x)=>bt(E)-bt(x)),pt=0;pt<ut.length;pt++)ut[pt]();ut=null,pt=0}}(),st=!1,dt=null,(ct.length||lt.length)&&wt()}}const Rt={};function Ct(o,r,{immediate:S,deep:E,flush:x,onTrack:C,onTrigger:R}=t){var Ce;const Ue=P===((Ce=pn)==null?void 0:Ce.scope)?pn:null;let je,Xe,Ye=!1,St=!1;if(Ge(o)?(je=()=>o.value,Ye=Je(o)):He(o)?(je=()=>o,E=!0):l(o)?(St=!0,Ye=o.some(Mt=>He(Mt)||Je(Mt)),je=()=>o.map(Mt=>Ge(Mt)?Mt.value:He(Mt)?Pt(Mt):f(Mt)?nt(Mt,Ue,2):void 0)):f(o)?je=r?()=>nt(o,Ue,2):()=>{if(!Ue||!Ue.isUnmounted)return Xe&&Xe(),ot(o,Ue,3,[Dt])}:je=n,r&&E){const Mt=je;je=()=>Pt(Mt())}let Dt=Mt=>{Xe=xt.onStop=()=>{nt(Mt,Ue,4),Xe=xt.onStop=void 0}},kt=St?new Array(o.length).fill(Rt):Rt;const et=()=>{if(xt.active)if(r){const Mt=xt.run();(E||Ye||(St?Mt.some((Ot,Ut)=>N(Ot,kt[Ut])):N(Mt,kt)))&&(Xe&&Xe(),ot(r,Ue,3,[Mt,kt===Rt?void 0:St&&kt[0]===Rt?[]:kt,Dt]),kt=Mt)}else xt.run()};let Ft;et.allowRecurse=!!r,x==="sync"?Ft=et:x==="post"?Ft=()=>Lt(et,Ue&&Ue.suspense):(et.pre=!0,Ue&&(et.id=Ue.uid),Ft=()=>_t(et));const xt=new K(je,Ft);return r?S?et():kt=xt.run():x==="post"?Lt(xt.run.bind(xt),Ue&&Ue.suspense):xt.run(),()=>{xt.stop(),Ue&&Ue.scope&&i(Ue.scope.effects,xt)}}function jt(o,r,S){const E=this.proxy,x=d(o)?o.includes(".")?function(Ue,je){const Xe=je.split(".");return()=>{let Ye=Ue;for(let St=0;St<Xe.length&&Ye;St++)Ye=Ye[Xe[St]];return Ye}}(E,o):()=>E[o]:o.bind(E,E);let C;f(r)?C=r:(C=r.handler,S=r);const R=pn;dn(this);const Ce=Ct(x,C.bind(E),S);return R?dn(R):hn(),Ce}function Pt(o,r){if(!v(o)||o.__v_skip||(r=r||new Set).has(o))return o;if(r.add(o),Ge(o))Pt(o.value,r);else if(l(o))for(let S=0;S<o.length;S++)Pt(o[S],r);else if(p(o)||u(o))o.forEach(S=>{Pt(S,r)});else if(m(o))for(const S in o)Pt(o[S],r);return o}const It=o=>o?4&o.vnode.shapeFlag?function(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy((E=r.exposed,O(E,"__v_skip",!0),He(S=E)?S:new Proxy(S,Qe)),{get:(x,C)=>C in x?x[C]:C in Tt?Tt[C](r):void 0,has:(x,C)=>C in x||C in Tt}));var S,E}(o)||o.proxy:It(o.parent):null,Tt=s(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>o.props,$attrs:o=>o.attrs,$slots:o=>o.slots,$refs:o=>o.refs,$parent:o=>It(o.parent),$root:o=>It(o.root),$emit:o=>o.emit,$options:o=>function(r){const S=r.type,{mixins:E,extends:x}=S,{mixins:C,optionsCache:R,config:{optionMergeStrategies:Ce}}=r.appContext,Ue=R.get(S);let je;return Ue?je=Ue:C.length||E||x?(je={},C.length&&C.forEach(Xe=>zt(je,Xe,Ce,!0)),zt(je,S,Ce)):je=S,v(S)&&R.set(S,je),je}(o),$forceUpdate:o=>o.f||(o.f=()=>_t(o.update)),$nextTick:o=>o.n||(o.n=vt.bind(o.proxy)),$watch:o=>jt.bind(o)});function At(o){return l(o)?o.reduce((r,S)=>(r[S]=null,r),{}):o}function zt(o,r,S,E=!1){const{mixins:x,extends:C}=r;C&&zt(o,C,S,!0),x&&x.forEach(R=>zt(o,R,S,!0));for(const R in r)if(!(E&&R==="expose")){const Ce=Ht[R]||S&&S[R];o[R]=Ce?Ce(o[R],r[R]):r[R]}return o}const Ht={data:Wt,props:Bt,emits:Bt,methods:qt,computed:qt,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:qt,directives:qt,watch:function(o,r){if(!o)return r;if(!r)return o;const S=s(Object.create(null),o);for(const E in r)S[E]=Kt(o[E],r[E]);return S},provide:Wt,inject:function(o,r){return qt(Jt(o),Jt(r))}};function Wt(o,r){return r?o?function(){return s(f(o)?o.call(this,this):o,f(r)?r.call(this,this):r)}:r:o}function Jt(o){if(l(o)){const r={};for(let S=0;S<o.length;S++)r[o[S]]=o[S];return r}return o}function Kt(o,r){return o?[...new Set([].concat(o,r))]:r}function qt(o,r){return o?s(Object.create(null),o,r):r}function Bt(o,r){return o?l(o)&&l(r)?[...new Set([...o,...r])]:s(Object.create(null),At(o),At(r??{})):r}const Lt=function(o,r){r&&r.pendingBranch?l(o)?r.effects.push(...o):r.effects.push(o):yt(o)};let ln,un,pn=null,fn="__VUE_INSTANCE_SETTERS__";(un=V()[fn])||(un=V()[fn]=[]),un.push(o=>pn=o),ln=o=>{un.length>1?un.forEach(r=>r(o)):un[0](o)};const dn=o=>{ln(o),o.scope.on()},hn=()=>{pn&&pn.scope.off(),ln(null)};function wn(o,r,S){if(arguments.length===2)for(var E,x=0,C=r.length;x<C;x++)!E&&x in r||(E||(E=Array.prototype.slice.call(r,0,x)),E[x]=r[x]);return o.concat(E||Array.prototype.slice.call(r))}function En(o,r){if(o===r)return!0;if(typeof o=="object"){for(var S in o)if(!En(o[S],r[S]))return!1;return!0}return!1}var Nn=function(){function o(r,S){this.el=r,this.observer=null,this.frozen=!1,this.createObserver(S)}return Object.defineProperty(o.prototype,"threshold",{get:function(){return this.options.intersection&&this.options.intersection.threshold||0},enumerable:!1,configurable:!0}),o.prototype.createObserver=function(r){var S=this;if(this.observer&&this.destroyObserver(),!this.frozen){var E;if(this.options=typeof(E=r)=="function"?{callback:E}:E,this.callback=function(C,R){S.options.callback(C,R),C&&S.options.once&&(S.frozen=!0,S.destroyObserver())},this.callback&&this.options.throttle){var x=(this.options.throttleOptions||{}).leading;this.callback=function(C,R,Ce){var Ue,je,Xe;Ce===void 0&&(Ce={});var Ye=function(St){for(var Dt=[],kt=1;kt<arguments.length;kt++)Dt[kt-1]=arguments[kt];if(Xe=Dt,!Ue||St!==je){var et=Ce.leading;typeof et=="function"&&(et=et(St,je)),Ue&&St===je||!et||C.apply(void 0,wn([St],Xe,!1)),je=St,clearTimeout(Ue),Ue=setTimeout(function(){C.apply(void 0,wn([St],Xe,!1)),Ue=0},R)}};return Ye._clear=function(){clearTimeout(Ue),Ue=null},Ye}(this.callback,this.options.throttle,{leading:function(C){return x==="both"||x==="visible"&&C||x==="hidden"&&!C}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(C){var R=C[0];if(C.length>1){var Ce=C.find(function(je){return je.isIntersecting});Ce&&(R=Ce)}if(S.callback){var Ue=R.isIntersecting&&R.intersectionRatio>=S.threshold;if(Ue===S.oldResult)return;S.oldResult=Ue,S.callback(Ue,R)}},this.options.intersection),vt(function(){S.observer&&S.observer.observe(S.el)})}},o.prototype.destroyObserver=function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)},o}(),On={beforeMount:function(o,r){var S=r.value;S&&(typeof IntersectionObserver>"u"?console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill"):o._vue_visibilityState=new Nn(o,S))},updated:function(o,r){var S=r.value;if(!En(S,r.oldValue)){var E=o._vue_visibilityState;S&&E&&E.createObserver(S)}},unmounted:function(o){var r=o._vue_visibilityState;r&&(r.destroyObserver(),delete o._vue_visibilityState)}},kn={install:function(o){o.directive("observe-visibility",On)}};function touchX(o){return o.type.indexOf("mouse")!==-1?o.clientX:o.touches[0].clientX}function touchY(o){return o.type.indexOf("mouse")!==-1?o.clientY:o.touches[0].clientY}var isPassiveSupported=function(){var o=!1;try{var r=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,r)}catch{}return o}(),vueTouchEvents={install:function(o,r){var S=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100,namespace:"touch"},r);function E(et){var Ft=this.$$touchObj,xt=et.type.indexOf("touch")>=0,Mt=et.type.indexOf("mouse")>=0,Ot=this;xt&&(Ft.lastTouchStartTime=et.timeStamp),!(Mt&&Ft.lastTouchStartTime&&et.timeStamp-Ft.lastTouchStartTime<350)&&(Ft.touchStarted||(Ye(this),Ft.touchStarted=!0,Ft.touchMoved=!1,Ft.swipeOutBounded=!1,Ft.startX=touchX(et),Ft.startY=touchY(et),Ft.currentX=0,Ft.currentY=0,Ft.touchStartTime=et.timeStamp,Ft.hasSwipe=je(this,"swipe")||je(this,"swipe.left")||je(this,"swipe.right")||je(this,"swipe.top")||je(this,"swipe.bottom"),je(this,"hold")&&(Ft.touchHoldTimer=setTimeout(function(){Ft.touchHoldTimer=null,Xe(et,Ot,"hold")},Ft.options.touchHoldTolerance)),Xe(et,this,"press")))}function x(et){var Ft=this.$$touchObj,xt=touchX(et),Mt=touchY(et),Ot=Ft.currentX!=xt||Ft.currentY!=Mt;if(Ft.currentX=xt,Ft.currentY=Mt,Ft.touchMoved){if(Ft.hasSwipe&&!Ft.swipeOutBounded){var Xt=Ft.options.swipeTolerance;Ft.swipeOutBounded=Math.abs(Ft.startX-Ft.currentX)>Xt&&Math.abs(Ft.startY-Ft.currentY)>Xt}}else{var Ut=Ft.options.tapTolerance;Ft.touchMoved=Math.abs(Ft.startX-Ft.currentX)>Ut||Math.abs(Ft.startY-Ft.currentY)>Ut,Ft.touchMoved&&(Dt(Ft),Xe(et,this,"drag.once"))}if(je(this,"rollover")&&Ot){var ei=et.timeStamp,si=Ft.options.rollOverFrequency;(Ft.touchRollTime==null||ei>Ft.touchRollTime+si)&&(Ft.touchRollTime=ei,Xe(et,this,"rollover"))}if(je(this,"drag")&&Ft.touchStarted&&Ft.touchMoved&&Ot){var ei=et.timeStamp,si=Ft.options.dragFrequency;(Ft.touchDragTime==null||ei>Ft.touchDragTime+si)&&(Ft.touchDragTime=ei,Xe(et,this,"drag"))}}function C(){var et=this.$$touchObj;Dt(et),St(this),et.touchStarted=et.touchMoved=!1,et.startX=et.startY=0}function R(et){var Ft=this.$$touchObj,xt=et.type.indexOf("touch")>=0,Mt=et.type.indexOf("mouse")>=0;xt&&(Ft.lastTouchEndTime=et.timeStamp);var Ot=xt&&!Ft.touchHoldTimer;if(Dt(Ft),Ft.touchStarted=!1,St(this),!(Mt&&Ft.lastTouchEndTime&&et.timeStamp-Ft.lastTouchEndTime<350))if(Xe(et,this,"release"),Ft.touchMoved){if(Ft.hasSwipe&&!Ft.swipeOutBounded){var Ut=Ft.options.swipeTolerance,Xt,ei=Math.abs(Ft.startY-Ft.currentY),si=Math.abs(Ft.startX-Ft.currentX);(ei>Ut||si>Ut)&&(ei>si?Xt=Ft.startY>Ft.currentY?"top":"bottom":Xt=Ft.startX>Ft.currentX?"left":"right",je(this,"swipe."+Xt)?Xe(et,this,"swipe."+Xt,Xt):Xe(et,this,"swipe",Xt))}}else if(je(this,"longtap")&&et.timeStamp-Ft.touchStartTime>Ft.options.longTapTimeInterval)et.cancelable&&et.preventDefault(),Xe(et,this,"longtap");else if(je(this,"hold")&&Ot){et.cancelable&&et.preventDefault();return}else Xe(et,this,"tap")}function Ce(){Ye(this)}function Ue(){St(this)}function je(et,Ft){var xt=et.$$touchObj.callbacks[Ft];return xt!=null&&xt.length>0}function Xe(et,Ft,xt,Mt){var Ot=Ft.$$touchObj,Ut=Ot.callbacks[xt];if(Ut==null||Ut.length===0)return null;for(var Xt=0;Xt<Ut.length;Xt++){var ei=Ut[Xt];ei.modifiers.stop&&et.stopPropagation(),ei.modifiers.prevent&&et.preventDefault(),!(ei.modifiers.self&&et.target!==et.currentTarget)&&typeof ei.value=="function"&&(Mt?ei.value(Mt,et):ei.value(et))}}function Ye(et){var Ft=et.$$touchObj.options.touchClass;Ft&&et.classList.add(Ft)}function St(et){var Ft=et.$$touchObj.options.touchClass;Ft&&et.classList.remove(Ft)}function Dt(et){et&&et.touchHoldTimer&&(clearTimeout(et.touchHoldTimer),et.touchHoldTimer=null)}function kt(et,Ft){var xt=et.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:S};return Ft&&(xt.options=Object.assign({},xt.options,Ft)),et.$$touchObj=xt,et.$$touchObj}o.directive(S.namespace,{beforeMount:function(et,Ft){var xt=kt(et),Mt=isPassiveSupported?{passive:!0}:!1,Ot=Ft.arg||"tap";switch(Ot){case"swipe":var Ut=Ft.modifiers;if(Ut.left||Ut.right||Ut.top||Ut.bottom){for(var Xt in Ft.modifiers)if(["left","right","top","bottom"].indexOf(Xt)>=0){var ei="swipe."+Xt;xt.callbacks[ei]=xt.callbacks[ei]||[],xt.callbacks[ei].push(Ft)}}else xt.callbacks.swipe=xt.callbacks.swipe||[],xt.callbacks.swipe.push(Ft);break;case"press":case"drag":Ft.modifiers.disablePassive&&(Mt=!1);default:xt.callbacks[Ot]=xt.callbacks[Ot]||[],xt.callbacks[Ot].push(Ft)}xt.hasBindTouchEvents||(et.addEventListener("touchstart",E,Mt),et.addEventListener("touchmove",x,Mt),et.addEventListener("touchcancel",C),et.addEventListener("touchend",R),xt.options.disableClick||(et.addEventListener("mousedown",E),et.addEventListener("mousemove",x),et.addEventListener("mouseup",R),et.addEventListener("mouseenter",Ce),et.addEventListener("mouseleave",Ue)),xt.hasBindTouchEvents=!0)},unmounted:function(et){Dt(et.$$touchObj),et.removeEventListener("touchstart",E),et.removeEventListener("touchmove",x),et.removeEventListener("touchcancel",C),et.removeEventListener("touchend",R),et.$$touchObj&&!et.$$touchObj.options.disableClick&&(et.removeEventListener("mousedown",E),et.removeEventListener("mousemove",x),et.removeEventListener("mouseup",R),et.removeEventListener("mouseenter",Ce),et.removeEventListener("mouseleave",Ue)),delete et.$$touchObj}}),o.directive(`${S.namespace}-class`,{beforeMount:function(et,Ft){kt(et,{touchClass:Ft.value})}}),o.directive(`${S.namespace}-options`,{beforeMount:function(et,Ft){kt(et,Ft.value)}})}};const clickEventType=function(){return document.ontouchstart!==null?"click":"touchstart"},UNIQUE_ID="__vue_click_away__",onMounted=function(o,r,S){onUnmounted(o);let E=S.context,x=r.value,C=!1;setTimeout(function(){C=!0},0),o[UNIQUE_ID]=function(R){if((!o||!o.contains(R.target))&&x&&C&&typeof x=="function")return x.call(E,R)},document.addEventListener(clickEventType(),o[UNIQUE_ID],!1)},onUnmounted=function(o){document.removeEventListener(clickEventType(),o[UNIQUE_ID],!1),delete o[UNIQUE_ID]},onUpdated=function(o,r,S){r.value!==r.oldValue&&onMounted(o,r,S)},plugin={install:function(o){o.directive("click-away",directive)}},directive={mounted:onMounted,updated:onUpdated,unmounted:onUnmounted};export{renderList as A,index$1 as B,Pusher as C,videojs as D,Et as E,Fragment as F,resolveDirective as G,withModifiers as H,withKeys as I,vModelSelect as J,vModelCheckbox as K,createRouter as L,createWebHashHistory as M,createApp as N,createPinia as O,Pt$1 as P,Bugsnag as Q,BugsnagPluginVue as R,kn as S,vueTouchEvents as T,plugin as U,VueDraggableNext as V,createBaseVNode as a,createVNode as b,createElementBlock as c,defineStore as d,createCommentVNode as e,ref as f,computed as g,useRoute as h,watch as i,onMounted$1 as j,onBeforeUnmount as k,createBlock as l,jwtDecode as m,normalizeClass as n,openBlock as o,normalizeStyle as p,withDirectives as q,resolveComponent as r,createStaticVNode as s,toDisplayString as t,useStorage as u,vModelText as v,withCtx as w,useRouter as x,unref as y,createTextVNode as z};
